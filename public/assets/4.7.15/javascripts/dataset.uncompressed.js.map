{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "lib/assets/javascripts/cartodb3/components/carousel-form-view.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/cartocss.code-mirror.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/code-mirror-bullet.tpl",
    "lib/assets/javascripts/cartodb3/components/code-mirror/code-mirror-error.tpl",
    "lib/assets/javascripts/cartodb3/components/code-mirror/code-mirror-view.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/code-mirror.tpl",
    "lib/assets/javascripts/cartodb3/components/code-mirror/colorpicker.code-mirror.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/hint/custom-list-hint.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/mode/mustache.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/mode/sql.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/placeholder.code-mirror.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/scroll.code-mirror.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/searchcursor.code-mirror.js",
    "lib/assets/javascripts/cartodb3/components/code-mirror/show-hint.code-mirror.js",
    "lib/assets/javascripts/cartodb3/components/context-menu/context-menu-view.js",
    "lib/assets/javascripts/cartodb3/components/custom-carousel/custom-carousel-collection.js",
    "lib/assets/javascripts/cartodb3/components/custom-carousel/custom-carousel-item-model.js",
    "lib/assets/javascripts/cartodb3/components/custom-carousel/custom-carousel-item-view.js",
    "lib/assets/javascripts/cartodb3/components/custom-carousel/custom-carousel-item.tpl",
    "lib/assets/javascripts/cartodb3/components/custom-carousel/custom-carousel-view.js",
    "lib/assets/javascripts/cartodb3/components/custom-carousel/custom-carousel.tpl",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-add.tpl",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-collection.js",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-empty.tpl",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-item-model.js",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-item-view.js",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-item-with-checkbox.tpl",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-item.tpl",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-multi-collection.js",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-multi-item-view.js",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-search-view.js",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-search.tpl",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list-view.js",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-list.tpl",
    "lib/assets/javascripts/cartodb3/components/custom-list/custom-view.js",
    "lib/assets/javascripts/cartodb3/components/dataset/dataset-base-view.js",
    "lib/assets/javascripts/cartodb3/components/error/error-view.js",
    "lib/assets/javascripts/cartodb3/components/error/error.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/base.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/code-editor.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/dropdown-dialog-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/dropdown-item.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/dropdown-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/dropdown.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/filter-list-item-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/filter-list-item.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/filter-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/filter-list-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/measurement-list-item-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/measurement-list-item.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/measurement-list-search.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/measurement-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/measurements-base-collection.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/measurements-collection.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/data-observatory/measurements-filters-collection.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/datetime/datetime-dialog-model.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/datetime/datetime-dialog-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/datetime/datetime-editor-model.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/datetime/datetime-editor-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/datetime/datetime.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/datetime/datetime.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/editor-helpers-extend.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/enabler-editor/enabler-editor-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/enabler-editor/enabler-editor.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/enabler/enabler-reversed.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/enabler/enabler-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/enabler/enabler.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/color-picker/color-picker-template.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/color-picker/color-picker.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/color-picker/template.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/column-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/column-list-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/default-fill-settings.json",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/fill-dialog-model.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/fill-dialog.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/fill-tab-pane.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/fill-template.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/fill.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-collection.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/asset-header-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/asset-header-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/asset-item-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/asset-item-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/assets-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/assets-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/assets-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/input-asset-picker-header.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/input-asset-picker-header.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/input-asset-picker-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/input-asset-picker-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/organization-assets-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/organization-assets-list-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/static-asset-item-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/static-asset-item-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/tab-pane-template.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/upload-assets-error.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/upload-assets-tab.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/upload-assets-tab.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/user-assets-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/user-assets-list-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets-picker/user-assets-tab.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/assets/maki-icons.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-categories/categories-list/categories-list-item-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-categories/categories-list/categories-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-categories/categories-list/categories-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-categories/input-color-categories-list-item.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-categories/input-color-categories-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-categories/input-color-categories-list-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-categories/input-color-categories.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-categories/input-color-categories.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color-dialog-content.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color-file-carousel.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color-file-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color-file-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color-fixed-content-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color-picker/input-color-picker-header.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color-picker/input-color-picker-header.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color-picker/input-color-picker-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color-value-content-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-color.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-ramps/custom-ramp-template.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-ramps/input-color-ramps.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-ramps/input-ramp-content-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-ramps/input-ramp-content-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-ramps/input-ramp-list-item-template.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-ramps/input-ramp-list-item-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-ramps/input-ramp-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/input-ramps/ramps.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-color/quantification-method-item.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-number/input-number-content-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-number/input-number-dialog-content.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-number/input-number-fixed-content-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-number/input-number-value-content-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-number/input-number-value-content-view.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-number/input-number.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/fill/input-number/input-number.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/legend/category-item.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/list/list-item.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/list/list.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/node-dataset/node-dataset-item-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/node-dataset/node-dataset-item.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/node-dataset/node-dataset-selected.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/node-dataset/node-dataset-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/number/number.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/number/number.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/operators/operators-list-collection.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/operators/operators-list-count.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/operators/operators-list-model.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/operators/operators-list-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/operators/operators-list.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/operators/operators-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/operators/operators.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/radio/radio.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/radio/radio.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/select/multi-select-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/select/select-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/select/select.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/select/suggest-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/slider/slider.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/slider/slider.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/sortable-list.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/taglist/taglist-collection.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/taglist/taglist-item-view.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/taglist/taglist.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/taglist/taglist.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/text.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/textarea.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/toggle/toggle.js",
    "lib/assets/javascripts/cartodb3/components/form-components/editors/toggle/toggle.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/field.js",
    "lib/assets/javascripts/cartodb3/components/form-components/field.tpl",
    "lib/assets/javascripts/cartodb3/components/form-components/fieldset-template.js",
    "lib/assets/javascripts/cartodb3/components/form-components/form.js",
    "lib/assets/javascripts/cartodb3/components/form-components/index.js",
    "lib/assets/javascripts/cartodb3/components/form-components/validators/interval.js",
    "lib/assets/javascripts/cartodb3/components/img-loader-view.js",
    "lib/assets/javascripts/cartodb3/components/infobox/infobox-view.js",
    "lib/assets/javascripts/cartodb3/components/inline-editor/inline-editor-view.js",
    "lib/assets/javascripts/cartodb3/components/likes/likes-model.js",
    "lib/assets/javascripts/cartodb3/components/loading/loading.tpl",
    "lib/assets/javascripts/cartodb3/components/loading/quote.tpl",
    "lib/assets/javascripts/cartodb3/components/loading/random-quote.js",
    "lib/assets/javascripts/cartodb3/components/loading/render-loading.js",
    "lib/assets/javascripts/cartodb3/components/metrics/metrics-model.js",
    "lib/assets/javascripts/cartodb3/components/metrics/metrics-tracker.js",
    "lib/assets/javascripts/cartodb3/components/modals/confirmation/modal-confirmation-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/creation/modal-creation-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/dataset-metadata/dataset-metadata-error.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/dataset-metadata/dataset-metadata-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/dataset-metadata/dataset-metadata.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/dataset-metadata/footer/footer-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/dataset-metadata/footer/footer.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/dataset-metadata/form/form-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/dataset-metadata/form/form.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/dataset-metadata/save-metadata-dataset.js",
    "lib/assets/javascripts/cartodb3/components/modals/export-data/modal-export-data-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/export-data/modal-export-data.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/modal-view-model.js",
    "lib/assets/javascripts/cartodb3/components/modals/modal-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/modal.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/modals-service-model.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/create-privacy-options.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/privacy-collection.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/privacy-model.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/privacy-password-model.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish-button-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish-button.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish/create-share-options.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish/icon-embed.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish/icon-link.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish/publish-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish/publish.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish/share-collection.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish/share-item-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish/share-item.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/publish/share-model.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share-with-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share-with.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share/share-list-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share/share-permission-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share/share-permission.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share/share-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share/share.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share/user-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share/user.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share/users-group-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/share/users-group.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/tab-pane-submenu.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/publish/upgrade-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/publish/upgrade.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/remove-dataset/remove-dataset-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/remove-dataset/remove-dataset.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/sync-options/sync-options-modal-view.js",
    "lib/assets/javascripts/cartodb3/components/modals/sync-options/sync-options-modal.tpl",
    "lib/assets/javascripts/cartodb3/components/modals/visualization-title-suffix-metadata.js",
    "lib/assets/javascripts/cartodb3/components/no-results/no-results.tpl",
    "lib/assets/javascripts/cartodb3/components/no-results/render-no-results.js",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier-action-view.js",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier-action.tpl",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier-close.tpl",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier-collection.js",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier-item-view.js",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier-item.tpl",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier-model.js",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier-view.js",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier.js",
    "lib/assets/javascripts/cartodb3/components/notifier/notifier.tpl",
    "lib/assets/javascripts/cartodb3/components/onboardings/builder-activated/builder-activated-notification-view.js",
    "lib/assets/javascripts/cartodb3/components/onboardings/builder-activated/builder-activated-notification.tpl",
    "lib/assets/javascripts/cartodb3/components/pagination-search/pagination-search-model.js",
    "lib/assets/javascripts/cartodb3/components/pagination-search/pagination-search-view.js",
    "lib/assets/javascripts/cartodb3/components/pagination-search/pagination-search.tpl",
    "lib/assets/javascripts/cartodb3/components/pagination-search/pagination.tpl",
    "lib/assets/javascripts/cartodb3/components/pagination/pagination-model.js",
    "lib/assets/javascripts/cartodb3/components/pagination/pagination-view.js",
    "lib/assets/javascripts/cartodb3/components/pagination/pagination.tpl",
    "lib/assets/javascripts/cartodb3/components/popup-manager.js",
    "lib/assets/javascripts/cartodb3/components/privacy-dropdown/password-dialog-view.js",
    "lib/assets/javascripts/cartodb3/components/privacy-dropdown/password-dialog.tpl",
    "lib/assets/javascripts/cartodb3/components/privacy-dropdown/privacy-cta.tpl",
    "lib/assets/javascripts/cartodb3/components/privacy-dropdown/privacy-dialog-view.js",
    "lib/assets/javascripts/cartodb3/components/privacy-dropdown/privacy-dropdown-view.js",
    "lib/assets/javascripts/cartodb3/components/privacy-dropdown/privacy-dropdown.tpl",
    "lib/assets/javascripts/cartodb3/components/privacy-dropdown/tab-pane.tpl",
    "lib/assets/javascripts/cartodb3/components/scroll/scroll-view.js",
    "lib/assets/javascripts/cartodb3/components/scroll/scroll.tpl",
    "lib/assets/javascripts/cartodb3/components/stack-layout/stack-layout-model.js",
    "lib/assets/javascripts/cartodb3/components/stack-layout/stack-layout-view.js",
    "lib/assets/javascripts/cartodb3/components/tab-pane/create-mixed-labels-tab-pane.js",
    "lib/assets/javascripts/cartodb3/components/tab-pane/create-text-labels-tab-pane.js",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane-collection.js",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane-color-view.js",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane-color.tpl",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane-file.tpl",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane-item-view.js",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane-label-view.js",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane-label.tpl",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane-mixed-view.js",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane-view.js",
    "lib/assets/javascripts/cartodb3/components/tab-pane/tab-pane.tpl",
    "lib/assets/javascripts/cartodb3/components/table/body/modals-templates/remove-table-row.tpl",
    "lib/assets/javascripts/cartodb3/components/table/body/table-body-cell.tpl",
    "lib/assets/javascripts/cartodb3/components/table/body/table-body-row-view.js",
    "lib/assets/javascripts/cartodb3/components/table/body/table-body-view.js",
    "lib/assets/javascripts/cartodb3/components/table/body/table-body.tpl",
    "lib/assets/javascripts/cartodb3/components/table/body/table-no-rows.tpl",
    "lib/assets/javascripts/cartodb3/components/table/editors/editor-view-model.js",
    "lib/assets/javascripts/cartodb3/components/table/editors/editor-view.js",
    "lib/assets/javascripts/cartodb3/components/table/editors/editors-service-model.js",
    "lib/assets/javascripts/cartodb3/components/table/editors/types/editor-base-view.js",
    "lib/assets/javascripts/cartodb3/components/table/editors/types/editor-boolean-view.js",
    "lib/assets/javascripts/cartodb3/components/table/editors/types/editor-boolean.tpl",
    "lib/assets/javascripts/cartodb3/components/table/editors/types/editor-date-form-model.js",
    "lib/assets/javascripts/cartodb3/components/table/editors/types/editor-date-view.js",
    "lib/assets/javascripts/cartodb3/components/table/editors/types/editor-model.js",
    "lib/assets/javascripts/cartodb3/components/table/editors/types/editor-string-view.js",
    "lib/assets/javascripts/cartodb3/components/table/head/modals-templates/change-table-column-type.tpl",
    "lib/assets/javascripts/cartodb3/components/table/head/modals-templates/remove-table-column.tpl",
    "lib/assets/javascripts/cartodb3/components/table/head/modals-templates/rename-table-column.tpl",
    "lib/assets/javascripts/cartodb3/components/table/head/table-head-item-view.js",
    "lib/assets/javascripts/cartodb3/components/table/head/table-head-item.tpl",
    "lib/assets/javascripts/cartodb3/components/table/head/table-head-options-item-view.js",
    "lib/assets/javascripts/cartodb3/components/table/head/table-head-options-item.tpl",
    "lib/assets/javascripts/cartodb3/components/table/head/table-head-view.js",
    "lib/assets/javascripts/cartodb3/components/table/head/table-head.tpl",
    "lib/assets/javascripts/cartodb3/components/table/operations/table-add-column.js",
    "lib/assets/javascripts/cartodb3/components/table/operations/table-add-row.js",
    "lib/assets/javascripts/cartodb3/components/table/operations/table-change-column-type.js",
    "lib/assets/javascripts/cartodb3/components/table/operations/table-edit-cell.js",
    "lib/assets/javascripts/cartodb3/components/table/operations/table-remove-column.js",
    "lib/assets/javascripts/cartodb3/components/table/operations/table-remove-row.js",
    "lib/assets/javascripts/cartodb3/components/table/operations/table-rename-column.js",
    "lib/assets/javascripts/cartodb3/components/table/paginator/table-paginator-loader.tpl",
    "lib/assets/javascripts/cartodb3/components/table/paginator/table-paginator-view.js",
    "lib/assets/javascripts/cartodb3/components/table/paginator/table-paginator.tpl",
    "lib/assets/javascripts/cartodb3/components/table/table-manager.js",
    "lib/assets/javascripts/cartodb3/components/table/table-view-model.js",
    "lib/assets/javascripts/cartodb3/components/table/table-view.js",
    "lib/assets/javascripts/cartodb3/components/tipsy-tooltip-view.js",
    "lib/assets/javascripts/cartodb3/components/toggler/toggler-view.js",
    "lib/assets/javascripts/cartodb3/components/toggler/toggler.tpl",
    "lib/assets/javascripts/cartodb3/components/undo-redo/undo-redo-view.js",
    "lib/assets/javascripts/cartodb3/components/undo-redo/undo-redo.tpl",
    "lib/assets/javascripts/cartodb3/components/view-options/panel-with-options-view.js",
    "lib/assets/javascripts/cartodb3/components/view-options/panel-with-options.tpl",
    "lib/assets/javascripts/cartodb3/data/acl-item-model.js",
    "lib/assets/javascripts/cartodb3/data/analysis-definition-node-model.js",
    "lib/assets/javascripts/cartodb3/data/analysis-definition-node-source-model.js",
    "lib/assets/javascripts/cartodb3/data/asset-model.js",
    "lib/assets/javascripts/cartodb3/data/assets-collection.js",
    "lib/assets/javascripts/cartodb3/data/backbone/sync-abort.js",
    "lib/assets/javascripts/cartodb3/data/background-importer/import-model-poller.js",
    "lib/assets/javascripts/cartodb3/data/background-importer/import-model.js",
    "lib/assets/javascripts/cartodb3/data/background-importer/poller.js",
    "lib/assets/javascripts/cartodb3/data/camshaft-reference.js",
    "lib/assets/javascripts/cartodb3/data/column-model.js",
    "lib/assets/javascripts/cartodb3/data/config-model.js",
    "lib/assets/javascripts/cartodb3/data/custom-baselayer-model.js",
    "lib/assets/javascripts/cartodb3/data/custom-baselayers-collection.js",
    "lib/assets/javascripts/cartodb3/data/default-cartography.json",
    "lib/assets/javascripts/cartodb3/data/default-form-styles.json",
    "lib/assets/javascripts/cartodb3/data/editor-model.js",
    "lib/assets/javascripts/cartodb3/data/get-simple-geometry-type.js",
    "lib/assets/javascripts/cartodb3/data/grantables-collection.js",
    "lib/assets/javascripts/cartodb3/data/group-model.js",
    "lib/assets/javascripts/cartodb3/data/infowindow-click-model.js",
    "lib/assets/javascripts/cartodb3/data/infowindow-definition-model.js",
    "lib/assets/javascripts/cartodb3/data/infowindow-hover-model.js",
    "lib/assets/javascripts/cartodb3/data/layer-definition-model.js",
    "lib/assets/javascripts/cartodb3/data/layer-types-and-kinds.js",
    "lib/assets/javascripts/cartodb3/data/organization-assets-collection.js",
    "lib/assets/javascripts/cartodb3/data/organization-model.js",
    "lib/assets/javascripts/cartodb3/data/permission-model.js",
    "lib/assets/javascripts/cartodb3/data/query-column-model.js",
    "lib/assets/javascripts/cartodb3/data/query-columns-collection.js",
    "lib/assets/javascripts/cartodb3/data/query-geometry-model.js",
    "lib/assets/javascripts/cartodb3/data/query-row-model.js",
    "lib/assets/javascripts/cartodb3/data/query-rows-collection.js",
    "lib/assets/javascripts/cartodb3/data/query-schema-model.js",
    "lib/assets/javascripts/cartodb3/data/static-asset-model.js",
    "lib/assets/javascripts/cartodb3/data/static-assets-collection.js",
    "lib/assets/javascripts/cartodb3/data/synchronization-model.js",
    "lib/assets/javascripts/cartodb3/data/table-columns-collection.js",
    "lib/assets/javascripts/cartodb3/data/table-model.js",
    "lib/assets/javascripts/cartodb3/data/undo-manager.js",
    "lib/assets/javascripts/cartodb3/data/user-groups-collection.js",
    "lib/assets/javascripts/cartodb3/data/user-model.js",
    "lib/assets/javascripts/cartodb3/data/user-notifications.js",
    "lib/assets/javascripts/cartodb3/data/users-group-collection.js",
    "lib/assets/javascripts/cartodb3/data/users-group-fetcher.js",
    "lib/assets/javascripts/cartodb3/data/vis-definition-model.js",
    "lib/assets/javascripts/cartodb3/data/vis-metadata-model.js",
    "lib/assets/javascripts/cartodb3/data/visualization-table-model.js",
    "lib/assets/javascripts/cartodb3/dataset.js",
    "lib/assets/javascripts/cartodb3/dataset/data-sql-model.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-content/dataset-content-options-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-content/dataset-content-options.tpl",
    "lib/assets/javascripts/cartodb3/dataset/dataset-content/dataset-content-sync-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-content/dataset-content-sync.tpl",
    "lib/assets/javascripts/cartodb3/dataset/dataset-content/dataset-content-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-header/create-context-menu.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-header/dataset-header-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-header/dataset-header.tpl",
    "lib/assets/javascripts/cartodb3/dataset/dataset-header/inline-editor.tpl",
    "lib/assets/javascripts/cartodb3/dataset/dataset-header/rename-confirmation-modal.tpl",
    "lib/assets/javascripts/cartodb3/dataset/dataset-options/code-mirror-error.tpl",
    "lib/assets/javascripts/cartodb3/dataset/dataset-options/dataset-actions-edition-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-options/dataset-actions-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-options/dataset-actions.tpl",
    "lib/assets/javascripts/cartodb3/dataset/dataset-options/dataset-options-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-options/dataset-sql-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-options/preview-map-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-options/preview-map.tpl",
    "lib/assets/javascripts/cartodb3/dataset/dataset-unlock-modal-view.js",
    "lib/assets/javascripts/cartodb3/dataset/dataset-unlock-modal.tpl",
    "lib/assets/javascripts/cartodb3/dataset/operations/table-delete-operation.js",
    "lib/assets/javascripts/cartodb3/dataset/operations/table-duplication-operation.js",
    "lib/assets/javascripts/cartodb3/dataset/operations/table-rename-operation.js",
    "lib/assets/javascripts/cartodb3/editor/editor-hints/factory-hints.js",
    "lib/assets/javascripts/cartodb3/editor/editor-hints/sql-hints.js",
    "lib/assets/javascripts/cartodb3/editor/layers/layer-content-views/data/data-sql-model.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-cartocss-model.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-defaults/animation-style-defaults.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-defaults/heatmap-style-defaults.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-defaults/hexabins-aggregation-style-defaults.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-defaults/regions-aggregation-style-defaults.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-defaults/simple-style-defaults.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-defaults/squares-aggregation-style-defaults.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-defaults/style-defaults.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-definition-model.js",
    "lib/assets/javascripts/cartodb3/editor/style/style-icons/animated.tpl",
    "lib/assets/javascripts/cartodb3/editor/style/style-icons/heatmap.tpl",
    "lib/assets/javascripts/cartodb3/editor/style/style-icons/hexabins.tpl",
    "lib/assets/javascripts/cartodb3/editor/style/style-icons/points.tpl",
    "lib/assets/javascripts/cartodb3/editor/style/style-icons/regions.tpl",
    "lib/assets/javascripts/cartodb3/editor/style/style-icons/squares.tpl",
    "lib/assets/javascripts/cartodb3/editor/style/styles-factory.js",
    "lib/assets/javascripts/cartodb3/helpers/browser-detect.js",
    "lib/assets/javascripts/cartodb3/helpers/color-keywords.js",
    "lib/assets/javascripts/cartodb3/helpers/error-parser.js",
    "lib/assets/javascripts/cartodb3/helpers/fetch-all-query-objects.js",
    "lib/assets/javascripts/cartodb3/helpers/magic-positioner.js",
    "lib/assets/javascripts/cartodb3/helpers/mapcard-preview.js",
    "lib/assets/javascripts/cartodb3/helpers/navigate-through-router.js",
    "lib/assets/javascripts/cartodb3/helpers/point-geojson-parser.js",
    "lib/assets/javascripts/cartodb3/helpers/required-opts.js",
    "lib/assets/javascripts/cartodb3/helpers/sql-utils.js",
    "lib/assets/javascripts/cartodb3/helpers/table-name-utils.js",
    "lib/assets/javascripts/cartodb3/helpers/utils.js",
    "lib/assets/javascripts/cartodb3/mustache-templates/infowindows/infowindow_color.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/infowindows/infowindow_dark.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/infowindows/infowindow_header_with_image.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/infowindows/infowindow_light.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/infowindows_custom/infowindow_color.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/infowindows_custom/infowindow_dark.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/infowindows_custom/infowindow_header_with_image.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/infowindows_custom/infowindow_light.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/tooltips/tooltip_dark.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/tooltips/tooltip_light.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/tooltips_custom/tooltip_dark.jst.mustache",
    "lib/assets/javascripts/cartodb3/mustache-templates/tooltips_custom/tooltip_light.jst.mustache",
    "lib/assets/javascripts/cartodb3/sql-notifications.js",
    "lib/assets/javascripts/cartodb3/value-objects/analysis-node-ids.js",
    "lib/assets/locale/en.json",
    "lib/assets/locale/es.json",
    "lib/assets/locale/index.js",
    "lib/assets/locale/sw.json",
    "lib/assets/node_modules/backbone/core-view.js",
    "lib/assets/node_modules/jquery-ui.js",
    "vendor/assets/javascripts/dragster.js",
    "vendor/assets/javascripts/dropzone.js",
    "vendor/assets/javascripts/jquery.tipsy.js",
    "vendor/assets/javascripts/tag-it.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACreA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1KA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzTA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxugBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/rDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar CarouselView = require('./custom-carousel/custom-carousel-view');\n\n/**\n *  Carousel form view\n */\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.collection) throw new Error('Carousel collection is required');\n    if (!opts.template) throw new Error('template is required');\n    this.template = opts.template;\n    this._initBinds();\n  },\n\n  render: function () {\n    var selectedItem = this.collection.getSelected();\n    var selectedName = selectedItem && selectedItem.getName();\n    this.$el.html(\n      this.template({\n        name: selectedName\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.collection.bind('change:highlighted', this._onChangeHighlighted, this);\n  },\n\n  _initViews: function () {\n    var carousel = new CarouselView(_.extend(this.options, {\n      collection: this.collection\n    }));\n\n    if (!this.$('.js-selector').length) throw new Error('HTML element with js-selector class is required');\n\n    this.$('.js-selector').append(carousel.render().el);\n    carousel.initScroll();\n    this.addView(carousel);\n  },\n\n  _onChangeHighlighted: function () {\n    var item = this.collection.getHighlighted() || this.collection.getSelected();\n    if (item) {\n      var $el = this.$('.js-highlight');\n      if ($el) {\n        $el.text(item.getName());\n      }\n    }\n  }\n\n});\n",
    "var COLOR_KEYWORDS = require('../../helpers/color-keywords');\n\n/*\n  LESS mode - http://www.lesscss.org/\n  Ported to CodeMirror by Peter Kroon <plakroon@gmail.com>\n  Report bugs/issues here: https://github.com/marijnh/CodeMirror/issues  GitHub: @peterkroon\n*/\n\nmodule.exports = function (CodeMirror) {\n  CodeMirror.defineMode('cartocss', function (config) {\n    var indentUnit = config.indentUnit;\n    var type;\n\n    function ret (style, tp) {\n      type = tp;\n      return style;\n    }\n    // html tags\n    var tags = 'a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br button canvas caption cite code col colgroup command datalist dd del details dfn dir div dl dt em embed fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins keygen kbd label legend li link map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr'.split(' ');\n    var colorKeywords = keySet(COLOR_KEYWORDS);\n\n    function inTagsArray (val) {\n      for (var i = 0; i < tags.length; i++) {\n        if (val === tags[i]) return true;\n      }\n    }\n\n    var selectors = /(^\\:root$|^\\:nth\\-child$|^\\:nth\\-last\\-child$|^\\:nth\\-of\\-type$|^\\:nth\\-last\\-of\\-type$|^\\:first\\-child$|^\\:last\\-child$|^\\:first\\-of\\-type$|^\\:last\\-of\\-type$|^\\:only\\-child$|^\\:only\\-of\\-type$|^\\:empty$|^\\:link|^\\:visited$|^\\:active$|^\\:hover$|^\\:focus$|^\\:target$|^\\:lang$|^\\:enabled^\\:disabled$|^\\:checked$|^\\:first\\-line$|^\\:first\\-letter$|^\\:before$|^\\:after$|^\\:not$|^\\:required$|^\\:invalid$)/;\n\n    function tokenBase (stream, state) {\n      var ch = stream.next();\n\n      if (ch === '@') {\n        stream.eatWhile(/[\\w\\-]/);\n        return ret('meta', stream.current());\n      } else if (ch === '/' && stream.eat('*')) {\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      } else if (ch === '<' && stream.eat('!')) {\n        state.tokenize = tokenSGMLComment;\n        return tokenSGMLComment(stream, state);\n      } else if (ch === '=') ret(null, 'compare');\n      else if (ch === '|' && stream.eat('=')) return ret(null, 'compare');\n      else if (ch === '\\'' || ch === '\\'') {\n        state.tokenize = tokenString(ch);\n        return state.tokenize(stream, state);\n      } else if (ch === '/') { // e.g.: .png will not be parsed as a class\n        if (stream.eat('/')) {\n          state.tokenize = tokenSComment;\n          return tokenSComment(stream, state);\n        } else {\n          if (type === 'string' || type === '(') {\n            return ret('string', 'string');\n          }\n          if (state.stack[state.stack.length - 1] !== undefined) {\n            return ret(null, ch);\n          }\n          stream.eatWhile(/[\\a-zA-Z0-9\\-_.\\s]/);\n          if (/\\/|\\)|#/.test(stream.peek() || (stream.eatSpace() && stream.peek() === ')')) || stream.eol()) {\n            return ret('string', 'string'); // let url(/images/logo.png) without quotes return as string\n          }\n        }\n      } else if (ch === '!') {\n        stream.match(/^\\s*\\w*/);\n        return ret('keyword', 'important');\n      } else if (/\\d/.test(ch)) {\n        stream.eatWhile(/[\\w.%]/);\n        return ret('number', 'unit');\n      } else if (/[,+<>*\\/]/.test(ch)) {\n        if (stream.peek() === '=' || type === 'a') {\n          return ret('string', 'string');\n        }\n        return ret(null, 'select-op');\n      } else if (/[;{}:\\[\\]()~\\|]/.test(ch)) {\n        if (ch === ':') {\n          stream.eatWhile(/[a-z\\\\\\-]/);\n\n          if (selectors.test(stream.current())) {\n            return ret('tag', 'tag');\n          } else if (stream.peek() === ':') { // ::-webkit-search-decoration\n            stream.next();\n            stream.eatWhile(/[a-z\\\\\\-]/);\n            if (stream.current().match(/\\:\\:\\-(o|ms|moz|webkit)\\-/)) {\n              return ret('string', 'string');\n            }\n            if (selectors.test(stream.current().substring(1))) {\n              return ret('tag', 'tag');\n            }\n            return ret(null, ch);\n          } else {\n            return ret(null, ch);\n          }\n        } else if (ch === '~') {\n          if (type === 'r') {\n            return ret('string', 'string');\n          }\n        } else {\n          return ret(null, ch);\n        }\n      } else if (ch === '.') {\n        if (type === '(' || type === 'string') {\n          return ret('string', 'string'); // allow url(../image.png)\n        }\n        stream.eatWhile(/[\\a-zA-Z0-9\\-_]/);\n        if (stream.peek() === ' ') {\n          stream.eatSpace();\n        }\n        if (stream.peek() === ')') {\n          return ret('number', 'unit'); // rgba(0,0,0,.25);\n        }\n        return ret('tag', 'tag');\n      } else if (ch === '#') {\n        // we don't eat white-space, we want the hex color and or id only\n        stream.eatWhile(/[A-Za-z0-9]/);\n        // check if there is a proper hex color length e.g. #eee || #eeeEEE\n        if (stream.current().length === 4 || stream.current().length === 7) {\n          if (stream.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/, false) != null) { // is there a valid hex color value present in the current stream\n            // when not a valid hex value, parse as id\n            if (stream.current().substring(1) !== stream.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/, false)[0]) {\n              return ret('atom', 'tag');\n            }\n            // eat white-space\n            stream.eatSpace();\n            // when hex value declaration doesn't end with [;,] but is does with a slash/cc comment treat it as an id, just like the other hex values that don't end with[;,]\n            if (/[\\/<>.({!$%^&*_\\-\\\\?=+\\|#'~`]/.test(stream.peek())) {\n              return ret('atom', 'tag');\n            } else if (stream.peek() === '}') {\n              // #time { color: #aaa }\n              return ret('color', 'unit');\n            } else if (/[a-zA-Z\\\\]/.test(stream.peek())) {\n              // we have a valid hex color value, parse as id whenever an element/class is defined after the hex(id) value e.g. #eee aaa || #eee .aaa\n              return ret('color', 'unit');\n            } else if (stream.eol()) {\n              // when a hex value is on the end of a line, parse as id\n              return ret('color', 'unit');\n            } else {\n              // default\n              return ret('color', 'unit');\n            }\n          } else { // when not a valid hexvalue in the current stream e.g. #footer\n            stream.eatWhile(/[\\w\\\\\\-]/);\n            return ret('atom', 'tag');\n          }\n        } else { // when not a valid hexvalue length\n          stream.eatWhile(/[\\w\\\\\\-]/);\n          return ret('atom', 'tag');\n        }\n      } else if (ch === '&') {\n        stream.eatWhile(/[\\w\\-]/);\n        return ret(null, ch);\n      } else {\n        stream.eatWhile(/[\\w\\\\\\-_%.{]/);\n        if (type === 'string') {\n          return ret('string', 'string');\n        } else if (stream.current().match(/(^http$|^https$)/) != null) {\n          stream.eatWhile(/[\\w\\\\\\-_%.{:\\/]/);\n          return ret('string', 'string');\n        } else if (stream.peek() === '<' || stream.peek() === '>') {\n          return ret('tag', 'tag');\n        } else if (/\\(/.test(stream.peek())) {\n          return ret(null, ch);\n        } else if (stream.peek() === '/' && state.stack[state.stack.length - 1] !== undefined) { // url(dir/center/image.png)\n          return ret('string', 'string');\n        } else if (stream.current().match(/\\-\\d|\\-.\\d/)) { // match e.g.: -5px -0.4 etc... only colorize the minus sign\n          // commment out these 2 comment if you want the minus sign to be parsed as null -500px\n          // stream.backUp(stream.current().length-1);\n          // return ret(null, ch); //console.log( stream.current() );\n          return ret('number', 'unit');\n        } else if (inTagsArray(stream.current().toLowerCase())) { // match html tags\n          return ret('tag', 'tag');\n        } else if (/\\/|[\\s\\)]/.test(stream.peek() || stream.eol() || (stream.eatSpace() && stream.peek() === '/')) && stream.current().indexOf('.') !== -1) {\n          if (stream.current().substring(stream.current().length - 1, stream.current().length) === '{') {\n            stream.backUp(1);\n            return ret('tag', 'tag');\n          } // end if\n          stream.eatSpace();\n          if (/[{<>.a-zA-Z\\/]/.test(stream.peek()) || stream.eol()) return ret('tag', 'tag'); // e.g. button.icon-plus\n          return ret('string', 'string'); // let url(/images/logo.png) without quotes return as string\n        } else if (stream.eol() || stream.peek() === '[' || stream.peek() === '#' || type === 'tag') {\n          if (stream.current().substring(stream.current().length - 1, stream.current().length) === '{') stream.backUp(1);\n          return ret('tag', 'tag');\n        } else if (type === 'compare' || type === 'a' || type === '(') {\n          return ret('string', 'string');\n        } else if (type === '|' || stream.current() === '-' || type === '[') {\n          return ret(null, ch);\n        } else if (stream.peek() === ':') {\n          stream.next();\n          var t_v = stream.peek() === ':';\n          if (!t_v) {\n            var old_pos = stream.pos;\n            var sc = stream.current().length;\n            stream.eatWhile(/[a-z\\\\\\-]/);\n            var new_pos = stream.pos;\n            if (stream.current().substring(sc - 1).match(selectors) != null) {\n              stream.backUp(new_pos - (old_pos - 1));\n              return ret('tag', 'tag');\n            } else stream.backUp(new_pos - (old_pos - 1));\n          } else {\n            stream.backUp(1);\n          }\n          if (t_v) return ret('tag', 'tag');\n          else return ret('variable', 'variable');\n\n          // It is a color variable?\n        } else if (colorKeywords.hasOwnProperty(stream.current())) {\n          return ret('color', 'unit');\n        } else {\n          return ret('variable', 'variable');\n        }\n      }\n    }\n\n    function keySet (array) {\n      var keys = {};\n      for (var i = 0; i < array.length; ++i) {\n        keys[array[i]] = true;\n      }\n      return keys;\n    }\n\n    function tokenSComment (stream, state) { // SComment = Slash comment\n      stream.skipToEnd();\n      state.tokenize = tokenBase;\n      return ret('comment', 'comment');\n    }\n\n    function tokenCComment (stream, state) {\n      var maybeEnd = false;\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (maybeEnd && ch === '/') {\n          state.tokenize = tokenBase;\n          break;\n        }\n        maybeEnd = (ch === '*');\n      }\n      return ret('comment', 'comment');\n    }\n\n    function tokenSGMLComment (stream, state) {\n      var dashes = 0;\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (dashes >= 2 && ch === '>') {\n          state.tokenize = tokenBase;\n          break;\n        }\n        dashes = (ch === '-') ? dashes + 1 : 0;\n      }\n      return ret('comment', 'comment');\n    }\n\n    function tokenString (quote) {\n      return function (stream, state) {\n        var escaped = false;\n        var ch;\n        while ((ch = stream.next()) != null) {\n          if (ch === quote && !escaped) {\n            break;\n          }\n          escaped = !escaped && ch === '\\\\';\n        }\n        if (!escaped) state.tokenize = tokenBase;\n        return ret('string', 'string');\n      };\n    }\n\n    return {\n      startState: function (base) {\n        return {\n          tokenize: tokenBase,\n          baseIndent: base || 0,\n          stack: []\n        };\n      },\n\n      token: function (stream, state) {\n        if (stream.eatSpace()) return null;\n        var style = state.tokenize(stream, state);\n\n        var context = state.stack[state.stack.length - 1];\n        if (type === 'hash' && context === 'rule') style = 'atom';\n        else if (style === 'variable') {\n          if (context === 'rule') style = null; // 'tag'\n          else if (!context || context === '@media{') {\n            style = stream.current() === 'when' ? 'variable'\n            : /[\\s,|\\s\\)|\\s]/.test(stream.peek()) ? 'tag' : type;\n          }\n        }\n\n        if (context === 'rule' && /^[\\{\\};]$/.test(type)) {\n          state.stack.pop();\n        }\n        if (type === '{') {\n          if (context === '@media') state.stack[state.stack.length - 1] = '@media{';\n          else state.stack.push('{');\n        } else if (type === '}') state.stack.pop();\n        else if (type === '@media') state.stack.push('@media');\n        else if (context === '{' && type !== 'comment') state.stack.push('rule');\n        return style;\n      },\n\n      indent: function (state, textAfter) {\n        var n = state.stack.length;\n        if (/^\\}/.test(textAfter)) {\n          n -= state.stack[state.stack.length - 1] === 'rule' ? 2 : 1;\n        }\n        return state.baseIndent + n * indentUnit;\n      },\n\n      electricChars: '}'\n    };\n  });\n\n  CodeMirror.defineMIME('text/x-carto', 'cartocss');\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<i class=\"CodeMirror-bullet\"></i>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"CodeMirror-error\">\\n  <li class=\"CodeMirror-errorMessage u-lSpace--xl u-rSpace--xl\">\\n    '+\n((__t=( _t('components.codemirror.syntax-error') ))==null?'':_.escape(__t))+\n'. '+\n((__t=( _t('components.codemirror.line') ))==null?'':_.escape(__t))+\n' '+\n((__t=( line ))==null?'':_.escape(__t))+\n': <span>'+\n((__t=( message ))==null?'':_.escape(__t))+\n'</span>\\n  </li>\\n</ul>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar CodeMirror = require('codemirror');\nvar ColorPicker = require('./colorpicker.code-mirror');\nvar template = require('./code-mirror.tpl');\nvar bulletTemplate = require('./code-mirror-bullet.tpl');\nvar errorTemplate = require('./code-mirror-error.tpl');\n\nrequire('./mode/sql')(CodeMirror);\nrequire('./mode/mustache')(CodeMirror);\nrequire('./cartocss.code-mirror')(CodeMirror);\nrequire('./scroll.code-mirror')(CodeMirror);\nrequire('./show-hint.code-mirror')(CodeMirror);\nrequire('./hint/custom-list-hint')(CodeMirror);\nrequire('./searchcursor.code-mirror')(CodeMirror);\nrequire('./placeholder.code-mirror')(CodeMirror);\n\nvar ESCAPE_KEY_CODE = 27;\nvar RETURN_KEY_CODE = 13;\n\nvar NOHINT = [ESCAPE_KEY_CODE, RETURN_KEY_CODE];\n\nvar ADDONS = {\n  'color-picker': ColorPicker\n};\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-content',\n\n  options: {\n    readonly: false,\n    lineNumbers: true,\n    autocompleteChars: 3\n  },\n\n  initialize: function (opts) {\n    if (!opts) throw new Error('options for codemirror are required.');\n    if (!opts.model) throw new Error('Model for codemirror is required.');\n    if (opts.model.get('content') === void 0 &&\n        opts.placeholder === void 0) throw new Error('Content property or placeholder for codemirror is required.');\n    if (opts.tip === void 0) throw new Error('tip message is required');\n\n    this._autocompleteChars = opts.autocompleteChars || this.options.autocompleteChars;\n    this._mode = opts.mode || 'cartocss';\n    this._addons = opts.addons;\n    this._hints = opts.hints;\n    this._autocompletePrefix = opts.autocompletePrefix;\n    this._autocompleteTriggers = opts.autocompleteTriggers;\n    this._autocompleteSuffix = opts.autocompleteSuffix;\n    this._errorTemplate = opts.errorTemplate || errorTemplate;\n    this._tip = opts.tip;\n    this._lineWithErrors = [];\n    this._onInputRead = _.bind(this._onKeyUpEditor, this);\n    this._placeholder = opts.placeholder;\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        content: this.model.get('content'),\n        tip: this._tip\n      })\n    );\n\n    this._initViews();\n    this._bindEvents();\n    this._showErrors();\n    return this;\n  },\n\n  _initViews: function () {\n    var options = _.defaults(_.extend({}, this.model.toJSON()), this.options);\n\n    var isReadOnly = options.readonly;\n    var hasLineNumbers = options.lineNumbers;\n\n    var extraKeys = {\n      'Ctrl-S': this.triggerApplyEvent.bind(this),\n      'Cmd-S': this.triggerApplyEvent.bind(this),\n      'Ctrl-Space': this._completeIfAfterCtrlSpace.bind(this)\n    };\n\n    this.editor = CodeMirror.fromTextArea(this.$('.js-editor').get(0), {\n      lineNumbers: hasLineNumbers,\n      theme: 'material',\n      mode: this._mode,\n      scrollbarStyle: 'simple',\n      lineWrapping: true,\n      readOnly: isReadOnly,\n      extraKeys: extraKeys,\n      placeholder: this._placeholder\n    });\n    this.editor.on('change', _.debounce(this._onCodeMirrorChange.bind(this), 150), this);\n\n    if (!_.isEmpty(this._addons)) {\n      _.each(this._addons, function (addon) {\n        var Class = ADDONS[addon];\n        var addonView = new Class({\n          editor: this.editor\n        });\n        addonView.bind('codeSaved', this.triggerApplyEvent, this);\n        this.$el.append(addonView.el);\n        this.addView(addonView);\n      }, this);\n    }\n\n    if (this._hints) {\n      this.editor.on('keyup', this._onInputRead);\n    }\n\n    this._toggleReadOnly();\n\n    setTimeout(function () {\n      this.editor.refresh();\n    }.bind(this), 0);\n  },\n\n  _completeIfAfterCtrlSpace: function (cm) {\n    var autocompletePrefix = this._autocompletePrefix;\n    var opts = {};\n    var cur = cm.getCursor();\n\n    if (autocompletePrefix &&\n        cm.getRange(CodeMirror.Pos(cur.line, cur.ch - autocompletePrefix.length), cur) !== autocompletePrefix) {\n      opts = { autocompletePrefix: autocompletePrefix };\n    }\n\n    return this._completeAfter(cm, opts);\n  },\n\n  updateHints: function (hints) {\n    this._hints = hints;\n  },\n\n  _onKeyUpEditor: function (cm, event) {\n    var code = event.keyCode;\n    var hints = this._hints;\n    var autocompleteChars = this._autocompleteChars - 1;\n    var autocompletePrefix = this._autocompletePrefix;\n\n    if (NOHINT.indexOf(code) === -1) {\n      var self = this;\n\n      if (this._autocompleteTimeout) clearTimeout(this._autocompleteTimeout);\n\n      this._autocompleteTimeout = setTimeout(function () {\n        var opts = {};\n        var cur = cm.getCursor();\n        var str = cm.getTokenAt(cur).string;\n        str = str.toLowerCase();\n\n        if (autocompletePrefix &&\n            cm.getRange(CodeMirror.Pos(cur.line, cur.ch - autocompletePrefix.length), cur) !== autocompletePrefix) {\n          opts = { autocompletePrefix: autocompletePrefix };\n        }\n\n        return self._completeAfter(cm, opts, function () {\n          var autocompleteHandler = function (listItem) {\n            // every list can be an array of strings or an array of objects {text, type}\n            var hit = _.isObject(listItem) ? listItem.text : listItem;\n            hit = hit.toLowerCase();\n            return hit.indexOf(str) !== -1;\n          };\n\n          if (str.length > autocompleteChars) {\n            var listHints = _.filter(hints, autocompleteHandler);\n\n            return listHints.length > 0 || autocompletePrefix && autocompletePrefix === str;\n          }\n        });\n      }, 150);\n    }\n  },\n\n  _onCodeMirrorChange: function () {\n    this.trigger('codeChanged');\n  },\n\n  _completeAfter: function (cm, opts, pred) {\n    if (!pred || pred()) {\n      if (!cm.state.completionActive) {\n        this._showAutocomplete(cm, _.extend({}, opts));\n      }\n    }\n\n    return CodeMirror.Pass;\n  },\n\n  _showAutocomplete: function (cm, opts) {\n    var autocompletePrefix = opts && opts.autocompletePrefix;\n\n    CodeMirror.showHint(cm, CodeMirror.hint['custom-list'], {\n      completeSingle: false,\n      list: this._hints,\n      autocompletePrefix: autocompletePrefix,\n      autocompleteSuffix: this._autocompleteSuffix\n    });\n  },\n\n  _bindEvents: function () {\n    var self = this;\n    this.editor.on('change', function (editor, changed) {\n      self.model.set('content', self.getContent(), {silent: true});\n    });\n\n    this.model.on('change:content', function () {\n      this.setContent(this.model.get('content'));\n    }, this);\n\n    this.model.on('change:readonly', this._toggleReadOnly, this);\n\n    this.model.on('change:errors', function () {\n      this._showErrors();\n    }, this);\n\n    this.model.on('undo redo', function () {\n      this.setContent(this.model.get('content'));\n    }, this);\n  },\n\n  _toggleReadOnly: function () {\n    var isReadOnly = !!this.model.get('readonly');\n    this.editor.setOption('readOnly', isReadOnly);\n    if (isReadOnly) {\n      this.editor.setOption('theme', '');\n      this._getInfo().hide();\n    } else {\n      this.editor.setOption('theme', 'material');\n      this._getInfo().show();\n    }\n  },\n\n  search: function (query, caseInsensitive) {\n    var cursor = this.editor.getSearchCursor(query, null, true);\n    cursor.find();\n    return cursor.pos;\n  },\n\n  markReadOnly: function (from, to) {\n    var options = {readOnly: true, inclusiveLeft: true};\n    this.editor.markText(from, to, options);\n\n    for (var i = from.line; i <= to.line; i++) {\n      this.editor.addLineClass(i, 'background', 'CodeMirror-readonlyLine');\n    }\n  },\n\n  setContent: function (value) {\n    this.editor.setValue(value);\n  },\n\n  getContent: function () {\n    return this.editor.getValue();\n  },\n\n  triggerApplyEvent: function () {\n    this.trigger('codeSaved', this.getContent(), this);\n  },\n\n  destroyEditor: function () {\n    this.editor.off('change');\n    var el = this.editor.getWrapperElement();\n    el.parentNode.removeChild(el);\n  },\n\n  _getInfo: function () {\n    return this.$('.js-console');\n  },\n\n  _getConsole: function () {\n    return this.$('.js-console-error');\n  },\n\n  _getCode: function () {\n    return this.$('.CodeMirror-code');\n  },\n\n  _removeErrors: function () {\n    this._getConsole().empty();\n    _.each(this._lineWithErrors, function ($line) {\n      $line.find('.CodeMirror-bullet').remove();\n      $line.find('.CodeMirror-linenumber').removeClass('has-error');\n    });\n\n    this._lineWithErrors = [];\n  },\n\n  _showErrors: function () {\n    var errors = this.model.get('errors');\n    this._removeErrors();\n\n    if (errors && errors.length > 0) {\n      _.each(errors, function (err) {\n        this._renderError(err);\n        this._renderBullet(err);\n      }, this);\n    }\n  },\n\n  _renderBullet: function (error) {\n    var line = error.line;\n    var $line;\n    if (line) {\n      $line = this._getCode().children().eq(+line - 1);\n      $line.append(bulletTemplate);\n      $line.find('.CodeMirror-linenumber').addClass('has-error');\n      this._lineWithErrors.push($line);\n    }\n  },\n\n  _renderError: function (error) {\n    this._getConsole().append(this._errorTemplate(error));\n  },\n\n  clean: function () {\n    this.destroyEditor();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CodeMirror-editor\">\\n  <textarea class=\"js-editor\">'+\n((__t=( content ))==null?'':_.escape(__t))+\n'</textarea>\\n</div>\\n\\n';\n if (tip) { \n__p+='\\n<div class=\"CodeMirror-console js-console\">\\n  '+\n((__t=( tip ))==null?'':_.escape(__t))+\n'\\n  <div class=\"js-console-error\"></div>\\n</div>\\n';\n } \n__p+='';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar ColorPicker = require('../form-components/editors/fill/color-picker/color-picker.js');\nvar COLOR_KEYWORDS = require('../../helpers/color-keywords');\n\n/**\n *  Show color picker when user clicks over\n *  a color in the Codemirror editor.\n *\n *  new CodemirrorColorPicker({\n *    editor: codemirror-editor...\n *  })\n */\n\nvar REQUIRED_OPTS = [\n  'editor'\n];\n\nvar STYLE = _.template('1px solid  <%- color %>');\nvar COLORPICKER_HEIGHT = 220;\n\nvar stopPropagation = function (e) {\n  e.stopPropagation();\n};\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._updateColors = _.debounce(this._updateColors, 5).bind(this);\n    this._onDocumentClick = this._onDocumentClick.bind(this);\n    this._editor = opts.editor;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    var self = this;\n    var destroyPicker = function () {\n      this._destroyPicker();\n    }.bind(this);\n\n    this._enableUpdateBind();\n\n    this._editor.on('mousedown', function (cm, ev) {\n      _.delay(self._onClick.bind(self, cm, ev), 50);\n    });\n\n    this._editor.on('keydown', destroyPicker);\n    this._editor.on('viewportChange', destroyPicker);\n    this._editor.on('scroll', destroyPicker);\n\n    var wrapper = this._editor.getWrapperElement();\n    wrapper.addEventListener('click', stopPropagation);\n  },\n\n  _disableBinds: function () {\n    var wrapper = this._editor.getWrapperElement();\n    wrapper.removeEventListener('click', stopPropagation);\n    this._editor.off(null, null, this);\n  },\n\n  _enableUpdateBind: function () {\n    this._editor.on('update', this._updateColors);\n  },\n\n  _disableUpdateBind: function () {\n    this._editor.off('update', this._updateColors);\n  },\n\n  _onClick: function (cm, ev) {\n    var cursor = this._editor.getCursor(true);\n    var token = this._editor.getTokenAt(cursor);\n\n    if (token.type === 'color') {\n      this._createPicker(ev, cursor, token);\n    } else {\n      this._destroyPicker();\n    }\n  },\n\n  _updateColors: function (cm) {\n    var wrapper = cm.getWrapperElement();\n    _.each(wrapper.querySelectorAll('.cm-color'), function (node) {\n      this._paintColor(node.textContent, node);\n    }, this);\n  },\n\n  _replaceColor: function (color, target) {\n    var cursor = this._editor.getCursor();\n    var nameMatch = this._getMatch(cursor, 'name');\n    var hexMatch = this._getMatch(cursor, 'hex');\n    var match = nameMatch || hexMatch;\n    var start;\n    var end;\n\n    if (match) {\n      start = {\n        line: cursor.line,\n        ch: match.start\n      };\n      end = {\n        line: cursor.line,\n        ch: match.end\n      };\n\n      this._editor.replaceRange(color, start, end, 'paste');\n\n      var wrapper = this._editor.getWrapperElement();\n      _.each(wrapper.querySelectorAll('.cm-color'), function (node) {\n        var nodeStyle = node.style;\n        var nodeColor = node.innerText;\n        if (!nodeStyle || !nodeStyle.borderBottom) {\n          this._paintColor(nodeColor, node);\n        }\n      }, this);\n    }\n  },\n\n  _paintColor: function (color, target) {\n    target.style.borderBottom = STYLE({color: color});\n  },\n\n  _getMatch: function (cursor, type) {\n    if (!type) return;\n    var re;\n\n    switch (type.toLowerCase()) {\n      case 'name':\n        re = new RegExp(COLOR_KEYWORDS.join('|'), 'g');\n        break;\n      case 'hsl':\n        re = /hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/g;\n        break;\n      case 'rgb':\n        re = /rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)/;\n        break;\n      case 'hex':\n        re = /#[a-fA-F0-9]{3,6}/g;\n        break;\n      default:\n        console.log('Invalid color match selection');\n        return;\n    }\n\n    var line = this._editor.getLine(cursor.line);\n    var match = re.exec(line);\n\n    while (match) {\n      var val = match[0];\n      var len = val.length;\n      var start = match.index;\n      var end = match.index + len;\n      if (cursor.ch >= start && cursor.ch <= end) {\n        match = null;\n        return {\n          start: start,\n          end: end,\n          string: val\n        };\n      }\n      match = re.exec(line);\n    }\n    return;\n  },\n\n  _createPicker: function (ev, cursor, token) {\n    var cursorCoords = this._editor.cursorCoords();\n    this._destroyPicker();\n\n    this._colorPicker = new ColorPicker({\n      className: 'Editor-boxModal ColorPicker--cm Editor-boxModal--darked Editor-FormDialog CDB-Text',\n      value: token.string,\n      disableOpacity: true\n    });\n    this._colorPicker.$el.attr('data-colorpicker-cid', this.cid);\n    this._colorPicker.bind('change', _.debounce(this._onColorPickerChange.bind(this, ev), 5), this);\n\n    var top = cursorCoords.top + 20;\n    var maxTop = $(window).outerHeight();\n\n    if (top + COLORPICKER_HEIGHT > maxTop) {\n      top = cursorCoords.top - COLORPICKER_HEIGHT - 20;\n    }\n\n    this._colorPicker.$el.css({\n      left: cursorCoords.left,\n      top: top\n    });\n\n    document.body.appendChild(this._colorPicker.render().el);\n    document.addEventListener('click', this._onDocumentClick);\n  },\n\n  _onDocumentClick: function (e) {\n    var $el = $(e.target);\n    if ($el.closest('[data-colorpicker-cid=\"' + this.cid + '\"]').length === 0) {\n      this._destroyPicker();\n    }\n  },\n\n  _onColorPickerChange: function (ev, values) {\n    this._disableUpdateBind();\n    this._replaceColor(values.hex, ev.target);\n    this.trigger('codeSaved');\n    this._enableUpdateBind();\n  },\n\n  _destroyPicker: function () {\n    if (this._colorPicker) {\n      this.removeView(this._colorPicker);\n      this._colorPicker.clean();\n      delete this._colorPicker;\n    }\n\n    document.removeEventListener('click', this._onDocumentClick);\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.call(this);\n  }\n});\n",
    "var _ = require('underscore');\n\nmodule.exports = function (CodeMirror) {\n  var Pos = CodeMirror.Pos;\n\n  function arrayContains (arr, item) {\n    return arr.indexOf(item) !== -1;\n  }\n\n  function scriptHint (editor, keywords, getToken, options) {\n    // Find the token at the cursor\n    var cur = editor.getCursor();\n    var token = getToken(editor, cur);\n    var tprop = token;\n    token.state = CodeMirror.innerMode(editor.getMode(), token.state).state;\n\n    // If it's not a 'word-style' token, ignore the token.\n    if (!/^[\\w$_-]*$/.test(token.string)) {\n      token = tprop = {\n        start: cur.ch,\n        end: cur.ch,\n        string: '',\n        state: token.state,\n        type: token.string === '.' ? 'property' : null\n      };\n    }\n    // If it is a property, find out what it is a property of.\n    while (tprop.type === 'property') {\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (tprop.string !== '.') return;\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (tprop.string === ')') {\n        var level = 1;\n        do {\n          tprop = getToken(editor, Pos(cur.line, tprop.start));\n          switch (tprop.string) {\n            case ')':\n              level++;\n              break;\n            case '(':\n              level--;\n              break;\n            default:\n              break;\n          }\n        } while (level > 0);\n        tprop = getToken(editor, Pos(cur.line, tprop.start));\n        if (tprop.type.indexOf('variable') === 0) tprop.type = 'function';\n        else return; // no clue\n      }\n      if (!context) var context = [];\n      context.push(tprop);\n    }\n\n    return {\n      list: getCompletions(token, context, keywords, options),\n      from: Pos(cur.line, token.start),\n      to: Pos(cur.line, token.end)\n    };\n  }\n\n  function columnsHint (editor, options) {\n    return scriptHint(editor, [], /* javascriptKeywords */\n      function (e, cur) {\n        return e.getTokenAt(cur);\n      },\n    options);\n  }\n\n  CodeMirror.registerHelper('hint', 'custom-list', columnsHint);\n\n  function getCompletions (token, context, keywords, options) {\n    var found = [];\n    var start = token.string.toLowerCase();\n\n    function maybeAdd (str) {\n      var hit = _.isObject(str) ? str.text : str;\n      hit = hit.toLowerCase();\n      if (hit.indexOf(start) === 0 && start !== hit && !arrayContains(found, hit)) {\n        found.push(str);\n      }\n    }\n\n    function gatherCompletions (obj) {\n      for (var name in obj) {\n        maybeAdd(obj[name]);\n      }\n    }\n\n    gatherCompletions(options.list);\n    _.each(keywords, maybeAdd);\n\n    return found;\n  }\n};\n",
    "module.exports = function (CodeMirror) {\n  CodeMirror.defineMode('mustache', function () {\n    return {\n      token: function (stream, state) {\n        var ch;\n\n        if (stream.match('{{')) {\n          ch = stream.peek();\n          if (ch == null || ch != null && ch.match(/[{]{1,}/)) {\n            stream.next();\n            return 'mustache-error';\n          } else if (ch != null && ch.match(/[a-zA-Z\\u00C0-\\u024F_]+/)) {\n            return null;\n          }\n        }\n\n        if (stream.match('}}')) {\n          ch = stream.peek();\n          if (ch != null && ch.match(/[}]{1,}/)) {\n            stream.next();\n            return 'mustache-error';\n          } else if (ch == null) {\n            return null;\n          }\n        }\n\n        if (stream.match('}')) {\n          ch = stream.peek();\n          if (ch == null || ch != null && ch.match(/[}]{1,}/)) {\n            stream.next();\n            return 'mustache-error';\n          }\n        }\n\n        if (stream.match('{')) {\n          ch = stream.peek();\n          if (ch == null || ch != null && ch.match(/[{]{1,}/)) {\n            stream.next();\n            return 'mustache-error';\n          }\n        }\n\n        // Delimiter character\n        if (stream.match(/[a-zA-Z\\u00C0-\\u024F_]+/, true)) {\n          return 'mustache-text';\n        }\n\n        // jump to the next item, needed OR CRASH\n        stream.next();\n      }\n    };\n  });\n\n  (function () {\n    var sqlKeywords = '{{  }}';\n\n    function set (str) {\n      var obj = {};\n      var words = str.split(' ');\n      for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\n      return obj;\n    }\n\n    CodeMirror.defineMIME('text/mustache', {\n      name: 'mustache',\n      client: set('source'),\n      keywords: set(sqlKeywords)\n    });\n  }());\n};\n",
    "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n/* eslint-disable */\nmodule.exports = function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"sql\", function(config, parserConfig) {\n  \"use strict\";\n\n  var client         = parserConfig.client || {},\n      atoms          = parserConfig.atoms || {\"false\": true, \"true\": true, \"null\": true},\n      builtin        = parserConfig.builtin || {},\n      keywords       = parserConfig.keywords || {},\n      operatorChars  = parserConfig.operatorChars || /^[*+\\-%<>!=&|~^]/,\n      support        = parserConfig.support || {},\n      hooks          = parserConfig.hooks || {},\n      dateSQL        = parserConfig.dateSQL || {\"date\" : true, \"time\" : true, \"timestamp\" : true};\n\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n\n    // call hooks from the mime type\n    if (hooks[ch]) {\n      var result = hooks[ch](stream, state);\n      if (result !== false) return result;\n    }\n\n    if (support.hexNumber == true &&\n      ((ch == \"0\" && stream.match(/^[xX][0-9a-fA-F]+/))\n      || (ch == \"x\" || ch == \"X\") && stream.match(/^'[0-9a-fA-F]+'/))) {\n      // hex\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/hexadecimal-literals.html\n      return \"number\";\n    } else if (support.binaryNumber == true &&\n      (((ch == \"b\" || ch == \"B\") && stream.match(/^'[01]+'/))\n      || (ch == \"0\" && stream.match(/^b[01]+/)))) {\n      // bitstring\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/bit-field-literals.html\n      return \"number\";\n    } else if (ch.charCodeAt(0) > 47 && ch.charCodeAt(0) < 58) {\n      // numbers\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/number-literals.html\n          stream.match(/^[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?/);\n      support.decimallessFloat == true && stream.eat('.');\n      return \"number\";\n    } else if (ch == \"?\" && (stream.eatSpace() || stream.eol() || stream.eat(\";\"))) {\n      // placeholders\n      return \"variable-3\";\n    } else if (ch == \"'\" || (ch == '\"' && support.doubleQuote)) {\n      // strings\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/string-literals.html\n      state.tokenize = tokenLiteral(ch);\n      return state.tokenize(stream, state);\n    } else if ((((support.nCharCast == true && (ch == \"n\" || ch == \"N\"))\n        || (support.charsetCast == true && ch == \"_\" && stream.match(/[a-z][a-z0-9]*/i)))\n        && (stream.peek() == \"'\" || stream.peek() == '\"'))) {\n      // charset casting: _utf8'str', N'str', n'str'\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/string-literals.html\n      return \"keyword\";\n    } else if (/^[\\(\\),\\;\\[\\]]/.test(ch)) {\n      // no highlighting\n      return null;\n    } else if (support.commentSlashSlash && ch == \"/\" && stream.eat(\"/\")) {\n      // 1-line comment\n      stream.skipToEnd();\n      return \"comment\";\n    } else if ((support.commentHash && ch == \"#\")\n        || (ch == \"-\" && stream.eat(\"-\") && (!support.commentSpaceRequired || stream.eat(\" \")))) {\n      // 1-line comments\n      // ref: https://kb.askmonty.org/en/comment-syntax/\n      stream.skipToEnd();\n      return \"comment\";\n    } else if (ch == \"/\" && stream.eat(\"*\")) {\n      // multi-line comments\n      // ref: https://kb.askmonty.org/en/comment-syntax/\n      state.tokenize = tokenComment;\n      return state.tokenize(stream, state);\n    } else if (ch == \".\") {\n      // .1 for 0.1\n      if (support.zerolessFloat == true && stream.match(/^(?:\\d+(?:e[+-]?\\d+)?)/i)) {\n        return \"number\";\n      }\n      // .table_name (ODBC)\n      // // ref: http://dev.mysql.com/doc/refman/5.6/en/identifier-qualifiers.html\n      if (support.ODBCdotTable == true && stream.match(/^[a-zA-Z_]+/)) {\n        return \"variable-2\";\n      }\n    } else if (operatorChars.test(ch)) {\n      // operators\n      stream.eatWhile(operatorChars);\n      return null;\n    } else if (ch == '{' &&\n        (stream.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/) || stream.match(/^( )*(d|D|t|T|ts|TS)( )*\"[^\"]*\"( )*}/))) {\n      // dates (weird ODBC syntax)\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html\n      return \"number\";\n    } else {\n      stream.eatWhile(/^[_\\w\\d]/);\n      var word = stream.current().toLowerCase();\n      // dates (standard SQL syntax)\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html\n      if (dateSQL.hasOwnProperty(word) && (stream.match(/^( )+'[^']*'/) || stream.match(/^( )+\"[^\"]*\"/)))\n        return \"number\";\n      if (atoms.hasOwnProperty(word)) return \"atom\";\n      if (builtin.hasOwnProperty(word)) return \"builtin\";\n      if (keywords.hasOwnProperty(word)) return \"keyword\";\n      if (client.hasOwnProperty(word)) return \"string-2\";\n      return null;\n    }\n  }\n\n  // 'string', with char specified in quote escaped by '\\'\n  function tokenLiteral(quote) {\n    return function(stream, state) {\n      var escaped = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == quote && !escaped) {\n          state.tokenize = tokenBase;\n          break;\n        }\n        escaped = !escaped && ch == \"\\\\\";\n      }\n      return \"string\";\n    };\n  }\n  function tokenComment(stream, state) {\n    while (true) {\n      if (stream.skipTo(\"*\")) {\n        stream.next();\n        if (stream.eat(\"/\")) {\n          state.tokenize = tokenBase;\n          break;\n        }\n      } else {\n        stream.skipToEnd();\n        break;\n      }\n    }\n    return \"comment\";\n  }\n\n  function pushContext(stream, state, type) {\n    state.context = {\n      prev: state.context,\n      indent: stream.indentation(),\n      col: stream.column(),\n      type: type\n    };\n  }\n\n  function popContext(state) {\n    state.indent = state.context.indent;\n    state.context = state.context.prev;\n  }\n\n  return {\n    startState: function() {\n      return {tokenize: tokenBase, context: null};\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (state.context && state.context.align == null)\n          state.context.align = false;\n      }\n      if (stream.eatSpace()) return null;\n\n      var style = state.tokenize(stream, state);\n      if (style == \"comment\") return style;\n\n      if (state.context && state.context.align == null)\n        state.context.align = true;\n\n      var tok = stream.current();\n      if (tok == \"(\")\n        pushContext(stream, state, \")\");\n      else if (tok == \"[\")\n        pushContext(stream, state, \"]\");\n      else if (state.context && state.context.type == tok)\n        popContext(state);\n      return style;\n    },\n\n    indent: function(state, textAfter) {\n      var cx = state.context;\n      if (!cx) return CodeMirror.Pass;\n      var closing = textAfter.charAt(0) == cx.type;\n      if (cx.align) return cx.col + (closing ? 0 : 1);\n      else return cx.indent + (closing ? 0 : config.indentUnit);\n    },\n\n    blockCommentStart: \"/*\",\n    blockCommentEnd: \"*/\",\n    lineComment: support.commentSlashSlash ? \"//\" : support.commentHash ? \"#\" : null\n  };\n});\n\n(function() {\n  \"use strict\";\n\n  // `identifier`\n  function hookIdentifier(stream) {\n    // MySQL/MariaDB identifiers\n    // ref: http://dev.mysql.com/doc/refman/5.6/en/identifier-qualifiers.html\n    var ch;\n    while ((ch = stream.next()) != null) {\n      if (ch == \"`\" && !stream.eat(\"`\")) return \"variable-2\";\n    }\n    stream.backUp(stream.current().length - 1);\n    return stream.eatWhile(/\\w/) ? \"variable-2\" : null;\n  }\n\n  // variable token\n  function hookVar(stream) {\n    // variables\n    // @@prefix.varName @varName\n    // varName can be quoted with ` or ' or \"\n    // ref: http://dev.mysql.com/doc/refman/5.5/en/user-variables.html\n    if (stream.eat(\"@\")) {\n      stream.match(/^session\\./);\n      stream.match(/^local\\./);\n      stream.match(/^global\\./);\n    }\n\n    if (stream.eat(\"'\")) {\n      stream.match(/^.*'/);\n      return \"variable-2\";\n    } else if (stream.eat('\"')) {\n      stream.match(/^.*\"/);\n      return \"variable-2\";\n    } else if (stream.eat(\"`\")) {\n      stream.match(/^.*`/);\n      return \"variable-2\";\n    } else if (stream.match(/^[0-9a-zA-Z$\\.\\_]+/)) {\n      return \"variable-2\";\n    }\n    return null;\n  };\n\n  // short client keyword token\n  function hookClient(stream) {\n    // \\N means NULL\n    // ref: http://dev.mysql.com/doc/refman/5.5/en/null-values.html\n    if (stream.eat(\"N\")) {\n        return \"atom\";\n    }\n    // \\g, etc\n    // ref: http://dev.mysql.com/doc/refman/5.5/en/mysql-commands.html\n    return stream.match(/^[a-zA-Z.#!?]/) ? \"variable-2\" : null;\n  }\n\n  // these keywords are used by all SQL dialects (however, a mode can still overwrite it)\n  var sqlKeywords = \"alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit \";\n\n  // turn a space-separated list into an array\n  function set(str) {\n    var obj = {}, words = str.split(\" \");\n    for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\n    return obj;\n  }\n\n  CodeMirror.defineMIME(\"text/x-pgsql\", {\n    name: \"sql\",\n    client: set(\"source\"),\n    // http://www.postgresql.org/docs/9.5/static/sql-keywords-appendix.html\n    keywords: set(sqlKeywords + \"a abort abs absent absolute access according action ada add admin after aggregate all allocate also always analyse analyze any are array array_agg array_max_cardinality asensitive assertion assignment asymmetric at atomic attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli binary bit_length blob blocked bom both breadth c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain characteristics characters character_length character_set_catalog character_set_name character_set_schema char_length check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column columns column_name command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constraint constraints constraint_catalog constraint_name constraint_schema constructor contains content continue control conversion convert copy corr corresponding cost covar_pop covar_samp cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datetime_interval_code datetime_interval_precision day db deallocate dec declare default defaults deferrable deferred defined definer degree delimiter delimiters dense_rank depth deref derived describe descriptor deterministic diagnostics dictionary disable discard disconnect dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain dynamic dynamic_function dynamic_function_code each element else empty enable encoding encrypted end end-exec end_frame end_partition enforced enum equals escape event every except exception exclude excluding exclusive exec execute exists exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreign fortran forward found frame_row free freeze fs full function functions fusion g general generated get global go goto grant granted greatest grouping groups handler header hex hierarchy hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import including increment indent index indexes indicator inherit inherits initially inline inner inout input insensitive instance instantiable instead integrity intersect intersection invoker isnull isolation k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like_regex link listen ln load local localtime localtimestamp location locator lock locked logged lower m map mapping match matched materialized max maxvalue max_cardinality member merge message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized nothing notify notnull nowait nth_value ntile null nullable nullif nulls number object occurrences_regex octets octet_length of off offset oids old only open operator option options ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password percent percentile_cont percentile_disc percent_rank period permission placing plans pli policy portion position position_regex power precedes preceding prepare prepared preserve primary prior privileges procedural procedure program public quote range rank read reads reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns revoke right role rollback rollup routine routine_catalog routine_name routine_schema row rows row_count row_number rule savepoint scale schema schema_name scope scope_catalog scope_name scope_schema scroll search second section security selective self sensitive sequence sequences serializable server server_name session session_user setof sets share show similar simple size skip snapshot some source space specific specifictype specific_name sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset substring substring_regex succeeds sum symmetric sysid system system_time system_user t tables tablesample tablespace table_name temp template temporary then ties timezone_hour timezone_minute to token top_level_count trailing transaction transactions_committed transactions_rolled_back transaction_active transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted unique unknown unlink unlisten unlogged unnamed unnest until untyped upper uri usage user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of varbinary variadic var_pop var_samp verbose version versioning view views volatile when whenever whitespace width_bucket window within work wrapper write xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes loop repeat\"),\n    // http://www.postgresql.org/docs/9.5/static/datatype.html\n    builtin: set(\"bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml\"),\n    atoms: set(\"false true null unknown\"),\n    operatorChars: /^[*+\\-%<>!=&|^]/,\n    dateSQL: set(\"date time timestamp\"),\n    support: set(\"ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast commentHash commentSpaceRequired\")\n  });\n}());\n\n};\n\n/* eslint-enable */\n",
    "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n/* eslint-disable */\nmodule.exports = function (CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.className = \"CodeMirror-placeholder\";\n    var placeHolder = cm.getOption(\"placeholder\")\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder)\n    elt.appendChild(placeHolder)\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(), empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n\n    if (empty) setPlaceholder(cm);\n    else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return (cm.lineCount() === 1) && (cm.getLine(0) === \"\");\n  }\n};\n/* eslint-enable */\n",
    "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\nmodule.exports = function (CodeMirror) {\n  function Bar (cls, orientation, scroll) {\n    this.orientation = orientation;\n    this.scroll = scroll;\n    this.screen = this.total = this.size = 1;\n    this.pos = 0;\n\n    this.node = document.createElement('div');\n    this.node.className = cls + '-' + orientation;\n    this.inner = this.node.appendChild(document.createElement('div'));\n\n    var self = this;\n    CodeMirror.on(this.inner, 'mousedown', function (e) {\n      if (e.which !== 1) return;\n      CodeMirror.e_preventDefault(e);\n      var axis = self.orientation === 'horizontal' ? 'pageX' : 'pageY';\n      var start = e[axis];\n      var startpos = self.pos;\n      function done () {\n        CodeMirror.off(document, 'mousemove', move);\n        CodeMirror.off(document, 'mouseup', done);\n      }\n      function move (e) {\n        if (e.which !== 1) return done();\n        self.moveTo(startpos + (e[axis] - start) * (self.total / self.size));\n      }\n      CodeMirror.on(document, 'mousemove', move);\n      CodeMirror.on(document, 'mouseup', done);\n    });\n\n    CodeMirror.on(this.node, 'click', function (e) {\n      CodeMirror.e_preventDefault(e);\n      var innerBox = self.inner.getBoundingClientRect();\n      var where;\n      if (self.orientation === 'horizontal') {\n        where = e.clientX < innerBox.left ? -1 : e.clientX > innerBox.right ? 1 : 0;\n      } else {\n        where = e.clientY < innerBox.top ? -1 : e.clientY > innerBox.bottom ? 1 : 0;\n      }\n      self.moveTo(self.pos + where * self.screen);\n    });\n\n    function onWheel (e) {\n      var moved = CodeMirror.wheelEventPixels(e)[self.orientation === 'horizontal' ? 'x' : 'y'];\n      var oldPos = self.pos;\n      self.moveTo(self.pos + moved);\n      if (self.pos !== oldPos) {\n        CodeMirror.e_preventDefault(e);\n      }\n    }\n    CodeMirror.on(this.node, 'mousewheel', onWheel);\n    CodeMirror.on(this.node, 'DOMMouseScroll', onWheel);\n  }\n\n  Bar.prototype.setPos = function (pos, force) {\n    if (pos < 0) pos = 0;\n    if (pos > this.total - this.screen) pos = this.total - this.screen;\n    if (!force && pos === this.pos) return false;\n    this.pos = pos;\n    this.inner.style[this.orientation === 'horizontal' ? 'left' : 'top'] =\n      (pos * (this.size / this.total)) + 'px';\n    return true;\n  };\n\n  Bar.prototype.moveTo = function (pos) {\n    if (this.setPos(pos)) this.scroll(pos, this.orientation);\n  };\n\n  var minButtonSize = 10;\n\n  Bar.prototype.update = function (scrollSize, clientSize, barSize) {\n    var sizeChanged = this.screen !== clientSize || this.total !== scrollSize || this.size !== barSize;\n    if (sizeChanged) {\n      this.screen = clientSize;\n      this.total = scrollSize;\n      this.size = barSize;\n    }\n\n    var buttonSize = this.screen * (this.size / this.total);\n    if (buttonSize < minButtonSize) {\n      this.size -= minButtonSize - buttonSize;\n      buttonSize = minButtonSize;\n    }\n    this.inner.style[this.orientation === 'horizontal' ? 'width' : 'height'] =\n      buttonSize + 'px';\n    this.setPos(this.pos, sizeChanged);\n  };\n\n  function SimpleScrollbars (cls, place, scroll) {\n    this.addClass = cls;\n    this.horiz = new Bar(cls, 'horizontal', scroll);\n    place(this.horiz.node);\n    this.vert = new Bar(cls, 'vertical', scroll);\n    place(this.vert.node);\n    this.width = null;\n  }\n\n  SimpleScrollbars.prototype.update = function (measure) {\n    if (this.width == null) {\n      var style = window.getComputedStyle ? window.getComputedStyle(this.horiz.node) : this.horiz.node.currentStyle;\n      if (style) {\n        this.width = parseInt(style.height, 10);\n      }\n    }\n    var width = this.width || 0;\n\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    this.vert.node.style.display = needsV ? 'block' : 'none';\n    this.horiz.node.style.display = needsH ? 'block' : 'none';\n\n    if (needsV) {\n      this.vert.update(measure.scrollHeight, measure.clientHeight,\n        measure.viewHeight - (needsH ? width : 0));\n      this.vert.node.style.bottom = needsH ? width + 'px' : '0';\n    }\n    if (needsH) {\n      this.horiz.update(measure.scrollWidth, measure.clientWidth,\n        measure.viewWidth - (needsV ? width : 0) - measure.barLeft);\n      this.horiz.node.style.right = needsV ? width + 'px' : '0';\n      this.horiz.node.style.left = measure.barLeft + 'px';\n    }\n\n    return {right: needsV ? width : 0, bottom: needsH ? width : 0};\n  };\n\n  SimpleScrollbars.prototype.setScrollTop = function (pos) {\n    this.vert.setPos(pos);\n  };\n\n  SimpleScrollbars.prototype.setScrollLeft = function (pos) {\n    this.horiz.setPos(pos);\n  };\n\n  SimpleScrollbars.prototype.clear = function () {\n    var parent = this.horiz.node.parentNode;\n    parent.removeChild(this.horiz.node);\n    parent.removeChild(this.vert.node);\n  };\n\n  CodeMirror.scrollbarModel.simple = function (place, scroll) {\n    return new SimpleScrollbars('CodeMirror-simplescroll', place, scroll);\n  };\n\n  CodeMirror.scrollbarModel.overlay = function (place, scroll) {\n    return new SimpleScrollbars('CodeMirror-overlayscroll', place, scroll);\n  };\n};\n",
    "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\nmodule.exports = function (CodeMirror) {\n  /*eslint-disable */\n  var Pos = CodeMirror.Pos;\n\n  function SearchCursor(doc, query, pos, caseFold) {\n    this.atOccurrence = false; this.doc = doc;\n    if (caseFold == null && typeof query == \"string\") caseFold = false;\n\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0);\n    this.pos = {from: pos, to: pos};\n\n    // The matches method is filled in based on the type of query.\n    // It takes a position and a direction, and returns an object\n    // describing the next occurrence of the query, or null if no\n    // more matches were found.\n    if (typeof query != \"string\") { // Regexp match\n      if (!query.global) query = new RegExp(query.source, query.ignoreCase ? \"ig\" : \"g\");\n      this.matches = function(reverse, pos) {\n        if (reverse) {\n          query.lastIndex = 0;\n          var line = doc.getLine(pos.line).slice(0, pos.ch), cutOff = 0, match, start;\n          for (;;) {\n            query.lastIndex = cutOff;\n            var newMatch = query.exec(line);\n            if (!newMatch) break;\n            match = newMatch;\n            start = match.index;\n            cutOff = match.index + (match[0].length || 1);\n            if (cutOff == line.length) break;\n          }\n          var matchLen = (match && match[0].length) || 0;\n          if (!matchLen) {\n            if (start == 0 && line.length == 0) {match = undefined;}\n            else if (start != doc.getLine(pos.line).length) {\n              matchLen++;\n            }\n          }\n        } else {\n          query.lastIndex = pos.ch;\n          var line = doc.getLine(pos.line), match = query.exec(line);\n          var matchLen = (match && match[0].length) || 0;\n          var start = match && match.index;\n          if (start + matchLen != line.length && !matchLen) matchLen = 1;\n        }\n        if (match && matchLen)\n          return {from: Pos(pos.line, start),\n                  to: Pos(pos.line, start + matchLen),\n                  match: match};\n      };\n    } else { // String query\n      var origQuery = query;\n      if (caseFold) query = query.toLowerCase();\n      var fold = caseFold ? function(str){return str.toLowerCase();} : function(str){return str;};\n      var target = query.split(\"\\n\");\n      // Different methods for single-line and multi-line queries\n      if (target.length == 1) {\n        if (!query.length) {\n          // Empty string would match anything and never progress, so\n          // we define it to match nothing instead.\n          this.matches = function() {};\n        } else {\n          this.matches = function(reverse, pos) {\n            if (reverse) {\n              var orig = doc.getLine(pos.line).slice(0, pos.ch), line = fold(orig);\n              var match = line.lastIndexOf(query);\n              if (match > -1) {\n                match = adjustPos(orig, line, match);\n                return {from: Pos(pos.line, match), to: Pos(pos.line, match + origQuery.length)};\n              }\n             } else {\n               var orig = doc.getLine(pos.line).slice(pos.ch), line = fold(orig);\n               var match = line.indexOf(query);\n               if (match > -1) {\n                 match = adjustPos(orig, line, match) + pos.ch;\n                 return {from: Pos(pos.line, match), to: Pos(pos.line, match + origQuery.length)};\n               }\n            }\n          };\n        }\n      } else {\n        var origTarget = origQuery.split(\"\\n\");\n        this.matches = function(reverse, pos) {\n          var last = target.length - 1;\n          if (reverse) {\n            if (pos.line - (target.length - 1) < doc.firstLine()) return;\n            if (fold(doc.getLine(pos.line).slice(0, origTarget[last].length)) != target[target.length - 1]) return;\n            var to = Pos(pos.line, origTarget[last].length);\n            for (var ln = pos.line - 1, i = last - 1; i >= 1; --i, --ln)\n              if (target[i] != fold(doc.getLine(ln))) return;\n            var line = doc.getLine(ln), cut = line.length - origTarget[0].length;\n            if (fold(line.slice(cut)) != target[0]) return;\n            return {from: Pos(ln, cut), to: to};\n          } else {\n            if (pos.line + (target.length - 1) > doc.lastLine()) return;\n            var line = doc.getLine(pos.line), cut = line.length - origTarget[0].length;\n            if (fold(line.slice(cut)) != target[0]) return;\n            var from = Pos(pos.line, cut);\n            for (var ln = pos.line + 1, i = 1; i < last; ++i, ++ln)\n              if (target[i] != fold(doc.getLine(ln))) return;\n            if (fold(doc.getLine(ln).slice(0, origTarget[last].length)) != target[last]) return;\n            return {from: from, to: Pos(ln, origTarget[last].length)};\n          }\n        };\n      }\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function() {return this.find(false);},\n    findPrevious: function() {return this.find(true);},\n\n    find: function(reverse) {\n      var self = this, pos = this.doc.clipPos(reverse ? this.pos.from : this.pos.to);\n      function savePosAndFail(line) {\n        var pos = Pos(line, 0);\n        self.pos = {from: pos, to: pos};\n        self.atOccurrence = false;\n        return false;\n      }\n\n      for (;;) {\n        if (this.pos = this.matches(reverse, pos)) {\n          this.atOccurrence = true;\n          return this.pos.match || true;\n        }\n        if (reverse) {\n          if (!pos.line) return savePosAndFail(0);\n          pos = Pos(pos.line-1, this.doc.getLine(pos.line-1).length);\n        }\n        else {\n          var maxLine = this.doc.lineCount();\n          if (pos.line == maxLine - 1) return savePosAndFail(maxLine);\n          pos = Pos(pos.line + 1, 0);\n        }\n      }\n    },\n\n    from: function() {if (this.atOccurrence) return this.pos.from;},\n    to: function() {if (this.atOccurrence) return this.pos.to;},\n\n    replace: function(newText, origin) {\n      if (!this.atOccurrence) return;\n      var lines = CodeMirror.splitLines(newText);\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin);\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n                        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0));\n    }\n  };\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos) {\n    if (orig.length == folded.length) return pos;\n    for (var pos1 = Math.min(pos, orig.length);;) {\n      var len1 = orig.slice(0, pos1).toLowerCase().length;\n      if (len1 < pos) ++pos1;\n      else if (len1 > pos) --pos1;\n      else return pos1;\n    }\n  }\n\n  CodeMirror.defineExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold);\n  });\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold);\n  });\n\n  CodeMirror.defineExtension(\"selectMatches\", function(query, caseFold) {\n    var ranges = [];\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold);\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break;\n      ranges.push({anchor: cur.from(), head: cur.to()});\n    }\n    if (ranges.length)\n      this.setSelections(ranges, 0);\n  });\n  /*eslint-enable */\n};\n",
    "// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n/* eslint-disable */\nmodule.exports = function (CodeMirror) {\n  \"use strict\";\n\n  var HINT_ELEMENT_CLASS        = \"CodeMirror-hint\";\n  var ACTIVE_HINT_ELEMENT_CLASS = \"CodeMirror-hint-active\";\n\n  // This is the old interface, kept around for now to stay\n  // backwards-compatible.\n  CodeMirror.showHint = function(cm, getHints, options) {\n    if (!getHints) return cm.showHint(options);\n    if (options && options.async) getHints.async = true;\n    var newOpts = {hint: getHints};\n    if (options) for (var prop in options) newOpts[prop] = options[prop];\n    return cm.showHint(newOpts);\n  };\n\n  CodeMirror.defineExtension(\"showHint\", function(options) {\n    options = parseOptions(this, this.getCursor(\"start\"), options);\n    var selections = this.listSelections()\n    if (selections.length > 1) return;\n    // By default, don't allow completion when something is selected.\n    // A hint function can have a `supportsSelection` property to\n    // indicate that it can handle selections.\n    if (this.somethingSelected()) {\n      if (!options.hint.supportsSelection) return;\n      // Don't try with cross-line selections\n      for (var i = 0; i < selections.length; i++)\n        if (selections[i].head.line != selections[i].anchor.line) return;\n    }\n\n    if (this.state.completionActive) this.state.completionActive.close();\n    var completion = this.state.completionActive = new Completion(this, options);\n    if (!completion.options.hint) return;\n\n    CodeMirror.signal(this, \"startCompletion\", this);\n    completion.update(true);\n  });\n\n  function Completion(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.widget = null;\n    this.debounce = 0;\n    this.tick = 0;\n    this.startPos = this.cm.getCursor(\"start\");\n    this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length;\n\n    var self = this;\n    cm.on(\"cursorActivity\", this.activityFunc = function() { self.cursorActivity(); });\n  }\n\n  var requestAnimationFrame = window.requestAnimationFrame || function(fn) {\n    return setTimeout(fn, 1000/60);\n  };\n  var cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\n\n  Completion.prototype = {\n    close: function() {\n      if (!this.active()) return;\n      this.cm.state.completionActive = null;\n      this.tick = null;\n      this.cm.off(\"cursorActivity\", this.activityFunc);\n\n      if (this.widget && this.data) CodeMirror.signal(this.data, \"close\");\n      if (this.widget) this.widget.close();\n      CodeMirror.signal(this.cm, \"endCompletion\", this.cm);\n    },\n\n    active: function() {\n      return this.cm.state.completionActive == this;\n    },\n\n    pick: function(data, i) {\n      var completion = data.list[i];\n      if (completion.hint) completion.hint(this.cm, data, completion);\n      else this.cm.replaceRange(getText(completion, this.options), completion.from || data.from,\n                                completion.to || data.to, \"complete\");\n      CodeMirror.signal(data, \"pick\", completion);\n      this.close();\n    },\n\n    cursorActivity: function() {\n      if (this.debounce) {\n        cancelAnimationFrame(this.debounce);\n        this.debounce = 0;\n      }\n\n      var pos = this.cm.getCursor(), line = this.cm.getLine(pos.line);\n      if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch ||\n          pos.ch < this.startPos.ch || this.cm.somethingSelected() ||\n          (pos.ch && this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {\n        this.close();\n      } else {\n        var self = this;\n        this.debounce = requestAnimationFrame(function() {self.update();});\n        if (this.widget) this.widget.disable();\n      }\n    },\n\n    update: function(first) {\n      if (this.tick == null) return\n      var self = this, myTick = ++this.tick\n      fetchHints(this.options.hint, this.cm, this.options, function(data) {\n        if (self.tick == myTick) self.finishUpdate(data, first)\n      })\n    },\n\n    finishUpdate: function(data, first) {\n      if (this.data) CodeMirror.signal(this.data, \"update\");\n\n      var picked = (this.widget && this.widget.picked) || (first && this.options.completeSingle);\n      if (this.widget) this.widget.close();\n\n      if (data && this.data && isNewCompletion(this.data, data)) return;\n      this.data = data;\n\n      if (data && data.list.length) {\n        if (picked && data.list.length == 1) {\n          this.pick(data, 0);\n        } else {\n          this.widget = new Widget(this, data);\n          CodeMirror.signal(data, \"shown\");\n        }\n      }\n    }\n  };\n\n  function isNewCompletion(old, nw) {\n    var moved = CodeMirror.cmpPos(nw.from, old.from)\n    return moved > 0 && old.to.ch - old.from.ch != nw.to.ch - nw.from.ch\n  }\n\n  function parseOptions(cm, pos, options) {\n    var editor = cm.options.hintOptions;\n    var out = {};\n    for (var prop in defaultOptions) out[prop] = defaultOptions[prop];\n    if (editor) for (var prop in editor)\n      if (editor[prop] !== undefined) out[prop] = editor[prop];\n    if (options) for (var prop in options)\n      if (options[prop] !== undefined) out[prop] = options[prop];\n    if (out.hint.resolve) out.hint = out.hint.resolve(cm, pos)\n    return out;\n  }\n\n  function getText(completion, options) {\n    var autocompleteSuffix = options && options.autocompleteSuffix ? options.autocompleteSuffix : '';\n    var autocompletePrefix = options && options.autocompletePrefix ? options.autocompletePrefix : '';\n\n    if (typeof completion !== \"string\") {\n      completion = completion.text\n    }\n\n    return autocompletePrefix + completion + autocompleteSuffix;\n  }\n\n  function getType(completion) {\n    if (typeof completion == \"string\") return '';\n    else return completion.type;\n  }\n\n  function buildKeyMap(completion, handle) {\n    var baseMap = {\n      Up: function() {handle.moveFocus(-1);},\n      Down: function() {handle.moveFocus(1);},\n      PageUp: function() {handle.moveFocus(-handle.menuSize() + 1, true);},\n      PageDown: function() {handle.moveFocus(handle.menuSize() - 1, true);},\n      Home: function() {handle.setFocus(0);},\n      End: function() {handle.setFocus(handle.length - 1);},\n      Enter: handle.pick,\n      Tab: handle.pick,\n      Esc: handle.close\n    };\n    var custom = completion.options.customKeys;\n    var ourMap = custom ? {} : baseMap;\n    function addBinding(key, val) {\n      var bound;\n      if (typeof val != \"string\")\n        bound = function(cm) { return val(cm, handle); };\n      // This mechanism is deprecated\n      else if (baseMap.hasOwnProperty(val))\n        bound = baseMap[val];\n      else\n        bound = val;\n      ourMap[key] = bound;\n    }\n    if (custom)\n      for (var key in custom) if (custom.hasOwnProperty(key))\n        addBinding(key, custom[key]);\n    var extra = completion.options.extraKeys;\n    if (extra)\n      for (var key in extra) if (extra.hasOwnProperty(key))\n        addBinding(key, extra[key]);\n    return ourMap;\n  }\n\n  function getHintElement(hintsElement, el) {\n    while (el && el != hintsElement) {\n      if (el.nodeName.toUpperCase() === \"LI\" && el.parentNode == hintsElement) return el;\n      el = el.parentNode;\n    }\n  }\n\n  function styleHint(hint) {\n    var element = document.createElement(hint.displayText || getText(hint));\n    element = document.createElement(\"span\");\n    element.className = 'CDB-Size-small has-letter';\n    element.innerHTML = hint.displayText || getText(hint);\n\n    var type = getType(hint);\n    if (type) {\n      element.className = 'CDB-Size-small has-letter';\n      element.dataset.type = type;\n    }\n\n    return element;\n  }\n\n  function Widget(completion, data) {\n    this.completion = completion;\n    this.data = data;\n    this.picked = false;\n    var widget = this, cm = completion.cm;\n\n    var hints = this.hints = document.createElement(\"ul\");\n    hints.className = \"CodeMirror-hints\";\n    this.selectedHint = data.selectedHint || 0;\n\n    var element;\n    var completions = data.list;\n    for (var i = 0; i < completions.length; ++i) {\n      var elt = hints.appendChild(document.createElement(\"li\")), cur = completions[i];\n      var className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? \"\" : \" \" + ACTIVE_HINT_ELEMENT_CLASS);\n      if (cur.className != null) className = cur.className + \" \" + className;\n      elt.className = className;\n      if (cur.render) cur.render(elt, data, cur);\n      else {\n        element = styleHint(cur);\n        elt.appendChild(element);\n      }\n\n      elt.hintId = i;\n    }\n\n    var pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null);\n    var left = pos.left, top = pos.bottom, below = true;\n    hints.style.left = left + \"px\";\n    hints.style.top = top + \"px\";\n    // If we're at the edge of the screen, then we want the menu to appear on the left of the cursor.\n    var winW = window.innerWidth || Math.max(document.body.offsetWidth, document.documentElement.offsetWidth);\n    var winH = window.innerHeight || Math.max(document.body.offsetHeight, document.documentElement.offsetHeight);\n    (completion.options.container || document.body).appendChild(hints);\n    var box = hints.getBoundingClientRect(), overlapY = box.bottom - winH;\n    if (overlapY > 0) {\n      var height = box.bottom - box.top, curTop = pos.top - (pos.bottom - box.top);\n      if (curTop - height > 0) { // Fits above cursor\n        hints.style.top = (top = pos.top - height) + \"px\";\n        below = false;\n      } else if (height > winH) {\n        hints.style.height = (winH - 5) + \"px\";\n        hints.style.top = (top = pos.bottom - box.top) + \"px\";\n        var cursor = cm.getCursor();\n        if (data.from.ch != cursor.ch) {\n          pos = cm.cursorCoords(cursor);\n          hints.style.left = (left = pos.left) + \"px\";\n          box = hints.getBoundingClientRect();\n        }\n      }\n    }\n    var overlapX = box.right - winW;\n    if (overlapX > 0) {\n      if (box.right - box.left > winW) {\n        hints.style.width = (winW - 5) + \"px\";\n        overlapX -= (box.right - box.left) - winW;\n      }\n      hints.style.left = (left = pos.left - overlapX) + \"px\";\n    }\n\n    cm.addKeyMap(this.keyMap = buildKeyMap(completion, {\n      moveFocus: function(n, avoidWrap) { widget.changeActive(widget.selectedHint + n, avoidWrap); },\n      setFocus: function(n) { widget.changeActive(n); },\n      menuSize: function() { return widget.screenAmount(); },\n      length: completions.length,\n      close: function() { completion.close(); },\n      pick: function() { widget.pick(); },\n      data: data\n    }));\n\n    if (completion.options.closeOnUnfocus) {\n      var closingOnBlur;\n      cm.on(\"blur\", this.onBlur = function() { closingOnBlur = setTimeout(function() { completion.close(); }, 100); });\n      cm.on(\"focus\", this.onFocus = function() { clearTimeout(closingOnBlur); });\n    }\n\n    var startScroll = cm.getScrollInfo();\n    cm.on(\"scroll\", this.onScroll = function() {\n      var curScroll = cm.getScrollInfo(), editor = cm.getWrapperElement().getBoundingClientRect();\n      var newTop = top + startScroll.top - curScroll.top;\n      var point = newTop - (window.pageYOffset || (document.documentElement || document.body).scrollTop);\n      if (!below) point += hints.offsetHeight;\n      if (point <= editor.top || point >= editor.bottom) return completion.close();\n      hints.style.top = newTop + \"px\";\n      hints.style.left = (left + startScroll.left - curScroll.left) + \"px\";\n    });\n\n    CodeMirror.on(hints, \"dblclick\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {widget.changeActive(t.hintId); widget.pick();}\n    });\n\n    CodeMirror.on(hints, \"click\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {\n        widget.changeActive(t.hintId);\n        if (completion.options.completeOnSingleClick) widget.pick();\n      }\n    });\n\n    CodeMirror.on(hints, \"mousedown\", function() {\n      setTimeout(function(){cm.focus();}, 20);\n    });\n\n    CodeMirror.signal(data, \"select\", completions[0], hints.firstChild);\n    return true;\n  }\n\n  Widget.prototype = {\n    close: function() {\n      if (this.completion.widget != this) return;\n      this.completion.widget = null;\n      this.hints.parentNode.removeChild(this.hints);\n      this.completion.cm.removeKeyMap(this.keyMap);\n\n      var cm = this.completion.cm;\n      if (this.completion.options.closeOnUnfocus) {\n        cm.off(\"blur\", this.onBlur);\n        cm.off(\"focus\", this.onFocus);\n      }\n      cm.off(\"scroll\", this.onScroll);\n    },\n\n    disable: function() {\n      this.completion.cm.removeKeyMap(this.keyMap);\n      var widget = this;\n      this.keyMap = {Enter: function() { widget.picked = true; }};\n      this.completion.cm.addKeyMap(this.keyMap);\n    },\n\n    pick: function() {\n      this.completion.pick(this.data, this.selectedHint);\n    },\n\n    changeActive: function(i, avoidWrap) {\n      if (i >= this.data.list.length)\n        i = avoidWrap ? this.data.list.length - 1 : 0;\n      else if (i < 0)\n        i = avoidWrap ? 0  : this.data.list.length - 1;\n      if (this.selectedHint == i) return;\n      var node = this.hints.childNodes[this.selectedHint];\n      node.className = node.className.replace(\" \" + ACTIVE_HINT_ELEMENT_CLASS, \"\");\n      node = this.hints.childNodes[this.selectedHint = i];\n      node.className += \" \" + ACTIVE_HINT_ELEMENT_CLASS;\n      if (node.offsetTop < this.hints.scrollTop)\n        this.hints.scrollTop = node.offsetTop - 3;\n      else if (node.offsetTop + node.offsetHeight > this.hints.scrollTop + this.hints.clientHeight)\n        this.hints.scrollTop = node.offsetTop + node.offsetHeight - this.hints.clientHeight + 3;\n      CodeMirror.signal(this.data, \"select\", this.data.list[this.selectedHint], node);\n    },\n\n    screenAmount: function() {\n      return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;\n    }\n  };\n\n  function applicableHelpers(cm, helpers) {\n    if (!cm.somethingSelected()) return helpers\n    var result = []\n    for (var i = 0; i < helpers.length; i++)\n      if (helpers[i].supportsSelection) result.push(helpers[i])\n    return result\n  }\n\n  function fetchHints(hint, cm, options, callback) {\n    if (hint.async) {\n      hint(cm, callback, options)\n    } else {\n      var result = hint(cm, options)\n      if (result && result.then) result.then(callback)\n      else callback(result)\n    }\n  }\n\n  function resolveAutoHints(cm, pos) {\n    var helpers = cm.getHelpers(pos, \"hint\"), words\n    if (helpers.length) {\n      var resolved = function(cm, callback, options) {\n        var app = applicableHelpers(cm, helpers);\n        function run(i) {\n          if (i == app.length) return callback(null)\n          fetchHints(app[i], cm, options, function(result) {\n            if (result && result.list.length > 0) callback(result)\n            else run(i + 1)\n          })\n        }\n        run(0)\n      }\n      resolved.async = true\n      resolved.supportsSelection = true\n      return resolved\n    } else if (words = cm.getHelper(cm.getCursor(), \"hintWords\")) {\n      return function(cm) { return CodeMirror.hint.fromList(cm, {words: words}) }\n    } else if (CodeMirror.hint.anyword) {\n      return function(cm, options) { return CodeMirror.hint.anyword(cm, options) }\n    } else {\n      return function() {}\n    }\n  }\n\n  CodeMirror.registerHelper(\"hint\", \"auto\", {\n    resolve: resolveAutoHints\n  });\n\n  CodeMirror.registerHelper(\"hint\", \"fromList\", function(cm, options) {\n    var cur = cm.getCursor(), token = cm.getTokenAt(cur);\n    var to = CodeMirror.Pos(cur.line, token.end);\n    if (token.string && /\\w/.test(token.string[token.string.length - 1])) {\n      var term = token.string, from = CodeMirror.Pos(cur.line, token.start);\n    } else {\n      var term = \"\", from = to;\n    }\n    var found = [];\n    for (var i = 0; i < options.words.length; i++) {\n      var word = options.words[i];\n      if (word.slice(0, term.length) == term)\n        found.push(word);\n    }\n\n    if (found.length) return {list: found, from: from, to: to};\n  });\n\n  CodeMirror.commands.autocomplete = CodeMirror.showHint;\n\n  var defaultOptions = {\n    hint: CodeMirror.hint.auto,\n    completeSingle: true,\n    alignWithWord: true,\n    closeCharacters: /[\\s()\\[\\]{};:>,]/,\n    closeOnUnfocus: true,\n    completeOnSingleClick: true,\n    container: null,\n    customKeys: null,\n    extraKeys: null\n  };\n\n  CodeMirror.defineOption(\"hintOptions\", null);\n};\n/* eslint-enable */\n",
    "var $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar CustomListView = require('../custom-list/custom-list-view');\nvar CustomListItemView = require('../custom-list/custom-list-item-view');\nvar itemTemplate = require('../custom-list/custom-list-item.tpl');\nvar magicPositioner = require('../../helpers/magic-positioner');\n\nvar ESCAPE_KEY_CODE = 27;\n\n/*\n *  A context menu\n */\nmodule.exports = CoreView.extend({\n\n  options: {\n    position: {\n      x: 0,\n      y: 0\n    },\n    offset: {\n      x: 0,\n      y: 15\n    },\n    itemTemplate: itemTemplate,\n    itemView: CustomListItemView\n  },\n\n  className: 'CDB-Box-modal CDB-SelectItem CustomList CustomList--small',\n  tagName: 'div',\n\n  initialize: function (opts) {\n    opts = opts || {};\n    if (!opts.collection) throw new Error('collection option is required');\n    if (!opts.triggerElementID) throw new Error('element id is required');\n\n    this._triggerElementID = opts.triggerElementID;\n\n    this.model = new Backbone.Model({\n      visible: false\n    });\n\n    this._onEscapePressed = this._onEscapePressed.bind(this);\n    this._onDocumentElementClicked = this._onDocumentElementClicked.bind(this);\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.model.on('change:visible', function (mdl, isVisible) {\n      this.render();\n      if (isVisible) {\n        this._initDocumentBinds();\n      } else {\n        this._destroyDocumentBinds();\n      }\n    }, this);\n    this.collection.on('change:selected', this.hide, this);\n    this.add_related_model(this.collection);\n  },\n\n  _initDocumentBinds: function () {\n    $(document).on('keydown', this._onEscapePressed);\n    $(document).on('mousedown', this._onDocumentElementClicked);\n  },\n\n  _destroyDocumentBinds: function () {\n    $(document).off('keydown', this._onEscapePressed);\n    $(document).off('mousedown', this._onDocumentElementClicked);\n  },\n\n  render: function () {\n    var $body = $('body');\n    var posX = (this.options.position.x || 0) + this.options.offset.x;\n    var posY = (this.options.position.y || 0) + this.options.offset.y;\n\n    this.clearSubViews();\n    this.$el.empty();\n    this._renderList();\n\n    this.$el.toggle(this.isVisible());\n\n    $body.append(this.el);\n\n    this.$el.css(\n      magicPositioner({\n        parentView: $body,\n        posX: posX,\n        posY: posY\n      })\n    );\n\n    return this;\n  },\n\n  _onEscapePressed: function (ev) {\n    if (ev.which === ESCAPE_KEY_CODE) {\n      this.hide();\n    }\n  },\n\n  _onDocumentElementClicked: function (ev) {\n    var $el = $(ev.target);\n    if ($el.closest(this.$el).length === 0 && $el.closest($('#' + this._triggerElementID)).length === 0) {\n      this.hide();\n    }\n  },\n\n  _renderList: function () {\n    this._listView = new CustomListView({\n      model: this.model,\n      collection: this.collection,\n      typeLabel: '',\n      ItemView: this.options.itemView,\n      itemTemplate: this.options.itemTemplate,\n      size: 5\n    });\n    this.$el.append(this._listView.render().el);\n    this.addView(this._listView);\n  },\n\n  show: function () {\n    this.model.set('visible', true);\n  },\n\n  hide: function () {\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  clean: function () {\n    this._destroyDocumentBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n",
    "var Backbone = require('backbone');\nvar CustomCarouselModel = require('./custom-carousel-item-model');\n\n/*\n *  Custom list collection, it parses pairs like:\n *\n *  [{ val, label }]\n *  [\"string\"]\n */\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, opts) {\n    var d = {};\n    if (typeof attrs === 'string') {\n      d.val = attrs;\n    } else {\n      d = attrs;\n    }\n    return new CustomCarouselModel(d);\n  },\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:selected', this._onSelectedChange, this);\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (isSelected) {\n      this.each(function (m) {\n        if (m.cid !== changedModel.cid && m.get('selected')) {\n          m.set('selected', false);\n        }\n      });\n    }\n  },\n\n  getSelected: function () {\n    return this.findWhere({ selected: true });\n  },\n\n  getSelectedValue: function () {\n    var selectedModel = this.getSelected();\n    return selectedModel && selectedModel.get('val');\n  },\n\n  getHighlighted: function () {\n    return this.findWhere({ highlighted: true });\n  }\n\n});\n",
    "var Backbone = require('backbone');\n\n/*\n *  List item model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    selected: false,\n    label: '',\n    template: function () {\n      return '';\n    }\n  },\n\n  getName: function () {\n    return this.get('label') || this.getValue();\n  },\n\n  getValue: function () {\n    return this.get('val');\n  }\n\n});\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./custom-carousel-item.tpl');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Carousel-item',\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this._itemClassName = opts && opts.itemOptions ? opts.itemOptions.className : '';\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        name: this.model.getName(),\n        className: this._itemClassName,\n        template: this.model.get('template')()\n      })\n    );\n\n    if (this.model.getValue()) {\n      this.$el.addClass('js-' + this.model.getValue());\n    }\n    this.$el.toggleClass('is-selected', !!this.model.get('selected'));\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:selected', this.render, this);\n  },\n\n  _onMouseEnter: function () {\n    this.model.set('highlighted', true);\n  },\n\n  _onMouseLeave: function () {\n    this.model.set('highlighted', false);\n  },\n\n  _onClick: function (e) {\n    this.killEvent(e);\n    this.model.set('selected', true);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button';\n if (className) { \n__p+=' class=\"'+\n((__t=( className ))==null?'':_.escape(__t))+\n'\"';\n } \n__p+='>\\n  '+\n((__t=( template ))==null?'':__t)+\n'\\n</button>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar Ps = require('perfect-scrollbar');\nvar template = require('./custom-carousel.tpl');\nvar CarouselCollection = require('./custom-carousel-collection');\nvar CarouselItemView = require('./custom-carousel-item-view');\nvar _ = require('underscore');\n/*\n *  A custom carousel selector\n *\n *  It accepts a collection of (val, label) model attributes or a values array\n *  with the same content or only strings.\n *\n *  new CustomCarousel({\n *    options: [\n *      {\n *        val: 'hello',\n *        label: 'hi'\n *      }\n *    ]\n *  });\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Carousel',\n  tagName: 'div',\n\n  initialize: function (opts) {\n    if (!opts.collection) {\n      if (!opts.options) { throw new Error('options array {value, label} is required'); }\n      this.collection = new CarouselCollection(opts.options);\n      this.options = opts;\n    }\n    this._bindedCheckShadows = this._checkShadows.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._renderList();\n    this._applyCustomScroll();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.collection.bind('change:selected', this._checkScroll, this);\n  },\n\n  _renderList: function () {\n    this.collection.each(function (mdl) {\n      this._createItem(mdl);\n    }, this);\n  },\n\n  _createItem: function (mdl) {\n    var opts = this.options;\n    var className = opts && opts.listItemOptions ? opts.listItemOptions.className : 'Carousel-item';\n    var view = new CarouselItemView({\n      className: className,\n      model: mdl,\n      itemOptions: this.options.itemOptions\n    });\n\n    this._listContainer().append(view.render().el);\n    this.addView(view);\n  },\n\n  _applyCustomScroll: function () {\n    Ps.initialize(this._listContainer().get(0), {\n      wheelSpeed: 1,\n      wheelPropagation: false,\n      swipePropagation: true,\n      suppressScrollY: true,\n      stopPropagationOnClick: false,\n      minScrollbarLength: 120\n    });\n    this._checkScroll();\n    this._bindScroll();\n  },\n\n  _destroyCustomScroll: function () {\n    this._unbindScroll();\n    Ps.destroy(this._listContainer().get(0));\n  },\n\n  _bindScroll: function () {\n    this._listContainer()\n      .on('ps-x-reach-start', this._bindedCheckShadows)\n      .on('ps-x-reach-end', this._bindedCheckShadows)\n      .on('ps-scroll-x', this._bindedCheckShadows);\n  },\n\n  _unbindScroll: function () {\n    this._listContainer()\n      .off('ps-x-reach-start', this._bindedCheckShadows)\n      .off('ps-x-reach-end', this._bindedCheckShadows)\n      .off('ps-scroll-x', this._bindedCheckShadows);\n  },\n\n  _checkScroll: function () {\n    var position = this.$('.is-selected').position();\n    if (position) {\n      this._listContainer().scrollLeft(position.left - 20);\n      this._bindedCheckShadows();\n    }\n  },\n\n  _listContainer: function () {\n    return this.$('.js-list');\n  },\n\n  _checkShadows: function () {\n    var currentPos = this._listContainer().scrollLeft();\n    var max = this._listContainer().get(0).scrollWidth;\n    var width = this._listContainer().outerWidth();\n    var maxPos = max - width;\n\n    this.$('.js-leftShadow').toggleClass('is-visible', currentPos > 0);\n    this.$('.js-rightShadow').toggleClass('is-visible', currentPos < maxPos);\n  },\n\n  clean: function () {\n    this._destroyCustomScroll();\n    CoreView.prototype.clean.apply(this);\n  },\n\n  initScroll: function () {\n    setTimeout(_.bind(function () {\n      this._checkShadows();\n      this._checkScroll();\n      Ps.update(this._listContainer().get(0));\n    }, this), 0);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Carousel-shadow Carousel-shadow--left js-leftShadow\"></div>\\n<div class=\"Carousel-shadow Carousel-shadow--right is-visible js-rightShadow\"></div>\\n<ul class=\"Carousel-list js-list\"></ul>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-ListDecoration-item CustomList-item js-listItem\">\\n  <button type=\"button\" class=\"CDB-ListDecoration-itemLink CustomList-itemLink js-add-custom-value u-ellipsis\" data-val=\"'+\n((__t=( query ))==null?'':_.escape(__t))+\n'\" title=\"'+\n((__t=( query ))==null?'':_.escape(__t))+\n'\">\\n    <p class=\"CDB-Text CDB-FontSize-small u-altTextColor\">'+\n((__t=( _t('components.custom-list.add-custom-result') ))==null?'':_.escape(__t))+\n'</p>\\n    '+\n((__t=( query ))==null?'':_.escape(__t))+\n'\\n  </button>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar CustomListItemModel = require('./custom-list-item-model');\nvar _ = require('underscore');\n\n/*\n *  Custom list collection, it parses pairs like:\n *\n *  [{ val, label }]\n *  [\"string\"]\n */\n\nmodule.exports = Backbone.Collection.extend({\n  sort_key: 'id', // default sort key\n\n  initialize: function (models, options) {\n    this.options = _.extend({ silent: true }, options);\n    this._initBinds();\n  },\n\n  comparator: function (item) {\n    return item.get(this.sort_key) ? item.get(this.sort_key).toLowerCase() : item.get(this.sort_key);\n  },\n\n  model: function (attrs, opts) {\n    var d = {};\n    if (typeof attrs === 'string') {\n      d.val = attrs;\n    } else {\n      d = attrs;\n    }\n    return new CustomListItemModel(d, opts);\n  },\n\n  sortByKey: function (key) {\n    this.sort_key = key;\n    this.sort();\n  },\n\n  _initBinds: function () {\n    this.bind('change:selected', this._onSelectedChange, this);\n  },\n\n  search: function (query) {\n    if (!query) return this;\n    query = query.toLowerCase();\n\n    return _(this.filter(function (model) {\n      var name = model.getName();\n      var val = _.isString(name) ? name.toLowerCase() : name;\n      return val ? ~val.indexOf(query) : -1;\n    }));\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (isSelected) {\n      this.each(function (m) {\n        if (m.cid !== changedModel.cid) {\n          m.set({\n            selected: false\n          }, {\n            silent: this.options.silent\n          });\n        }\n      }, this);\n    }\n  },\n\n  getSelectedItem: function () {\n    return _.first(\n      this.where({ selected: true })\n    );\n  },\n\n  containsValue: function (value) {\n    return this.find(function (mdl) {\n      return mdl.getValue() === value;\n    });\n  },\n\n  setSelected: function (value) {\n    var selectedModel;\n    var silent = { silent: this.options.silent };\n\n    this.each(function (mdl) {\n      if (mdl.getValue() === value) {\n        mdl.set({\n          selected: true\n        }, silent);\n        selectedModel = mdl;\n      } else {\n        mdl.set({\n          selected: false\n        }, silent);\n      }\n    });\n    return selectedModel;\n  },\n\n  removeSelected: function () {\n    this.each(function (mdl) {\n      mdl.set({\n        selected: false\n      });\n    });\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CustomList-message\">\\n  <p class=\"CustomList-messageText CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n    ';\n if (query && query.length) { \n__p+='\\n      '+\n((__t=( _t('components.custom-list.no-results', { typeLabel: typeLabel, query: query }) ))==null?'':_.escape(__t))+\n'\\n    ';\n } else { \n__p+='\\n      '+\n((__t=( _t('components.custom-list.no-items', { typeLabel: typeLabel }) ))==null?'':_.escape(__t))+\n'\\n    ';\n } \n__p+='\\n  </p>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\n\n/*\n *  List item model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    selected: false\n  },\n\n  getName: function () {\n    return (this.get('label') == null) ? this.getValue() : this.get('label'); // eslint-disable-line\n  },\n\n  getValue: function () {\n    return this.get('val');\n  }\n\n});\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n\n  options: {\n    template: require('./custom-list-item.tpl')\n  },\n\n  className: 'CDB-ListDecoration-item CustomList-item js-listItem',\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this.options = _.extend({}, this.options, opts);\n    this.model.on('change', this.render, this);\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    var name = this.model.getName() == null ? 'null' : this.model.getName();\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          isDestructive: this.model.get('destructive'),\n          name: name,\n          val: this.model.getValue(),\n          options: this.model.get('renderOptions')\n        })\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  },\n\n  _onMouseLeave: function () {\n    this.$el.removeClass('is-highlighted');\n  },\n\n  _onMouseEnter: function () {\n    this.$el.addClass('is-highlighted');\n  },\n\n  _onClick: function (ev) {\n    this.killEvent(ev);\n    this.model.set({\n      selectedClass: ev.target.classList,\n      selected: true\n    });\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-ListDecoration-itemLink u-ellipsis\\n  ';\n if (isSelected) { \n__p+=' is-selected ';\n } \n__p+='\\n  ';\n if (isDestructive) { \n__p+='\\n  u-errorTextColor\\n  ';\n } else if (isDisabled) { \n__p+='\\n  u-hintTextColor\\n  ';\n } else { \n__p+='\\n  u-actionTextColor\\n  ';\n } \n__p+='\\n  \" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">\\n\\n  <div class=\"u-iBlock u-rSpace\">\\n    <input class=\"CDB-Checkbox js-input\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (isSelected) { \n__p+='checked';\n } \n__p+=' ';\n if (isDisabled) { \n__p+='disabled';\n } \n__p+=' />\\n    <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n  </div>\\n  '+\n((__t=( name ))==null?'':_.escape(__t))+\n'\\n</button>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-ListDecoration-itemLink u-ellipsis\\n    ';\n if (isSelected) { \n__p+=' is-selected ';\n } \n__p+='\\n    ';\n if (isDestructive) { \n__p+='\\n      u-errorTextColor\\n    ';\n } else if (isDisabled) { \n__p+='\\n      u-hintTextColor\\n    ';\n } else { \n__p+='\\n      u-actionTextColor\\n    ';\n } \n__p+='\\n  \" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">\\n  '+\n((__t=( name ))==null?'':_.escape(__t))+\n'\\n</button>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CustomListCollection = require('./custom-list-collection');\n\nmodule.exports = CustomListCollection.extend({\n  _initBinds: function () { },\n\n  setSelected: function (value) {\n    var selectedModel;\n    var silentTrue = { silent: true };\n\n    if (_.isArray(value)) {\n      this.each(function (mdl) {\n        if (_.contains(value, mdl.getValue())) {\n          mdl.set({\n            selected: true\n          }, silentTrue);\n          selectedModel = mdl;\n        } else {\n          mdl.set({\n            selected: false\n          }, silentTrue);\n        }\n      });\n    } else {\n      this.each(function (mdl) {\n        if (mdl.getValue() === value) {\n          mdl.set({\n            selected: true\n          }, silentTrue);\n          selectedModel = mdl;\n        } else {\n          mdl.set({\n            selected: false\n          }, silentTrue);\n        }\n      });\n    }\n    return selectedModel;\n  }\n});\n",
    "var CustomListItemView = require('./custom-list-item-view');\n\nmodule.exports = CustomListItemView.extend({\n  _onClick: function (ev) {\n    this.killEvent(ev);\n    this.model.set('selected', !this.model.get('selected'));\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./custom-list-search.tpl');\n\nmodule.exports = CoreView.extend({\n\n  className: 'CustomList-form CDB-Box-modalHeader',\n  tagName: 'form',\n\n  events: {\n    'keyup .js-search': '_onSearchType',\n    'click .js-clear': '_onClickClear',\n    'submit': '_submit'\n  },\n\n  initialize: function () {\n    this.template = this.options.template || template;\n    this.searchPlaceholder = this.options.searchPlaceholder || _t('components.custom-list.placeholder', { typeLabel: this.options.typeLabel });\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el\n      .empty()\n      .append(\n        this.template({\n          query: this.model.get('query'),\n          searchPlaceholder: this.searchPlaceholder\n        })\n      );\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.on('change:query', this._checkButtons, this);\n  },\n\n  _checkButtons: function () {\n    var query = this.model.get('query');\n    this.$('.js-clear').toggle(query.length > 0);\n  },\n\n  _onSearchType: function (e) {\n    this._submit();\n  },\n\n  _onClickClear: function (e) {\n    e.stopPropagation();\n    this.model.set('query', '');\n    this.render();\n    this.focus();\n  },\n\n  focus: function () {\n    this.$('.js-search').focus();\n  },\n\n  _submit: function (ev) {\n    this.killEvent(ev);\n    var query = this.$('.js-search').val();\n    this.model.set('query', query);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeaderItem\">\\n  <input type=\"text\" name=\"text\" autocomplete=\"off\" placeholder=\"'+\n((__t=( searchPlaceholder ))==null?'':_.escape(__t))+\n'\" class=\"CDB-InputTextPlain CDB-Text js-search\">\\n  <button type=\"button\" style=\"display:none\" class=\"u-lSpace--xl js-clear\">\\n    <div class=\"CDB-Shape\">\\n      <div class=\"CDB-Shape-close is-blue is-large\"></div>\\n    </div>\\n  </button>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar Ps = require('perfect-scrollbar');\nvar emptyTemplate = require('./custom-list-empty.tpl');\nvar addTemplate = require('./custom-list-add.tpl');\nvar template = require('./custom-list.tpl');\nvar ARROW_DOWN_KEY_CODE = 40;\nvar Utils = require('../../helpers/utils');\nvar ARROW_UP_KEY_CODE = 38;\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = CoreView.extend({\n  options: {\n    size: 3\n  },\n\n  className: 'CDB-Text CDB-Size-medium CustomList-listWrapper',\n\n  tagName: 'div',\n\n  events: {\n    'click .js-add-custom-value': '_onClickAddCustomValue'\n  },\n\n  initialize: function (opts) {\n    this.options = _.extend({}, this.options, opts);\n    this._onKeyDownBinded = this._onKeyDown.bind(this);\n    this._needsMaxSize = true;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeArrowBinds();\n    this._destroyCustomScroll();\n    this.$el.empty();\n\n    var query = this.model.get('query');\n    var items = this.collection.search(query);\n\n    this.$el.append(template());\n\n    var allowFreeTextInput = this.options.allowFreeTextInput;\n    var containsValue = !this.collection.containsValue(query);\n\n    if (allowFreeTextInput && query && !Utils.isBlank(query) && containsValue) {\n      this.$el.prepend(\n        addTemplate({\n          query: query,\n          typeLabel: this.options.typeLabel\n        })\n      );\n    }\n\n    if (items.size() > 0) {\n      items.each(this._renderItem, this);\n      this._applyArrowBinds();\n      // Perfect-scroll needs to have the element in the DOM in order to\n      // style/positionate the scroll properly, small trick\n      setTimeout(this._applyCustomScroll.bind(this), 0);\n    } else if (!allowFreeTextInput || Utils.isBlank(query)) {\n      this.$el.append(\n        emptyTemplate({\n          query: query,\n          typeLabel: this.options.typeLabel\n        })\n      );\n    }\n\n    return this;\n  },\n\n  _renderItem: function (mdl) {\n    var ItemViewClass = this.options.ItemView;\n    var itemView = new ItemViewClass({\n      model: mdl,\n      typeLabel: this.options.typeLabel,\n      template: this.options.itemTemplate\n    });\n    this.$('.js-list').append(itemView.render().el);\n    this.addView(itemView);\n\n    itemView.bind('customEvent', function (eventName, item) {\n      this.trigger('customEvent', eventName, item, this);\n    }, this);\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:query', this.render, this);\n  },\n\n  _applyArrowBinds: function () {\n    document.addEventListener('keydown', this._onKeyDownBinded);\n  },\n\n  _removeArrowBinds: function () {\n    document.removeEventListener('keydown', this._onKeyDownBinded);\n  },\n\n  _getSelected: function () {\n    var selectedModel = this.collection.getSelectedItem();\n    var selectedValue;\n\n    if (selectedModel) {\n      selectedValue = selectedModel.getValue();\n      return this.$(\"[data-val='\" + selectedValue + \"']\");\n    }\n\n    return null;\n  },\n\n  _highlightSelected: function (item) {\n    var itemHeight = item.outerHeight();\n    item.addClass('is-highlighted');\n    this.$('.js-list').scrollTop(item.index() * itemHeight);\n  },\n\n  _onClickAddCustomValue: function (e) {\n    this.killEvent(e);\n\n    var query = this.model.get('query');\n\n    var mdl = this.collection.add({\n      val: query,\n      label: '' + query + ''\n    });\n\n    this.collection.sortByKey('val');\n    mdl.set('selected', true);\n  },\n\n  _onKeyDown: function (e) {\n    if (this.model.get('visible') === false) {\n      return;\n    }\n\n    var key = e.which;\n    var $listItems = this.$('.js-listItem');\n    var $highlighted = $listItems.filter('.is-highlighted');\n    var $current;\n    var mdl;\n\n    $highlighted.removeClass('is-highlighted');\n\n    if (key === ARROW_DOWN_KEY_CODE) {\n      if (!$highlighted.length || $highlighted[0] === $listItems.last()[0]) {\n        $current = $listItems.eq(0);\n      } else {\n        $current = $highlighted.next();\n      }\n    } else if (key === ARROW_UP_KEY_CODE) {\n      if (!$highlighted.length || $highlighted[0] === $listItems.first()[0]) {\n        $current = $listItems.last();\n      } else {\n        $current = $highlighted.prev();\n      }\n    } else if (key === ENTER_KEY_CODE) {\n      e.preventDefault();\n      if ($highlighted && $highlighted.length) {\n        mdl = _.first(this.collection.where({ val: $highlighted.data('val') }));\n        if (mdl) {\n          mdl.set('selected', true);\n        }\n        return false;\n      }\n    }\n\n    $current && this._highlightSelected($current);\n  },\n\n  _applyCustomScroll: function () {\n    Ps.initialize(this._wrapperContainer().get(0), {\n      wheelSpeed: 2,\n      wheelPropagation: true,\n      stopPropagationOnClick: false,\n      minScrollbarLength: 20\n    });\n  },\n\n  _destroyCustomScroll: function () {\n    if (this._wrapperContainer().length > 0) {\n      Ps.destroy(this._wrapperContainer().get(0));\n    }\n  },\n\n  _wrapperContainer: function () {\n    return this.$('.js-list');\n  },\n\n  clean: function () {\n    this._removeArrowBinds();\n    this._destroyCustomScroll();\n    CoreView.prototype.clean.apply(this);\n  },\n\n  highlight: function () {\n    var selected = this._getSelected();\n    selected && this._highlightSelected(selected);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"CustomList-list js-list\"></ul>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar CustomListCollection = require('./custom-list-collection');\nvar SearchView = require('./custom-list-search-view');\nvar CustomListView = require('./custom-list-view');\nvar itemTemplate = require('./custom-list-item.tpl');\nvar CustomListItemView = require('./custom-list-item-view');\n\n/*\n *  A custom list with possibility to search within values.\n *\n *  It accepts a collection of (val, label) model attributes or a values array\n *  with the same content or only strings.\n *\n *  new CustomList({\n *    showSearch: false,\n *    itemTemplate: itemTemplate,\n *    values: [\n *      {\n *        val: 'hello',\n *        label: 'hi'\n *      }\n *    ]\n *  });\n */\n\nmodule.exports = CoreView.extend({\n\n  options: {\n    showSearch: true,\n    allowFreeTextInput: false,\n    typeLabel: 'column',\n    itemTemplate: itemTemplate,\n    itemView: CustomListItemView\n  },\n\n  className: 'CDB-Box-modal CustomList',\n  tagName: 'div',\n\n  initialize: function (opts) {\n    if (!opts.collection) {\n      if (!opts.options) { throw new Error('options array {value, label} is required'); }\n      this.collection = new CustomListCollection(opts.options);\n    }\n\n    if (opts.position) {\n      this.$el.css(opts.position);\n    }\n\n    this.options = _.extend({}, this.options, opts);\n    this.model = new Backbone.Model({\n      query: '',\n      visible: false\n    });\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    if (this.options.showSearch) {\n      this._renderSearch();\n    }\n    this._renderList();\n\n    if (this.options.showSearch) {\n      this._focusSearch();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:visible', function (mdl, isVisible) {\n      this._resetQuery();\n      this._toggleVisibility();\n\n      if (!isVisible) {\n        this.clearSubViews();\n      } else {\n        this.render();\n      }\n    }, this);\n  },\n\n  _renderSearch: function () {\n    this._searchView = new SearchView({\n      template: this.options.searchTemplate,\n      typeLabel: this.options.typeLabel,\n      searchPlaceholder: this.options.searchPlaceholder,\n      model: this.model\n    });\n    this.$el.prepend(this._searchView.render().el);\n    this.addView(this._searchView);\n  },\n\n  _focusSearch: function () {\n    setTimeout(function () {\n      this._searchView && this._searchView.focus();\n    }.bind(this), 0);\n  },\n\n  _renderList: function () {\n    this._listView = new CustomListView({\n      model: this.model,\n      allowFreeTextInput: this.options.allowFreeTextInput,\n      collection: this.collection,\n      typeLabel: this.options.typeLabel,\n      ItemView: this.options.itemView,\n      itemTemplate: this.options.itemTemplate,\n      size: this.options.size\n    });\n    this.$el.append(this._listView.render().el);\n\n    this._listView.highlight();\n    this.addView(this._listView);\n\n    this._listView.bind('customEvent', function (eventName, item) {\n      this.trigger(eventName, item, this);\n    }, this);\n  },\n\n  highlight: function () {\n    this._listView.highlight();\n  },\n\n  _resetQuery: function () {\n    this.model.set('query', '');\n  },\n\n  show: function () {\n    this.model.set('visible', true);\n  },\n\n  hide: function () {\n    this.trigger('hidden', this);\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  _toggleVisibility: function () {\n    this.$el.toggleClass('is-visible', !!this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  remove: function () {\n    this._listView && this._listView.clean();\n    CoreView.prototype.remove.call(this);\n  }\n});\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar SQLNotifications = require('../../sql-notifications');\nvar SQLUtils = require('../../helpers/sql-utils');\nvar Notifier = require('../../components/notifier/notifier');\nvar cdb = require('cartodb.js');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'editorModel',\n  'layerDefinitionModel',\n  'querySchemaModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._clearSQLModel = new Backbone.Model({\n      visible: false\n    });\n\n    this._sqlModel = this._layerDefinitionModel.sqlModel;\n\n    this._SQL = new cdb.SQL({\n      user: this._configModel.get('user_name'),\n      sql_api_template: this._configModel.get('sql_api_template'),\n      api_key: this._configModel.get('api_key')\n    });\n\n    this._codemirrorModel = new Backbone.Model({\n      content: this._querySchemaModel.get('query'),\n      readonly: false\n    });\n\n    SQLNotifications.track(this);\n  },\n\n  _internalParseSQL: function (callbackAfterAlterSuccess) {\n    var appliedQuery = this._querySchemaModel.get('query');\n    var currentQuery = this._codemirrorModel.get('content');\n\n    // Remove last character if it has ';'\n    if (currentQuery && currentQuery.slice(-1) === ';') {\n      currentQuery = currentQuery.slice(0, currentQuery.length - 1);\n      this._codemirrorModel.set('content', currentQuery);\n    }\n\n    var isSameQuery = SQLUtils.isSameQuery(currentQuery, appliedQuery);\n    var altersData = SQLUtils.altersData(currentQuery);\n\n    if (currentQuery === '' || isSameQuery) {\n      SQLNotifications.removeNotification();\n      return false;\n    }\n\n    if (altersData) {\n      SQLNotifications.showNotification({\n        status: 'loading',\n        info: _t('notifications.sql.alter-loading'),\n        closable: false\n      });\n\n      this._sqlModel.set('content', currentQuery);\n\n      this._SQL.execute(currentQuery, null, {\n        success: function () {\n          SQLNotifications.showNotification({\n            status: 'success',\n            info: _t('notifications.sql.alter-success'),\n            closable: true,\n            delay: Notifier.DEFAULT_DELAY\n          });\n          this._applyDefaultSQLAfterAlteringData();\n          if (typeof callbackAfterAlterSuccess === 'function') {\n            callbackAfterAlterSuccess.call(this);\n          }\n        }.bind(this),\n        error: function (errors) {\n          errors = errors.responseJSON.error;\n          var parsedErrors = this._parseErrors(errors);\n          this._codemirrorModel.set('errors', parsedErrors);\n          SQLNotifications.showErrorNotification(parsedErrors);\n          this._checkClearButton();\n        }.bind(this)\n      });\n    } else {\n      this._runQuery(currentQuery, this._saveSQL.bind(this));\n    }\n  },\n\n  _checkClearButton: function () {\n    var customSql = this._codemirrorModel.get('content');\n    var isDefaultQuery = SQLUtils.isSameQuery(customSql, this._defaultSQL());\n    this._clearSQLModel.set({ visible: !isDefaultQuery });\n  },\n\n  _applyDefaultSQLAfterAlteringData: function () {\n    var originalQuery = this._defaultSQL();\n    this._codemirrorModel.set({\n      content: originalQuery,\n      errors: []\n    });\n    this._sqlModel.set('content', originalQuery);\n    this._querySchemaModel.set('query_errors', []);\n    this._clearSQLModel.set({ visible: false });\n    this._querySchemaModel.resetDueToAlteredData();\n    this._clearSQL();\n  },\n\n  _clearSQL: function () {\n    var originalQuery = this._defaultSQL();\n    this._codemirrorModel.set({\n      content: originalQuery,\n      errors: []\n    });\n    this._runQuery(originalQuery, this._saveSQL.bind(this));\n  },\n\n  _showErrors: function (model) {\n    var errors = this._querySchemaModel.get('query_errors');\n    var hasErrors = errors && errors.length > 0;\n    this._codemirrorModel.set('errors', this._parseErrors(errors));\n    this._editorModel.set('disabled', hasErrors);\n\n    if (hasErrors) {\n      SQLNotifications.showErrorNotification(this._parseErrors(errors));\n    }\n\n    this._checkClearButton();\n  },\n\n  _parseErrors: function (errors) {\n    return errors.map(function (error) {\n      return {\n        message: error\n      };\n    });\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar cdb = require('cartodb.js');\nvar baseTemplate = require('./error.tpl');\n\n/**\n * A typical error view.\n * @param {Object} options\n * @param {String} options.title If not provided will use a generic text as fallback\n * @param {String} options.desc If not provied will use a generic text as fallback\n */\nmodule.exports = CoreView.extend({\n\n  className: 'IntermediateInfo',\n\n  initialize: function (opts) {\n    var attrs = _.defaults(\n      _.pick(opts, ['title', 'desc']),\n      {\n        title: _t('components.error.default-title'),\n        desc: _t('components.error.default-desc')\n      }\n    );\n    this._template = this.options && this.options.template || baseTemplate;\n    this.model = new Backbone.Model(attrs);\n  },\n\n  render: function () {\n    this.$el.html(this._html());\n    return this;\n  },\n\n  _html: function () {\n    var m = this.model;\n    return this._template({\n      title: m.get('title'),\n      desc: cdb.core.sanitize.html(m.get('desc'))\n    });\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"LayoutIcon LayoutIcon--negative\">\\n  <i class=\"CDB-IconFont CDB-IconFont-cockroach\"></i>\\n</div>\\n<h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-errorTextColor u-bSpace--m u-tSpace-xl\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h3>\\n<p class=\"CDB-Text CDB-Size-medium u-altTextColor\">'+\n((__t=( desc ))==null?'':__t)+\n'</p>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar $ = require('jquery');\nvar ESC_KEY_CODE = 27;\n\nBackbone.Form.editors.Base = Backbone.Form.editors.Base.extend({\n\n  applyESCBind: function (callback) {\n    this._ESCBindCallback = callback;\n    document.addEventListener('keydown', this._onKeyDown.bind(this));\n  },\n\n  _onKeyDown: function (ev) {\n    var anyModalOpen;\n    if (ev.which === ESC_KEY_CODE) {\n      anyModalOpen = this._anyModalOpen();\n      !anyModalOpen && this._ESCBindCallback();\n    }\n  },\n\n  applyClickOutsideBind: function (callback) {\n    this._clickBindCallback = callback;\n    this.$el.attr('data-cid', this.cid);\n    document.addEventListener('click', this._onDocumentClick.bind(this));\n  },\n\n  _onDocumentClick: function (e) {\n    var $el = $(e.target);\n    var anyModalOpen = this._anyModalOpen();\n    if ($el.closest('[data-cid=\"' + this.cid + '\"]').length === 0 && !anyModalOpen) {\n      this._clickBindCallback();\n    }\n  },\n\n  _anyModalOpen: function () {\n    var modals = this.options.modals;\n    if (!modals) {\n      return false;\n    }\n\n    return modals.isOpen();\n  },\n\n  remove: function () {\n    if (this._ESCBindCallback) {\n      document.removeEventListener('keydown', this._onKeyDown.bind(this));\n    }\n    if (this._clickBindCallback) {\n      document.removeEventListener('click', this._onDocumentClick.bind(this));\n    }\n    Backbone.View.prototype.remove.call(this);\n  }\n\n});\n",
    "var $ = require('jquery');\nvar Backbone = require('backbone');\nvar FactoryHints = require('../../../editor/editor-hints/factory-hints');\nvar CodeMirrorView = require('../../code-mirror/code-mirror-view');\n\nBackbone.Form.editors.CodeEditor = Backbone.Form.editors.TextArea.extend({\n  render: function () {\n    this.setValue(this.value);\n\n    this._codemirrorModel = new Backbone.Model({\n      content: this.value,\n      readonly: false,\n      lineNumbers: false\n    });\n\n    FactoryHints.init({\n      tokens: this.options.tokens,\n      tableName: false,\n      columnsName: false\n    });\n\n    this._initViews();\n\n    this._toggleDisableState();\n\n    return this;\n  },\n\n  getValue: function () {\n    var val = this.$el.val();\n\n    val = this.codeMirrorView.getContent();\n\n    return (val === '') ? null : val;\n  },\n\n  _initViews: function () {\n    this._destroyEditor();\n\n    var hints = FactoryHints.reset().hints;\n    this.codeMirrorView = new CodeMirrorView({\n      model: this._codemirrorModel,\n      hints: hints,\n      mode: 'text/mustache',\n      autocompleteChars: 2,\n      autocompletePrefix: '{{',\n      autocompleteSuffix: '}}',\n      placeholder: this.options.placeholder,\n      tip: ''\n    });\n    this.codeMirrorView.bind('codeChanged', function () {\n      this.trigger('change', this.codeMirrorView.getContent());\n    }, this);\n\n    var $codeMirrorEl = $(this.codeMirrorView.render().el);\n    this.$el.replaceWith($codeMirrorEl);\n    this.setElement($codeMirrorEl);\n    this.$el.addClass('CodeMirror-formInput');\n    // The default el is replace it with another dom node\n    // we should add tracking class manually again\n    this._addTrackingClass();\n  },\n\n  _addTrackingClass: function () {\n    if (this.options.trackingClass) {\n      var trackClasses = this.options.trackingClass + ' track-' + this.options.key + this.options.editorType;\n      this.$el.addClass(trackClasses);\n    }\n  },\n\n  _hasEditor: function () {\n    return this.options.editor && !!this.codeMirrorView;\n  },\n\n  _destroyEditor: function () {\n    if (this._hasEditor()) {\n      this.codeMirrorView.remove();\n    }\n  },\n\n  remove: function () {\n    this._destroyEditor();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('../../../../helpers/required-opts');\nvar StackLayoutView = require('../../../../components/stack-layout/stack-layout-view');\nvar MeasurementsView = require('./measurement-list-view');\nvar FiltersView = require('./filter-list-view');\n\nvar REQUIRED_OPTS = [\n  'measurementsCollection',\n  'filtersCollection'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Box-modal CustomList',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    // For internal state\n    this.model = new Backbone.Model({\n      visible: false\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._generateStackLayoutView();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:visible', function (mdl, isVisible) {\n      isVisible ? this.render() : this.clearSubViews();\n      this._toggleVisibility();\n    });\n  },\n\n  _generateStackLayoutView: function () {\n    var self = this;\n\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createListView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createFilterView(stackLayoutModel, opts).bind(self);\n      }\n    }]);\n\n    this._stackLayoutView = new StackLayoutView({ collection: stackViewCollection });\n    this.addView(this._stackLayoutView);\n    this.$el.append(this._stackLayoutView.render().$el);\n  },\n\n  _createListView: function (stackLayoutModel, opts) {\n    var view = new MeasurementsView({\n      measurementsCollection: this._measurementsCollection,\n      filtersCollection: this._filtersCollection\n    });\n\n    view.bind('filters', function () {\n      stackLayoutModel.nextStep();\n    }, this);\n\n    return view;\n  },\n\n  _createFilterView: function (stackLayoutModel, opts) {\n    var view = new FiltersView({\n      filtersCollection: this._filtersCollection\n    });\n\n    view.bind('back', function () {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    return view;\n  },\n\n  hide: function () {\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  _toggleVisibility: function () {\n    this.$el.toggleClass('is-visible', !!this.isVisible());\n  },\n\n  clean: function () {\n    // Other ops here\n    CoreView.prototype.clean.apply(this, arguments);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (typeof isLoading != 'undefined' && isLoading) { \n__p+='\\n  <div class=\"u-flex\">\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n    <span class=\"u-lSpace u-secondaryTextColor\">'+\n((__t=( _t('components.backbone-forms.select.loading') ))==null?'':_.escape(__t))+\n'</span>\\n  </div>\\n';\n } else { \n__p+='\\n  '+\n((__t=( label ))==null?'':_.escape(__t))+\n'\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar template = require('./dropdown.tpl');\nvar selectedItemTemplate = require('./dropdown-item.tpl');\nvar DropdownDialogView = require('./dropdown-dialog-view');\nvar PopupManager = require('../../../popup-manager');\nvar MeasurementsCollection = require('./measurements-collection');\nvar FiltersCollection = require('./measurements-filters-collection');\n\nvar ENTER_KEY_CODE = 13;\nvar STATE = {\n  idle: 'idle',\n  loading: 'loading',\n  fetching: 'fetching',\n  fetched: 'fetched',\n  error: 'error'\n};\n\nBackbone.Form.editors.DataObservatoryDropdown = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'u-ellipsis Editor-formSelect',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  options: {\n    selectedItemTemplate: selectedItemTemplate\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.template = opts.template || template;\n    this.dialogMode = this.options.dialogMode || 'nested';\n\n    var collectionOptions = {\n      configModel: this.options.configModel,\n      layerDefinitionModel: this.options.layerDefinitionModel,\n      country: this.model.get('country') || null\n    };\n\n    this.measurementsCollection = new MeasurementsCollection([], collectionOptions);\n    this.filtersCollection = new FiltersCollection([], collectionOptions);\n\n    this._modelView = new Backbone.Model({\n      state: STATE.idle\n    });\n\n    this._initBinds();\n\n    this._dialogView = new DropdownDialogView({\n      measurementsCollection: this.measurementsCollection,\n      filtersCollection: this.filtersCollection\n    });\n\n    this._fetch();\n  },\n\n  render: function () {\n    var isLoading = this._isLoading();\n    var isEmpty = !this._hasItems();\n    var isDisabled = !isEmpty ? this.options.disabled : true;\n    var name = this.model.get(this.options.keyAttr);\n    var item = this.measurementsCollection.getItem(name);\n    var isNull = name === null;\n    var label = isNull ? 'null' : (item ? item.get('name') : false);\n    var placeholder = this.options.placeholder;\n\n    this.$el.html(\n      this.template({\n        label: label,\n        keyAttr: this.options.keyAttr,\n        placeholder: placeholder,\n        isDisabled: isDisabled,\n        isLoading: isLoading,\n        isEmpty: isEmpty,\n        isNull: isNull\n      })\n    );\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._dialogView.$el);\n    this._popupManager.append(this.dialogMode);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._dialogView.hide();\n      this._popupManager.untrack();\n    }.bind(this);\n\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n\n    this.listenTo(this.measurementsCollection, 'change:selected', this._onItemSelected);\n    this.listenTo(this._modelView, 'change:state', this.render);\n    this.listenTo(this.model, 'change:country', this._fetch);\n  },\n\n  _fetch: function () {\n    var fetchOptions = {\n      success: this._onFetchSuccess.bind(this),\n      error: this._onFetchError.bind(this)\n    };\n\n    this.measurementsCollection.fetch(fetchOptions);\n    this.filtersCollection.fetch(fetchOptions);\n    this._modelView.set({state: STATE.loading});\n\n    this.setValue(this.model.get(this.options.keyAttr));\n  },\n\n  _onFetchSuccess: function () {\n    var measurementsReady = this.measurementsCollection.getState() === STATE.fetched;\n    var filtersReady = this.filtersCollection.getState() === STATE.fetched;\n\n    if (filtersReady && measurementsReady) {\n      this._modelView.set({state: STATE.fetched});\n    }\n  },\n\n  _onFetchError: function () {\n    this._modelView.set({state: STATE.error});\n  },\n\n  _hasItems: function () {\n    var state = this.measurementsCollection.getState();\n    return state === STATE.fetched && this.measurementsCollection.filter(function (mdl) {\n      var filter = mdl.get('filter');\n      return filter.length > 0;\n    }).length > 0;\n  },\n\n  _isLoading: function () {\n    var state = this.measurementsCollection.getState();\n    return state === STATE.fetching;\n  },\n\n  _onItemSelected: function (mdl) {\n    this._dialogView.hide();\n    this._popupManager.untrack();\n    this._renderButton(mdl).focus();\n    this.trigger('change', this);\n  },\n\n  _onButtonClick: function () {\n    if (this._hasItems()) {\n      this._dialogView.toggle();\n      this._dialogView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n    }\n  },\n\n  _onButtonKeyDown: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      ev.preventDefault();\n      if (!this._dialogView.isVisible()) {\n        ev.stopPropagation();\n        this._onButtonClick();\n      } else {\n        this._popupManager.track();\n      }\n    }\n  },\n\n  getValue: function () {\n    var item = this.measurementsCollection.getSelectedItem();\n    if (item) {\n      return item.getName();\n    }\n    return;\n  },\n\n  setValue: function (value) {\n    var selectedModel = this.measurementsCollection.setSelected(value);\n    if (selectedModel) {\n      this._renderButton(selectedModel);\n    }\n    this.value = value;\n  },\n\n  _renderButton: function (mdl) {\n    var button = this.$('.js-button');\n    var $html = this.options.selectedItemTemplate({\n      label: mdl.getName()\n    });\n\n    button\n      .removeClass('is-empty')\n      .html($html);\n\n    return button;\n  },\n\n  remove: function () {\n    this._popupManager && this._popupManager.destroy();\n    this._dialogView && this._dialogView.clean();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-InputText CDB-Text is-cursor js-button u-ellipsis\\n  ';\n if (isDisabled) { \n__p+=' is-disabled ';\n } \n__p+='\\n  ';\n if (!label) { \n__p+=' is-empty ';\n } \n__p+='\\n  ';\n if (isNull) { \n__p+=' is-empty ';\n } \n__p+='\"\\n  tabindex=\"0\">\\n  ';\n if (isLoading) { \n__p+='\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark u-iBlock\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n    <span class=\"u-lSpace u-secondaryTextColor\">'+\n((__t=( _t('components.backbone-forms.select.loading') ))==null?'':_.escape(__t))+\n'</span>\\n  ';\n } else { \n__p+='\\n    ';\n if (isEmpty) { \n__p+='\\n      '+\n((__t=( _t('components.backbone-forms.select.empty') ))==null?'':_.escape(__t))+\n'\\n    ';\n } else { \n__p+='\\n      '+\n((__t=( placeholder || label || _t('components.backbone-forms.select.placeholder', { keyAttr: keyAttr }) ))==null?'':_.escape(__t))+\n'\\n    ';\n } \n__p+='\\n  ';\n } \n__p+='\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CustomListMultiItemView = require('../../../custom-list/custom-list-multi-item-view');\n\nvar NAME = _.template('<%-name %> (<%- items %>)');\n\nmodule.exports = CustomListMultiItemView.extend({\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var name = this.model.getName() == null ? 'null' : this.model.getName();\n    name = name.replace(/\"/g, '');\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          name: NAME({\n            name: name,\n            items: this.model.get('items')\n          }),\n          val: this.model.getValue(),\n          description: this.model.get('description')\n        })\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-ListDecoration-itemLink\\n  ';\n if (isSelected) { \n__p+=' is-selected ';\n } \n__p+='\\n  \" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">\\n  <div class=\"u-flex\">\\n    <div class=\"u-iBlock u-rSpace--m\">\\n      <input class=\"CDB-Checkbox js-input\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (isSelected) { \n__p+='checked';\n } \n__p+=' ';\n if (isDisabled) { \n__p+='disabled';\n } \n__p+=' />\\n      <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n    </div>\\n    <div>\\n      <div class=\"u-bSpace\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</div>\\n      <div class=\"CDB-Size-small u-altTextColor\">'+\n((__t=( description ))==null?'':_.escape(__t))+\n'</div>\\n    </div>\\n  </div>\\n</button>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar CustomListView = require('../../../custom-list/custom-view');\nvar CustomListItemView = require('./filter-list-item-view');\nvar itemListTemplate = require('./filter-list-item.tpl');\nvar template = require('./filter-list-view.tpl');\nvar checkAndBuildOpts = require('../../../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'filtersCollection'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n\n    this._listView = new CustomListView({\n      className: 'DO-Filters',\n      typeLabel: _t('components.backbone-forms.data-observatory.dropdown.filter.filters'),\n      showSearch: false,\n      collection: this._filtersCollection,\n      itemTemplate: itemListTemplate,\n      itemView: CustomListItemView\n    });\n\n    this.addView(this._listView);\n  },\n\n  render: function () {\n    this.$el.append(template({\n      headerTitle: _t('components.backbone-forms.data-observatory.dropdown.filter.header')\n    }));\n\n    this.$('.js-content').append(this._listView.render().$el);\n\n    return this;\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._filtersCollection, 'change:selected', this._onSelectItem, this);\n  },\n\n  _onSelectItem: function (item) {\n    this.trigger('selectItem', item, this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <button class=\"u-actionTextColor js-back u-rSpace\">\\n        <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n      </button>\\n      '+\n((__t=( headerTitle))==null?'':_.escape(__t))+\n'\\n    </li>\\n  </ul>\\n</div>\\n<div class=\"js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar BaseView = require('../../../custom-list/custom-list-item-view');\n\nmodule.exports = BaseView.extend({\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    var name = this.model.getName() == null ? 'null' : this.model.getName();\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          name: name,\n          val: this.model.getValue(),\n          description: this.model.get('description')\n        })\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-ListDecoration-itemLink\\n    ';\n if (isSelected) { \n__p+=' is-selected ';\n } \n__p+='\\n  \" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">\\n  <div class=\"u-bSpace\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</div>\\n  <div class=\"CDB-Size-small u-altTextColor\">'+\n((__t=( description ))==null?'':_.escape(__t))+\n'</div>\\n</button>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeaderItem\">\\n  <div  class=\"u-flex u-grow\">\\n    <div class=\"u-flex u-grow\">\\n      <input type=\"text\" name=\"text\" autocomplete=\"off\" placeholder=\"'+\n((__t=( searchPlaceholder ))==null?'':_.escape(__t))+\n'\" class=\"CDB-InputTextPlain CDB-Text js-search\">\\n      <button type=\"button\" style=\"display:none\" class=\"u-lSpace--xl u-rSpace--xl js-clear\">\\n        <div class=\"CDB-Shape\">\\n          <div class=\"CDB-Shape-close is-blue is-large\"></div>\\n        </div>\\n      </button>\\n    </div>\\n\\n    <div>\\n      <button class=\"CDB-Text CDB-Size-medium u-actionTextColor js-filters u-rSpace--m\">'+\n((__t=( _t('analyses.data-observatory-measure.filters') ))==null?'':_.escape(__t))+\n'</button>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar CustomListCollection = require('../../../custom-list/custom-list-collection');\nvar CustomListView = require('../../../custom-list/custom-view');\nvar CustomListItemView = require('./measurement-list-item-view');\nvar itemListTemplate = require('./measurement-list-item.tpl');\nvar checkAndBuildOpts = require('../../../../helpers/required-opts');\nvar searchTemplate = require('./measurement-list-search.tpl');\n\nvar REQUIRED_OPTS = [\n  'measurementsCollection',\n  'filtersCollection'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-filters': '_onClickFilters'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initCollection();\n    this._initBinds();\n\n    this._listView = new CustomListView({\n      className: 'DO-Measurements',\n      typeLabel: _t('components.backbone-forms.data-observatory.dropdown.measurement.type'),\n      showSearch: true,\n      itemView: CustomListItemView,\n      searchTemplate: searchTemplate,\n      collection: this.collection,\n      itemTemplate: itemListTemplate,\n      searchPlaceholder: _t('components.backbone-forms.data-observatory.dropdown.measurement.search')\n    });\n\n    this.addView(this._listView);\n  },\n\n  render: function () {\n    this.$el.append(this._listView.render().$el);\n    return this;\n  },\n\n  _initCollection: function () {\n    var filtersApplied = _.map(this._filtersCollection.getSelected(), function (mdl) {\n      return mdl.getValue();\n    });\n    var measurements = this._measurementsCollection.filter(function (mdl) {\n      var filters = mdl.get('filter');\n      // if filters applied, we look for hits\n      // if not, we check if measurement has filter\n      if (filtersApplied.length > 0) {\n        return _.some(filters, function (filter) {\n          return filtersApplied.indexOf(filter.id) >= 0;\n        });\n      } else {\n        return filters.length > 0;\n      }\n    });\n\n    this.collection = new CustomListCollection(_.map(measurements, function (measurement) {\n      return measurement.attributes;\n    }));\n  },\n\n  _onClickFilters: function (e) {\n    this.killEvent(e);\n    this.trigger('filters');\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.collection, 'change:selected', this._onSelectItem);\n  },\n\n  _onSelectItem: function (item) {\n    this._measurementsCollection.setSelected(item.getValue());\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar errorParse = require('../../../../helpers/error-parser');\nvar checkAndBuildOpts = require('../../../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'layerDefinitionModel'\n];\n\nmodule.exports = Backbone.Collection.extend({\n  initialize: function (models, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    this._country = options.country || 'NULL';\n    this._querySchemaModel = this._layerDefinitionModel.getAnalysisDefinitionNodeModel().querySchemaModel;\n\n    var configModel = options.configModel;\n    this.SQL = new cdb.SQL({\n      user: configModel.get('user_name'),\n      sql_api_template: configModel.get('sql_api_template'),\n      api_key: configModel.get('api_key')\n    });\n\n    this._state = 'unfetched';\n  },\n\n  fetch: function (options) {\n    this._success = options && options.success;\n    this._error = options && options.error;\n    var table = this._layerDefinitionModel.getTableName();\n    var query = this._querySchemaModel.get('query');\n\n    var sqlQuery = this._queryTemplate({\n      table: table,\n      query: query,\n      country: this._country\n    });\n\n    if (!this.isFetching()) {\n      this._state = 'fetching';\n      this.SQL.execute(sqlQuery, null, {\n        success: function (data) {\n          this._state = 'fetched';\n          this._onFetchSuccess(data);\n          this._success && this._success();\n        }.bind(this),\n        error: function (err) {\n          this._state = 'error';\n          this._error && this._error(errorParse(err));\n        }.bind(this)\n      });\n    }\n  },\n\n  _onFetchSuccess: function (data) {\n    var models = data.rows;\n    this.reset(models);\n  },\n\n  isFetching: function () {\n    return this.getState() === 'fetching';\n  },\n\n  getState: function () {\n    return this._state;\n  },\n\n  // these methods below is to use this collection as base collection for custom list view.\n  getSelectedItem: function () {\n    return _.first(this.getSelected());\n  },\n\n  getSelected: function () {\n    return this.filter(function (mdl) {\n      return mdl.get('selected') === true;\n    });\n  },\n\n  removeSelected: function () {\n    this.each(function (mdl) {\n      mdl.set({\n        selected: false\n      });\n    });\n  }\n});\n",
    "var _ = require('underscore');\nvar BaseCollection = require('./measurements-base-collection');\nvar BaseModel = require('../../../custom-list/custom-list-item-model');\n\nvar MEASUREMENTS_QUERY = 'SELECT * FROM OBS_GetAvailableNumerators((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM (<%- query %>) q), <%- country %>) numers';\n\nmodule.exports = BaseCollection.extend({\n  initialize: function (models, options) {\n    this._queryTemplate = _.template(MEASUREMENTS_QUERY);\n    BaseCollection.prototype.initialize.call(this, models, options);\n  },\n\n  model: function (attrs, opts) {\n    var o = {};\n    // label and val to custom list compatibility\n    o.val = attrs.numer_id;\n    o.label = attrs.numer_name;\n    o.description = attrs.numer_description;\n    // a measurement can belong to more than one category (filter)\n    o.filter = [];\n    var tags = JSON.parse(attrs.numer_tags);\n    for (var key in tags) {\n      if (/^subsection/.test(key)) {\n        o.filter.push({\n          id: key,\n          name: tags[key]\n        });\n      }\n\n      if (/^license/.test(key)) {\n        o.license = tags[key];\n      }\n    }\n\n    return new BaseModel(o);\n  },\n\n  getItem: function (value) {\n    return this.findWhere({ val: value });\n  },\n\n  setSelected: function (value) {\n    var selectedModel;\n    var silent = { silent: true };\n\n    this.each(function (mdl) {\n      if (mdl.getValue() === value) {\n        mdl.set({\n          selected: true\n        });\n        selectedModel = mdl;\n      } else {\n        mdl.set({\n          selected: false\n        }, silent);\n      }\n    });\n    return selectedModel;\n  }\n});\n",
    "var _ = require('underscore');\nvar BaseCollection = require('./measurements-base-collection');\nvar BaseModel = require('../../../custom-list/custom-list-item-model');\n\nvar FILTERS_QUERY = \"SELECT count(*) num_measurements, tag.key subsection_id, tag.value subsection_name FROM OBS_GetAvailableNumerators((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM (<%- query %>) q), <%- country %>) numers, Jsonb_Each(numers.numer_tags) tag WHERE tag.key like 'subsection%' GROUP BY tag.key, tag.value\";\n\nmodule.exports = BaseCollection.extend({\n  initialize: function (models, options) {\n    this._queryTemplate = _.template(FILTERS_QUERY);\n    BaseCollection.prototype.initialize.call(this, models, options);\n  },\n\n  model: function (attrs, opts) {\n    // label and val to custom list compatibility\n    var o = {};\n    o.val = attrs.subsection_id;\n    o.label = attrs.subsection_name;\n    o.items = attrs.num_measurements;\n\n    return new BaseModel(o);\n  },\n\n  setSelected: function (value) {\n    var silentTrue = { silent: true };\n\n    if (_.isArray(value)) {\n      this.each(function (mdl) {\n        if (_.contains(value, mdl.getValue())) {\n          mdl.set({\n            selected: true\n          }, silentTrue);\n        } else {\n          mdl.set({\n            selected: false\n          }, silentTrue);\n        }\n      });\n    } else {\n      this.each(function (mdl) {\n        if (mdl.getValue() === value) {\n          mdl.set({\n            selected: true\n          }, silentTrue);\n        } else {\n          mdl.set({\n            selected: false\n          }, silentTrue);\n        }\n      });\n    }\n  },\n\n  search: function () {\n    return _(this.models);\n  },\n\n  containsValue: function (value) {\n    return this.length > 0;\n  }\n});\n",
    "var Backbone = require('backbone');\n\n/**\n * View model of the fill dialog\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    show: false\n  },\n\n  show: function () {\n    this.set('show', true);\n  },\n\n  hide: function () {\n    this.set('show', false);\n  },\n\n  isHidden: function () {\n    return !this.get('show');\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.destroy}\n   */\n  destroy: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['destroy'].concat(args));\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar DatetimeEditorView = require('./datetime-editor-view');\n\nmodule.exports = CoreView.extend({\n\n  className: 'CDB-Box-modal CustomList CustomList--inputs is-visible has-visibility js-datetimePicker',\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this._datetimeEditorView = new DatetimeEditorView({\n      model: this.model\n    });\n    this.addView(this._datetimeEditorView);\n    this.$el.append(this._datetimeEditorView.render().el);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:show', this._onShowChange);\n    this.listenTo(this.model, 'destroy', this._onDestroy);\n  },\n\n  _onShowChange: function (mdl, show) {\n    if (show) {\n      this.$el.show();\n      this.$el.removeClass('is-closing').addClass('is-opening');\n    } else {\n      this.$el.removeClass('is-opening').addClass('is-closing');\n      this.$el.hide();\n    }\n  },\n\n  show: function () {\n    this.model.show();\n  },\n\n  hide: function () {\n    this.model.hide();\n  },\n\n  _onDestroy: function () {\n    this.hide();\n    this.clean();\n  }\n});\n",
    "var Backbone = require('backbone');\nvar Utils = require('../../../../helpers/utils');\nvar moment = require('moment');\n\nvar MONTHS = [\n  {\n    val: 0,\n    label: _t('months.january')\n  }, {\n    val: 1,\n    label: _t('months.february')\n  }, {\n    val: 2,\n    label: _t('months.march')\n  }, {\n    val: 3,\n    label: _t('months.april')\n  }, {\n    val: 4,\n    label: _t('months.may')\n  }, {\n    val: 5,\n    label: _t('months.june')\n  }, {\n    val: 6,\n    label: _t('months.july')\n  }, {\n    val: 7,\n    label: _t('months.august')\n  }, {\n    val: 8,\n    label: _t('months.september')\n  }, {\n    val: 9,\n    label: _t('months.october')\n  }, {\n    val: 10,\n    label: _t('months.november')\n  }, {\n    val: 11,\n    label: _t('months.december')\n  }\n];\n\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function () {\n    this.schema = {\n      day: {\n        type: 'Text',\n        title: '',\n        validators: [\n          'required',\n          /^(([0]?[1-9])|([1-2][0-9])|(3[01]))$/,\n          function (value, formValues) {\n            var date = moment(Utils.formatDate(formValues));\n            if (!date.isValid()) {\n              return {\n                type: 'date',\n                message: _t('components.datepicker.invalid-date')\n              };\n            }\n          }\n        ]\n      },\n      month: {\n        type: 'Select',\n        title: '',\n        position: {\n          'left': 0,\n          'min-width': '200px'\n        },\n        options: MONTHS\n      },\n      year: {\n        title: '',\n        type: 'Text',\n        validators: ['required', /^([0-9]{0,4})$/]\n      },\n      time: {\n        title: '',\n        type: 'Text',\n        validators: ['required', /^([01]{1}[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/]\n      }\n    };\n  },\n\n  getFormattedDate: function () {\n    return Utils.formatDate(this.toJSON());\n  }\n});\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar moment = require('moment');\nvar DatetimeEditorModel = require('./datetime-editor-model');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'div',\n  className: 'Table-editorDate',\n\n  events: {\n    'keyup': '_onKeyUp'\n  },\n\n  initialize: function () {\n    var dateAttr = this.model.get('value');\n    var date = {};\n\n    if (!dateAttr) {\n      date = moment().utc();\n    } else {\n      date = moment(dateAttr).utc();\n    }\n\n    this._formModel = new DatetimeEditorModel({\n      day: date.date(),\n      month: date.month(),\n      year: date.year(),\n      time: date.format('HH:mm:ss'),\n      utcOffset: date.utcOffset()\n    });\n    this._formModel.bind('change', this._setValue, this);\n    this.add_related_model(this._formModel);\n\n    this._setValue();\n  },\n\n  render: function () {\n    this._formView = new Backbone.Form({\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.html(this._formView.render().el);\n\n    return this;\n  },\n\n  _setValue: function () {\n    this.model.set('value', this._formModel.getFormattedDate());\n  },\n\n  _onKeyUp: function () {\n    this._setValue();\n  },\n\n  clean: function () {\n    this._formView.remove();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar moment = require('moment');\n\nvar DatetimeDialogModel = require('./datetime-dialog-model');\nvar DatetimeDialogView = require('./datetime-dialog-view');\nvar template = require('./datetime.tpl');\n\nvar PopupManager = require('../../../popup-manager');\n\nBackbone.Form.editors.DateTime = Backbone.Form.editors.Base.extend({\n  className: 'Editor-formInput u-flex u-alignCenter',\n\n  events: {\n    'click .js-input': '_onInputClick'\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.dialogMode = this.options.dialogMode || 'nested';\n    this._initBinds();\n    this.render();\n  },\n\n  render: function () {\n    Backbone.Form.editors.Base.prototype.render.apply(this, arguments);\n\n    this._removeDateTimeDialog();\n\n    this.$el.html(\n      template({\n        value: this._getFormattedDatetime()\n      })\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  _getFormattedDatetime: function () {\n    if (this.value) {\n      var value = new Date(this.value).toUTCString();\n      var momentObj = moment(value).utc();\n      return momentObj.format('YYYY-MM-DD') + 'T' + momentObj.format('HH:mm:ss') + 'Z';\n    }\n\n    // for datetime type, empty '' value raises an error on Postgres\n    return null;\n  },\n\n  _initViews: function () {\n    if (this.options.editorAttrs && this.options.editorAttrs.disabled) {\n      this.$el.addClass('is-disabled');\n    }\n\n    this._datetimeDialogModel = new DatetimeDialogModel({\n      value: this._getFormattedDatetime()\n    });\n    this._datetimeDialogModel.bind('change:value', this._onInputChanged, this);\n\n    this._datetimeDialogView = new DatetimeDialogView({\n      model: this._datetimeDialogModel\n    });\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._datetimeDialogView.$el);\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._removeDateTimeDialog();\n    }.bind(this);\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n  },\n\n  _onInputClick: function () {\n    this._datetimeDialogView.render();\n    this._popupManager.append(this.dialogMode);\n    this._popupManager.track();\n  },\n\n  _removeDateTimeDialog: function () {\n    if (this._datetimeDialogView) {\n      this._popupManager.untrack();\n      this._datetimeDialogView.remove();\n    }\n  },\n\n  _onInputChanged: function (mdl) {\n    var value = this._datetimeDialogModel.get('value');\n    this.setValue(value);\n\n    this.trigger('change', this);\n  },\n\n  _updateInput: function (value) {\n    this.$('.js-input')\n      .toggleClass('is-empty', !value)\n      .text(value);\n  },\n\n  getValue: function () {\n    return this._datetimeDialogModel.get('value');\n  },\n\n  setValue: function (value) {\n    this._updateInput(value);\n    this.value = value;\n  },\n\n  remove: function () {\n    this._removeDateTimeDialog();\n    this._popupManager && this._popupManager.destroy();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-InputText\\n  ';\n if (!value) { \n__p+=' is-empty ';\n } \n__p+='\\n  u-txt-left js-input\">'+\n((__t=( value ? value : 'null' ))==null?'':_.escape(__t))+\n'</button>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\n\nmodule.exports = {\n\n  setOptions: function (editor, opts) {\n    var validators = [];\n\n    if (opts.schema && opts.schema.validators) {\n      validators = validators.concat(opts.schema.validators);\n    }\n\n    if (editor.options && editor.options.validators) {\n      validators = validators.concat(editor.options.validators);\n    }\n\n    editor.validators = validators;\n\n    editor.options = _.extend(\n      {},\n      _.omit(editor.options, 'validators') || {},\n      opts.schema,\n      // 'editorAttrs' can appear in schema if it comes from a Backbone form component\n      // or in options directly if the component is created without a Backbone form\n      opts.schema && opts.schema.editorAttrs || {},\n      opts.editorAttrs,\n      {\n        keyAttr: opts.key\n      },\n      {\n        validators: validators\n      },\n      _.omit(opts, 'validators')\n    );\n\n    if (editor.options.className) {\n      editor.$el.addClass(editor.options.className);\n    }\n\n    if (editor.options.trackingClass) {\n      var trackClasses = editor.options.trackingClass + ' track-' + editor.options.key + editor.options.editorType;\n      editor.$el.addClass(trackClasses);\n    }\n  }\n};\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar TipsyTooltipView = require('../../../tipsy-tooltip-view');\nvar template = require('./enabler-editor.tpl');\n\n/**\n *  Creates an element that enables another component, tested with:\n *\n *  select, number and input so far.\n */\n\nBackbone.Form.editors.EnablerEditor = Backbone.Form.editors.Base.extend({\n  tagName: 'div',\n  className: 'Editor-checker u-flex u-alignCenter',\n\n  events: {\n    'click .js-check': '_onCheckClicked'\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    // Disable validators unless it's enabled\n    this.validators = null;\n\n    if (!this.options.editor) {\n      throw new Error('editor options is required');\n    }\n\n    this._editorOptions = this.options.editor;\n    this.value = this.model.get(opts.key);\n    this._checkModel = new Backbone.Model({\n      enabled: !!this.value\n    });\n    this.template = template;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(\n      this.template({\n        label: this.options.label,\n        isChecked: this._isChecked(),\n        help: this.options.help || ''\n      })\n    );\n\n    if (this.options.help) {\n      this._helpTooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 's',\n        offset: 0,\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n    }\n\n    this._renderComponent();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._checkModel.bind('change:enabled', function (mdl, isEnabled) {\n      this._manageValue(isEnabled);\n      this._renderComponent();\n      this._triggerChange();\n    }, this);\n  },\n\n  _manageValue: function (isEnabled) {\n    if (isEnabled) {\n      this.validators = this.options.validators;\n      this.value = this.options.defaultValue || '';\n      this._editorComponent.setValue(this.options.defaultValue || '');\n    } else {\n      this.validators = null;\n      this.value = '';\n      this._editorComponent.setValue('');\n    }\n    this.model.set(this.options.keyAttr, this.value);\n    this.validate();\n  },\n\n  _isChecked: function () {\n    return this._checkModel.get('enabled');\n  },\n\n  _renderComponent: function () {\n    if (this._editorComponent) {\n      this._removeComponent();\n    }\n\n    var EditorClass = Backbone.Form.editors[this._editorOptions.type];\n    var editorAttrs = _.extend(\n      this._editorOptions.editorAttrs || {},\n      {\n        disabled: !this._isChecked()\n      }\n    );\n\n    this._editorComponent = new EditorClass(\n      _.extend(\n        {\n          model: this.model,\n          key: this.options.keyAttr,\n          editorAttrs: editorAttrs,\n          trackingClass: this.options.trackingClass,\n          editorType: this._editorOptions.type\n        },\n        _.omit(this._editorOptions, 'editorAttrs', 'type')\n      )\n    );\n    this._editorComponent.bind('change', this._setEditorComponentValue, this);\n    this.$('.js-editor').html(this._editorComponent.render().el);\n\n    // Not all editor implement the focus method\n    try {\n      this._editorComponent.focus();\n    } catch (e) {}\n  },\n\n  _removeComponent: function () {\n    this._editorComponent.remove();\n    this._editorComponent.unbind('change', this._setEditorComponentValue, this);\n  },\n\n  _setEditorComponentValue: function () {\n    this.value = this._editorComponent.getValue();\n    this._triggerChange();\n  },\n\n  _triggerChange: function () {\n    this.trigger('change', this);\n  },\n\n  getValue: function () {\n    if (this._checkModel.get('enabled')) {\n      return this._editorComponent && this._editorComponent.getValue() || '';\n    } else {\n      return '';\n    }\n  },\n\n  setValue: function (value) {\n    this._checkModel.set('enabled', !!value);\n    if (this._editorComponent) {\n      this._editorComponent.setValue(value);\n    }\n    this.value = value;\n  },\n\n  _onCheckClicked: function (ev) {\n    this._checkModel.set('enabled', $(ev.target).is(':checked'));\n  },\n\n  remove: function () {\n    if (this._editorComponent) {\n      this._removeComponent();\n    }\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex Editor-checkerInput CDB-Text CDB-Size-medium u-rSpace--xl\">\\n  <input class=\"CDB-Checkbox js-check\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (isChecked) { \n__p+='checked';\n } \n__p+='>\\n  <span class=\"CDB-Checkbox-face u-rSpace--m\"></span>\\n  <label class=\"CDB-Text CDB-Size-small u-ellipsis u-upperCase is-semibold u-flex u-alignCenter Editor-formLabel\">\\n    <span class=\"u-ellipsis ';\n if (help) { \n__p+=' js-help is-underlined';\n } \n__p+='\" ';\n if (help) { \n__p+=' data-tooltip=\"'+\n((__t=( help ))==null?'':_.escape(__t))+\n'\"';\n } \n__p+='  title=\"'+\n((__t=( label ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( label ))==null?'':_.escape(__t))+\n'</span>\\n  </label>\\n</div>\\n<div class=\"Editor-checkerComponent js-editor\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<label class=\"CDB-Legend u-upperCase CDB-Text is-semibold CDB-Size-small\">\\n  <div class=\"u-flex u-alignCenter\">\\n    <div class=\"u-iBlock u-rSpace--m\">\\n      <input class=\"CDB-Checkbox js-input\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (checked) { \n__p+='checked';\n } \n__p+=' ';\n if (disabled) { \n__p+='disabled';\n } \n__p+='>\\n      <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n    </div>\\n    <span class=\"';\n if (help) { \n__p+=' js-help is-underlined';\n } \n__p+='\" ';\n if (help) { \n__p+=' data-tooltip=\"'+\n((__t=( help ))==null?'':_.escape(__t))+\n'\"';\n } \n__p+=' >'+\n((__t=( label ))==null?'':_.escape(__t))+\n'</span>\\n  </div>\\n</label>\\n<div class=\"Editor-checkerComponent js-editor\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar $ = require('jquery');\nvar TipsyTooltipView = require('../../../tipsy-tooltip-view');\nvar template = require('./enabler.tpl');\nvar templateReversed = require('./enabler-reversed.tpl');\n\nBackbone.Form.editors.Enabler = Backbone.Form.editors.Base.extend({\n  tagName: 'div',\n\n  events: {\n    'change .js-input': '_onCheckChange',\n    'focus .js-input': function () {\n      this.trigger('focus', this);\n    },\n    'blur .js-input': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.template = opts.schema && opts.schema.editorAttrs && opts.schema.editorAttrs.reversed ? templateReversed : (opts.template || template);\n    this._initViews();\n  },\n\n  _initViews: function () {\n    this.$el.html(\n      this.template({\n        checked: this.options.disabled ? false : this.model.get(this.options.key),\n        label: this.options.label,\n        title: this.options.title,\n        help: this.options.help || '',\n        disabled: this.options.disabled\n      })\n    );\n\n    if (this.options.help) {\n      this._removeTooltip();\n\n      this._helpTooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 's',\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n    }\n\n    if (this.options.disabled) {\n      this.undelegateEvents();\n    }\n  },\n\n  _onCheckChange: function () {\n    var isEnabled = this.$('.js-input').is(':checked');\n    this.model.set('enabler', isEnabled);\n    this.trigger('change', this);\n  },\n\n  getValue: function () {\n    return this.$('.js-input').is(':checked');\n  },\n\n  setValue: function (value) {\n    this.$('.js-input')[value ? 'attr' : 'removeAttr']('checked', '');\n    this.model.set(this.key, value);\n  },\n\n  _removeTooltip: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n  },\n\n  remove: function () {\n    this._removeTooltip();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<label class=\"CDB-Legend u-upperCase CDB-Text is-semibold CDB-Size-small\">\\n  <div class=\"u-flex u-alignCenter\">\\n    <div class=\"u-iBlock u-rSpace--m\">\\n      <input class=\"CDB-Checkbox js-input\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (checked) { \n__p+='checked';\n } \n__p+=' ';\n if (disabled) { \n__p+='disabled';\n } \n__p+='>\\n      <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n    </div>\\n    <span class=\"';\n if (help) { \n__p+=' js-help is-underlined';\n } \n__p+='\" ';\n if (help) { \n__p+=' data-tooltip=\"'+\n((__t=( help ))==null?'':_.escape(__t))+\n'\"';\n } \n__p+=' >'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</span>\\n  </div>\\n</label>\\n<div class=\"CDB-Text CDB-Size-medium Editor-formInput js-editor\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"colorpicker dropdown-menu\">\\n  <div class=\"colorpicker-saturation\">\\n    <i><b></b></i>\\n  </div>\\n  <div class=\"colorpicker-hue\">\\n    <i class=\"ColorPicker-ball\"></i>\\n  </div>\\n  <div class=\"colorpicker-alpha js-alpha\">\\n    <i class=\"ColorPicker-ball\"></i>\\n  </div>\\n  <div class=\"ColorPicker-colorWrapper\">\\n    <div class=\"ColorPicker-color colorpicker-color js-color\"></div>\\n  </div>\\n</div>';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nrequire('bootstrap-colorpicker');\nvar template = require('./template.tpl');\nvar colorPickerTemplate = require('./color-picker-template.tpl');\nvar Utils = require('../../../../../helpers/utils');\n\nvar ESCAPE_KEY_CODE = 27;\n\nmodule.exports = CoreView.extend({\n  events: {\n    'blur .js-hex': '_onChangeHex',\n    'blur .js-inputColor': '_onChangeColorValue',\n    'blur .js-a': '_onChangeOpacity'\n  },\n\n  initialize: function (opts) {\n    var opacity = opts.opacity != null ? opts.opacity : 1;\n\n    this.model = new Backbone.Model({\n      hex: opts.value,\n      opacity: opacity\n    });\n\n    this._onEscape = this._onEscapePressed.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    var rgb = Utils.hexToRGB(this.model.get('hex'));\n\n    var color = _.extend(rgb, {\n      hex: this.model.get('hex'),\n      opacity: this.model.get('opacity'),\n      opacityDisabled: this.options.disableOpacity\n    });\n\n    this.$el.append(template(color));\n\n    var rgbaTemplate = _.template('rgba(<%- r %>, <%- g %>, <%- b %>, <%- opacity %>)');\n\n    this.$('.js-colorPicker').colorpicker({\n      color: rgbaTemplate(color),\n      format: 'rgba',\n      container: true,\n      horizontal: true,\n      inline: true,\n      customClass: 'ColorPicker',\n      template: colorPickerTemplate(),\n      slidersHorz: {\n        saturation: {\n          maxLeft: 206,\n          maxTop: 95,\n          callLeft: 'setSaturation',\n          callTop: 'setBrightness'\n        },\n        hue: {\n          maxLeft: 180,\n          maxTop: 0,\n          callLeft: 'setHue',\n          callTop: false\n        },\n        alpha: {\n          maxLeft: 180,\n          maxTop: 0,\n          callLeft: 'setAlpha',\n          callTop: false\n        }\n      }\n    });\n\n    if (this.options.disableOpacity) {\n      this.$('.js-colorPicker .js-alpha').addClass('is-hidden');\n    }\n\n    var setNewColor = function (e) {\n      var rgb = e.color.toRGB();\n      var hex = e.color.toHex();\n      this.model.set({ hex: hex, r: rgb.r, g: rgb.g, b: rgb.b, opacity: rgb.a });\n      this.$('.js-color').css('opacity', rgb.a);\n    }.bind(this);\n\n    this.$('.js-colorPicker').colorpicker().on('changeColor', setNewColor);\n\n    this._initDocumentBinds();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:hex', this._onChangeColor, this);\n    this.model.bind('change:r', this._onChangeColor, this);\n    this.model.bind('change:g', this._onChangeColor, this);\n    this.model.bind('change:b', this._onChangeColor, this);\n    this.model.bind('change:opacity', this._onChangeColor, this);\n  },\n\n  _onEscapePressed: function (ev) {\n    if (ev.which === ESCAPE_KEY_CODE) {\n      this.remove();\n    }\n  },\n\n  _initDocumentBinds: function () {\n    $(document).on('keydown', this._onEscape);\n  },\n\n  _destroyDocumentBinds: function () {\n    $(document).off('keydown', this._onEscape);\n  },\n\n  _onChangeColor: function () {\n    this.trigger('change', {\n      opacity: this.model.get('opacity'),\n      hex: this.model.get('hex')\n    }, this);\n\n    this.$('.js-hex').val(this.model.get('hex'));\n    this.$('.js-r').val(this.model.get('r'));\n    this.$('.js-g').val(this.model.get('g'));\n    this.$('.js-b').val(this.model.get('b'));\n    this.$('.js-a').val(this.model.get('opacity'));\n  },\n\n  _onChangeOpacity: function () {\n    var opacity = +this.$('.js-a').val();\n    if (_.isNumber(opacity) && opacity >= 0 && opacity <= 1) {\n      this.setColor(this.model.get('hex'), opacity);\n    }\n  },\n\n  _onChangeColorValue: function (e) {\n    this.$(e.target).removeClass('has-error');\n\n    var r = +this.$('.js-r').val();\n    var g = +this.$('.js-g').val();\n    var b = +this.$('.js-b').val();\n\n    var hex = Utils.rgbToHex(r, g, b);\n\n    if (Utils.isValidHex(hex)) {\n      this.setColor(hex);\n    } else {\n      this.$(e.target).addClass('has-error');\n    }\n  },\n\n  _onChangeHex: function (e) {\n    this.$(e.target).removeClass('has-error');\n\n    var hex = this.$('.js-hex').val();\n\n    if (Utils.isValidHex(hex)) {\n      this.setColor(hex);\n    } else {\n      this.$(e.target).addClass('has-error');\n    }\n  },\n\n  setColor: function (hex, opacity) {\n    if (opacity === undefined) {\n      opacity = this.model.get('opacity') || 1;\n    }\n\n    this.$('.js-colorPicker').colorpicker('setValue', Utils.hexToRGBA(hex, opacity));\n  },\n\n  clean: function () {\n    this._destroyDocumentBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Editor-boxModalContent\">\\n  <div class=\"ColorPicker-pickerWrapper js-colorPicker\"></div>\\n  <div class=\"ColorPicker-inputs\">\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input is-color js-hex\" value=\"'+\n((__t=( hex ))==null?'':_.escape(__t))+\n'\"/>\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">HEX</span>\\n    </div>\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input js-inputColor js-r\" value=\"'+\n((__t=( r ))==null?'':_.escape(__t))+\n'\"/>\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">R</span>\\n    </div>\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input js-inputColor js-g\" value=\"'+\n((__t=( g ))==null?'':_.escape(__t))+\n'\" />\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">G</span>\\n    </div>\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input js-inputColor js-b\" value=\"'+\n((__t=( b ))==null?'':_.escape(__t))+\n'\" />\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">B</span>\\n    </div>\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input js-a';\n if (opacityDisabled) { \n__p+=' is-disabled';\n } \n__p+='\" value=\"'+\n((__t=( opacity ))==null?'':_.escape(__t))+\n'\" ';\n if (opacityDisabled) { \n__p+='disabled';\n } \n__p+=' />\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">A</span>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar CustomListView = require('../../../custom-list/custom-view');\nvar CustomListCollection = require('../../../custom-list/custom-list-collection');\nvar template = require('./column-list-view.tpl');\n\nmodule.exports = CoreView.extend({\n  defaults: {\n    headerTitle: ''\n  },\n\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    if (!opts.stackLayoutModel) throw new Error('stackLayoutModel is required');\n    if (!opts.columns) throw new Error('columns param is required');\n\n    this._stackLayoutModel = opts.stackLayoutModel;\n    this._columns = opts.columns;\n    this._showSearch = opts.showSearch || false;\n    this._typeLabel = opts.typeLabel;\n    this._itemTemplate = opts.itemTemplate;\n\n    this.collection = new CustomListCollection(this._columns);\n    this.listenTo(this.collection, 'change:selected', this._onSelectItem);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(\n      template({\n        headerTitle: this.options.headerTitle\n      })\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _initViews: function () {\n    this._listView = new CustomListView({\n      collection: this.collection,\n      showSearch: this._showSearch,\n      typeLabel: this._typeLabel,\n      itemTemplate: this._itemTemplate\n    });\n    this.$('.js-content').append(this._listView.render().$el);\n    this.addView(this._listView);\n  },\n\n  _onSelectItem: function (item) {\n    this.trigger('selectItem', item, this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (headerTitle) { \n__p+='\\n<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <button class=\"u-actionTextColor js-back u-rSpace\">\\n        <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n      </button>\\n      '+\n((__t=( headerTitle))==null?'':_.escape(__t))+\n'\\n    </li>\\n  </ul>\\n</div>\\n';\n } \n__p+='\\n<div class=\"js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "module.exports={\n  \"number\": {\n    \"quantifications\": {\n      \"items\": [\"quantiles\", \"jenks\", \"equal\", \"headtails\"],\n      \"defaultIndex\": 0\n    },\n    \"bins\": {\n      \"items\": [\"2\", \"3\", \"4\", \"5\", \"6\", \"7\"],\n      \"defaultIndex\": 3\n    }\n  },\n  \"color\": {\n    \"quantifications\": {\n      \"items\": [\"jenks\", \"equal\", \"headtails\", \"quantiles\", \"category\"],\n      \"defaultIndex\": 0\n    }\n  },\n  \"color-ramps\": {\n    \"quantifications\": {\n      \"items\": [\"quantiles\", \"jenks\", \"equal\", \"headtails\", \"category\"],\n      \"defaultIndex\": 0\n    },\n    \"bins\": {\n      \"items\": [\"2\", \"3\", \"4\", \"5\", \"6\", \"7\"],\n      \"defaultIndex\": 3\n    }\n  }\n}\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\n/**\n * View model of the fill dialog\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    visible: true,\n    createContentView: function () {\n      return new CoreView();\n    }\n  },\n\n  createContentView: function () {\n    return this.get('createContentView')(this);\n  },\n\n  show: function () {\n    this.set('visible', true);\n  },\n\n  hide: function () {\n    this.set('visible', false);\n  },\n\n  isHidden: function () {\n    return !this.get('visible');\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.destroy}\n   */\n  destroy: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['destroy'].concat(args));\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-boxModal Editor-FormDialog js-formDialog is-opening',\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._renderContentView();\n    return this;\n  },\n\n  _renderContentView: function () {\n    var view = this.model.createContentView();\n    this.addView(view);\n    this.$el.append(view.render().$el);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:show', this._onShowChange);\n    this.listenTo(this.model, 'destroy', this._onDestroy);\n  },\n\n  _onShowChange: function (m, show) {\n    if (show) {\n      this.$el.show();\n      this.$el.removeClass('is-closing').addClass('is-opening');\n    } else {\n      this.$el.removeClass('is-opening').addClass('is-closing');\n      this.$el.hide();\n    }\n  },\n\n  show: function () {\n    this.model.show();\n  },\n\n  hide: function () {\n    this.model.hide();\n  },\n\n  _onDestroy: function () {\n    this.hide();\n    this.clean();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Editor-boxModalHeader\">\\n  <nav class=\"CDB-NavMenu\">\\n    <ul class=\"CDB-NavMenu-Inner CDB-NavMenu-inner--no-margin CDB-NavMenu-inner--is-dropdown CDB-Text is-semibold CDB-Size-medium js-menu\"></ul>\\n  </nav>\\n</div>\\n<div class=\"js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"CDB-OptionInput-container js-content\"></ul>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\n\nvar FillDialogModel = require('./fill-dialog-model');\nvar FillDialogView = require('./fill-dialog');\n\nvar InputCollection = require('./input-collection');\nvar InputNumber = require('./input-number/input-number');\nvar InputColor = require('./input-color/input-color');\n\nvar template = require('./fill-template.tpl');\n\nvar PopupManager = require('../../../popup-manager');\n\nvar INPUT_TYPE_MAP = {\n  'size': InputNumber,\n  'color': InputColor,\n  'image': InputColor\n};\n\nvar QUANTIFICATION_REF = {\n  'Jenks': 'jenks',\n  'Equal Interval': 'equal',\n  'Heads/Tails': 'headtails',\n  'Quantile': 'quantiles'\n};\n\nvar MIN_IMAGE_SIZE = 20;\n\nBackbone.Form.editors.Fill = Backbone.Form.editors.Base.extend({\n  className: 'Form-InputFill CDB-OptionInput CDB-Text js-input',\n\n  events: {\n    focus: function () {\n      this.trigger('focus', this);\n    },\n    blur: function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts); // Options\n\n    this.options = _.extend(\n      this.options,\n      {\n        columns: this.options.options,\n        query: this.options.query,\n        configModel: this.options.configModel,\n        userModel: this.options.userModel,\n        editorAttrs: this.options.editorAttrs,\n        modals: this.options.modals\n      }\n    );\n\n    this._keyAttr = opts.key;\n    this.dialogMode = this.options.dialogMode || 'nested';\n\n    this._initBinds();\n    this._initViews();\n  },\n\n  _initViews: function () {\n    this.$el.append(template());\n\n    if (this.options.editorAttrs && this.options.editorAttrs.disabled) {\n      this.$el.addClass('is-disabled');\n    }\n\n    this._initFillDialog();\n    this._initInputFields();\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._fillDialogView.$el);\n  },\n\n  _initInputFields: function () {\n    var inputKlass;\n\n    this._inputCollection = new InputCollection();\n\n    _.each(this.model.get(this._keyAttr), function (value, key) {\n      this._inputCollection.add(_.extend({ type: key }, value));\n    }, this);\n\n    this._inputCollection.each(function (inputModel) {\n      var type = inputModel.get('type');\n\n      var Klass = INPUT_TYPE_MAP[type];\n\n      if (!Klass) {\n        throw new Error(type + ' is not a valid type of constructor');\n      }\n\n      if (inputModel.get('quantification') && QUANTIFICATION_REF[inputModel.get('quantification')]) {\n        inputModel.set('quantification', QUANTIFICATION_REF[inputModel.get('quantification')], { silent: true });\n      }\n\n      inputKlass = new Klass(({\n        model: inputModel,\n        columns: this.options.columns,\n        query: this.options.query,\n        configModel: this.options.configModel,\n        userModel: this.options.userModel,\n        modals: this.options.modals,\n        editorAttrs: this.options.editorAttrs ? this.options.editorAttrs[type] : {},\n        disabled: this.options.editorAttrs && this.options.editorAttrs.disabled\n      }));\n\n      inputKlass.bind('click', this._onInputClick, this);\n\n      this.$('.js-content').append(inputKlass.render().$el);\n    }, this);\n\n    this._inputCollection.bind('inputChanged', this._onInputChanged, this);\n  },\n\n  _initBinds: function () {\n    this.applyESCBind(function () {\n      this._removeDialog();\n    });\n    this.applyClickOutsideBind(function () {\n      this._removeDialog();\n    });\n  },\n\n  _onInputClick: function (inputModel) {\n    if (inputModel.get('selected')) {\n      this._removeDialog();\n      return;\n    }\n\n    inputModel.set('selected', true);\n    this._fillDialogView.model.set('createContentView', inputModel.get('createContentView'));\n    this._fillDialogView.render();\n    this._fillDialogView.show();\n\n    this._popupManager.append(this.dialogMode);\n    this._popupManager.track();\n  },\n\n  _onInputChanged: function (mdl) {\n    this._adjustImageSize(mdl);\n    this.trigger('change', this);\n  },\n\n  _adjustImageSize: function (mdl) {\n    if (mdl.get('type') !== 'color' && mdl.get('kind') !== 'marker') {\n      return;\n    }\n\n    var changedImage = mdl.get('image') && mdl.hasChanged('image') && !mdl.previous('image');\n\n    var hasImages = _.isEmpty(_.compact(mdl.get('images')));\n    var hadImages = _.isEmpty(_.compact(mdl.previous('images')));\n    var changedImages = !hasImages && mdl.hasChanged('images') && hadImages;\n\n    if (changedImage || changedImages) {\n      var size = this._inputCollection.findWhere({ type: 'size' });\n\n      if (size && size.get('fixed') < MIN_IMAGE_SIZE) {\n        size.set('fixed', MIN_IMAGE_SIZE);\n      }\n    }\n  },\n\n  _initFillDialog: function () {\n    var fillDialogModel = new FillDialogModel();\n\n    this.listenToOnce(fillDialogModel, 'destroy', function () {\n      this._fillDialogView = null;\n      this.stopListening(fillDialogModel);\n    });\n\n    this._fillDialogView = new FillDialogView({\n      model: fillDialogModel\n    });\n  },\n\n  _removeDialog: function (dialog) {\n    this._inputCollection.unselect();\n    this._fillDialogView.remove();\n    this._popupManager.untrack();\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n    this.$('.js-fillInput').focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n    this.$('.js-fillInput').blur();\n  },\n\n  getValue: function () {\n    return this._inputCollection.getValues();\n  },\n\n  setValue: function (value) {\n    // TODO: add setter\n  },\n\n  remove: function () {\n    this._removeDialog();\n    this._popupManager.destroy();\n    this._inputCollection.unbind('inputChanged', this._onInputChanged, this);\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\nvar INPUT_TYPE_ORDER = ['size', 'color'];\n\nmodule.exports = Backbone.Collection.extend({\n  constructor: function (models, options) {\n    options = _.extend(options || {}, { silent: false });\n    Backbone.Collection.prototype.constructor.call(this, models, options);\n  },\n\n  comparator: function (m) {\n    return INPUT_TYPE_ORDER.indexOf(m.get('type'));\n  },\n\n  initialize: function () {\n    this.bind('change:selected', this._onSelectedChange, this);\n    this.bind('change', this._onModelsChanged, this);\n  },\n\n  getSelected: function () {\n    return this.find(function (model) {\n      return model.get('selected');\n    });\n  },\n\n  unselect: function () {\n    this.each(function (model) {\n      model.set('selected', false);\n    }, this);\n  },\n\n  _onSelectedChange: function (itemModel, isSelected) {\n    if (!isSelected) {\n      return;\n    }\n\n    this.each(function (model) {\n      if (model !== itemModel) {\n        model.set('selected', false);\n      }\n    }, this);\n  },\n\n  _onModelsChanged: function (mdl) {\n    var mdlChanges = mdl.changed;\n\n    // If there is any change about selected, don't propagate it\n    if (_.isEmpty(mdlChanges) || (_.size(mdlChanges) === 1 && mdl.changed.hasOwnProperty('selected'))) {\n      return;\n    }\n\n    this.trigger('inputChanged', mdl, this);\n  },\n\n  getValues: function () {\n    return this.reduce(function (memo, mdl) {\n      var data = {};\n      var typeValues = mdl.toJSON();\n\n      if (typeValues.fixed) {\n        data.fixed = typeValues.fixed;\n\n        if (typeValues.type === 'color') {\n          if (typeValues.image) {\n            data.image = typeValues.image;\n          }\n          if (typeValues.kind) {\n            data.kind = typeValues.kind;\n          }\n          data.opacity = typeValues.opacity;\n        }\n      } else {\n        data = _.omit(typeValues, ['createContentView', 'selected', 'type']);\n      }\n\n      memo[typeValues.type] = data;\n\n      return memo;\n    }, {});\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\nvar template = require('./asset-header-view.tpl');\n\nvar REQUIRED_OPTS = [\n  'title',\n  'editable'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-remove': '_onClickRemove',\n    'click .js-select-all': '_onClickSelectAll',\n    'click .js-deselect-all': '_onClickDeselectAll'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._assetsCollection = this.options.assetsCollection;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var selectedCount = this._getSelectedAssetsCount();\n\n    var assetsCount = this._assetsCollection.size();\n\n    this.$el.html(template({\n      title: this._title,\n      editable: this._editable,\n      assetsCount: assetsCount,\n      selectedCount: selectedCount,\n      allSelected: selectedCount === assetsCount\n    }));\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._assetsCollection, 'add change remove', this.render);\n  },\n\n  _onClickRemove: function () {\n    this.trigger('remove');\n  },\n\n  _onClickSelectAll: function () {\n    this.trigger('select-all');\n  },\n\n  _onClickDeselectAll: function () {\n    this.trigger('deselect-all');\n  },\n\n  _getSelectedAssetsCount: function () {\n    var selectedAssets = this._assetsCollection.where({ state: 'selected' });\n    return selectedAssets ? selectedAssets.length : 0;\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul>\\n  <li class=\"CDB-NavSubmenu-item\">\\n    <h2 class=\"CDB-Text CDB-Size-medium u-altTextColor\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h2>\\n  </li>\\n  ';\n if (editable && assetsCount > 0) { \n__p+='\\n    ';\n if (allSelected) { \n__p+='\\n      <li class=\"CDB-NavSubmenu-item\">\\n        <button class=\"CDB-NavSubmenu-itemLink CDB-Text CDB-Size-medium u-actionTextColor js-deselect-all\">'+\n((__t=( _t('components.modals.assets-picker.deselect-all') ))==null?'':_.escape(__t))+\n'</button>\\n      </li>\\n      ';\n } else if (selectedCount > 0) { \n__p+='\\n      <li class=\"CDB-NavSubmenu-item\">\\n        <button class=\"CDB-NavSubmenu-itemLink CDB-Text CDB-Size-medium u-actionTextColor js-select-all\">'+\n((__t=( _t('components.modals.assets-picker.select-all') ))==null?'':_.escape(__t))+\n'</button>\\n      </li>\\n    ';\n } \n__p+='\\n\\n    ';\n if (selectedCount > 0) { \n__p+='\\n      <li class=\"CDB-NavSubmenu-item\">\\n          ';\n if (selectedCount > 1) { \n__p+='\\n        <button class=\"CDB-NavSubmenu-itemLink CDB-Text CDB-Size-medium u-errorTextColor js-remove\">'+\n((__t=( _t('components.modals.assets-picker.delete-images') ))==null?'':_.escape(__t))+\n'</button>\\n        ';\n } else { \n__p+='\\n        <button class=\"CDB-NavSubmenu-itemLink CDB-Text CDB-Size-medium u-errorTextColor js-remove\">'+\n((__t=( _t('components.modals.assets-picker.delete-image') ))==null?'':_.escape(__t))+\n'</button>\\n        ';\n } \n__p+='\\n      </li>\\n    ';\n } \n__p+='\\n  ';\n } \n__p+='\\n</ul>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\n\nvar template = require('./asset-item-view.tpl');\n\nvar ASSET_HEIGHT = 24;\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'AssetsList-item AssetsList-item--medium',\n\n  events: {\n    'click .js-asset': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change:state', this._changeState);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.attr('id', this.model.get('id'));\n\n    var type = this.model.get('type') || 'icon';\n\n    this.$el.append(template({\n      type: type,\n      height: this.options.assetHeight || ASSET_HEIGHT,\n      name: this.model.get('name'),\n      public_url: this.model.get('public_url')\n    }));\n\n    this.$el.addClass('AssetsList-item--' + type);\n\n    return this;\n  },\n\n  _onClick: function (e) {\n    this.killEvent(e);\n    this.trigger('selected', this.model);\n  },\n\n  _changeState: function () {\n    this.$el.toggleClass('is-selected', this.model.get('state') === 'selected');\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"AssetItem-label CDB-Text CDB-Size-big ';\n if (type === 'icon') { \n__p+='u-mainTextColor';\n } else { \n__p+='u-actionTextColor';\n } \n__p+=' u-upperCase js-asset\" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">\\n  ';\n if (type === 'icon' || type === 'file') { \n__p+='\\n    <img height=\"'+\n((__t=( height ))==null?'':_.escape(__t))+\n'\" src=\"'+\n((__t=( public_url ))==null?'':_.escape(__t))+\n'\" alt=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\" />\\n  ';\n } else { \n__p+='\\n    '+\n((__t=( name ))==null?'':_.escape(__t))+\n'\\n  ';\n } \n__p+='\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar StaticAssetItemView = require('./static-asset-item-view');\nvar StaticAssetsCollection = require('../../../../../../data/static-assets-collection');\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'icons',\n  'selectedAsset'\n];\n\nmodule.exports = CoreView.extend({\n  tagName: 'ul',\n  className: 'AssetsList',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._setupAssets(opts);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._renderAssets();\n    return this;\n  },\n\n  _renderAssets: function () {\n    this._assetsCollection.each(function (mdl) {\n      var item = new StaticAssetItemView({\n        model: mdl\n      });\n\n      if (this.model && item.model.getURLFor(mdl.get('icon')) === this.model.get('image')) {\n        item.model.set('state', 'selected');\n      }\n\n      item.bind('selected', this._selectItem, this);\n\n      this.$el.append(item.render().el);\n      this.addView(item);\n    }, this);\n  },\n\n  _setupAssets: function (opts) {\n    if (!_.isEmpty(opts)) {\n      this._icons = _.map(this._icons, function (asset) {\n        return _.extend(asset, opts);\n      });\n    }\n\n    var assets = this._icons;\n\n    if (this.options.limit) {\n      assets = assets.slice(0, this.options.limit);\n    }\n\n    this._assetsCollection = new StaticAssetsCollection(assets);\n    this.add_related_model(this._assetsCollection);\n  },\n\n  _selectItem: function (m) {\n    this._selectedAsset.set({\n      url: m.get('public_url'),\n      kind: m.get('kind')\n    });\n\n    this._assetsCollection.deselectAll(m);\n  }\n});\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar Backbone = require('backbone');\n\nvar Utils = require('../../../../../../helpers/utils');\nvar MakiIcons = require('../assets/maki-icons');\nvar UserAssetsView = require('./user-assets-tab');\nvar OrganizationAssetsListView = require('./organization-assets-list-view');\nvar OrganizationAssetsCollection = require('../../../../../../data/organization-assets-collection');\nvar UploadAssetsView = require('./upload-assets-tab');\n\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\nvar AssetsCollection = require('../../../../../../data/assets-collection');\nvar createTextLabelsTabPane = require('../../../../../tab-pane/create-text-labels-tab-pane');\nvar ScrollView = require('../../../../../scroll/scroll-view');\nvar AssetsListView = require('./assets-list-view');\nvar loadingView = require('../../../../../loading/render-loading');\n\nvar ErrorView = require('../../../../../error/error-view');\nvar errorTemplate = require('./upload-assets-error.tpl');\nvar errorParser = require('../../../../../../helpers/error-parser');\n\nvar template = require('./assets-view.tpl');\nvar tabPaneTemplate = require('./tab-pane-template.tpl');\n\nvar KIND = 'custom-marker';\n\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content Dialog-content--expanded',\n\n  events: {\n    'click .js-add': '_onSetImage',\n    'click .js-upload': '_initUpload',\n    'change .js-fileInput': '_onFileSelected',\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      disclaimer: MakiIcons.disclaimer\n    }));\n\n    if (this._hasFetchedAllCollections()) {\n      this._initTabPane();\n    } else if (this._isLoading()) {\n      this._renderLoading();\n    } else if (this._hasError()) {\n      this._renderError();\n    }\n    return this;\n  },\n\n  _hasFetchedAllCollections: function () {\n    return this._stateModel.get('status') === 'show';\n  },\n\n  _initModels: function () {\n    var self = this;\n\n    this._selectedAsset = new Backbone.Model({\n      url: this.model.get('image')\n    });\n\n    this._stateModel = new Backbone.Model({\n      status: 'loading',\n      modalEnabled: false,\n      uploads: 0\n    });\n\n    this._assetCollections = [];\n\n    this._userAssetCollection = new AssetsCollection(null, {\n      configModel: this._configModel,\n      userModel: this._userModel\n    });\n\n    this._assetCollections.push(this._userAssetCollection);\n\n    if (this._userModel.isInsideOrg()) {\n      this._organizationAssetCollection = new OrganizationAssetsCollection(null, {\n        configModel: this._configModel,\n        orgId: this._userModel.getOrganization().get('id')\n      });\n      this._assetCollections.push(this._organizationAssetCollection);\n    }\n\n    var onFetchAssetCollections = _.invoke(this._assetCollections, 'fetch');\n    $.when.apply($, onFetchAssetCollections)\n      .then(function () {\n        self._stateModel.set('status', 'show');\n      }, function (model, response) {\n        self._setError(response);\n      });\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._selectedAsset, 'change:url', this._onChangeSelectedAsset);\n    this.listenTo(this._stateModel, 'change:status', this.render);\n    this.listenTo(this._stateModel, 'change:modalEnabled', this._onChangeSetButton);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this._stateModel.set('status', 'show');\n    this._assetsTabPaneView.setSelectedTabPaneByName('upload-file');\n  },\n\n  _upload: function (data) {\n    this._userAssetCollection.create(data, {\n      beforeSend: this._beforeAssetUpload.bind(this),\n      success: this._onAssetUploaded.bind(this),\n      error: this._onAssetUploadError.bind(this),\n      complete: this._onAssetUploadComplete.bind(this)\n    });\n  },\n\n  _renderError: function () {\n    this._hideDisclaimer();\n\n    this.$('.js-body').html(\n      new ErrorView({\n        title: Utils.capitalize(this._stateModel.get('error_message')),\n        desc: _t('components.modals.assets-picker.error-desc'),\n        template: errorTemplate\n      }).render().el\n    );\n  },\n\n  _renderLoading: function () {\n    this._hideDisclaimer();\n\n    this.$('.js-body').html(\n      loadingView({\n        title: _t('components.modals.assets-picker.loading')\n      })\n    );\n  },\n\n  _isLoading: function () {\n    return this._stateModel.get('status') === 'loading';\n  },\n\n  _hasError: function () {\n    return this._stateModel.get('status') === 'error';\n  },\n\n  _initTabPane: function () {\n    var tabPaneTabs = [{\n      name: 'maki-icons',\n      label: _t('components.modals.add-asset.icons'),\n      createContentView: this._createMakiIconsView.bind(this)\n    }, {\n      name: 'your-uploads',\n      label: _t('components.modals.add-asset.your-uploads'),\n      createContentView: this._createYourUploadsView.bind(this)\n    }];\n\n    if (this._userModel.isInsideOrg() && this._organizationAssetCollection.length > 0) {\n      tabPaneTabs.push({\n        name: 'organization-uploads',\n        label: _t('components.modals.add-asset.organization-uploads'),\n        createContentView: this._createOrganizationUploadsView.bind(this)\n      });\n    }\n\n    tabPaneTabs.push({\n      name: 'upload-file',\n      label: _t('components.modals.add-asset.upload-file'),\n      createContentView: this._createUploadFileView.bind(this)\n    });\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        disclaimer: MakiIcons.disclaimer,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          className: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    this._assetsTabPaneView = createTextLabelsTabPane(tabPaneTabs, tabPaneOptions);\n    this.listenTo(this._assetsTabPaneView.collection, 'change', this._onChangeSelectedTab);\n\n    this.addView(this._assetsTabPaneView);\n    this.$('.js-body').append(this._assetsTabPaneView.render().el);\n\n    this._initSetButtonState();\n  },\n\n  _onChangeSelectedTab: function () {\n    switch (this._assetsTabPaneView.getSelectedTabPaneName()) {\n      case 'maki-icons':\n        this._setDisclaimer(MakiIcons.disclaimer);\n        this._toggleSetButton();\n        break;\n      case 'upload-file':\n        this._hideDisclaimer();\n        this._disableSetButton();\n        break;\n      default:\n        this._hideDisclaimer();\n        this._toggleSetButton();\n        break;\n    }\n  },\n\n  _toggleSetButton: function () {\n    this._stateModel.set('modalEnabled', this._selectedAsset.get('url') !== undefined);\n  },\n\n  _initSetButtonState: function () {\n    if (!this.model.get('image')) {\n      return;\n    }\n\n    var selectedAssetExist = false;\n\n    if (this.model.get('kind') === 'marker') {\n      selectedAssetExist = true;\n    }\n\n    if (!selectedAssetExist) {\n      _.each(this._assetCollections, function (assetCollection) {\n        if (!selectedAssetExist) {\n          selectedAssetExist = assetCollection.some(function (mdl) {\n            return this.model.get('image') === mdl.get('public_url');\n          }, this);\n        }\n      }, this);\n    }\n\n    if (selectedAssetExist) {\n      this._enableSetButton();\n    }\n  },\n\n  _enableSetButton: function () {\n    this._stateModel.set('modalEnabled', true);\n  },\n\n  _disableSetButton: function () {\n    this._stateModel.set('modalEnabled', false);\n  },\n\n  _createYourUploadsView: function () {\n    var view = new UserAssetsView({\n      model: this.model,\n      selectedAsset: this._selectedAsset,\n      title: _t('components.modals.add-asset.your-uploads'),\n      organizationAssetCollection: this._organizationAssetCollection,\n      userAssetCollection: this._userAssetCollection,\n      userModel: this._userModel\n    }).bind(this);\n\n    this._userAssetsView = view;\n\n    view.bind('init-upload', this._initUpload, this);\n\n    this._hideDisclaimer();\n\n    return this._userAssetsView;\n  },\n\n  _createOrganizationUploadsView: function () {\n    var view = new ScrollView({\n      createContentView: function () {\n        return new OrganizationAssetsListView({\n          title: _t('components.modals.add-asset.organization-uploads'),\n          model: this.model,\n          organizationAssetCollection: this._organizationAssetCollection,\n          userAssetCollection: this._userAssetCollection,\n          selectedAsset: this._selectedAsset\n        });\n      }.bind(this)\n    });\n\n    this._hideDisclaimer();\n\n    return view;\n  },\n\n  _createUploadFileView: function () {\n    var view = new UploadAssetsView({\n      model: this.model,\n      userModel: this._userModel,\n      configModel: this._configModel\n    }).bind(this);\n\n    view.bind('upload-complete', this._onUploadComplete, this);\n    view.bind('upload-files', this._uploadFiles, this);\n    view.bind('upload-url', this._uploadURL, this);\n    return view;\n  },\n\n  _createMakiIconsView: function () {\n    return new ScrollView({\n      createContentView: function () {\n        return new AssetsListView({\n          model: this.model,\n          selectedAsset: this._selectedAsset,\n          title: _t('components.modals.add-asset.maki-icons'),\n          icons: MakiIcons.icons,\n          folder: 'maki-icons',\n          kind: 'marker',\n          size: '18'\n        });\n      }.bind(this)\n    });\n  },\n\n  _onUploadComplete: function () {\n    this._assetsTabPaneView.setSelectedTabPaneByName('your-uploads');\n  },\n\n  _onChangeSetButton: function () {\n    this.$('.js-add').toggleClass('is-disabled', !this._stateModel.get('modalEnabled'));\n  },\n\n  _onChangeSelectedAsset: function () {\n    if (!this._selectedAsset.get('url')) {\n      this.model.unset('image');\n      this.model.unset('kind');\n    }\n\n    this._stateModel.set('modalEnabled', !!this._selectedAsset.get('url'));\n  },\n\n  _initUpload: function (e) {\n    this.killEvent(e);\n    this.$('.js-fileInput').click();\n  },\n\n  _setDisclaimer: function (disclaimer) {\n    this.$('.js-disclaimer').html(disclaimer);\n  },\n\n  _hideDisclaimer: function () {\n    this.$('.js-disclaimer').html('');\n  },\n\n  _getSelectedFiles: function () {\n    return this.$('.js-fileInput').prop('files');\n  },\n\n  _uploadURL: function (url) {\n    this._upload({\n      type: 'url',\n      kind: KIND,\n      url: url\n    });\n  },\n\n  _uploadFiles: function (files) {\n    _.each(files, function (file) {\n      this._upload({\n        kind: KIND,\n        type: 'file',\n        filename: file\n      });\n    }, this);\n  },\n\n  _onFileSelected: function () {\n    this._uploadFiles(this._getSelectedFiles());\n  },\n\n  _beforeAssetUpload: function () {\n    this._stateModel.set('uploads', this._stateModel.get('uploads') + 1);\n\n    if (this._stateModel.get('uploads') > 0) {\n      this._stateModel.set('status', 'loading');\n    }\n  },\n\n  _onAssetUploaded: function (iconModel) {\n    this._resetFileSelection();\n  },\n\n  _setError: function (error) {\n    this._stateModel.set({\n      error_message: errorParser(error),\n      status: 'error'\n    });\n  },\n\n  _onAssetUploadError: function (model, response) {\n    this._resetFileSelection();\n    this._setError(response);\n  },\n\n  _onAssetUploadComplete: function () {\n    this._stateModel.set('uploads', this._stateModel.get('uploads') - 1);\n\n    if (this._stateModel.get('uploads') < 1 && !this._hasError()) {\n      this._stateModel.set('status', 'show');\n      this._onUploadComplete();\n    }\n  },\n\n  _resetFileSelection: function () {\n    this.$('.js-fileInput').val('');\n  },\n\n  _onSetImage: function (e) {\n    this.killEvent(e);\n\n    if (!this._stateModel.get('modalEnabled')) {\n      return;\n    }\n\n    this.model.set({\n      image: this._selectedAsset.get('url'), // backend serves the url of the asset in `image`\n      kind: this._selectedAsset.get('kind')\n    });\n\n    this.trigger('change', {\n      url: this._selectedAsset.get('url'),\n      kind: this._selectedAsset.get('kind')\n    }, this);\n\n    this._modalModel.destroy(this.model);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Modal\">\\n  <div class=\"Modal-header\">\\n    <div class=\"Modal-headerContainer\">\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace\">'+\n((__t=( _t('components.modals.add-asset.modal-title') ))==null?'':_.escape(__t))+\n'</h2>\\n      <h3 class=\"CDB-Text CDB-Size-medium u-altTextColor\"><button class=\"u-actionTextColor js-upload\">'+\n((__t=( _t('components.modals.add-asset.upload-asset') ))==null?'':_.escape(__t))+\n'</button> '+\n((__t=( _t('components.modals.add-asset.modal-desc') ))==null?'':_.escape(__t))+\n'</h3>\\n    </div>\\n  </div>\\n\\n  <div class=\"Modal-container js-body\"></div>\\n\\n  <div class=\"Modal-footer\">\\n    <div class=\"Modal-footerContainer u-flex u-justifySpace\">\\n      <div class=\"CDB-Text CDB-Size-medium js-disclaimer\">\\n        ';\n if (disclaimer) { \n__p+='\\n        '+\n((__t=( disclaimer ))==null?'':__t)+\n'\\n        ';\n } \n__p+='\\n      </div>\\n\\n      <button class=\"CDB-Button CDB-Button--primary is-disabled js-add\">\\n        <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">'+\n((__t=( _t('components.modals.add-asset.set-image') ))==null?'':_.escape(__t))+\n'</span>\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\\n<form accept-charset=\"UTF-8\" enctype=\"multipart/form-data\" method=\"post\">\\n  <input type=\"file\" accept=\"image/jpeg,image/jpg,image/gif,image/png,image/svg+xml\" class=\"js-fileInput\" style=\"position: absolute; clip: rect(0px 0px 0px 0px); opacity: 0;\" multiple=\"multiple\">\\n</form>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./input-asset-picker-header.tpl');\nvar ImageLoaderView = require('../../../../../img-loader-view');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack',\n    'click .js-colorPicker': '_onClickColorPicker'\n  },\n\n  initialize: function (opts) {\n    this._imageEnabled = opts.imageEnabled;\n\n    this._initBinds();\n  },\n\n  render: function (model, options) {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var rampItem = this._getRampItem();\n\n    this.$el.append(template({\n      index: this.model.get('index') || 0,\n      color: rampItem.color || '',\n      label: rampItem.title || _t('form-components.editors.fill.input-categories.others'),\n      image: rampItem.image || '',\n      imageEnabled: this._imageEnabled\n    }));\n\n    this._loadImages();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:image', this.render);\n  },\n\n  _getRampItem: function () {\n    var ramp = this.model.get('ramp');\n\n    if (!ramp) {\n      return {\n        color: '',\n        title: _t('form-components.editors.fill.input-categories.others'),\n        image: ''\n      };\n    }\n\n    return ramp[this.model.get('index')];\n  },\n\n  _loadImages: function () {\n    var rampItem = this._getRampItem();\n\n    this.iconView = new ImageLoaderView({\n      imageClass: 'CDB-Text u-actionTextColor js-assetPicker',\n      imageUrl: rampItem.image,\n      color: rampItem.color\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n  },\n\n  _onClickBack: function (ev) {\n    this.killEvent(ev);\n    this.trigger('back', this);\n  },\n\n  _onClickColorPicker: function (ev) {\n    this.killEvent(ev);\n    this.trigger('goToColorPicker', this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemDisplay--flex CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <div class=\\'CDB-ListDecoration-secondaryContainer\\'>\\n        <button class=\"u-rSpace u-actionTextColor js-back\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n        <span class=\"label js-label\">'+\n((__t=( label ))==null?'':_.escape(__t))+\n'</span>\\n      </div>\\n\\n      <div class=\\'CDB-ListDecoration-secondaryContainer\\'>\\n        <nav class=\\'CDB-NavMenu\\'>\\n          <ul class=\\'CDB-NavMenu-Inner CDB-NavMenu-inner--no-margin js-menu\\'>\\n            <li class=\\'CDB-NavMenu-item\\'>\\n              <div class=\\'CDB-NavMenu-link CDB-ListDecoration-rampNav-item\\'>\\n                <button class=\"ColorBar CDB-ListDecoration-rampItemBar u-rSpace--xl js-colorPicker\" style=\"background-color: '+\n((__t=( color ))==null?'':__t)+\n';\" type=\"button\"></button>\\n              </div>\\n            </li>\\n\\n            ';\n if (imageEnabled) { \n__p+='\\n              <li class=\\'CDB-NavMenu-item is-selected\\'>\\n                <div class=\\'CDB-NavMenu-link CDB-ListDecoration-rampNav-item\\'>\\n                  ';\n if (image) { \n__p+='\\n                    <div class=\\'CDB-ListDecoration-rampImg js-image-container\\'></div>\\n                  ';\n } else { \n__p+='\\n                    <span class=\"CDB-ListDecoration-rampImg CDB-Text js-assetPicker\">'+\n((__t=( _t('form-components.editors.fill.input-color.img') ))==null?'':__t)+\n'</span>\\n                  ';\n } \n__p+='\\n                </div>\\n              </li>\\n            ';\n } \n__p+='\\n          </ul>\\n        </nav>\\n      </div>\\n    </li>\\n  </ul>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./input-asset-picker-view.tpl');\nvar InputAssetPickerHeader = require('./input-asset-picker-header');\nvar InputAssetPickerView = require('../input-color-file-view');\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\nvar REQUIRED_OPTS = [\n  'configModel',\n  'modals',\n  'ramp',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._imageEnabled = opts.imageEnabled;\n\n    this.model = new Backbone.Model({\n      index: this.options.index,\n      ramp: opts.ramp\n    });\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._headerView = new InputAssetPickerHeader({\n      model: this.model,\n      imageEnabled: this._imageEnabled\n    });\n    this._headerView.bind('goToColorPicker', this._onGoToColorPicker, this);\n    this._headerView.bind('back', this._onClickBack, this);\n    this.$('.js-header').append(this._headerView.render().el);\n    this.addView(this._headerView);\n\n    this._assetPicker = new InputAssetPickerView({\n      model: this.model,\n      userModel: this._userModel,\n      configModel: this._configModel,\n      modals: this._modals,\n      imageEnabled: this._imageEnabled\n    });\n    this._assetPicker.bind('change', _.debounce(this._onChangeImage, 50), this);\n    this.$('.js-content').append(this._assetPicker.render().el);\n    this.addView(this._assetPicker);\n  },\n\n  _getRampItem: function () {\n    var ramp = this.model.get('ramp');\n\n    if (!ramp) {\n      return {\n        color: '',\n        title: _t('form-components.editors.fill.input-categories.others'),\n        image: ''\n      };\n    }\n\n    return ramp[this.model.get('index')];\n  },\n\n  _onChangeImage: function (data) {\n    var url = data && data.url || '';\n    var kind = data && data.kind || '';\n\n    this._getRampItem().image = url;\n    this.model.trigger('change:image');\n\n    this.trigger('change:image', {\n      url: url,\n      kind: kind,\n      index: this.model.get('index')\n    }, this);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onGoToColorPicker: function (e) {\n    this.killEvent(e);\n    this.trigger('goToColorPicker', this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"js-header\"></div>\\n<div class=\"js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\nvar AssetItemView = require('./asset-item-view');\nvar template = require('./organization-assets-list-view.tpl');\n\nvar REQUIRED_OPTS = [\n  'userAssetCollection',\n  'organizationAssetCollection',\n  'selectedAsset'\n];\n\nvar KIND = 'custom-marker';\nvar ASSET_HEIGHT = 48;\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template);\n\n    this._organizationAssetCollection.deselectAll();\n    this._organizationAssetCollection.each(this._renderAsset, this);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._organizationAssetCollection, 'reset', this.render);\n    this.listenTo(this._organizationAssetCollection, 'change', this._onChangeAssets);\n  },\n\n  _getSelectedAsset: function () {\n    var selectedAssets = this._organizationAssetCollection.where({ state: 'selected' });\n    return selectedAssets && selectedAssets[0];\n  },\n\n  _renderAsset: function (assetModel) {\n    var assetItemView = new AssetItemView({\n      model: assetModel,\n      assetHeight: ASSET_HEIGHT,\n      selectedAsset: this._selectedAsset\n    });\n\n    if (assetModel.get('public_url') === this.model.get('image')) {\n      assetModel.set('state', 'selected');\n    }\n\n    assetItemView.bind('selected', this._selectAsset, this);\n\n    this.$('.js-assets').append(assetItemView.render().el);\n    this.addView(assetItemView);\n  },\n\n  _onChangeAssets: function () {\n    var selectedAsset = this._getSelectedAsset();\n\n    this._selectedAsset.set({\n      url: selectedAsset && selectedAsset.get('public_url'),\n      kind: KIND\n    });\n  },\n\n  _selectAsset: function (m) {\n    m.set('state', 'selected');\n\n    this._organizationAssetCollection.deselectAll(m);\n    this._userAssetCollection.deselectAll();\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"AssetsList js-assets\"></ul>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./static-asset-item-view.tpl');\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'AssetsList-item AssetsList-item--medium',\n\n  events: {\n    'click .js-asset': '_onClick'\n  },\n\n  initialize: function () {\n    this.listenTo(this.model, 'change:state', this._changeState);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.append(template({\n      type: 'icon',\n      name: this.model.get('name'),\n      public_url: this.model.get('public_url')\n    }));\n    return this;\n  },\n\n  _onClick: function (e) {\n    this.killEvent(e);\n    this.trigger('selected', this.model);\n    this.model.set('state', 'selected');\n  },\n\n  _changeState: function () {\n    this.$el.toggleClass('is-selected', this.model.get('state') === 'selected');\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (type === 'icon') { \n__p+='\\n<div class=\"AssetItem-icon js-asset\"><img height=\"24\" src=\"'+\n((__t=( public_url ))==null?'':_.escape(__t))+\n'\" alt=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\" crossOrigin=\"anonymous\" /></div>\\n';\n } else { \n__p+='\\n<div class=\"AssetItem-label CDB-Text CDB-Size-small u-altTextColor u-upperCase js-asset\" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">\\n  '+\n((__t=( name ))==null?'':_.escape(__t))+\n'\\n</div>\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Modal-navigation\">\\n  <ul class=\"Modal-navigationInner CDB-Text is-semibold CDB-Size-medium js-menu\"></ul>\\n</div>\\n<div class=\"Tab-paneContent Publish-modalContent Modal-inner Modal-inner--with-navigation js-content\">\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"LayoutIcon LayoutIcon--negative\">\\n  <i class=\"CDB-IconFont CDB-IconFont-cockroach\"></i>\\n</div>\\n<h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-errorTextColor u-bSpace--m u-tSpace-xl\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h3>\\n<p class=\"CDB-Text CDB-Size-medium u-altTextColor\">'+\n((__t=( desc ))==null?'':__t)+\n'</p>\\n\\n<button class=\"CDB-Button CDB-Button--primary u-tSpace-xl js-back\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">'+\n((__t=( _t('components.modals.assets-picker.go-back') ))==null?'':_.escape(__t))+\n'</span>\\n</button>\\n';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar Backbone = require('backbone');\nvar Utils = require('../../../../../../helpers/utils');\n\nrequire('dragster');\nvar Dropzone = require('dropzone');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\nvar AssetsCollection = require('../../../../../../data/assets-collection');\nvar template = require('./upload-assets-tab.tpl');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Form-modal',\n\n  events: {\n    'keyup .js-url': '_onURLChanged',\n    'click .js-submit': '_onClickSubmit'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._stateModel = new Backbone.Model({\n      status: 'show',\n      uploads: 0\n    });\n\n    this.listenTo(this._stateModel, 'change:status', this.render);\n\n    this._assetCollection = new AssetsCollection(\n      null, {\n        configModel: this._configModel,\n        userModel: this._userModel\n      }\n    );\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template());\n    this._initDropzone();\n\n    return this;\n  },\n\n  _initDropzone: function () {\n    var el = $('html')[0];\n    var self = this;\n\n    this.dragster = new Dragster(el); // eslint-disable-line\n\n    $(el).bind('dragster:enter', function (e) {\n      self._showDropzone();\n    });\n\n    $(el).bind('dragster:leave', function (e) {\n      self._hideDropzone();\n    });\n\n    if (el.dropzone) { // avoid loading the dropzone twice\n      return;\n    }\n\n    this.dropzone = new Dropzone(el, {\n      url: ':)',\n      autoProcessQueue: false,\n      previewsContainer: false\n    });\n\n    this.dropzone.on('dragover', function () {\n      self._showDropzone();\n    });\n\n    this.dropzone.on('drop', function (e) {\n      self.trigger('upload-files', e.dataTransfer.files);\n      self._hideDropzone();\n    });\n  },\n\n  _showDropzone: function () {\n    this.$('.Form-upload').addClass('is-dropping');\n  },\n\n  _hideDropzone: function () {\n    this.$('.Form-upload').removeClass('is-dropping');\n  },\n\n  _destroyDropzone: function () {\n    var el = $('html')[0];\n\n    if (this.dragster) {\n      this.dragster.removeListeners();\n      this.dragster.reset();\n      $(el).unbind('dragster:enter dragster:leave');\n    }\n\n    if (this.dropzone) {\n      this.dropzone.destroy();\n    }\n  },\n\n  _hasError: function () {\n    return this._stateModel.get('status') === 'error';\n  },\n\n  _onClickSubmit: function (e) {\n    this.killEvent(e);\n\n    var url = this._getURL();\n\n    if (!url) {\n      this._hideURLError();\n      return;\n    } else if (!Utils.isURL(url)) {\n      this._showURLError();\n      return;\n    } else {\n      this._hideURLError();\n    }\n\n    this.trigger('upload-url', url);\n  },\n\n  _getURL: function () {\n    return this.$('.js-url').val();\n  },\n\n  _onURLChanged: function () {\n    var url = this._getURL();\n\n    if (!url) {\n      this._hideURLError();\n    } else if (!Utils.isURL(url)) {\n      this._showURLError();\n    } else {\n      this._hideURLError();\n    }\n  },\n\n  _showURLError: function () {\n    this.$('.js-url-error').addClass('is-visible');\n  },\n\n  _hideURLError: function () {\n    this.$('.js-url-error').removeClass('is-visible');\n  },\n\n  clean: function () {\n    this._destroyDropzone();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"ImportPanel-header\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">\\n    '+\n((__t=( _t('components.modals.assets-picker.upload-file-url') ))==null?'':_.escape(__t))+\n'\\n  </h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    '+\n((__t=( _t('components.modals.assets-picker.upload-desc') ))==null?'':_.escape(__t))+\n'\\n  </p>\\n</div>\\n<div class=\"Form-row Form-row--centered\">\\n  <div class=\"Form-rowData Form-rowData--med Form-rowData--noMargin js-dropzone\">\\n    <div class=\"Form-upload\">\\n      <label class=\"Form-fileLabel js-fileLabel CDB-Text CDB-Size-medium\">'+\n((__t=( _t('components.modals.assets-picker.drag-and-drop') ))==null?'':_.escape(__t))+\n'</label>\\n      <label class=\"Form-fileLabel Form-fileLabel--error CDB-Text CDB-Size-small js-fileError\"></label>\\n      <div class=\"Form-file\">\\n        <span class=\"CDB-Button CDB-Button--primary Form-fileButton CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase js-upload\">\\n          '+\n((__t=( _t('components.modals.assets-picker.browse') ))==null?'':_.escape(__t))+\n'\\n        </span>\\n      </div>\\n    </div>\\n  </div>\\n  <span class=\"u-lSpace--xl u-rSpace--xl u-flex u-alignCenter CDB-Text CDB-Size-medium u-altTextColor\">'+\n((__t=( _t('components.modals.assets-picker.or') ))==null?'':_.escape(__t))+\n'</span>\\n  <div class=\"Form-rowData Form-rowData--noMargin Form-rowData--med\">\\n    <input type=\"text\" class=\"Form-input Form-input--med has-submit js-url CDB-Text CDB-Size-medium\" value=\"\" placeholder=\"https://carto.com/markers/pin.png\" />\\n    <button type=\"submit\" class=\"CDB-Text CDB-Size-small Form-inputSubmit u-upperCase u-actionTextColor Form-inputSubmit js-submit\">\\n      <span>'+\n((__t=( _t('components.modals.assets-picker.submit') ))==null?'':_.escape(__t))+\n'</span>\\n    </button>\\n    <div class=\"Form-inputError CDB-Text js-url-error\">'+\n((__t=( _t('components.modals.assets-picker.incorrect-url') ))==null?'':_.escape(__t))+\n'</div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar AssetItemView = require('./asset-item-view');\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\nvar Backbone = require('backbone');\nvar loadingView = require('../../../../../loading/render-loading');\nvar AssetHeaderView = require('./asset-header-view');\n\nvar ErrorView = require('../../../../../error/error-view');\nvar errorTemplate = require('./upload-assets-error.tpl');\nvar template = require('./user-assets-list-view.tpl');\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'userAssetCollection',\n  'selectedAsset'\n];\n\nvar KIND = 'custom-marker';\nvar ASSET_HEIGHT = 48;\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    if (this._userModel.isInsideOrg()) {\n      if (!opts.organizationAssetCollection) throw new Error('organizationAssetCollection is required');\n\n      this._organizationAssetCollection = opts.organizationAssetCollection;\n    }\n\n    this._stateModel = new Backbone.Model();\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template);\n\n    if (this._isLoading()) {\n      this._renderLoading();\n    } else if (this._hasError()) {\n      this._renderError();\n    } else {\n      this._renderRegularView();\n    }\n\n    return this;\n  },\n\n  _addHeaderView: function () {\n    this._assetHeaderView = new AssetHeaderView({\n      editable: true,\n      title: this.options.title,\n      assetsCollection: this._userAssetCollection\n    });\n\n    this.addView(this._assetHeaderView);\n    this.$('.js-nav').append(this._assetHeaderView.render().el);\n\n    this._assetHeaderView.bind('select-all', this._selectAllAssets, this);\n    this._assetHeaderView.bind('deselect-all', this._deselectAllAssets, this);\n    this._assetHeaderView.bind('remove', this._removeSelectedAssets, this);\n  },\n\n  _renderRegularView: function () {\n    this._addHeaderView();\n    this._renderAddButton();\n\n    this._userAssetCollection.deselectAll();\n    this._userAssetCollection.each(this._renderAsset, this);\n  },\n\n  _renderAddButton: function () {\n    var addAssetButton = new AssetItemView({\n      model: new Backbone.Model({\n        type: 'text',\n        name: '+'\n      }),\n      assetHeight: ASSET_HEIGHT\n    });\n\n    addAssetButton.bind('selected', function () {\n      this.trigger('init-upload');\n    }, this);\n\n    this.addView(addAssetButton);\n    this.$('.js-assets').append(addAssetButton.render().$el);\n  },\n\n  _initBinds: function () {\n    this._keyDown = this._onKeyDown.bind(this);\n    $(document).on('keydown', this._keyDown);\n\n    this._keyUp = this._onKeyUp.bind(this);\n    $(document).on('keyup', this._keyUp);\n\n    this.listenTo(this._stateModel, 'change:status', this.render);\n    this.listenTo(this._userAssetCollection, 'change', this._onChangeAssets);\n  },\n\n  _getSelectedAsset: function () {\n    return this._userAssetCollection.findWhere({ state: 'selected' });\n  },\n\n  _getSelectedAssetsCount: function () {\n    var selectedAssets = this._userAssetCollection.where({ state: 'selected' });\n    return selectedAssets ? selectedAssets.length : 0;\n  },\n\n  _onKeyDown: function (ev) {\n    this._shiftKeyPressed = ev.shiftKey;\n  },\n\n  _onKeyUp: function (ev) {\n    this._shiftKeyPressed = ev.shiftKey;\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this._stateModel.unset('status');\n  },\n\n  _renderAsset: function (assetModel) {\n    var assetItemView = new AssetItemView({\n      model: assetModel,\n      assetHeight: ASSET_HEIGHT,\n      selectedAsset: this._selectedAsset\n    });\n\n    if (assetModel.get('public_url') === this.model.get('image')) {\n      assetModel.set('state', 'selected');\n    }\n\n    assetItemView.bind('selected', this._selectAsset, this);\n\n    this.$('.js-assets').append(assetItemView.render().el);\n    this.addView(assetItemView);\n  },\n\n  _onChangeAssets: function () {\n    if (this._getSelectedAssetsCount() === 1) {\n      var selectedAsset = this._getSelectedAsset();\n      this._selectedAsset.set({\n        url: selectedAsset && selectedAsset.get('public_url'),\n        kind: KIND\n      });\n    } else {\n      this._selectedAsset.set({\n        url: '',\n        kind: ''\n      });\n    }\n  },\n\n  _selectAllAssets: function () {\n    this._userAssetCollection.selectAll();\n  },\n\n  _deselectAllAssets: function () {\n    this._userAssetCollection.deselectAll();\n  },\n\n  _selectAsset: function (m) {\n    if (this._shiftKeyPressed) {\n      m.set('state', m.get('state') === 'selected' ? '' : 'selected');\n    } else {\n      m.set('state', 'selected');\n    }\n\n    if (!this._shiftKeyPressed) {\n      this._userAssetCollection.deselectAll(m);\n\n      if (this._userModel.isInsideOrg()) {\n        this._organizationAssetCollection.deselectAll();\n      }\n    }\n  },\n\n  _removeSelectedAssetsFromView: function () {\n    var selectedAssets = this._userAssetCollection.select(function (asset) {\n      return asset.get('state') === 'selected';\n    }, this);\n\n    _.each(selectedAssets, function (asset) {\n      this.$('#' + asset.get('id')).remove();\n    }, this);\n  },\n\n  _removeSelectedAssets: function () {\n    this._stateModel.set('status', 'loading');\n\n    var selectedAssets = this._userAssetCollection.select(function (asset) {\n      return asset.get('state') === 'selected';\n    }, this);\n\n    _.each(selectedAssets, function (asset) {\n      asset.destroy({\n        complete: this._onDestroyFinished.bind(this)\n      });\n    }, this);\n  },\n\n  _onDestroyFinished: function (response) {\n    if (response.status === 200) {\n      this._removeSelectedAssetsFromView();\n      this._stateModel.unset('status');\n      this._selectedAsset.unset('kind');\n      this._selectedAsset.unset('url');\n    } else {\n      this._stateModel.set({\n        error_message: response.statusText,\n        status: 'error'\n      });\n    }\n  },\n\n  _isLoading: function () {\n    return this._stateModel.get('status') === 'loading';\n  },\n\n  _hasError: function () {\n    return this._stateModel.get('status') === 'error';\n  },\n\n  _renderLoading: function () {\n    this.$el.html(\n      loadingView({\n        title: _t('components.modals.assets-picker.loading')\n      })\n    );\n  },\n\n  _renderError: function () {\n    this.$el.html(\n      new ErrorView({\n        title: this._stateModel.get('error_message'),\n        desc: _t('components.modals.assets-picker.error-desc'),\n        template: errorTemplate\n      }).render().el\n    );\n  },\n\n  _disableBinds: function () {\n    $(document).off('keydown', this._keyDown);\n    $(document).off('keyup', this._keyUp);\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<nav class=\"CDB-NavMenu u-bSpace--m u-inner js-nav\"></nav>\\n<ul class=\"AssetsList js-assets\"></ul>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\nvar ScrollView = require('../../../../../scroll/scroll-view');\nvar UserAssetsListView = require('./user-assets-list-view');\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'userAssetCollection',\n  'title',\n  'selectedAsset'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'change .js-uploadInput': '_onFileSelected'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    if (this._userModel.isInsideOrg()) {\n      if (!opts.organizationAssetCollection) throw new Error('organizationAssetCollection is required');\n\n      this._organizationAssetCollection = opts.organizationAssetCollection;\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._renderAssets();\n    return this;\n  },\n\n  _renderAssets: function () {\n    var view = new ScrollView({\n      createContentView: function () {\n        var view = new UserAssetsListView({\n          title: this._title,\n          model: this.model,\n          organizationAssetCollection: this._organizationAssetCollection,\n          userAssetCollection: this._userAssetCollection,\n          selectedAsset: this._selectedAsset,\n          userModel: this._userModel\n        });\n\n        view.bind('init-upload', function () {\n          this.trigger('init-upload');\n        }, this);\n\n        return view;\n      }.bind(this)\n    });\n\n    this.addView(view);\n    this.$el.append(view.render().el);\n  }\n});\n",
    "// Maki icons from https://github.com/mapbox/maki\n// and https://github.com/mapbox/maki/blob/mb-pages/_includes/maki.json\nmodule.exports = {\n  disclaimer: _t('assets.maki-icons.disclaimer'),\n  icons: [\n    {\n      'name': 'Square stroked',\n      'icon': 'square-stroked'\n    },\n    {\n      'name': 'Square solid',\n      'icon': 'square'\n    },\n    {\n      'name': 'Triangle stroked',\n      'icon': 'triangle-stroked'\n    },\n    {\n      'name': 'Triangle solid',\n      'icon': 'triangle'\n    },\n    {\n      'name': 'Star stroked',\n      'icon': 'star-stroked'\n    },\n    {\n      'name': 'Star solid',\n      'icon': 'star'\n    },\n    {\n      'name': 'Cross',\n      'icon': 'cross'\n    },\n    {\n      'name': 'Marker Stroke',\n      'icon': 'marker-stroked'\n    },\n    {\n      'name': 'Marker Solid',\n      'icon': 'marker'\n    },\n    {\n      'name': 'Religious Jewish',\n      'icon': 'religious-jewish'\n    },\n    {\n      'name': 'Religious Christian',\n      'icon': 'religious-christian'\n    },\n    {\n      'name': 'Religious Muslim',\n      'icon': 'religious-muslim'\n    },\n    {\n      'name': 'Cemetery',\n      'icon': 'cemetery'\n    },\n    {\n      'name': 'Rocket',\n      'icon': 'rocket'\n    },\n    {\n      'name': 'Airport',\n      'icon': 'airport'\n    },\n    {\n      'name': 'Heliport',\n      'icon': 'heliport'\n    },\n    {\n      'name': 'Rail',\n      'icon': 'rail'\n    },\n    {\n      'name': 'Rail Metro',\n      'icon': 'rail-metro'\n    },\n    {\n      'name': 'Rail Light',\n      'icon': 'rail-light'\n    },\n    {\n      'name': 'Bus',\n      'icon': 'bus'\n    },\n    {\n      'name': 'Fuel',\n      'icon': 'fuel'\n    },\n    {\n      'name': 'Parking',\n      'tags': [\n        'parking',\n        'transportation'\n      ],\n      'icon': 'parking'\n    },\n    {\n      'name': 'Parking Garage',\n      'tags': [\n        'parking',\n        'transportation',\n        'garage'\n      ],\n      'icon': 'parking-garage'\n    },\n    {\n      'name': 'Airfield',\n      'tags': [\n        'airfield',\n        'airport',\n        'plane',\n        'landing strip'\n      ],\n      'icon': 'airfield'\n    },\n    {\n      'name': 'Roadblock',\n      'tags': [\n        'roadblock',\n        'stop',\n        'warning',\n        'dead end'\n      ],\n      'icon': 'roadblock'\n    },\n    {\n      'name': 'Ferry',\n      'tags': [\n        'ship',\n        'boat',\n        'water',\n        'ferry',\n        'transportation'\n      ],\n      'icon': 'ferry'\n    },\n    {\n      'name': 'Harbor',\n      'tags': [\n        'marine',\n        'dock',\n        'water',\n        'wharf'\n      ],\n      'icon': 'harbor'\n    },\n    {\n      'name': 'Bicycle',\n      'tags': [\n        'cycling',\n        'cycle',\n        'transportation'\n      ],\n      'icon': 'bicycle'\n    },\n    {\n      'name': 'Park',\n      'tags': [\n        'recreation',\n        'park',\n        'forest',\n        'tree',\n        'green',\n        'woods',\n        'nature'\n      ],\n      'icon': 'park'\n    },\n    {\n      'name': 'Park 2',\n      'tags': [\n        'recreation',\n        'park',\n        'forest',\n        'tree',\n        'green',\n        'woods',\n        'nature'\n      ],\n      'icon': 'park2'\n    },\n    {\n      'name': 'Museum',\n      'tags': [\n        'recreation',\n        'museum',\n        'tourism'\n      ],\n      'icon': 'museum'\n    },\n    {\n      'name': 'Lodging',\n      'tags': [\n        'lodging',\n        'hotel',\n        'recreation',\n        'motel',\n        'tourism'\n      ],\n      'icon': 'lodging'\n    },\n    {\n      'name': 'Monument',\n      'tags': [\n        'recreation',\n        'statue',\n        'monument',\n        'tourism'\n      ],\n      'icon': 'monument'\n    },\n    {\n      'name': 'Zoo',\n      'tags': [\n        'recreation',\n        'zoo',\n        'animal',\n        'giraffe'\n      ],\n      'icon': 'zoo'\n    },\n    {\n      'name': 'Garden',\n      'tags': [\n        'recreation',\n        'garden',\n        'park',\n        'flower',\n        'nature'\n      ],\n      'icon': 'garden'\n    },\n    {\n      'name': 'Campsite',\n      'tags': [\n        'recreation',\n        'campsite',\n        'camp',\n        'camping',\n        'tent',\n        'nature'\n      ],\n      'icon': 'campsite'\n    },\n    {\n      'name': 'Theatre',\n      'tags': [\n        'recreation',\n        'theatre',\n        'theater',\n        'entertainment',\n        'play',\n        'performance'\n      ],\n      'icon': 'theatre'\n    },\n    {\n      'name': 'Art gallery',\n      'tags': [\n        'art',\n        'center',\n        'museum',\n        'gallery',\n        'creative',\n        'recreation',\n        'entertainment',\n        'studio'\n      ],\n      'icon': 'art-gallery'\n    },\n    {\n      'name': 'Pitch',\n      'tags': [\n        'pitch',\n        'track',\n        'athletic',\n        'sports',\n        'field'\n      ],\n      'icon': 'pitch'\n    },\n    {\n      'name': 'Soccer',\n      'tags': [\n        'soccer',\n        'sports'\n      ],\n      'icon': 'soccer'\n    },\n    {\n      'name': 'American Football',\n      'tags': [\n        'football',\n        'sports'\n      ],\n      'icon': 'america-football'\n    },\n    {\n      'name': 'Tennis',\n      'tags': [\n        'tennis',\n        'court',\n        'ball',\n        'sports'\n      ],\n      'icon': 'tennis'\n    },\n    {\n      'name': 'Basketball',\n      'tags': [\n        'basketball',\n        'ball',\n        'sports'\n      ],\n      'icon': 'basketball'\n    },\n    {\n      'name': 'Baseball',\n      'tags': [\n        'baseball',\n        'softball',\n        'ball',\n        'sports'\n      ],\n      'icon': 'baseball'\n    },\n    {\n      'name': 'Golf',\n      'tags': [\n        'golf',\n        'sports',\n        'course'\n      ],\n      'icon': 'golf'\n    },\n    {\n      'name': 'Swimming',\n      'tags': [\n        'swimming',\n        'water',\n        'swim',\n        'sports'\n      ],\n      'icon': 'swimming'\n    },\n    {\n      'name': 'Cricket',\n      'tags': [\n        'cricket',\n        'sports'\n      ],\n      'icon': 'cricket'\n    },\n    {\n      'name': 'Skiing',\n      'tags': [\n        'winter',\n        'skiing',\n        'ski',\n        'sports'\n      ],\n      'icon': 'skiing'\n    },\n    {\n      'name': 'School',\n      'tags': [\n        'school',\n        'highschool',\n        'elementary',\n        'children',\n        'amenity',\n        'middle'\n      ],\n      'icon': 'school'\n    },\n    {\n      'name': 'College',\n      'tags': [\n        'college',\n        'school',\n        'amenity',\n        'university'\n      ],\n      'icon': 'college'\n    },\n    {\n      'name': 'Library',\n      'tags': [\n        'library',\n        'books',\n        'amenity'\n      ],\n      'icon': 'library'\n    },\n    {\n      'name': 'Post',\n      'tags': [\n        'post',\n        'office',\n        'amenity',\n        'mail',\n        'letter'\n      ],\n      'icon': 'post'\n    },\n    {\n      'name': 'Fire station',\n      'tags': [\n        'fire',\n        'station',\n        'amenity'\n      ],\n      'icon': 'fire-station'\n    },\n    {\n      'name': 'Town hall',\n      'tags': [\n        'townhall',\n        'mayor',\n        'building',\n        'amenity',\n        'government'\n      ],\n      'icon': 'town-hall'\n    },\n    {\n      'name': 'Police',\n      'tags': [\n        'police',\n        'jail',\n        'arrest',\n        'amenity',\n        'station'\n      ],\n      'icon': 'police'\n    },\n    {\n      'name': 'Prison',\n      'tags': [\n        'prison',\n        'jail',\n        'amenity'\n      ],\n      'icon': 'prison'\n    },\n    {\n      'name': 'Embassy',\n      'tags': [\n        'embassy',\n        'diplomacy',\n        'consulate',\n        'amenity',\n        'flag'\n      ],\n      'icon': 'embassy'\n    },\n    {\n      'name': 'Beer',\n      'tags': [\n        'bar',\n        'beer',\n        'drink',\n        'commercial',\n        'biergarten',\n        'pub'\n      ],\n      'icon': 'beer'\n    },\n    {\n      'name': 'Restaurant',\n      'tags': [\n        'restaurant',\n        'commercial'\n      ],\n      'icon': 'restaurant'\n    },\n    {\n      'name': 'Cafe',\n      'tags': [\n        'cafe',\n        'coffee',\n        'commercial',\n        'tea'\n      ],\n      'icon': 'cafe'\n    },\n    {\n      'name': 'Shop',\n      'tags': [\n        'shop',\n        'mall',\n        'commercial',\n        'store'\n      ],\n      'icon': 'shop'\n    },\n    {\n      'name': 'Fast Food',\n      'tags': [\n        'food',\n        'fast',\n        'commercial',\n        'burger',\n        'drive-through'\n      ],\n      'icon': 'fast-food'\n    },\n    {\n      'name': 'Bar',\n      'tags': [\n        'bar',\n        'drink',\n        'commercial',\n        'club',\n        'martini',\n        'lounge'\n      ],\n      'icon': 'bar'\n    },\n    {\n      'name': 'Bank',\n      'tags': [\n        'bank',\n        'atm',\n        'commercial',\n        'money'\n      ],\n      'icon': 'bank'\n    },\n    {\n      'name': 'Grocery',\n      'tags': [\n        'food',\n        'grocery',\n        'commercial',\n        'store',\n        'market'\n      ],\n      'icon': 'grocery'\n    },\n    {\n      'name': 'Cinema',\n      'tags': [\n        'cinema',\n        'theatre',\n        'film',\n        'movie',\n        'commercial',\n        'theater',\n        'entertainment'\n      ],\n      'icon': 'cinema'\n    },\n    {\n      'name': 'Pharmacy',\n      'tags': [\n        'pharmacy',\n        'drugs',\n        'medication',\n        'social',\n        'medicine',\n        'prescription'\n      ],\n      'icon': 'pharmacy'\n    },\n    {\n      'name': 'Hospital',\n      'tags': [\n        'hospital',\n        'health',\n        'medication',\n        'social',\n        'medicine',\n        'medical',\n        'clinic'\n      ],\n      'icon': 'hospital'\n    },\n    {\n      'name': 'Danger',\n      'tags': [\n        'minefield',\n        'landmine',\n        'disaster',\n        'dangerous',\n        'hazard'\n      ],\n      'icon': 'danger'\n    },\n    {\n      'name': 'Industrial',\n      'tags': [\n        'industrial',\n        'factory',\n        'property',\n        'building'\n      ],\n      'icon': 'industrial'\n    },\n    {\n      'name': 'Warehouse',\n      'tags': [\n        'warehouse',\n        'property',\n        'storage',\n        'building'\n      ],\n      'icon': 'warehouse'\n    },\n    {\n      'name': 'Commercial',\n      'tags': [\n        'commercial',\n        'property',\n        'business',\n        'building'\n      ],\n      'icon': 'commercial'\n    },\n    {\n      'name': 'Building',\n      'tags': [\n        'building',\n        'property',\n        'structure',\n        'business',\n        'building'\n      ],\n      'icon': 'building'\n    },\n    {\n      'name': 'Place of worship',\n      'tags': [\n        'religion',\n        'ceremony',\n        'religious',\n        'nondenominational',\n        'church',\n        'temple'\n      ],\n      'icon': 'place-of-worship'\n    },\n    {\n      'name': 'Alcohol shop',\n      'tags': [\n        'alcohol',\n        'liquor',\n        'store',\n        'shop',\n        'beer',\n        'wine',\n        'vodka'\n      ],\n      'icon': 'alcohol-shop'\n    },\n    {\n      'name': 'Logging',\n      'tags': [\n        'logger',\n        'chainsaw',\n        'woods',\n        'industry'\n      ],\n      'icon': 'logging'\n    },\n    {\n      'name': 'Oil well',\n      'tags': [\n        'oil',\n        'natural',\n        'environment',\n        'industry',\n        'resources'\n      ],\n      'icon': 'oil-well'\n    },\n    {\n      'name': 'Slaughterhouse',\n      'tags': [\n        'cows',\n        'cattle',\n        'food',\n        'meat',\n        'industry',\n        'resources'\n      ],\n      'icon': 'slaughterhouse'\n    },\n    {\n      'name': 'Dam',\n      'tags': [\n        'water',\n        'natural',\n        'hydro',\n        'hydroelectric',\n        'energy',\n        'environment',\n        'industry',\n        'resources'\n      ],\n      'icon': 'dam'\n    },\n    {\n      'name': 'Water',\n      'tags': [\n        'water',\n        'natural',\n        'hydro',\n        'lake',\n        'river',\n        'ocean',\n        'resources'\n      ],\n      'icon': 'water'\n    },\n    {\n      'name': 'Wetland',\n      'tags': [\n        'water',\n        'swamp',\n        'natural'\n      ],\n      'icon': 'wetland'\n    },\n    {\n      'name': 'Disability',\n      'tags': [\n        'handicap',\n        'wheelchair',\n        'access'\n      ],\n      'icon': 'disability'\n    },\n    {\n      'name': 'Telephone',\n      'tags': [\n        'payphone',\n        'call'\n      ],\n      'icon': 'telephone'\n    },\n    {\n      'name': 'Emergency Telephone',\n      'tags': [\n        'payphone',\n        'danger',\n        'safety',\n        'call'\n      ],\n      'icon': 'emergency-telephone'\n    },\n    {\n      'name': 'Toilets',\n      'tags': [\n        'bathroom',\n        'men',\n        'women',\n        'sink',\n        'washroom',\n        'lavatory'\n      ],\n      'icon': 'toilets'\n    },\n    {\n      'name': 'Waste Basket',\n      'tags': [\n        'trash',\n        'rubbish',\n        'bin',\n        'garbage'\n      ],\n      'icon': 'waste-basket'\n    },\n    {\n      'name': 'Music',\n      'tags': [\n        'stage',\n        'performance',\n        'band',\n        'concert',\n        'venue'\n      ],\n      'icon': 'music'\n    },\n    {\n      'name': 'Land Use',\n      'tags': [\n        'zoning',\n        'usage',\n        'area'\n      ],\n      'icon': 'land-use'\n    },\n    {\n      'name': 'City',\n      'tags': [\n        'area',\n        'point',\n        'place',\n        'urban'\n      ],\n      'icon': 'city'\n    },\n    {\n      'name': 'Town',\n      'tags': [\n        'area',\n        'point',\n        'place',\n        'small'\n      ],\n      'icon': 'town'\n    },\n    {\n      'name': 'Village',\n      'tags': [\n        'area',\n        'point',\n        'place',\n        'small',\n        'rural'\n      ],\n      'icon': 'village'\n    },\n    {\n      'name': 'Farm',\n      'tags': [\n        'building',\n        'farming',\n        'crops',\n        'plants',\n        'agriculture',\n        'rural'\n      ],\n      'icon': 'farm'\n    },\n    {\n      'name': 'Bakery',\n      'tags': [\n        'bakery',\n        'pastry',\n        'croissant',\n        'food',\n        'shop',\n        'bread'\n      ],\n      'icon': 'bakery'\n    },\n    {\n      'name': 'Dog Park',\n      'tags': [\n        'dog',\n        'pet'\n      ],\n      'icon': 'dog-park'\n    },\n    {\n      'name': 'Lighthouse',\n      'tags': [\n        'building',\n        'navigation',\n        'nautical',\n        'ocean',\n        'logistics'\n      ],\n      'icon': 'lighthouse'\n    },\n    {\n      'name': 'Clothing Store',\n      'tags': [\n        'clothing',\n        'store',\n        'shop'\n      ],\n      'icon': 'clothing-store'\n    },\n    {\n      'name': 'Polling Place',\n      'icon': 'polling-place'\n    },\n    {\n      'name': 'Playground',\n      'icon': 'playground'\n    },\n    {\n      'name': 'Entrance',\n      'icon': 'entrance'\n    },\n    {\n      'name': 'Heart',\n      'icon': 'heart'\n    },\n    {\n      'name': 'London Underground',\n      'icon': 'london-underground'\n    },\n    {\n      'name': 'Minefield',\n      'icon': 'minefield'\n    },\n    {\n      'name': 'Rail Underground',\n      'icon': 'rail-underground'\n    },\n    {\n      'name': 'Rail Above',\n      'icon': 'rail-above'\n    },\n    {\n      'name': 'Camera',\n      'icon': 'camera'\n    },\n    {\n      'name': 'Laundry',\n      'icon': 'laundry'\n    },\n    {\n      'name': 'Car',\n      'icon': 'car'\n    },\n    {\n      'name': 'Suitcase',\n      'icon': 'suitcase'\n    },\n    {\n      'name': 'Hairdresser',\n      'icon': 'hairdresser'\n    },\n    {\n      'name': 'Chemist',\n      'icon': 'chemist'\n    },\n    {\n      'name': 'Mobile phone',\n      'icon': 'mobilephone'\n    },\n    {\n      'name': 'Scooter',\n      'icon': 'scooter'\n    }\n  ]\n};\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar ImageLoaderView = require('../../../../../../img-loader-view');\nvar CustomListItemView = require('../../../../../../custom-list/custom-list-item-view');\n\nmodule.exports = CustomListItemView.extend({\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var name = this.model.getName() == null ? 'null' : this.model.getName();\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          isDestructive: this.model.get('destructive'),\n          name: name,\n          val: this.model.getValue(),\n          options: this.model.get('renderOptions'),\n          image: this.model.get('image'),\n          imageEnabled: this.options.imageEnabled\n        })\n      )\n    );\n\n    this._loadImages();\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  },\n\n  _loadImages: function () {\n    this.iconView = new ImageLoaderView({\n      imageClass: 'CDB-Text u-actionTextColor js-assetPicker',\n      imageUrl: this.model.get('image'),\n      color: this.model.get('val')\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n  },\n\n  _onClick: function (ev) {\n    this.killEvent(ev);\n    var $target = $(ev.target);\n    var isIconClicked = $target.closest('.js-image-container').length > 0;\n    var isImgClicked = $target.closest('.js-assetPicker').length > 0;\n\n    this.model.set({\n      selectedClass: isImgClicked || isIconClicked ? ['js-assetPicker'] : [],\n      selected: true\n    });\n  }\n});\n",
    "var CustomListView = require('../../../../../../custom-list/custom-list-view');\n\nmodule.exports = CustomListView.extend({\n  _renderItem: function (mdl) {\n    var ItemViewClass = this.options.ItemView;\n    var itemView = new ItemViewClass({\n      model: mdl,\n      typeLabel: this.options.typeLabel,\n      template: this.options.itemTemplate,\n      imageEnabled: this.options.imageEnabled\n    });\n    this.$('.js-list').append(itemView.render().el);\n    this.addView(itemView);\n\n    // 'customEvent' comes from custom list component\n    itemView.bind('customEvent', function (eventName, item) {\n      this.trigger('customEvent', eventName, item, this);\n    }, this);\n  }\n});\n",
    "var CustomView = require('../../../../../../custom-list/custom-view.js');\nvar itemTemplate = require('../../../../../../custom-list/custom-list-item.tpl');\nvar CategoriesListItemView = require('./categories-list-item-view');\nvar CategoriesListView = require('./categories-list-view');\n\nmodule.exports = CustomView.extend({\n  options: {\n    showSearch: true,\n    allowFreeTextInput: false,\n    typeLabel: 'column',\n    itemTemplate: itemTemplate,\n    itemView: CategoriesListItemView\n  },\n\n  _renderList: function () {\n    this._listView = new CategoriesListView({\n      model: this.model,\n      allowFreeTextInput: this.options.allowFreeTextInput,\n      collection: this.collection,\n      typeLabel: this.options.typeLabel,\n      ItemView: this.options.itemView,\n      itemTemplate: this.options.itemTemplate,\n      size: this.options.size,\n      imageEnabled: this.options.imageEnabled\n    });\n    this.$el.append(this._listView.render().el);\n    this._listView.highlight();\n    this.addView(this._listView);\n\n    // 'customEvent' comes from custom list component\n    this._listView.bind('customEvent', function (eventName, item) {\n      this.trigger(eventName, item, this);\n    }, this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-ListDecoration-itemLink u-flex u-justifySpace u-alignCenter ';\n if (isSelected) { \n__p+=' is-selected ';\n } \n__p+='\">\\n  <span class=\"RampItem-text CDB-Text u-ellipsis u-actionTextColor\" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</span>\\n\\n  <div class=\\'RampItem-secondaryContainer\\'>\\n    <div class=\"ColorBar RampItem-bar js-colorPicker\" style=\"background-color: '+\n((__t=( val ))==null?'':_.escape(__t))+\n';\"></div>\\n\\n    ';\n if (imageEnabled) { \n__p+='\\n      <div class=\\'RampItem-img\\'>\\n        ';\n if (image) { \n__p+='\\n          <div class=\\'js-image-container u-flex\\'></div>\\n        ';\n } else { \n__p+='\\n          <button class=\"CDB-Text u-actionTextColor js-assetPicker\">'+\n((__t=( _t('form-components.editors.fill.input-color.img') ))==null?'':__t)+\n'</button>\\n        ';\n } \n__p+='\\n      </div>\\n    ';\n } \n__p+='\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar Utils = require('../../../../../../helpers/utils');\nvar CoreView = require('backbone/core-view');\nvar CategoriesListView = require('./categories-list/categories-view');\nvar CustomListCollection = require('../../../../../custom-list/custom-list-collection');\nvar template = require('./input-color-categories-list-view.tpl');\nvar itemTemplate = require('./input-color-categories-list-item.tpl');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-color': '_onClickColor'\n  },\n\n  initialize: function (opts) {\n    this._showSearch = opts.showSearch || false;\n    this._typeLabel = opts.typeLabel;\n    this._maxValues = opts.maxValues;\n\n    this._setupCollection();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(template({\n      range: this.model.get('range'),\n      attribute: this.model.get('attribute')\n    }));\n\n    this._listView = new CategoriesListView({\n      itemTemplate: itemTemplate,\n      collection: this._collection,\n      showSearch: this._showSearch,\n      typeLabel: this._typeLabel,\n      imageEnabled: this.options.imageEnabled\n    });\n\n    this.addView(this._listView);\n\n    this.$('.js-content').append(this._listView.render().$el);\n\n    return this;\n  },\n\n  _setupCollection: function () {\n    this._collection = new CustomListCollection(null, {silent: false});\n\n    var range = this.model.get('range');\n    var domain = this.model.get('domain');\n    var images = this.model.get('images');\n\n    if (range && range.length && domain && domain.length) {\n      var categories = _.map(range, function (color, i) {\n        var isNull = domain[i] == null || (_.isString(domain[i]) && Utils.isBlank(domain[i]));\n        var label = domain[i];\n\n        if (i >= this._maxValues) {\n          label = _t('form-components.editors.fill.input-categories.others');\n        } else if (isNull) {\n          label = _t('form-components.editors.fill.input-categories.null');\n        }\n\n        var attrs = {\n          label: label,\n          val: color\n        };\n\n        if (images && images.length) {\n          attrs['image'] = images[i];\n        }\n\n        return attrs;\n      }, this);\n\n      this._collection.reset(categories);\n    }\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:range', this.render);\n    this.listenTo(this.model, 'change:domain', this.render);\n    this.listenTo(this._collection, 'change:selected', this._onSelectItem);\n  },\n\n  _onClickColor: function (ev) {\n    this.killEvent(ev);\n    var index = $(ev.target).index();\n    var color = this._collection.at(index);\n    color && this._onSelectItem(color);\n  },\n\n  _onSelectItem: function (item) {\n    var selectedItem = {\n      index: this._collection.indexOf(item),\n      target: _.contains(item.get('selectedClass'), 'js-assetPicker') ? 'asset' : 'color'\n    };\n\n    this.trigger('selectItem', selectedItem, this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor u-flex u-alignCenter\">\\n      <ul class=\"ColorBarContainer\">\\n        ';\n _.each(range, function (color) { \n__p+='\\n          <li class=\"ColorBar ColorBar--spaceless ColorBar--clickable js-color\" style=\"background-color: '+\n((__t=( color ))==null?'':_.escape(__t))+\n';\"></li>\\n        ';\n }); \n__p+='\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n<div class=\"js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CDB = require('cartodb.js');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./input-color-categories.tpl');\nvar StackLayoutView = require('../../../../../../components/stack-layout/stack-layout-view');\nvar InputColorPickerView = require('../input-color-picker/input-color-picker-view');\nvar CategoriesListView = require('./input-color-categories-list-view');\nvar rampList = require('cartocolor');\nvar AssetPickerView = require('../assets-picker/input-asset-picker-view');\nvar MAX_VALUES = 10;\nvar DEFAULT_COLORS = _.clone(rampList.Prism[MAX_VALUES + 1]); // max values + \"others\" color\nvar queryTemplate = _.template('SELECT <%= column %>, count(<%= column %>) FROM (<%= sql %>) _table_sql GROUP BY <%= column %> ORDER BY count DESC, <%= column %> ASC LIMIT <%= max_values %>');\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\nvar REQUIRED_OPTS = [\n  'columns',\n  'configModel',\n  'modals',\n  'query',\n  'userModel'\n];\n\nfunction _quote (c) {\n  if (c && c !== true) {\n    return '\"' + c.toString().replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"';\n  }\n  return c;\n}\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack',\n    'click .js-quantification': '_onClickQuantification'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._imageEnabled = opts.imageEnabled;\n    this.listenTo(this.model, 'change:attribute', this._fetchColumns);\n    this._viewModel = new Backbone.Model({\n      step: 0,\n      status: 'idle'\n    });\n\n    this.listenTo(this._viewModel, 'change:status', this.render);\n\n    // If it comes from a quantification change\n    if (this.model.hasChanged('quantification') && this.model.get('quantification') === 'category') {\n      this._fetchColumns();\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var column = this._getColumn();\n    var columnType = column && column.type;\n\n    this.$el.append(template({\n      status: this._viewModel.get('status'),\n      columnType: columnType,\n      attribute: this.model.get('attribute'),\n      quantification: this.model.get('quantification') || 'category'\n    }));\n\n    this._generateStackLayoutView();\n\n    return this;\n  },\n\n  _generateStackLayoutView: function () {\n    var currentStep = this._viewModel.get('step');\n\n    var stackViewCollection = new Backbone.Collection([{\n      selected: currentStep === 0,\n      createStackView: function (stackLayoutModel, opts) {\n        return this._createRangeListView(stackLayoutModel, opts).bind(this);\n      }.bind(this)\n    }, {\n      selected: currentStep === 1,\n      createStackView: function (stackLayoutModel, opts) {\n        return this._createColorPickerView(stackLayoutModel, opts).bind(this);\n      }.bind(this)\n    }]);\n\n    if (this._iconStylingEnabled()) {\n      stackViewCollection.add({\n        selected: currentStep === 2,\n        createStackView: function (stackLayoutModel, opts) {\n          return this._createImagePickerView(stackLayoutModel, opts).bind(this);\n        }.bind(this)\n      });\n    }\n\n    this._stackLayoutView = new StackLayoutView({ collection: stackViewCollection });\n    this._stackLayoutView.bind('positionChanged', this._onStackLayoutPositionChange, this);\n\n    this.addView(this._stackLayoutView);\n    this.$('.js-content').append(this._stackLayoutView.render().$el);\n  },\n\n  _onStackLayoutPositionChange: function () {\n    this.$('.js-prevStep').toggle(this._stackLayoutView.getCurrentPosition() === 0);\n  },\n\n  _iconStylingEnabled: function () {\n    return this._imageEnabled;\n  },\n\n  _getColumn: function () {\n    return _.find(this._columns, function (column) {\n      return column.label === this.model.get('attribute');\n    }, this);\n  },\n\n  _fetchColumns: function () {\n    if (!this.model.get('attribute')) {\n      return;\n    }\n\n    if (this._query) {\n      this._setViewStatus('loading');\n\n      var sql = new CDB.SQL({\n        user: this._configModel.get('user_name'),\n        sql_api_template: this._configModel.get('sql_api_template'),\n        api_key: this._configModel.get('api_key')\n      });\n\n      sql.execute(\n        queryTemplate({\n          sql: this._query,\n          column: this.model.get('attribute'),\n          max_values: MAX_VALUES + 1\n        }),\n        null,\n        {\n          success: this._onQueryDone.bind(this),\n          error: function () {\n            this._setViewStatus('error');\n          }.bind(this)\n        }\n      );\n    } else {\n      this._onQueryDone();\n    }\n  },\n\n  _onQueryDone: function (data) {\n    data = data || {};\n    this._updateRangeAndDomain(data.rows);\n    this._setViewStatus('idle');\n  },\n\n  _updateRangeAndDomain: function (rows) {\n    rows = rows || [];\n    var categoryNames = _.pluck(rows, this.model.get('attribute'));\n\n    var domain = _.map(categoryNames, function (name, i) {\n      return name;\n    }).slice(0, MAX_VALUES);\n\n    if (this.model.get('attribute_type') !== 'number') {\n      domain = domain.filter(function (item, pos, self) {\n        return self.indexOf(item) === pos;\n      }).map(_quote);\n    }\n\n    var range = _.map(categoryNames, function (name, i) {\n      return (i < MAX_VALUES) ? DEFAULT_COLORS[i] : DEFAULT_COLORS[MAX_VALUES + 1];\n    });\n\n    if (this._iconStylingEnabled()) {\n      var images = _.map(categoryNames, function () {\n        return '';\n      });\n\n      this.model.attributes.images = images;\n    }\n\n    this.model.set({\n      range: range,\n      domain: domain\n    });\n  },\n\n  _setViewStatus: function (status) {\n    var attrs = {\n      status: status\n    };\n\n    if (status === 'loading') {\n      attrs.step = 0;\n    }\n\n    this._viewModel.set(attrs);\n  },\n\n  _getRange: function () {\n    return _.map(this.model.get('range'), function (color, i) {\n      var range = {\n        val: color,\n        color: color,\n        title: this.model.get('domain')[i]\n      };\n\n      if (this._iconStylingEnabled()) {\n        range.image = this.model.get('images')[i];\n      }\n\n      return range;\n    }, this);\n  },\n\n  _updateRange: function (categories) {\n    var range = _.clone(this.model.get('range'));\n    range[this._index] = categories[this._index].color;\n    this.model.set('range', range);\n  },\n\n  _createColorPickerView: function (stackLayoutModel, opts) {\n    var range = this._getRange();\n\n    var opacity = typeof this.model.get('opacity') !== 'undefined' ? this.model.get('opacity') : 1;\n\n    var view = new InputColorPickerView({\n      index: this._index,\n      ramp: range,\n      opacity: opacity,\n      imageEnabled: this._iconStylingEnabled()\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('goToAssetPicker', function () {\n      stackLayoutModel.nextStep();\n    }, this);\n\n    view.bind('change', this._updateRange, this);\n    view.bind('changeIndex', function (index) {\n      this._index = index;\n    }, this);\n    view.bind('change:opacity', function (opacity) {\n      this.model.set('opacity', opacity);\n    }, this);\n\n    return view;\n  },\n\n  _createRangeListView: function (stackLayoutModel, opts) {\n    var view = new CategoriesListView({\n      maxValues: MAX_VALUES,\n      model: this.model,\n      imageEnabled: this._iconStylingEnabled()\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('selectItem', function (item) {\n      this._index = item.index;\n\n      if (item.target === 'asset') {\n        stackLayoutModel.goToStep(2);\n      } else {\n        stackLayoutModel.goToStep(1);\n      }\n    }, this);\n\n    return view;\n  },\n\n  _createImagePickerView: function (stackLayoutModel, opts) {\n    var range = this._getRange();\n\n    var view = new AssetPickerView({\n      userModel: this._userModel,\n      configModel: this._configModel,\n      index: this._index,\n      ramp: range,\n      modals: this._modals,\n      imageEnabled: this._iconStylingEnabled()\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(0);\n    }, this);\n\n    view.bind('goToColorPicker', function () {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    if (this._iconStylingEnabled()) {\n      view.bind('change:image', this._onImageChanged, this);\n    }\n\n    return view;\n  },\n\n  _onImageChanged: function (data) {\n    var images = _.clone(this.model.get('images'));\n    images[this._index] = data.url;\n    this.model.set('images', images);\n  },\n\n  _onClickQuantification: function (e) {\n    this.killEvent(e);\n    this.trigger('selectQuantification', this);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  }\n}, {\n  MAX_VALUES: MAX_VALUES\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeader js-prevStep\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"u-flex u-justifySpace\">\\n        <li class=\"u-flex\">\\n          <button class=\"u-rSpace u-actionTextColor js-back\">\\n            <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n          </button>\\n          <span class=\"label js-label\">'+\n((__t=( attribute ))==null?'':_.escape(__t))+\n'</span>\\n        </li>\\n        ';\n if (columnType === 'number') { \n__p+='\\n          <li class=\"u-flex\">\\n            '+\n((__t=( _t('form-components.editors.fill.quantification.methods.' + quantification) ))==null?'':_.escape(__t))+\n'\\n            <button class=\"CDB-Shape u-lSpace js-quantification\">\\n              <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n                <div class=\"CDB-Shape-threePointsItem\"></div>\\n                <div class=\"CDB-Shape-threePointsItem\"></div>\\n                <div class=\"CDB-Shape-threePointsItem\"></div>\\n              </div>\\n            </button>\\n          </li>\\n        ';\n } \n__p+='\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n\\n';\n if (status === 'loading') { \n__p+='\\n  <div class=\"InputColorCategory-loader js-loader\">\\n    <div class=\"CDB-LoaderIcon is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n  </div>\\n';\n } else if (status === 'error') { \n__p+='\\n  <div class=\"u-flex u-alignCenter u-justifyCenter CDB-Text CDB-Size-medium u-bSpace--m u-tSpace--m u-errorTextColor\">'+\n((__t=( _t('form-components.editors.fill.error') ))==null?'':_.escape(__t))+\n'</div>\\n';\n } else { \n__p+='\\n  <div class=\"InputColorCategory-content js-content\"></div>\\n';\n } \n__p+='';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar tabPaneTemplate = require('../fill-tab-pane.tpl');\nvar createTextLabelsTabPane = require('../../../../../components/tab-pane/create-text-labels-tab-pane');\nvar InputColorFixedContentView = require('./input-color-fixed-content-view');\nvar InputColorValueContentView = require('./input-color-value-content-view');\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (this.options.editorAttrs) {\n      var editorAttrs = this.options.editorAttrs;\n\n      if (editorAttrs.hidePanes) {\n        this._hidePanes = editorAttrs.hidePanes;\n\n        if (!_.contains(this._hidePanes, 'value')) {\n          if (!opts.configModel) throw new Error('configModel param is required');\n          if (!opts.userModel) throw new Error('userModel param is required');\n          if (!opts.modals) throw new Error('modals param is required');\n          if (!opts.query) throw new Error('query param is required');\n        }\n      }\n\n      if (editorAttrs.categorizeColumns) {\n        this._categorizeColumns = true;\n      }\n\n      if (editorAttrs.imageEnabled) {\n        this._imageEnabled = true;\n      }\n    }\n\n    if (!opts.columns) throw new Error('columns is required');\n\n    this._columns = opts.columns;\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n    this._query = opts.query;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.on('change:fixed', function () {\n      if (!this.model.get('fixed') || this.model.get('range')) {\n        this.model.unset('image', { silent: true });\n      }\n    }, this);\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var fixedPane = {\n      name: 'fixed',\n      label: _t('form-components.editors.fill.input-color.solid'),\n      createContentView: function () {\n        return self._generateFixedContentView();\n      }\n    };\n\n    var valuePane = {\n      name: 'value',\n      label: _t('form-components.editors.fill.input-color.value'),\n      createContentView: function () {\n        return self._generateValueContentView();\n      }\n    };\n\n    this._tabPaneTabs = [];\n\n    if (this._hidePanes) {\n      if (!_.contains(this._hidePanes, 'fixed')) {\n        this._tabPaneTabs.push(fixedPane);\n      }\n      if (!_.contains(this._hidePanes, 'value')) {\n        this._tabPaneTabs.push(valuePane);\n      }\n    } else {\n      this._tabPaneTabs = [fixedPane, valuePane];\n    }\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          className: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    if (this.model.get('range') && this._tabPaneTabs.length > 1) {\n      this._tabPaneTabs[1].selected = true;\n    }\n\n    this._tabPaneView = createTextLabelsTabPane(this._tabPaneTabs, tabPaneOptions);\n    this._tabPaneView.collection.bind('change:selected', this._onChangeTabPaneViewTab, this);\n    this.$el.append(this._tabPaneView.render().$el);\n    this.addView(this._tabPaneView);\n  },\n\n  _onChangeTabPaneViewTab: function () {\n    var selectedTabPaneName = this._tabPaneView.getSelectedTabPaneName();\n    var attrsToUnsetIfFixed = ['domain', 'bins', 'attribute', 'quantification'];\n\n    if (selectedTabPaneName === 'fixed') {\n      _.each(attrsToUnsetIfFixed, function (attr) {\n        this.model.unset(attr, { silent: true });\n      }, this);\n\n      if (!this.model.get('fixed')) {\n        if (this.model.get('range')) {\n          this.model.set('fixed', this.model.get('range')[0]);\n          this.model.unset('range');\n        } else {\n          this.model.set('fixed', '#0303FF');\n        }\n      }\n    }\n\n    this.trigger('change', selectedTabPaneName, this);\n  },\n\n  _generateFixedContentView: function () {\n    return new InputColorFixedContentView({\n      model: this.model,\n      configModel: this._configModel,\n      userModel: this._userModel,\n      modals: this._modals,\n      editorAttrs: this.options.editorAttrs\n    });\n  },\n\n  _generateValueContentView: function () {\n    return new InputColorValueContentView({\n      model: this.model,\n      columns: this._columns,\n      configModel: this._configModel,\n      categorizeColumns: this._categorizeColumns,\n      imageEnabled: this._imageEnabled,\n      userModel: this._userModel,\n      modals: this._modals,\n      hideTabs: this.options.hideTabs,\n      query: this._query\n    });\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"js-selector\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./input-color-file-view.tpl');\nvar AssetsView = require('./assets-picker/assets-view');\nvar CarouselFormView = require('../../../../../components/carousel-form-view');\nvar CarouselCollection = require('../../../../../components/custom-carousel/custom-carousel-collection');\nvar StaticAssetsCollection = require('../../../../../data/static-assets-collection');\nvar StaticAssetModel = require('../../../../../data/static-asset-model');\nvar AssetTemplate = require('./assets-picker/static-asset-item-view.tpl');\nvar CarouselTemplate = require('./input-color-file-carousel.tpl');\nvar MakiIcons = require('./assets/maki-icons');\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-show-collection': '_onClickShowCollection'\n  },\n\n  initialize: function (opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n\n    this._initCarouselCollection();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._renderAssets();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._carouselCollection, 'change:selected', this._onSelectAsset);\n    this.listenTo(this._carouselCollection, 'reset', this.render);\n  },\n\n  _resetCarouselCollection: function (url) {\n    this._icons.reset(MakiIcons.icons);\n\n    var selectedItem = this._carouselCollection.find(function (m) { return m.get('url') === url; });\n\n    if (selectedItem) {\n      selectedItem.set('selected', true);\n    }\n\n    this._icons.unshift(this._resetAsset);\n    this._carouselCollection.reset(this._getIcons());\n  },\n\n  _initCarouselCollection: function () {\n    this._icons = new StaticAssetsCollection(MakiIcons.icons);\n    this.add_related_model(this._icons);\n\n    this._resetAsset = new StaticAssetModel({\n      type: 'none',\n      selected: !this._getIconSelected(),\n      name: _t('form-components.editors.fill.image.none'),\n      action: function (m) {\n        this._resetImage(m);\n      }.bind(this)\n    });\n\n    this._icons.unshift(this._resetAsset);\n\n    this._carouselCollection = new CarouselCollection(this._getIcons());\n    this.add_related_model(this._carouselCollection);\n  },\n\n  _getIcons: function () {\n    var defaultAction = function (m) {\n      this._changeIcon(m);\n    }.bind(this);\n\n    return this._icons.map(function (icon) {\n      var type = icon.get('type') ? icon.get('type') : 'icon';\n      var action = icon.get('action') ? icon.get('action') : defaultAction;\n      var selectedIcon = this._getIconSelected();\n\n      return {\n        selected: icon.get('selected') || icon.getURLFor(icon.get('icon')) === selectedIcon,\n        icon: icon,\n        type: type,\n        name: icon.get('name'),\n        url: icon.get('public_url'),\n        action: action,\n        template: function () {\n          return AssetTemplate({ type: type, public_url: icon.get('public_url') + '?req=markup', name: icon.get('name') });\n        }\n      };\n    }, this);\n  },\n\n  _getIconSelected: function () {\n    if (this.model.get('ramp')) {\n      var rampIndex = this.model.get('index') || 0;\n      var categoryImage = this.model.get('ramp')[rampIndex].image;\n\n      return categoryImage || '';\n    } else {\n      return this.model.get('image') || '';\n    }\n  },\n\n  _renderAssets: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    var view = new CarouselFormView({\n      collection: this._carouselCollection,\n      template: CarouselTemplate,\n      listItemOptions: {\n        className: 'Carousel-item AssetListItem'\n      },\n      itemOptions: {\n        className: 'AssetItem-button'\n      }\n    });\n\n    this.addView(view);\n    this.$('.js-assets').append(view.render().el);\n  },\n\n  _onSelectAsset: function (m) {\n    m.get('action')(m);\n  },\n\n  _changeIcon: function (m) {\n    var icon = m.get('icon');\n\n    this.trigger('change', {\n      url: icon.get('public_url'),\n      kind: icon.get('kind')\n    }, this);\n  },\n\n  _resetImage: function () {\n    this.trigger('change', null, this);\n  },\n\n  _onClickShowCollection: function (e) {\n    this.killEvent(e);\n\n    var self = this;\n\n    this._modals.create(function (modalModel) {\n      var view = new AssetsView({\n        model: self.model,\n        modalModel: modalModel,\n        configModel: self._configModel,\n        userModel: self._userModel\n      });\n\n      view.bind('change', function (data) {\n        this._resetCarouselCollection(data.url);\n        this.trigger('change', data, this);\n      }, self);\n\n      return view;\n    });\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Editor-boxModalContent js-assets\">\\n  <h2 class=\"CDB-Text CDB-Size-small u-bSpace--m u-upperCase\">\\n    '+\n((__t=( _t('form-components.editors.fill.image.recently-title') ))==null?'':_.escape(__t))+\n'\\n  </h2>\\n</div>\\n<div class=\"CustomRamp-list\">\\n  <div class=\"CustomList-item CustomList-item--add\">\\n    <button class=\"CDB-ListDecoration-itemLink CDB-Text CDB-Size-medium u-actionTextColor js-show-collection\" type=\"button\">\\n      '+\n((__t=( _t('form-components.editors.fill.image.show-all') ))==null?'':_.escape(__t))+\n'\\n    </button>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar tabPaneTemplate = require('../fill-tab-pane.tpl');\nvar createMixedLabelsTabPane = require('../../../../../components/tab-pane/create-mixed-labels-tab-pane');\nvar ColorPicker = require('../color-picker/color-picker');\nvar InputColorFileView = require('./input-color-file-view');\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (this.options.editorAttrs) {\n      var editorAttrs = this.options.editorAttrs;\n\n      this._imageEnabled = editorAttrs.imageEnabled;\n\n      if (editorAttrs.hidePanes) {\n        this._hidePanes = editorAttrs.hidePanes;\n\n        if (this._imageEnabled && !_.contains(this._hidePanes, 'file')) {\n          if (!opts.configModel) throw new Error('configModel param is required');\n          if (!opts.userModel) throw new Error('userModel param is required');\n          if (!opts.modals) throw new Error('modals param is required');\n        }\n      }\n\n      if (editorAttrs.disableOpacity) {\n        this._disableOpacity = true;\n      }\n    }\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n    this._modals = opts.modals;\n    this._query = opts.query;\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    if (this._imageEnabled) {\n      this._setupTabPanes();\n    }\n\n    if (this._tabPaneView) {\n      this.$el.append(this._tabPaneView.render().$el);\n    } else {\n      this.$el.append(this._generateFixedContentView().render().$el);\n    }\n    return this;\n  },\n\n  _setupTabPanes: function () {\n    var self = this;\n\n    var fixedPane = {\n      name: 'fixed',\n      type: 'color',\n      label: this.model.get('fixed'),\n      createContentView: function () {\n        return self._generateFixedContentView();\n      }\n    };\n\n    var filePane = {\n      name: 'file',\n      type: this.model.get('image') ? 'image' : 'text',\n      label: this.model.get('image') || _t('form-components.editors.fill.input-color.img'),\n      kind: this.model.get('kind') || 'marker',\n      color: this.model.get('fixed'),\n      createContentView: function () {\n        return self._generateFileContentView();\n      }\n    };\n\n    this._tabPaneTabs = [];\n\n    if (this.options.editorAttrs && this.options.editorAttrs.hidePanes) {\n      this._hidePanes = this.options.editorAttrs.hidePanes;\n\n      if (!_.contains(this._hidePanes, 'fixed')) {\n        this._tabPaneTabs.push(fixedPane);\n      }\n\n      if (!_.contains(this._hidePanes, 'file')) {\n        this._tabPaneTabs.push(filePane);\n      }\n    } else {\n      this._tabPaneTabs = [fixedPane, filePane];\n    }\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          className: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    if (this.model.get('image') && this._tabPaneTabs.length > 1) {\n      this._tabPaneTabs[1].selected = true;\n    }\n    this.listenTo(this.model, 'change:image', this._updateImageTabPane);\n    this.listenTo(this.model, 'change:fixed', this._updateTextTabPane);\n\n    this._tabPaneView = createMixedLabelsTabPane(this._tabPaneTabs, tabPaneOptions);\n    this.addView(this._tabPaneView);\n  },\n\n  _updateTextTabPane: function () {\n    this._updateImageTabPane();\n    this._tabPaneView.collection.at(0).set('label', this.model.get('fixed'));\n  },\n\n  _updateImageTabPane: function () {\n    if (this.model.get('image')) {\n      this._tabPaneView.collection.at(1).set({ label: this.model.get('image'), color: this.model.get('fixed') });\n    } else {\n      this._tabPaneView.collection.at(1).set('label', _t('form-components.editors.fill.input-color.img'));\n    }\n  },\n\n  _generateFixedContentView: function () {\n    var contentView = new ColorPicker({\n      value: this.model.get('fixed'),\n      opacity: this.model.get('opacity'),\n      disableOpacity: this._disableOpacity\n    });\n\n    contentView.bind('change', this._onChangeValue, this);\n    return contentView;\n  },\n\n  _generateFileContentView: function () {\n    var contentView = new InputColorFileView({\n      model: this.model,\n      userModel: this._userModel,\n      configModel: this._configModel,\n      modals: this._modals\n    });\n\n    contentView.bind('change', this._onChangeFile, this);\n    return contentView;\n  },\n\n  _onChangeFile: function (data) {\n    if (data && data.url) {\n      this.model.set({\n        image: data.url,\n        kind: data.kind\n      });\n    } else {\n      this.model.unset('image');\n    }\n  },\n\n  _onChangeValue: function (color) {\n    this.model.set({ fixed: color.hex, opacity: color.opacity });\n  }\n});\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar ImageLoaderView = require('../../../../../img-loader-view');\nvar template = require('./input-color-picker-header.tpl');\nvar MAX = 1;\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-color': '_onClickColor',\n    'click .js-assetPicker': '_onClickAssetPicker',\n    'keyup .js-a': '_onChangeOpacity'\n  },\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change', this.render);\n  },\n\n  render: function (model, options) {\n    if (model && model.changed && typeof model.changed.opacity !== 'undefined') {\n      this._reRenderOpacity();\n      return this;\n    }\n\n    this.clearSubViews();\n    this.$el.empty();\n\n    var rampItem = this._getRampItem();\n    this.$el.append(template({\n      ramp: this.model.get('ramp'),\n      index: this.model.get('index'),\n      opacity: this.model.get('opacity'),\n      label: rampItem.title || _t('form-components.editors.fill.input-categories.others'),\n      color: rampItem.color || '',\n      iconStylingEnabled: this.options.iconStylingEnabled,\n      isCategorized: _.has(rampItem, 'image'),\n      image: rampItem.image || '',\n      imageEnabled: this.options.imageEnabled\n    }));\n\n    this._slider = this.$('.js-slider').slider({\n      range: 'min',\n      value: this._inverseSliderValue(this.model.get('opacity')),\n      min: 0,\n      max: MAX,\n      step: 0.02,\n      orientation: 'horizontal',\n      disabled: false,\n      slide: this._onSlideChange.bind(this)\n    });\n\n    this._loadImages();\n\n    return this;\n  },\n\n  _getRampItem: function () {\n    var ramp = this.model.get('ramp');\n\n    if (!ramp) {\n      return {\n        color: '',\n        title: _t('form-components.editors.fill.input-categories.others'),\n        image: ''\n      };\n    }\n\n    return ramp[this.model.get('index')];\n  },\n\n  _loadImages: function () {\n    var rampItem = this._getRampItem();\n\n    this.iconView = new ImageLoaderView({\n      imageClass: 'CDB-Text u-actionTextColor js-assetPicker',\n      imageUrl: rampItem.image,\n      color: rampItem.color\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n  },\n\n  _onClickColor: function (ev) {\n    this.killEvent(ev);\n    this.model.set('index', $(ev.target).index());\n  },\n\n  _onClickBack: function (ev) {\n    this.killEvent(ev);\n    this.trigger('back', this);\n  },\n\n  _onClickAssetPicker: function (ev) {\n    this.killEvent(ev);\n    this.trigger('goToAssetPicker', this);\n  },\n\n  _onSlideChange: function (evt, obj) {\n    this.model.set('opacity', this._inverseSliderValue(obj.value));\n  },\n\n  _inverseSliderValue: function (value) {\n    return parseFloat(Number(MAX - value).toFixed(2));\n  },\n\n  _onChangeOpacity: function () {\n    var $input = this.$('.js-a');\n    var value = $input.val();\n    var isValid = this._isValidOpacity(value);\n    $input.toggleClass('has-error', !isValid);\n    if (isValid) {\n      this.model.set('opacity', parseFloat(value));\n    }\n  },\n\n  _isValidOpacity: function (value) {\n    var regex = /^((0(\\.\\d+)?)|(1(\\.0)?))$/;\n    return regex.test(value);\n  },\n\n  _reRenderOpacity: function () {\n    var $input = this.$('.js-a');\n    var $slider = this.$('.js-slider');\n    var opacity = this.model.get('opacity');\n    var inputValue;\n    var sliderValue;\n\n    if ($input.length > 0) {\n      inputValue = $input.val();\n      if (!this._isValidOpacity(inputValue) || (this._isValidOpacity(inputValue) && parseFloat(inputValue) !== opacity)) {\n        $input.val(opacity);\n      }\n    }\n\n    if (typeof $slider.slider('instance') !== 'undefined') {\n      sliderValue = $slider.slider('value');\n      if (typeof sliderValue !== 'undefined' && sliderValue !== this._inverseSliderValue(opacity)) {\n        $slider.slider('value', this._inverseSliderValue(opacity));\n      }\n    }\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemDisplay--flex CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <div class=\\'CDB-ListDecoration-secondaryContainer\\'>\\n        <button class=\"u-rSpace u-actionTextColor js-back\" type=\"button\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n        <span class=\"label js-label\">'+\n((__t=( label ))==null?'':_.escape(__t))+\n'</span>\\n      </div>\\n\\n      ';\n if (isCategorized && imageEnabled) { \n__p+='\\n        <div class=\\'CDB-ListDecoration-secondaryContainer\\'>\\n          <nav class=\\'CDB-NavMenu\\'>\\n            <ul class=\\'CDB-NavMenu-Inner CDB-NavMenu-inner--no-margin js-menu\\'>\\n              <li class=\\'CDB-NavMenu-item is-selected\\'>\\n                <div class=\\'CDB-NavMenu-link CDB-ListDecoration-rampNav-item\\'>\\n                  <button class=\\'ColorBar CDB-ListDecoration-rampItemBar u-rSpace--xl js-colorPicker\\' type=\"button\" style=\"background-color: '+\n((__t=( color ))==null?'':__t)+\n';\"></button>\\n                </div>\\n              </li>\\n              <li class=\\'CDB-NavMenu-item\\'>\\n                <div class=\\'CDB-NavMenu-link CDB-ListDecoration-rampNav-item\\'>\\n                  ';\n if (image) { \n__p+='\\n                    <button class=\"CDB-ListDecoration-rampImg js-image-container\" type=\"button\"></button>\\n                  ';\n } else { \n__p+='\\n                    <button class=\"CDB-ListDecoration-rampImg CDB-Text u-actionTextColor js-assetPicker\" type=\"button\">'+\n((__t=( _t('form-components.editors.fill.input-color.img') ))==null?'':__t)+\n'</button>\\n                  ';\n } \n__p+='\\n                </div>\\n              </li>\\n            </ul>\\n          </nav>\\n        </div>\\n      ';\n } \n__p+='\\n    </li>\\n  </ul>\\n</div>\\n\\n<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"ColorBarContainer ColorBarContainer--rampEditing\">\\n        ';\n _.each(ramp, function (color, i) { \n__p+='\\n        <li class=\"ColorBar is-link ColorBar--spaceless ColorBar--clickable js-color'+\n((__t=( i === index ? ' is-selected' : '' ))==null?'':_.escape(__t))+\n'\" data-label=\"'+\n((__t=( color.title ))==null?'':_.escape(__t))+\n'\" data-color=\"'+\n((__t=( color.color ))==null?'':_.escape(__t))+\n'\" style=\"background-color: '+\n((__t=( color.color ))==null?'':_.escape(__t))+\n';\"></li>\\n        ';\n }); \n__p+='\\n      </ul>\\n      <div class=\"OpacityEditor\">\\n        <div class=\"OpacityEditor-slider js-slider\"></div>\\n        <div class=\"OpacityEditor-inputWrapper\">\\n          <input type=\"text\" class=\"CDB-InputText ColorPicker-input js-a\" value=\"'+\n((__t=( opacity ))==null?'':_.escape(__t))+\n'\">\\n        </div>\\n      </div>\\n    </li>\\n  </ul>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar ColorPicker = require('../../color-picker/color-picker');\nvar template = require('./input-color-picker-view.tpl');\nvar InputColorPickerHeader = require('./input-color-picker-header');\nvar checkAndBuildOpts = require('../../../../../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'ramp',\n  'opacity'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.model = new Backbone.Model({\n      index: this.options.index,\n      ramp: opts.ramp,\n      opacity: opts.opacity\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:index', this._onChangeIndex);\n    this.listenTo(this.model, 'change:opacity', this._onOpacityChanged);\n  },\n\n  _initViews: function () {\n    this._headerView = new InputColorPickerHeader({\n      model: this.model,\n      imageEnabled: this.options.imageEnabled\n    });\n\n    this.addView(this._headerView);\n    this._headerView.bind('goToAssetPicker', this._onGoToAssetPicker, this);\n    this.$('.js-header').append(this._headerView.render().$el);\n\n    this._colorPicker = new ColorPicker({\n      value: this._getColor(),\n      opacity: 1,\n      disableOpacity: true\n    });\n\n    this.addView(this._colorPicker);\n    this._colorPicker.bind('change', this._onChangeValue, this);\n    this.$('.js-content').append(this._colorPicker.render().$el);\n  },\n\n  _setColor: function (color) {\n    var ramp = _.clone(this.model.get('ramp'));\n    ramp[this.model.get('index')].color = color;\n    this.model.set('ramp', ramp);\n    this.model.trigger('change', ramp);\n    this.trigger('change', ramp);\n  },\n\n  _getColor: function () {\n    var ramp = this.model.get('ramp');\n    return ramp[this.model.get('index') || 0].color;\n  },\n\n  _onChangeIndex: function () {\n    this._colorPicker.setColor(this._getColor());\n    this.trigger('changeIndex', this.model.get('index'), this);\n  },\n\n  _onChangeValue: function (color) {\n    this._setColor(color.hex);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onOpacityChanged: function () {\n    var opacity = this.model.get('opacity');\n    this.trigger('change:opacity', opacity);\n  },\n\n  _onGoToAssetPicker: function () {\n    this.trigger('goToAssetPicker');\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar StackLayoutView = require('../../../../../components/stack-layout/stack-layout-view');\nvar ColumnListView = require('../column-list-view');\nvar quantificationMethodItemTemplate = require('./quantification-method-item.tpl');\nvar InputColorRamps = require('./input-ramps/input-color-ramps');\nvar InputColorCategories = require('./input-categories/input-color-categories');\nvar DefaultFillSettings = require('../default-fill-settings.json');\nvar checkAndBuildOpts = require('../../../../../helpers/required-opts');\n\nvar EXCLUDED_COLUMNS = ['the_geom', 'the_geom_webmercator'];\nvar REQUIRED_OPTS = [\n  'columns',\n  'configModel',\n  'modals',\n  'query',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._settings = DefaultFillSettings.color;\n\n    this._categorizeColumns = opts.categorizeColumns;\n    this._imageEnabled = opts.imageEnabled;\n\n    this._column = this._getColumn();\n    this._columnType = this._column && this._column.type;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:quantification', function () {\n      if (this.model.previous('quantification') === 'category') {\n        delete this.model.attributes.range;\n      }\n\n      if (this.model.get('quantification') !== 'category') {\n        this.model.unset('domain');\n      }\n    });\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createColumnListView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createInputColorRamps(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createInputColorCategories(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createQuantificationListView(stackLayoutModel, opts).bind(self);\n      }\n    }]);\n\n    this._stackLayoutView = new StackLayoutView({\n      collection: stackViewCollection\n    });\n\n    if (this.model.get('attribute')) {\n      var hasDomain = this.model.get('domain') && this.model.get('domain').length;\n      var hasRange = this.model.get('range') && this.model.get('range').length;\n      var showCategories = (this._columnType === 'string') || (hasDomain && hasRange);\n\n      if (showCategories) {\n        this._stackLayoutView.model.set('position', 2);\n      } else {\n        this._stackLayoutView.model.set('position', 1);\n      }\n    }\n\n    this.$el.append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n  },\n\n  _createInputColorCategories: function (stackLayoutModel, opts) {\n    var view = new InputColorCategories({\n      model: this.model,\n      query: this._query,\n      columns: this._columns,\n      configModel: this._configModel,\n      userModel: this._userModel,\n      modals: this._modals,\n      imageEnabled: this._imageEnabled\n    });\n\n    view.bind('selectQuantification', function (item) {\n      stackLayoutModel.goToStep(3);\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(0);\n    }, this);\n\n    return view;\n  },\n\n  _createQuantificationListView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.quantification.title'),\n      stackLayoutModel: stackLayoutModel,\n      itemTemplate: quantificationMethodItemTemplate,\n      columns: this._settings.quantifications.items,\n      showSearch: false\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('quantification', item.get('val'));\n      stackLayoutModel.goToStep(1);\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(0);\n    }, this);\n\n    return view;\n  },\n\n  _createInputColorRamps: function (stackLayoutModel, opts) {\n    var view = new InputColorRamps({\n      hideTabs: this.options.hideTabs,\n      model: this.model\n    });\n\n    view.bind('switch', function () {\n      stackLayoutModel.goToStep(2);\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    return view;\n  },\n\n  _getColumn: function (columnName) {\n    return _.find(this._columns, function (column) {\n      return column.label === (columnName || this.model.get('attribute'));\n    }, this);\n  },\n\n  _createColumnListView: function (stackLayoutModel, opts) {\n    var columns = _.reject(this._columns, function (column) {\n      return column.type === 'geometry' || _.contains(EXCLUDED_COLUMNS, column.label);\n    }, this);\n\n    var view = new ColumnListView({\n      stackLayoutModel: stackLayoutModel,\n      columns: columns,\n      showSearch: true,\n      typeLabel: 'column'\n    });\n\n    view.bind('selectItem', function (item) {\n      this._onChangeAttribute(item.get('val'), stackLayoutModel);\n    }, this);\n\n    return view;\n  },\n\n  _onChangeAttribute: function (columnName, stackLayoutModel) {\n    var validCategoryTypes = ['string', 'boolean'];\n    var attrsToUnset = ['image', 'fixed', 'quantification', 'opacity'];\n    var wasQuantificationCategory = this.model.get('quantification') === 'category';\n\n    this._column = this._getColumn(columnName);\n    this._columnType = this._column && this._column.type;\n\n    _.each(attrsToUnset, function (attr) {\n      this.model.unset(attr, { silent: true });\n    }, this);\n\n    if (_.contains(validCategoryTypes, this._columnType) || this._categorizeColumns) {\n      this.model.unset('bins', { silent: true });\n      stackLayoutModel.goToStep(2);\n    } else if (this._columnType === 'number') {\n      this.model.unset('images', { silent: true });\n      this.model.unset('domain', { silent: true });\n\n      // Unset range if previous quantification was category\n      if (wasQuantificationCategory) {\n        this.model.unset('range', { silent: true });\n      }\n\n      stackLayoutModel.goToStep(1);\n    }\n\n    this.model.set({\n      attribute: columnName,\n      attribute_type: this._columnType\n    });\n  }\n});\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./input-color.tpl');\nvar InputDialogContent = require('./input-color-dialog-content');\nvar Utils = require('../../../../../helpers/utils');\nvar rampList = require('./input-ramps/ramps');\nvar ImageLoaderView = require('../../../../img-loader-view');\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'CDB-OptionInput-item',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    if (this.options.editorAttrs) {\n      this._editorAttrs = this.options.editorAttrs;\n      this._imageEnabled = this._editorAttrs.imageEnabled;\n      var hidePanes = this._editorAttrs.hidePanes;\n\n      if (hidePanes && !_.contains(hidePanes, 'value')) {\n        if (!opts.configModel) throw new Error('configModel param is required');\n        if (!opts.userModel) throw new Error('userModel param is required');\n        if (!opts.modals) throw new Error('modals param is required');\n        if (!opts.query) throw new Error('query param is required');\n      }\n    }\n\n    if (!opts.columns) throw new Error('columns is required');\n\n    this._columns = opts.columns;\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n    this._query = opts.query;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this.options.disabled) {\n      this.$el.addClass('is-disabled');\n    }\n\n    var column = this._getColumn();\n    var columnType = column && column.type;\n    var hasDomain = this.model.get('domain') && this.model.get('domain').length;\n\n    if (this.model.get('range') && _.isString(this.model.get('range'))) {\n      this._migrateRange();\n    }\n\n    var hasRange = this.model.get('range') && this.model.get('range').length;\n    var showCategories = (columnType === 'string') || (hasDomain && hasRange);\n    var imageURL = this._getImageURL();\n    var categoryImagesPresent = this._iconStylingEnabled() && !this._getImageURL() && this._categoryImagesPresent();\n\n    this.$el.html(template({\n      categoryImagesPresent: categoryImagesPresent,\n      imageURL: imageURL,\n      kind: this._getKind(),\n      showCategories: showCategories,\n      value: this._getValue(),\n      opacity: this._getOpacity()\n    }));\n\n    this._loadImages();\n\n    return this;\n  },\n\n  _loadImages: function () {\n    this.iconView = new ImageLoaderView({\n      imageClass: 'Editor-fillImageAsset',\n      imageUrl: this._getImageURL(),\n      color: this.model.get('fixed')\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n  },\n\n  _categoryImagesPresent: function () {\n    var images = this.model.get('images');\n\n    for (var i in images) {\n      if (!_.isEmpty(images[i])) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  _iconStylingEnabled: function () {\n    return this._imageEnabled;\n  },\n\n  _getKind: function () {\n    return this.model.get('kind') && this._iconStylingEnabled() ? this.model.get('kind') : '';\n  },\n\n  _getImageURL: function () {\n    return this.model.get('image') && this._iconStylingEnabled() ? this.model.get('image') : '';\n  },\n\n  // Converts reference to the old color ramp to the full color list\n  _migrateRange: function () {\n    var rangeName = this.model.get('range');\n    var bins = this.model.get('bins') || 3;\n\n    if (rampList[rangeName] && rampList[rangeName][bins]) {\n      this.model.set('range', rampList[rangeName][bins]);\n    }\n  },\n\n  _getColumn: function () {\n    return _.find(this._columns, function (column) {\n      return column.label === this.model.get('attribute');\n    }, this);\n  },\n\n  _createContentView: function () {\n    var view = new InputDialogContent({\n      configModel: this._configModel,\n      userModel: this._userModel,\n      modals: this._modals,\n      query: this._query,\n      model: this.model,\n      columns: this._columns,\n      editorAttrs: this._editorAttrs\n    });\n\n    view.bind('change', this.render, this);\n\n    return view;\n  },\n\n  _onClick: function (e) {\n    if (this.options.disabled) {\n      return;\n    }\n    this.trigger('click', this.model);\n  },\n\n  _initBinds: function () {\n    var self = this;\n\n    this.model.set('createContentView', function () {\n      return self._createContentView();\n    }).bind(this);\n\n    this.model.on('change:images', this.render, this);\n    this.model.on('change:selected', this._onToggleSelected, this);\n    this.model.on('change:opacity', this.render, this);\n    this.model.on('change:fixed', this.render, this);\n    this.model.on('change:fixed', this._updateColor, this);\n    this.model.on('change:image', this.render, this);\n    this.model.on('change:range', this.render, this);\n  },\n\n  _updateColor: function () {\n    this.iconView && this.iconView.updateImageColor(this.model.get('fixed'));\n  },\n\n  _getValue: function () {\n    var value = this.model.get('fixed');\n\n    if (value) {\n      value = Utils.hexToRGBA(value, this._getOpacity());\n    }\n\n    if (this.model.get('range') && this.model.get('range').length) {\n      value = _.map(this.model.get('range'), function (color) {\n        return Utils.hexToRGBA(color, this._getOpacity());\n      }, this);\n    }\n\n    return value;\n  },\n\n  _getOpacity: function () {\n    return this.model.get('opacity') != null ? this.model.get('opacity') : 1;\n  },\n\n  _onToggleSelected: function () {\n    this.$el.toggleClass('is-active', this.model.get('selected'));\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (showCategories) { \n__p+='\\n  <ul class=\"ColorsBar\">\\n    ';\n _.each(value, function (color) { \n__p+='\\n      <li class=\"ColorBar '+\n((__t=( categoryImagesPresent ? 'ColorBar--spaceSmall' : 'ColorBar--spaceMedium' ))==null?'':_.escape(__t))+\n'\" style=\"background-color: '+\n((__t=( color ))==null?'':_.escape(__t))+\n'\"></li>\\n    ';\n }); \n__p+='\\n  </ul>\\n';\n } else { \n__p+='\\n  <button type=\"button\" class=\"Editor-fillContainer\">\\n    <ul class=\"ColorBarContainer\">\\n      ';\n if (_.isArray(value)) { \n__p+='\\n        <li class=\"ColorBar ColorBar-gradient\" style=\"background: linear-gradient(90deg,'+\n((__t=( value.join(',') ))==null?'':_.escape(__t))+\n')\"></li>\\n      ';\n } else { \n__p+='\\n        <li class=\"ColorBar\" style=\"background-color: '+\n((__t=( value ))==null?'':_.escape(__t))+\n'\"></li>\\n      ';\n } \n__p+='\\n    </ul>\\n  </button>\\n';\n } \n__p+='\\n\\n';\n if (imageURL && kind !== 'custom-marker') { \n__p+='\\n<button type=\"button\" class=\"Editor-fillImage\">\\n  <div class=\"js-image-container\"></div>\\n</button>\\n';\n } \n__p+='\\n\\n';\n if ((!imageURL && categoryImagesPresent) || (imageURL && kind === 'custom-marker')) { \n__p+='\\n<button type=\"button\" class=\"Editor-fillImage\">\\n  <div class=\\'Editor-categoryImagesTag CDB-Text CDB-FontSize-small u-altTextColor is-semibold u-upperCase\\'>'+\n((__t=( _t('form-components.editors.fill.input-color.img') ))==null?'':__t)+\n'</div>\\n</button>\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (customRamp && customRamp.length) { \n__p+='\\n<li class=\"CDB-ListDecoration-item CustomList-item CustomRamp js-customRampItem\">\\n  <div class=\"CustomRamp-listOptions CDB-ListDecoration-itemLink CDB-ListDecoration-itemLink--double js-customRamp js-listItemLink is-selected\">\\n    <ul class=\"ColorBarContainer\">\\n      ';\n _.each(customRamp, function (color) { \n__p+='\\n      <li class=\"ColorBar ColorBar--spaceless\" style=\"background-color: '+\n((__t=( color ))==null?'':_.escape(__t))+\n';\"></li>\\n      ';\n }); \n__p+='\\n    </ul>\\n  </div>\\n  <button class=\"CDB-ListDecoration-itemLink CustomRamp-clear js-clear\">\\n    <div class=\"CDB-Shape\">\\n      <div class=\"CDB-Shape-close is-blue is-large\"></div>\\n    </div>\\n  </button>\\n</li>\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar StackLayoutView = require('../../../../../../components/stack-layout/stack-layout-view');\nvar ColumnListView = require('../../column-list-view');\nvar quantificationMethodItemTemplate = require('../quantification-method-item.tpl');\nvar InputRampContentView = require('./input-ramp-content-view');\nvar rampList = require('cartocolor');\nvar DefaultFillSettings = require('../../default-fill-settings.json');\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    this._settings = DefaultFillSettings['color-ramps'];\n\n    this._setupModel();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _setupModel: function () {\n    var options = {};\n\n    if (!this.model.get('quantification')) {\n      options.quantification = this._settings.quantifications.items[this._settings.quantifications.defaultIndex];\n    }\n\n    if (!this.model.get('bins')) {\n      options.bins = this._settings.bins.items[this._settings.bins.defaultIndex];\n    }\n\n    if (+this.model.get('bins') > +this._settings.bins.items[this._settings.bins.items.length - 1]) {\n      options.bins = this._settings.bins.items[this._settings.bins.items.length - 1];\n    }\n\n    this.model.set(options);\n  },\n\n  _initBinds: function () {\n    var range = this.model.get('range');\n\n    this.listenTo(this.model, 'change:bins', this._updateRange);\n    this.listenTo(this.model, 'change:attribute', this.render);\n    this.listenTo(this.model, 'change:quantification', this._onChangeQuantification);\n\n    this.model.unset('fixed');\n\n    if (!range || !this._isValidRange(range)) {\n      this.model.set('range', this._getDefaultRamp());\n    }\n  },\n\n  // range minimun size should be 2\n  _isValidRange: function (range) {\n    return range && range.length > 1 || false;\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var collectionOptions = [\n      {\n        createStackView: function (stackLayoutModel, opts) {\n          return self._createInputRampContentView(stackLayoutModel, opts).bind(self);\n        }\n      }\n    ];\n\n    if (!this.options.hideTabs || !_.contains(this.options.hideTabs, 'quantification')) {\n      collectionOptions.push(\n        {\n          createStackView: function (stackLayoutModel, opts) {\n            return self._createQuantificationListView(stackLayoutModel, opts).bind(self);\n          }\n        }\n      );\n    }\n\n    if (!this.options.hideTabs || !_.contains(this.options.hideTabs, 'bins')) {\n      collectionOptions.push(\n        {\n          createStackView: function (stackLayoutModel, opts) {\n            return self._createBinsListView(stackLayoutModel, opts).bind(self);\n          }\n        }\n      );\n    }\n\n    var stackViewCollection = new Backbone.Collection(collectionOptions);\n\n    this._stackLayoutView = new StackLayoutView({\n      collection: stackViewCollection\n    });\n\n    this.$el.append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n  },\n\n  _updateRange: function () {\n    var previousBins = this.model.previous('bins');\n\n    if (!previousBins) {\n      return;\n    }\n\n    var previousRamps = _.find(rampList, function (ramp) {\n      var previousRamp = ramp[previousBins];\n      var range = this.model.get('range');\n      return previousRamp && range && previousRamp.join('').toLowerCase() === range.join('').toLowerCase();\n    }, this);\n\n    if (previousRamps) {\n      var bins = this.model.get('bins');\n      this.model.set('range', previousRamps[bins]);\n    }\n  },\n\n  _createInputRampContentView: function (stackLayoutModel, opts) {\n    var view = new InputRampContentView({\n      stackLayoutModel: stackLayoutModel,\n      model: this.model\n    });\n\n    view.bind('back', function (value) {\n      this.trigger('back');\n    }, this);\n\n    view.bind('selectItem', function (value) {\n      this.model.unset('domain');\n      this.model.set('range', value);\n    }, this);\n\n    view.bind('selectQuantification', function (value) {\n      stackLayoutModel.goToStep(1);\n    }, this);\n\n    view.bind('selectBins', function (value) {\n      stackLayoutModel.goToStep(2);\n    }, this);\n\n    return view;\n  },\n\n  _createBinsListView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.bins'),\n      stackLayoutModel: stackLayoutModel,\n      columns: this._settings.bins.items\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('bins', item.get('val'));\n      stackLayoutModel.goToStep(0);\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(0);\n    }, this);\n\n    return view;\n  },\n\n  _createQuantificationListView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.quantification.title'),\n      stackLayoutModel: stackLayoutModel,\n      itemTemplate: quantificationMethodItemTemplate,\n      columns: this._settings.quantifications.items,\n      showSearch: false\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('quantification', item.get('val'));\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(0);\n    }, this);\n\n    return view;\n  },\n\n  _getDefaultRamp: function () {\n    return _.map(rampList, function (ramp) {\n      return ramp[this.model.get('bins')];\n    }, this)[0];\n  },\n\n  _onChangeQuantification: function () {\n    if (this.model.get('quantification') === 'category') {\n      this.trigger('switch', this);\n    }\n  },\n\n  remove: function () {\n    CoreView.prototype.remove.apply(this);\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar InputRampListView = require('./input-ramp-list-view');\nvar StackLayoutView = require('../../../../../../components/stack-layout/stack-layout-view');\nvar InputColorPickerView = require('../input-color-picker/input-color-picker-view');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createInputRampListView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createColorPickerView(stackLayoutModel, opts).bind(self);\n      }\n    }]);\n\n    this._stackLayoutView = new StackLayoutView({\n      collection: stackViewCollection\n    });\n\n    this.$el.append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n  },\n\n  _createColorPickerView: function (stackLayoutModel, opts) {\n    var range = _.map(this.model.get('range'), function (color, i) {\n      return {\n        val: color,\n        color: color,\n        title: this.model.get('attribute')\n      };\n    }, this);\n\n    var opacity = (typeof this.model.get('opacity') !== 'undefined') ? this.model.get('opacity') : 1;\n\n    var view = new InputColorPickerView({\n      index: 0,\n      ramp: range,\n      opacity: opacity\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('change', this._updateRange, this);\n    view.bind('change:opacity', function (opacity) {\n      this.model.set('opacity', opacity);\n    }, this);\n\n    return view;\n  },\n\n  _createInputRampListView: function (stackLayoutModel, opts) {\n    var view = new InputRampListView({\n      model: this.model,\n      showSearch: this.options.showSearch || false,\n      typeLabel: this.options.typeLabel\n    });\n\n    view.bind('customize', function (value) {\n      stackLayoutModel.nextStep();\n    }, this);\n\n    view.bind('change_ramp', this._updateRamp, this);\n    view.bind('change', this._updateRange, this);\n\n    view.bind('back', function (value) {\n      this.trigger('back', this);\n    }, this);\n\n    view.bind('switch', function (value) {\n      this.trigger('switch', this);\n    }, this);\n\n    view.bind('selectItem', function (item) {\n      this.trigger('selectItem', item.get('val'), this);\n    }, this);\n\n    view.bind('selectBins', function (item) {\n      this.trigger('selectBins', this);\n    }, this);\n\n    view.bind('selectQuantification', function (item) {\n      this.trigger('selectQuantification', this);\n    }, this);\n\n    return view;\n  },\n\n  _updateRamp: function (ramp) {\n    this.model.set('range', ramp);\n  },\n\n  _updateRange: function (categories) {\n    this.model.set('range', _.pluck(categories, 'color'));\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  }\n});\n\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"InputColor-modalHeader CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <div class=\"u-flex u-alignStart u-ellipsis\">\\n        <button class=\"u-rSpace u-actionTextColor js-back\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n        <div class=\"u-ellipsis\">\\n          '+\n((__t=( attribute ))==null?'':_.escape(__t))+\n'\\n        </div>\\n      </div>\\n    </li>\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"u-flex u-justifySpace\">\\n        <li class=\"u-flex\">\\n          '+\n((__t=( bins ))==null?'':_.escape(__t))+\n' '+\n((__t=( _t('form-components.editors.fill.input-ramp.buckets', { smart_count: bins }) ))==null?'':_.escape(__t))+\n'\\n          <button class=\"CDB-Shape u-lSpace js-bins\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n        <li class=\"u-flex\">\\n          '+\n((__t=( _t('form-components.editors.fill.quantification.methods.' + quantification) ))==null?'':_.escape(__t))+\n'\\n          <button class=\"CDB-Shape u-lSpace js-quantification\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n<div class=\"js-content\"></div>\\n<div class=\"CDB-Text CDB-Size-medium CustomRamp-list CustomList-listWrapper\">\\n  <ul class=\"CustomList-list js-customList\">\\n    <li class=\"CDB-ListDecoration-item CustomList-item CustomList-item--add\">\\n      <button class=\"CDB-ListDecoration-itemLink js-listItemLink js-customize u-actionTextColor\">'+\n((__t=( _t('form-components.editors.fill.customize') ))==null?'':_.escape(__t))+\n'</button>\\n    </li>\\n  </ul>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"ColorBarWrapper--withInvertLink CDB-ListDecoration-itemLink CDB-ListDecoration-itemLink--double js-listItemLink ';\n if (isSelected) { \n__p+=' is-selected ';\n } \n__p+='\">\\n  <ul class=\"ColorBarContainer\">\\n    ';\n _.each(name, function (color) { \n__p+='\\n    <li class=\"ColorBar ColorBar--spaceless\" style=\"background-color: '+\n((__t=( color ))==null?'':_.escape(__t))+\n';\"></li>\\n    ';\n }); \n__p+='\\n  </ul>\\n</div>\\n<button class=\"ColorBar-invertLink js-invert\" data-event=\"invert\"></button>\\n\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\n\nmodule.exports = CoreView.extend({\n\n  className: 'CDB-ListDecoration-item CustomList-item CustomList-item--invert js-listItem',\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click .js-listItemLink': '_onClick',\n    'click .js-invert': '_onClickInvert'\n  },\n\n  initialize: function (opts) {\n    this.options = _.extend({}, this.options, opts);\n    this.listenTo(this.model, 'change', this.render);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isInverted: this.model.get('inverted'),\n          isDisabled: this.model.get('disabled'),\n          isDestructive: this.model.get('destructive'),\n          name: this.model.getName(),\n          val: this.model.getValue(),\n          options: this.model.get('renderOptions')\n        })\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'))\n      .toggleClass('is-selected', !!this.model.get('selected'))\n      .toggleClass('is-inverted', !!this.model.get('inverted'));\n\n    return this;\n  },\n\n  _onMouseLeave: function () {\n    this.$el.removeClass('is-highlighted');\n  },\n\n  _onMouseEnter: function () {\n    this.$el.addClass('is-highlighted');\n  },\n\n  _onClick: function (ev) {\n    this.killEvent(ev);\n\n    if (this.model.get('selected')) {\n      this.trigger('customEvent', 'customize', this.model.get('val'), this);\n    } else {\n      this.model.set('selected', true);\n    }\n  },\n\n  _onClickInvert: function (e) {\n    this.killEvent(e);\n    this.model.set('inverted', !this.model.get('inverted'));\n    this.trigger('customEvent', 'invert', this.model, this);\n  }\n});\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar CoreView = require('backbone/core-view');\nvar CustomListView = require('../../../../../custom-list/custom-view');\nvar CustomListCollection = require('../../../../../custom-list/custom-list-collection');\nvar rampItemTemplate = require('./input-ramp-list-item-template.tpl');\nvar rampItemView = require('./input-ramp-list-item-view');\nvar customRampTemplate = require('./custom-ramp-template.tpl');\nvar rampList = require('cartocolor');\nvar template = require('./input-ramp-content-view.tpl');\n\nvar DEFAULT_RAMP_ITEM_COLOR = '#CCCCCC';\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-customize': '_onClickCustomize',\n    'click .js-clear': '_onClickClear',\n    'click .js-customRamp': '_onClickCustomRamp',\n    'click .js-back': '_onClickBack',\n    'click .js-switch': '_onClickSwitch',\n    'click .js-quantification': '_onClickQuantification',\n    'click .js-bins': '_onClickBins'\n  },\n\n  initialize: function (opts) {\n    this._showSearch = opts.showSearch || false;\n    this._typeLabel = opts.typeLabel;\n\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(template({\n      bins: this.model.get('bins'),\n      attribute: this.model.get('attribute'),\n      quantification: this.model.get('quantification')\n    }));\n\n    this._initViews();\n\n    var customRamp = this._customRamp.get('range');\n\n    this.$('.js-customList').prepend(customRampTemplate({\n      customRamp: customRamp\n    }));\n\n    if (customRamp) {\n      this.$('.js-customList').addClass('is-customized');\n    } else {\n      var selectedRamp = this.collection.getSelectedItem();\n\n      if (!selectedRamp) {\n        selectedRamp = this.collection.first();\n      }\n\n      this._selectRamp(selectedRamp);\n    }\n\n    return this;\n  },\n\n  _initModels: function () {\n    this._customRamp = new cdb.core.Model();\n    this._setupCollection();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:bins', this._onChangeBins);\n    this.listenTo(this.model, 'change:attribute_type', this._updateRampOnAttributeChange);\n    this.listenTo(this.collection, 'change:selected', this._onSelectItem);\n  },\n\n  _initViews: function () {\n    this._listView = new CustomListView({\n      collection: this.collection,\n      showSearch: this._showSearch,\n      typeLabel: this._typeLabel,\n      itemTemplate: rampItemTemplate,\n      itemView: rampItemView\n    });\n\n    this._listView.bind('invert', this._invertRamp, this);\n    this._listView.bind('customize', function (ramp) {\n      this.trigger('customize', ramp, this);\n    }, this);\n\n    this.$('.js-content').append(this._listView.render().el);\n    this.addView(this._listView);\n  },\n\n  _getRamps: function () {\n    var attributeType = this.model.get('attribute_type');\n    // select only suitable ramps for the data type\n    // number -> ramps\n    // string -> category\n    var rampTypeFromType = {\n      number: ['quantitative', 'diverging'],\n      string: ['qualitative']\n    };\n    var ramps = rampList;\n    if (rampTypeFromType[attributeType]) {\n      ramps = _.filter(ramps, function (r) {\n        // ramp without tags is discarded\n        if (r.tags) {\n          return _.contains(rampTypeFromType[attributeType], r.tags[0]);\n        }\n        return false;\n      });\n    }\n\n    ramps = _.map(ramps, function (rampItem, name) {\n      var ramp = rampItem[this.model.get('bins')];\n      var range = this.model.get('range');\n      var isSelected = false;\n      var isInverted = false;\n\n      if (ramp && ramp.length && range && range.length) {\n        isSelected = ramp.join().toLowerCase() === range.join().toLowerCase();\n\n        if (!isSelected) {\n          isSelected = _.clone(ramp).reverse().join().toLowerCase() === range.join().toLowerCase();\n          isInverted = isSelected;\n        }\n      }\n\n      if (!ramp) {\n        return null;\n      }\n\n      return {\n        selected: isSelected,\n        inverted: isInverted,\n        name: name,\n        val: ramp\n      };\n    }, this);\n\n    return ramps;\n  },\n\n  _setupCollection: function () {\n    var ramps = this._getRamps();\n    this.collection = new CustomListCollection(_.compact(ramps), { silent: false });\n    if (!this.collection.getSelectedItem()) {\n      this._customRamp.set('range', this.model.get('range'));\n    }\n  },\n\n  _updateRampOnAttributeChange: function (m, type) {\n    var ramps = this._getRamps();\n    // Update the ramps when the attribute changes\n    this.collection.reset(_.compact(ramps), {silent: true});\n    // and delete the custom ramp\n    this._customRamp.set('range', false);\n\n    // apply the first ramp\n    var first = this.collection.first();\n    first && first.set('selected', true);\n    this.render();\n  },\n\n  _invertRamp: function (item) {\n    if (!item) {\n      return;\n    }\n\n    this._customRamp.set('range', null);\n    item.set('selected', false);\n    var ramp = [].concat(item.get('val')).reverse();\n    item.set({ val: ramp, selected: true });\n    this.model.set('range', ramp);\n  },\n\n  _selectRamp: function (item) {\n    if (!item) {\n      return;\n    }\n\n    var range = item.get('val');\n    // 'manually' select the item to preserve scroll position\n    this.$('.js-listItemLink').removeClass('is-selected');\n    this.$('.js-listItem[data-val=\"' + range.join(',') + '\"] .js-listItemLink').addClass('is-selected');\n  },\n\n  _onClickClear: function (e) {\n    this.killEvent(e);\n\n    this._customRamp.set('range', null);\n\n    if (!this.collection.getSelectedItem()) {\n      this.collection.first().set('selected', true);\n    }\n\n    this.render();\n    this._listView.highlight();\n  },\n\n  _onClickCustomRamp: function (e) {\n    this.killEvent(e);\n\n    if (this.model.get('range') === this._customRamp.get('range')) {\n      this.trigger('customize', this.collection.getSelectedItem(), this);\n    } else {\n      this.model.set('range', this._customRamp.get('range'));\n    }\n\n    this.$('.js-listItemLink').removeClass('is-selected');\n    this.$('.js-customRamp').addClass('is-selected');\n  },\n\n  _onClickCustomize: function (e) {\n    this.killEvent(e);\n    var ramp = this.collection.getSelectedItem();\n    this._customRamp.set('range', ramp);\n    this.trigger('customize', ramp, this);\n  },\n\n  _onChangeBins: function () {\n    var customRange = this._customRamp.get('range');\n\n    if (customRange) {\n      if (this.model.get('bins') > customRange.length) {\n        customRange = _.range(this.model.get('bins')).map(function (i) {\n          return i >= customRange.length ? DEFAULT_RAMP_ITEM_COLOR : customRange[i];\n        });\n      } else {\n        customRange = customRange.slice(0, this.model.get('bins'));\n      }\n\n      this.model.set('range', customRange);\n      this._customRamp.set('range', customRange);\n    }\n  },\n\n  _onSelectItem: function (item) {\n    this._selectRamp(item);\n    this.trigger('selectItem', item, this);\n  },\n\n  _onClickSwitch: function (e) {\n    this.killEvent(e);\n    this.trigger('switch', this);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onClickQuantification: function (e) {\n    this.killEvent(e);\n    this.trigger('selectQuantification', this);\n  },\n\n  _onClickBins: function (e) {\n    this.killEvent(e);\n    this.trigger('selectBins', this);\n  }\n});\n",
    "module.exports = {\n  green: {\n    '3': ['#E5F5F9', '#99D8C9', '#2CA25F'],\n    '4': ['#EDF8FB', '#B2E2E2', '#66C2A4', '#238B45'],\n    '5': ['#EDF8FB', '#B2E2E2', '#66C2A4', '#2CA25F', '#006D2C'],\n    '6': ['#EDF8FB', '#CCECE6', '#99D8C9', '#66C2A4', '#2CA25F', '#006D2C'],\n    '7': ['#EDF8FB', '#D7FAF4', '#CCECE6', '#66C2A4', '#41AE76', '#238B45', '#005824']\n  },\n  blue: {\n    '3': ['#EDF8B1', '#7FCDBB', '#2C7FB8'],\n    '4': ['#FFFFCC', '#A1DAB4', '#41B6C4', '#225EA8'],\n    '5': ['#FFFFCC', '#A1DAB4', '#41B6C4', '#2C7FB8', '#253494'],\n    '6': ['#FFFFCC', '#C7E9B4', '#7FCDBB', '#41B6C4', '#2C7FB8', '#253494'],\n    '7': ['#FFFFCC', '#C7E9B4', '#7FCDBB', '#41B6C4', '#1D91C0', '#225EA8', '#0C2C84']\n  },\n  pink: {\n    '3': ['#E7E1EF', '#C994C7', '#DD1C77'],\n    '4': ['#F1EEF6', '#D7B5D8', '#DF65B0', '#CE1256'],\n    '5': ['#F1EEF6', '#D7B5D8', '#DF65B0', '#DD1C77', '#980043'],\n    '6': ['#F1EEF6', '#D4B9DA', '#C994C7', '#DF65B0', '#DD1C77', '#980043'],\n    '7': ['#F1EEF6', '#D4B9DA', '#C994C7', '#DF65B0', '#E7298A', '#CE1256', '#91003F']\n  },\n  black: {\n    '3': ['#F0F0F0', '#BDBDBD', '#636363'],\n    '4': ['#F7F7F7', '#CCCCCC', '#969696', '#525252'],\n    '5': ['#F7F7F7', '#CCCCCC', '#969696', '#636363', '#252525'],\n    '6': ['#F7F7F7', '#D9D9D9', '#BDBDBD', '#969696', '#636363', '#252525'],\n    '7': ['#F7F7F7', '#D9D9D9', '#BDBDBD', '#969696', '#737373', '#525252', '#252525']\n  },\n  red: {\n    '3': ['#FFEDA0', '#FEB24C', '#F03B20'],\n    '4': ['#FFFFB2', '#FECC5C', '#FD8D3C', '#E31A1C'],\n    '5': ['#FFFFB2', '#FECC5C', '#FD8D3C', '#F03B20', '#BD0026'],\n    '6': ['#FFFFB2', '#FED976', '#FEB24C', '#FD8D3C', '#F03B20', '#BD0026'],\n    '7': ['#FFFFB2', '#FED976', '#FEB24C', '#FD8D3C', '#FC4E2A', '#E31A1C', '#B10026']\n  },\n  inverted_green: {\n    '3': ['#2CA25F', '#99D8C9', '#E5F5F9'],\n    '4': ['#238B45', '#66C2A4', '#B2E2E2', '#EDF8FB'],\n    '5': ['#006D2C', '#2CA25F', '#66C2A4', '#B2E2E2', '#EDF8FB'],\n    '6': ['#006D2C', '#2CA25F', '#66C2A4', '#99D8C9', '#CCECE6', '#EDF8FB'],\n    '7': ['#005824', '#238B45', '#41AE76', '#66C2A4', '#CCECE6', '#D7FAF4', '#EDF8FB']\n  },\n  inverted_blue: {\n    '3': ['#2C7FB8', '#7FCDBB', '#EDF8B1'],\n    '4': ['#225EA8', '#41B6C4', '#A1DAB4', '#FFFFCC'],\n    '5': ['#253494', '#2C7FB8', '#41B6C4', '#A1DAB4', '#FFFFCC'],\n    '6': ['#253494', '#2C7FB8', '#41B6C4', '#7FCDBB', '#C7E9B4', '#FFFFCC'],\n    '7': ['#0C2C84', '#225EA8', '#1D91C0', '#41B6C4', '#7FCDBB', '#C7E9B4', '#FFFFCC']\n  },\n  inverted_pink: {\n    '3': ['#DD1C77', '#C994C7', '#E7E1EF'],\n    '4': ['#CE1256', '#DF65B0', '#D7B5D8', '#F1EEF6'],\n    '5': ['#980043', '#DD1C77', '#DF65B0', '#D7B5D8', '#F1EEF6'],\n    '6': ['#980043', '#DD1C77', '#DF65B0', '#C994C7', '#D4B9DA', '#F1EEF6'],\n    '7': ['#91003F', '#CE1256', '#E7298A', '#DF65B0', '#C994C7', '#D4B9DA', '#F1EEF6']\n  },\n  inverted_black: {\n    '3': ['#636363', '#BDBDBD', '#F0F0F0'],\n    '4': ['#525252', '#969696', '#CCCCCC', '#F7F7F7'],\n    '5': ['#252525', '#636363', '#969696', '#CCCCCC', '#F7F7F7'],\n    '6': ['#252525', '#636363', '#969696', '#BDBDBD', '#D9D9D9', '#F7F7F7'],\n    '7': ['#252525', '#525252', '#737373', '#969696', '#BDBDBD', '#D9D9D9', '#F7F7F7']\n  },\n  inverted_red: {\n    '3': ['#F03B20', '#FEB24C', '#FFEDA0'],\n    '4': ['#E31A1C', '#FD8D3C', '#FECC5C', '#FFFFB2'],\n    '5': ['#BD0026', '#F03B20', '#FD8D3C', '#FECC5C', '#FFFFB2'],\n    '6': ['#BD0026', '#F03B20', '#FD8D3C', '#FEB24C', '#FED976', '#FFFFB2'],\n    '7': ['#B10026', '#E31A1C', '#FC4E2A', '#FD8D3C', '#FEB24C', '#FED976', '#FFFFB2']\n  },\n  spectrum1: {\n    '3': ['#1a9850', '#fff2cc', '#d73027'],\n    '4': ['#1a9850', '#d2ecb4', '#fed6b0', '#d73027'],\n    '5': ['#1a9850', '#8cce8a', '#fff2cc', '#f79272', '#d73027'],\n    '6': ['#1a9850', '#8cce8a', '#d2ecb4', '#fed6b0', '#f79272', '#d73027'],\n    '7': ['#1a9850', '#8cce8a', '#d2ecb4', '#fff2cc', '#fed6b0', '#f79272', '#d73027']\n  },\n  spectrum2: {\n    '3': ['#0080ff', '#fff2cc', '#ff4d4d'],\n    '4': ['#0080ff', '#7fbfff', '#ffa6a6', '#ff4d4d'],\n    '5': ['#0080ff', '#40a0ff', '#fff2cc', '#ff7a7a', '#ff4d4d'],\n    '6': ['#0080ff', '#40a0ff', '#7fbfff', '#ffa6a6', '#ff7a7a', '#ff4d4d'],\n    '7': ['#0080ff', '#40a0ff', '#7fbfff', '#fff2cc', '#ffa6a6', '#ff7a7a', '#ff4d4d']\n  },\n  purple_states: {\n    '3': ['#F1E6F1', '#B379B3', '#8A4E8A'],\n    '4': ['#F1E6F1', '#D8BBD8', '#A05AA0', '#8A4E8A'],\n    '5': ['#F1E6F1', '#D8BBD8', '#B379B3', '#A05AA0', '#8A4E8A'],\n    '6': ['#F1E6F1', '#D8BBD8', '#CCA5CC', '#B379B3', '#A05AA0', '#8A4E8A'],\n    '7': ['#F1E6F1', '#D8BBD8', '#CCA5CC', '#C08FC0', '#B379B3', '#A05AA0', '#8A4E8A']\n  },\n  red_states: {\n    '3': ['#F2D2D3', '#D4686C', '#C1373C'],\n    '4': ['#F2D2D3', '#EBB7B9', '#CC4E52', '#C1373C'],\n    '5': ['#F2D2D3', '#EBB7B9', '#D4686C', '#CC4E52', '#C1373C'],\n    '6': ['#F2D2D3', '#EBB7B9', '#E39D9F', '#D4686C', '#CC4E52', '#C1373C'],\n    '7': ['#F2D2D3', '#EBB7B9', '#E39D9F', '#DB8286', '#D4686C', '#CC4E52', '#C1373C']\n  },\n  blue_states: {\n    '3': ['#ECF0F6', '#6182B5', '#43618F'],\n    '4': ['#ECF0F6', '#B2C2DB', '#4E71A6', '#43618F'],\n    '5': ['#ECF0F6', '#B2C2DB', '#6182B5', '#4E71A6', '#43618F'],\n    '6': ['#ECF0F6', '#B2C2DB', '#9BB0D0', '#6182B5', '#4E71A6', '#43618F'],\n    '7': ['#ECF0F6', '#B2C2DB', '#9BB0D0', '#849EC5', '#6182B5', '#4E71A6', '#43618F']\n  },\n  inverted_purple_states: {\n    '3': ['#8A4E8A', '#B379B3', '#F1E6F1'],\n    '4': ['#8A4E8A', '#A05AA0', '#D8BBD8', '#F1E6F1'],\n    '5': ['#8A4E8A', '#A05AA0', '#B379B3', '#D8BBD8', '#F1E6F1'],\n    '6': ['#8A4E8A', '#A05AA0', '#B379B3', '#CCA5CC', '#D8BBD8', '#F1E6F1'],\n    '7': ['#8A4E8A', '#A05AA0', '#B379B3', '#C08FC0', '#CCA5CC', '#D8BBD8', '#F1E6F1']\n  },\n  inverted_red_states: {\n    '3': ['#C1373C', '#D4686C', '#F2D2D3'],\n    '4': ['#C1373C', '#CC4E52', '#EBB7B9', '#F2D2D3'],\n    '5': ['#C1373C', '#CC4E52', '#D4686C', '#EBB7B9', '#F2D2D3'],\n    '6': ['#C1373C', '#CC4E52', '#D4686C', '#E39D9F', '#EBB7B9', '#F2D2D3'],\n    '7': ['#C1373C', '#CC4E52', '#D4686C', '#DB8286', '#E39D9F', '#EBB7B9', '#F2D2D3']\n  },\n  inverted_blue_states: {\n    '3': ['#43618F', '#6182B5', '#ECF0F6'],\n    '4': ['#43618F', '#4E71A6', '#B2C2DB', '#ECF0F6'],\n    '5': ['#43618F', '#4E71A6', '#6182B5', '#B2C2DB', '#ECF0F6'],\n    '6': ['#43618F', '#4E71A6', '#6182B5', '#9BB0D0', '#B2C2DB', '#ECF0F6'],\n    '7': ['#43618F', '#4E71A6', '#6182B5', '#849EC5', '#9BB0D0', '#B2C2DB', '#ECF0F6']\n  }\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-ListDecoration-itemLink u-flex u-justifySpace u-alignCenter u-actionTextColor ';\n if (isSelected) { \n__p+=' is-selected ';\n } \n__p+='\">\\n  '+\n((__t=( _t('form-components.editors.fill.quantification.methods.' + name) ))==null?'':_.escape(__t))+\n'\\n</div>\\n\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./input-number-value-content-view.tpl');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack',\n    'click .js-bins': '_onClickBins',\n    'click .js-quantification': '_onClickQuantification'\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeForm();\n    this.$el.empty();\n\n    this.$el.append(template({\n      bins: this.model.get('bins'),\n      attribute: this.model.get('attribute'),\n      quantification: this.model.get('quantification')\n    }));\n\n    this._initForm();\n\n    return this;\n  },\n\n  _calculateRangeFromFixed: function (fixed, percent) {\n    percent = percent || 30;\n\n    var span = this.options.max - this.options.min;\n    var delta = fixed / span;\n\n    return [\n      Math.floor(Math.max(this.options.min, fixed - percent * delta)),\n      Math.floor(Math.min(this.options.max, fixed + percent * delta))\n    ];\n  },\n\n  _initForm: function () {\n    var self = this;\n\n    if (this._formView) {\n      this._formView.remove();\n    }\n\n    // when range min === max means we come from a fixed value\n    // calculate the range values based on this\n    var range = this.model.get('range');\n    var min, max;\n\n    min = max = this.model.get('fixed');\n\n    if (range) {\n      min = +range[0];\n      max = +range[1];\n    }\n\n    if (min === max) {\n      var r = this._calculateRangeFromFixed(min);\n      // set the range so changes are propagated\n      min = r[0];\n      max = r[1];\n      this.model.set('range', r);\n    }\n\n    this._formModel = new Backbone.Model({\n      min: min,\n      max: max\n    });\n\n    this._formModel.schema = {\n      min: {\n        type: 'Number',\n        validators: ['required', {\n          type: 'interval',\n          min: self.options.min,\n          max: self.options.max\n        }]\n      },\n      max: {\n        type: 'Number',\n        validators: ['required', {\n          type: 'interval',\n          min: self.options.min,\n          max: self.options.max\n        }]\n      }\n    };\n\n    this._formModel.bind('change', function (input) {\n      this.model.set('range', [(+input.get('min')), (+input.get('max'))]);\n    }, this);\n\n    this._formView = new Backbone.Form({\n      className: 'Editor-boxList',\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$('.js-content').append(this._formView.render().$el);\n  },\n\n  _removeForm: function () {\n    // Backbone.Form removes the view with the following method\n    this._formView && this._formView.remove();\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onClickQuantification: function (e) {\n    this.killEvent(e);\n    this.trigger('selectQuantification', this);\n  },\n\n  _onClickBins: function (e) {\n    this.killEvent(e);\n    this.trigger('selectBins', this);\n  },\n\n  clean: function () {\n    this._removeForm();\n    CoreView.prototype.clean.call(this);\n  }\n});\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar tabPaneTemplate = require('../fill-tab-pane.tpl');\nvar createTextLabelsTabPane = require('../../../../../components/tab-pane/create-text-labels-tab-pane');\nvar InputNumberFixedContentView = require('./input-number-fixed-content-view');\nvar InputNumberValueContentView = require('./input-number-value-content-view');\n\nvar DEFAULT_INPUT_MIN_VALUE = 0;\nvar DEFAULT_INPUT_MAX_VALUE = 100;\nvar DEFAULT_INPUT_STEP_VALUE = 1;\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.columns) throw new Error('columns param is required');\n    this._columns = opts.columns;\n\n    this.listenTo(this.model, 'change:attribute', this._updateRangeValue);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var fixedPane = {\n      name: 'fixed',\n      label: _t('form-components.editors.fill.input-number.fixed'),\n      createContentView: function () {\n        return self._generateFixedContentView();\n      }\n    };\n\n    var valuePane = {\n      name: 'value',\n      label: _t('form-components.editors.fill.input-number.value'),\n      createContentView: function () {\n        return self._generateValueContentView();\n      }\n    };\n\n    this._tabPaneTabs = [];\n\n    if (this.options.editorAttrs && this.options.editorAttrs.hidePanes) {\n      var hidePanes = this.options.editorAttrs.hidePanes;\n      if (!_.contains(hidePanes, 'fixed')) {\n        this._tabPaneTabs.push(fixedPane);\n      }\n      if (!_.contains(hidePanes, 'value')) {\n        this._tabPaneTabs.push(valuePane);\n      }\n    } else {\n      this._tabPaneTabs = [fixedPane, valuePane];\n    }\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          className: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    if (this.model.get('range') && this._tabPaneTabs.length > 1) {\n      this._tabPaneTabs[1].selected = true;\n    }\n\n    this._tabPaneView = createTextLabelsTabPane(this._tabPaneTabs, tabPaneOptions);\n    this.listenTo(this._tabPaneView.collection, 'change:selected', this._onChangeTabPaneViewTab);\n    this.addView(this._tabPaneView);\n    this.$el.append(this._tabPaneView.render().$el);\n  },\n\n  _onChangeTabPaneViewTab: function () {\n    var selectedTabPaneName = this._tabPaneView.getSelectedTabPaneName();\n\n    if (selectedTabPaneName === 'fixed') {\n      this._updateFixedValue();\n    } else {\n      this._updateRangeValue();\n    }\n\n    this.trigger('change', selectedTabPaneName, this);\n  },\n\n  _updateFixedValue: function () {\n    if (this.model.get('range')) {\n      // when coming from range calculate the average\n      var r = this.model.get('range');\n      var avg = 0.5 * (+r[0] + +r[1]);\n      this.model.set('fixed', avg);\n      this.model.unset('range');\n    }\n  },\n\n  _updateRangeValue: function () {\n    if (this.model.get('fixed') !== null && this.model.get('fixed') !== undefined && this.model.get('attribute')) {\n      this.model.set('range', [this.model.get('fixed'), this.model.get('fixed')]);\n      this.model.unset('fixed');\n    }\n  },\n\n  _generateFixedContentView: function () {\n    var editorAttrs = this.options.editorAttrs;\n    return new InputNumberFixedContentView({\n      model: this.model,\n      min: (editorAttrs && editorAttrs.min) || DEFAULT_INPUT_MIN_VALUE,\n      max: (editorAttrs && editorAttrs.max) || DEFAULT_INPUT_MAX_VALUE,\n      step: (editorAttrs && editorAttrs.step) || DEFAULT_INPUT_STEP_VALUE\n    });\n  },\n\n  _generateValueContentView: function () {\n    var editorAttrs = this.options.editorAttrs;\n    return new InputNumberValueContentView({\n      model: this.model,\n      columns: this._columns,\n      min: (editorAttrs && editorAttrs.min) || DEFAULT_INPUT_MIN_VALUE,\n      max: (editorAttrs && editorAttrs.max) || DEFAULT_INPUT_MAX_VALUE\n    });\n  },\n\n  _onChangeValue: function (input) {\n    this.model.set('fixed', input.value);\n  }\n});\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  render: function () {\n    this.clearSubViews();\n    this._removeForm();\n    this.$el.empty();\n    this._initForm();\n    return this;\n  },\n\n  _initForm: function () {\n    this._formModel = new Backbone.Model({\n      value: this.model.get('fixed')\n    });\n\n    this._formModel.schema = {\n      value: {\n        type: 'Number',\n        validators: ['required', {\n          type: 'interval',\n          min: this.options.min,\n          max: this.options.max,\n          step: this.options.step\n        }]\n      }\n    };\n\n    this._formModel.bind('change', function (input) {\n      this.model.set('fixed', input.get('value'));\n    }, this);\n\n    this._formView = new Backbone.Form({\n      className: 'CDB-ListDecoration-itemPadding',\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.append(this._formView.render().$el);\n  },\n\n  _removeForm: function () {\n    // Backbone.Form removes the view with the following method\n    this._formView && this._formView.remove();\n  },\n\n  clean: function () {\n    this._removeForm();\n    CoreView.prototype.clean.call(this);\n  }\n});\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar StackLayoutView = require('../../../../../components/stack-layout/stack-layout-view');\nvar ColumnListView = require('../column-list-view');\nvar quantificationMethodItemTemplate = require('./quantification-method-item.tpl');\nvar InputNumberContentView = require('./input-number-content-view');\nvar DefaultFillSettings = require('../default-fill-settings.json');\n\n/**\n * add the number of classes\n * change the max depending on the min\n * smaller values on top\n */\nvar COLUMN_PANE_INDEX = 0;\nvar MAIN_PAIN_INDEX = 1;\nvar QUANTIFICATION_PANE_INDEX = 2;\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    if (!opts.columns) throw new Error('columns param is required');\n    this._columns = opts.columns;\n\n    this._settings = DefaultFillSettings.number;\n\n    this._setupModel();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _setupModel: function () {\n    var options = {};\n\n    if (!this.model.get('quantification')) {\n      options.quantification = this._settings.quantifications.items[this._settings.quantifications.defaultIndex];\n    }\n\n    if (!this.model.get('bins')) {\n      options.bins = this._settings.bins.items[this._settings.bins.defaultIndex];\n    }\n\n    if (+this.model.get('bins') > +this._settings.bins.items[this._settings.bins.items.length - 1]) {\n      options.bins = this._settings.bins.items[this._settings.bins.items.length - 1];\n    }\n\n    this.model.set(options);\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createInputRampContentView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createInputNumberContentView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createQuantificationListView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createBinsListView(stackLayoutModel, opts).bind(self);\n      }\n    }]);\n\n    this._stackLayoutView = new StackLayoutView({\n      collection: stackViewCollection\n    });\n\n    var position = MAIN_PAIN_INDEX;\n\n    if (!this.model.get('attribute')) {\n      position = COLUMN_PANE_INDEX;\n    } else if (!this.model.get('quantification')) {\n      position = QUANTIFICATION_PANE_INDEX;\n    }\n\n    this._stackLayoutView.model.set('position', position);\n    this.$el.append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n  },\n\n  _createInputRampContentView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      stackLayoutModel: stackLayoutModel,\n      columns: this._columns.filter(function (f) {\n        return f.type === 'number';\n      }),\n      showSearch: true,\n      typeLabel: 'column'\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('attribute', item.get('val'));\n      var step = MAIN_PAIN_INDEX;\n      if (!this.model.get('quantification')) {\n        step = QUANTIFICATION_PANE_INDEX;\n      }\n      this._stackLayoutView.model.goToStep(step);\n    }, this);\n\n    return view;\n  },\n\n  _createInputNumberContentView: function (stackLayoutModel, opts) {\n    var view = new InputNumberContentView({\n      stackLayoutModel: stackLayoutModel,\n      model: this.model,\n      min: this.options.min,\n      max: this.options.max\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('selectQuantification', function (value) {\n      stackLayoutModel.goToStep(2);\n    }, this);\n\n    view.bind('selectBins', function (value) {\n      stackLayoutModel.goToStep(3);\n    }, this);\n\n    return view;\n  },\n\n  _createQuantificationListView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.quantification.title'),\n      stackLayoutModel: stackLayoutModel,\n      columns: this._settings.quantifications.items,\n      itemTemplate: quantificationMethodItemTemplate,\n      showSearch: false\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('quantification', item.get('val'));\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    return view;\n  },\n\n  _createBinsListView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.bins'),\n      stackLayoutModel: stackLayoutModel,\n      columns: this._settings.bins.items\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('bins', item.get('val'));\n      stackLayoutModel.goToStep(1);\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(1);\n    }, this);\n\n    return view;\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"InputColor-modalHeader CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <div class=\"u-flex u-alignStart u-ellipsis\">\\n        <button class=\"u-rSpace u-actionTextColor js-back\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n        <div class=\"u-ellipsis\">\\n          '+\n((__t=( attribute ))==null?'':_.escape(__t))+\n'\\n        </div>\\n      </div>\\n    </li>\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"u-flex u-justifySpace\">\\n        <li class=\"u-flex\">\\n          '+\n((__t=( bins ))==null?'':_.escape(__t))+\n' '+\n((__t=( _t('form-components.editors.fill.input-ramp.buckets', { smart_count: bins }) ))==null?'':_.escape(__t))+\n'\\n          <button class=\"CDB-Shape u-lSpace js-bins\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n        <li class=\"u-flex\">\\n          '+\n((__t=( _t('form-components.editors.fill.quantification.methods.' + quantification) ))==null?'':_.escape(__t))+\n'\\n          <button class=\"CDB-Shape u-lSpace js-quantification\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n<div class=\"js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./input-number.tpl');\nvar InputDialogContent = require('./input-number-dialog-content');\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'CDB-OptionInput-item',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.columns) throw new Error('columns is required');\n    this._columns = opts.columns;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this.options.disabled) {\n      this.$el.addClass('is-disabled');\n    }\n\n    this.$el.html(template({\n      value: this._getValue()\n    }));\n\n    return this;\n  },\n\n  _createContentView: function () {\n    var view = new InputDialogContent({\n      model: this.model,\n      columns: this._columns,\n      editorAttrs: this.options.editorAttrs\n    });\n\n    view.bind('change', this.render, this);\n\n    return view;\n  },\n\n  _onClick: function (e) {\n    if (this.options.disabled) {\n      return;\n    }\n    this.trigger('click', this.model);\n  },\n\n  _initBinds: function () {\n    this.model.set('createContentView', function () {\n      return this._createContentView();\n    }.bind(this));\n\n    this.listenTo(this.model, 'change:selected', this._onToggleSelected);\n    this.listenTo(this.model, 'change:fixed', this._onChangeValue);\n    this.listenTo(this.model, 'change:range', this._onChangeValue);\n  },\n\n  _getValue: function () {\n    // 1.0 -> 1\n    function dropDecimal (f) {\n      return f.replace(/\\.0$/, '');\n    }\n\n    if (this.model.get('range')) {\n      return this.model.get('range').map(function (v) {\n        return dropDecimal((+v).toFixed(1));\n      }).join('..');\n    }\n    return dropDecimal((+this.model.get('fixed')).toFixed(1));\n  },\n\n  _onChangeValue: function () {\n    this.$('.js-value').text(this._getValue());\n  },\n\n  _onToggleSelected: function () {\n    this.$el.toggleClass('is-active', this.model.get('selected'));\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-OptionInput-content js-value\">'+\n((__t=( value ))==null?'':_.escape(__t))+\n'</button>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\n\nBackbone.Form.editors.List.CategoryModel = Backbone.Form.editors.NestedModel.extend({\n\n  initialize: function (options) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, options);\n    EditorHelpers.setOptions(this, options);\n\n    if (!this.form) throw new Error('Missing required option \"form\"');\n    if (!options.schema.model) throw new Error('Missing required \"schema.model\" option for NestedModel editor');\n  },\n\n  render: function () {\n    // Get the constructor for creating the nested form; i.e. the same constructor as used by the parent form\n    var NestedForm = this.form.constructor;\n\n    var data = this.value || {};\n    var NestedModel = this.schema.model;\n\n    // Wrap the data in a model if it isn't already a model instance\n    var modelInstance = (data.constructor === NestedModel) ? data : new NestedModel(data, this.options);\n\n    this.nestedForm = new NestedForm({\n      model: modelInstance,\n      idPrefix: this.id + '_',\n      fieldTemplate: 'nestedField'\n    });\n\n    this._observeFormEvents();\n\n    // Render form\n    this.$el.html(this.nestedForm.render().el);\n\n    if (this.hasFocus) this.trigger('blur', this);\n\n    return this;\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar $ = require('jquery');\nvar _ = require('underscore');\n\n/**\n * A single item in the list\n *\n * @param {editors.List} options.list The List editor instance this item belongs to\n * @param {Function} options.Editor   Editor constructor function\n * @param {String} options.key        Model key\n * @param {Mixed} options.value       Value\n * @param {Object} options.schema     Field schema\n */\nBackbone.Form.editors.List.Item = Backbone.Form.editors.Base.extend({\n\n  events: {\n    'click [data-action=\"remove\"]': function (event) {\n      event.preventDefault();\n      this.list.removeItem(this);\n    },\n    'keydown input[type=text]': function (event) {\n      if (event.keyCode !== 13) return;\n      event.preventDefault();\n      this.list.addItem();\n      this.list.$list.find('> li:last input').focus();\n    }\n  },\n\n  initialize: function (options) {\n    this.list = options.list;\n    this.schema = options.schema || this.list.schema;\n    this.value = options.value;\n    this.Editor = options.Editor || Backbone.Form.editors.Text;\n    this.key = options.key;\n    this.template = options.template || this.schema.itemTemplate || this.constructor.template;\n    this.errorClassName = options.errorClassName || this.constructor.errorClassName;\n    this.form = options.form;\n    this.userModel = options.userModel;\n    this.configModel = options.configModel;\n    this.modals = options.modals;\n  },\n\n  render: function () {\n    // Create editor\n    this.editor = new this.Editor({\n      key: this.key,\n      schema: this.schema,\n      value: this.value,\n      list: this.list,\n      item: this,\n      form: this.form\n    }, {\n      userModel: this.userModel,\n      configModel: this.configModel,\n      modals: this.modals\n    }).render();\n\n    // Create main element\n    var $el = $($.trim(this.template()));\n\n    $el.find('[data-editor]').append(this.editor.el);\n\n    // Replace the entire element so there isn't a wrapper tag\n    this.setElement($el);\n\n    return this;\n  },\n\n  getValue: function () {\n    return this.editor.getValue();\n  },\n\n  setValue: function (value) {\n    this.editor.setValue(value);\n  },\n\n  focus: function () {\n    this.editor.focus();\n  },\n\n  blur: function () {\n    this.editor.blur();\n  },\n\n  remove: function () {\n    this.editor.remove();\n\n    Backbone.View.prototype.remove.call(this);\n  },\n\n  validate: function () {\n    var value = this.getValue();\n    var formValues = this.list.form ? this.list.form.getValue() : {};\n    var validators = this.schema.validators;\n    var getValidator = this.getValidator;\n\n    if (!validators) return null;\n\n    // Run through validators until an error is found\n    var error = null;\n    _.every(validators, function (validator) {\n      error = getValidator(validator)(value, formValues);\n\n      return !!error;\n    });\n\n    // Show/hide error\n    if (error) {\n      this.setError(error);\n    } else {\n      this.clearError();\n    }\n\n    // Return error to be aggregated by list\n    return error ? error : null; // eslint-disable-line\n  },\n\n  /**\n   * Show a validation error\n   */\n  setError: function (err) {\n    this.$el.addClass(this.errorClassName);\n    this.$el.attr('title', err.message);\n  },\n\n  /**\n   * Hide validation errors\n   */\n  clearError: function () {\n    this.$el.removeClass(this.errorClassName);\n    this.$el.attr('title', null);\n  }\n}, {\n\n  /*eslint-disable */\n  template: _.template('\\\n      <div>\\\n        <span data-editor></span>\\\n        <button type=\"button\" data-action=\"remove\">&times;</button>\\\n      </div>\\\n    ', null, Backbone.Form.templateSettings),\n  errorClassName: 'error'\n  /*eslint-enable */\n});\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar $ = require('jquery');\nvar _ = require('underscore');\n\nBackbone.Form.editors.List = Backbone.Form.editors.Base.extend({\n\n  events: {\n    'click [data-action=\"add\"]': function (event) {\n      event.preventDefault();\n      this.addItem(null, true);\n    }\n  },\n\n  initialize: function (options) {\n    options = options || {};\n\n    var editors = Backbone.Form.editors;\n\n    editors.Base.prototype.initialize.call(this, options);\n    EditorHelpers.setOptions(this, options);\n\n    var schema = this.schema;\n    if (!schema) throw new Error(\"Missing required option 'schema'\");\n\n    this.template = options.template || schema.listTemplate || this.constructor.template;\n\n    // Determine the editor to use\n    this.Editor = (function () {\n      var type = schema.itemType;\n\n      // Default to Text\n      if (!type) return editors.Text;\n\n      // Use List-specific version if available\n      if (editors.List[type]) return editors.List[type];\n\n      // Or whichever was passed\n      return editors[type];\n    })();\n\n    this._userModel = this.options.userModel;\n    this._configModel = this.options.configModel;\n    this._modals = this.options.modals;\n\n    this.items = [];\n  },\n\n  render: function () {\n    var self = this;\n    var value = this.value || [];\n\n    // Create main element\n    var $el = $($.trim(this.template()));\n\n    // Store a reference to the list (item container)\n    this.$list = $el.is('[data-items]') ? $el : $el.find('[data-items]');\n\n    // Add existing items\n    if (value.length) {\n      _.each(value, function (itemValue) {\n        self.addItem(itemValue);\n      });\n    } else {\n      // If no existing items create an empty one, unless the editor specifies otherwise\n      if (!this.Editor.isAsync) this.addItem();\n    }\n\n    this.setElement($el);\n    this.$el.attr('id', this.id);\n    this.$el.attr('name', this.key);\n\n    if (this.hasFocus) this.trigger('blur', this);\n\n    return this;\n  },\n\n  /**\n   * Add a new item to the list\n   * @param {Mixed} [value]           Value for the new item editor\n   * @param {Boolean} [userInitiated] If the item was added by the user clicking 'add'\n   */\n  addItem: function (value, userInitiated) {\n    var self = this;\n    var editors = Backbone.Form.editors;\n\n    // Create the item\n    var item = new editors.List.Item({\n      list: this,\n      form: this.form,\n      schema: this.schema,\n      value: value,\n      Editor: this.Editor,\n      key: this.key,\n      userModel: this._userModel,\n      configModel: this._configModel,\n      modals: this._modals\n    }).render();\n\n    var _addItem = function () {\n      self.items.push(item);\n      self.$list.append(item.el);\n\n      item.editor.on('all', function (event) {\n        if (event === 'change') return;\n\n        // args = [\"key:change\", itemEditor, fieldEditor]\n        var args = _.toArray(arguments);\n        args[0] = 'item:' + event;\n        args.splice(1, 0, self);\n        // args = [\"item:key:change\", this=listEditor, itemEditor, fieldEditor]\n\n        editors.List.prototype.trigger.apply(this, args);\n      }, self);\n\n      item.editor.on('change', function () {\n        if (!item.addEventTriggered) {\n          item.addEventTriggered = true;\n          this.trigger('add', this, item.editor);\n        }\n        this.trigger('item:change', this, item.editor);\n        this.trigger('change', this);\n      }, self);\n\n      item.editor.on('focus', function () {\n        if (this.hasFocus) return;\n        this.trigger('focus', this);\n      }, self);\n      item.editor.on('blur', function () {\n        if (!this.hasFocus) return;\n        var self = this;\n        setTimeout(function () {\n          if (_.find(self.items, function (item) {\n            return item.editor.hasFocus;\n          })) return;\n          self.trigger('blur', self);\n        }, 0);\n      }, self);\n\n      if (userInitiated || value) {\n        item.addEventTriggered = true;\n      }\n\n      if (userInitiated) {\n        self.trigger('add', self, item.editor);\n        self.trigger('change', self);\n      }\n    };\n\n    // Check if we need to wait for the item to complete before adding to the list\n    if (this.Editor.isAsync) {\n      item.editor.on('readyToAdd', _addItem, this);\n    } else {\n      // Most editors can be added automatically\n      _addItem();\n      item.editor.focus();\n    }\n\n    return item;\n  },\n\n  /**\n   * Remove an item from the list\n   * @param {List.Item} item\n   */\n  removeItem: function (item) {\n    // Confirm delete\n    var confirmMsg = this.schema.confirmDelete;\n    if (confirmMsg && !confirm(confirmMsg)) return; // eslint-disable-line\n\n    var index = _.indexOf(this.items, item);\n\n    this.items[index].remove();\n    this.items.splice(index, 1);\n\n    if (item.addEventTriggered) {\n      this.trigger('remove', this, item.editor);\n      this.trigger('change', this);\n    }\n\n    if (!this.items.length && !this.Editor.isAsync) this.addItem();\n  },\n\n  getValue: function () {\n    var values = _.map(this.items, function (item) {\n      return item.getValue();\n    });\n\n    // Filter empty items\n    return _.without(values, undefined, '');\n  },\n\n  setValue: function (value) {\n    this.value = value;\n    this.render();\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n\n    if (this.items[0]) this.items[0].editor.focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n\n    var focusedItem = _.find(this.items, function (item) {\n      return item.editor.hasFocus;\n    });\n\n    if (focusedItem) focusedItem.editor.blur();\n  },\n\n  /**\n   * Override default remove function in order to remove item views\n   */\n  remove: function () {\n    _.invoke(this.items, 'remove');\n\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  },\n\n  /**\n   * Run validation\n   *\n   * @return {Object|Null}\n   */\n  validate: function () {\n    if (!this.validators) return null;\n\n    // Collect errors\n    var errors = _.map(this.items, function (item) {\n      return item.validate();\n    });\n\n    // Check if any item has errors\n    var hasErrors = !!_.compact(errors).length;\n    if (!hasErrors) return null;\n\n    // If so create a shared error\n    var fieldError = {\n      type: 'list',\n      message: 'Some of the items in the list failed validation',\n      errors: errors\n    };\n\n    return fieldError;\n  }\n}, {\n\n  /*eslint-disable */\n  template: _.template('\\\n      <div>\\\n        <div data-items></div>\\\n        <button type=\"button\" data-action=\"add\">Add</button>\\\n      </div>\\\n    ', null, Backbone.Form.templateSettings)\n  /*eslint-enable */\n});\n",
    "var CustomListItemView = require('../../../custom-list/custom-list-item-view');\nvar _ = require('underscore');\n\nmodule.exports = CustomListItemView.extend({\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    this.$el.append(\n      this.options.template(\n        _.extend(\n          {\n            typeLabel: this.options.typeLabel,\n            isSelected: this.model.get('selected'),\n            name: this.model.getName(),\n            val: this.model.getValue()\n          },\n          this.model.attributes\n        )\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-ListDecoration-itemLink u-ellipsis u-actionTextColor\" title=\"'+\n((__t=( val ))==null?'':_.escape(__t))+\n'\">\\n  ';\n if (typeof type != 'undefined' && type === 'node') { \n__p+='\\n    <div class=\"u-flex\">\\n      <span\\n        class=\"SelectorLayer-letter CDB-Text CDB-Size-small u-whiteTextColor u-rSpace u-upperCase\"\\n        style=\"background-color: '+\n((__t=( color ))==null?'':_.escape(__t))+\n';\">'+\n((__t=( val ))==null?'':_.escape(__t))+\n'</span>\\n      <p class=\"CDB-Text CDB-Size-medium u-ellipsis u-flex\">\\n        '+\n((__t=( nodeTitle ))==null?'':_.escape(__t))+\n'<span class=\"u-altTextColor u-lSpace u-ellipsis\">'+\n((__t=( layerName ))==null?'':_.escape(__t))+\n'</span>\\n      </p>\\n    </div>\\n  ';\n } else { \n__p+='\\n    '+\n((__t=( val ))==null?'':_.escape(__t))+\n'\\n  ';\n } \n__p+='\\n</button>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (typeof isLoading != 'undefined' && isLoading) { \n__p+='\\n  <div class=\"u-flex\">\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n    <span class=\"u-lSpace u-secondaryTextColor\">'+\n((__t=( _t('components.backbone-forms.select.loading') ))==null?'':_.escape(__t))+\n'</span>\\n  </div>\\n';\n } else { \n__p+='\\n  ';\n if (typeof type != 'undefined' && type === 'node') { \n__p+='\\n    <div class=\"u-flex\">\\n      <span\\n        class=\"SelectorLayer-letter CDB-Text CDB-Size-small u-whiteTextColor u-rSpace u-upperCase\"\\n        style=\"background-color: '+\n((__t=( color ))==null?'':_.escape(__t))+\n';\">'+\n((__t=( val ))==null?'':_.escape(__t))+\n'</span>\\n        <p class=\"CDB-Text CDB-Size-medium u-ellipsis u-flex\" title=\"'+\n((__t=( nodeTitle ))==null?'':_.escape(__t))+\n' - '+\n((__t=( layerName ))==null?'':_.escape(__t))+\n'\">\\n          '+\n((__t=( nodeTitle ))==null?'':_.escape(__t))+\n' <span class=\"u-altTextColor u-lSpace u-ellipsis\">'+\n((__t=( layerName ))==null?'':_.escape(__t))+\n'</span>\\n        </p>\\n    </div>\\n  ';\n } else { \n__p+='\\n    '+\n((__t=( label ))==null?'':_.escape(__t))+\n'\\n  ';\n } \n__p+='\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar NodeDatasetItemView = require('./node-dataset-item-view');\nvar nodeDatasetSelectedTemplate = require('./node-dataset-selected.tpl');\nvar nodeDatasetItemTemplate = require('./node-dataset-item.tpl');\n\nBackbone.Form.editors.NodeDataset = Backbone.Form.editors.Select.extend({\n\n  options: {\n    selectedItemTemplate: nodeDatasetSelectedTemplate,\n    itemListTemplate: nodeDatasetItemTemplate,\n    customListItemView: NodeDatasetItemView\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar template = require('./number.tpl');\nvar EditorHelpers = require('../editor-helpers-extend');\nrequire('jquery');\nrequire('jquery-ui');\n\nvar UP_ARROW_KEY_CODE = 38;\nvar BOTTOM_ARROW_KEY_CODE = 40;\nvar SPACE_KEY_CODE = 32;\nvar ENTER_KEY_CODE = 13;\n\nvar SMALL_INCREMENT = 1;\nvar BIG_INCREMENT = 10;\n\nBackbone.Form.editors.Number = Backbone.Form.editors.Base.extend({\n\n  tagName: 'ul',\n  className: 'CDB-OptionInput-container CDB-OptionInput-container--noMargin u-grow',\n\n  // backbone-forms 0.14.1 has a 'number' validator:\n  // https://github.com/powmedia/backbone-forms/blob/v0.14.1/src/validators.js#L64\n  // We're on 0.14.0 so we have to use a 'regexp' validator\n  options: {\n    min: 0,\n    max: 10,\n    step: 1,\n    showSlider: true,\n    validators: [{\n      type: 'regexp',\n      regexp: /^[+-]?((\\.\\d+)|(\\d+(\\.\\d+)?))$/,\n      message: _t('editor.edit-feature.valid')\n    }]\n  },\n\n  events: {\n    'keydown .js-input': '_onInputKeyDown',\n    'keyup .js-input': '_onInputKeyUp',\n    focus: function () {\n      this.trigger('focus', this);\n    },\n    blur: function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    // Setting min, max and step from validators, if exists.\n    this._validators = opts.validators || (opts.schema && opts.schema.validators);\n    if (this._validators && this._validators[1]) {\n      this.options.min = this._validators[1].min;\n      this.options.max = this._validators[1].max;\n      this.options.step = this._validators[1].step;\n    }\n\n    this._initViews();\n  },\n\n  _initViews: function () {\n    var placeholder = (this.value === null) ? 'null' : '';\n\n    this.$el.html(\n      template({\n        value: this.value,\n        isDisabled: this.options.disabled,\n        hasSlider: this.options.showSlider,\n        isFormatted: this.options.isFormatted,\n        placeholder: placeholder\n      })\n    );\n\n    if (this.options.showSlider) {\n      this.$('.js-slider').slider({\n        range: 'min',\n        value: this.value,\n        min: this.options.min,\n        max: this.options.max,\n        step: this.options.step,\n        orientation: 'horizontal',\n        disabled: this.options.disabled,\n        slide: this._onSlideChange.bind(this),\n        stop: this._onSlideStop.bind(this)\n      });\n    }\n\n    this.$el.toggleClass('CDB-OptionInput-container--noSlider', !!this.options.showSlider);\n  },\n\n  _onSlideChange: function (ev, ui) {\n    this.value = ui.value;\n    this.$('.js-input').val(this.value);\n  },\n\n  _onSlideStop: function (ev, ui) {\n    this.trigger('change', this);\n  },\n\n  _onInputKeyDown: function (e) {\n    var value = +this.getValue();\n    var inc = SMALL_INCREMENT;\n    var $input = this.$('.js-input');\n\n    if (e.shiftKey === true) {\n      inc = BIG_INCREMENT;\n    }\n\n    switch (e.which) {\n      case SPACE_KEY_CODE:\n      case ENTER_KEY_CODE:\n        return false;\n      case UP_ARROW_KEY_CODE:\n        value += inc;\n        $input.val(value);\n        break;\n      case BOTTOM_ARROW_KEY_CODE:\n        value -= inc;\n        $input.val(value);\n        break;\n      default:\n        // Any other case!\n    }\n  },\n\n  _hasSlider: function () {\n    return this.options.showSlider && this.$('.js-slider').data('ui-slider');\n  },\n\n  _onInputKeyUp: function () {\n    var value = this.$('.js-input').val();\n    if (this._hasSlider()) {\n      this.$('.js-slider').slider('value', value);\n    }\n\n    this.value = value;\n    this.trigger('change', this);\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n    this.$('.js-input').focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n    this.$('.js-input').blur();\n  },\n\n  getValue: function () {\n    var val = this.$('.js-input').val();\n\n    return (val === '') ? null : +val;\n  },\n\n  setValue: function (value) {\n    if (this._hasSlider()) {\n      this.$('.js-slider').slider('value', value);\n    }\n\n    this.$('.js-input').val(value);\n    this.value = value;\n  },\n\n  _destroySlider: function () {\n    if (this._hasSlider()) {\n      this.$('.js-slider').slider('destroy');\n    }\n  },\n\n  remove: function () {\n    this._destroySlider();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (hasSlider) { \n__p+='\\n  <li class=\"CDB-OptionInput-item CDB-OptionInput-item--noSeparator\">\\n    <div class=\"UISlider js-slider\"></div>\\n  </li>\\n';\n } \n__p+='\\n<li class=\"CDB-OptionInput-item\">\\n  <input type=\"text\" class=\"CDB-InputText ';\n if (isFormatted) { \n__p+='is-number';\n } \n__p+=' ';\n if (isDisabled) { \n__p+='is-disabled';\n } \n__p+=' js-input\" ';\n if (isDisabled) { \n__p+='readonly';\n } \n__p+=' value=\"'+\n((__t=( value ))==null?'':_.escape(__t))+\n'\" placeholder=\"'+\n((__t=( placeholder ))==null?'':_.escape(__t))+\n'\" />\\n</li>\\n';\n}\nreturn __p;\n};\n",
    "var CustomListCollection = require('../../../custom-list/custom-list-collection');\nvar _ = require('underscore');\n\n/*\n *  Custom list collection, it parses pairs like:\n *\n *  [{ val, label }]\n *  [\"string\"]\n */\n\nmodule.exports = CustomListCollection.extend({\n\n  search: function (query) {\n    query = query.toLowerCase();\n\n    return _(this.filter(function (model) {\n      var val = model.getName().toLowerCase();\n      var type = model.get('type').toLowerCase();\n      return ~val.indexOf(query) && type === 'number';\n    }));\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<p class=\"CDB-Text CDB-Size-medium u-altTextColor Editor-dropDownInfoText\">\\n  '+\n((__t=( _t('components.backbone-forms.operators.count-message') ))==null?'':_.escape(__t))+\n'\\n</p>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    visible: false,\n    operator: 'count',\n    attribute: ''\n  },\n\n  isValidOperator: function () {\n    var operator = this.get('operator');\n    var attribute = this.get('attribute');\n\n    if (operator === 'count') {\n      return true;\n    } else {\n      if (operator && attribute) {\n        return true;\n      }\n      return false;\n    }\n  }\n\n});\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar CustomListView = require('../../../custom-list/custom-view');\nvar OperatorsListModel = require('./operators-list-model');\nvar emptyTemplate = require('./operators-list-count.tpl');\nvar template = require('./operators-list.tpl');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Editor-dropdown Editor-boxModal Editor-dropdownOperators',\n  tagName: 'div',\n\n  events: {\n    'change input[name=\"operator\"]': '_onOperationChange'\n  },\n\n  initialize: function (opts) {\n    this.model = new OperatorsListModel({\n      operator: opts.operator,\n      attribute: opts.attribute,\n      visible: false\n    });\n\n    if (opts.attribute) {\n      this.collection.setSelected(opts.attribute);\n    }\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.append(\n      template({\n        operator: this.model.get('operator')\n      })\n    );\n    this._renderList();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:operator change:attribute', _.debounce(this._onModelChange.bind(this), 10));\n    this.model.bind('change:visible', function (mdl, isVisible) {\n      this._toggleVisibility();\n\n      if (!isVisible) {\n        this._destroyList();\n        this.$('.js-list').html(emptyTemplate());\n      } else {\n        this.render();\n      }\n    }, this);\n    this.collection.bind('change:selected', this._onAttributeSelected, this);\n    this.add_related_model(this.collection);\n  },\n\n  _hasList: function () {\n    return !!this._listView;\n  },\n\n  _renderList: function () {\n    if (this.model.get('operator') !== 'count') {\n      if (this._hasList()) {\n        return;\n      }\n\n      this._listView = new CustomListView({\n        className: 'CDB-Dropdown-options CDB-Text CDB-Size-medium',\n        collection: this.collection,\n        showSearch: true,\n        typeLabel: this.options.keyAttr\n      });\n      this.$('.js-list').html(this._listView.render().el);\n    } else {\n      this._destroyList();\n      this.$('.js-list').html(emptyTemplate());\n    }\n  },\n\n  _destroyList: function () {\n    if (this._hasList()) {\n      this.removeView(this._listView);\n      this._listView.clean();\n      delete this._listView;\n    }\n  },\n\n  _onModelChange: function () {\n    if (this.model.isValidOperator()) {\n      this.trigger('change', this.model.toJSON(), this);\n    }\n  },\n\n  _onOperationChange: function (ev) {\n    var $input = $(ev.target);\n    var operator = $input.val();\n\n    if (operator === 'count') {\n      this.model.set('attribute', '');\n      this.collection.removeSelected();\n    }\n\n    this.model.set('operator', operator);\n\n    this._renderList();\n  },\n\n  _onAttributeSelected: function (mdl) {\n    if (mdl.get('selected')) {\n      this.model.set('attribute', mdl.getValue());\n    }\n  },\n\n  _toggleVisibility: function () {\n    this.$el.toggleClass('is-visible', !!this.model.get('visible'));\n  },\n\n  show: function () {\n    this.model.set('visible', true);\n  },\n\n  hide: function () {\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  remove: function () {\n    this._destroyList();\n    this.$el.empty();\n    CoreView.prototype.remove.call(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"Editor-dropdownCalculations CDB-Text is-semibold\">\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"count\" ';\n if (operator === 'count') { \n__p+='checked';\n } \n__p+='>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">'+\n((__t=( _t('operators.count') ))==null?'':_.escape(__t))+\n'</label>\\n  </li>\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"sum\" ';\n if (operator === 'sum') { \n__p+='checked';\n } \n__p+='>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">'+\n((__t=( _t('operators.sum') ))==null?'':_.escape(__t))+\n'</label>\\n  </li>\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"avg\" ';\n if (operator === 'avg') { \n__p+='checked';\n } \n__p+='>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">'+\n((__t=( _t('operators.avg') ))==null?'':_.escape(__t))+\n'</label>\\n  </li>\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"max\" ';\n if (operator === 'max') { \n__p+='checked';\n } \n__p+='>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">'+\n((__t=( _t('operators.max') ))==null?'':_.escape(__t))+\n'</label>\\n  </li>\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"min\" ';\n if (operator === 'min') { \n__p+='checked';\n } \n__p+='>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">'+\n((__t=( _t('operators.min') ))==null?'':_.escape(__t))+\n'</label>\\n  </li>\\n</ul>\\n<div class=\"js-list\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar OperatorListView = require('./operators-list-view');\nvar OperatorListCollection = require('./operators-list-collection');\nvar template = require('./operators.tpl');\nvar ENTER_KEY_CODE = 13;\nvar PopupManager = require('../../../popup-manager');\n\nBackbone.Form.editors.Operators = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'Editor-formSelect u-ellipsis',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.collection = new OperatorListCollection(this.options.options);\n    this.dialogMode = this.options.dialogMode || 'nested';\n\n    this._initViews();\n    this.setValue(this.model.get(this.options.keyAttr));\n    this._initBinds();\n  },\n\n  _initViews: function () {\n    var value = this.model.get(this.options.keyAttr);\n\n    this.$el.append(\n      $('<div>').addClass('js-operator')\n    );\n\n    this._setOperatorTemplate();\n\n    this._operatorsListView = new OperatorListView({\n      operator: value.operator,\n      attribute: value.attribute,\n      collection: this.collection\n    });\n    this._operatorsListView.bind('change', this._onOperatorsChange, this);\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._operatorsListView.$el);\n    this._popupManager.append(this.dialogMode);\n\n    if (this.options.disabled) {\n      this.undelegateEvents();\n    }\n  },\n\n  _setOperatorTemplate: function () {\n    this.$('.js-operator').html(\n      template({\n        name: this._getOperatorsTextValue(),\n        disabled: this.options.disabled,\n        keyAttr: this.options.keyAttr\n      })\n    );\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._operatorsListView.hide();\n      this._popupManager.untrack();\n    }.bind(this);\n\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n  },\n\n  _onOperatorsChange: function (data) {\n    this.model.set(this.options.keyAttr, data);\n    this._setOperatorTemplate();\n    this.$('.js-button').focus();\n    this.trigger('change', this);\n  },\n\n  _getOperatorsTextValue: function () {\n    var value = this.model.get(this.options.keyAttr);\n    if (value && value.operator) {\n      return value.operator.toUpperCase() + (value.attribute ? '(' + value.attribute + ')' : '');\n    } else {\n      return '';\n    }\n  },\n\n  _onButtonClick: function (ev) {\n    this._operatorsListView.toggle();\n    this._operatorsListView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n  },\n\n  _onButtonKeyDown: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      ev.preventDefault();\n      if (!this._operatorsListView.isVisible()) {\n        ev.stopPropagation();\n        this._operatorsListView.toggle();\n        this._popupManager.track();\n      } else {\n        this._popupManager.untrack();\n      }\n    }\n  },\n\n  getValue: function () {\n    var data = this.model.get(this.options.keyAttr);\n    return _.omit(data, 'visible');\n  },\n\n  setValue: function (value) {\n    var textValue = this._getOperatorsTextValue();\n    this.value = textValue;\n    this._setOperatorTemplate();\n  },\n\n  remove: function () {\n    this._popupManager && this._popupManager.destroy();\n    this._operatorsListView && this._operatorsListView.clean();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-InputText CDB-Text is-cursor js-button u-ellipsis\\n  ';\n if (disabled) { \n__p+=' is-disabled ';\n } \n__p+='\\n  ';\n if (!name) { \n__p+=' is-empty ';\n } \n__p+='\"\\n  tabindex=\"0\">\\n  '+\n((__t=( name || _t('components.backbone-forms.select.placeholder', { keyAttr: keyAttr }) ))==null?'':_.escape(__t))+\n'\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar template = require('./radio.tpl');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar TipsyTooltipView = require('../../../tipsy-tooltip-view');\n\nBackbone.Form.editors.Radio = Backbone.Form.editors.Radio.extend({\n\n  className: 'CDB-Text CDB-Size-medium u-flex u-alignCenter',\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.apply(this, arguments);\n    EditorHelpers.setOptions(this, opts);\n  },\n\n  render: function () {\n    this.setOptions(this.schema.options); // It comes from the default Select editor (not ours)\n    this._setHelp();\n    return this;\n  },\n\n  _setHelp: function () {\n    var containsHelp = _.find(this.schema.options, function (option) {\n      return option.help;\n    });\n\n    if (containsHelp) {\n      this._helpTooltip = this._createTooltip({\n        $el: this.$('.js-help')\n      });\n    }\n  },\n\n  _createTooltip: function (opts) {\n    return new TipsyTooltipView({\n      el: opts.$el || this.$el,\n      gravity: opts.gravity || 's',\n      className: opts.className || '',\n      offset: opts.offset || 0,\n      title: function () {\n        return opts.msg || $(this).data('tooltip');\n      }\n    });\n  },\n\n  getValue: function () {\n    var value = this.$('input[type=radio]:checked').val();\n\n    return (value === '') ? null : value;\n  },\n\n  _arrayToHtml: function (array) {\n    var selectedVal = this.form.model.get(this.key);\n\n    var items = _.map(array, function (option, index) {\n      var val = option.val;\n\n      var item = {\n        name: this.getName(),\n        value: (val === null) ? '' : val.toString(),\n        help: option.help,\n        id: this.id,\n        label: option.label,\n        className: option.className\n      };\n\n      // Can't be selected and disabled simultaneously\n      if (selectedVal === val) {\n        item.selected = true;\n      } else {\n        item.disabled = option.disabled;\n      }\n\n      return item;\n    }, this);\n\n    return template({\n      items: items\n    });\n  },\n\n  remove: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n _.each(items, function(item, index) { \n__p+='\\n  <li class=\"u-flex u-alignCenter '+\n((__t=( (index === (items.length - 1)) ? '' : 'u-rSpace--xl' ))==null?'':_.escape(__t))+\n'\">\\n    <input type=\"radio\" class=\"CDB-Radio u-iBlock';\n if (item.className) { \n__p+=' '+\n((__t=( item.className ))==null?'':_.escape(__t))+\n' ';\n } \n__p+='\"\\n    name=\"'+\n((__t=( item.name ))==null?'':_.escape(__t))+\n'\" value=\"'+\n((__t=( item.value ))==null?'':_.escape(__t))+\n'\" id=\"'+\n((__t=( item.id ))==null?'':_.escape(__t))+\n'\" \\n        ';\n if (item.selected) { \n__p+='\\n          checked=\"checked\"\\n        ';\n } else if (item.disabled) { \n__p+='\\n          disabled=\"disabled\"\\n        ';\n } \n__p+='\\n      />\\n    <span class=\"u-rSpace CDB-Radio-face\"></span>\\n      ';\n if (item.help) { \n__p+='\\n        <span class=\"js-help is-underlined u-lSpace\" data-tooltip=\"'+\n((__t=( item.help ))==null?'':_.escape(__t))+\n'\">\\n      ';\n } \n__p+='\\n      '+\n((__t=( item.label ))==null?'':_.escape(__t))+\n'\\n      ';\n if (item.help) { \n__p+='\\n        </span>\\n      ';\n } \n__p+='\\n  </li>\\n';\n }); \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar _ = require('underscore');\nvar CustomListView = require('../../../custom-list/custom-view');\nvar CustomListCollection = require('../../../custom-list/custom-list-multi-collection');\nvar selectedItemTemplate = require('./select-item.tpl');\nvar CustomListItemView = require('../../../custom-list/custom-list-multi-item-view');\nvar itemListTemplate = require('../../../custom-list/custom-list-item-with-checkbox.tpl');\nvar template = require('./select.tpl');\nvar PopupManager = require('../../../popup-manager');\n\nvar ENTER_KEY_CODE = 13;\n\nBackbone.Form.editors.MultiSelect = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'u-ellipsis Editor-formSelect',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  options: {\n    selectedItemTemplate: selectedItemTemplate,\n    itemListTemplate: itemListTemplate,\n    customListItemView: CustomListItemView\n  },\n\n  initialize: function (opts) {\n    EditorHelpers.setOptions(this, opts);\n\n    this.collection = new CustomListCollection(opts.schema.options);\n    this.dialogMode = this.options.dialogMode || 'nested';\n\n    this._initViews();\n    this.setValue(this.model.get(opts.key));\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n\n    this._initBinds();\n  },\n\n  _getLabel: function () {\n    var itemCount = _.compact(this.collection.pluck('selected')).length;\n    return _t('components.backbone-forms.select.selected', { count: itemCount });\n  },\n\n  _initViews: function () {\n    var isLoading = this.options.loading;\n    var isEmpty = !this.collection.length;\n    var isDisabled = !isEmpty ? this.options.disabled : true;\n    var name = this._getLabel();\n    var isNull = name === null;\n    var label = isNull ? 'null' : name;\n\n    this.$el.html(\n      template({\n        label: label,\n        keyAttr: this.options.keyAttr,\n        isDisabled: isDisabled,\n        isLoading: isLoading,\n        isEmpty: isEmpty,\n        isNull: isNull,\n        placeholder: null\n      })\n    );\n\n    if (isDisabled) {\n      this.undelegateEvents();\n    }\n\n    this._listView = new CustomListView({\n      collection: this.collection,\n      showSearch: this.options.showSearch,\n      typeLabel: this.options.keyAttr,\n      itemTemplate: this.options.itemListTemplate,\n      itemView: this.options.customListItemView,\n      searchPlaceholder: null\n    });\n\n    this._listView.bind('hidden', this._onHide, this);\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._listView.$el);\n    this._popupManager.append(this.dialogMode);\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._listView.hide();\n      this._popupManager.untrack();\n    }.bind(this);\n\n    this.collection.bind('change:selected', this._onItemSelected, this);\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n  },\n\n  _onItemSelected: function (mdl) {\n    this._renderButton(mdl).focus();\n    this.trigger('change', this);\n  },\n\n  _onButtonClick: function (ev) {\n    this._listView.toggle();\n    this._listView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n  },\n\n  _onButtonKeyDown: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      ev.preventDefault();\n      if (!this._listView.isVisible()) {\n        ev.stopPropagation();\n        this._listView.toggle();\n        this._popupManager.track();\n      } else {\n        this._popupManager.untrack();\n      }\n    }\n  },\n\n  _getSelectedValues: function () {\n    return this.collection.chain().map(function (m) { return m.get('selected') ? m.get('val') : null; }).compact().value();\n  },\n\n  getValue: function () {\n    var values = this._getSelectedValues();\n    if (values.length > 0) {\n      return values;\n    }\n    return;\n  },\n\n  setValue: function (value) {\n    if (value) {\n      var selectedModel = this.collection.setSelected(value);\n\n      if (selectedModel) {\n        this._renderButton(selectedModel);\n      }\n    }\n  },\n\n  _renderButton: function (mdl) {\n    var button = this.$('.js-button');\n    var data = _.extend({}, mdl.attributes, { label: this._getLabel() });\n    var $html = this.options.selectedItemTemplate(data);\n\n    button\n      .removeClass('is-empty')\n      .html($html);\n\n    return button;\n  },\n\n  _onHide: function () {\n    if (this._getSelectedValues().length > 0) {\n      this.trigger('change', this);\n    }\n  },\n\n  remove: function () {\n    this._popupManager && this._popupManager.destroy();\n    this._listView && this._listView.clean();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n});\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar _ = require('underscore');\nvar CustomListView = require('../../../custom-list/custom-view');\nvar CustomListCollection = require('../../../custom-list/custom-list-collection');\nvar selectedItemTemplate = require('./select-item.tpl');\nvar CustomListItemView = require('../../../custom-list/custom-list-item-view');\nvar itemListTemplate = require('../../../custom-list/custom-list-item.tpl');\nvar template = require('./select.tpl');\nvar PopupManager = require('../../../popup-manager');\n\nvar ENTER_KEY_CODE = 13;\n\nBackbone.Form.editors.Select = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'u-ellipsis Editor-formSelect',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  options: {\n    selectedItemTemplate: selectedItemTemplate,\n    itemListTemplate: itemListTemplate,\n    customListItemView: CustomListItemView\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.template = opts.template || template;\n    this.dialogMode = this.options.dialogMode || 'nested';\n    this.collection = new CustomListCollection(this.options.options);\n    this._initViews();\n\n    this.setValue(this.model.get(this.options.keyAttr));\n\n    this._initBinds();\n  },\n\n  _initViews: function () {\n    var isLoading = this.options.loading;\n    var isEmpty = !this.collection.length;\n    var isDisabled = !isEmpty ? this.options.disabled : true;\n    var name = this.model.get(this.options.keyAttr);\n    var isNull = name === null;\n    var label = isNull ? 'null' : name;\n    var placeholder = this.options.placeholder;\n    var typeLabel = this.options.keyAttr;\n\n    this.$el.html(\n      this.template({\n        label: label,\n        keyAttr: this.options.keyAttr,\n        placeholder: placeholder,\n        isDisabled: isDisabled,\n        isLoading: isLoading,\n        isEmpty: isEmpty,\n        isNull: isNull\n      })\n    );\n\n    if (isDisabled) {\n      this.undelegateEvents();\n    }\n\n    this._listView = new CustomListView({\n      collection: this.collection,\n      showSearch: this.options.showSearch,\n      allowFreeTextInput: this.options.allowFreeTextInput,\n      typeLabel: typeLabel,\n      itemTemplate: this.options.itemListTemplate,\n      itemView: this.options.customListItemView,\n      position: this.options.position,\n      searchPlaceholder: this.options.searchPlaceholder\n    });\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._listView.$el);\n    this._popupManager.append(this.dialogMode);\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._listView.hide();\n      this._popupManager.untrack();\n    }.bind(this);\n\n    this.collection.bind('change:selected', this._onItemSelected, this);\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n  },\n\n  _onItemSelected: function (mdl) {\n    this._listView.hide();\n    this._popupManager.untrack();\n    this._renderButton(mdl).focus();\n    this.trigger('change', this);\n  },\n\n  _onButtonClick: function (ev) {\n    this._listView.toggle();\n    this._listView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n  },\n\n  _onButtonKeyDown: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      ev.preventDefault();\n      if (!this._listView.isVisible()) {\n        ev.stopPropagation();\n        this._listView.toggle();\n      } else {\n        this._popupManager.track();\n      }\n    }\n  },\n\n  getValue: function () {\n    var item = this.collection.getSelectedItem();\n    if (item) {\n      return item.getValue();\n    }\n    return;\n  },\n\n  setValue: function (value) {\n    var selectedModel = this.collection.setSelected(value);\n    if (selectedModel) {\n      this._renderButton(selectedModel);\n    }\n    this.value = value;\n  },\n\n  _renderButton: function (mdl) {\n    var button = this.$('.js-button');\n    var data = _.extend({}, {label: mdl.getName()}, mdl.attributes);\n    var $html = this.options.selectedItemTemplate(data);\n\n    button\n      .removeClass('is-empty')\n      .html($html);\n\n    return button;\n  },\n\n  remove: function () {\n    this._popupManager && this._popupManager.destroy();\n    this._listView && this._listView.clean();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-InputText CDB-Text is-cursor js-button u-ellipsis\\n  ';\n if (isDisabled) { \n__p+=' is-disabled ';\n } \n__p+='\\n  ';\n if (!label) { \n__p+=' is-empty ';\n } \n__p+='\\n  ';\n if (isNull) { \n__p+=' is-empty ';\n } \n__p+='\"\\n  tabindex=\"0\">\\n  ';\n if (isLoading) { \n__p+='\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n      <span class=\"u-lSpace u-secondaryTextColor\">'+\n((__t=( _t('components.backbone-forms.select.loading') ))==null?'':_.escape(__t))+\n'</span>\\n    </div>\\n  ';\n } else { \n__p+='\\n    ';\n if (isEmpty) { \n__p+='\\n      '+\n((__t=( _t('components.backbone-forms.select.empty') ))==null?'':_.escape(__t))+\n'\\n    ';\n } else { \n__p+='\\n      '+\n((__t=( placeholder || label || _t('components.backbone-forms.select.placeholder', { keyAttr: keyAttr }) ))==null?'':_.escape(__t))+\n'\\n    ';\n } \n__p+='\\n  ';\n } \n__p+='\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar _ = require('underscore');\nvar CustomListView = require('../../../custom-list/custom-view');\nvar CustomListCollection = require('../../../custom-list/custom-list-collection');\nvar selectedItemTemplate = require('./select-item.tpl');\nvar CustomListItemView = require('../../../custom-list/custom-list-item-view');\nvar itemListTemplate = require('../../../custom-list/custom-list-item.tpl');\nvar template = require('./select.tpl');\nvar PopupManager = require('../../../popup-manager');\n\nvar ENTER_KEY_CODE = 13;\n\nBackbone.Form.editors.Suggest = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'u-ellipsis Editor-formSelect',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  options: {\n    selectedItemTemplate: selectedItemTemplate,\n    itemListTemplate: itemListTemplate,\n    customListItemView: CustomListItemView\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.template = opts.template || template;\n    this.dialogMode = this.options.dialogMode || 'nested';\n\n    this._setupCollection();\n    this.setValue(this.model.get(this.options.keyAttr));\n    this._initBinds();\n  },\n\n  render: function () {\n    this.setValue(this.value);\n\n    return this;\n  },\n\n  _setupCollection: function () {\n    this.collection = new CustomListCollection(this.options.options);\n\n    if (this.options.editorAttrs && this.options.editorAttrs.collectionData) {\n      var categories = _.map(this.options.editorAttrs.collectionData, function (d) {\n        return { label: d, val: d };\n      });\n\n      this.collection.reset(categories);\n    }\n  },\n\n  _initViews: function () {\n    var isLoading = this.options.loading;\n    var isEmpty = !this.collection.length;\n    var isDisabled = !isEmpty ? this.options.disabled : true;\n    var name = this.model.get(this.options.keyAttr);\n    var isNull = name === null;\n    var label = isNull ? 'null' : name;\n\n    this.$el.html(\n      this.template({\n        label: label,\n        keyAttr: this.options.keyAttr,\n        isDisabled: isDisabled,\n        isLoading: isLoading,\n        isEmpty: isEmpty,\n        isNull: isNull,\n        placeholder: null\n      })\n    );\n\n    if (isDisabled) {\n      this.undelegateEvents();\n    }\n\n    this._listView = new CustomListView({\n      collection: this.collection,\n      showSearch: this.options.showSearch,\n      allowFreeTextInput: this.options.allowFreeTextInput,\n      typeLabel: this.options.keyAttr,\n      itemTemplate: this.options.itemListTemplate,\n      itemView: this.options.customListItemView,\n      position: this.options.position,\n      searchPlaceholder: null\n    });\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._listView.$el);\n    this._popupManager.append(this.dialogMode);\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._listView.hide();\n      this._popupManager.untrack();\n    }.bind(this);\n\n    this.collection.bind('change:selected', this._onItemSelected, this);\n    this.collection.bind('reset', this.render, this);\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n  },\n\n  _onItemSelected: function (mdl) {\n    this._listView.hide();\n    this._popupManager.untrack();\n    this._renderButton(mdl).focus();\n    this.trigger('change', this);\n  },\n\n  _onButtonClick: function (ev) {\n    this._listView.toggle();\n    this._listView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n  },\n\n  _onButtonKeyDown: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      ev.preventDefault();\n      if (!this._listView.isVisible()) {\n        ev.stopPropagation();\n        this._listView.toggle();\n        this._popupManager.track();\n      } else {\n        this._popupManager.untrack();\n      }\n    }\n  },\n\n  getValue: function () {\n    var item = this.collection.getSelectedItem();\n\n    if (item) {\n      return item.getValue();\n    }\n\n    return;\n  },\n\n  setValue: function (value) {\n    var selectedModel = this.collection.setSelected(value);\n\n    if (!selectedModel) {\n      this.collection.add({ label: value, val: value });\n      selectedModel = this.collection.setSelected(value);\n    }\n\n    this._initViews();\n    this._renderButton(selectedModel);\n\n    this.value = value;\n  },\n\n  _renderButton: function (mdl) {\n    var button = this.$('.js-button');\n    var name = mdl.getName();\n    var isNull = name === null || name === 'null';\n    var label = isNull ? 'null' : name;\n\n    var data = _.extend({}, mdl.attributes, { label: label });\n    var $html = this.options.selectedItemTemplate(data);\n\n    button\n      .html($html)\n      .toggleClass('is-empty', isNull);\n\n    return button;\n  },\n\n  remove: function () {\n    this._popupManager && this._popupManager.destroy();\n    this._listView && this._listView.clean();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  },\n\n  clean: function () {\n    this._popupManager && this._popupManager.destroy();\n  }\n\n});\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('../editor-helpers-extend');\nvar template = require('./slider.tpl');\nrequire('jquery');\nrequire('jquery-ui');\n\nBackbone.Form.editors.Slider = Backbone.Form.editors.Base.extend({\n\n  tagName: 'ul',\n  className: 'CDB-OptionInput-container CDB-OptionInput-container--noMargin',\n\n  options: {\n    direction: ''\n  },\n\n  events: {\n    focus: function () {\n      this.trigger('focus', this);\n    },\n    blur: function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    if (!this.options.labels) {\n      throw new Error('labels is required');\n    }\n\n    if (this.options.values && this.options.labels.length !== this.options.values.length) {\n      throw new Error('values and labels should have the same length');\n    }\n\n    this._values = this.options.values;\n    this._labels = this.options.labels;\n\n    this._initViews();\n  },\n\n  _initViews: function () {\n    this.$el.html(\n      template({\n        direction: this.options.direction\n      })\n    );\n\n    var step = this._getStepPercentage();\n    this._ticks = this._getTicks(step);\n\n    var tickID = this._getInitialTickID();\n\n    this.$('.js-slider').slider({\n      range: 'min',\n      value: this._ticks[tickID],\n      step: step,\n      orientation: 'horizontal',\n      disabled: this.options.disabled,\n      slide: this._onSlideChange.bind(this),\n      stop: this._onSlideStop.bind(this)\n    });\n\n    this._addTicks(step);\n    this._updateUI(tickID);\n  },\n\n  _getInitialTickID: function () {\n    var value = this.value;\n\n    if (this._values) {\n      value = this._values.indexOf(this.value);\n\n      if (value === -1) {\n        value = 0;\n      }\n    } else if (!value) {\n      value = 0;\n    }\n\n    return value;\n  },\n\n  _updateUI: function (tickID) {\n    if (tickID === undefined) {\n      tickID = 0;\n    }\n\n    this._updateLabel(tickID);\n    this._highlightTick(tickID);\n  },\n\n  _getTickID: function () {\n    var v = 0;\n\n    if (this.value && _.isNumber(this.value)) {\n      v = this._calculateTickValue(this.value);\n    }\n\n    return this._ticks.indexOf(v);\n  },\n\n  _addTicks: function (step) {\n    _.each(this._ticks, function (amount) {\n      $('<div class=\"UISlider-tick js-tick\"></div>')\n        .css('left', amount + '%')\n        .appendTo(this.$('.js-slider'));\n    }, this);\n  },\n\n  _highlightTick: function (tickID) {\n    this.$('.js-tick').removeClass('is-highlighted');\n    $(this.$('.js-tick').get(tickID)).addClass('is-highlighted');\n  },\n\n  _updateLabel: function (tickID) {\n    this.$('.js-label').text(this._labels[tickID]);\n  },\n\n  _getTicks: function (step) {\n    var self = this;\n\n    return [0].concat(_(this._labels.length - 1).times(function (n) {\n      return self._calculateTickValue(step * (n + 1));\n    }));\n  },\n\n  _getStepPercentage: function () {\n    return (100 / (this._labels.length - 1));\n  },\n\n  _calculateTickValue: function (value) {\n    return +value.toFixed(2);\n  },\n\n  _onSlideChange: function (ev, ui) {\n    this.value = ui.value;\n\n    this._updateUI(this._getTickID());\n  },\n\n  _onSlideStop: function (ev, ui) {\n    this.trigger('change', this);\n  },\n\n  _hasSlider: function () {\n    return this.$('.js-slider').data('ui-slider');\n  },\n\n  getValue: function () {\n    var value = this._values ? this._values[this._getTickID()] : this._getTickID();\n    return (this.value === '') ? null : value;\n  },\n\n  setValue: function (value) {\n    this.$('.js-slider').slider('value', value);\n    this.value = value;\n  },\n\n  _destroySlider: function () {\n    if (this._hasSlider()) {\n      this.$('.js-slider').slider('destroy');\n    }\n  },\n\n  remove: function () {\n    this._destroySlider();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<li class=\"CDB-OptionInput-item CDB-OptionInput-item--noSeparator\">\\n  ';\n if (direction === 'desc') { \n__p+='\\n  <svg class=\"UISlider-scale\" width=\"160px\" height=\"7px\" viewBox=\"0 0 160 7\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n      <g fill=\"#EEEEEE\">\\n        <path d=\"M0,3.96972188 C0,2.86143684 0.899814069,1.95171147 1.99402962,1.93799103 L158.00597,-0.0182528125 C159.107243,-0.0320617354 160,0.846465216 160,1.95103649 L160,4.98745286 C160,6.08887023 159.100186,6.96483876 158.00597,6.94427947 L1.99402962,4.012961 C0.89275747,3.99226913 0,3.08692473 0,1.96876746 L0,3.96972188 Z\" id=\"Mask\" transform=\"translate(80.000000, 3.458568) scale(-1, 1) translate(-80.000000, -3.458568) \"></path>\\n      </g>\\n    </g>\\n  </svg>\\n  ';\n } else if (direction === 'asc') { \n__p+='\\n  <svg class=\"UISlider-scale\" width=\"160px\" height=\"7px\" viewBox=\"0 0 160 7\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n      <g transform=\"translate(80.000000, 4.000000) rotate(-180.000000) translate(-80.000000, -4.000000) \" fill-rule=\"nonzero\" fill=\"#EEEEEE\">\\n        <path d=\"M0,4.96972188 C0,3.86143684 0.899814069,2.95171147 1.99402962,2.93799103 L158.00597,0.981747188 C159.107243,0.967938265 160,1.84646522 160,2.95103649 L160,5.98745286 C160,7.08887023 159.100186,7.96483876 158.00597,7.94427947 L1.99402962,5.012961 C0.89275747,4.99226913 0,4.08692473 0,2.96876746 L0,4.96972188 Z\" id=\"Mask\" transform=\"translate(80.000000, 4.463110) scale(-1, 1) translate(-80.000000, -4.463110) \"></path>\\n      </g>\\n    </g>\\n  </svg>\\n  ';\n } \n__p+='\\n  <div class=\"UISlider is-standalone ';\n if (direction) { \n__p+='without-line';\n } \n__p+=' js-slider\"></div>\\n  <span class=\"UISlider-label js-label\"></span>\\n</li>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nrequire('jquery-ui');\n\nBackbone.Form.editors.SortableList = Backbone.Form.editors.List.extend({\n  initialize: function () {\n    Backbone.Form.editors.List.prototype.initialize.apply(this, arguments);\n  },\n\n  render: function () {\n    Backbone.Form.editors.List.prototype.render.apply(this, arguments);\n    this._initSortable();\n    return this;\n  },\n\n  _initSortable: function () {\n    this.$list.sortable({\n      axis: 'y',\n      items: '.js-sortable',\n      tolerance: 'pointer',\n      containment: this.$list,\n      forceHelperSize: true,\n      forcePlaceholderSize: true,\n      update: this._onSortableUpdate.bind(this)\n    });\n  },\n\n  _onSortableUpdate: function (event, ui) {\n    var sorted = [];\n    _.each(this.items, function (item) {\n      var index = item.$el.index(this.$list);\n      sorted[index] = item;\n    });\n\n    this.items = sorted;\n    this.commit();\n  }\n});\n",
    "var Backbone = require('backbone');\n\nmodule.exports = Backbone.Collection.extend({\n  removeTag: function (label) {\n    var m = this.findWhere({label: label});\n    m && this.remove(m);\n  },\n\n  addTag: function (label) {\n    var m = this.findWhere({label: label});\n    !m && this.add({label: label});\n  },\n\n  getValue: function () {\n    return this.map(function (mdl) {\n      return mdl.get('label');\n    });\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n\n  initialize: function (opts) {\n    if (!opts.label) throw new Error('label is required');\n    this._label = opts.label;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(this._label);\n    return this;\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar template = require('./taglist.tpl');\nvar TagView = require('./taglist-item-view');\nvar TagCollection = require('./taglist-collection');\nvar EditorHelpers = require('../editor-helpers-extend');\n\nrequire('jquery');\nrequire('jquery-ui');\nrequire('tagit');\n\nBackbone.Form.editors.Taglist = Backbone.Form.editors.Base.extend({\n  className: 'Form-tags CDB-Text',\n  events: {\n    'mouseover': '_onMouseOver',\n    'mouseout': '_onMouseOut'\n  },\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this._tagCollection = new TagCollection(this._normalize(opts.schema.options.tags));\n\n    this.isEditable = opts.schema.options.isEditable || opts.schema.options.isEditable === undefined;\n  },\n\n  render: function () {\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var self = this;\n    var tagsPlaceholder = (!this.isEditable && this._tagCollection.length === 0)\n                          ? _t('components.taglist.none')\n                          : _t('components.taglist.placeholder');\n\n    this.$el.html(template());\n\n    this._tagCollection.each(this._renderTag, this);\n\n    this.$('.js-tagsList').tagit({\n      allowSpaces: true,\n      caseSensitive: false,\n      placeholderText: tagsPlaceholder,\n      readOnly: !this.isEditable,\n      onBlur: function () {\n        self.isEditable && self.$el.removeClass('is-focus');\n        self.trigger('blur', self);\n      },\n      onFocus: function () {\n        self.isEditable && self.$el.removeClass('is-hover').addClass('is-focus');\n        self.trigger('focus', self);\n      },\n      afterTagAdded: self._onTagAdded.bind(self),\n      afterTagRemoved: self._onTagRemoved.bind(self)\n    });\n  },\n\n  _renderTag: function (model) {\n    var view = new TagView({\n      label: model.get('label')\n    });\n\n    this.$('.js-tagsList').append(view.render().el);\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n    this.$el.focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n    this.$el.blur();\n  },\n\n  getValue: function () {\n    return this._tagCollection.getValue();\n  },\n\n  setValue: function (tags) {\n    this._tagCollection.reset(this._normalize(tags));\n    this._destroyTagit();\n    this.render();\n    this.trigger('change', this);\n  },\n\n  _onMouseOver: function () {\n    !this.$el.hasClass('is-focus') && this.$el.addClass('is-hover');\n  },\n\n  _onMouseOut: function () {\n    !this.$el.hasClass('is-focus') && this.$el.removeClass('is-hover');\n  },\n\n  _onTagRemoved: function (e, ui) {\n    var tag = ui.tag.find('.tagit-label').text();\n    this._tagCollection.removeTag(tag);\n    this.trigger('change', this);\n  },\n\n  _onTagAdded: function (e, ui) {\n    var tag = ui.tag.find('.tagit-label').text();\n    this._tagCollection.addTag(tag);\n    this.trigger('change', this);\n  },\n\n  _normalize: function (tags) {\n    return _.map(tags, function (tag) {\n      return {\n        label: tag.trim()\n      };\n    });\n  },\n\n  _destroyTagit: function () {\n    // cannot call public methods before initilization\n    // checking ui-widget class does the trick\n    (this.$('.ui-widget').length > 0) && this.$('.js-tagsList').tagit('destroy');\n  },\n\n  remove: function () {\n    this._destroyTagit();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"Form-tagsList js-tagsList\"></ul>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('./editor-helpers-extend');\n\nBackbone.Form.editors.Text = Backbone.Form.editors.Text.extend({\n  className: 'CDB-InputText CDB-Text',\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    var schema = this.schema;\n\n    // Allow customising text type (email, phone etc.) for HTML5 browsers\n    var type = 'text';\n\n    if (schema && schema.editorAttrs && schema.editorAttrs.type) type = schema.editorAttrs.type;\n    if (schema && schema.dataType) type = schema.dataType;\n\n    this.$el.attr('type', type);\n\n    this.determineChange = _.debounce(this.determineChange, 200);\n  },\n\n  render: function () {\n    this.setValue(this.value);\n    this._toggleDisableState();\n\n    if (this._isCopyButtonEnabled()) {\n      this._toggleClipboardState();\n    }\n\n    return this;\n  },\n\n  getValue: function () {\n    var val = this.$el.val();\n\n    return (val === '') ? null : val;\n  },\n\n  _toggleClipboardState: function () {\n    this.$el.toggleClass('Share-input-field u-ellipsis', this._isCopyButtonEnabled());\n  },\n\n  _togglePlaceholder: function () {\n    if (this.options.placeholder) {\n      this.$el.attr('placeholder', this.options.placeholder);\n    } else {\n      var placeholder = (this.value === null) ? 'null' : '';\n      this.$el.attr('placeholder', placeholder);\n    }\n  },\n\n  _toggleDisableState: function () {\n    if (this.options.disabled) {\n      this.$el.attr('readonly', '');\n      this.$el.attr('placeholder', '');\n\n      // if it's disabled AND has copy, leave just readonly\n      if (this._isCopyButtonEnabled()) {\n        this.$el.removeAttr('disabled');\n      }\n    } else {\n      this.$el.removeAttr('readonly');\n      this._togglePlaceholder();\n    }\n\n    this.$el.toggleClass('is-disabled', !!this.options.disabled);\n  },\n\n  _isCopyButtonEnabled: function () {\n    return !!this.options.hasCopyButton;\n  }\n});\n",
    "var Backbone = require('backbone');\n\nBackbone.Form.editors.TextArea = Backbone.Form.editors.Text.extend({\n  tagName: 'textarea',\n  className: 'CDB-Textarea',\n\n  render: function () {\n    this.setValue(this.value);\n    this._toggleDisableState();\n\n    return this;\n  },\n\n  getValue: function () {\n    var val = this.$el.val();\n\n    return (val === '') ? null : val;\n  },\n\n  _toggleDisableState: function () {\n    if (this.options.disabled) {\n      this.$el.attr('readonly', '');\n      this.$el.attr('placeholder', '');\n    } else {\n      this.$el.removeAttr('readonly');\n      this._togglePlaceholder();\n    }\n\n    this.$el.toggleClass('is-disabled', !!this.options.disabled);\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar template = require('./toggle.tpl');\n\nBackbone.Form.editors.Toggle = Backbone.Form.editors.Radio.extend({\n  className: 'Editor-formLabel CDB-Text CDB-Size-medium u-alignCenter',\n\n  _arrayToHtml: function (array) {\n    var name = this.getName();\n    var id = this.id;\n\n    var items = _.map(array, function (option, index) {\n      var val = this.form.model.get(this.key);\n      var item = {\n        name: name,\n        id: id + '-' + index\n      };\n\n      if (_.isObject(option)) {\n        item.value = (option.val || option.val === 0) ? option.val : '';\n        item.label = option.label;\n        item.help = option.help;\n        item.labelHTML = option.labelHTML;\n        item.selected = (val !== void 0) ? val === option.val : option.selected;\n      } else {\n        item.value = option;\n        item.label = option;\n        item.selected = (val !== void 0) ? val === option : option.selected;\n      }\n\n      return item;\n    }.bind(this));\n\n    return template({ items: items });\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n _.each(items, function(item, index) { \n__p+='\\n  ';\n if (item.selected) { \n__p+='\\n    <li class=\"u-tSpace\">\\n      <input type=\"radio\" class=\"Editor-toggleRadio\" name=\"'+\n((__t=( item.name ))==null?'':__t)+\n'\" value=\"'+\n((__t=( item.value ))==null?'':_.escape(__t))+\n'\" id=\"'+\n((__t=( item.id ))==null?'':__t)+\n'\" checked=\"checked\" />\\n      ';\n if (item.help) { \n__p+='<p class=\"Editor-toggleHelp CDB-Text CDB-Size-small u-altTextColor\">'+\n((__t=( item.help ))==null?'':__t)+\n'</p>';\n } \n__p+='\\n    </li>\\n  ';\n } else { \n__p+='\\n    <li class=\"u-tSpace u-txt-right\">\\n      <input type=\"radio\" name=\"'+\n((__t=( item.name ))==null?'':__t)+\n'\" value=\"'+\n((__t=( item.value ))==null?'':_.escape(__t))+\n'\" id=\"'+\n((__t=( item.id ))==null?'':__t)+\n'\" />\\n      <label class=\"u-upperCase u-actionTextColor CDB-Text is-semibold CDB-Size-small u-iBlock\" for=\"'+\n((__t=( item.id ))==null?'':__t)+\n'\">';\n if (item.labelHTML){ \n__p+=''+\n((__t=( item.labelHTML ))==null?'':__t)+\n'';\n }else{ \n__p+=''+\n((__t=( item.label ))==null?'':_.escape(__t))+\n'';\n } \n__p+='</label>\\n    </li>\\n  ';\n } \n__p+='\\n';\n }); \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar TipsyTooltipView = require('../tipsy-tooltip-view.js');\nvar Clipboard = require('clipboard');\n\nBackbone.Form.Field = Backbone.Form.Field.extend({\n\n  initialize: function (options) {\n    this.trackingClass = options.trackingClass;\n    this.constructor.__super__.initialize.apply(this, arguments);\n  },\n\n  render: function () {\n    this.constructor.__super__.render.apply(this, arguments);\n    if (this.schema.help) {\n      this._setHelp();\n    }\n    if (this._isCopyButtonEnabled()) {\n      this._initClipboard();\n    }\n    return this;\n  },\n\n  /**\n  * OVERWRITTEN the creation of the full field schema, merging defaults etc.\n  *\n  * @param {Object|String} schema\n  *\n  * @return {Object}\n  */\n  createSchema: function (schema) {\n    var editorType = schema.type;\n    schema = this.constructor.__super__.createSchema.apply(this, arguments);\n    schema.editorType = editorType;\n    return schema;\n  },\n\n  /**\n   * OVERWRITTEN the creation of the editor specified in the schema; either an\n   * editor string name or a constructor function\n   *\n   * @return {View}\n   */\n  createEditor: function () {\n    var options = _.extend(\n      _.pick(this, 'schema', 'form', 'key', 'model', 'value', 'trackingClass'),\n      { id: this.createEditorId() }\n    );\n\n    var ConstructorFn = this.schema.type;\n\n    return new ConstructorFn(options);\n  },\n\n  _setHelp: function () {\n    this._helpTooltip = this._createTooltip({\n      $el: this.$('.js-help')\n    });\n  },\n\n  // Changed original setError function in order to add\n  // the error tooltip\n  setError: function (msg) {\n    if (this.editor.hasNestedForm) return;\n    this.$el.addClass(this.errorClassName);\n    this._destroyErrorTooltip();\n    this._errorTooltip = this._createTooltip({\n      gravity: 'w',\n      className: 'is-error',\n      msg: msg,\n      offset: 5\n    });\n    this._errorTooltip.showTipsy();\n  },\n\n  // Changed original clearError function in order to remove\n  // the error tooltip\n  clearError: function () {\n    this.$el.removeClass(this.errorClassName);\n    this._destroyErrorTooltip();\n  },\n\n  _initClipboard: function () {\n    if (this._clipboard) {\n      this._clipboard.destroy();\n    }\n\n    var btn = this.$('.js-copy');\n    this._clipboard = new Clipboard(btn.get(0));\n  },\n\n  _createTooltip: function (opts) {\n    return new TipsyTooltipView({\n      el: opts.$el || this.$el,\n      gravity: opts.gravity || 's',\n      className: opts.className || '',\n      offset: opts.offset || 0,\n      title: function () {\n        return opts.msg || $(this).data('tooltip');\n      }\n    });\n  },\n\n  _destroyErrorTooltip: function () {\n    if (this._errorTooltip) {\n      this._errorTooltip.hideTipsy();\n      this._errorTooltip.destroyTipsy();\n    }\n  },\n\n  _destroyHelpTooltip: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.destroyTipsy();\n    }\n  },\n\n  _destroyClipboard: function () {\n    if (this._clipboard) {\n      this._clipboard.destroy();\n    }\n  },\n\n  // Changed original templateData function in order to add a\n  // new template attribute (hasNestedForm)\n  templateData: function () {\n    var schema = this.schema;\n    var type;\n\n    try {\n      type = this.form.schema[this.key].type;\n    } catch (e) {\n      type = undefined;\n    }\n\n    return {\n      help: schema.help || '',\n      isCopyButtonEnabled: this._isCopyButtonEnabled(),\n      hasNestedForm: this.editor.hasNestedForm,\n      title: schema.title,\n      fieldAttrs: schema.fieldAttrs,\n      editorAttrs: schema.editorAttrs,\n      key: this.key,\n      type: type,\n      editorId: this.editor.id,\n      editorType: this.editor.el.type\n    };\n  },\n\n  _isCopyButtonEnabled: function () {\n    return !!this.schema.hasCopyButton;\n  },\n\n  remove: function () {\n    this._destroyErrorTooltip();\n    this._destroyHelpTooltip();\n    this._destroyClipboard();\n    this.editor.remove();\n    Backbone.View.prototype.remove.call(this);\n  }\n\n}, {\n  template: require('./field.tpl'),\n  errorClassName: 'CDB-FieldError'\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Text Editor-formInner';\n if (type){ \n__p+=' Editor-formInner--'+\n((__t=( type ))==null?'':_.escape(__t))+\n'';\n } \n__p+='\">\\n  ';\n if (title) { \n__p+='\\n    <label class=\"CDB-Legend ';\n if (editorType){ \n__p+=' CDB-Legend--'+\n((__t=( editorType ))==null?'':_.escape(__t))+\n'';\n } \n__p+=' u-upperCase CDB-Text is-semibold CDB-Size-small u-rSpace--m\" for=\"'+\n((__t=( editorId ))==null?'':_.escape(__t))+\n'\" title=\"'+\n((__t=( title ))==null?'':_.escape(__t))+\n'\">\\n      <div class=\"u-ellipsis ';\n if (help) { \n__p+='Editor-formHelp';\n } \n__p+='\">\\n        <span class=\"';\n if (help) { \n__p+=' js-help is-underlined';\n } \n__p+='\" ';\n if (help) { \n__p+=' data-tooltip=\"'+\n((__t=( help ))==null?'':_.escape(__t))+\n'\"';\n } \n__p+=' >'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</span>\\n      </div>\\n    </label>\\n  ';\n } \n__p+='\\n  <div class=\"Editor-formInput u-flex u-alignCenter\" data-editor>\\n    ';\n if (isCopyButtonEnabled) { \n__p+='\\n      <button type=\"button\" class=\"Share-copy CDB-Button CDB-Button--small js-copy\" data-clipboard-target=\"#'+\n((__t=( editorId ))==null?'':_.escape(__t))+\n'\">\\n        <span class=\"CDB-Button-Text CDB-Text CDB-Size-small u-actionTextColor\">'+\n((__t=( _t('components.backbone-forms.copy-button') ))==null?'':_.escape(__t))+\n'</span>\\n      </button>\\n    ';\n } \n__p+='\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\n// overwirte template in order to be able to use flex\n/*eslint-disable */\nBackbone.Form.Fieldset.template = _.template('\\\n  <div class=\"Editor-fieldset\" data-fields>\\\n    <% if (legend) { %>\\\n      <legend><%= legend %></legend>\\\n    <% } %>\\\n  </div>\\\n');\n/*eslint-enable */\n",
    "var Backbone = require('backbone');\n\nBackbone.Form = Backbone.Form.extend({\n\n  initialize: function (options) {\n    this.options = options;\n    this.constructor.__super__.initialize.apply(this, arguments);\n  },\n\n  createField: function (key, schema) {\n    var options = {\n      form: this,\n      key: key,\n      schema: schema,\n      idPrefix: this.idPrefix,\n      trackingClass: this.options.trackingClass\n    };\n\n    if (this.model) {\n      options.model = this.model;\n    } else if (this.data) {\n      options.value = this.data[key];\n    } else {\n      options.value = undefined;\n    }\n\n    var field = new this.Field(options);\n\n    this.listenTo(field.editor, 'all', this.handleEditorEvent);\n\n    return field;\n  }\n\n});\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nrequire('backbone-forms');\nBackbone.$ = $;\n\n// Custom validators\n_.extend(\n  Backbone.Form.validators,\n  {\n    interval: require('./validators/interval.js')\n  }\n);\n\n// Requiring custom form components\nrequire('./form.js');\nrequire('./fieldset-template.js');\nrequire('./field.js');\nrequire('./editors/base.js');\nrequire('./editors/text.js');\nrequire('./editors/textarea.js');\nrequire('./editors/number/number.js');\nrequire('./editors/select/select-view.js');\nrequire('./editors/select/multi-select-view.js');\nrequire('./editors/radio/radio.js');\nrequire('./editors/enabler/enabler-view.js');\nrequire('./editors/toggle/toggle.js');\nrequire('./editors/enabler-editor/enabler-editor-view.js');\nrequire('./editors/node-dataset/node-dataset-view.js');\nrequire('./editors/operators/operators-view.js');\nrequire('./editors/list/list.js');\nrequire('./editors/list/list-item.js');\nrequire('./editors/sortable-list.js');\nrequire('./editors/legend/category-item.js');\nrequire('./editors/slider/slider.js');\nrequire('./editors/fill/fill.js');\nrequire('./editors/taglist/taglist.js');\nrequire('./editors/datetime/datetime.js');\nrequire('./editors/select/suggest-view.js');\nrequire('./editors/data-observatory/dropdown-view.js');\nrequire('./editors/code-editor');\n",
    "module.exports = function (opts) {\n  // get the min value\n  var minValue = parseFloat(opts.min) || 0;\n  var maxValue = parseFloat(opts.max) || 0;\n  var err = {\n    type: opts.type,\n    message: _t('components.backbone-forms.interval-error', { minValue: opts.min, maxValue: opts.max })\n  };\n  return function interval (value, attrs) {\n    var fieldValue = 0;\n\n    if (value === null || value === undefined || value === '') return err;\n\n    // check if the value is number\n    if (!isNaN(parseFloat(value)) && isFinite(value)) {\n      fieldValue = parseFloat(value);\n    }\n    if (minValue > fieldValue || maxValue < fieldValue) {\n      return err;\n    }\n    return;\n  };\n};\n",
    "var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar utils = require('../helpers/utils');\nvar _ = require('underscore');\n\nvar IMAGE_DIM = 18;\nvar IMAGE_FILE_ATTRS = {\n  width: '18px',\n  height: '18px'\n};\n\nvar VIEWBOX = _.template('0 0 <%- w %> <%- h %>');\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.imageClass) { throw new Error('Image class is mandatory.'); }\n\n    this._imageClass = opts.imageClass;\n    this._imageURL = opts.imageUrl;\n    this._color = opts.color;\n\n    this._lastImage = {\n      url: null,\n      content: null\n    };\n  },\n\n  render: function () {\n    this.$el.empty();\n\n    this._loadImage();\n\n    return this;\n  },\n\n  _loadImage: function () {\n    if (!this._imageURL) { // the URL could be null or undefined\n      return;\n    }\n\n    var self = this;\n\n    if (this._isSVG(this._imageURL)) {\n      this._loadSVG();\n    } else {\n      var $img = $('<img crossorigin=\"anonymous\"/>');\n      $img.attr('class', self._imageClass + ' js-image');\n      $img.attr('src', this._imageURL + '?req=markup');\n\n      for (var attribute in IMAGE_FILE_ATTRS) {\n        $img.attr(attribute, IMAGE_FILE_ATTRS[attribute]);\n      }\n\n      this.$el.append($img);\n    }\n  },\n\n  _loadSVG: function () {\n    var self = this;\n\n    this._requestImageURL(this._imageURL, function (content) {\n      var svg = content.cloneNode(true);\n      var $svg = $(svg);\n      $svg = $svg.removeAttr('xmlns:a');\n      $svg.attr('class', self._imageClass + ' js-image');\n\n      var bbox = {\n        w: IMAGE_DIM,\n        h: IMAGE_DIM\n      };\n\n      if (!$svg.attr('viewBox')) {\n        if ($svg.attr('height') && $svg.attr('width')) {\n          bbox = {\n            w: svg.width.baseVal.value,\n            h: svg.height.baseVal.value\n          };\n        }\n\n        $svg.attr('viewBox', VIEWBOX(bbox));\n      }\n\n      for (var attribute in IMAGE_FILE_ATTRS) {\n        $svg.attr(attribute, IMAGE_FILE_ATTRS[attribute]);\n      }\n\n      self.$el.append($svg);\n\n      $svg.css('fill', self._color);\n      $svg.find('g').css('fill', 'inherit');\n      $svg.find('path').css('fill', 'inherit');\n    });\n  },\n\n  _requestImageURL: function (url, callback) {\n    var self = this;\n    var completeUrl = url + '?req=ajax';\n\n    if (this._lastImage.url === completeUrl) {\n      callback && callback(this._lastImage.content);\n    } else {\n      $.ajax(completeUrl)\n      .done(function (data) {\n        self._lastImage.url = completeUrl;\n        var content = self._lastImage.content = data.getElementsByTagName('svg')[0];\n        callback && callback(content);\n      })\n      .fail(function () {\n        throw new Error(\"Couldn't get \" + completeUrl + ' file.');\n      });\n    }\n  },\n\n  updateImageColor: function (color) {\n    this.$('.js-image').css('fill', color);\n  },\n\n  _isSVG: function (url) {\n    if (!url) {\n      return false;\n    }\n    var noQueryString = url.split('?')[0];\n    return noQueryString && utils.endsWith(noQueryString.toUpperCase(), 'SVG');\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'infoboxModel',\n  'infoboxCollection'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n    this._setSelectedModel();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._infoboxModel, 'change:state', this._onChangeState);\n    this.listenTo(this._infoboxModel, 'change:visible', this.render);\n  },\n\n  _initViews: function () {\n    var createContentView;\n\n    if (this._selectedModel) {\n      createContentView = this._selectedModel.get('createContentView');\n      this.infoboxView = createContentView();\n      this.$el.append(this.infoboxView.render().el);\n      this.addView(this.infoboxView);\n      this._initSubviewBinds();\n    }\n  },\n\n  _setSelectedModel: function () {\n    var state = this._infoboxModel.get('state');\n    this._selectedModel = this._infoboxCollection.setSelected(state);\n  },\n\n  _onChangeState: function () {\n    this._setSelectedModel();\n    this.render();\n  },\n\n  _initSubviewBinds: function () {\n    this.listenTo(this.infoboxView, 'action:main', this._onMainAction);\n    this.listenTo(this.infoboxView, 'action:second', this._onSecondAction);\n    this.listenTo(this.infoboxView, 'action:close', this._onClose);\n  },\n\n  _onMainAction: function () {\n    var action = this._selectedModel.get('mainAction');\n    action && action();\n  },\n\n  _onSecondAction: function () {\n    var action = this._selectedModel.get('secondAction');\n    action && action();\n  },\n\n  _onClose: function () {\n    var action = this._selectedModel.get('closeAction');\n    if (action) {\n      action();\n    } else {\n      // if no action associated, we still need to hide the infobox\n      this._infoboxModel.set('state', null);\n    }\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar utils = require('../../helpers/utils');\n\nvar REQUIRED_OPTS = [\n  'template',\n  'onEdit',\n  'renderOptions'\n];\n\nvar DBLCLICK_TIMEOUT = 200;\nvar clicks = 0;\nvar ESCAPE_KEY_CODE = 27;\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = CoreView.extend({\n  events: {\n    'blur .js-input': 'hide',\n    'keyup .js-input': '_onKeyUpInput'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._onClickHandler = this._onClickHandler.bind(this);\n    this.edit = this.edit.bind(this);\n\n    this._timeout = opts.timeout || DBLCLICK_TIMEOUT;\n  },\n\n  render: function () {\n    this._unbindEvents();\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    this._initBinds();\n    return this;\n  },\n\n  _initBinds: function () {\n    if (this.options.onClick) {\n      this._onClick = this.options.onClick;\n      this._title().on('click', this._onClickHandler);\n    } else {\n      this._title().on('dblclick', this.edit);\n    }\n  },\n\n  _unbindEvents: function () {\n    var $title = this._title();\n    $title && $title.off('click dblclick');\n  },\n\n  _onClickHandler: function (e) {\n    var self = this;\n    clicks++;\n    if (clicks === 1) {\n      setTimeout(function () {\n        if (clicks === 1) {\n          self._onClick && self._onClick(e);\n        } else {\n          self.edit();\n        }\n        clicks = 0;\n      }, this._timeout);\n    }\n  },\n\n  _initViews: function () {\n    this.$el.append(this._template(this._renderOptions));\n    this.setElement(this.$('.Inline-editor'));\n  },\n\n  edit: function () {\n    this.$('.js-input').prop('readonly', false).show().focus();\n    this.$('.js-input').get(0).setSelectionRange(0, this.$('.js-input').val().length);\n  },\n\n  getValue: function () {\n    var inputValue = this.$('.js-input').val();\n    return utils.sanitizeHtml(inputValue);\n  },\n\n  _title: function () {\n    return this.$('.js-title');\n  },\n\n  hide: function () {\n    this.$('.js-input').prop('readonly', true).hide();\n  },\n\n  clean: function () {\n    this._unbindEvents();\n    CoreView.prototype.clean.call(this);\n  },\n\n  _onKeyUpInput: function (e) {\n    if (e.which === ESCAPE_KEY_CODE) {\n      this.hide();\n    }\n\n    if (e.which === ENTER_KEY_CODE) {\n      this._onEdit && this._onEdit(this.getValue());\n    }\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\nvar LikeModel = Backbone.Model.extend({\n  defaults: {\n    likeable: true\n  },\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('like');\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/' + version + '/viz/' + this.get('vis_id') + '/like';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!attrs.vis_id) throw new Error('vis_id attribute is required');\n    this._configModel = opts.configModel;\n\n    this.on('destroy', function () {\n      this.set({\n        liked: false,\n        likes: this.get('likes') - 1\n      });\n    }, this);\n  },\n\n  _onSaveError: function (model, response) {\n    this.trigger('error', {\n      status: response.status,\n      statusText: response.statusText\n    });\n  },\n\n  toggleLiked: function () {\n    if (this.get('liked')) {\n      this.destroy();\n    } else {\n      this.set({ id: null }, { silent: true });\n      this.save({}, {\n        error: this._onSaveError.bind(this)\n      });\n    }\n  }\n\n}, {\n  newByVisData: function (opts) {\n    var d = _.defaults({\n      id: opts.liked ? opts.vis_id : null\n    }, _.omit(opts, 'url', 'configModel'));\n\n    var m = new LikeModel(d, {\n      configModel: opts.configModel\n    });\n\n    if (opts.url) {\n      m.url = opts.url;\n    }\n\n    return m;\n  }\n});\n\nmodule.exports = LikeModel;\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"IntermediateInfo\">\\n  <div class=\"CDB-LoaderIcon CDB-LoaderIcon--big is-dark js-loader\">\\n    <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n      <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n    </svg>\\n  </div>\\n  <h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m u-tSpace-xl\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h4>\\n  <div class=\"CDB-Text CDB-Size-medium u-altTextColor\">'+\n((__t=( descHTML ))==null?'':__t)+\n'</div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n  \"'+\n((__t=( quote ))==null?'':__t)+\n'\"\\n</p>\\n';\n if (author) { \n__p+='\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor u-tSpace\"><i> '+\n((__t=( author ))==null?'':_.escape(__t))+\n'</i></p>\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var template = require('./quote.tpl');\n\nvar QUOTES = [\n  { quote: 'Geographers never get lost. They just do accidental field work.', author: 'Nicholas Chrisman' },\n  { quote: 'Geography is just physics slowed down, with a couple of trees stuck in it.', author: 'Terry Pratchett' },\n  { quote: 'Not all those who wander are lost.', author: 'J. R. R. Tolkien' },\n  { quote: 'In that Empire, the Art of Cartography attained such Perfection that the map of a single Province occupied the entirety of a City.', author: 'Jorge Luis Borges' },\n  { quote: 'X marks the spot', author: 'Indiana Jones' },\n  { quote: \"It's turtles all the way down.\", author: null },\n  { quote: 'Remember: no matter where you go, there you are.', author: null },\n  { quote: \"Without geography, you're nowhere!\", author: 'Jimmy Buffett' },\n  { quote: 'our earth is a globe / whose surface we probe /<br />no map can replace her / but just try to trace her', author: 'Steve Waterman' },\n  { quote: 'Everything happens somewhere.', author: 'Doctor Who' },\n  { quote: 'A map is the greatest of all epic poems. Its lines and colors show the realization of great dreams.', author: 'Gilbert H. Grosvenor' },\n  { quote: 'Everything is related to everything else,<br />but near things are more related than distant things.', author: \"Tobler's first law of geography\" },\n  { quote: 'Hic Sunt Dracones', author: null },\n  { quote: 'Here be dragons', author: null },\n  { quote: \"Stand in the place where you live / Now face North /<br/>Think about direction / Wonder why you haven't before\", author: 'R.E.M' },\n  { quote: 'The virtue of maps, they show what can be done with limited space, they foresee that everything can happen therein.', author: 'Jos Saramago' }\n];\n\n/**\n * Random quote\n */\nmodule.exports = function () {\n  var idx = Math.round(Math.random() * (QUOTES.length - 1));\n\n  return template(QUOTES[idx]);\n};\n",
    "var cdb = require('cartodb.js');\nvar template = require('./loading.tpl');\nvar randomQuote = require('./random-quote');\n\n/**\n * @param {Object} opts\n * @param {String=} opts.title\n * @param {String=} opts.desc\n */\nmodule.exports = function (opts) {\n  var customDesc = opts.desc && cdb.core.sanitize(opts.desc);\n\n  return template({\n    title: opts.title || '',\n    descHTML: customDesc || randomQuote()\n  });\n};\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    eventName: '',\n    eventProperties: {}\n  },\n\n  url: function () {\n    return this._configModel.get('base_url') + '/api/v3/metrics';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.userId) { throw new Error('userId is required'); }\n    if (!opts.visId) { throw new Error('visId is required'); }\n    if (!opts.configModel) { throw new Error('configModel is required'); }\n\n    this._userId = opts.userId;\n    this._visId = opts.visId;\n    this._configModel = opts.configModel;\n  },\n\n  toJSON: function () {\n    return {\n      name: this.get('eventName'),\n      properties: _.extend(\n        {},\n        this.get('eventProperties'),\n        {\n          visualization_id: this._visId,\n          user_id: this._userId\n        }\n      )\n    };\n  }\n});\n",
    "var MetricsModel = require('./metrics-model');\n\n/**\n *  Metrics singleton tracker.\n *  It sends any event to metrics endpoint.\n */\n\nmodule.exports = (function () {\n  return {\n    init: function (opts) {\n      if (!opts) { throw new Error('visId, userId and configModel are required'); }\n      if (!opts.userId) { throw new Error('userId is required'); }\n      if (!opts.visId) { throw new Error('visId is required'); }\n      if (!opts.configModel) { throw new Error('configModel is required'); }\n\n      this._userId = opts.userId;\n      this._visId = opts.visId;\n      this._configModel = opts.configModel;\n    },\n\n    track: function (eventName, eventProperties) {\n      if (!eventName) { throw new Error('eventName is required'); }\n\n      var metricModel = new MetricsModel({\n        eventName: eventName,\n        eventProperties: eventProperties\n      }, {\n        userId: this._userId,\n        visId: this._visId,\n        configModel: this._configModel\n      });\n\n      metricModel.save();\n    }\n  };\n})();\n",
    "var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar renderLoading = require('../../loading/render-loading');\nvar ENTER_KEY_CODE = 13;\nvar REQUIRED_OPTS = [\n  'template',\n  'runAction',\n  'modalModel'\n];\n\n/**\n *  Confirmation modal dialog\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-confirm': '_onConfirm',\n    'click .js-cancel': '_onCancel'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    if (opts.loadingTitle) {\n      this._hasLoading = true;\n      this._loadingTitle = opts.loadingTitle;\n    }\n\n    if (opts.renderOpts) {\n      this._hasRenderOpts = true;\n      this._renderOpts = opts.renderOpts;\n    }\n\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var html = this._hasRenderOpts ? this._template(this._renderOpts) : this._template();\n    this.$el.html(html);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    $(document).bind('keydown', this._onKeyDown);\n  },\n\n  _disableBinds: function () {\n    $(document).unbind('keydown', this._onKeyDown);\n  },\n\n  _onKeyDown: function (ev) {\n    var keyCode = ev.which;\n    if (keyCode === ENTER_KEY_CODE) {\n      this._onConfirm();\n    }\n  },\n\n  _renderLoadingView: function () {\n    this.$el.html(\n      renderLoading({\n        title: this._loadingTitle\n      })\n    );\n  },\n\n  _$content: function () {\n    return this.$('.js-content');\n  },\n\n  _onConfirm: function () {\n    if (this._hasLoading) {\n      this._renderLoadingView();\n    } else {\n      this._modalModel.destroy();\n    }\n\n    this._runAction();\n  },\n\n  _onCancel: function () {\n    this._modalModel.destroy();\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar renderLoading = require('../../loading/render-loading');\nvar ErrorView = require('../../error/error-view');\nvar REQUIRED_OPTS = [\n  'errorTitle',\n  'loadingTitle',\n  'runAction',\n  'modalModel'\n];\n\n/**\n *  Remove confirmation dialog\n */\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      renderLoading({\n        title: this._loadingTitle\n      })\n    );\n    this._runAction({\n      error: this._renderErrorView.bind(this)\n    });\n    return this;\n  },\n\n  _renderErrorView: function (errorMessage) {\n    var errorView = new ErrorView({\n      title: this._errorTitle,\n      desc: errorMessage\n    });\n    this.$el.html(errorView.render().el);\n    this.addView(errorView);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"IntermediateInfo\">\\n  <div class=\"Dialog-header Modal-header js-header\">\\n    <div class=\"Dialog-headerIcon Dialog-headerIcon--negative\">\\n      <i class=\"CDB-IconFont CDB-IconFont-cockroach\"></i>\\n    </div>\\n    <h2 class=\"CDB-Text CDB-Size-large u-bSpace u-errorTextColor\">'+\n((__t=( _t('components.modals.dataset-metadata.error.title') ))==null?'':_.escape(__t))+\n'</h2>\\n    <h3 class=\"CDB-Text CDB-Size-medium u-secondaryTextColor\">'+\n((__t=( error ))==null?'':__t)+\n'</h3>\\n  </div>\\n\\n  <div class=\"Modal-body\">\\n    <div class=\"Modal-body-inner\">\\n\\n      <div class=\"js-footer\">\\n        <ul class=\"Modal-actions is-narrow\">\\n          <li class=\"Modal-actions-button\">\\n            <button class=\"CDB-Button CDB-Button--primary js-back\">\\n              <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">'+\n((__t=( _t('components.modals.dataset-metadata.back-btn') ))==null?'':_.escape(__t))+\n'</span>\\n            </button>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n</div>';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar VisMetadataModel = require('../../../data/vis-metadata-model');\nvar template = require('./dataset-metadata.tpl');\nvar FooterView = require('./footer/footer-view');\nvar templateError = require('./dataset-metadata-error.tpl');\nvar templateLoading = require('../../loading/render-loading');\nvar FormView = require('./form/form-view');\nvar saveMetadata = require('./save-metadata-dataset');\nvar errorParser = require('../../../helpers/error-parser');\nvar Notifier = require('../../../components/notifier/notifier');\nvar utils = require('../../../helpers/utils');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onBackFromError'\n  },\n\n  className: 'Dialog-content Dialog-content--expanded',\n\n  initialize: function (opts) {\n    if (!opts.modalModel) throw new TypeError('modalModel is required');\n    if (!opts.visDefinitionModel) throw new TypeError('visDefinitionModel is required');\n    if (!opts.configModel) throw new TypeError('configModel is required');\n    if (opts.isLocked === undefined) throw new TypeError('isLocked is required');\n\n    this._modalModel = opts.modalModel;\n    this._visDefinitionModel = opts.visDefinitionModel;\n    this._configModel = opts.configModel;\n    this._isLocked = opts.isLocked;\n\n    this._visMetadataModel = new VisMetadataModel({\n      name: this._visDefinitionModel.get('name'),\n      description: this._visDefinitionModel.get('description'),\n      license: this._visDefinitionModel.get('license'),\n      source: this._visDefinitionModel.get('source'),\n      attributions: this._visDefinitionModel.get('attributions'),\n      tags: this._visDefinitionModel.get('tags')\n    });\n\n    this._stateModel = new Backbone.Model({\n      status: 'show'\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    if (this._hasError()) {\n      this._renderError();\n    } else if (this._isLoading()) {\n      this._renderLoading();\n    } else {\n      this.$el.html(template());\n      this._initViews();\n    }\n    return this;\n  },\n\n  _initViews: function () {\n    var formView = new FormView({\n      visDefinitionModel: this._visDefinitionModel,\n      visMetadataModel: this._visMetadataModel,\n      configModel: this._configModel,\n      isLocked: this._isLocked\n    });\n\n    this.$('.js-content').append(formView.render().el);\n    this.addView(formView);\n\n    var footerView = new FooterView({\n      visMetadataModel: this._visMetadataModel,\n      onSaveAction: this._onSave.bind(this)\n    });\n\n    this.$('.js-footer').append(footerView.render().el);\n    this.addView(footerView);\n  },\n\n  _renderError: function () {\n    var error = this._stateModel.get('error');\n    this.$el.html(templateError({\n      error: _t('components.modals.dataset-metadata.error.subtitle', {error: error})\n    }));\n  },\n\n  _renderLoading: function () {\n    this.$el.html(\n      templateLoading({\n        title: _t('components.modals.dataset-metadata.loading')\n      })\n    );\n  },\n\n  _initBinds: function () {\n    this._stateModel.on('change:status', this.render, this);\n    this.add_related_model(this._stateModel);\n  },\n\n  _hasError: function () {\n    return this._stateModel.get('status') === 'error';\n  },\n\n  _isLoading: function () {\n    return this._stateModel.get('status') === 'loading';\n  },\n\n  _onSave: function () {\n    this._stateModel.set({status: 'loading'});\n\n    saveMetadata({\n      onSuccess: this._onSuccessSave.bind(this),\n      onError: this._onErrorSave.bind(this),\n      visDefinitionModel: this._visDefinitionModel,\n      name: this._getMetadataName(),\n      description: this._getMetadataDescription(),\n      tags: this._getMetadataTags(),\n      source: this._visMetadataModel.get('source'),\n      attributions: this._visMetadataModel.get('attributions'),\n      license: this._visMetadataModel.get('license')\n    });\n  },\n\n  _onSuccessSave: function () {\n    var self = this;\n    Notifier.addNotification({\n      status: 'success',\n      info: _t('components.modals.dataset-metadata.success', {\n        name: self._getMetadataName()\n      }),\n      closable: true,\n      delay: Notifier.DEFAULT_DELAY\n    });\n\n    this._modalModel.destroy();\n  },\n\n  _onErrorSave: function (e) {\n    this._stateModel.set({\n      status: 'error',\n      error: errorParser(e)\n    });\n  },\n\n  _onBackFromError: function () {\n    this._stateModel.set({status: 'show'});\n  },\n\n  _getMetadataName: function () {\n    return utils.sanitizeHtml(this._visMetadataModel.get('name'));\n  },\n\n  _getMetadataDescription: function () {\n    return utils.sanitizeHtml(this._visMetadataModel.get('description'));\n  },\n\n  _getMetadataTags: function () {\n    return _.map(this._visMetadataModel.get('tags'), function (tag) {\n      return utils.sanitizeHtml(tag);\n    });\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"25px\" height=\"25px\" viewBox=\"0 0 25 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n          <g id=\"Group\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n              <path d=\"M16,13 L17,13 L17,5.5 C17,5.433 16.986,5.368 16.961,5.308 C16.936,5.247 16.899,5.192 16.853,5.146 L11.854,0.147 C11.808,0.101 11.753,0.064 11.692,0.039 C11.632,0.014 11.567,0 11.5,0 L0.5,0 C0.224,0 0,0.224 0,0.5 L0,21.5 C0,21.776 0.224,22 0.5,22 L9.5,22 L9.5,21 L1,21 L1,1 L11,1 L11,5.5 C11,5.776 11.224,6 11.5,6 L16,6 L16,13 L16,13 Z M12,1.707 L15.293,5 L12,5 L12,1.707 L12,1.707 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n              <path d=\"M23.854,14.646 L21.354,12.146 C21.166,11.958 20.834,11.958 20.647,12.146 L13.146,19.648 C13.089,19.705 13.054,19.773 13.03,19.845 C13.028,19.852 13.021,19.857 13.019,19.865 L12.019,23.365 C11.969,23.539 12.018,23.727 12.146,23.856 C12.241,23.951 12.369,24.002 12.5,24.002 C12.546,24.002 12.592,23.996 12.637,23.983 L16.137,22.983 C16.144,22.981 16.149,22.974 16.157,22.972 C16.229,22.948 16.297,22.913 16.354,22.856 L23.855,15.354 C24.05,15.158 24.05,14.842 23.854,14.646 L23.854,14.646 Z M16,21.795 L14.207,20.002 L19.001,15.207 L20.794,17 L16,21.795 L16,21.795 Z M13.747,20.957 L15.045,22.255 L13.228,22.775 L13.747,20.957 L13.747,20.957 Z M21.501,16.293 L19.708,14.5 L21.001,13.207 L22.794,15 L21.501,16.293 L21.501,16.293 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n          </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        '+\n((__t=( _t('components.modals.dataset-metadata.modal-title') ))==null?'':_.escape(__t))+\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">\\n        '+\n((__t=( _t('components.modals.dataset-metadata.modal-desc') ))==null?'':_.escape(__t))+\n'\\n      </p>\\n      <div class=\"Modal-listTextItem js-content\"></div>\\n      <div class=\"js-footer\"></div>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./footer.tpl');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'ul',\n  className: 'Modal-listActions u-flex u-alignCenter ',\n\n  events: {\n    'click .js-save': '_save'\n  },\n\n  initialize: function (opts) {\n    if (!opts.visMetadataModel) throw new Error('visMetadataModel is required');\n    if (!opts.onSaveAction) throw new Error('onSaveAction is required');\n\n    this._visMetadataModel = opts.visMetadataModel;\n    this._onSaveAction = opts.onSaveAction;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this._visMetadataModel.on('change', this.render, this);\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        canFinish: this._visMetadataModel.isValid()\n      })\n    );\n    return this;\n  },\n\n  _save: function () {\n    this._visMetadataModel.isValid() && this._onSaveAction();\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<li class=\"Modal-listActionsitem\">\\n  <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-close\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n      '+\n((__t=( _t('components.modals.dataset-metadata.cancel-btn') ))==null?'':_.escape(__t))+\n'\\n    </span>\\n  </button>\\n</li>\\n<li class=\"Modal-listActionsitem\">\\n  <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-save '+\n((__t=( canFinish ? '' : 'is-disabled' ))==null?'':_.escape(__t))+\n'\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase \">\\n      '+\n((__t=( _t('components.modals.dataset-metadata.save-btn') ))==null?'':_.escape(__t))+\n'\\n    </span>\\n  </button>\\n</li>\\n\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar templateForm = require('./form.tpl');\nrequire('../../../form-components/index');\nvar TipsyTooltipView = require('../../../tipsy-tooltip-view');\nvar utils = require('../../../../helpers/utils');\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'visMetadataModel',\n  'configModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Metadata-form',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    if (opts.isLocked === undefined) throw new TypeError('isLocked is required');\n    this._isLocked = opts.isLocked;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(templateForm());\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._addNameView();\n    this._addDescriptionView();\n    this._addSourceView();\n    this._addAttributionView();\n    this._addLicenseView();\n    this._addTagsView();\n    this._addTooltip();\n  },\n\n  _addInputView: function (key, view, placeholder, container, disabled) {\n    var obj = '_' + view;\n    var $view = new Backbone.Form.editors.Text({\n      key: key,\n      model: this._visMetadataModel,\n      schema: {\n        options: this._visDefinitionModel.get(key),\n        editorAttrs: {\n          placeholder: placeholder,\n          disabled: disabled || false\n        }\n      }\n    });\n    $view.on('change', this._commitView, this);\n    this[obj] = $view;\n    container.append($view.render().$el);\n  },\n\n  _addNameView: function () {\n    this._addInputView('name', 'nameInput', _t('components.modals.dataset-metadata.form.name-placeholder'), this.$('.js-name-field'), this._isLocked);\n  },\n\n  _addSourceView: function () {\n    this._addInputView('source', 'sourceInput', _t('components.modals.dataset-metadata.form.source-placeholder'), this.$('.js-source-field'));\n  },\n\n  _addAttributionView: function () {\n    this._addInputView('attributions', 'attributionInput', _t('components.modals.dataset-metadata.form.attributions-placeholder'), this.$('.js-attributions-field'));\n  },\n\n  _buildLicenseOptions: function () {\n    var items = this._configModel.get('licenses');\n    var emptyOption = [{\n      id: '',\n      name: '-'\n    }];\n    return _.chain(emptyOption.concat(items))\n      .compact()\n      .map(function (d) {\n        return {\n          val: d.id,\n          label: d.name\n        };\n      })\n      .value();\n  },\n\n  _addLicenseView: function () {\n    var options = this._buildLicenseOptions();\n\n    this._selectView = new Backbone.Form.editors.Select({\n      className: 'u-flex u-alignCenter',\n      key: 'license',\n      schema: {\n        options: options\n      },\n      model: this._visMetadataModel,\n      showSearch: false\n    });\n\n    this._selectView.on('change', this._commitView, this);\n    this._selectView.setValue(this._visMetadataModel.get('license') || 0);\n    this.$('.js-license-field').append(this._selectView.render().$el);\n  },\n\n  _addDescriptionView: function () {\n    this._descriptionView = new Backbone.Form.editors.TextArea({\n      className: 'CDB-Textarea Metadata-textarea',\n      key: 'description',\n      model: this._visMetadataModel,\n      schema: {\n        options: this._visDefinitionModel.get('description'),\n        editorAttrs: {\n          placeholder: _t('components.modals.dataset-metadata.form.description-placeholder')\n        }\n      }\n    });\n\n    this._descriptionView.on('change', this._commitView, this);\n\n    this.$('.js-description-field').append(this._descriptionView.render().$el);\n  },\n\n  _addTagsView: function () {\n    this._taglistView = new Backbone.Form.editors.Taglist({\n      key: 'tags',\n      model: this._visMetadataModel,\n      schema: {\n        options: {\n          tags: this._visDefinitionModel.get('tags') || []\n        }\n      }\n    });\n\n    this._taglistView.on('change', this._commitView, this);\n\n    this.$('.js-tags-field').append(this._taglistView.render().$el);\n    this.addView(this._taglistView);\n  },\n\n  _addTooltip: function () {\n    var title = this.$('.js-markdown').data('tooltip');\n    this._removeTooltip();\n\n    this._tooltip = new TipsyTooltipView({\n      el: this.$('.js-markdown'),\n      html: true,\n      title: function () {\n        return title;\n      }\n    });\n  },\n\n  _commitView: function (view) {\n    view.commit();\n    // Commit moves values from form to model. We need to override model value after commit()\n    if (view.model.changed.hasOwnProperty('name')) {\n      this._sanitizeName(view.model.get('name'));\n    }\n  },\n\n  _sanitizeName: function (name) {\n    this._visMetadataModel.set('name', utils.sanitizeHtml(name));\n  },\n\n  _removeTooltip: function () {\n    if (this._tooltip) {\n      this._tooltip.clean();\n    }\n  },\n\n  _removeBinds: function () {\n    this._nameView && this._nameView.off('change', this._commitView, this);\n    this._descriptionView && this._descriptionView.off('change', this._commitView, this);\n    this._taglistView && this._taglistView.off('change', this._commitView, this);\n    this._sourceInput && this._sourceInput.off('change', this._commitView, this);\n    this._attributionView && this._attributionView.off('change', this._commitView, this);\n    this._selectView && this._selectView.off('change', this._commitView, this);\n  },\n\n  clean: function () {\n    this._removeBinds();\n    CoreView.prototype.clean.call(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-tSpace-xl CDB-Text u-flex js-name-field\">\\n  <label class=\"Metadata-label CDB-Text CDB-Size-medium is-semibold u-upperCase u-ellipsis\">'+\n((__t=( _t('components.modals.dataset-metadata.form.name') ))==null?'':_.escape(__t))+\n'</label>\\n</div>\\n\\n<div class=\"u-tSpace-xl CDB-Text u-flex\">\\n  <label class=\"Metadata-label CDB-Text CDB-Size-medium is-semibold u-upperCase u-ellipsis\">'+\n((__t=( _t('components.modals.dataset-metadata.form.description') ))==null?'':_.escape(__t))+\n'</label>\\n  <div class=\"u-grow\">\\n    <div class=\"js-description-field u-bSpace\"></div>\\n    <div class=\"Markdown\">\\n      <span class=\"Markdown-tooltip js-markdown\" data-tooltip=\"<em>_italics_</em><br/><b>*bold*</b><br/>[link](http://link.com)\">\\n        <span class=\"Markdown-icon\">\\n          <i class=\"Markdown-icon-text\">M</i>\\n          <i class=\"Markdown-icon-char\"></i>\\n        </span>\\n        '+\n((__t=( _t('components.modals.dataset-metadata.form.markdown') ))==null?'':_.escape(__t))+\n'\\n      </span>\\n    </div>\\n  </div>\\n</div>\\n\\n<div class=\"u-tSpace-xl CDB-Text u-flex\">\\n  <label class=\"Metadata-label CDB-Text CDB-Size-medium is-semibold u-upperCase u-ellipsis\">'+\n((__t=( _t('components.modals.dataset-metadata.form.source') ))==null?'':_.escape(__t))+\n'</label>\\n  <div class=\"u-grow\">\\n    <div class=\"js-source-field u-bSpace\"></div>\\n  </div>\\n</div>\\n\\n<div class=\"u-tSpace-xl CDB-Text u-flex\">\\n  <label class=\"Metadata-label CDB-Text CDB-Size-medium is-semibold u-upperCase u-ellipsis\">'+\n((__t=( _t('components.modals.dataset-metadata.form.attributions') ))==null?'':_.escape(__t))+\n'</label>\\n  <div class=\"u-grow\">\\n    <div class=\"js-attributions-field u-bSpace\"></div>\\n  </div>\\n</div>\\n\\n<div class=\"u-tSpace-xl CDB-Text u-flex\">\\n  <label class=\"Metadata-label CDB-Text CDB-Size-medium is-semibold u-upperCase u-ellipsis\">'+\n((__t=( _t('components.modals.dataset-metadata.form.license') ))==null?'':_.escape(__t))+\n'</label>\\n  <div class=\"u-grow\">\\n    <div class=\"js-license-field u-bSpace Metadata-select\"></div>\\n  </div>\\n</div>\\n\\n<div class=\"u-tSpace-xl CDB-Text u-flex u-alignCenter js-tags-field\">\\n  <label class=\"Metadata-label CDB-Text CDB-Size-medium is-semibold u-upperCase u-ellipsis\">'+\n((__t=( _t('components.modals.dataset-metadata.form.tags') ))==null?'':_.escape(__t))+\n'</label>\\n</div>';\n}\nreturn __p;\n};\n",
    "var TITLE_SUFIX = require('../visualization-title-suffix-metadata');\n\nmodule.exports = function (opts) {\n  if (!opts.visDefinitionModel) throw new Error('visDefinitionModel is required');\n  if (!opts.name) throw new Error('name is required');\n\n  var visDefinitionModel = opts.visDefinitionModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var name = opts.name;\n  var description = opts.description;\n  var tags = opts.tags;\n  var source = opts.source;\n  var license = opts.license;\n  var attributions = opts.attributions;\n\n  var oldName = visDefinitionModel.get('name');\n\n  visDefinitionModel.save({\n    name: name,\n    description: description,\n    tags: tags,\n    source: source,\n    license: license,\n    attributions: attributions\n  }, {\n    wait: true,\n    success: function (mdl, attrs) {\n      document.title = name + TITLE_SUFIX;\n      successCallback && successCallback();\n    },\n    error: function (mdl, e) {\n      document.title = oldName + TITLE_SUFIX;\n      errorCallback && errorCallback(e);\n    }\n  });\n};\n",
    "var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar renderLoading = require('../../loading/render-loading');\nvar ErrorView = require('../../error/error-view');\nvar template = require('./modal-export-data.tpl');\nvar MAX_SQL_GET_LENGTH = 1000;\nvar CSV_FILTER = 'SELECT * FROM (%%sql%%) as subq ';\nvar FORMATS = [\n  {\n    format: 'csv',\n    fetcher: 'fetchCSV',\n    geomRequired: false\n  }, {\n    format: 'shp',\n    fetcher: 'fetch',\n    geomRequired: true\n  }, {\n    format: 'kml',\n    fetcher: 'fetch',\n    geomRequired: true\n  }, {\n    format: 'geojson',\n    label: 'geo json',\n    fetcher: 'fetch',\n    geomRequired: true\n  }, {\n    format: 'svg',\n    fetcher: 'fetchSVG',\n    geomRequired: true\n  }\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-confirm': '_onConfirm',\n    'click .js-cancel': '_close'\n  },\n\n  options: {\n    autoClose: true\n  },\n\n  initialize: function (opts) {\n    if (!opts.fileName) throw new Error('name is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.queryGeometryModel) throw new Error('queryGeometryModel is required');\n    if (!opts.modalModel) throw new Error('modalModel is required');\n\n    this._configModel = opts.configModel;\n    this._fileName = opts.fileName;\n    this._queryGeometryModel = opts.queryGeometryModel;\n    this._modalModel = opts.modalModel;\n\n    this._initBinds();\n\n    if (this._queryGeometryModel.get('status') === 'unfetched') {\n      this._queryGeometryModel.fetch();\n    }\n  },\n\n  render: function () {\n    var geom = this._queryGeometryModel.get('simple_geom');\n\n    if (this._queryGeometryModel.get('status') === 'fetched' || this._queryGeometryModel.get('status') === 'unavailable') {\n      this.$el.html(\n        template({\n          formats: FORMATS,\n          url: this._configModel.getSqlApiUrl(),\n          isGeoreferenced: !!geom\n        })\n      );\n    } else {\n      this._renderLoadingContent(_t('components.modals.export-data.loading.geometry'));\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._queryGeometryModel.bind('change:status', function () {\n      if (this._queryGeometryModel.get('status') !== 'unavailable') {\n        this.render();\n      } else {\n        this.showError(_t('components.modals.export-data.error.geometry-error'));\n      }\n    }, this);\n    this.add_related_model(this._queryGeometryModel);\n  },\n\n  /**\n   * search a format based on its name in the format array\n   * @param  {string} format Format name\n   * @return {Object}\n   */\n  _getFormat: function (format) {\n    for (var n in FORMATS) {\n      if (FORMATS[n].format === format) {\n        return FORMATS[n];\n      }\n    }\n  },\n\n  _onConfirm: function () {\n    this._form = this.$('.js-form');\n    var formatName = $('.js-format[name=format]:checked', this._form).data('format');\n    var format = this._getFormat(formatName);\n\n    this[format.fetcher](formatName);\n  },\n\n  /**\n   * Create a dictionary with the options shared between all the methods\n   * @return {Object}\n   */\n  getBaseOptions: function () {\n    return {\n      filename: this._fileName,\n      apiKey: this._configModel.get('api_key')\n    };\n  },\n\n  /**\n   * Returns a specific sql filtered by the_geom, used on CSV exports\n   * @return {string}\n   */\n  getGeomFilteredSql: function () {\n    var sql = this._queryGeometryModel.get('query');\n    var geom = this._queryGeometryModel.get('simple_geom');\n\n    // if we have \"the_geom\" in our current schema, we apply a custom sql\n    if (geom) {\n      return CSV_FILTER.replace(/%%sql%%/g, sql);\n    }\n    // Otherwise, we apply regular sql\n    return sql;\n  },\n\n  /**\n   * Populates the hidden form with the format related values and submits them to get the file\n   * @param  {Object} options Base options\n   * @param  {String} sql Sql of the document to be retrieved\n   */\n  _fetch: function (options, sql) {\n    this.$('.js-format').val(options.format);\n    this.$('.js-q').val(sql);\n    this.$('.js-filename').val(options.filename);\n    this.$('.js-apiKey').val(options.apiKey);\n\n    var skipFields = ['the_geom_webmercator'];\n    if (options.format !== 'csv') {\n      skipFields.push('the_geom');\n    }\n    this.$('.js-skipfields').val(skipFields.join(','));\n\n    // TODO: track metrics\n\n    // check if the sql is big or not, and send the request as a verb or other. This is a HACK.\n    if (sql.length < MAX_SQL_GET_LENGTH) {\n      var location = this.$('.js-form').attr('action') + '?' + this.$('.js-form').serialize();\n      this._fetchGET(location);\n    } else {\n      // I can't find a way of making the iframe trigger load event when its get a form posted,\n      // so we need to leave like it was until\n      this.submit();\n    }\n\n    this.$('.js-skipfields').attr('disabled', 'disabled');\n\n    if (this.options.autoClose) {\n      this._close();\n    } else {\n      this._renderLoadingContent(_t('components.modals.export-data.loading.preparing'));\n    }\n  },\n\n  showError: function (errorMessage) {\n    var errorView = new ErrorView({\n      title: _t('hello'),\n      desc: errorMessage\n    });\n    this.$el.html(errorView.render().el);\n    this.addView(errorView);\n  },\n\n  _fetchGET: function (url) {\n    function getError (content) {\n      // sql api returns a json when it fails\n      // but if the browser is running some plugin that\n      // formats it, the window content is the html\n      // so search for the word \"error\"\n      var error = null;\n      try {\n        var json = JSON.parse(content);\n        error = json.error[0];\n      } catch (e) {\n        if (content && content.indexOf('error') !== -1) {\n          error = _t('components.modals.export-data.error.unknown');\n        }\n      }\n      return error;\n    }\n\n    var self = this;\n    var checkInterval;\n\n    var w = window.open(url);\n    w.onload = function () {\n      clearInterval(checkInterval);\n      var error = getError(w.document.body.textContent);\n      if (error) {\n        self.showError(error);\n      } else {\n        self._close();\n      }\n      w.close();\n    };\n    window.focus();\n    checkInterval = setInterval(function check () {\n      // safari needs to check the body because it never\n      // calls onload\n      if (w.closed || (w.document && w.document.body.textContent.length === 0)) {\n        self._close();\n        clearInterval(checkInterval);\n      }\n    }, 100);\n  },\n\n  /**\n   * Base fetch, for the formats that don't require special threatment\n   * @param  {String} formatName\n   */\n  fetch: function (formatName) {\n    var options = this.getBaseOptions();\n    options.format = formatName;\n    var sql = this._queryGeometryModel.get('query');\n    this._fetch(options, sql);\n  },\n\n  /**\n   * Gets the options needed for csv format and fetch the document\n   * @param  {String} formatName\n   */\n  fetchCSV: function () {\n    var options = this.getBaseOptions();\n    options.format = 'csv';\n    var sql = this.getGeomFilteredSql();\n    this.$('.js-skipfields').removeAttr('disabled');\n    this._fetch(options, sql);\n  },\n  /**\n   * Gets the options needed for svg format and fetch the document\n   * @param  {String} formatName\n   */\n  fetchSVG: function () {\n    this.fetch('svg');\n  },\n\n  /**\n   * Submits the form. This method is separated to ease the testing\n   */\n  submit: function () {\n    this.$('.js-form').submit();\n  },\n\n  _renderLoadingContent: function (title) {\n    this.$el.html(\n      renderLoading({\n        title: title\n      })\n    );\n  },\n\n  _close: function () {\n    this._modalModel.destroy();\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"24px\" viewbox=\"459 348 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Export-dataset\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(459.000000, 348.000000)\">\\n          <path d=\"M1,1 L11,1 L11,5.5 C11,5.776 11.224,6 11.5,6 L16,6 L16,9.5 L17,9.5 L17,5.502 C17,5.502 17,5.502 17,5.501 C17,5.5 17,5.501 17,5.5 C17,5.447 16.985,5.398 16.97,5.35 C16.966,5.337 16.967,5.323 16.962,5.311 C16.936,5.247 16.896,5.19 16.847,5.142 L11.854,0.147 C11.808,0.101 11.753,0.064 11.692,0.039 C11.632,0.014 11.567,0 11.5,0 L0.5,0 C0.224,0 0,0.224 0,0.5 L0,21.5 C0,21.776 0.224,22 0.5,22 L10.5,22 L10.5,21 L1,21 L1,1 L1,1 Z M12,1.708 L15.291,5 L12,5 L12,1.708 L12,1.708 Z\" id=\"Shape\" fill=\"#2E3C43\"/>\\n          <path d=\"M17.5,11 C13.916,11 11,13.916 11,17.5 C11,21.084 13.916,24 17.5,24 C21.084,24 24,21.084 24,17.5 C24,13.916 21.084,11 17.5,11 L17.5,11 Z M17.5,23 C14.467,23 12,20.533 12,17.5 C12,14.467 14.467,12 17.5,12 C20.533,12 23,14.467 23,17.5 C23,20.533 20.533,23 17.5,23 L17.5,23 Z\" id=\"Shape\" fill=\"#2E3C43\"/>\\n          <path d=\"M17.858,14.425 C17.767,14.331 17.641,14.272 17.5,14.272 C17.359,14.272 17.232,14.331 17.142,14.425 L14.965,16.602 C14.77,16.797 14.77,17.114 14.965,17.309 C15.16,17.504 15.477,17.504 15.672,17.309 L17,15.981 L17,20.226 C17,20.502 17.224,20.726 17.5,20.726 C17.776,20.726 18,20.502 18,20.226 L18,15.981 L19.328,17.309 C19.426,17.407 19.554,17.455 19.682,17.455 C19.81,17.455 19.938,17.406 20.036,17.309 C20.231,17.114 20.231,16.797 20.036,16.602 L17.858,14.425 L17.858,14.425 Z\" id=\"Shape\" fill=\"#2E3C43\" transform=\"translate(17.500500, 17.499000) scale(1, -1) translate(-17.500500, -17.499000) \"/>\\n        </g>\\n      </svg>\\n    </div>\\n\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--xl\">'+\n((__t=( _t('components.modals.export-data.title') ))==null?'':_.escape(__t))+\n'</h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">'+\n((__t=( _t('components.modals.export-data.desc') ))==null?'':_.escape(__t))+\n'.</p>\\n      ';\n if (!isGeoreferenced) { \n__p+='\\n        <p class=\"CDB-Text CDB-Size-large u-altTextColor u-tSpace-xl\">'+\n((__t=( _t('components.modals.export-data.no-geometry') ))==null?'':_.escape(__t))+\n'</p>\\n      ';\n } \n__p+='\\n\\n      <div class=\"Modal-listTextItem u-flex u-alignCenter\">\\n        <h3 class=\"CDB-Text CDB-Size-medium is-semibold u-upperCase\">Select format</h3>\\n\\n        <form class=\"js-form\" method=\"POST\" action=\"'+\n((__t=( url ))==null?'':_.escape(__t))+\n'\">\\n          <input type=\"hidden\" class=\"js-filename\" name=\"filename\" />\\n          <input type=\"hidden\" class=\"js-q\" name=\"q\" />\\n          <input type=\"hidden\" class=\"js-apiKey\" name=\"api_key\" />\\n          <input type=\"hidden\" class=\"js-skipfields\" name=\"skipfields\" disabled=\"disabled\" value=\"\" />\\n          <input type=\"hidden\" class=\"js-dp\" name=\"dp\" value=\"4\" disabled=\"disabled\" />\\n\\n          <ul class=\"Modal-listForm u-flex u-alignCenter CDB-Text CDB-Size-medium\">\\n            ';\n _.each(formats, function (format) { \n__p+='\\n            <li class=\"Modal-listFormItem\\n              ';\n if (isGeoreferenced === false && format.geomRequired === true) { \n__p+='\\n                is-disabled\\n              ';\n } \n__p+='\"\\n            >\\n              <input class=\"CDB-Radio js-format\" type=\"radio\" name=\"format\" data-format=\"'+\n((__t=( format.format ))==null?'':_.escape(__t))+\n'\"\\n                ';\n if (isGeoreferenced === false && format.geomRequired === true) { \n__p+='\\n                  disabled\\n                ';\n } \n__p+='\\n\\n                ';\n if (format.format === 'csv') { \n__p+='\\n                  checked\\n                ';\n } \n__p+='\\n              >\\n              <span class=\"u-iBlock CDB-Radio-face\"></span>\\n              <label class=\"u-iBlock u-lSpace u-upperCase\">'+\n((__t=( format.label || format.format ))==null?'':_.escape(__t))+\n'</label>\\n            </li>\\n            ';\n }); \n__p+='\\n          </ul>\\n        </form>\\n\\n      </div>\\n\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">'+\n((__t=( _t('components.modals.export-data.cancel') ))==null?'':_.escape(__t))+\n'</span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">'+\n((__t=( _t('components.modals.export-data.download') ))==null?'':_.escape(__t))+\n'</span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\n/**\n * View model of a modal\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    show: true,\n    createContentView: function () {\n      return new CoreView();\n    }\n  },\n\n  createContentView: function () {\n    return this.get('createContentView')(this);\n  },\n\n  show: function () {\n    this.set('show', true);\n  },\n\n  hide: function () {\n    this.set('show', false);\n  },\n\n  isHidden: function () {\n    return !this.get('show');\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.destroy}\n   */\n  destroy: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['destroy'].concat(args));\n  }\n});\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./modal.tpl');\n\n// Ought to match the duration of the .Dialog.is-closing animation.\nvar CLOSE_DELAY_MS = 120;\n\nmodule.exports = CoreView.extend({\n  className: function () {\n    if (this.options.escapeOptionsDisabled) {\n      return 'Dialog is-white';\n    } else {\n      return 'Dialog is-opening is-white';\n    }\n  },\n\n  events: {\n    'click .js-close': '_onClose'\n  },\n\n  initialize: function () {\n    this.listenTo(this.model, 'change:show', this._onShowChange);\n    this.listenTo(this.model, 'destroy', this._onDestroy);\n\n    this._escapeOptionsDisabled = this.options.escapeOptionsDisabled;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        escapeOptionsDisabled: this.options.escapeOptionsDisabled || false\n      })\n    );\n\n    var view = this.model.createContentView();\n    this.addView(view);\n    view.render();\n    this.$('.js-content').append(view.el);\n\n    return this;\n  },\n\n  show: function () {\n    this.model.show();\n  },\n\n  hide: function () {\n    this.model.hide();\n  },\n\n  destroy: function () {\n    // 'remove' would be a better name ofc, but there is already an internal method with that name in CoreView\n    this.model.destroy();\n  },\n\n  _onShowChange: function (m, show) {\n    if (show) {\n      this.$el.show();\n      this.$el.removeClass('is-closing').addClass('is-opening');\n    } else {\n      this.$el.removeClass('is-opening').addClass('is-closing');\n      this._delayDueToAnimation(function () {\n        this.$el.hide();\n      });\n    }\n  },\n\n  _onClose: function (e) {\n    e.stopPropagation();\n    this.destroy();\n  },\n\n  _onDestroy: function () {\n    this.hide();\n    _.invoke(this._subviews, 'allOff');\n    this._delayDueToAnimation(function () {\n      this.clean();\n    });\n  },\n\n  _delayDueToAnimation: function (fn) {\n    setTimeout(fn.bind(this), CLOSE_DELAY_MS);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (!escapeOptionsDisabled) { \n__p+='\\n  <button class=\"CDB-Shape js-close Dialog-closeBtn\">\\n    <div class=\"CDB-Shape-close is-blue is-huge\"></div>\\n  </button>\\n';\n } \n__p+='\\n<div class=\"Dialog-contentWrapper js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar ModalView = require('./modal-view');\nvar ModalViewModel = require('./modal-view-model');\n\nvar DESTROYED_MODAL_EVENT = 'destroyedModal';\n\n/**\n * Top-level API to handle modals.\n * Is intended to be instantiated and registered in some top-level namespace to be accessibel within the lifecycle of\n * an client-side application.\n *\n * Example:\n * // In some entry-point:\n * cdb.modals = new ModalsServiceModel();\n *\n * // Later, in any view, calling create will create a new modal viewModel\n * var modalView = cdb.modals.create(fn)\n *\n * You will probably see the name of \"Dialog\" here and there, it's the old nomenclature for the concept of Modal.\n */\nmodule.exports = Backbone.Model.extend({\n\n  /**\n   * Creates a new modal view\n   *\n   * @param {Function} createContentView\n   * @return {View} the new modal view\n   */\n  create: function (createContentView, escapeOptionsDisabled) {\n    if (!_.isFunction(createContentView)) throw new Error('createContentView is required');\n\n    if (escapeOptionsDisabled) {\n      this._escapeOptionsDisabled = escapeOptionsDisabled;\n    }\n\n    if (!this._modalView) {\n      this.trigger('willCreateModal');\n      this._modalView = this._newModalView();\n      this.trigger('didCreateModal', this._modalView);\n      document.body.appendChild(this._modalView.el);\n    }\n\n    this._modalView.model.set('createContentView', createContentView);\n    this._modalView.render();\n\n    return this._modalView;\n  },\n\n  /**\n   * Convenience method to add a listener when current modal is destroyed\n   *\n   * This is the same as doing\n   * modals.create(function (model) {\n   *   model.once('destroy', callback, context); // <-- same as modals.onDestroyOnce(callback, context);\n   *   return new MyView({  });\n   * });\n   *\n   * @param {Function} callback\n   * @param {Object} [context = undefined]\n   */\n  onDestroyOnce: function (callback, context) {\n    this.once(DESTROYED_MODAL_EVENT, callback, context);\n  },\n\n  destroy: function () {\n    if (this._modalView) {\n      this._modalView.model.destroy();\n    }\n  },\n\n  _newModalView: function () {\n    var self = this;\n    var viewModel = new ModalViewModel();\n    this._handleBodyClass(viewModel);\n\n    if (!this._escapeOptionsDisabled) {\n      this._destroyOnEsc(viewModel);\n    }\n\n    this.listenToOnce(viewModel, 'destroy', function () {\n      this._modalView = null;\n      this.trigger.apply(this, [DESTROYED_MODAL_EVENT].concat(Array.prototype.slice.call(arguments)));\n      this.stopListening(viewModel);\n    });\n    return new ModalView({\n      model: viewModel,\n      escapeOptionsDisabled: self._escapeOptionsDisabled\n    });\n  },\n\n  _destroyOnEsc: function (viewModel) {\n    var destroyOnEsc = function (ev) {\n      if (ev.keyCode === 27) {\n        ev.stopPropagation();\n        viewModel.destroy();\n      }\n    };\n    document.addEventListener('keydown', destroyOnEsc);\n    this.listenToOnce(viewModel, 'destroy', function () {\n      document.removeEventListener('keydown', destroyOnEsc);\n    });\n  },\n\n  /**\n   * TL;DR this method manages document.body class state, to enable scroll inside of an open modal.\n   *\n   * Some modal content have too much content that can be displayed in the viewport the scroll needs to be enabled.\n   * Since the modal is implemented as a fixed positioned element the body needs to be fixated too, for the scroll to\n   * be enabled inside the modal instead.\n   */\n  _handleBodyClass: function (viewModel) {\n    var bodyClass = 'is-inDialog';\n    document.body.classList.add(bodyClass);\n    this.set('open', true);\n\n    this.listenTo(viewModel, 'change:show', function (m, show) {\n      document.body.classList[show ? 'add' : 'remove'](bodyClass);\n      this.set('open', show);\n    });\n\n    this.listenToOnce(viewModel, 'destroy', function () {\n      document.body.classList.remove(bodyClass);\n      this.set('open', false);\n    });\n  },\n\n  isOpen: function () {\n    return this.get('open') === true;\n  }\n\n});\n",
    "var _ = require('underscore');\n\n/**\n * type property should match the value given from the API.\n */\nvar ALL_OPTIONS = [{\n  privacy: 'PUBLIC',\n  title: _t('components.modals.publish.privacy.public.title'),\n  desc: _t('components.modals.publish.privacy.public.body'),\n  alwaysEnabled: true,\n  cssClass: 'green'\n}, {\n  privacy: 'LINK',\n  title: _t('components.modals.publish.privacy.link.title'),\n  desc: _t('components.modals.publish.privacy.link.body'),\n  cssClass: 'orange'\n}, {\n  privacy: 'PASSWORD',\n  title: _t('components.modals.publish.privacy.password.title'),\n  desc: _t('components.modals.publish.privacy.password.body'),\n  cssClass: 'orange-dark'\n}, {\n  privacy: 'PRIVATE',\n  title: _t('components.modals.publish.privacy.private.title'),\n  desc: _t('components.modals.publish.privacy.private.body'),\n  cssClass: 'red'\n}];\n\nmodule.exports = function (visDefinitionModel, userModel) {\n  var isVisualization = visDefinitionModel.isVisualization();\n  var actions = userModel.get('actions');\n  var canSelectPremiumOptions = actions[ isVisualization ? 'private_maps' : 'private_tables' ];\n  var currentPrivacy = visDefinitionModel.get('privacy');\n  var availableOptions = visDefinitionModel.privacyOptions();\n\n  return _.chain(ALL_OPTIONS)\n    .filter(function (option) {\n      return _.contains(availableOptions, option.privacy);\n    })\n    .map(function (option) {\n      // Set state that depends on vis and user attrs, they should not vary during the lifecycle of this collection\n      return _.defaults({\n        selected: option.privacy === currentPrivacy,\n        disabled: !(option.alwaysEnabled || canSelectPremiumOptions)\n      }, option);\n    })\n    .value();\n};\n",
    "var Backbone = require('backbone');\nvar PrivacyModel = require('./privacy-model');\nvar PasswordModel = require('./privacy-password-model');\n\n/**\n * Collection that holds the different privacy options.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, options) {\n    if (attrs.privacy === 'PASSWORD') {\n      return new PasswordModel(attrs, options);\n    } else {\n      return new PrivacyModel(attrs, options);\n    }\n  },\n\n  initialize: function () {\n    this.bind('change:selected', this._deselectLastSelected, this);\n  },\n\n  searchByPrivacy: function (privacy) {\n    return this.findWhere({privacy: privacy});\n  },\n\n  selectedOption: function () {\n    return this.find(function (option) {\n      return option.get('selected');\n    });\n  },\n\n  passwordOption: function () {\n    return this.find(function (option) {\n      return option.get('privacy') === 'PASSWORD';\n    });\n  },\n\n  _deselectLastSelected: function (m, isSelected) {\n    if (isSelected) {\n      this.each(function (option) {\n        if (option !== m) {\n          option.set({selected: false});\n        }\n      });\n    }\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    privacy: 'PUBLIC',\n    disabled: false,\n    selected: false,\n    password: undefined\n  },\n\n  validate: function (attrs) {\n    if (attrs.disabled && attrs.selected) {\n      return 'Option can not be disabled and selected at the same time';\n    }\n  },\n\n  classNames: function () {\n    return _.chain(['disabled', 'selected'])\n      .map(function (attr) { return this.attributes[attr] !== undefined ? 'is-' + attr : undefined; }, this)\n      .compact().value().join(' ');\n  },\n\n  canSave: function () {\n    return !this.get('disabled');\n  },\n\n  isPassword: function () {\n    return false;\n  },\n\n  isSelected: function () {\n    return this.get('selected') === true;\n  },\n\n  saveToVis: function (vis, callbacks) {\n    return vis.save(this._attrsToSave(), _.extend({ wait: true }, callbacks));\n  },\n\n  _attrsToSave: function () {\n    return _.pick(this.attributes, 'privacy', 'password');\n  }\n});\n",
    "var _ = require('underscore');\nvar PrivacyModel = require('./privacy-model');\n\nvar FAKE_PASSWORD = '!@#!@#';\n\n/**\n * View model for the special privacy option representing a password protected map.\n * It handles the logic related to the password that needs to be set for the option.\n */\nmodule.exports = PrivacyModel.extend({\n\n  initialize: function () {\n    PrivacyModel.prototype.initialize.apply(this, arguments);\n    this.set('password', FAKE_PASSWORD);\n  },\n\n  /**\n   * @override OptionModel.attrsToSave\n   */\n  _attrsToSave: function () {\n    var attrs = PrivacyModel.prototype._attrsToSave.call(this);\n\n    if (attrs.password === FAKE_PASSWORD) {\n      delete attrs.password;\n    }\n\n    return attrs;\n  },\n\n  canSave: function () {\n    return !this.get('disabled') && !_.isEmpty(this.get('password'));\n  },\n\n  isPassword: function () {\n    return true;\n  }\n});\n",
    "var $ = require('jquery');\nvar moment = require('moment');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar template = require('./publish-button.tpl');\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'mapcapsCollection',\n  'configModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-button': '_onUpdate'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this.model = new Backbone.Model({\n      status: 'idle'\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var publishedOn = this._mapcapsCollection.length > 0\n                    ? _t('components.modals.publish.share.last-published', { date:\n                        this.model.get('status') === 'updated'\n                        ? moment(this._mapcapsCollection.first().get('created_at')).fromNow()\n                        : moment(this._mapcapsCollection.first().get('created_at')).format('Do MMMM YYYY, HH:mm')\n                      })\n                    : _t('components.modals.publish.share.unpublished');\n\n    this.clearSubViews();\n    this.$el.html(template({\n      isPublished: this._mapcapsCollection.length > 0,\n      isLoading: this._isLoading(),\n      isDisabled: this._isDisabled(),\n      publishedOn: publishedOn\n    }));\n    return this;\n  },\n\n  _initBinds: function () {\n    this._mapcapsCollection.on('reset', this.render, this);\n    this.add_related_model(this._mapcapsCollection);\n    this.model.on('change:status', this.render, this);\n  },\n\n  _isLoading: function () {\n    return this.model.get('status') === 'loading';\n  },\n\n  _isDisabled: function () {\n    return this.model.get('status') === 'updated';\n  },\n\n  _onUpdate: function () {\n    var self = this;\n    var url = this._visDefinitionModel.mapcapsURL();\n    var data = {\n      api_key: this._configModel.get('api_key')\n    };\n\n    if (this._isDisabled()) return false;\n\n    self.model.set({status: 'loading'});\n\n    $.post(url, data)\n    .done(function (data) {\n      self._visDefinitionModel.set('visChanges', 0);\n      self._mapcapsCollection.add(data, {at: 0});\n      self.model.set({status: 'updated'});\n    })\n    .fail(function () {\n      self.model.set({status: 'error'});\n    });\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button class=\"Publish-modalButton CDB-Button CDB-Button--primary CDB-Button--small u-rSpace js-button ';\n if (isDisabled) {\n__p+='is-disabled';\n } \n__p+='\">\\n  <div class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase u-flex\">\\n    ';\n if (isLoading) { \n__p+='\\n      <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small u-iBlock\">\\n        <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n          <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n        </svg>\\n      </div>\\n      ';\n if (isPublished) { \n__p+='\\n      '+\n((__t=( _t('components.modals.publish.updating-btn') ))==null?'':_.escape(__t))+\n'\\n      ';\n } else { \n__p+='\\n      '+\n((__t=( _t('components.modals.publish.publishing-btn') ))==null?'':_.escape(__t))+\n'\\n      ';\n } \n__p+='\\n    ';\n } else { \n__p+='\\n      ';\n if (isPublished) { \n__p+='\\n      '+\n((__t=( _t('components.modals.publish.update-btn') ))==null?'':_.escape(__t))+\n'\\n      ';\n } else { \n__p+='\\n      '+\n((__t=( _t('components.modals.publish.publish-btn') ))==null?'':_.escape(__t))+\n'\\n      ';\n } \n__p+='\\n    ';\n } \n__p+='\\n  </div>\\n</button> '+\n((__t=( publishedOn ))==null?'':_.escape(__t))+\n'';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar moment = require('moment');\nvar CoreView = require('backbone/core-view');\nvar template = require('./publish.tpl');\nvar TabPaneTemplate = require('./tab-pane-submenu.tpl');\nvar createTextLabelsTabPane = require('../../tab-pane/create-text-labels-tab-pane');\nvar PublishView = require('./publish/publish-view');\nvar ShareView = require('./share/share-view');\nvar PrivacyDropdown = require('../../privacy-dropdown/privacy-dropdown-view');\nvar PublishButton = require('./publish-button-view');\nvar ShareWith = require('./share-with-view');\nvar UpgradeView = require('./upgrade-view');\n\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'visDefinitionModel',\n  'privacyCollection',\n  'userModel',\n  'configModel'\n];\n\nvar MODE_FULL = 'full';\nvar MODE_SHARE = 'share';\nvar MODE_PUBLISH = 'publish';\n\nmodule.exports = CoreView.extend({\n  className: 'Publish-modal',\n\n  events: {\n    'click .js-done': '_onDone'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    // Optional options\n    this._mapcapsCollection = opts.mapcapsCollection;\n    this.mode = opts.mode || MODE_FULL;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      name: this._visDefinitionModel.get('name'),\n      isSimple: !this._hasTabs(),\n      hasShareStats: this._hasShareStats()\n    }));\n\n    this._initViews();\n\n    if (this.mode === MODE_FULL) {\n      if (!this._hasOrganization()) {\n        this._makePublishView();\n      } else {\n        this._initTabsViews();\n      }\n    } else if (this.mode === MODE_SHARE) {\n      this._makeShareView();\n    } else if (this.mode === MODE_PUBLISH) {\n      this._makePublishView();\n    }\n\n    return this;\n  },\n\n  _hasShareStats: function () {\n    return this.mode !== MODE_PUBLISH && this._hasOrganization();\n  },\n\n  _hasOrganization: function () {\n    return this._userModel.isInsideOrg();\n  },\n\n  _hasTabs: function () {\n    var hasOrganization = this._hasOrganization();\n    return hasOrganization && this.mode === MODE_FULL;\n  },\n\n  _makePublishView: function () {\n    var view = this._createPublishView();\n    this.$('.js-panes').append(view.render().el);\n    this.addView(view);\n  },\n\n  _makeShareView: function () {\n    var view = this._createShareView();\n    this.$('.js-panes').append(view.render().el);\n    this.addView(view);\n  },\n\n  _initViews: function () {\n    var dropdown;\n    var publishButton;\n    var shareWith;\n    var upgradeView;\n    var publishedOn;\n\n    dropdown = new PrivacyDropdown({\n      privacyCollection: this._privacyCollection,\n      visDefinitionModel: this._visDefinitionModel,\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n\n    this.$('.js-dropdown').append(dropdown.render().el);\n    this.addView(dropdown);\n\n    if (this._mapcapsCollection !== undefined) {\n      publishButton = new PublishButton({\n        visDefinitionModel: this._visDefinitionModel,\n        mapcapsCollection: this._mapcapsCollection,\n        configModel: this._configModel\n      });\n\n      this.$('.js-update').append(publishButton.render().el);\n      this.addView(publishButton);\n    } else {\n      publishedOn = _t('components.modals.publish.share.last-published', { date:\n                      moment(this._visDefinitionModel.get('updated_at')).format('Do MMMM YYYY, HH:mm')\n                    });\n\n      this.$('.js-update').html(publishedOn);\n    }\n\n    if (this._hasShareStats()) {\n      shareWith = new ShareWith({\n        visDefinitionModel: this._visDefinitionModel,\n        userModel: this._userModel,\n        avatarClass: 'Share-user--big',\n        separationClass: 'u-rSpace--xl'\n      });\n      this.$('.js-share-users').append(shareWith.render().el);\n      this.addView(shareWith);\n    }\n\n    if (!this._hasOrganization()) {\n      upgradeView = new UpgradeView();\n      this.$('.js-upgrade').append(upgradeView.render().el);\n      this.addView(upgradeView);\n    }\n  },\n\n  _initTabsViews: function () {\n    var self = this;\n\n    var tabPaneTabs = [{\n      name: 'share',\n      label: _t('components.modals.publish.menu.share'),\n      createContentView: self._createShareView.bind(self)\n    }, {\n      name: 'publish',\n      label: _t('components.modals.publish.menu.publish'),\n      createContentView: self._createPublishView.bind(self)\n    }];\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: TabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          className: 'CDB-NavSubmenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavSubmenu-link u-upperCase Publish-modalLink'\n      }\n    };\n\n    this._layerTabPaneView = createTextLabelsTabPane(tabPaneTabs, tabPaneOptions);\n    this.$('.js-panes').append(this._layerTabPaneView.render().$el);\n    this.addView(this._layerTabPaneView);\n  },\n\n  _createShareView: function () {\n    return new ShareView({\n      className: 'Share-wrapper',\n      currentUserId: this._userModel.id,\n      visDefinitionModel: this._visDefinitionModel,\n      organization: this._userModel._organizationModel,\n      configModel: this._configModel\n    });\n  },\n\n  _createPublishView: function () {\n    return new PublishView({\n      visDefinitionModel: this._visDefinitionModel,\n      mapcapsCollection: this._mapcapsCollection,\n      userModel: this._userModel\n    });\n  },\n\n  _onDone: function () {\n    this._modalModel.destroy();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Publish-modalHeader\">\\n  <div class=\"u-inner\">\\n    <div class=\"CDB-Text CDB-Size-huge is-light u-ellipsis u-bSpace--m\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</div>\\n    <ul class=\"u-flex u-alignCenter\">\\n      <li class=\"js-dropdown u-rSpace--xl\"></li>\\n      ';\n if (hasShareStats) { \n__p+='\\n      <li class=\"js-share-users\">\\n      </li>\\n      ';\n } \n__p+='\\n      <li class=\"CDB-Text CDB-Size-medium u-altTextColor js-update\">\\n      </li>\\n  </div>\\n</div>\\n\\n<div class=\"Publish-modalBody js-panes\\n';\n if (isSimple) { \n__p+='is-simple';\n } \n__p+='\\n\">\\n  ';\n if (isSimple) { \n__p+='\\n    <div class=\"Publish-modalShadow\"></div>\\n  ';\n } \n__p+='\\n\\n</div>\\n\\n<div class=\"Dialog-footer Dialog-footer--expanded CreateDialog-footer Publish-modalFooter\">\\n  <div>\\n    <div class=\"CreateDialog-footerShadow\"></div>\\n    <div class=\"CreateDialog-footerLine\"></div>\\n    <div class=\"CreateDialog-footerInner \">\\n      <div class=\"CreateDialog-footerInfo\"></div>\\n      <div class=\"CreateDialog-footerActions js-footerActions u-flex u-justifySpace u-grow\">\\n        <div class=\"js-upgrade\"></div>\\n        <button class=\"CDB-Button CDB-Button--secondary js-done\">\\n          <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">'+\n((__t=( _t('components.modals.publish.done-btn') ))==null?'':_.escape(__t))+\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>';\n}\nreturn __p;\n};\n",
    "var linkIconTemplate = require('./icon-link.tpl');\nvar embedIconTemplate = require('./icon-embed.tpl');\n\nmodule.exports = function (visDefinitionModel) {\n  return [{\n    createIcon: function () {\n      return linkIconTemplate();\n    },\n    type: 'get-link',\n    content: visDefinitionModel.embedURL(),\n    private: visDefinitionModel.get('privacy') === 'PRIVATE'\n  }, {\n    createIcon: function () {\n      return embedIconTemplate();\n    },\n    type: 'embed',\n    content: '<iframe width=\"100%\" height=\"520\" frameborder=\"0\" src=\"' + encodeURI(visDefinitionModel.embedURL()) + '\" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>',\n    url: encodeURI(visDefinitionModel.embedURL()),\n    private: visDefinitionModel.get('privacy') === 'PRIVATE'\n  }];\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='\\n<svg width=\"25px\" height=\"25px\" viewBox=\"682 469 25 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <path d=\"M697.141667,478.48556 C695.774797,477.117815 695.774797,474.90231 697.141553,473.535553 L697.495051,473.182056 L697.141609,472.828502 L693.960609,469.646502 L693.607124,469.292907 L693.253515,469.646378 L690.685515,472.213378 L691.039,472.567 L691.469343,472.312431 C691.271611,471.978171 691.043454,471.678347 690.778553,471.413447 C689.020272,469.655166 686.171603,469.655166 684.414333,471.41356 C682.657184,473.170709 682.657184,476.020291 684.414447,477.777553 C684.682252,478.044267 684.982655,478.273359 685.314094,478.468734 L685.568,478.038 L685.214447,477.684447 L682.646447,480.252447 L682.292893,480.606 L682.646447,480.959553 L685.828447,484.141553 L686.181887,484.494994 L686.53544,484.141667 C687.903185,482.774797 690.11869,482.774797 691.485447,484.141553 C692.852184,485.508291 692.852184,487.724709 691.485447,489.091447 L691.131893,489.445 L691.485447,489.798553 L694.667447,492.980553 L695.021,493.334107 L695.374553,492.980553 L697.941553,490.413553 L697.588,490.06 L697.157928,490.315025 C697.3561,490.649221 697.584149,490.948256 697.849447,491.213553 C699.60664,492.971872 702.456485,492.971872 704.21278,491.213327 C705.970872,489.45636 705.970872,486.606515 704.212327,484.85022 C703.948015,484.584823 703.647051,484.355236 703.312906,484.158266 L703.059,484.589 L703.412553,484.942553 L705.979553,482.375553 L706.333107,482.022 L705.979553,481.668447 L702.797553,478.486447 L702.444,478.132893 L702.090447,478.486447 C700.725536,479.851357 698.508943,479.851087 697.141327,478.48522 L697.141667,478.48556 Z M696.434673,479.19278 C698.192747,480.948604 701.042155,480.948952 702.797553,479.193553 L702.090447,479.193553 L705.272447,482.375553 L705.272447,481.668447 L702.705447,484.235447 L702.248976,484.691917 L702.805094,485.019734 C703.068228,485.174844 703.301587,485.35286 703.504724,485.55683 C704.873128,486.923485 704.873128,489.13964 703.50556,490.506333 C702.139515,491.874128 699.92336,491.874128 698.556667,490.50656 C698.35252,490.302414 698.175052,490.069704 698.018072,489.804975 L697.689693,489.2512 L697.234447,489.706447 L694.667447,492.273447 L695.374553,492.273447 L692.192553,489.091447 L692.192553,489.798553 C693.949816,488.041291 693.949816,485.191709 692.192553,483.434447 C690.43531,481.677203 687.586815,481.677203 685.82856,483.434333 L686.535553,483.434447 L683.353553,480.252447 L683.353553,480.959553 L685.921553,478.391553 L686.378024,477.935083 L685.821906,477.607266 C685.560783,477.453341 685.327004,477.275057 685.12083,477.069724 C683.754816,475.703709 683.754816,473.487291 685.121553,472.120553 C686.488397,470.752834 688.703728,470.752834 690.071447,472.120553 C690.274695,472.323801 690.452152,472.557 690.608657,472.821569 L690.936742,473.376188 L691.392485,472.920622 L693.960485,470.353622 L693.253391,470.353498 L696.434391,473.535498 L696.434447,472.828447 C694.677203,474.58569 694.677203,477.434185 696.434333,479.19244 L696.434673,479.19278 Z\" id=\"Embed-it\" stroke=\"none\" fill=\"#AAAAAA\" fill-rule=\"evenodd\"></path>\\n</svg>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='  <svg width=\"23px\" height=\"23px\" viewBox=\"683 470 23 23\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <path d=\"M696.399947,482.106803 L696.485947,482.192803 C697.462209,483.169066 699.044791,483.169066 700.021053,482.192803 L703.986009,478.228848 C705.34724,476.86645 705.34724,474.642218 703.986356,473.279 L702.227953,471.521596 C700.866908,470.159384 698.640092,470.159384 697.278795,471.521848 L693.313991,475.485652 C692.337722,476.461921 692.337722,478.044329 693.31372,479.021577 L693.40202,479.108865 L694.10498,478.397635 L694.01898,478.312635 C693.435278,477.728171 693.435278,476.778579 694.021053,476.192803 L697.986009,472.228848 C698.956908,471.257116 700.550092,471.257116 701.520795,472.228652 L703.279047,473.985904 C704.24976,474.958282 704.24976,476.55005 703.278795,477.521848 L699.313991,481.485652 C698.728209,482.071434 697.778791,482.071434 697.193053,481.485697 L697.107053,481.399697 L696.399947,482.106803 L696.399947,482.106803 Z M692.10498,480.397635 L692.01898,480.312635 C691.044791,479.338434 689.462209,479.338434 688.485947,480.314697 L684.520991,484.278652 C683.159735,485.641076 683.159735,487.866424 684.520795,489.228652 L686.279047,490.985904 C687.640092,492.348116 689.866908,492.348116 691.228205,490.985652 L695.193009,487.021848 C696.169278,486.045579 696.169278,484.463171 695.19328,483.485923 L695.107053,483.399697 L694.399947,484.106803 L694.485947,484.192803 C695.071722,484.779329 695.071722,485.728921 694.485947,486.314697 L690.520991,490.278652 C689.550092,491.250384 687.956908,491.250384 686.986205,490.278848 L685.227953,488.521596 C684.257265,487.550076 684.257265,485.957424 685.228205,484.985652 L689.193009,481.021848 C689.778791,480.436066 690.728209,480.436066 691.313947,481.021803 L691.40202,481.108865 L692.10498,480.397635 L692.10498,480.397635 Z M690.718053,485.495803 L698.496053,477.717803 L697.788947,477.010697 L690.010947,484.788697 L690.718053,485.495803 L690.718053,485.495803 Z\" id=\"Get-link\" stroke=\"none\" fill=\"#AAAAAA\" fill-rule=\"evenodd\"></path>\\n  </svg>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar CreateShareOptions = require('./create-share-options');\nvar ShareCollection = require('./share-collection');\nvar ShareItemView = require('./share-item-view');\nvar template = require('./publish.tpl');\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'mapcapsCollection',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Publish-modalShare u-inner',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this.hasOrganization = this._userModel.isInsideOrg();\n\n    var shareOptions = CreateShareOptions(this._visDefinitionModel);\n    this._shareCollection = new ShareCollection(shareOptions);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var isPublished = this._mapcapsCollection.length > 0;\n    this.clearSubViews();\n    this.$el.html(template({\n      isPublished: isPublished\n    }));\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var renderItemView = this._renderItemView.bind(this);\n    this._shareCollection.each(renderItemView);\n  },\n\n  _renderItemView: function (model) {\n    var self = this;\n    var isPublished = this._mapcapsCollection.length > 0;\n    var view = new ShareItemView({\n      model: model,\n      isPublished: isPublished,\n      hasOrganization: self.hasOrganization\n    });\n\n    this.$('.js-list').append(view.render().el);\n    this.addView(view);\n  },\n\n  _revampPrivacyOptions: function () {\n    var shareOptions = CreateShareOptions(this._visDefinitionModel);\n    this._shareCollection.reset(shareOptions);\n  },\n\n  _initBinds: function () {\n    this._visDefinitionModel.on('sync', this._revampPrivacyOptions, this);\n    this.add_related_model(this._visDefinitionModel);\n\n    this._shareCollection.on('reset', this.render, this);\n    this.add_related_model(this._shareCollection);\n\n    this._mapcapsCollection.on('reset add', this.render, this);\n    this.add_related_model(this._mapcapsCollection);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"Publish-optionsList u-flex u-justifySpace js-list\"></ul>\\n';\n if (!isPublished) { \n__p+='\\n<div class=\"Share-info\">\\n  <div>\\n    <h2 class=\"CDB-Text CDB-Size-large u-secondaryTextColor u-bSpace is-light\">'+\n((__t=( _t('components.modals.publish.share.unpublished-header') ))==null?'':_.escape(__t))+\n'</h2>\\n    <p class=\"CDB-Text CDB-Size-medium is-light\">'+\n((__t=( _t('components.modals.publish.share.unpublished-subheader') ))==null?'':_.escape(__t))+\n'</p>\\n  </div>\\n</div>\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar ShareModel = require('./share-model');\n\nmodule.exports = Backbone.Collection.extend({\n  model: ShareModel\n});\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar Clipboard = require('clipboard');\nvar template = require('./share-item.tpl');\nvar browserDetect = require('../../../../helpers/browser-detect');\n\nvar PRIVATE_LABEL_TEMPLATE = _.template(\"<span class='CDB-Text CDB-Size-small is-semibold u-errorTextColor'><%- private %></span>.<br>\")({\n  private: _t('components.modals.publish.share.private')\n});\n\nmodule.exports = CoreView.extend({\n  className: 'Card',\n  tagName: 'li',\n\n  events: {\n    'click .js-change-privacy': '_onChangePrivacyClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.model) throw new Error('model is required');\n    if (opts.isPublished == null) throw new Error('isPublished is required');\n\n    this._isPublished = opts.isPublished;\n    this._type = this.model.type();\n    this._hasOrganization = opts.hasOrganization;\n    this._title = _t('components.modals.publish.share.' + this._type + '.title');\n\n    if (this.model.isPrivate()) {\n      this._body = _t('components.modals.publish.share.' + this._type + '.private.body', {\n        private: PRIVATE_LABEL_TEMPLATE\n      });\n    } else {\n      this._body = _t('components.modals.publish.share.' + this._type + '.body');\n    }\n\n    this._link = _t('components.modals.publish.share.' + this._type + '.link');\n    this._copy = this._getButtonLabel();\n    this.$el.toggleClass('is-disabled', this.model.isPrivate());\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    if (!this.model.isPrivate() && this._isPublished) {\n      this._initClipboard();\n    }\n    return this;\n  },\n\n  _getButtonLabel: function () {\n    var browser = browserDetect();\n    var label = _t('components.modals.publish.share.' + this._type + '.copy');\n    if (browser.name === 'Safari') {\n      label = _t('components.modals.publish.share.' + this._type + '.select');\n    }\n\n    return label;\n  },\n\n  getValue: function () {\n    return this.$('.js-input').val();\n  },\n\n  _initViews: function () {\n    var view = template({\n      id: this.cid,\n      isPrivate: this.model.isPrivate(),\n      type: this._type,\n      title: this._title,\n      body: this._body,\n      content: this.model.content(),\n      link: this._link,\n      copy: this._copy,\n      url: this.model.url(),\n      isPublished: this._isPublished\n    });\n\n    this.$el.append(view);\n\n    var iconTemplate = this.model.createIcon();\n    this.$('.js-icon').append(iconTemplate());\n  },\n\n  _initClipboard: function () {\n    if (this._clipboard) {\n      this._clipboard.destroy();\n    }\n\n    var btn = this.$('.js-copy');\n    this._clipboard = new Clipboard(btn.get(0));\n  },\n\n  _onChangePrivacyClick: function (e) {\n    this.killEvent(e);\n    this.options.onChangePrivacy && this.options.onChangePrivacy();\n  },\n\n  clean: function () {\n    this._clipboard && this._clipboard.destroy();\n    CoreView.prototype.clean.call(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Card-icon u-bSpace--xl js-icon\"></div>\\n\\n<div class=\"Card-body u-bSpace--xl\">\\n  ';\n if (isPrivate) { \n__p+='\\n    <h3 class=\"CDB-Text CDB-Size-large u-altTextColor u-bSpace--m\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h3>\\n  ';\n } else { \n__p+='\\n    <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-bSpace--m\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h3>\\n  ';\n } \n__p+='\\n  <div class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    '+\n((__t=( body ))==null?'':__t)+\n'\\n    <br/>\\n    ';\n if (url && !isPrivate) { \n__p+='\\n    <a href=\"'+\n((__t=( url ))==null?'':_.escape(__t))+\n'\" class=\"Share-link js-link\">'+\n((__t=( link ))==null?'':_.escape(__t))+\n'</a>\\n    ';\n } \n__p+='\\n  </div>\\n</div>\\n\\n';\n if (!isPrivate && isPublished) { \n__p+='\\n  <div class=\"Share-input\">\\n    <input type=\"text\" id=\"'+\n((__t=( id ))==null?'':_.escape(__t))+\n'\" value=\"'+\n((__t=( content ))==null?'':_.escape(__t))+\n'\" class=\"Share-input-field CDB-InputText is-disabled CDB-Text CDB-Size-medium u-ellipsis js-input\" readonly>\\n    <button class=\"Share-copy CDB-Button CDB-Button--small js-copy\" data-clipboard-target=\"#'+\n((__t=( id ))==null?'':_.escape(__t))+\n'\">\\n      <span class=\"CDB-Button-Text CDB-Text CDB-Size-small u-actionTextColor\">'+\n((__t=( copy ))==null?'':_.escape(__t))+\n'</span>\\n    </button>\\n  </div>\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n  createIcon: function () {\n    return this.get('createIcon');\n  },\n\n  type: function () {\n    return this.get('type');\n  },\n\n  content: function () {\n    return this.get('content');\n  },\n\n  url: function () {\n    return this.get('url');\n  },\n\n  isPrivate: function () {\n    return this.get('private');\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar template = require('./share-with.tpl');\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Share-with u-flex u-alignCenter',\n\n  events: {\n    'click .js-action': '_onAction'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this.separationClass = opts.separationClass || '';\n    this.avatarClass = opts.avatarClass || '';\n\n    this._acl = this._visDefinitionModel._permissionModel.acl;\n    this._initBinds();\n  },\n\n  render: function () {\n    var people = this._getPeople();\n    var hasAction = this.options.action !== undefined && this._hasOrganization();\n\n    this.clearSubViews();\n    this.$el.html(template({\n      avatar: this._userModel.get('avatar_url'),\n      people: people,\n      avatarClass: this.avatarClass,\n      separationClass: this.separationClass,\n      hasAction: hasAction\n    }));\n    return this;\n  },\n\n  _getPeople: function () {\n    var types = this._acl.pluck('type');\n    if (types.indexOf('org') > -1) {\n      return this._userModel.getOrganization().get('user_count') - 1;\n    } else {\n      var users = [];\n\n      // Grab all ids from every group\n      _.each(this._acl.where({type: 'group'}), function (group) {\n        var entity = group.get('entity');\n        Array.prototype.push.apply(users, entity.users.pluck('id'));\n      }, this);\n\n      // Grab all ids from every user\n      _.each(this._acl.where({type: 'user'}), function (group) {\n        var entity = group.get('entity');\n        users.push(entity.get('id'));\n      }, this);\n\n      // remove current user id because it can be part of a group\n      users = _.without(users, this._userModel.id);\n\n      // counts unique ids\n      return _.unique(users).length;\n    }\n  },\n\n  _hasOrganization: function () {\n    return this._userModel.isInsideOrg();\n  },\n\n  _initBinds: function () {\n    this._acl.on('fetch', this.render, this);\n    this.add_related_model(this._acl);\n  },\n\n  _onAction: function () {\n    this.options.action && this.options.action();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (people > 0) { \n__p+='\\n<div class=\"Share-user '+\n((__t=( avatarClass ))==null?'':_.escape(__t))+\n' u-rSpace u-iBlock\" style=\"background-image: url('+\n((__t=( avatar ))==null?'':_.escape(__t))+\n')\"></div>\\n<span class=\"u-secondaryTextColor CDB-Text CDB-Size-small '+\n((__t=( separationClass ))==null?'':_.escape(__t))+\n'\">+ '+\n((__t=( people ))==null?'':_.escape(__t))+\n'</span>\\n';\n } else { \n__p+='\\n  ';\n if (hasAction) { \n__p+='\\n  <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor js-action '+\n((__t=( separationClass ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( _t('components.modals.publish.share.add-people') ))==null?'':_.escape(__t))+\n'</button>\\n  ';\n } \n__p+='\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar PermissionView = require('./share-permission-view');\n\nvar REQUIRED_OPTS = [\n  'collection',\n  'currentUserId',\n  'organization',\n  'hasOrganization',\n  'sharePermissionModel',\n  'isVisualization'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Share-list',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    // To avoid jumps in rendering when the user gets permission\n    // we sort the collection only the first time\n    this._sortedCollection = this._sortCollection();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._sharePermissionModel.acl.on('add remove reset change', this.render, this);\n    this.add_related_model(this._sharePermissionModel);\n  },\n\n  _initViews: function () {\n    if (this._hasOrganization) {\n      this._renderOrganization();\n    }\n\n    _.each(this._sortedCollection, this._renderItem, this);\n  },\n\n  _sortCollection: function () {\n    // sharing first\n    var sharing = this._collection.filter(function (model) {\n      var permission = this._sharePermissionModel;\n      var hasWriteAccess = permission.hasWriteAccess(model);\n      var hasReadAccess = permission.hasReadAccess(model);\n      return hasWriteAccess || hasReadAccess;\n    }, this);\n\n    var noSharing = this._collection.filter(function (model) {\n      var permission = this._sharePermissionModel;\n      var hasWriteAccess = permission.hasWriteAccess(model);\n      var hasReadAccess = permission.hasReadAccess(model);\n      return !hasWriteAccess && !hasReadAccess;\n    }, this);\n\n    return sharing.concat(noSharing);\n  },\n\n  _renderOrganization: function () {\n    var self = this;\n    var organization = this._organization;\n    var permission = this._sharePermissionModel;\n    var hasWriteAccessAvailable = !self._isVisualization;\n    var canChangeWriteAccess = permission.canChangeWriteAccess(organization);\n    var hasWriteAccess = permission.hasWriteAccess(organization);\n    var canChangeReadAccess = permission.canChangeReadAccess(organization);\n    var hasReadAccess = permission.hasReadAccess(organization);\n\n    var view = new PermissionView({\n      model: organization,\n      permission: permission,\n      avatar: organization.get('avatar_url'),\n      description: _t('components.modals.publish.share.organization.desc'),\n      name: _t('components.modals.publish.share.organization.title'),\n      canChangeReadAccess: canChangeReadAccess,\n      hasReadAccess: hasReadAccess,\n      hasWriteAccessAvailable: hasWriteAccessAvailable,\n      canChangeWriteAccess: canChangeWriteAccess,\n      hasWriteAccess: hasWriteAccess,\n      isSelected: hasReadAccess || hasWriteAccess\n    });\n\n    this.$el.append(view.render().$el);\n    this.addView(view);\n  },\n\n  _renderItem: function (model) {\n    var self = this;\n    var view;\n    var o = model.get('model');\n    var permission = this._sharePermissionModel;\n    var hasWriteAccessAvailable = !self._isVisualization;\n    var canChangeWriteAccess = permission.canChangeWriteAccess(model);\n    var hasWriteAccess = permission.hasWriteAccess(model);\n    var canChangeReadAccess = permission.canChangeReadAccess(model);\n    var hasReadAccess = permission.hasReadAccess(model);\n    var role = this._getRole(o);\n\n    if (model.id !== this._currentUserId) {\n      view = new PermissionView({\n        model: model,\n        permission: permission,\n        name: model.get('name'),\n        avatar: model.get('avatar_url'),\n        role: role,\n        users: o.users,\n        canChangeReadAccess: canChangeReadAccess,\n        hasReadAccess: hasReadAccess,\n        hasWriteAccessAvailable: hasWriteAccessAvailable,\n        canChangeWriteAccess: canChangeWriteAccess,\n        hasWriteAccess: hasWriteAccess,\n        isSelected: hasReadAccess || hasWriteAccess\n      });\n\n      this.$el.append(view.render().$el);\n      this.addView(view);\n    }\n  },\n\n  _getRole: function (d) {\n    if (d.viewer !== undefined) {\n      return d.viewer === true ? _t('components.modals.publish.share.role.viewer')\n                               : _t('components.modals.publish.share.role.builder');\n    }\n\n    return false;\n  }\n});\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./share-permission.tpl');\nvar TipsyTooltipView = require('../../../tipsy-tooltip-view.js');\nvar $ = require('jquery');\nvar UsersGroup = require('./users-group-view');\n\nvar REQUIRED_OPTS = [\n  'model',\n  'permission',\n  'name',\n  'canChangeReadAccess',\n  'hasReadAccess',\n  'hasWriteAccessAvailable',\n  'canChangeWriteAccess',\n  'hasWriteAccess',\n  'isSelected'\n];\n\nvar OPTIONALS_OPT = [\n  'description',\n  'role',\n  'avatar',\n  'users'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Share-permission',\n\n  events: {\n    'change .js-read': '_onChangeRead',\n    'change .js-write': '_onChangeWrite',\n    'mouseover .js-toggler.is-disabled': '_onHoverDisabledToggler',\n    'mouseout .js-toggler': '_destroyTooltip',\n    'mouseleave .js-toggler': '_destroyTooltip'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    _.each(OPTIONALS_OPT, function (item) {\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      name: this._name,\n      avatar: this._avatar,\n      role: this._role,\n      users: this._users,\n      description: this._description,\n      canChangeReadAccess: this._canChangeReadAccess,\n      hasReadAccess: this._hasReadAccess,\n      hasWriteAccessAvailable: this._hasWriteAccessAvailable,\n      canChangeWriteAccess: this._canChangeWriteAccess,\n      hasWriteAccess: this._hasWriteAccess\n    }));\n\n    if (this._users) {\n      this._renderUsers();\n    }\n\n    this.$el.toggleClass('is-selected', this._isSelected);\n    return this;\n  },\n\n  _renderUsers: function () {\n    var view = new UsersGroup({\n      className: 'u-flex u-alignCenter',\n      users: this._users\n    });\n\n    this.$('.js-users').append(view.render().el);\n    this.addView(view);\n  },\n\n  _onChangeWrite: function () {\n    var p = this._permission;\n    if (p.canChangeWriteAccess(this._model)) {\n      if (p.hasWriteAccess(this._model)) {\n        p.revokeWriteAccess(this._model);\n      } else {\n        p.grantWriteAccess(this._model);\n      }\n    }\n  },\n\n  _onChangeRead: function () {\n    var p = this._permission;\n    if (p.canChangeReadAccess(this._model)) {\n      if (p.hasReadAccess(this._model)) {\n        p.revokeAccess(this._model);\n      } else {\n        p.grantReadAccess(this._model);\n      }\n    }\n  },\n\n  _onHoverDisabledToggler: function (e) {\n    var aclItem = this._permission.findRepresentableAclItem(this._model);\n    var msg;\n    var $el;\n\n    if (aclItem && !aclItem.isOwn(this._model)) {\n      msg = this._inheritedAccessTooltipText(aclItem);\n      $el = $(e.currentTarget);\n\n      this._tooltip = this._createTooltip({\n        $el: $el,\n        msg: msg\n      });\n      this._tooltip.showTipsy();\n    }\n  },\n\n  _createTooltip: function (opts) {\n    return new TipsyTooltipView({\n      el: opts.$el,\n      title: function () {\n        return opts.msg;\n      }\n    });\n  },\n\n  _destroyTooltip: function () {\n    if (this._tooltip) {\n      this._tooltip.hideTipsy();\n      this._tooltip.destroyTipsy();\n    }\n  },\n\n  _inheritedAccessTooltipText: function (aclItem) {\n    var type = aclItem.get('type');\n\n    switch (type) {\n      case 'group':\n        return _t('components.modals.publish.share.tooltip.group', {\n          name: aclItem.get('entity').get('name')\n        });\n      case 'org':\n        return _t('components.modals.publish.share.tooltip.org');\n      default:\n        console.error('Trying to display inherited access for an unrecognized type ' + type);\n        return '';\n    }\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Share-permissionInfo\">\\n  <div class=\"Share-permissionIcon\">\\n    ';\n if (avatar) { \n__p+='\\n      <div class=\"Share-user Share-user--huge\" style=\"background-image: url('+\n((__t=( avatar ))==null?'':_.escape(__t))+\n')\"></div>\\n    ';\n } else { \n__p+='\\n        <i class=\"CDB-IconFont CDB-IconFont-people\"></i>\\n    ';\n } \n__p+='\\n  </div>\\n  <div>\\n    <div class=\"CDB-Text u-mainTextColor CDB-Size-medium is-semibold u-ellipsis\">\\n      '+\n((__t=( name ))==null?'':_.escape(__t))+\n'\\n    </div>\\n\\n\\n    <div class=\"CDB-Text u-mainTextColor u-tSpace CDB-Size-medium u-ellipsis\">\\n      ';\n if (role) { \n__p+='\\n        <i class=\"Tag Tag--outline Tag--'+\n((__t=( role ))==null?'':_.escape(__t))+\n' CDB-Text CDB-Size-small u-upperCase\">'+\n((__t=( role ))==null?'':_.escape(__t))+\n'</i>\\n      ';\n } \n__p+='\\n\\n      ';\n if (users) { \n__p+='\\n        <div class=\"js-users\"></div>\\n      ';\n } \n__p+='\\n    </div>\\n\\n\\n    ';\n if (description) { \n__p+='\\n    <div class=\"CDB-Text u-mainTextColor u-tSpace CDB-Size-medium u-ellipsis\">\\n      '+\n((__t=( description ))==null?'':_.escape(__t))+\n'\\n    </div>\\n    ';\n } \n__p+='\\n  </div>\\n</div>\\n<div class=\"Share-togglers\">\\n  ';\n if (hasWriteAccessAvailable) { \n__p+='\\n    <div class=\"CDB-Text CDB-Size-medium u-rSpace--xl Share-toggler js-toggler ';\n if (!canChangeWriteAccess) { \n__p+='is-disabled';\n } \n__p+='\">\\n      <input class=\"CDB-Toggle u-iBlock js-write\" type=\"checkbox\"\\n        ';\n if (!canChangeWriteAccess) { \n__p+='disabled=\"disabled\"';\n } \n__p+='\\n        ';\n if (hasWriteAccess) { \n__p+=' checked ';\n } \n__p+='\\n      />\\n      <span class=\"u-iBlock CDB-ToggleFace\"></span>\\n      <label class=\"u-iBlock u-altTextColor \">'+\n((__t=( _t('components.modals.publish.share.toggle.write') ))==null?'':_.escape(__t))+\n'</label>\\n    </div>\\n  ';\n } \n__p+='\\n  <div class=\"CDB-Text CDB-Size-medium Share-toggler js-toggler ';\n if (!canChangeReadAccess) { \n__p+='is-disabled';\n } \n__p+='\">\\n    <input class=\"CDB-Toggle u-iBlock js-read\" type=\"checkbox\"\\n      ';\n if (hasReadAccess) { \n__p+=' checked ';\n } \n__p+='\\n      ';\n if (!canChangeReadAccess) { \n__p+='disabled=\"disabled\"';\n } \n__p+='\\n    />\\n    <span class=\"u-iBlock CDB-ToggleFace\"></span>\\n    <label class=\"u-iBlock u-altTextColor \">'+\n((__t=( _t('components.modals.publish.share.toggle.read') ))==null?'':_.escape(__t))+\n'</label>\\n  </div>\\n</div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./share.tpl');\nvar GrantableCollection = require('../../../../data/grantables-collection');\nvar SearchPaginationView = require('../../../../components/pagination-search/pagination-search-view');\nvar ListView = require('./share-list-view');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'currentUserId',\n  'organization',\n  'visDefinitionModel'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._grantablesCollection = new GrantableCollection([], {\n      currentUserId: this._currentUserId,\n      organization: this._organization,\n      configModel: this._configModel\n    });\n\n    this._sharePermissionModel = this._visDefinitionModel.getPermissionModel().clone();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      name: this._visDefinitionModel.get('name')\n    }));\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._sharePermissionModel.acl.on('add remove reset change', this._onSave, this);\n    this.add_related_model(this._sharePermissionModel.acl);\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    this._searchPaginationView = new SearchPaginationView({\n      className: 'u-inner',\n      listCollection: this._grantablesCollection,\n      createContentView: function (opts) {\n        return new ListView(_.extend({}, opts, {\n          collection: self._grantablesCollection,\n          currentUserId: self._currentUserId,\n          sharePermissionModel: self._sharePermissionModel,\n          organization: self._organization,\n          isVisualization: self._visDefinitionModel.isVisualization()\n        }));\n      }\n    });\n    this.addView(this._searchPaginationView);\n    this.$('.js-body').html(this._searchPaginationView.render().el);\n  },\n\n  _onCancel: function () {\n    this._modalModel.destroy();\n  },\n\n  _onBack: function () {\n    this._modalModel.destroy();\n    this._onBack();\n  },\n\n  _onSave: function () {\n    var permission = this._visDefinitionModel.getPermissionModel();\n    permission.overwriteAcl(this._sharePermissionModel);\n    // Show loading here\n    permission.save()\n      .fail(this._searchPaginationView.showError.bind(this._searchPaginationView));\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"js-body\">\\n\\n</div>';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./user.tpl');\nvar TipsyTooltipView = require('../../../tipsy-tooltip-view');\n\nvar REQUIRED_OPTS = [\n  'username',\n  'avatar'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      avatar: this._avatar,\n      username: this._username\n    }));\n\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var tooltip = new TipsyTooltipView({\n      el: this.$('.js-avatar'),\n      title: function () {\n        return $(this).attr('data-title');\n      }\n    });\n\n    this.addView(tooltip);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Share-user u-rSpace js-avatar\" style=\"background-image: url('+\n((__t=( avatar ))==null?'':_.escape(__t))+\n')\" data-title=\"'+\n((__t=( username ))==null?'':_.escape(__t))+\n'\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar template = require('./users-group.tpl');\nvar UserView = require('./user-view');\n\nvar REQUIRED_OPTS = [\n  'users'\n];\n\nvar MAX_USERS_TO_SHOW = 3;\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      people: this._getRemainsPeople()\n    }));\n    this._renderUsers();\n    return this;\n  },\n\n  _getRemainsPeople: function () {\n    return Math.max(0, this._users.length - MAX_USERS_TO_SHOW);\n  },\n\n  _renderUsers: function () {\n    _.each(this._users.slice(0, MAX_USERS_TO_SHOW), this._renderUser, this);\n  },\n\n  _renderUser: function (user) {\n    var view = new UserView({\n      username: user.username,\n      avatar: user.avatar_url\n    });\n\n    this.$('.js-content').append(view.render().el);\n    this.addView(view);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex js-content\"></div>\\n';\n if (people > 0) { \n__p+='\\n  <div class=\"u-secondaryTextColor CDB-Text CDB-Size-small u-lSpace\">+ '+\n((__t=( people ))==null?'':_.escape(__t))+\n'</div>\\n';\n } \n__p+='';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Publish-modalMenu u-tSpace-xl\">\\n  <nav class=\"CDB-NavMenu u-inner\">\\n    <ul class=\"CDB-Size-medium CDB-Text is-semibold js-menu\"></ul>\\n  </nav>\\n</div>\\n\\n<div class=\"Tab-paneContent Publish-modalContent js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./upgrade.tpl');\n\nvar CONTACT_LINK_TEMPLATE = _.template(\"<a href='mailto:<%- mail %>'><%- contact %></a>\")({\n  contact: _t('components.modals.publish.privacy.upgrade.contact'),\n  mail: _t('components.modals.publish.privacy.upgrade.mail')\n});\n\nmodule.exports = CoreView.extend({\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var html = template({\n      title: _t('components.modals.publish.privacy.upgrade.title'),\n      desc: _t('components.modals.publish.privacy.upgrade.desc', {\n        contact: CONTACT_LINK_TEMPLATE\n      })\n    });\n    this.$el.html(html);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-alignCenter\">\\n  <div class=\"Upgrade-icon u-rSpace--xl\">\\n    <svg width=\"16px\" height=\"16px\" viewBox=\"578 456 16 16\">\\n      <g id=\"present\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(578.000000, 456.000000)\">\\n        <path d=\"M10.0946667,4.4109223 C10.8886667,4.1368747 11.6846667,3.80147316 12.0073333,3.4715253 C12.7866667,2.67392407 12.7866667,1.37662907 12.0073333,0.579027844 C11.2513333,-0.193350099 9.934,-0.192668389 9.17866667,0.579027844 C8.74133333,1.0262299 8.29266667,2.36033726 8,3.37608583 C7.70666667,2.36033726 7.25866667,1.0262299 6.82133333,0.579027844 C6.066,-0.193350099 4.748,-0.192668389 3.99266667,0.579027844 C3.21266667,1.37662907 3.21266667,2.67392407 3.99266667,3.4715253 C4.316,3.80147316 5.11133333,4.1368747 5.90533333,4.4109223 L0.333333333,4.4109223 C0.149333333,4.4109223 0,4.56362544 0,4.75177753 L0,7.47861934 C0,7.66677142 0.149333333,7.81947456 0.333333333,7.81947456 L0.666666667,7.81947456 L0.666666667,15.6591448 C0.666666667,15.8472969 0.816,16 1,16 L15,16 C15.184,16 15.3333333,15.8472969 15.3333333,15.6591448 L15.3333333,7.81947456 L15.6666667,7.81947456 C15.8506667,7.81947456 16,7.66677142 16,7.47861934 L16,4.75177753 C16,4.56362544 15.8506667,4.4109223 15.6666667,4.4109223 L10.0946667,4.4109223 Z M6,6.95652174 L6,4.86956522 L10,4.86956522 L10,6.95652174 L6,6.95652174 L6,6.95652174 Z M10,7.65217391 L10,15.3043478 L6,15.3043478 L6,7.65217391 L10,7.65217391 L10,7.65217391 Z M9.80833133,1.08822938 C10.0510474,0.834996985 10.3727426,0.695652174 10.7169115,0.695652174 C11.0597961,0.695652174 11.3821334,0.834996985 11.6248495,1.08755946 C12.1250502,1.6101025 12.1250502,2.46023983 11.6248495,2.98278288 C11.2729754,3.34990286 9.79227867,3.85636766 8.66666667,4.17391304 C8.97102496,2.99953105 9.45581507,1.45534937 9.80833133,1.08822938 L9.80833133,1.08822938 Z M4.37515049,1.08822938 C4.6178666,0.834996985 4.94020387,0.695652174 5.28373064,0.695652174 C5.6266153,0.695652174 5.94895256,0.834996985 6.19166867,1.08755946 C6.54354282,1.45467944 7.02833293,2.99886112 7.33333333,4.17391304 C6.20707922,3.85569773 4.72638253,3.34990286 4.37515049,2.98278288 C3.87494984,2.46090976 3.87494984,1.61077243 4.37515049,1.08822938 L4.37515049,1.08822938 Z M0.666666667,4.86956522 L5.33333333,4.86956522 L5.33333333,6.95652174 L1,6.95652174 L0.666666667,6.95652174 L0.666666667,4.86956522 L0.666666667,4.86956522 Z M1.33333333,7.65217391 L5.33333333,7.65217391 L5.33333333,15.3043478 L1.33333333,15.3043478 L1.33333333,7.65217391 L1.33333333,7.65217391 Z M14.6666667,15.3043478 L10.6666667,15.3043478 L10.6666667,7.65217391 L14.6666667,7.65217391 L14.6666667,15.3043478 L14.6666667,15.3043478 Z M15.3333333,6.95652174 L15,6.95652174 L10.6666667,6.95652174 L10.6666667,4.86956522 L15.3333333,4.86956522 L15.3333333,6.95652174 L15.3333333,6.95652174 Z\" id=\"Shape\" fill=\"#9BC63B\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\"Upgrade-body\">\\n    <h2 class=\"CDB-Text CDB-Size-large\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h2>\\n    <p class=\"CDB-Text CDB-Size-medium u-altTextColor \">'+\n((__t=( desc ))==null?'':__t)+\n'</p>\\n  </div>\\n</div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar moment = require('moment');\nvar ConfirmationView = require('../confirmation/modal-confirmation-view');\nvar VisDefinitionModel = require('../../../data/vis-definition-model');\nvar MapcardPreview = require('../../../helpers/mapcard-preview');\nvar ErrorView = require('../../error/error-view');\nvar renderLoading = require('../../loading/render-loading');\nvar tableDeleteOperation = require('../../../dataset/operations/table-delete-operation');\nvar template = require('./remove-dataset.tpl');\nvar errorParser = require('../../../helpers/error-parser');\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'userModel',\n  'visModel',\n  'tableModel',\n  'configModel'\n];\nvar AFFECTED_VIS_COUNT = 3;\nvar AFFECTED_ENTITIES_SAMPLE_COUNT = 20;\n\n/**\n *  Remove dataset modal dialog\n */\nmodule.exports = ConfirmationView.extend({\n  className: 'Dialog-content',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._acl = this._visModel._permissionModel.acl;\n  },\n\n  render: function () {\n    var affectedVisData = this._tableModel.get('accessible_dependent_derived_maps');\n    var affectedEntitiesData = this._prepareVisibleAffectedEntities();\n\n    this.clearSubViews();\n\n    this.$el.html(\n      template({\n        modalModel: this._modalModel,\n        tableName: this._tableModel.getUnquotedName(),\n        affectedVisCount: affectedVisData.length,\n        visibleAffectedVis: this._prepareVisibleAffectedVis(affectedVisData.slice(0, AFFECTED_VIS_COUNT)),\n        organizationAffected: affectedEntitiesData.organizationAffected,\n        affectedEntitiesCount: affectedEntitiesData.count,\n        visibleAffectedEntities: affectedEntitiesData.data.slice(0, AFFECTED_ENTITIES_SAMPLE_COUNT),\n        maxVisCount: AFFECTED_VIS_COUNT,\n        maxEntitiesCount: AFFECTED_ENTITIES_SAMPLE_COUNT\n      })\n    );\n    return this;\n  },\n\n  _prepareVisibleAffectedVis: function (visibleAffectedVisData) {\n    return visibleAffectedVisData.map(function (visData) {\n      var vis = new VisDefinitionModel(visData, {\n        configModel: this._configModel\n      });\n      var owner = vis._permissionModel.get('owner');\n\n      return {\n        visId: vis.get('id'),\n        name: vis.get('name'),\n        url: vis.builderURL(),\n        ownerName: owner.username,\n        timeDiff: moment(vis.get('updated_at')).fromNow(),\n        previewUrl: MapcardPreview.urlForStaticMap(this._configModel.get('maps_api_template'), vis, 304, 96)\n      };\n    }, this);\n  },\n\n  _prepareVisibleAffectedEntities: function () {\n    var types = this._acl.pluck('type');\n    var affectedEntities = {\n      organizationAffected: false,\n      count: 0,\n      data: []\n    };\n    var organization;\n\n    if (types.indexOf('org') > -1) {\n      organization = this._userModel.getOrganization();\n      affectedEntities.organizationAffected = true;\n      affectedEntities.count = organization.get('user_count') - 1;\n      if (organization.get('avatar_url')) {\n        affectedEntities.data.push({\n          avatarUrl: organization.get('avatar_url'),\n          username: organization.get('display_name')\n        });\n      }\n    } else {\n      var users = [];\n      var uniqueUsers = [];\n      var userName = this._userModel.get('username');\n\n      // Grab all ids from every group\n      _.each(this._acl.where({type: 'group'}), function (group) {\n        var entity = group.get('entity');\n        var groupUsers = _.map(entity.users.models, function (user) {\n          return {\n            username: user.get('username'),\n            avatarUrl: user.get('avatar_url')\n          };\n        });\n        users = users.concat(groupUsers);\n      }, this);\n\n      // Grab all ids from every user\n      _.each(this._acl.where({type: 'user'}), function (group) {\n        var entity = group.get('entity');\n        users.push({\n          username: entity.get('username'),\n          avatarUrl: entity.get('avatar_url')\n        });\n      }, this);\n\n      // remove current user id because it can be part of a group\n      users = _.filter(users, function (user) {\n        return user.username !== userName;\n      });\n\n      // return only uniques\n      uniqueUsers = _.uniq(users, function (item) {\n        return item.username;\n      });\n\n      affectedEntities.count = uniqueUsers.length;\n      affectedEntities.data = uniqueUsers;\n    }\n\n    return affectedEntities;\n  },\n\n  _runAction: function () {\n    this._renderLoadingView();\n\n    tableDeleteOperation({\n      onSuccess: this._onSuccessDestroyDataset.bind(this, this._modalModel),\n      onError: this._onErrorDestroyDataset.bind(this),\n      visModel: this._visModel\n    });\n  },\n\n  _renderLoadingView: function () {\n    this.$el.html(\n      renderLoading({\n        title: _t('dataset.delete.loading', { tableName: this._tableModel.getUnquotedName() })\n      })\n    );\n  },\n\n  _onSuccessDestroyDataset: function () {\n    window.location = this._configModel.get('base_url') + '/dashboard';\n  },\n\n  _onErrorDestroyDataset: function (mdl, e) {\n    var errorMessage = errorParser(e);\n    var errorView = new ErrorView({\n      title: _t('dataset.delete.error', {\n        tableName: this._tableModel.getUnquotedName(),\n        error: errorMessage\n      }),\n      desc: errorMessage || _t('components.error.default-desc')\n    });\n    this.$el.html(errorView.render().el);\n    this.addView(errorView);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"25px\" viewbox=\"521 436 24 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <path d=\"M524.5,440 L540.5,440 L540.5,460 L524.5,460 L524.5,440 Z M528.5,437 L536.5,437 L536.5,440 L528.5,440 L528.5,437 Z M522,440 L544,440 L522,440 Z M528.5,443.5 L528.5,455.5 L528.5,443.5 Z M532.5,443.5 L532.5,455.5 L532.5,443.5 Z M536.5,443.5 L536.5,455.5 L536.5,443.5 Z\" id=\"Shape\" stroke=\"#F19243\" stroke-width=\"1\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        '+\n((__t=( _t('dataset.delete.title', { tableName: tableName }) ))==null?'':__t)+\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-secondaryTextColor\">'+\n((__t=( _t('dataset.delete.desc') ))==null?'':_.escape(__t))+\n'</p>\\n\\n      ';\n if (affectedVisCount > 0) { \n__p+='\\n        <div class=\"Modal-listActions js-affectedVis\">\\n          <p class=\"CDB-Text CDB-Size-large u-altTextColor\">\\n            ';\n if (affectedVisCount > maxVisCount) {\n__p+='\\n              '+\n((__t=( _t('dataset.delete.affected-vis-count-extended', {affectedVisCount: affectedVisCount}) ))==null?'':__t)+\n'\\n            ';\n } else { \n__p+='\\n              '+\n((__t=( _t('dataset.delete.affected-vis-count', {smart_count: affectedVisCount}) ))==null?'':__t)+\n'\\n            ';\n } \n__p+='\\n          </p>\\n\\n          <ul class=\"u-flex u-justifyStart u-tSpace-xl\">\\n            ';\n visibleAffectedVis.forEach(function(vis) { \n__p+='\\n              <li class=\"MapsList-item MapsList-item--wRightMargins\">\\n                <div class=\"MapCard\" data-vis-id=\"'+\n((__t=( vis.visId ))==null?'':_.escape(__t))+\n'\" data-vis-owner-name=\"'+\n((__t=( vis.ownerName ))==null?'':_.escape(__t))+\n'\">\\n                  <a href=\"'+\n((__t=( vis.url ))==null?'':_.escape(__t))+\n'\" target=\"_blank\" class=\"MapCard-header MapCard-header--mCompact js-header\">\\n                    <img class=\"MapCard-preview\" src=\"'+\n((__t=( vis.previewUrl ))==null?'':_.escape(__t))+\n'\" style=\"display: inline;\">\\n                    <div class=\"MapCard-loader\"></div>\\n                  </a>\\n                  <div class=\"MapCard-content MapCard-content--compact\">\\n                    <div class=\"MapCard-contentBody\">\\n                      <div class=\"MapCard-contentBodyRow MapCard-contentBodyRow--flex\">\\n                        <h3 class=\"CDB-Text CDB-Size-large u-bSpace u-ellipsis\">\\n                          <a href=\"'+\n((__t=( vis.url ))==null?'':_.escape(__t))+\n'\" target=\"_blank\" title=\"'+\n((__t=( vis.name ))==null?'':_.escape(__t))+\n'\" class=\"u-mainTextColor\">'+\n((__t=( vis.name ))==null?'':_.escape(__t))+\n'</a>\\n                        </h3>\\n                      </div>\\n                      <p class=\"MapCard-contentBodyTimeDiff DefaultTimeDiff CDB-Text CDB-Size-medium u-altTextColor\">\\n                        '+\n((__t=( vis.timeDiff ))==null?'':_.escape(__t))+\n'\\n                      </p>\\n                    </div>\\n                  </div>\\n                </div>\\n              </li>\\n            ';\n }); \n__p+='\\n          </ul>\\n        </div>\\n      ';\n } \n__p+='\\n\\n      ';\n if (affectedEntitiesCount > 0 || organizationAffected) { \n__p+='\\n        <div class=\"Modal-listActions js-affectedEntities\">\\n          <p class=\"CDB-Text CDB-Size-large u-altTextColor\">\\n            ';\n if (organizationAffected) { \n__p+='\\n              '+\n((__t=( _t('dataset.delete.whole-organization-affected') ))==null?'':__t)+\n'\\n            ';\n } else if (affectedEntitiesCount > maxEntitiesCount && visibleAffectedEntities.length > 0) {\n__p+='\\n              '+\n((__t=( _t('dataset.delete.affected-entities-count-extended', {affectedEntitiesCount: affectedEntitiesCount}) ))==null?'':__t)+\n'\\n            ';\n } else { \n__p+='\\n              '+\n((__t=( _t('dataset.delete.affected-entities-count', {smart_count: affectedEntitiesCount}) ))==null?'':__t)+\n'\\n            ';\n } \n__p+='\\n          </p>\\n\\n          <ul class=\"u-flex u-justifyStart u-tSpace-xl\">\\n          ';\n visibleAffectedEntities.forEach(function(entity) { \n__p+='\\n            ';\n if (entity.avatarUrl) { \n__p+=' \\n              <li class=\"u-rSpace--m\">\\n                <div class=\"Share-user Share-user--medium\" style=\"background-image: url('+\n((__t=( entity.avatarUrl ))==null?'':_.escape(__t))+\n')\" data-username=\"'+\n((__t=( entity.username ))==null?'':_.escape(__t))+\n'\" title=\"'+\n((__t=( entity.username ))==null?'':_.escape(__t))+\n'\"></div>\\n              </li>\\n            ';\n } \n__p+='\\n          ';\n }); \n__p+='\\n        </ul>\\n        </div>\\n      ';\n } \n__p+='\\n\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--medium js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">\\n              '+\n((__t=( _t('dataset.delete.cancel') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--medium js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">\\n              '+\n((__t=( _t('dataset.delete.confirm') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./sync-options-modal.tpl');\nvar renderLoading = require('../../loading/render-loading');\nvar ErrorView = require('../../error/error-view');\nvar errorParser = require('../../../helpers/error-parser');\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-confirm': '_onConfirm',\n    'click .js-cancel': '_onCancel'\n  },\n\n  initialize: function (opts) {\n    if (!opts.modalModel) throw new Error('modalModel is required');\n    if (!opts.syncModel) throw new Error('syncModel is required');\n    if (!opts.tableName) throw new Error('tableName is required');\n\n    this._syncModel = opts.syncModel;\n    this._modalModel = opts.modalModel;\n    this._tableName = opts.tableName;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        interval: this._syncModel.get('interval'),\n        service: this._syncModel.get('service_name') || '',\n        isExternalSource: this._syncModel.get('from_external_source'),\n        url: this._getServiceURL()\n      })\n    );\n  },\n\n  _renderErrorView: function (errorMessage) {\n    var errorView = new ErrorView({\n      title: _t('dataset.sync.error'),\n      desc: errorMessage\n    });\n    this.$el.html(errorView.render().el);\n    this.addView(errorView);\n  },\n\n  _renderLoadingView: function () {\n    this.$el.html(\n      renderLoading({\n        title: _t('dataset.sync.loading', { tableName: this._tableName })\n      })\n    );\n  },\n\n  _getServiceURL: function () {\n    if (this._syncModel.get('service_name') || this._syncModel.get('service_item_id')) {\n      return this._syncModel.get('service_item_id');\n    }\n    return this._syncModel.get('url');\n  },\n\n  _onConfirm: function () {\n    var interval = parseInt(this.$('[name=\"interval\"]:checked').val(), 10);\n    var opts = {\n      wait: true,\n      success: function () {\n        this._modalModel.destroy();\n      }.bind(this),\n      error: function (mdl, e) {\n        this._renderErrorView(errorParser(e));\n      }.bind(this)\n    };\n\n    this._renderLoadingView();\n\n    if (this._syncModel.get('interval') !== interval) {\n      if (!interval) {\n        this._syncModel.destroy(opts);\n      } else {\n        this._syncModel.save({\n          interval: interval\n        }, opts);\n      }\n    } else {\n      this._modalModel.destroy();\n    }\n  },\n\n  _onCancel: function () {\n    this._modalModel.destroy();\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--full u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"20px\" viewBox=\"0 8 24 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n          <g id=\"Icon\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(0.000000, 8.000000)\">\\n              <path d=\"M19.591513,9.26858726 C19.7142261,9.39218837 19.8745043,9.45462604 20.0347826,9.45462604 C20.1950609,9.45462604 20.3553391,9.39218837 20.4780522,9.26858726 C20.7222261,9.0201108 20.7222261,8.61617729 20.4780522,8.36770083 C20.1988174,8.08354571 19.908313,7.81468144 19.6065391,7.56365651 C19.5652174,7.52925208 19.5201391,7.4999446 19.4775652,7.46554017 C17.3914435,5.76952909 14.824487,4.84060942 12.1147826,4.84060942 L12.1122783,4.84060942 L12.1097739,4.84060942 C8.95053913,4.84060942 5.98038261,6.0931856 3.74775652,8.36770083 C3.50358261,8.61617729 3.50358261,9.0201108 3.74775652,9.26858726 C3.87046957,9.3934626 4.03074783,9.45462604 4.19102609,9.45462604 C4.35130435,9.45462604 4.51158261,9.39218837 4.63304348,9.26858726 C6.63151304,7.23490305 9.28737391,6.11484765 12.1122783,6.11484765 C14.9371826,6.11484765 17.5930435,7.23490305 19.591513,9.26858726 L19.591513,9.26858726 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n              <path d=\"M22.7607652,5.95695291 C22.8834783,6.08182825 23.0437565,6.14299169 23.2040348,6.14299169 C23.364313,6.14299169 23.5245913,6.08055402 23.6473043,5.95695291 C23.8914783,5.70847645 23.8914783,5.30454294 23.6473043,5.05606648 C17.2862609,-1.41706371 6.93704348,-1.41451524 0.578504348,5.05606648 C0.334330435,5.30454294 0.334330435,5.70847645 0.578504348,5.95695291 C0.822678261,6.20542936 1.21961739,6.20542936 1.4637913,5.95695291 C7.33398261,-0.0179501385 16.8905739,-0.0166759003 22.7607652,5.95695291 L22.7607652,5.95695291 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n              <path d=\"M9.58789565,9.966759 C8.61495652,10.3273684 7.69586087,10.8854848 6.91575652,11.6793352 C6.67158261,11.9278116 6.67158261,12.3317452 6.91575652,12.5802216 C7.03846957,12.705097 7.19874783,12.7662604 7.35902609,12.7662604 C7.51930435,12.7662604 7.67958261,12.7038227 7.80229565,12.5802216 C10.1789217,10.1642659 14.046887,10.1642659 16.4247652,12.5802216 C16.5474783,12.705097 16.7077565,12.7662604 16.8680348,12.7662604 C17.028313,12.7662604 17.1885913,12.7038227 17.3113043,12.5802216 C17.5554783,12.3317452 17.5554783,11.9278116 17.3113043,11.6793352 C15.2239304,9.55645429 12.1924174,8.99961219 9.58789565,9.966759 L9.58789565,9.966759 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n              <path d=\"M12.1122783,14.1359557 C10.5307826,14.1359557 9.2448,15.4445983 9.2448,17.052687 C9.2448,18.6620499 10.5307826,19.9706925 12.1122783,19.9706925 C13.6925217,19.9706925 14.9785043,18.6620499 14.9785043,17.052687 C14.9785043,15.4458726 13.6925217,14.1359557 12.1122783,14.1359557 L12.1122783,14.1359557 Z M12.1122783,18.6977285 C11.2219826,18.6977285 10.4969739,17.9599446 10.4969739,17.0539612 C10.4969739,16.1479778 11.2219826,15.4114681 12.1122783,15.4114681 C13.0025739,15.4114681 13.7263304,16.1479778 13.7263304,17.0539612 C13.7263304,17.9599446 13.0025739,18.6977285 12.1122783,18.6977285 L12.1122783,18.6977285 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n          </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--m\">\\n        '+\n((__t=( _t('dataset.sync.title') ))==null?'':_.escape(__t))+\n'\\n     </h2>\\n      <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n        '+\n((__t=( _t('dataset.sync.desc', {\n          service: service,\n          url: url\n        }) ))==null?'':__t)+\n'\\n      </p>\\n      <div class=\"Modal-listTextItem u-flex u-alignCenter\">\\n        <h3 class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\">'+\n((__t=( _t('dataset.sync.label') ))==null?'':_.escape(__t))+\n'</h3>\\n        <ul class=\"Modal-listForm u-flex u-alignCenter CDB-Text CDB-Size-small js-intervals\">\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"3600\"\\n              ';\n if (interval === 3600) { \n__p+='\\n                checked\\n              ';\n } \n__p+='\\n\\n              ';\n if (isExternalSource) { \n__p+='\\n                disabled\\n              ';\n } \n__p+='\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Every hour</label>\\n          </li>\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"86400\"\\n              ';\n if (interval === 86400) { \n__p+='\\n                checked\\n              ';\n } \n__p+='\\n\\n              ';\n if (isExternalSource) { \n__p+='\\n                disabled\\n              ';\n } \n__p+='\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Every day</label>\\n          </li>\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"604800\"\\n              ';\n if (interval === 604800) { \n__p+='\\n                checked\\n              ';\n } \n__p+='\\n\\n              ';\n if (isExternalSource) { \n__p+='\\n                disabled\\n              ';\n } \n__p+='\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Every week</label>\\n          </li>\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"2592000\"\\n              ';\n if (interval === 2592000) { \n__p+='\\n                checked\\n              ';\n } \n__p+='\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Every month</label>\\n          </li>\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"0\"\\n              ';\n if (interval === 0) { \n__p+='\\n                checked\\n              ';\n } \n__p+='\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Never</label>\\n          </li>\\n        </ul>\\n      </div>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('dataset.sync.cancel') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('dataset.sync.confirm') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n\\n\\n';\n}\nreturn __p;\n};\n",
    "module.exports = ' | CARTO';\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"IntermediateInfo\">\\n  <div class=\"LayoutIcon\">\\n    <i class=\"CDB-IconFont '+\n((__t=( icon ))==null?'':_.escape(__t))+\n'\"></i>\\n  </div>\\n  <h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m u-tSpace-xl\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h4>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    '+\n((__t=( desc ))==null?'':_.escape(__t))+\n'\\n  </p>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var template = require('./no-results.tpl');\n\n/**\n * @param {Object} opts\n * @param {String=} opts.icon\n * @param {String=} opts.title\n * @param {String=} opts.desc\n */\n\nmodule.exports = function (opts) {\n  return template({\n    icon: opts.icon || 'CDB-IconFont-cockroach',\n    title: opts.title || '',\n    desc: opts.desc\n  });\n};\n",
    "var CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  tagName: 'button',\n\n  initialize: function (opts) {\n    if (!opts.template) throw new Error('template is required');\n    if (!opts.editorModel) throw new Error('editorModel is required');\n    this.template = opts.template;\n    this._editorModel = opts.editorModel;\n    this._data = {};\n    if (opts.model) {\n      this._data = opts.model.toJSON();\n    }\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.add_related_model(this._editorModel);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.append(this.template(this._data));\n    return this;\n  },\n\n  _changeStyle: function () {\n    this.$('.js-theme').toggleClass('is-white', this._editorModel.isEditing());\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<span data-action=\"'+\n((__t=( button ))==null?'':_.escape(__t))+\n'\" class=\"CDB-Text is-semibold u-lSpace u-actionTextColor u-upperCase\">'+\n((__t=( button ))==null?'':_.escape(__t))+\n'</span>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Shape-close is-blue is-large js-theme\"></div>';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar NotifierModel = require('./notifier-model');\n\nmodule.exports = Backbone.Collection.extend({\n  model: function (attrs, opts) {\n    return new NotifierModel(attrs, opts);\n  },\n\n  findById: function (id) {\n    return this.findWhere({id: id});\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar Template = require('./notifier-item.tpl');\nvar ActionView = require('./notifier-action-view');\nvar closeTemplate = require('./notifier-close.tpl');\nvar actionTemplate = require('./notifier-action.tpl');\n\nmodule.exports = CoreView.extend({\n  className: 'Notifier-inner',\n  tagName: 'li',\n  events: {\n    'click .js-close': '_closeHandler',\n    'click .js-action': '_actionHandler'\n  },\n\n  initialize: function (opts) {\n    if (!opts.notifierModel) throw new Error('notifierModel is required');\n    if (!opts.editorModel) throw new Error('editorModel is required');\n\n    this._editorModel = opts.editorModel;\n    this.template = this.options.template || Template;\n    this._notifierModel = opts.notifierModel;\n    this.$el.attr('id', this._notifierModel.get('id'));\n\n    this._delay = this._notifierModel.get('delay') || this._notifierModel.get('defaultDelay');\n\n    if (this._notifierModel.get('delay') && this._notifierModel.get('closable') !== false) {\n      this._timeout = setTimeout(this._autoClose.bind(this), this._delay);\n    }\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    this._changeStyle();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._notifierModel, 'change', this.render);\n    this.listenTo(this._notifierModel, 'change:status', this._onChangeStatus);\n    this.add_related_model(this._notifierModel);\n\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.add_related_model(this._editorModel);\n  },\n\n  _initViews: function () {\n    var actionable = this._notifierModel.getButton();\n    var closable = this._notifierModel.isClosable();\n    var view = this.template({\n      status: this._notifierModel.getStatus(),\n      info: this._notifierModel.getInfo(),\n      isActionable: actionable,\n      isClosable: closable\n    });\n\n    this.$el.append(view);\n\n    if (actionable) {\n      this._createActionView(actionable);\n    }\n\n    if (closable) {\n      this._createCloseView();\n    }\n  },\n\n  _createActionView: function (action) {\n    var actionView = new ActionView({\n      template: actionTemplate,\n      className: 'js-action',\n      model: this._notifierModel,\n      editorModel: this._editorModel\n    });\n\n    this.$('.js-actionButton').append(actionView.render().el);\n    this.addView(actionView);\n  },\n\n  _createCloseView: function () {\n    var actionView = new ActionView({\n      template: closeTemplate,\n      className: 'CDB-Shape js-close',\n      editorModel: this._editorModel\n    });\n\n    this.$('.js-closeButton').append(actionView.render().el);\n    this.addView(actionView);\n  },\n\n  _closeHandler: function () {\n    var status = this._notifierModel.getStatus();\n    var action = this._notifierModel.getAction();\n    this._notifierModel.trigger('notification:close', action || status);\n    clearTimeout(this._timeout);\n    if (this._notifierModel && this._notifierModel.collection) {\n      this._notifierModel.collection.remove(this._notifierModel);\n    }\n  },\n\n  _actionHandler: function () {\n    var status = this._notifierModel.getStatus();\n    var action = this._notifierModel.getAction();\n    this._notifierModel.trigger('notification:action', action || status);\n  },\n\n  _changeStyle: function () {\n    this.$('.Notifier-info').toggleClass('u-whiteTextColor', this._editorModel.isEditing());\n    this.$('.Notifier-actions .CDB-Shape-close').toggleClass('is-blue', !this._editorModel.isEditing());\n    this.$('.Notifier-actions .CDB-Shape-close').toggleClass('is-white', this._editorModel.isEditing());\n  },\n\n  _autoClose: function () {\n    this._notifierModel.set({action: 'autoclose'}, {silent: true});\n    this._closeHandler();\n  },\n\n  _onChangeStatus: function (model, status) {\n    if ((status === 'success' || status === 'error') && this._notifierModel.get('closable') !== false && this._notifierModel.get('autoclosable') !== false) {\n      this._timeout = setTimeout(this._autoClose.bind(this), this._delay);\n    }\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Notifier-item Notifier-item--'+\n((__t=( status ))==null?'':_.escape(__t))+\n'\">\\n\\n  ';\n if (status === 'loading') { \n__p+='\\n  <div class=\"Notifier-icon CDB-LoaderIcon is-blue js-theme u-rSpace--m\">\\n    <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n      <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n    </svg>\\n  </div>\\n  ';\n } \n__p+='\\n\\n  ';\n if (status === 'success') { \n__p+='\\n  <div class=\"Notifier-icon CDB-Shape u-rSpace--m\">\\n    <div class=\"CDB-Shape-CircleItem CDB-Shape-CircleItem--fill is-green\">\\n      <div class=\"CDB-Shape-tick is-medium is-white\"></div>\\n    </div>\\n  </div>\\n  ';\n } \n__p+='\\n\\n  ';\n if (status === 'error' || status === 'warning') { \n__p+='\\n  <div class=\"Notifier-icon CDB-Shape u-rSpace--m\">\\n    <div class=\"CDB-Shape-CircleItem CDB-Shape-CircleItem--fill is-red\">\\n      <div class=\"CDB-Shape-close is-medium is-white\"></div>\\n    </div>\\n  </div>\\n  ';\n } \n__p+='\\n\\n  <div class=\"Notifier-info\">\\n    <p class=\"CDB-Text CDB-Size-medium\">'+\n((__t=( info ))==null?'':__t)+\n' ';\n if (isActionable) { \n__p+=' <span class=\"js-actionButton\"></span> ';\n } \n__p+='</p>\\n  </div>\\n\\n  ';\n if (isClosable) { \n__p+='\\n    <div class=\"Notifier-actions js-closeButton\"></div>\\n  ';\n } \n__p+='\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    status: 'idle',\n    info: '',\n    closable: true\n  },\n\n  initialize: function (attrs, opts) {\n    if (attrs.id === undefined) {\n      this.set('id', 'notifier' + this.cid);\n    }\n\n    this.set('defaultDelay', opts.delay);\n\n    if (opts.visDefinitionModel) {\n      this._retriggerEvent(opts.visDefinitionModel, 'vis:reload');\n      this._retriggerEvent(opts.visDefinitionModel, 'vis:error');\n    }\n  },\n\n  isClosable: function () {\n    return this.get('closable') === true;\n  },\n\n  updateClosable: function (val) {\n    this.set({closable: val});\n  },\n\n  getButton: function () {\n    return this.get('button');\n  },\n\n  updateButton: function (val) {\n    this.set({button: val});\n  },\n\n  getStatus: function () {\n    return this.get('status');\n  },\n\n  updateStatus: function (val) {\n    this.set({status: val});\n  },\n\n  getInfo: function () {\n    return this.get('info');\n  },\n\n  getAction: function () {\n    return this.get('action');\n  },\n\n  setAction: function (val) {\n    this.set({action: val});\n  },\n\n  updateInfo: function (val) {\n    this.set({info: val});\n  },\n\n  update: function (state) {\n    this.set(state);\n  },\n\n  _retriggerEvent: function (model, event) {\n    model.on(event, function () {\n      this.trigger(event, arguments);\n    }, this);\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar NotifierItemView = require('./notifier-item-view');\nvar template = require('./notifier.tpl');\n\nmodule.exports = CoreView.extend({\n  className: 'Notifier',\n\n  initialize: function (opts) {\n    if (!opts.collection) throw new Error('collection is mandatory');\n    if (!opts.editorModel) throw new Error('editorModel is mandatory');\n\n    this._editorModel = opts.editorModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._renderAllSubviews();\n    this._renderLoading();\n    return this;\n  },\n\n  rebindEvents: function () {\n    // Just in case\n    this.stopListening(this.collection);\n    this.stopListening(this._editorModel);\n    this._initBinds();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.collection, 'reset update change:status', this.render);\n    this.add_related_model(this.collection);\n\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.add_related_model(this._editorModel);\n  },\n\n  _renderAllSubviews: function () {\n    this.collection.each(this._renderSubview, this);\n  },\n\n  _renderSubview: function (model) {\n    var view = new NotifierItemView({\n      notifierModel: model,\n      editorModel: this._editorModel\n    });\n\n    var status = model.get('status');\n    var container = (status === 'success' || status === 'error')\n                    ? this._getDoneContainer()\n                    : this._getLoadingContainer();\n    container.append(view.render().el);\n    this.addView(view);\n  },\n\n  _removeSubview: function (model) {\n    var id = model.get('id');\n    var view = _.first(_.filter(this._subviews, function (subview) {\n      return subview._notifierModel.get('id') === id;\n    }));\n\n    if (view) {\n      this.removeView(view);\n      view.remove();\n    }\n  },\n\n  _renderLoading: function () {\n    this._getLoader().toggleClass('is-visible', this._anyNotificationLoading());\n  },\n\n  _anyNotificationLoading: function () {\n    return this.collection.any(function (model) {\n      return !_.contains(['success', 'error', 'warning'], model.get('status'));\n    });\n  },\n\n  _changeStyle: function () {\n    this.$el.toggleClass('is-dark', this._editorModel.isEditing());\n  },\n\n  _getDoneContainer: function () {\n    return this.$('.js-status-done');\n  },\n\n  _getLoadingContainer: function () {\n    return this.$('.js-status-loading');\n  },\n\n  _getLoader: function () {\n    return this.$('.js-loader');\n  }\n});\n",
    "var NotifierView = require('./notifier-view');\nvar NotifierCollection = require('./notifier-collection');\n\nvar manager = (function () {\n  var initialized = false;\n  var notifierView;\n  var collection = new NotifierCollection();\n  var editorModel;\n\n  function init (opts) {\n    if (!editorModel && !opts) {\n      throw new Error('editorModel is required');\n    }\n\n    if (!editorModel && opts && opts.editorModel) {\n      editorModel = opts.editorModel;\n    }\n\n    initialized = true;\n    notifierView = new NotifierView({\n      collection: collection,\n      editorModel: editorModel\n    });\n  }\n\n  return {\n    DEFAULT_DELAY: 5000,\n    init: function (opts) {\n      if (opts.visDefinitionModel) {\n        this._visDefinitionModel = opts.visDefinitionModel;\n      }\n      init(opts);\n    },\n\n    getView: function () {\n      if (!initialized) init();\n      return notifierView.rebindEvents();\n    },\n\n    getCollection: function () {\n      return collection;\n    },\n\n    getNotification: function (model) {\n      var notification;\n      if (typeof model === 'string') {\n        notification = collection.findById(model);\n      } else {\n        notification = collection.findById(model.id);\n      }\n      return notification;\n    },\n\n    addNotification: function (attrs) {\n      return collection.add(attrs, {\n        visDefinitionModel: this._visDefinitionModel,\n        delay: this.DEFAULT_DELAY\n      });\n    },\n\n    removeNotification: function (model) {\n      var notification;\n      if (typeof model === 'string') {\n        notification = collection.findById(model);\n      } else {\n        notification = collection.findById(model.id);\n      }\n      return collection.remove(notification);\n    }\n  };\n})();\n\nmodule.exports = manager;\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Loader js-loader\"></div>\\n<ul class=\"Notifier-list js-status-loading\"></ul>\\n<ul class=\"Notifier-list js-status-done\"></ul>';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar template = require('./builder-activated-notification.tpl');\nvar DASHBOARD_NOTIFICATION_KEY = 'builder_activated';\n\nmodule.exports = CoreView.extend({\n  className: 'js-builderNotification',\n  events: {\n    'click .js-close': '_onClose'\n  },\n\n  initialize: function () {\n    if (!this.options.builderActivatedNotification) { throw new Error('builderActivatedNotification is required'); }\n    this._notification = this.options.builderActivatedNotification;\n\n    this.render();\n  },\n\n  render: function () {\n    this.$el.html(template());\n    $('body').prepend(this.$el);\n\n    return this;\n  },\n\n  _onClose: function () {\n    this._notification.setKey(DASHBOARD_NOTIFICATION_KEY, true);\n    this._notification.save();\n\n    this.clean();\n  },\n\n  clean: function () {\n    this.constructor.__super__.clean.apply(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"onboardingNotification Color-MainDark CDB-Text CDB-Size-medium u-flex u-justifyCenter\">\\n  <p>'+\n((__t=( _t('builder-activated-notification.message') ))==null?'':__t)+\n'</p>\\n\\n  <button class=\"onboardingNotification-closeButton js-close\">\\n    <div class=\"CDB-Shape-close is-large is-white\"></div>\\n  </button>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\n\n/**\n * Model representing the query string params for a \"paged search\" of a collection (matching the server-side APIs).\n *\n * @example usage\n *   pagedSearch = new PaginationSearchModel({  })\n *   pagedSearch.fetch(collection) // => jqXHR, GET /collection/123?page=1&per_page20\n *   pagedSearch.set({ page: 2, per_page: 10, q: 'test' });\n *   pagedSearch.fetch(collection) // => GET /collection/123?page=2&per_page10&q=test\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    per_page: 20,\n    page: 1,\n    q: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.collection) throw new Error('collection is required');\n    if (!opts.collection.totalCount) throw new Error('collection requires to implement totalCount method');\n\n    this.collection = opts.collection;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.collection.on('sync', this._updateStateFetched, this);\n    this.collection.on('error', this._updateStateError, this);\n  },\n\n  fetch: function () {\n    this.trigger('fetching', this);\n    return this.collection.fetch({\n      data: this.attributes\n    }, {reset: true});\n  },\n\n  _updateStateFetched: function () {\n    this.trigger('fetched', this);\n  },\n\n  _updateStateError: function () {\n    this.trigger('error', this);\n  }\n});\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar PaginationModel = require('../pagination/pagination-model');\nvar PaginationSearchModel = require('./pagination-search-model');\nvar renderLoading = require('../loading/render-loading');\nvar renderNoResults = require('../no-results/render-no-results');\nvar ErrorView = require('../error/error-view');\nvar template = require('./pagination-search.tpl');\nvar Utils = require('../../helpers/utils');\nvar PaginationView = require('../pagination/pagination-view');\nvar paginationTemplate = require('./pagination.tpl');\n\n/**\n * View to render a searchable/pageable collection.\n * Also allows to filter/search list.\n *\n */\n\nvar REQUIRED_OPTS = [\n  'listCollection',\n  'createContentView'\n];\n\nvar ENTER_KEY_CODE = 13;\nvar ESCAPE_KEY_CODE = 27;\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-search-link': '_onSearchClick',\n    'click .js-clean-search': '_onCleanSearchClick',\n    'keydown .js-search-input': '_onKeyDown'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._paginationModel = new PaginationModel({\n      current_page: 1\n    });\n\n    this._paginationSearchModel = new PaginationSearchModel({}, {\n      collection: this._listCollection\n    });\n\n    this._stateModel = new Backbone.Model({\n      state: 'idle'\n    });\n\n    this._initBinds();\n    this._initPagination();\n    this._paginationSearchModel.fetch();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      q: this._paginationSearchModel.get('q')\n    }));\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._paginationSearchModel.on('fetching', this.showLoading, this);\n    this._paginationSearchModel.on('fetched', this._updateStateFetched, this);\n    this._paginationSearchModel.on('error', this.showError, this);\n\n    this._paginationModel.bind('change:current_page', this._fetchByPagination, this);\n\n    this._stateModel.on('change:state', this.render, this);\n\n    this.add_related_model(this._paginationModel);\n    this.add_related_model(this._stateModel);\n    this.add_related_model(this._stateModel);\n  },\n\n  _fetchByPagination: function () {\n    this._paginationSearchModel.set('page', this._paginationModel.get('current_page'));\n    this._paginationSearchModel.fetch();\n  },\n\n  showError: function () {\n    this._stateModel.set('state', 'error');\n  },\n\n  showLoading: function () {\n    this._stateModel.set('state', 'loading');\n  },\n\n  _updateStateFetched: function () {\n    this._paginationModel.set({\n      per_page: this._paginationSearchModel.get('per_page'),\n      total_count: this._listCollection.totalCount()\n    });\n    if (this._listCollection.length > 0) {\n      this._stateModel.set('state', 'show');\n    } else {\n      this._stateModel.set('state', 'no-results');\n    }\n  },\n\n  _initPagination: function () {\n    this._paginationView = new PaginationView({\n      className: 'Pagination Pagination--search Pagination--searchShare',\n      model: this._paginationModel,\n      template: paginationTemplate\n    });\n    this.addView(this._paginationView);\n  },\n\n  _initViews: function () {\n    var state = this._stateModel.get('state');\n    var view;\n\n    this.$el.append(this._paginationView.render().el);\n\n    if (state === 'loading') {\n      this._content().html(renderLoading({\n        title: _t('components.pagination-search.loading.title')\n      }));\n    }\n\n    if (state === 'error') {\n      var errorView = new ErrorView({\n        title: _t('components.pagination-search.error.title'),\n        desc: _t('components.pagination-search.error.desc')\n      });\n      this._content().html(errorView.render().el);\n      this.addView(errorView);\n    }\n\n    if (state === 'show') {\n      view = this._createContentView({\n        hasOrganization: this._paginationSearchModel.get('q') === ''\n      });\n      this._content().html(view.render().el);\n      this.addView(view);\n    }\n\n    if (state === 'no-results') {\n      this._content().html(renderNoResults({\n        icon: 'CDB-IconFont-defaultUser',\n        title: _t('components.pagination-search.no-results.title'),\n        desc: _t('components.pagination-search.no-results.desc')\n      }));\n    }\n  },\n\n  _focusSearchInput: function () {\n    this._searchInput().focus().val();\n  },\n\n  _onSearchClick: function (e) {\n    this.killEvent(e);\n    this._searchInput().focus();\n  },\n\n  _onCleanSearchClick: function (e) {\n    this.killEvent(e);\n    this._cleanSearch();\n  },\n\n  _onKeyDown: function (e) {\n    if (e.which === ENTER_KEY_CODE) {\n      this.killEvent(e);\n      this._submitSearch();\n    } else if (e.which === ESCAPE_KEY_CODE) {\n      if (this._paginationSearchModel.get('q')) {\n        this.killEvent(e);\n        this._cleanSearch();\n      }\n    }\n  },\n\n  _submitSearch: function (e) {\n    this._makeNewSearch(Utils.stripHTML(this._searchInput().val().trim()));\n  },\n\n  _cleanSearch: function () {\n    this._searchInput().val('');\n    this._makeNewSearch('');\n  },\n\n  _makeNewSearch: function (query) {\n    this._paginationSearchModel.set({\n      q: query,\n      page: 1\n    });\n\n    this._paginationSearchModel.fetch();\n  },\n\n  _searchInput: function () {\n    return this.$('.js-search-input');\n  },\n\n  _cleanSearchBtn: function () {\n    return this.$('.js-clean-search');\n  },\n\n  _content: function () {\n    return this.$('.js-content');\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Filters is-relative\">\\n  <div class=\"Filters-inner\">\\n    <div class=\"Filters-row Share-filtersRow js-filters\">\\n      <div class=\"Filters-typeItem Filters-typeItem--searchEnabler\">\\n        <p class=\"Filters-searchLink js-search-link u-alignCenter CDB-Text CDB-Size-medium u-upperCase\">\\n          <i class=\"Filters-searchLinkIcon CDB-IconFont CDB-IconFont-lens u-rSpace--xl\"></i> '+\n((__t=( _t('components.pagination-search.filter.search') ))==null?'':_.escape(__t))+\n'\\n        </p>\\n      </div>\\n      <div class=\"Filters-typeItem Filters-typeItem--searchField\">\\n        <input class=\"Filters-searchInput CDB-Text CDB-Size-medium js-search-input\" type=\"text\" value=\"'+\n((__t=( q ))==null?'':_.escape(__t))+\n'\" placeholder=\"'+\n((__t=( _t('components.pagination-search.filter.placeholder') ))==null?'':_.escape(__t))+\n'\" />\\n        ';\n if (q !== '') { \n__p+='\\n        <button type=\"button\" class=\"CDB-Shape Filters-cleanSearch js-clean-search u-actionTextColor\">\\n          <div class=\"CDB-Shape-close is-blue is-large\"></div>\\n        </button>\\n        ';\n } \n__p+='\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n<div class=\"js-content\"></div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<span class=\"CDB-Text CDB-Size-medium u-altTextColor Pagination-label\">\\n  Page '+\n((__t=( currentPage ))==null?'':_.escape(__t))+\n' of '+\n((__t=( pagesCount ))==null?'':_.escape(__t))+\n'\\n</span>\\n<ul class=\"Pagination-list CDB-Text CDB-Size-medium\">\\n  ';\n m.pagesToDisplay().forEach(function(page) { \n__p+='\\n    ';\n if (page > 0) { \n__p+='\\n      <li class=\"Pagination-listItem '+\n((__t=( m.isCurrentPage(page) ? 'is-current' : '' ))==null?'':_.escape(__t))+\n'\">\\n        <button class=\"Pagination-listItemInner Pagination-listItemInner--link u-actionTextColor js-listItem\" data-page=\"'+\n((__t=( page ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( page ))==null?'':_.escape(__t))+\n'</button>\\n      </li>\\n    ';\n } else { \n__p+='\\n      <li class=\"Pagination-listItem Pagination-listItem\">\\n        <span class=\"Pagination-listItemInner Pagination-listItemInner--more\">&hellip;</span>\\n      </li>\\n    ';\n } \n__p+='\\n  ';\n }) \n__p+='\\n</ul>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\n/**\n * View model intended to be responsible for pagination logic, and to be used in conjunction with a Pagination view.\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    total_count: 0,\n    per_page: 10,\n    current_page: 1,\n    display_count: 5,\n    extras_display_count: 1,\n    url_to: undefined\n  },\n\n  pagesCount: function () {\n    return Math.max(\n      Math.ceil(\n        this.get('total_count') / this.get('per_page')\n      ), 1);\n  },\n\n  isCurrentPage: function (page) {\n    return this.get('current_page') === page;\n  },\n\n  shouldBeVisible: function () {\n    var pagesCount = this.pagesCount();\n    return this.get('total_count') > 0 && pagesCount > 1 && this.get('current_page') <= pagesCount;\n  },\n\n  urlTo: function (page) {\n    if (this.hasUrl()) {\n      return this.get('url_to')(page);\n    }\n  },\n\n  hasUrl: function () {\n    return typeof this.get('url_to') === 'function';\n  },\n\n  /**\n   * Get the pages that are expected to be displayed.\n   * The current page will be in the middle of the returned sequence.\n   *\n   * @returns {number[]} a sequence of Numbers\n   */\n  pagesToDisplay: function () {\n    var rangeStart;\n\n    if (this._inLowRange()) {\n      rangeStart = 1;\n    } else if (this._inHighRange()) {\n      rangeStart = this.get('current_page') - this._startOffset();\n    } else {\n      // Somewhere between the low and high boundary\n      rangeStart = this.pagesCount() - this.get('display_count') + 1;\n    }\n    rangeStart = Math.max(rangeStart, 1);\n\n    return this._withExtraPages(\n      _.range(rangeStart, this._rangeEnd(rangeStart))\n    );\n  },\n\n  _withExtraPages: function (pagesRelativeToCurrentPage) {\n    var lastPage = this.pagesCount();\n    var extraCount = this.get('extras_display_count');\n    var extraStartPages = _.range(1, extraCount + 1);\n    var extraEndPages = _.range(lastPage - extraCount + 1, lastPage + 1);\n\n    var startPagesDiff = pagesRelativeToCurrentPage[0] - extraStartPages.slice(-1)[0];\n    if (startPagesDiff === 2) {\n      // There is only one missing page in the gap, so add it\n      extraStartPages.push(pagesRelativeToCurrentPage[0] - 1);\n    } else if (startPagesDiff > 2) {\n      // There are more hidden pages at low range, add padding at end\n      extraStartPages.push(-1);\n    }\n\n    var endPagesDiff = extraEndPages[0] - pagesRelativeToCurrentPage.slice(-1);\n    if (endPagesDiff === 2) {\n      // There is only one missing page in the gap, so add it\n      extraEndPages.unshift(extraEndPages[0] - 1);\n    } if (endPagesDiff > 2) {\n      // There are more hidden pages at high range, add padding at beginning\n      extraEndPages.unshift(-2);\n    }\n\n    return _.union(extraStartPages, pagesRelativeToCurrentPage, extraEndPages);\n  },\n\n  _inLowRange: function () {\n    return this.get('current_page') < this._startOffset();\n  },\n\n  _inHighRange: function () {\n    return this.get('current_page') < this._highBoundary();\n  },\n\n  _highBoundary: function () {\n    return this.pagesCount() - this._startOffset();\n  },\n\n  _startOffset: function () {\n    return Math.floor(this.get('display_count') / 2);\n  },\n\n  _rangeEnd: function (rangeStart) {\n    // If we are too close to the range end then cap to the pages count.\n    return Math.min(rangeStart + this.get('display_count'), this.pagesCount() + 1);\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar navigateThroughRouter = require('../../helpers/navigate-through-router');\nvar template = require('./pagination.tpl');\n\n/**\n * Responsible for pagination.\n *\n * Expected to be created with a pagination model, see the model for available params, here we create w/ the minimum:\n *   new PaginationView({\n *     model: new PaginationModel({\n *       // Compulsory:\n *       urlTo:  function(page) { return '/?page='+ page },\n\n         // Optional, to router clicks on <a> tags through router.navigate by default\n *       routerModel: new Router(...)\n *     })\n *   });\n */\nmodule.exports = CoreView.extend({\n  className: 'Pagination',\n\n  events: {\n    'click .js-listItem': '_paginate'\n  },\n\n  initialize: function (opts) {\n    this._routerModel = opts.routerModel; // Optional\n\n    if (this.router && !this.model.hasUrl()) {\n      throw new Error('since router is set the model must have a url method set too');\n    }\n\n    this.template = opts.template || template;\n    this.model.bind('change', this.render, this);\n  },\n\n  render: function () {\n    if (this.model.shouldBeVisible()) {\n      this.$el.html(\n        this.template({\n          m: this.model,\n          pagesCount: this.model.pagesCount(),\n          currentPage: this.model.get('current_page')\n        })\n      );\n      this.$el.addClass(this.className);\n      this.delegateEvents();\n    } else {\n      this.$el.html('');\n    }\n\n    return this;\n  },\n\n  _paginate: function (ev) {\n    if (this._routerModel) {\n      navigateThroughRouter.apply(this, arguments);\n    } else if (!this.model.hasUrl()) {\n      this.killEvent(ev);\n    }\n\n    var page = $(ev.target).data('page');\n    this.model.set('current_page', page);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<span class=\"CDB-Text CDB-Size-medium u-altTextColor Pagination-label\">\\n  Page '+\n((__t=( currentPage ))==null?'':_.escape(__t))+\n' of '+\n((__t=( pagesCount ))==null?'':_.escape(__t))+\n'\\n</span>\\n<ul class=\"Pagination-list CDB-Text CDB-Size-medium\">\\n  ';\n m.pagesToDisplay().forEach(function(page) { \n__p+='\\n    ';\n if (page > 0) { \n__p+='\\n      <li class=\"Pagination-listItem '+\n((__t=( m.isCurrentPage(page) ? 'is-current' : '' ))==null?'':_.escape(__t))+\n'\">\\n        <a class=\"Pagination-listItemInner Pagination-listItemInner--link js-listItem\" href=\"'+\n((__t=( m.urlTo(page) ))==null?'':_.escape(__t))+\n'\" data-page=\"'+\n((__t=( page ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( page ))==null?'':_.escape(__t))+\n'</a>\\n      </li>\\n    ';\n } else { \n__p+='\\n      <li class=\"Pagination-listItem Pagination-listItem\">\\n        <span class=\"Pagination-listItemInner Pagination-listItemInner--more\">&hellip;</span>\\n      </li>\\n    ';\n } \n__p+='\\n  ';\n }) \n__p+='\\n</ul>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\n\nvar MutationObserver = window.MutationObserver;\n\nvar MARGINS = {\n  top: 8,\n  bottom: 8\n};\n\nvar initObserver = function (popup, onChangeMutation) {\n  var config = {\n    childList: true,\n    subtree: true\n  };\n\n  if (!MutationObserver) {\n    return;\n  }\n\n  var observer = new MutationObserver(onChangeMutation);\n  observer.observe(popup.get ? popup.get(0) : popup, config);\n  return observer;\n};\n\nvar initScroll = function (reference) {\n  return reference.closest('.js-perfect-scroll');\n};\n\nvar Manager = function (id, reference, popup) {\n  this.id = id;\n  this.reference = reference;\n  this.popup = popup;\n  this.state = {\n    position: 'bottom',\n    scroll: 0\n  };\n\n  // to capture click events and avoid close the dialog\n  popup.attr('data-cid', id);\n  popup.attr('data-dialog', id);\n};\n\nManager.prototype = {\n  append: function (mode) {\n    this.mode = mode;\n    var popup = this.popup.get(0);\n    var ref = this.reference.get(0);\n    if (mode === 'float') {\n      document.body.appendChild(popup);\n    } else {\n      ref.appendChild(popup);\n    }\n  },\n\n  track: function () {\n    if (this.mode !== 'float') {\n      return;\n    }\n\n    // we need to watch when the dialog's height changes in order to reposition it again\n    this.observer = initObserver(this.popup, this.onChangeMutation.bind(this));\n    this.emitter = initScroll(this.reference);\n    this.repositionBinded = _.throttle(this.reposition.bind(this), 15);\n\n    if (this.emitter) {\n      this.emitter\n        .on('ps-scroll-x', this.repositionBinded)\n        .on('ps-scroll-y', this.repositionBinded);\n    }\n\n    this.reposition();\n  },\n\n  onChangeMutation: function (mutations) {\n    _.each(mutations, function (mutation) {\n      var target = $(mutation.target);\n      var id = target.attr('data-cid');\n\n      if (!id) {\n        id = target.closest('[data-cid]').attr('data-cid');\n      }\n\n      if (id === this.id) {\n        this.repositionBinded();\n      }\n    }, this);\n  },\n\n  reposition: function () {\n    if (this.mode !== 'float' || !this.emitter) {\n      return;\n    }\n\n    var scroll = this.emitter.get(0).scrollTop;\n\n    var dh = $(window).height();\n    var ref = this.reference;\n    var popup = this.popup;\n    var state = this.state;\n\n    var refPosition = ref.offset();\n    var ph = popup.outerHeight();\n\n    var onBottom = refPosition.top + ref.outerHeight() + MARGINS.top;\n    var onTop = refPosition.top - ph - MARGINS.bottom;\n    var top;\n\n    // If this condition matches, the dialog has changed its size\n    if (state.scroll === scroll) {\n      // We maintain position unless there is no space\n      if (state.position === 'top') {\n        if (onTop <= 0) {\n          top = onBottom;\n          state.position = 'bottom';\n        } else {\n          top = onTop;\n        }\n      } else {\n        if (onBottom + ph + MARGINS.bottom >= dh) {\n          top = onTop;\n          state.position = 'top';\n        } else {\n          top = onBottom;\n        }\n      }\n    } else {\n      if (onBottom + ph + MARGINS.bottom >= dh) {\n        top = onTop;\n        state.position = 'top';\n      } else {\n        top = onBottom;\n        state.position = 'bottom';\n      }\n    }\n\n    // Boundries come from document height to avoid scroll\n    if (top < 0) {\n      top = MARGINS.top;\n    } else {\n      top = Math.min(top, dh - ph - MARGINS.bottom);\n    }\n\n    popup.css({\n      top: top,\n      left: refPosition.left\n    });\n\n    state.scroll = scroll;\n  },\n\n  untrack: function () {\n    this.observer && this.observer.disconnect();\n    if (this.emitter) {\n      this.emitter\n        .off('ps-scroll-x', this.repositionBinded)\n        .off('ps-scroll-y', this.repositionBinded);\n    }\n  },\n\n  destroy: function () {\n    this.untrack();\n\n    var el = document.querySelector('[data-dialog=' + this.id + ']');\n    if (el) {\n      el.parentNode.removeChild(el);\n    }\n\n    this.emitter = null;\n    this.reference = null;\n    this.popup = null;\n  }\n};\n\nmodule.exports = Manager;\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./password-dialog.tpl');\nvar _ = require('underscore');\n\nvar REQUIRED_OPTS = [\n  'onBack',\n  'onEdit'\n];\n\nvar ESCAPE_KEY_CODE = 27;\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-boxModal Editor-PrivacyDialog',\n\n  events: {\n    'click .js-back': '_onClickBack',\n    'keyup .js-input': '_onKeyUpInput'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.$el.html(template());\n    return this;\n  },\n\n  _onKeyUpInput: function (e) {\n    if (e.which === ESCAPE_KEY_CODE) {\n      this._onBack();\n    }\n\n    if (e.which === ENTER_KEY_CODE) {\n      this._onEdit && this._onEdit(this.getValue());\n    }\n  },\n\n  _onClickBack: function () {\n    this._onBack();\n  },\n\n  getValue: function () {\n    return this.$('.js-input').val();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical\">\\n      <button class=\"u-actionTextColor js-back CDB-Size-medium u-rSpace\">\\n        <i class=\"CDB-IconFont CDB-IconFont-arrowPrev\"></i>\\n      </button>\\n      <span class=\"CDB-Text CDB-Size-medium\">\\n        '+\n((__t=( _t('components.modals.publish.privacy.password.title') ))==null?'':_.escape(__t))+\n'\\n      </span>\\n    </li>\\n  </ul>\\n</div>\\n<ul class=\"CustomList-list js-customList\">\\n  <li class=\"Privacy-passwordField CustomList-item\">\\n    <input type=\"password\" class=\"CDB-Text CDB-InputText js-input\" placeholder=\"'+\n((__t=( _t('components.modals.publish.privacy.password.placeholder') ))==null?'':_.escape(__t))+\n'\">\\n  </li>\\n</ul>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Privacy-cta u-flex\">\\n  <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n      <path d=\"M10.0946667,4.4109223 C10.8886667,4.1368747 11.6846667,3.80147316 12.0073333,3.4715253 C12.7866667,2.67392407 12.7866667,1.37662907 12.0073333,0.579027844 C11.2513333,-0.193350099 9.934,-0.192668389 9.17866667,0.579027844 C8.74133333,1.0262299 8.29266667,2.36033726 8,3.37608583 C7.70666667,2.36033726 7.25866667,1.0262299 6.82133333,0.579027844 C6.066,-0.193350099 4.748,-0.192668389 3.99266667,0.579027844 C3.21266667,1.37662907 3.21266667,2.67392407 3.99266667,3.4715253 C4.316,3.80147316 5.11133333,4.1368747 5.90533333,4.4109223 L0.333333333,4.4109223 C0.149333333,4.4109223 0,4.56362544 0,4.75177753 L0,7.47861934 C0,7.66677142 0.149333333,7.81947456 0.333333333,7.81947456 L0.666666667,7.81947456 L0.666666667,15.6591448 C0.666666667,15.8472969 0.816,16 1,16 L15,16 C15.184,16 15.3333333,15.8472969 15.3333333,15.6591448 L15.3333333,7.81947456 L15.6666667,7.81947456 C15.8506667,7.81947456 16,7.66677142 16,7.47861934 L16,4.75177753 C16,4.56362544 15.8506667,4.4109223 15.6666667,4.4109223 L10.0946667,4.4109223 Z M6,6.95652174 L6,4.86956522 L10,4.86956522 L10,6.95652174 L6,6.95652174 L6,6.95652174 Z M10,7.65217391 L10,15.3043478 L6,15.3043478 L6,7.65217391 L10,7.65217391 L10,7.65217391 Z M9.80833133,1.08822938 C10.0510474,0.834996985 10.3727426,0.695652174 10.7169115,0.695652174 C11.0597961,0.695652174 11.3821334,0.834996985 11.6248495,1.08755946 C12.1250502,1.6101025 12.1250502,2.46023983 11.6248495,2.98278288 C11.2729754,3.34990286 9.79227867,3.85636766 8.66666667,4.17391304 C8.97102496,2.99953105 9.45581507,1.45534937 9.80833133,1.08822938 L9.80833133,1.08822938 Z M4.37515049,1.08822938 C4.6178666,0.834996985 4.94020387,0.695652174 5.28373064,0.695652174 C5.6266153,0.695652174 5.94895256,0.834996985 6.19166867,1.08755946 C6.54354282,1.45467944 7.02833293,2.99886112 7.33333333,4.17391304 C6.20707922,3.85569773 4.72638253,3.34990286 4.37515049,2.98278288 C3.87494984,2.46090976 3.87494984,1.61077243 4.37515049,1.08822938 L4.37515049,1.08822938 Z M0.666666667,4.86956522 L5.33333333,4.86956522 L5.33333333,6.95652174 L1,6.95652174 L0.666666667,6.95652174 L0.666666667,4.86956522 L0.666666667,4.86956522 Z M1.33333333,7.65217391 L5.33333333,7.65217391 L5.33333333,15.3043478 L1.33333333,15.3043478 L1.33333333,7.65217391 L1.33333333,7.65217391 Z M14.6666667,15.3043478 L10.6666667,15.3043478 L10.6666667,7.65217391 L14.6666667,7.65217391 L14.6666667,15.3043478 L14.6666667,15.3043478 Z M15.3333333,6.95652174 L15,6.95652174 L10.6666667,6.95652174 L10.6666667,4.86956522 L15.3333333,4.86956522 L15.3333333,6.95652174 L15.3333333,6.95652174 Z\" id=\"Shape\" fill=\"#9BC63B\"></path>\\n    </g>\\n  </svg>\\n  <div class=\"CDB-Text CDB-Size CDB-Size-small u-lSpace--xl\">\\n    <h3 class=\"u-secondaryTextColor\">'+\n((__t=( _t('components.modals.publish.privacy.cta.title') ))==null?'':_.escape(__t))+\n'</h3>\\n    <a href=\"'+\n((__t=( upgradeURL ))==null?'':_.escape(__t))+\n'\">\\n      '+\n((__t=( _t( 'components.modals.publish.privacy.cta.desc-' + (showTrial ? 'trial' : 'notrial') ) ))==null?'':_.escape(__t))+\n'\\n    </a>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar CustomListView = require('../custom-list/custom-list-view');\nvar CustomListItemView = require('../custom-list/custom-list-item-view');\nvar privacyCTATemplate = require('./privacy-cta.tpl');\nvar _ = require('underscore');\n\nvar REQUIRED_OPTS = [\n  'model',\n  'collection',\n  'userModel',\n  'configModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-boxModal Privacy-dialog',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n    this._renderList();\n    return this;\n  },\n\n  _renderList: function () {\n    var disabledOptions = this._collection.where({ disabled: true });\n    var customInstall = this._configModel.get('cartodb_com_hosted');\n    var upgradeURL = this._configModel.get('upgrade_url');\n\n    var listView = new CustomListView({\n      model: this._model,\n      collection: this._collection,\n      ItemView: CustomListItemView\n    });\n    this.$el.append(listView.render().el);\n    this.addView(listView);\n\n    if (disabledOptions.length > 0 && !customInstall && upgradeURL) {\n      this.$el.append(\n        privacyCTATemplate({\n          upgradeURL: upgradeURL,\n          showTrial: this._userModel.canStartTrial()\n        })\n      );\n    }\n  }\n});\n",
    "var $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar PrivacyDialogView = require('./privacy-dialog-view');\nvar PasswordDialogView = require('./password-dialog-view');\nvar TabPaneView = require('../tab-pane/tab-pane-view');\nvar TabPaneCollection = require('../tab-pane/tab-pane-collection');\nvar CustomListCollection = require('../custom-list/custom-list-collection');\nvar template = require('./privacy-dropdown.tpl');\nvar templateTabPane = require('./tab-pane.tpl');\n\nvar _ = require('underscore');\n\nvar ESCAPE_KEY_CODE = 27;\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'userModel',\n  'privacyCollection',\n  'configModel'\n];\n\nvar PRIVACY_MAP = {\n  public: 'green',\n  link: 'orange',\n  password: 'orange-dark',\n  private: 'red'\n};\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-toggle': '_onToggleDialogClicked'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._triggerElementID = 'toggle' + this.cid;\n\n    this.model = new Backbone.Model({\n      privacy: opts.visDefinitionModel.get('privacy'),\n      state: 'show'\n    });\n\n    this._onEscapePressed = this._onEscapePressed.bind(this);\n    this._onDocumentElementClicked = this._onDocumentElementClicked.bind(this);\n\n    this._configPrivacyCollection();\n    this._configPanes();\n    this._initBinds();\n  },\n\n  render: function () {\n    var privacy = this.model.get('privacy');\n    var cssClass = PRIVACY_MAP[privacy.toLowerCase()];\n\n    this.clearSubViews();\n    this._hideDialog();\n    this.$el.html(template({\n      privacy: privacy,\n      cssClass: cssClass,\n      isLoading: this.model.get('state') === 'loading'\n    }));\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._customCollection.on('change:selected', function (menuItem) {\n      if (menuItem.get('disabled')) {\n        return;\n      }\n\n      if (menuItem.get('val') === 'password') {\n        this._showPasswordDialog();\n      } else {\n        this._onToggleDialogClicked();\n        this._setPrivacy(menuItem.get('val'));\n      }\n    }, this);\n\n    this.add_related_model(this._customCollection);\n\n    this.model.on('change:privacy', this._savePrivacy, this);\n    this.model.on('change:state', this.render, this);\n    this.add_related_model(this.model); // explicit\n  },\n\n  _makePrivacyDialog: function () {\n    return new PrivacyDialogView({\n      model: this.model,\n      collection: this._customCollection,\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n  },\n\n  _makePasswordDialog: function () {\n    return new PasswordDialogView({\n      onBack: this._showPrivacyDialog.bind(this),\n      onEdit: this._setPassword.bind(this)\n    });\n  },\n\n  _setPrivacy: function (privacy) {\n    this.model.set({privacy: privacy});\n  },\n\n  _setPassword: function (password) {\n    if (password !== '') {\n      this._privacyCollection.passwordOption().set({\n        password: password\n      });\n\n      this.model.set({\n        privacy: 'password',\n        password: password\n      });\n    }\n  },\n\n  _savePrivacy: function () {\n    var self = this;\n    var privacy = this.model.get('privacy').toUpperCase();\n    var vis = this._visDefinitionModel;\n    this.model.set({state: 'loading'});\n    this._privacyCollection.searchByPrivacy(privacy).saveToVis(vis, {\n      success: function () {\n        self.model.set({state: 'show'});\n      },\n      error: function () {\n        self.model.set({state: 'error'});\n      }\n    });\n  },\n\n  _transformPrivacyOptions: function () {\n    return this._privacyCollection.map(function (item) {\n      return {\n        label: item.get('title'),\n        val: item.get('privacy').toLowerCase(),\n        disabled: item.get('disabled'),\n        selected: item.get('selected'),\n        renderOptions: {\n          cssClass: item.get('cssClass')\n        }\n      };\n    }).filter(Boolean);\n  },\n\n  _configPrivacyCollection: function () {\n    var models = this._transformPrivacyOptions();\n    this._customCollection = new CustomListCollection(models);\n  },\n\n  _configPanes: function () {\n    var self = this;\n    var tabPaneTabs = [{\n      createContentView: self._showNoneDialog\n    }, {\n      createContentView: self._makePrivacyDialog.bind(self)\n    }, {\n      createContentView: self._makePasswordDialog.bind(self)\n    }];\n\n    this._collectionPane = new TabPaneCollection(tabPaneTabs);\n  },\n\n  _showNoneDialog: function () {\n    return false;\n  },\n\n  _showPasswordDialog: function () {\n    this._collectionPane.at(2).set({selected: true});\n  },\n\n  _showPrivacyDialog: function () {\n    this._customCollection.each(function (m) {\n      m.set({selected: false}, {silent: true});\n    });\n\n    this._collectionPane.at(1).set({selected: true});\n  },\n\n  _onToggleDialogClicked: function () {\n    if (this._isDialogVisible()) {\n      this._hideDialog();\n    } else {\n      this._initDocumentBinds();\n      this._showPrivacyDialog();\n    }\n  },\n\n  _isDialogVisible: function () {\n    return this._collectionPane.at(0).get('selected') === false;\n  },\n\n  _hideDialog: function () {\n    this._destroyDocumentBinds();\n    this._collectionPane.at(0).set({selected: true});\n  },\n\n  _showDialog: function () {\n    this._showPrivacyDialog();\n  },\n\n  _initViews: function () {\n    var view = new TabPaneView({\n      collection: this._collectionPane,\n      template: templateTabPane\n    });\n    this.$('.js-dialog').append(view.render().$el);\n    this.addView(view);\n  },\n\n  _initDocumentBinds: function () {\n    $(document).on('keydown', this._onEscapePressed);\n    $(document).on('mousedown', this._onDocumentElementClicked);\n  },\n\n  _destroyDocumentBinds: function () {\n    $(document).off('keydown', this._onEscapePressed);\n    $(document).off('mousedown', this._onDocumentElementClicked);\n  },\n\n  _onEscapePressed: function (ev) {\n    if (ev.which === ESCAPE_KEY_CODE) {\n      this._hideDialog();\n    }\n  },\n\n  _onDocumentElementClicked: function (ev) {\n    var $el = $(ev.target);\n    if ($el.closest(this.$el).length === 0 && $el.closest($('#' + this._triggerElementID)).length === 0) {\n      this._hideDialog();\n    }\n  },\n\n  clean: function () {\n    this._destroyDocumentBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Privacy-dropdown\">\\n  <button class=\"Privacy-dropdownTrigger Tag Tag-fill Tag-fill--'+\n((__t=( cssClass ))==null?'':_.escape(__t))+\n' CDB-Text CDB-Size-small u-upperCase js-toggle\">\\n    ';\n if (isLoading) { \n__p+='\\n      <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small u-flex\">\\n        <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n          <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n        </svg>\\n      </div>\\n    ';\n } else { \n__p+='\\n      '+\n((__t=( privacy ))==null?'':_.escape(__t))+\n'\\n    ';\n } \n__p+='\\n  </button>\\n\\n  <div class=\"js-dialog\"></div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Tab-paneContent js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar Ps = require('perfect-scrollbar');\nvar template = require('./scroll.tpl');\nvar MutationObserver = window.MutationObserver;\n\nmodule.exports = CoreView.extend({\n  tagName: 'div',\n  className: 'ScrollView',\n\n  initialize: function (opts) {\n    if (!opts.createContentView) throw new Error('A factory createContentView function is required');\n    this.options = opts || {};\n    this._type = opts.type || 'vertical'; // vertical or horizontal\n    this._maxScroll = 0;\n    this._bindedCheckShadows = this._checkShadows.bind(this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._html();\n\n    var view = this.options.createContentView.call(this);\n    this._contentContainer().append(view.render().el);\n    this.addView(view);\n    this._applyScroll();\n    this._updateScrollWhenExist();\n    return this;\n  },\n\n  _html: function () {\n    this.$el.html(template({\n      type: this._type\n    }));\n\n    (this._type === 'horizontal') && this.$el.addClass('ScrollView--horizontal');\n  },\n\n  _contentContainer: function () {\n    return this.$('.js-content');\n  },\n\n  _wrapperContainer: function () {\n    return this.$('.js-wrapper');\n  },\n\n  _updateScrollWhenExist: function () {\n    // Phantom doesn't provide this api for window.\n    if (!MutationObserver) return;\n\n    // even with the changes in PS, we need to check when this element is added to the dom\n    // in order to trigger manually an update.\n    var element = document.body;\n    var self = this._wrapperContainer().get(0);\n    var onMutationObserver = function () {\n      if (element.contains(self)) {\n        Ps.update(self);\n        observer.disconnect();\n      }\n    };\n\n    var observer = new MutationObserver(onMutationObserver);\n    onMutationObserver();\n\n    var config = { subtree: true, childList: true };\n    observer.observe(element, config);\n  },\n\n  _applyScroll: function () {\n    Ps.initialize(this._wrapperContainer().get(0), {\n      wheelSpeed: 2,\n      wheelPropagation: true,\n      stopPropagationOnClick: false,\n      minScrollbarLength: 20,\n      suppressScrollX: this._type === 'vertical',\n      suppressScrollY: this._type === 'horizontal'\n    });\n\n    this._bindScroll();\n  },\n\n  _bindScroll: function () {\n    this._wrapperContainer()\n      .on('ps-dom-change', this._bindedCheckShadows)\n      .on('ps-x-reach-start', this._bindedCheckShadows)\n      .on('ps-x-reach-end', this._bindedCheckShadows)\n      .on('ps-y-reach-start', this._bindedCheckShadows)\n      .on('ps-y-reach-end', this._bindedCheckShadows)\n      .on('ps-scroll-x', this._bindedCheckShadows)\n      .on('ps-scroll-y', this._bindedCheckShadows);\n  },\n\n  _unbindScroll: function () {\n    this._wrapperContainer()\n      .off('ps-dom-change', this._bindedCheckShadows)\n      .off('ps-x-reach-start', this._bindedCheckShadows)\n      .off('ps-x-reach-end', this._bindedCheckShadows)\n      .off('ps-y-reach-start', this._bindedCheckShadows)\n      .off('ps-y-reach-end', this._bindedCheckShadows)\n      .off('ps-scroll-x', this._bindedCheckShadows)\n      .off('ps-scroll-y', this._bindedCheckShadows);\n  },\n\n  _checkShadows: function () {\n    var currentPos;\n    var max;\n    var width;\n    var height;\n    var maxPos;\n\n    if (this._type === 'horizontal') {\n      currentPos = this._wrapperContainer().scrollLeft();\n      max = this._wrapperContainer().get(0).scrollWidth;\n      width = this._wrapperContainer().outerWidth();\n      maxPos = max - width;\n\n      this.$('> .js-leftShadow').toggleClass('is-visible', currentPos > 0);\n      this.$('> .js-rightShadow').toggleClass('is-visible', currentPos < maxPos);\n    } else {\n      currentPos = this._wrapperContainer().scrollTop();\n      max = this._wrapperContainer().get(0).scrollHeight;\n      height = this._wrapperContainer().outerHeight();\n      maxPos = max - height;\n\n      // We use the direct descendant selector to avoid affect others nested view with scroll\n      this.$('> .js-topShadow').toggleClass('is-visible', currentPos > 0);\n      this.$('> .js-bottomShadow').toggleClass('is-visible', currentPos < maxPos);\n    }\n  },\n\n  destroyScroll: function () {\n    this._unbindScroll();\n    Ps.destroy(this._wrapperContainer().get(0));\n  },\n\n  clean: function () {\n    this.destroyScroll();\n    CoreView.prototype.clean.apply(this, arguments);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (type === 'vertical') { \n__p+='\\n<div class=\"ScrollView-shadow ScrollView-shadow--top js-topShadow\"></div>\\n<div class=\"ScrollView-shadow ScrollView-shadow--bottom js-bottomShadow\"></div>\\n';\n } else { \n__p+='\\n<div class=\"Carousel-shadow Carousel-shadow--left js-leftShadow\"></div>\\n<div class=\"Carousel-shadow Carousel-shadow--right js-rightShadow\"></div>\\n';\n } \n__p+='\\n<div class=\"ScrollView-wrapper js-wrapper js-perfect-scroll\">\\n  <div class=\"ScrollView-content js-content\"></div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\n\n/**\n *  Stack layout model checks and decides if next or previous\n *  positions are possible.\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    position: 0\n  },\n\n  initialize: function (attrs, opts) {\n    this.stackLayoutItems = opts.stackLayoutItems;\n  },\n\n  goToStep: function (position) {\n    var stackLayoutItemsSize = this.stackLayoutItems.size();\n\n    if (position >= stackLayoutItemsSize) {\n      throw new Error('There is no ' + position + ' stack view in the collection');\n    } else {\n      this.set({\n        position: position\n      }, {\n        silent: true\n      });\n      this._rememberStep.apply(this, arguments);\n      this._triggerPositionChanged(position, Array.prototype.slice.call(arguments, 1));\n    }\n  },\n\n  nextStep: function () {\n    var currentPos = this.get('position');\n    var nextPosition = ++currentPos;\n    this.goToStep.apply(this, Array.prototype.concat.apply([nextPosition], arguments));\n  },\n\n  prevStep: function () {\n    var currentPos = this.get('position');\n    var prevPosition = --currentPos;\n    this.goToStep.apply(this, Array.prototype.concat.apply([prevPosition], arguments));\n  },\n\n  goBack: function () {\n    if (this._goBackToArguments) {\n      this.goToStep.apply(this, this._goBackToArguments);\n    }\n  },\n\n  _triggerPositionChanged: function (position, args) {\n    this.trigger('positionChanged', position, Array.prototype.slice.call(args));\n  },\n\n  _rememberStep: function () {\n    this._goBackToArguments = this._lastStepArguments || [ 0 ];\n    this._lastStepArguments = arguments;\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar StackLayoutModel = require('./stack-layout-model');\nvar _ = require('underscore');\n\n/**\n *  Stack layout view manages a \"carousel\" of views.\n *  They can go forward or backward.\n */\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!this.collection || !this.collection.size()) {\n      throw new Error('A collection of stack views should be provided');\n    }\n    this.model = new StackLayoutModel({}, {\n      stackLayoutItems: this.collection\n    });\n    this.model.bind('positionChanged', this._onPositionChange, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._genNewStackView();\n    return this;\n  },\n\n  _onPositionChange: function (newPos, opts) {\n    this._removeOldStackView();\n    this._genNewStackView(_.flatten(opts));\n    this.trigger('positionChanged', this);\n  },\n\n  getCurrentPosition: function () {\n    return this.model.get('position');\n  },\n\n  _removeOldStackView: function () {\n    var oldView = this._getCurrentView();\n    if (oldView) {\n      oldView.clean();\n      this.removeView(oldView);\n    }\n  },\n\n  _getCurrentView: function () {\n    for (var key in this._subviews) break;\n    return this._subviews[key];\n  },\n\n  _genNewStackView: function () {\n    var args = [this.model].concat([_.flatten(arguments)]);\n    var nextView = this.collection.at(this.model.get('position')).get('createStackView').apply(this, args);\n    this.$el.html(nextView.render().el);\n\n    this.addView(nextView);\n  }\n});\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar TabPaneView = require('./tab-pane-view.js');\nvar TabPaneCollection = require('./tab-pane-collection');\nvar MixedLabelView = require('./tab-pane-mixed-view');\nvar ColorView = require('./tab-pane-color-view');\n\n/**\n * Creates a tab pane, where the menu consists of text labels.\n *\n * Example usage:\n * {\n *   label: 'My label',\n *   createContentView: CoreView(),\n *   selected: false\n * }\n *\n * @param {Array} paneItems\n * @param {Object} options\n * @return {Object} instance of CoreView\n */\nmodule.exports = function (paneItems, options) {\n  options = options || {};\n  var tabPaneItemLabelOptions = options.tabPaneItemLabelOptions;\n\n  var items = paneItems.map(function (paneItem) {\n    ['label', 'createContentView'].forEach(function (check) {\n      if (!paneItem[check]) {\n        throw new Error(check + ' should be provided');\n      }\n    });\n\n    return {\n      name: paneItem.name,\n      selected: paneItem.selected,\n      label: paneItem.label,\n      color: paneItem.color,\n      kind: paneItem.kind,\n      selectedChild: paneItem.selectedChild,\n      createButtonView: function () {\n        if (paneItem.type === 'color') {\n          return new ColorView(_.extend({ model: this }, tabPaneItemLabelOptions));\n        } else {\n          return new MixedLabelView(_.extend({ model: this, type: paneItem.type }, tabPaneItemLabelOptions));\n        }\n      },\n      createContentView: function () {\n        return paneItem.createContentView && paneItem.createContentView() || new CoreView();\n      }\n    };\n  });\n\n  this.collection = new TabPaneCollection(items);\n\n  var tabPaneOptions = options.tabPaneOptions;\n\n  return new TabPaneView(\n    _.extend(\n      { collection: this.collection },\n      tabPaneOptions\n    )\n  );\n};\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar TabPaneView = require('./tab-pane-view.js');\nvar TabPaneCollection = require('./tab-pane-collection');\nvar LabelView = require('./tab-pane-label-view');\n\n/**\n * Creates a tab pane, where the menu consists of text labels.\n *\n * Example usage:\n * {\n *   label: 'My label',\n *   createContentView: CoreView(),\n *   selected: false\n * }\n *\n * @param {Array} paneItems\n * @param {Object} options\n * @return {Object} instance of CoreView\n */\nmodule.exports = function (paneItems, options) {\n  options = options || {};\n  var tabPaneItemLabelOptions = options.tabPaneItemLabelOptions;\n\n  var items = paneItems.map(function (paneItem) {\n    ['label', 'createContentView'].forEach(function (check) {\n      if (!paneItem[check]) {\n        throw new Error(check + ' should be provided');\n      }\n    });\n\n    return {\n      name: paneItem.name,\n      selected: paneItem.selected,\n      label: paneItem.label,\n      selectedChild: paneItem.selectedChild,\n      createButtonView: function () {\n        return new LabelView(_.extend({ model: this }, tabPaneItemLabelOptions));\n      },\n      createContentView: function () {\n        return paneItem.createContentView && paneItem.createContentView() || new CoreView();\n      }\n    };\n  });\n\n  this.collection = new TabPaneCollection(items);\n\n  var tabPaneOptions = options.tabPaneOptions;\n\n  return new TabPaneView(\n    _.extend(\n      { collection: this.collection },\n      tabPaneOptions\n    )\n  );\n};\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Collection.extend({\n  constructor: function (models, options) {\n    options = _.extend(options || {}, { silent: false });\n    Backbone.Collection.prototype.constructor.call(this, models, options);\n  },\n\n  initialize: function () {\n    this.bind('reset', this._setSelected, this);\n    this.bind('change:selected', this._onSelectedChange, this);\n    this._setSelected();\n  },\n\n  getSelected: function () {\n    return this.find(function (model) {\n      return model.get('selected');\n    });\n  },\n\n  _setSelected: function () {\n    var isSelected = this.getSelected();\n\n    if (!isSelected && this.size() > 0) {\n      this.at(0).set('selected', true);\n    }\n  },\n\n  _onSelectedChange: function (itemModel, isSelected) {\n    if (!isSelected) {\n      return;\n    }\n\n    this.each(function (model) {\n      if (model !== itemModel) {\n        model.set('selected', false);\n      }\n    }, this);\n  },\n\n  select: function (name, value) {\n    var model = this.find(function (m) {\n      return m.get(name) === value;\n    }, this);\n\n    if (model) {\n      model.set('selected', true);\n    }\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./tab-pane-color.tpl');\n\n/**\n *  Label component\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Label',\n\n  initialize: function () {\n    if (!this.model) {\n      throw new Error('A model should be provided');\n    }\n    this.model.bind('change:label', this.render, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template({\n      color: this.model.get('label'),\n      selectedChild: this.model.get('selectedChild') || ''\n    }));\n    return this;\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"ColorBar ColorBar--inline\" style=\"background-color: '+\n((__t=( color ))==null?'':_.escape(__t))+\n';\"></div> ';\n if (selectedChild) { \n__p+=' <span class=\"CDB-NavSubmenu-status js-NavSubmenu-status u-hintTextColor\">'+\n((__t=( selectedChild ))==null?'':_.escape(__t))+\n'</span>';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (type === 'text') { \n__p+='\\n'+\n((__t=( label ))==null?'':_.escape(__t))+\n'';\n if (selectedChild) { \n__p+=' <span class=\"CDB-NavSubmenu-status js-NavSubmenu-status u-hintTextColor\">'+\n((__t=( selectedChild ))==null?'':_.escape(__t))+\n'</span>';\n } \n__p+='\\n';\n } else if (kind === 'custom-marker') { \n__p+='\\n<div class=\\'Editor-categoryImagesTag CDB-Text CDB-FontSize-small u-altTextColor is-semibold u-upperCase\\'>'+\n((__t=( _t('form-components.editors.fill.input-color.img') ))==null?'':_.escape(__t))+\n'</div>\\n';\n } else { \n__p+='\\n<div class=\"Tab-paneLabelImageContainer js-image-container\"></div>\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\n\n/**\n *  TabPaneItem component\n */\n\nmodule.exports = CoreView.extend({\n  tagName: 'button',\n\n  events: {\n    'click': '_onButtonClicked'\n  },\n\n  initialize: function () {\n    if (!this.model) {\n      throw new Error('A model should be provided');\n    }\n\n    this.model.bind('change:selected', this._onChangeSelected, this);\n  },\n\n  render: function () {\n    var view = this.model.get('createButtonView').call(this.model);\n    this.addView(view);\n    this.$el.append(view.render().$el);\n    this.$el.toggleClass('is-selected', !!this.model.get('selected'));\n\n    return this;\n  },\n\n  _onChangeSelected: function () {\n    this.$el.toggleClass('is-selected', !!this.model.get('selected'));\n  },\n\n  _onButtonClicked: function (e) {\n    e.preventDefault();\n    this.model.set('selected', true);\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./tab-pane-label.tpl');\n\n/**\n *  Label component\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Label',\n\n  initialize: function () {\n    if (!this.model) {\n      throw new Error('A model should be provided');\n    }\n  },\n\n  render: function () {\n    this.$el.html(template({\n      label: this.model.get('label'),\n      selectedChild: this.model.get('selectedChild') || ''\n    }));\n    return this;\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+=''+\n((__t=( label ))==null?'':_.escape(__t))+\n'';\n if (selectedChild) { \n__p+=' <span class=\"CDB-NavSubmenu-status js-NavSubmenu-status u-hintTextColor\">'+\n((__t=( selectedChild ))==null?'':_.escape(__t))+\n'</span>';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var template = require('./tab-pane-file.tpl');\nvar CoreView = require('backbone/core-view');\nvar ImageLoaderView = require('../img-loader-view');\n\n/**\n *  File component\n */\n\nmodule.exports = CoreView.extend({\n  tagName: 'i',\n\n  className: 'CDB-IconFont',\n\n  initialize: function (options) {\n    if (!this.model) throw new Error('A model should be provided');\n\n    this.model.bind('change:label', this.render, this);\n    this.model.bind('change:color', this._updateColor, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var labelType = this._getLabelType();\n\n    this.$el.html(template({\n      type: labelType,\n      label: this.model.get('label'),\n      kind: this.model.get('kind'),\n      selectedChild: this.model.get('selectedChild') || ''\n    }));\n\n    if (labelType === 'file') {\n      this._loadImages();\n    }\n\n    return this;\n  },\n\n  _loadImages: function () {\n    this.iconView = new ImageLoaderView({\n      imageClass: 'Tab-paneLabelImage',\n      imageUrl: this._getImageURL(),\n      color: this.model.get('color')\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n  },\n\n  _updateColor: function () {\n    this.iconView && this.iconView.updateImageColor(this.model.get('color'));\n  },\n\n  _getLabelType: function () {\n    var label = this.model.get('label');\n    return label && label.match(/^http/) ? 'file' : 'text';\n  },\n\n  _getImageURL: function () {\n    return this.model.get('label');\n  }\n});\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar TabPaneItem = require('./tab-pane-item-view.js');\nvar Template = require('./tab-pane.tpl');\n\n/**\n *  TabPane component\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Tab-pane',\n\n  initialize: function (options) {\n    if (!this.collection) {\n      throw new Error('A TabPaneCollection should be provided');\n    }\n\n    this._tabPaneItemOptions = this.options.tabPaneItemOptions;\n    this._createContentKey = this.options.createContentKey || 'createContentView';\n    this.template = this.options.template || Template;\n\n    this.collection.bind('change:selected', this._renderSelected, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.html(this.template(this.options));\n\n    this._renderCollection();\n\n    var model = this.getSelectedTabPane();\n\n    if (model) {\n      this._renderSelected(model, true);\n    }\n\n    return this;\n  },\n\n  getSelectedTabPane: function () {\n    return this.collection.getSelected();\n  },\n\n  getTabPane: function (name) {\n    return _.first(this.collection.where({ name: name }));\n  },\n\n  getSelectedTabPaneName: function () {\n    var selectedTab = this.getSelectedTabPane();\n    return selectedTab ? selectedTab.get('name') : null;\n  },\n\n  setSelectedTabPaneByName: function (name) {\n    return this.collection.select('name', name);\n  },\n\n  _renderSelected: function (model, isSelected) {\n    if (isSelected) {\n      if (this._selectedView) {\n        this._selectedView.clean();\n        this.removeView(this._selectedView);\n      }\n\n      this._selectedView = this._renderTabPaneContentView(model);\n    }\n  },\n\n  _renderCollection: function () {\n    this.collection.each(function (paneModel) {\n      if (paneModel.get('createButtonView')) {\n        this._renderTabPaneItemView(paneModel);\n      }\n    }, this);\n  },\n\n  _renderTabPaneItemView: function (model) {\n    var tabPaneItemView = new TabPaneItem(_.extend({ model: model }, this._tabPaneItemOptions));\n    this.addView(tabPaneItemView);\n    this.$('.js-menu').append(tabPaneItemView.render().el);\n  },\n\n  _renderTabPaneContentView: function (model) {\n    var tabPaneContentView = model.get(this._createContentKey).call(model);\n    if (tabPaneContentView) {\n      this.addView(tabPaneContentView);\n      this.$('.js-content').append(tabPaneContentView.render().el);\n    }\n    return tabPaneContentView;\n  },\n\n  changeStyleMenu: function (m) {\n    this.$('.js-theme').toggleClass('is-dark', m.isEditing());\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"js-menu\"></div>\\n<div class=\"Tab-paneContent js-content\"></div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"25px\" viewbox=\"521 436 24 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <path d=\"M524.5,440 L540.5,440 L540.5,460 L524.5,460 L524.5,440 Z M528.5,437 L536.5,437 L536.5,440 L528.5,440 L528.5,437 Z M522,440 L544,440 L522,440 Z M528.5,443.5 L528.5,455.5 L528.5,443.5 Z M532.5,443.5 L532.5,455.5 L532.5,443.5 Z M536.5,443.5 L536.5,455.5 L536.5,443.5 Z\" id=\"Shape\" stroke=\"#F19243\" stroke-width=\"1\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        '+\n((__t=( _t('components.table.rows.destroy.title', { cartodb_id: cartodb_id }) ))==null?'':_.escape(__t))+\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">'+\n((__t=( _t('components.table.rows.destroy.desc') ))==null?'':_.escape(__t))+\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('components.table.rows.destroy.cancel') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('components.table.rows.destroy.confirm') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<td class=\"Table-cellItem\" data-attribute=\"'+\n((__t=( columnName ))==null?'':_.escape(__t))+\n'\" title=\"'+\n((__t=( value ))==null?'':_.escape(__t))+\n'\" data-clipboard-text=\\''+\n((__t=( value ))==null?'':_.escape(__t))+\n'\\'>\\n  <div class=\"\\n      Table-cell u-flex u-justifySpace\\n      '+\n((__t=( columnName === 'cartodb_id' ||(type === 'geometry' && geometry !== 'point') ? 'Table-cell--short' : '' ))==null?'':_.escape(__t))+\n'\\n    \">\\n    <p class=\"\\n      CDB-Text CDB-Size-medium\\n      u-ellipsis u-rSpace--xl\\n      '+\n((__t=( type === 'number' && columnName !== 'cartodb_id' ? 'is-number' : '' ))==null?'':_.escape(__t))+\n'\\n      '+\n((__t=( value === null ? 'is-null' : '' ))==null?'':_.escape(__t))+\n'\\n      '+\n((__t=( columnName === 'cartodb_id' ? 'is-cartodbId' : '' ))==null?'':_.escape(__t))+\n'\\n      js-value\\n    \">\\n      '+\n((__t=( value === null ? 'null' : formattedValue ))==null?'':_.escape(__t))+\n'\\n    </p>\\n\\n    ';\n if (columnName !== 'cartodb_id') { \n__p+='\\n      <button class=\"CDB-Shape-threePoints is-blue is-small Table-cellItemOptions js-cellOptions\">\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n      </button>\\n    ';\n } \n__p+='\\n  </div>\\n</td>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar cellTemplate = require('./table-body-cell.tpl');\nvar pointGeojsonParser = require('../../../helpers/point-geojson-parser');\n\nvar FORMATTED_TYPE_VALUES = {\n  'geometry': pointGeojsonParser\n};\n\n/*\n *  Table body row view\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Table-row',\n  tagName: 'tr',\n\n  options: {\n    simpleGeometry: ''\n  },\n\n  initialize: function (opts) {\n    if (!opts.columnsCollection) throw new Error('columnsCollection is required');\n    if (!opts.tableViewModel) throw new Error('tableViewModel is required');\n\n    this._columnsCollection = opts.columnsCollection;\n    this._tableViewModel = opts.tableViewModel;\n\n    this.el.setAttribute('data-model', this.model.cid);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.empty();\n    this._generateRowsHTML();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this.render, this);\n    this.model.bind('destroy', this.remove, this);\n  },\n\n  _generateRowsHTML: function () {\n    var r = [];\n\n    for (var i = 0, l = this._columnsCollection.size(); i < l; i++) {\n      var mdl = this._columnsCollection.at(i);\n      var columnName = mdl.get('name');\n\n      if (columnName !== 'the_geom_webmercator' || (this._tableViewModel.isDisabled() && columnName === 'the_geom_webmercator')) {\n        r[i] = this._generateCellHTML(columnName);\n      }\n    }\n\n    this.el.innerHTML = r.join('');\n  },\n\n  _generateCellHTML: function (columnName) {\n    var simpleGeometry = this.options.simpleGeometry;\n    var columnModel = _.first(this._columnsCollection.where({ name: columnName }));\n    var columnType = columnModel.get('type');\n    var value = this.model.get(columnName);\n    var formattedValue = value;\n\n    if (columnType === 'geometry') {\n      if (simpleGeometry === 'point') {\n        formattedValue = FORMATTED_TYPE_VALUES[columnType](value);\n      } else {\n        formattedValue = simpleGeometry && (simpleGeometry.charAt(0).toUpperCase() + simpleGeometry.slice(1));\n      }\n    } else if (FORMATTED_TYPE_VALUES[columnType]) {\n      formattedValue = FORMATTED_TYPE_VALUES[columnType](value);\n    }\n\n    return cellTemplate({\n      value: value,\n      formattedValue: formattedValue,\n      type: columnType,\n      columnName: columnName,\n      geometry: simpleGeometry\n    });\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar Clipboard = require('clipboard');\nvar TableBodyRowView = require('./table-body-row-view');\nvar ContextMenuView = require('../../context-menu/context-menu-view');\nvar CustomListCollection = require('../../custom-list/custom-list-collection');\nvar addTableRowOperation = require('../operations/table-add-row');\nvar removeTableRowOperation = require('../operations/table-remove-row');\nvar editCellOperation = require('../operations/table-edit-cell');\nvar ConfirmationModalView = require('../../modals/confirmation/modal-confirmation-view');\nvar TablePaginatorView = require('../paginator/table-paginator-view');\nvar tableBodyTemplate = require('./table-body.tpl');\nvar renderLoading = require('../../loading/render-loading');\nvar ErrorView = require('../../error/error-view');\nvar tableNoRowsTemplate = require('./table-no-rows.tpl');\nvar EditorsServiceModel = require('../editors/editors-service-model');\nvar EditorsModel = require('../editors/types/editor-model');\nvar errorParser = require('../../../helpers/error-parser');\nvar magicPositioner = require('../../../helpers/magic-positioner');\nvar checkAndBuildOpts = require('../../../helpers/required-opts');\n\nvar EDITORS_MAP = {\n  'string': require('../editors/types/editor-string-view'),\n  'number': require('../editors/types/editor-base-view'),\n  'boolean': require('../editors/types/editor-boolean-view'),\n  'date': require('../editors/types/editor-date-view'),\n  'default': require('../editors/types/editor-string-view')\n};\n\nvar REQUIRED_OPTS = [\n  'columnsCollection',\n  'modals',\n  'queryGeometryModel',\n  'querySchemaModel',\n  'rowsCollection',\n  'tableViewModel'\n];\n\n/*\n *  Table body view\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Table-body',\n  tagName: 'div',\n\n  events: {\n    'click': '_onClick',\n    'dblclick': '_onDblClick'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._editors = new EditorsServiceModel();\n\n    this._closeEditor = this._closeEditor.bind(this);\n    this._hideContextMenu = this._hideContextMenu.bind(this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._destroyScrollBinding();\n    this.$el.empty();\n\n    // Render results when we have the schema and goemetry is not being fetched\n    if (this._querySchemaModel.isFetched() && !this._queryGeometryModel.isFetching() && !this._rowsCollection.isFetching()) {\n      if (!this._rowsCollection.size()) {\n        this._renderNoRows();\n      } else {\n        this.$el.html(tableBodyTemplate());\n        this._rowsCollection.each(this._renderBodyRow, this);\n        this._initPaginator();\n      }\n    } else {\n      this._renderQueryState();\n    }\n\n    this.$el.toggleClass('Table-body--relative', !!this._tableViewModel.get('relativePositionated'));\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._queryGeometryModel.bind('change:status', this.render, this);\n    this._querySchemaModel.bind('change:status', this.render, this);\n    this._rowsCollection.bind('reset', _.debounce(this.render.bind(this), 20), this);\n    this._rowsCollection.bind('add', function (model) {\n      if (this._rowsCollection.size() === 1) {\n        this.render();\n      } else {\n        this._renderBodyRow(model);\n        this._scrollToBottom();\n      }\n    }, this);\n    this._rowsCollection.bind('remove', this._onRemoveRow, this);\n    this._rowsCollection.bind('fail', function (mdl, response) {\n      if (!response || (response && response.statusText !== 'abort')) {\n        this._renderError(errorParser(response));\n      }\n    }, this);\n    this.add_related_model(this._queryGeometryModel);\n    this.add_related_model(this._querySchemaModel);\n    this.add_related_model(this._rowsCollection);\n  },\n\n  _renderQueryState: function () {\n    var querySchemaStatus = this._querySchemaModel.get('status');\n    var nodeReady = this._querySchemaModel.get('ready');\n    var geometryStatus = this._queryGeometryModel.get('status');\n\n    if (nodeReady) {\n      if (querySchemaStatus === 'unavailable' && geometryStatus === 'unavailable') {\n        this._renderError(this._querySchemaModel.get('query_errors'));\n      } else {\n        this._renderLoading();\n      }\n    } else {\n      this._renderLoading();\n    }\n  },\n\n  _renderLoading: function () {\n    this.$el.html(\n      renderLoading({\n        title: _t('components.table.rows.loading.title')\n      })\n    );\n  },\n\n  _renderError: function (desc) {\n    var view = new ErrorView({\n      title: _t('components.table.rows.error.title'),\n      desc: desc || _t('components.table.rows.error.desc')\n    });\n    this.addView(view);\n    this.$el.html(view.render().el);\n  },\n\n  _renderNoRows: function () {\n    this.$el.html(\n      tableNoRowsTemplate({\n        page: this._tableViewModel.get('page'),\n        customQuery: this._tableViewModel.isCustomQueryApplied()\n      })\n    );\n  },\n\n  _initPaginator: function () {\n    var paginatorView = new TablePaginatorView({\n      rowsCollection: this._rowsCollection,\n      tableViewModel: this._tableViewModel\n    });\n\n    // Bug in Chrome with position:fixed :(, so we have to choose body as\n    // parent\n    var $el = $('body');\n    // But if we have chosen relativePositionated, we should add close\n    // to the table view\n    if (this._tableViewModel.get('relativePositionated')) {\n      $el = this.$el.closest('.Table').parent();\n    }\n\n    $el.append(paginatorView.render().el);\n    this.addView(paginatorView);\n  },\n\n  _initScrollBinding: function () {\n    $('.Table').scroll(this._hideContextMenu);\n    this.$('.js-tbody').scroll(this._hideContextMenu);\n  },\n\n  _destroyScrollBinding: function () {\n    $('.Table').off('scroll', this._hideContextMenu);\n    this.$('.js-tbody').off('scroll', this._hideContextMenu);\n  },\n\n  _renderBodyRow: function (mdl) {\n    var view = new TableBodyRowView({\n      model: mdl,\n      columnsCollection: this._columnsCollection,\n      simpleGeometry: this._queryGeometryModel.get('simple_geom'),\n      tableViewModel: this._tableViewModel\n    });\n    this.addView(view);\n    this.$('.js-tbody').append(view.render().el);\n  },\n\n  _onRemoveRow: function () {\n    if (!this._rowsCollection.size()) {\n      this._rowsCollection.resetFetch();\n\n      var page = this._tableViewModel.get('page');\n      if (page > 0) {\n        this._tableViewModel.set('page', page - 1);\n      } else {\n        this.render();\n      }\n    }\n  },\n\n  _hasContextMenu: function () {\n    return this._menuView;\n  },\n\n  _hideContextMenu: function () {\n    this._unhighlightCell();\n    this._destroyScrollBinding();\n    this._menuView.collection.unbind(null, null, this);\n    this.removeView(this._menuView);\n    this._menuView.clean();\n    delete this._menuView;\n  },\n\n  _highlightCell: function ($tableCellItem, $tableRow) {\n    $tableCellItem.addClass('is-highlighted');\n    $tableRow.addClass('is-highlighted');\n  },\n\n  _unhighlightCell: function () {\n    this.$('.Table-cellItem.is-highlighted, .Table-row.is-highlighted').removeClass('is-highlighted');\n  },\n\n  _showContextMenu: function (ev) {\n    var self = this;\n    var position = { x: ev.clientX, y: ev.clientY };\n    var $tableRow = $(ev.target).closest('.Table-row');\n    var $tableCellItem = $(ev.target).closest('.Table-cellItem');\n    var modelCID = $tableRow.data('model');\n    var attribute = $tableCellItem.data('attribute');\n    var rowModel = self._rowsCollection.get({ cid: modelCID });\n    var menuItems = [];\n\n    menuItems.push({\n      label: _t('components.table.rows.options.copy'),\n      val: 'copy',\n      action: function () {\n        self._copyValue($tableCellItem);\n      }\n    });\n\n    if (!this._tableViewModel.isDisabled()) {\n      menuItems = [\n        {\n          label: _t('components.table.rows.options.edit'),\n          val: 'edit',\n          action: function () {\n            self._editCell(rowModel, attribute);\n          }\n        }, {\n          label: _t('components.table.rows.options.create'),\n          val: 'create',\n          action: function () {\n            self._addRow();\n          }\n        }\n      ].concat(menuItems);\n\n      menuItems.push({\n        label: _t('components.table.rows.options.delete'),\n        val: 'delete',\n        destructive: true,\n        action: function () {\n          self._removeRow(rowModel);\n        }\n      });\n    }\n\n    // No options?, don't open anything\n    if (!menuItems.length) {\n      return false;\n    }\n\n    var collection = new CustomListCollection(menuItems);\n\n    this._menuView = new ContextMenuView({\n      className: 'Table-rowMenu ' + ContextMenuView.prototype.className,\n      collection: collection,\n      triggerElementID: modelCID,\n      position: position\n    });\n\n    this._menuView.$el.css(\n      magicPositioner({\n        parentView: $('body'),\n        posX: position.x,\n        posY: position.y\n      })\n    );\n\n    collection.bind('change:selected', function (menuItem) {\n      var action = menuItem.get('action');\n      action && action();\n    }, this);\n\n    this._menuView.model.bind('change:visible', function (model, isContextMenuVisible) {\n      if (this._hasContextMenu() && !isContextMenuVisible) {\n        this._hideContextMenu();\n      }\n    }, this);\n\n    this._menuView.show();\n    this.addView(this._menuView);\n\n    this._highlightCell($tableCellItem, $tableRow);\n    this._initScrollBinding();\n  },\n\n  _onClick: function (ev) {\n    var isCellOptions = $(ev.target).hasClass('js-cellOptions');\n    if (isCellOptions) {\n      if (this._hasContextMenu()) {\n        this._hideContextMenu();\n      } else {\n        this._showContextMenu(ev);\n      }\n    }\n  },\n\n  _onDblClick: function (ev) {\n    var $tableCellItem = $(ev.target).closest('.Table-cellItem');\n    var isCellOptions = $(ev.target).hasClass('js-cellOptions');\n\n    if ($tableCellItem && !isCellOptions) {\n      var $tableRow = $tableCellItem.closest('.Table-row');\n      var modelCID = $tableRow.data('model');\n      var attribute = $tableCellItem.data('attribute');\n      var rowModel = this._rowsCollection.get({ cid: modelCID });\n\n      if (!this._tableViewModel.isDisabled() && rowModel && attribute && attribute !== 'cartodb_id') {\n        this._editCell(rowModel, attribute);\n      }\n    }\n  },\n\n  _copyValue: function ($el) {\n    // Work-around for Clipboard \\o/\n    this._clipboard = new Clipboard($el.get(0));\n    $el.click();\n    this._clipboard.destroy();\n  },\n\n  _addRow: function () {\n    addTableRowOperation({\n      rowsCollection: this._rowsCollection\n    });\n  },\n\n  _initEditorScrollBinding: function () {\n    $('.Table').scroll(this._closeEditor);\n    this.$('.js-tbody').scroll(this._closeEditor);\n  },\n\n  _destroyEditorScrollBinding: function () {\n    $('.Table').unbind('scroll', this._closeEditor);\n    this.$('.js-tbody').unbind('scroll', this._closeEditor);\n  },\n\n  _closeEditor: function () {\n    this._unhighlightCell();\n    this._destroyEditorScrollBinding();\n    this._editors.unbind(null, null, this);\n    this._editors.destroy();\n  },\n\n  _saveValue: function (rowModel, attribute, newValue) {\n    if (rowModel.get(attribute) !== newValue) {\n      editCellOperation({\n        rowModel: rowModel,\n        attribute: attribute,\n        newValue: newValue\n      });\n    }\n  },\n\n  _doCellEdition: function (rowModel, attribute) {\n    var $tableRow = this.$('[data-model=\"' + rowModel.cid + '\"]');\n    var $tableCell = $tableRow.find('[data-attribute=\"' + attribute + '\"]');\n    var $options = $tableCell.find('.js-cellOptions');\n    var columnModel = _.first(this._columnsCollection.where({ name: attribute }));\n    var type = columnModel.get('type');\n\n    this._highlightCell($tableCell, $tableRow);\n    this._initEditorScrollBinding();\n\n    var model = new EditorsModel({\n      type: type,\n      value: rowModel.get(attribute)\n    });\n\n    this._editors.bind('destroyedEditor', this._closeEditor, this);\n    this._editors.bind('confirmedEditor', function () {\n      if (model.isValid()) {\n        this._saveValue(\n          rowModel,\n          attribute,\n          model.get('value')\n        );\n      }\n    }, this);\n\n    var position = $options.offset();\n\n    if ($tableCell.index() > 1) {\n      position.right = window.innerWidth - position.left;\n      delete position.left;\n    }\n\n    if (this._rowsCollection.size() > 4 && ($tableRow.index() + 2) >= (this._rowsCollection.size() - 1)) {\n      position.bottom = window.innerHeight - position.top;\n      delete position.top;\n    } else {\n      position.top = position.top + 20;\n    }\n\n    var View = EDITORS_MAP[type];\n\n    if (!View) {\n      View = EDITORS_MAP['default'];\n    }\n\n    this._editors.create(\n      function (editorModel) {\n        return new View({\n          editorModel: editorModel,\n          model: model\n        });\n      },\n      position\n    );\n  },\n\n  _editCell: function (rowModel, attribute) {\n    var callback = this._doCellEdition.bind(this, rowModel, attribute);\n    rowModel.fetchRowIfGeomIsNotLoaded(callback);\n  },\n\n  _removeRow: function (rowModel) {\n    var self = this;\n\n    this._modals.create(\n      function (modalModel) {\n        return new ConfirmationModalView({\n          modalModel: modalModel,\n          template: require('./modals-templates/remove-table-row.tpl'),\n          renderOpts: {\n            cartodb_id: rowModel.get('cartodb_id')\n          },\n          loadingTitle: _t('components.table.rows.destroy.loading', {\n            cartodb_id: rowModel.get('cartodb_id')\n          }),\n          runAction: function () {\n            removeTableRowOperation({\n              tableViewModel: self._tableViewModel,\n              rowModel: rowModel,\n              onSuccess: function () {\n                modalModel.destroy();\n              },\n              onError: function (e) {\n                modalModel.destroy();\n              }\n            });\n          }\n        });\n      }\n    );\n  },\n\n  _scrollToBottom: function () {\n    var tbodyHeight = this.$('.js-tbody').get(0).scrollHeight;\n    this.$('.js-tbody').animate({\n      scrollTop: tbodyHeight\n    }, 'slow');\n  },\n\n  clean: function () {\n    this._destroyScrollBinding();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<table>\\n  <tbody class=\"js-tbody\"></tbody>\\n</table>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"IntermediateInfo\">\\n  <div class=\"LayoutIcon\">\\n    <i class=\"CDB-IconFont CDB-IconFont-rows\"></i>\\n  </div>\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m u-tSpace-xl\">\\n    ';\n if (page !== 0) { \n__p+='\\n      '+\n((__t=( _t('components.table.rows.result.no-page-title', { page: page }) ))==null?'':_.escape(__t))+\n'\\n    ';\n } else { \n__p+='\\n      '+\n((__t=( _t('components.table.rows.result.no-results-title') ))==null?'':_.escape(__t))+\n'\\n    ';\n } \n__p+='\\n  </h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ';\n if (page !== 0) { \n__p+='\\n      '+\n((__t=( _t('components.table.rows.result.no-page-desc', { page: page }) ))==null?'':_.escape(__t))+\n'\\n    ';\n } else { \n__p+='\\n      '+\n((__t=( _t('components.table.rows.result.no-results-desc', {\n        addRow: _t('components.table.rows.result.no-results-button')\n      }) ))==null?'':_.escape(__t))+\n'\\n    ';\n } \n__p+='\\n  </p>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\n/**\n * View model of an editor\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    show: true,\n    createContentView: function () {\n      return new CoreView();\n    }\n  },\n\n  createContentView: function () {\n    return this.get('createContentView')(this);\n  },\n\n  show: function () {\n    this.set('show', true);\n  },\n\n  hide: function () {\n    this.set('show', false);\n  },\n\n  isHidden: function () {\n    return !this.get('show');\n  },\n\n  confirm: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['confirm'].concat(args));\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.destroy}\n   */\n  destroy: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['destroy'].concat(args));\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Box-modal Table-editor',\n\n  initialize: function () {\n    this.listenTo(this.model, 'change:show', this._onShowChange);\n    this.listenTo(this.model, 'destroy', this._onDestroy);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var view = this.model.createContentView();\n    this.addView(view);\n    view.render();\n    this.$el.append(view.el);\n    this.$el.css(this.options.position);\n\n    return this;\n  },\n\n  show: function () {\n    this.model.show();\n  },\n\n  hide: function () {\n    this.model.hide();\n  },\n\n  destroy: function () {\n    this.model.destroy();\n  },\n\n  _onShowChange: function (m, show) {\n    this.$el[show ? 'show' : 'hide']();\n  },\n\n  _onClose: function () {\n    this.destroy();\n  },\n\n  _onDestroy: function () {\n    this.hide();\n    this.clean();\n  }\n\n});\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar Backbone = require('backbone');\nvar EditorView = require('./editor-view');\nvar EditorViewModel = require('./editor-view-model');\nvar ESC_KEY_CODE = 27;\nvar DESTROYED_EDITOR_EVENT = 'destroyedEditor';\nvar CONFIRMED_EDITOR_EVENT = 'confirmedEditor';\n\n/**\n * Top-level API to handle editor views.\n *\n * Example:\n * // In some entry-point:\n * table.editors = new EditorsServiceModel();\n *\n * // Later, in any view, calling create will create a new editor viewModel\n * var editorView = table.editors.create(fn);\n *\n * Same concept @viddo introduced with Modals.\n */\nmodule.exports = Backbone.Model.extend({\n\n  /**\n   * Creates a new editor view\n   *\n   * @param {Function} createContentView\n   * @return {View} the new editor view\n   */\n  create: function (createContentView, position) {\n    if (!_.isFunction(createContentView)) throw new Error('createContentView is required');\n    position = position || {\n      left: '50%',\n      top: '50%'\n    };\n\n    if (!this._editorView) {\n      this._editorView = this._newEditorView(position);\n      document.body.appendChild(this._editorView.el);\n    }\n\n    this._editorView.model.set('createContentView', createContentView);\n    this._editorView.render();\n\n    return this._editorView;\n  },\n\n  /**\n   * Convenience method to add a listener when current editor is destroyed\n   *\n   * This is the same as doing\n   * editors.create(function (model) {\n   *   model.once('destroy', callback, context);\n   *   return new MyView({  });\n   * });\n   *\n   * @param {Function} callback\n   * @param {Object} [context = undefined]\n   */\n\n  confirm: function () {\n    if (this._editorView) {\n      this._editorView.model.confirm();\n    }\n  },\n\n  destroy: function () {\n    if (this._editorView) {\n      this._editorView.model.destroy();\n    }\n  },\n\n  _newEditorView: function (position) {\n    var viewModel = new EditorViewModel();\n    this._destroyOnEsc(viewModel);\n    this.listenToOnce(viewModel, 'destroy', function () {\n      this._editorView = null;\n      this.trigger.apply(this, [DESTROYED_EDITOR_EVENT].concat(Array.prototype.slice.call(arguments)));\n      this.stopListening(viewModel);\n    });\n    this.listenToOnce(viewModel, 'confirm', function () {\n      this.trigger.apply(this, [CONFIRMED_EDITOR_EVENT].concat(Array.prototype.slice.call(arguments)));\n      this.destroy();\n    });\n    var view = new EditorView({\n      model: viewModel,\n      position: position\n    });\n    this._destroyOnClickOutside(view);\n    return view;\n  },\n\n  _destroyOnClickOutside: function (view) {\n    var destroyOnClickOutside = function (ev) {\n      if ($(ev.target).closest(view.el).length === 0) {\n        view.model.confirm();\n      }\n    };\n    document.addEventListener('click', destroyOnClickOutside);\n    this.listenToOnce(view.model, 'destroy', function () {\n      document.removeEventListener('click', destroyOnClickOutside);\n    });\n  },\n\n  _destroyOnEsc: function (viewModel) {\n    var destroyOnEsc = function (ev) {\n      if (ev.which === ESC_KEY_CODE) {\n        viewModel.destroy();\n      }\n    };\n    document.addEventListener('keydown', destroyOnEsc);\n    this.listenToOnce(viewModel, 'destroy', function () {\n      document.removeEventListener('keydown', destroyOnEsc);\n    });\n  }\n\n});\n",
    "var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'input',\n  className: 'CDB-InputText CDB-Text',\n\n  events: {\n    'keyup': '_onValueChange',\n    'change': '_onValueChange'\n  },\n\n  initialize: function (opts) {\n    if (!opts.editorModel) throw new Error('editorModel is required');\n    this._editorModel = opts.editorModel;\n    this._onKeyPressed = this._onKeyPressed.bind(this);\n    this._onValueChange = this._onValueChange.bind(this);\n  },\n\n  render: function () {\n    this.$el.val(\n      this.model.get('value')\n    );\n    this._setFocus();\n    this._initDocumentBind();\n    return this;\n  },\n\n  _setFocus: function () {\n    setTimeout(function () {\n      this.$el.focus();\n    }.bind(this), 100);\n  },\n\n  _initDocumentBind: function () {\n    $(document).bind('keydown', this._onKeyPressed);\n  },\n\n  _destroyDocumentBind: function () {\n    $(document).unbind('keydown', this._onKeyPressed);\n  },\n\n  _onKeyPressed: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      if (this.model.isValid()) {\n        this._editorModel.confirm();\n      } else {\n        return false;\n      }\n    }\n  },\n\n  _onValueChange: function () {\n    this._setValue();\n    this._checkValidity();\n  },\n\n  _setValue: function () {\n    this.model.set('value', this.$el.val());\n  },\n\n  _checkValidity: function () {\n    this.$el.toggleClass('has-error', !this.model.isValid());\n  },\n\n  clean: function () {\n    this._destroyDocumentBind();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n",
    "var EditorBaseView = require('./editor-base-view');\nvar $ = require('jquery');\nvar template = require('./editor-boolean.tpl');\n\nmodule.exports = EditorBaseView.extend({\n\n  tagName: 'div',\n  className: 'u-flex',\n\n  events: {\n    'change input:radio': '_onRadioChanged'\n  },\n\n  render: function () {\n    var value = this.model.get('value');\n    this.$el.html(\n      template({\n        value: value !== null ? value.toString() : 'null'\n      })\n    );\n    return this;\n  },\n\n  _onRadioChanged: function (ev) {\n    var value = $(ev.target).val();\n    switch (value) {\n      case 'true':\n        value = true;\n        break;\n      case 'false':\n        value = false;\n        break;\n      default:\n        value = null;\n    }\n    this.model.set('value', value);\n    this._editorModel.confirm();\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-iBlock CDB-Text CDB-Size-medium u-rSpace--xl\">\\n  <input class=\"CDB-Radio\" type=\"radio\" name=\"value\" value=\"true\" ';\n if (value === 'true') { \n__p+='checked';\n } \n__p+='>\\n  <span class=\"u-iBlock CDB-Radio-face\"></span>\\n  <label class=\"u-iBlock u-lSpace\">True</label>\\n</div>\\n<div class=\"u-iBlock CDB-Text CDB-Size-medium u-rSpace--xl\">\\n  <input class=\"CDB-Radio\" type=\"radio\" name=\"value\" value=\"false\" ';\n if (value === 'false') { \n__p+='checked';\n } \n__p+='>\\n  <span class=\"u-iBlock CDB-Radio-face\"></span>\\n  <label class=\"u-iBlock u-lSpace\">False</label>\\n</div>\\n<div class=\"u-iBlock CDB-Text CDB-Size-medium u-rSpace--xl\">\\n  <input class=\"CDB-Radio\" type=\"radio\" name=\"value\" value=\"null\" ';\n if (value === 'null') { \n__p+='checked';\n } \n__p+='>\\n  <span class=\"u-iBlock CDB-Radio-face\"></span>\\n  <label class=\"u-iBlock u-lSpace\">Null</label>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar moment = require('moment');\nvar Utils = require('../../../../helpers/utils');\nvar MONTHS = [\n  {\n    val: 0,\n    label: _t('months.january')\n  }, {\n    val: 1,\n    label: _t('months.february')\n  }, {\n    val: 2,\n    label: _t('months.march')\n  }, {\n    val: 3,\n    label: _t('months.april')\n  }, {\n    val: 4,\n    label: _t('months.may')\n  }, {\n    val: 5,\n    label: _t('months.june')\n  }, {\n    val: 6,\n    label: _t('months.july')\n  }, {\n    val: 7,\n    label: _t('months.august')\n  }, {\n    val: 8,\n    label: _t('months.september')\n  }, {\n    val: 9,\n    label: _t('months.october')\n  }, {\n    val: 10,\n    label: _t('months.november')\n  }, {\n    val: 11,\n    label: _t('months.december')\n  }\n];\n\nmodule.exports = Backbone.Model.extend({\n\n  parse: function (attrs) {\n    var date;\n\n    if (!attrs.date) {\n      date = moment().utc();\n    } else {\n      date = moment(attrs.date).utc();\n    }\n\n    return {\n      day: date.date(),\n      month: date.month(),\n      year: date.year(),\n      time: date.format('HH:mm:ss'),\n      utcOffset: date.utcOffset()\n    };\n  },\n\n  initialize: function () {\n    this.schema = {\n      day: {\n        title: '',\n        type: 'Text',\n        validators: [\n          'required',\n          /^([12]?\\d{0,1}|3[01]{0,2})$/,\n          function (value, formValues) {\n            var date = moment(Utils.formatDate(formValues));\n            if (!date.isValid()) {\n              return {\n                type: 'date',\n                message: _t('components.datepicker.invalid-date')\n              };\n            }\n          }\n        ]\n      },\n      month: {\n        type: 'Select',\n        title: '',\n        options: MONTHS\n      },\n      year: {\n        title: '',\n        type: 'Text',\n        validators: ['required', /^([0-9]{0,4})$/]\n      },\n      time: {\n        title: '',\n        type: 'Text',\n        validators: ['required', /^([01]{1}[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/]\n      }\n    };\n  },\n\n  getFormattedDate: function () {\n    return Utils.formatDate(this.toJSON());\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar EditorBaseView = require('./editor-base-view');\nvar EditorDateFormModel = require('./editor-date-form-model');\nrequire('../../../form-components/index');\n\nmodule.exports = EditorBaseView.extend({\n\n  tagName: 'div',\n  className: 'Table-editorDate',\n\n  initialize: function (opts) {\n    EditorBaseView.prototype.initialize.apply(this, arguments);\n\n    this._formModel = new EditorDateFormModel({\n      date: this.model.get('value')\n    }, {\n      parse: true\n    });\n\n    this._setValue();\n    this._formModel.bind('change', this._setValue, this);\n    this.add_related_model(this._formModel);\n  },\n\n  render: function () {\n    this._formView = new Backbone.Form({\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.html(this._formView.render().el);\n\n    return this;\n  },\n\n  _setValue: function () {\n    this.model.set('value', this._formModel.getFormattedDate());\n  },\n\n  clean: function () {\n    this._formView.remove();\n    EditorBaseView.prototype.clean.apply(this);\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  // Error labels will not be showed, not needed to be translated\n  validate: function (attrs, opts) {\n    if (attrs.type === 'number' && isNaN(attrs.value)) {\n      return 'Number not valid';\n    }\n\n    if (attrs.type === 'boolean' && (!_.isBoolean(attrs.value) && attrs.value !== null)) {\n      return 'Boolean not valid';\n    }\n  }\n\n});\n",
    "var EditorBaseView = require('./editor-base-view');\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = EditorBaseView.extend({\n\n  tagName: 'textarea',\n  className: 'Table-editorTextarea CDB-Textarea CDB-Text',\n\n  _onKeyPressed: function (ev) {\n    if (!ev.shiftKey && ev.which === ENTER_KEY_CODE) {\n      this._onValueChange();\n      this._editorModel.confirm();\n    }\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"25px\" height=\"25px\" viewBox=\"-1 4 25 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Outline_Icons\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(-1.000000, 4.000000)\">\\n          <path d=\"M1.9477838,21.5 C1.6977511,21.5 1.5,21.3016354 1.5,21.0431048 L1.5,1.95689523 C1.5,1.70555616 1.70315066,1.5 1.94113901,1.5 L16.058861,1.5 C16.2975949,1.5 16.5,1.70783627 16.5,1.96250326 L16.5,13.2661378 L17.5,13.2661378 L17.5,1.96250326 C17.5,1.16139088 16.8558926,0.5 16.058861,0.5 L1.94113901,0.5 C1.14821378,0.5 0.5,1.15588925 0.5,1.95689523 L0.5,21.0431048 C0.5,21.8532278 1.1447717,22.5 1.9477838,22.5 L10.0155676,22.5 L10.0155676,21.5 L1.9477838,21.5 Z\" id=\"path-1\" fill=\"#F19243\"></path>\\n          <rect id=\"Rectangle-2\" fill=\"#F19243\" x=\"1\" y=\"5\" width=\"16\" height=\"1\"></rect>\\n          <path d=\"M23.854,14.646 L21.354,12.146 C21.166,11.958 20.834,11.958 20.647,12.146 L13.146,19.648 C13.089,19.705 13.054,19.773 13.03,19.845 C13.028,19.852 13.021,19.857 13.019,19.865 L12.019,23.365 C11.969,23.539 12.018,23.727 12.146,23.856 C12.241,23.951 12.369,24.002 12.5,24.002 C12.546,24.002 12.592,23.996 12.637,23.983 L16.137,22.983 C16.144,22.981 16.149,22.974 16.157,22.972 C16.229,22.948 16.297,22.913 16.354,22.856 L23.855,15.354 C24.05,15.158 24.05,14.842 23.854,14.646 L23.854,14.646 L23.854,14.646 Z M16,21.795 L14.207,20.002 L19.001,15.207 L20.794,17 L16,21.795 L16,21.795 L16,21.795 Z M13.747,20.957 L15.045,22.255 L13.228,22.775 L13.747,20.957 L13.747,20.957 L13.747,20.957 Z M21.501,16.293 L19.708,14.5 L21.001,13.207 L22.794,15 L21.501,16.293 L21.501,16.293 L21.501,16.293 Z\" id=\"Shape\" fill=\"#F19243\"></path>\\n        </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        '+\n((__t=( _t('components.table.columns.change-type.title', { columnName: columnName, newType: newType }) ))==null?'':_.escape(__t))+\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">\\n        '+\n((__t=( _t('components.table.columns.change-type.desc') ))==null?'':_.escape(__t))+\n'\\n      </p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('components.table.columns.change-type.cancel') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('components.table.columns.change-type.confirm') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"25px\" viewbox=\"521 436 24 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <path d=\"M524.5,440 L540.5,440 L540.5,460 L524.5,460 L524.5,440 Z M528.5,437 L536.5,437 L536.5,440 L528.5,440 L528.5,437 Z M522,440 L544,440 L522,440 Z M528.5,443.5 L528.5,455.5 L528.5,443.5 Z M532.5,443.5 L532.5,455.5 L532.5,443.5 Z M536.5,443.5 L536.5,455.5 L536.5,443.5 Z\" id=\"Shape\" stroke=\"#F19243\" stroke-width=\"1\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        '+\n((__t=( _t('components.table.columns.destroy.title', { columnName: name }) ))==null?'':_.escape(__t))+\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">'+\n((__t=( _t('components.table.columns.destroy.desc') ))==null?'':_.escape(__t))+\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('components.table.columns.destroy.cancel') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('components.table.columns.destroy.confirm') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"25px\" height=\"25px\" viewBox=\"67 153 25 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Group-Copy\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(67.000000, 153.000000)\">\\n          <path d=\"M16,13 L17,13 L17,5.5 C17,5.433 16.986,5.368 16.961,5.308 C16.936,5.247 16.899,5.192 16.853,5.146 L11.854,0.147 C11.808,0.101 11.753,0.064 11.692,0.039 C11.632,0.014 11.567,0 11.5,0 L0.5,0 C0.224,0 0,0.224 0,0.5 L0,21.5 C0,21.776 0.224,22 0.5,22 L9.5,22 L9.5,21 L1,21 L1,1 L11,1 L11,5.5 C11,5.776 11.224,6 11.5,6 L16,6 L16,13 L16,13 Z M12,1.707 L15.293,5 L12,5 L12,1.707 L12,1.707 Z\" id=\"Shape\" fill=\"#F19243\"></path>\\n          <path d=\"M23.854,14.646 L21.354,12.146 C21.166,11.958 20.834,11.958 20.647,12.146 L13.146,19.648 C13.089,19.705 13.054,19.773 13.03,19.845 C13.028,19.852 13.021,19.857 13.019,19.865 L12.019,23.365 C11.969,23.539 12.018,23.727 12.146,23.856 C12.241,23.951 12.369,24.002 12.5,24.002 C12.546,24.002 12.592,23.996 12.637,23.983 L16.137,22.983 C16.144,22.981 16.149,22.974 16.157,22.972 C16.229,22.948 16.297,22.913 16.354,22.856 L23.855,15.354 C24.05,15.158 24.05,14.842 23.854,14.646 L23.854,14.646 Z M16,21.795 L14.207,20.002 L19.001,15.207 L20.794,17 L16,21.795 L16,21.795 Z M13.747,20.957 L15.045,22.255 L13.228,22.775 L13.747,20.957 L13.747,20.957 Z M21.501,16.293 L19.708,14.5 L21.001,13.207 L22.794,15 L21.501,16.293 L21.501,16.293 Z\" id=\"Shape\" fill=\"#F19243\"></path>\\n        </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--m\">\\n        '+\n((__t=( _t('components.table.columns.rename.title', {\n          columnName: columnName,\n          newName: newName\n        }) ))==null?'':_.escape(__t))+\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n        '+\n((__t=( _t('components.table.columns.rename.desc', {\n              columnName: columnName,\n              newName: newName\n        }) ))==null?'':_.escape(__t))+\n'\\n      </p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('components.table.columns.rename.cancel') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('components.table.columns.rename.confirm') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar template = require('./table-head-item.tpl');\nvar ContextMenuView = require('../../context-menu/context-menu-view');\nvar CustomListCollection = require('../../custom-list/custom-list-collection');\nvar TableHeadOptionsItemView = require('./table-head-options-item-view');\nvar tableHeadOptionsItemTemplate = require('./table-head-options-item.tpl');\nvar ConfirmationModalView = require('../../modals/confirmation/modal-confirmation-view');\nvar QueryColumnModel = require('../../../data/query-column-model');\nvar addColumnOperation = require('../operations/table-add-column');\nvar renameColumnOperation = require('../operations/table-rename-column');\nvar changeColumnTypeOperation = require('../operations/table-change-column-type');\nvar removeTableColumnOperation = require('../operations/table-remove-column');\nvar ENTER_KEY_CODE = 13;\nvar ESC_KEY_CODE = 27;\n\n/*\n *  Main table view\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Table-headItem',\n  tagName: 'th',\n\n  events: {\n    'dblclick .js-attribute': '_onAttributeDblClicked',\n    'focusout .js-attribute': '_saveNewName',\n    'click .js-columnOptions': '_showContextMenu'\n  },\n\n  initialize: function (opts) {\n    if (!opts.tableViewModel) throw new Error('tableViewModel is required');\n    if (!opts.columnsCollection) throw new Error('columnsCollection is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this._tableViewModel = opts.tableViewModel;\n    this._columnsCollection = opts.columnsCollection;\n    this._modals = opts.modals;\n\n    this._hideContextMenu = this._hideContextMenu.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var columnName = this.model.get('name');\n    this.$el.html(\n      template({\n        name: columnName,\n        type: this.model.get('type'),\n        isOrderBy: this._tableViewModel.get('order_by') === columnName,\n        sortBy: this._tableViewModel.get('sort_order'),\n        geometry: this.options.simpleGeometry\n      })\n    );\n    return this;\n  },\n\n  _hasContextMenu: function () {\n    return this._menuView;\n  },\n\n  _hideContextMenu: function () {\n    this._unhighlightHead();\n    this._destroyScrollBinding();\n    this._menuView.collection.unbind(null, null, this);\n    this.removeView(this._menuView);\n    this._menuView.clean();\n    delete this._menuView;\n  },\n\n  _highlightHead: function () {\n    this.$el.addClass('is-highlighted');\n  },\n\n  _unhighlightHead: function () {\n    this.$el.removeClass('is-highlighted');\n  },\n\n  _initScrollBinding: function () {\n    $('.Table').scroll(this._hideContextMenu);\n  },\n\n  _destroyScrollBinding: function () {\n    $('.Table').off('scroll', this._hideContextMenu);\n  },\n\n  _showContextMenu: function (ev) {\n    var self = this;\n    var position = { x: ev.clientX, y: ev.clientY };\n    var elementIndex = this.$el.index();\n    var modelCID = this.model.cid;\n    var columnName = this.model.get('name');\n\n    this._highlightHead();\n\n    var menuItems = [{\n      label: _t('components.table.columns.options.order'),\n      val: 'order',\n      isOrderBy: this._tableViewModel.get('order_by') === columnName,\n      sortBy: this._tableViewModel.get('sort_order'),\n      action: function (mdl) {\n        self._tableViewModel.set({\n          sort_order: mdl.get('sort'),\n          order_by: columnName\n        });\n      }\n    }];\n\n    if (!this._tableViewModel.isDisabled()) {\n      if (!this.model.isCartoDBIDColumn() && !this.model.isGeometryColumn()) {\n        menuItems = menuItems.concat([\n          {\n            label: _t('components.table.columns.options.rename'),\n            val: 'rename',\n            action: function () {\n              self._startEditing();\n            }\n          }, {\n            label: _t('components.table.columns.options.change'),\n            type: this.model.get('type'),\n            isLastColumns: (this._columnsCollection.size() - elementIndex) < 3,\n            val: 'change',\n            action: function (mdl) {\n              self._changeColumnType(mdl.get('type'));\n            }\n          }\n        ]);\n      }\n\n      menuItems.push({\n        label: _t('components.table.columns.options.create'),\n        val: 'create',\n        action: function () {\n          self._addColumn();\n        }\n      });\n\n      if (!this.model.isCartoDBIDColumn() && !this.model.isGeometryColumn()) {\n        menuItems.push(\n          {\n            label: _t('components.table.columns.options.delete'),\n            val: 'delete',\n            destructive: true,\n            action: function () {\n              self._removeColumn();\n            }\n          }\n        );\n      }\n    }\n\n    var collection = new CustomListCollection(menuItems);\n\n    this._menuView = new ContextMenuView({\n      className: ContextMenuView.prototype.className + ' Table-columnMenu',\n      collection: collection,\n      itemTemplate: tableHeadOptionsItemTemplate,\n      itemView: TableHeadOptionsItemView,\n      triggerElementID: modelCID,\n      position: position\n    });\n\n    collection.bind('change:selected', function (menuItem) {\n      var action = menuItem.get('action');\n      action && action(menuItem);\n    }, this);\n\n    this._menuView.model.bind('change:visible', function (model, isContextMenuVisible) {\n      if (this._hasContextMenu() && !isContextMenuVisible) {\n        this._hideContextMenu();\n      }\n    }, this);\n\n    this._menuView.show();\n    this.addView(this._menuView);\n\n    this._initScrollBinding();\n  },\n\n  _addColumn: function () {\n    addColumnOperation({\n      tableViewModel: this._tableViewModel,\n      columnsCollection: this._columnsCollection\n    });\n  },\n\n  _changeColumnType: function (newType) {\n    var self = this;\n    var oldType = this.model.get('type');\n    var isTypeChangeDestructive = QueryColumnModel.isTypeChangeDestructive(oldType, newType);\n    if (!isTypeChangeDestructive) {\n      changeColumnTypeOperation({\n        columnModel: this.model,\n        newType: newType\n      });\n    } else {\n      this._modals.create(\n        function (modalModel) {\n          return new ConfirmationModalView({\n            modalModel: modalModel,\n            template: require('./modals-templates/change-table-column-type.tpl'),\n            renderOpts: {\n              columnName: self.model.get('name'),\n              newType: newType\n            },\n            loadingTitle: _t('components.table.columns.change-type.loading', {\n              columnName: self.model.get('name')\n            }),\n            runAction: function () {\n              changeColumnTypeOperation({\n                columnModel: self.model,\n                newType: newType,\n                onSuccess: function () {\n                  modalModel.destroy();\n                },\n                onError: function (e) {\n                  modalModel.destroy();\n                }\n              });\n            }\n          });\n        }\n      );\n    }\n  },\n\n  _removeColumn: function () {\n    var self = this;\n    this._modals.create(\n      function (modalModel) {\n        return new ConfirmationModalView({\n          modalModel: modalModel,\n          template: require('./modals-templates/remove-table-column.tpl'),\n          renderOpts: {\n            name: self.model.get('name')\n          },\n          loadingTitle: _t('components.table.columns.destroy.loading', {\n            columnName: self.model.get('name')\n          }),\n          runAction: function () {\n            removeTableColumnOperation({\n              columnModel: self.model,\n              onSuccess: function () {\n                modalModel.destroy();\n              },\n              onError: function (e) {\n                modalModel.destroy();\n              }\n            });\n          }\n        });\n      }\n    );\n  },\n\n  _onAttributeDblClicked: function () {\n    if (this.model.isEditable() && !this._tableViewModel.isDisabled()) {\n      this._startEditing();\n    }\n  },\n\n  _initRenameBinds: function () {\n    $(document).bind('keydown', this._onKeyDown);\n  },\n\n  _destroyRenameBinds: function () {\n    $(document).unbind('keydown', this._onKeyDown);\n  },\n\n  _onKeyDown: function (ev) {\n    var keyCode = ev.which;\n    if (keyCode === ENTER_KEY_CODE) {\n      this._saveNewName();\n    } else if (keyCode === ESC_KEY_CODE) {\n      this._finishEditing();\n    }\n  },\n\n  _startEditing: function () {\n    this.$('.js-attribute')\n      .addClass('is-active')\n      .removeAttr('readonly');\n\n    this._initRenameBinds();\n  },\n\n  _finishEditing: function () {\n    this.$('.js-attribute')\n      .val(this.model.get('name'))\n      .removeClass('is-active')\n      .attr('readonly', '');\n\n    this._destroyRenameBinds();\n  },\n\n  _saveNewName: function () {\n    if (this.model.isEditable()) {\n      var newName = this.$('.js-attribute').val();\n      var columnModel = this.model;\n      var oldName = columnModel.get('name');\n\n      if (oldName !== newName && newName !== '') {\n        this._modals.create(\n          function (modalModel) {\n            return new ConfirmationModalView({\n              modalModel: modalModel,\n              template: require('./modals-templates/rename-table-column.tpl'),\n              renderOpts: {\n                columnName: oldName,\n                newName: newName\n              },\n              loadingTitle: _t('components.table.columns.rename.loading', {\n                columnName: oldName,\n                newName: newName\n              }),\n              runAction: function () {\n                renameColumnOperation({\n                  columnModel: columnModel,\n                  newName: newName,\n                  onSuccess: function () {\n                    modalModel.destroy();\n                  },\n                  onError: function (e) {\n                    modalModel.destroy();\n                  }\n                });\n              }\n            });\n          }\n        );\n      }\n    }\n\n    // Setting old name just in case user cancel it\n    this._finishEditing();\n  },\n\n  clean: function () {\n    this._destroyRenameBinds();\n    this._destroyScrollBinding();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"\\n    Table-headItemWrapper\\n    '+\n((__t=( name === 'cartodb_id' ||(type === 'geometry' && geometry !== 'point') ? 'Table-headItemWrapper--short' : '' ))==null?'':_.escape(__t))+\n'\\n  \">\\n  <div class=\"u-flex u-justifySpace\">\\n    <input class=\"Table-headItemName CDB-Text CDB-Size-medium is-semibold u-ellipsis js-attribute\" value=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\" readonly />\\n\\n    ';\n if (isOrderBy) { \n__p+='\\n      <i class=\"CDB-Size CDB-Size-small CDB-IconFont CDB-IconFont-arrowNext\\n        Table-columnSorted\\n        Table-columnSorted--';\n if (sortBy === 'asc') {\n__p+='asc';\n } else {\n__p+='desc';\n } \n__p+='\\n        u-rSpace u-altTextColor\\n      \"></i>\\n    ';\n } \n__p+='\\n\\n    <button class=\"CDB-Shape-threePoints is-blue is-small js-columnOptions\">\\n      <div class=\"CDB-Shape-threePointsItem\"></div>\\n      <div class=\"CDB-Shape-threePointsItem\"></div>\\n      <div class=\"CDB-Shape-threePointsItem\"></div>\\n    </button>\\n  </div>\\n  <p class=\"CDB-Size-small Table-headItemInfo u-altTextColor\">'+\n((__t=( type ))==null?'':_.escape(__t))+\n'</p>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CustomListItemView = require('../../custom-list/custom-list-item-view');\nvar CustomListView = require('../../custom-list/custom-view');\nvar QueryColumnModel = require('../../../data/query-column-model');\n\nmodule.exports = CustomListItemView.extend({\n\n  events: _.extend(\n    CustomListItemView.prototype.events,\n    {\n      'click .js-desc': '_onDescClick',\n      'click .js-asc': '_onAscClick',\n      'click .js-order': 'killEvent'\n    }\n  ),\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    this.$el.append(\n      this.options.template(\n        {\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          isDestructive: this.model.get('destructive'),\n          isOrderBy: this.model.get('isOrderBy'),\n          sortBy: this.model.get('sortBy'),\n          name: this.model.getName(),\n          val: this.model.getValue()\n        }\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  },\n\n  _onClick: function (ev) {\n    this.killEvent(ev);\n\n    if (this.model.getValue() === 'change') {\n      this._openSubContextMenu(ev);\n    } else {\n      this.model.set('selected', true);\n    }\n  },\n\n  _hideSubContextMenu: function () {\n    if (this._subContextMenu) {\n      this._subContextMenu.clean();\n      this.removeView(this._subContextMenu);\n      delete this.collection;\n      delete this._subContextMenu;\n    }\n  },\n\n  _openSubContextMenu: function (ev) {\n    if (this._subContextMenu) {\n      this._hideSubContextMenu();\n    }\n\n    var subContextClassName = 'Table-columnTypeMenu ';\n    if (this.model.get('isLastColumns')) {\n      subContextClassName += ' Table-columnTypeMenu--toLeft ';\n    }\n\n    this._subContextMenu = new CustomListView({\n      className: subContextClassName + CustomListView.prototype.className,\n      options: [\n        {\n          label: _t('components.table.columns.types.number'),\n          disabled: !QueryColumnModel.isTypeChangeAllowed(this.model.get('type'), 'number'),\n          val: 'number'\n        }, {\n          label: _t('components.table.columns.types.string'),\n          disabled: !QueryColumnModel.isTypeChangeAllowed(this.model.get('type'), 'string'),\n          val: 'string'\n        }, {\n          label: _t('components.table.columns.types.date'),\n          disabled: !QueryColumnModel.isTypeChangeAllowed(this.model.get('type'), 'date'),\n          val: 'date'\n        }, {\n          label: _t('components.table.columns.types.boolean'),\n          disabled: !QueryColumnModel.isTypeChangeAllowed(this.model.get('type'), 'boolean'),\n          val: 'boolean'\n        }\n      ],\n      showSearch: false,\n      typeLabel: ''\n    });\n\n    this._subContextMenu.collection.bind('change:selected', function (menuItem) {\n      if (!menuItem.get('disabled')) {\n        this.model.set({\n          type: menuItem.getValue(),\n          selected: true\n        });\n      }\n    }, this);\n\n    this.$el.closest('.Table-columnMenu').append(this._subContextMenu.render().el);\n    this._subContextMenu.show();\n    this.addView(this._subContextMenu);\n  },\n\n  _onAscClick: function (ev) {\n    this.killEvent(ev);\n    this.model.set({\n      sort: 'asc',\n      selected: true\n    });\n  },\n\n  _onDescClick: function (ev) {\n    this.killEvent(ev);\n    this.model.set({\n      sort: 'desc',\n      selected: true\n    });\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (val === 'order') { \n__p+='\\n  <div class=\"u-flex u-justifySpace CDB-ListDecoration-itemLink js-order\">\\n    <p class=\"CDB-Text CDB-Size-medium\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</p>\\n    <ul class=\"u-flex\">\\n      <li class=\"js-asc\">\\n        <i class=\"CDB-Text CDB-IconFont\\n          CDB-IconFont-arrowNext u-actionTextColor\\n          Table-columnSorted\\n          Table-columnSorted--asc\\n           ';\n if (isOrderBy && sortBy === 'asc') { \n__p+='is-disabled';\n } \n__p+='\\n           ';\n if (isOrderBy && sortBy === 'desc') { \n__p+='is-semibold';\n } \n__p+='\\n        \"></i>\\n      </li>\\n      <li class=\"js-desc u-lSpace--xl\">\\n        <i class=\"CDB-Text CDB-IconFont\\n          CDB-IconFont-arrowNext u-actionTextColor\\n          Table-columnSorted\\n          Table-columnSorted--desc\\n           ';\n if (isOrderBy && sortBy === 'desc') { \n__p+='is-disabled';\n } \n__p+='\\n           ';\n if (isOrderBy && sortBy === 'asc') { \n__p+='is-semibold';\n } \n__p+='\\n        \"></i>\\n      </li>\\n    </ul>\\n  </div>\\n';\n } else if (val === 'change') { \n__p+='\\n  <div class=\"CDB-ListDecoration-itemLink u-actionTextColor u-flex u-justifySpace u-alignCenter\" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">\\n    <span>'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</span>\\n    <i class=\"CDB-Text CDB-Size-small is-semibold CDB-IconFont CDB-IconFont-rArrowLight\"></i>\\n  </div>\\n';\n } else { \n__p+='\\n  <div class=\"CDB-ListDecoration-itemLink\\n    ';\n if (isDestructive) { \n__p+='  u-errorTextColor ';\n } else { \n__p+=' u-actionTextColor ';\n } \n__p+='\\n    ';\n if (val === 'change') { \n__p+=' u-flex ';\n } \n__p+='\\n    \" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">\\n    '+\n((__t=( name ))==null?'':_.escape(__t))+\n'\\n    ';\n if (val === 'change') { \n__p+='\\n      <span>\\n        <i class=\"CDB-Text CDB-Size-small is-semibold CDB-IconFont CDB-IconFont-rArrowLight\"></i>\\n      </span>\\n    ';\n } \n__p+='\\n  </div>\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar TableHeadItemView = require('./table-head-item-view');\nvar template = require('./table-head.tpl');\n\n/*\n *  Main table head view\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Table-head',\n  tagName: 'table',\n\n  initialize: function (opts) {\n    if (!opts.columnsCollection) throw new Error('columnsCollection is required');\n    if (!opts.tableViewModel) throw new Error('tableViewModel is required');\n    if (!opts.queryGeometryModel) throw new Error('queryGeometryModel is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this._columnsCollection = opts.columnsCollection;\n    this._tableViewModel = opts.tableViewModel;\n    this._queryGeometryModel = opts.queryGeometryModel;\n    this._modals = opts.modals;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.append(template());\n    this._columnsCollection.each(this._renderColumnHead, this);\n    return this;\n  },\n\n  _initBinds: function () {\n    this._queryGeometryModel.bind('change:simple_geom', this.render, this);\n    this.add_related_model(this._queryGeometryModel);\n    this._tableViewModel.bind('change:sort_order change:order_by', this.render, this);\n    this.add_related_model(this._tableViewModel);\n    this._columnsCollection.bind('reset', function () {\n      this.render();\n\n      if (this._newColumn) {\n        var scrollWidth = this.$el.get(0).scrollWidth;\n\n        setTimeout(function () {\n          this._scrollToLeft({\n            pos: scrollWidth\n          });\n        }.bind(this), 500);\n\n        delete this._newColumn;\n      }\n    }, this);\n    this._columnsCollection.bind('add', function (mdl) {\n      this._newColumn = mdl;\n    }, this);\n    this.add_related_model(this._columnsCollection);\n  },\n\n  _renderColumnHead: function (mdl) {\n    if (!this._tableViewModel.isDisabled() && mdl.get('name') === 'the_geom_webmercator') {\n      return;\n    }\n\n    var view = new TableHeadItemView({\n      model: mdl,\n      modals: this._modals,\n      columnsCollection: this._columnsCollection,\n      tableViewModel: this._tableViewModel,\n      simpleGeometry: this._queryGeometryModel.get('simple_geom')\n    });\n    this.$('.js-headRow').append(view.render().el);\n    this.addView(view);\n  },\n\n  _scrollToLeft: function (opts) {\n    opts = opts || {};\n    $('.Table').animate({\n      scrollLeft: opts.pos || 0\n    }, opts.speed || 'slow');\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<thead>\\n  <tr class=\"js-headRow\"></tr>\\n</thead>\\n';\n}\nreturn __p;\n};\n",
    "var Notifier = require('../../../components/notifier/notifier');\nvar errorParser = require('../../../helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.columnsCollection) throw new Error('columnsCollection is required');\n\n  var columnsCollection = opts.columnsCollection;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.columns.create.loading'),\n    closable: false\n  });\n\n  columnsCollection.addColumn({\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.columns.create.success', { columnName: attrs.name }),\n        closable: true\n      });\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.columns.create.error', { error: errorParser(e) }),\n        closable: true\n      });\n    }\n  });\n};\n",
    "var Notifier = require('../../../components/notifier/notifier');\nvar errorParser = require('../../../helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.rowsCollection) { throw new Error('rowsCollection is required'); }\n\n  var rowsCollection = opts.rowsCollection;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.rows.create.loading'),\n    closable: false\n  });\n\n  rowsCollection.addRow({\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.rows.create.success'),\n        closable: true\n      });\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.rows.create.error', { error: errorParser(e) }),\n        closable: true\n      });\n    }\n  });\n};\n",
    "var Notifier = require('../../../components/notifier/notifier');\nvar errorParser = require('../../../helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.columnModel) { throw new Error('columnModel is required'); }\n  if (!opts.newType) { throw new Error('newType is required'); }\n\n  var columnModel = opts.columnModel;\n  var newType = opts.newType;\n\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.columns.change-type.loading', {\n      columnName: columnModel.get('name')\n    }),\n    closable: false\n  });\n\n  columnModel.save({\n    type: newType\n  }, {\n    wait: true,\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.columns.change-type.success', {\n          columnName: columnModel.get('name'),\n          newType: newType\n        }),\n        closable: true\n      });\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.columns.change-type.error', {\n          columnName: columnModel.get('name'),\n          newType: newType,\n          error: errorParser(e)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n",
    "var Notifier = require('../../../components/notifier/notifier');\nvar errorParser = require('../../../helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.rowModel) throw new Error('rowModel is required');\n  if (opts.newValue === undefined) throw new Error('newValue is required');\n  if (!opts.attribute) throw new Error('attribute is required');\n\n  var rowModel = opts.rowModel;\n  var newValue = opts.newValue;\n  var attribute = opts.attribute;\n  var cartodbId = rowModel.get('cartodb_id');\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.rows.edit.loading', {\n      attribute: attribute,\n      cartodbId: cartodbId\n    }),\n    closable: false\n  });\n\n  // In order to preserve \"previous\" attribute\n  rowModel.set(attribute, newValue);\n  rowModel.save(null, {\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.rows.edit.success', {\n          attribute: attribute,\n          cartodbId: cartodbId\n        }),\n        closable: true\n      });\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.rows.edit.error', {\n          attribute: attribute,\n          cartodbId: cartodbId,\n          error: errorParser(e)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n",
    "var Notifier = require('../../../components/notifier/notifier');\nvar errorParser = require('../../../helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.columnModel) { throw new Error('columnModel is required'); }\n\n  var columnModel = opts.columnModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.columns.destroy.loading', { columnName: columnModel.get('name') }),\n    closable: false\n  });\n\n  columnModel.destroy({\n    wait: true,\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.columns.destroy.success', { columnName: columnModel.get('name') }),\n        closable: true\n      });\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.columns.destroy.error', {\n          columnName: columnModel.get('name'),\n          error: errorParser(e)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n",
    "var Notifier = require('../../../components/notifier/notifier');\nvar errorParser = require('../../../helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.rowModel) { throw new Error('rowModel is required'); }\n\n  var rowModel = opts.rowModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var cartodbId = rowModel.get('cartodb_id');\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.rows.destroy.loading', { cartodb_id: cartodbId }),\n    closable: false\n  });\n\n  rowModel.destroy({\n    wait: true,\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.rows.destroy.success', { cartodb_id: cartodbId }),\n        closable: true\n      });\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.rows.destroy.error', { cartodb_id: cartodbId, error: errorParser(e) }),\n        closable: true\n      });\n    }\n  });\n};\n",
    "var Notifier = require('../../../components/notifier/notifier');\nvar errorParser = require('../../../helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.columnModel) { throw new Error('columnModel is required'); }\n  if (!opts.newName) { throw new Error('newName is required'); }\n\n  var columnModel = opts.columnModel;\n  var oldName = columnModel.get('name');\n  var newName = opts.newName;\n\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.columns.rename.loading', { oldName: oldName, newName: newName }),\n    closable: false\n  });\n\n  columnModel.save({\n    new_name: newName,\n    old_name: columnModel.get('name')\n  }, {\n    wait: true,\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.columns.rename.success', {\n          columnName: oldName,\n          newName: newName\n        }),\n        closable: true\n      });\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.columns.rename.error', {\n          columnName: oldName,\n          newName: newName,\n          error: errorParser(e)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-LoaderIcon is-dark\">\\n  <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n    <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n  </svg>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./table-paginator.tpl');\nvar templateLoader = require('./table-paginator-loader.tpl');\nvar Notifier = require('../../../components/notifier/notifier');\nvar errorParser = require('../../../helpers/error-parser');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'div',\n  className: 'Table-paginator js-tablePaginator',\n\n  events: {\n    'click .js-prev': '_onPrevPage',\n    'click .js-next': '_onNextPage'\n  },\n\n  initialize: function (opts) {\n    if (!opts.rowsCollection) throw new Error('rowsCollection is required');\n    if (!opts.tableViewModel) throw new Error('tableViewModel is required');\n\n    this._tableViewModel = opts.tableViewModel;\n    this._rowsCollection = opts.rowsCollection;\n\n    this._rowsCollection.bind('loading', function (item) {\n      // Don't take into account row model loading triggers\n      if (item.models) {\n        this._isLoading = true;\n      }\n    }, this);\n    this._rowsCollection.bind('add remove', this.render, this);\n    this._tableViewModel.bind('change:page', this._onTablePageChange, this);\n    this.add_related_model(this._tableViewModel);\n    this.add_related_model(this._rowsCollection);\n  },\n\n  render: function () {\n    var rowsSize = this._rowsCollection.size();\n    var page = this._tableViewModel.get('page');\n    var maxRowsPerPage = this._rowsCollection.DEFAULT_FETCH_OPTIONS.rows_per_page;\n\n    this.$el.html(\n      template({\n        page: this._tableViewModel.get('page'),\n        size: rowsSize,\n        isNextAvailable: rowsSize >= maxRowsPerPage,\n        isPrevAvailable: page > 0\n      })\n    );\n\n    this.$el.toggleClass('Table-paginator--relative', !!this._tableViewModel.get('relativePositionated'));\n    return this;\n  },\n\n  _onTablePageChange: function () {\n    this._rowsCollection.fetch({\n      data: _.extend(\n        this._tableViewModel.pick('page', 'order_by', 'sort_order'),\n        {\n          exclude: !this._tableViewModel.isCustomQueryApplied() ? ['the_geom_webmercator'] : []\n        }\n      ),\n      error: function (mdl, response) {\n        this._isLoading = false;\n        this.render();\n\n        Notifier.addNotification({\n          status: 'error',\n          info: _t('components.table.rows.paginator.error', { error: errorParser(response) }),\n          closable: true\n        });\n      }.bind(this)\n    });\n  },\n\n  _onPrevPage: function (ev) {\n    if (!this._isLoading) {\n      this.$('.js-prev').html(templateLoader());\n      this._tableViewModel.set('page', this._tableViewModel.get('page') - 1);\n    }\n  },\n\n  _onNextPage: function (ev) {\n    if (!this._isLoading) {\n      this.$('.js-next').html(templateLoader());\n      this._tableViewModel.set('page', this._tableViewModel.get('page') + 1);\n    }\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button class=\"Table-paginatorButton Table-paginatorButton--prev\\n  ';\n if (isPrevAvailable) { \n__p+='\\n    js-prev\\n  ';\n } \n__p+='\\n\">\\n  <i class=\"CDB-Text is-semibold CDB-IconFont CDB-IconFont-lArrowLight CDB-Size-small\\n  ';\n if (isPrevAvailable) { \n__p+='\\n    u-actionTextColor\\n  ';\n } else { \n__p+='\\n    u-hintTextColor\\n  ';\n } \n__p+='\\n  \"></i>\\n</button>\\n<p class=\"Table-paginatorText CDB-Text CDB-Size-small is-semibold u-upperCase\">\\n  ';\n if (!size) {\n__p+='\\n   <span class=\"u-mainTextColor\"></span>\\n  ';\n } else { \n__p+='\\n    <span class=\"u-mainTextColor\">'+\n((__t=( (page * 40) + 1 ))==null?'':_.escape(__t))+\n'</span>\\n    <span class=\"u-altTextColor u-lSpace u-rSpace\">'+\n((__t=( _t('components.table.rows.paginator.to') ))==null?'':_.escape(__t))+\n'</span>\\n    <span class=\"u-mainTextColor\">'+\n((__t=( (page * 40) + size ))==null?'':_.escape(__t))+\n'</span>\\n  ';\n } \n__p+='\\n</p>\\n<button class=\"Table-paginatorButton Table-paginatorButton--next\\n  ';\n if (isNextAvailable) { \n__p+='\\n    js-next\\n  ';\n } \n__p+='\\n\">\\n  <i class=\"CDB-Text is-semibold CDB-IconFont CDB-IconFont-rArrowLight CDB-Size-small\\n  ';\n if (isNextAvailable) { \n__p+='\\n    u-actionTextColor\\n  ';\n } else { \n__p+='\\n    u-hintTextColor\\n  ';\n } \n__p+='\\n  \"></i>\\n</button>\\n';\n}\nreturn __p;\n};\n",
    "var TableView = require('./table-view');\nvar QueryColumnsCollection = require('../../data/query-columns-collection');\nvar TableNameUtils = require('../../helpers/table-name-utils');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodeModel',\n  'configModel',\n  'modals',\n  'userModel'\n];\n\n/**\n *  Table manager that generates necessary models/collections\n *  for the view\n *\n */\n\nmodule.exports = {\n  create: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    // Adds the owner username if it's in an organization and the table name is not already qualified\n    var tableName = this._analysisDefinitionNodeModel.get('table_name');\n    var userName = TableNameUtils.getUsername(tableName) || this._userModel.get('username');\n    tableName = TableNameUtils.getQualifiedTableName(\n      tableName,\n      userName,\n      this._userModel.isInsideOrg()\n    );\n\n    var querySchemaModel = this._analysisDefinitionNodeModel.querySchemaModel;\n\n    var columnsCollection = new QueryColumnsCollection(\n      querySchemaModel.columnsCollection.toJSON(),\n      {\n        configModel: this._configModel,\n        tableName: tableName,\n        querySchemaModel: querySchemaModel\n      }\n    );\n\n    return new TableView({\n      relativePositionated: opts.relativePositionated,\n      modals: this._modals,\n      analysisDefinitionNodeModel: this._analysisDefinitionNodeModel,\n      columnsCollection: columnsCollection,\n      tableName: tableName\n    });\n  },\n\n  destroy: function (tableView) {\n    if (!tableView) throw new Error('tableView object is needed');\n    tableView.clean();\n  }\n};\n",
    "var Backbone = require('backbone');\n\n/**\n *  Table view model\n */\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    page: 0,\n    order_by: '',\n    sort_order: '',\n    readonly: false,\n    tableName: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.analysisDefinitionNodeModel) throw new Error('analysisDefinitionNodeModel is required');\n    if (!opts.columnsCollection) throw new Error('columnsCollection is required');\n\n    this._analysisDefinitionNodeModel = opts.analysisDefinitionNodeModel;\n    this._columnsCollection = opts.columnsCollection;\n\n    this._setOrderAndSort();\n\n    this.listenTo(this._columnsCollection, 'reset', this._setOrderAndSort);\n  },\n\n  _setOrderAndSort: function () {\n    var hasCartodbId = this._columnsCollection.where({name: 'cartodb_id'}).length;\n\n    if (hasCartodbId && !this.isCustomQueryApplied()) {\n      this.set({\n        'order_by': 'cartodb_id',\n        'sort_order': 'asc'\n      }, {\n        silent: true\n      });\n    }\n  },\n\n  resetFetchDefaults: function () {\n    this.set({\n      page: this.defaults.page,\n      order_by: '',\n      sort_order: ''\n    }, {\n      silent: true\n    });\n  },\n\n  isDisabled: function () {\n    return this._analysisDefinitionNodeModel.isReadOnly();\n  },\n\n  isCustomQueryApplied: function () {\n    return this._analysisDefinitionNodeModel.isCustomQueryApplied();\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar TableViewModel = require('./table-view-model.js');\nvar TableHeadView = require('./head/table-head-view');\nvar TableBodyView = require('./body/table-body-view');\nvar addTableRow = require('./operations/table-add-row');\nvar addTableColumn = require('./operations/table-add-column');\nvar SQLUtils = require('../../helpers/sql-utils');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodeModel',\n  'columnsCollection',\n  'modals'\n];\n\n/*\n *  Main table view\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Table-wrapper',\n  tagName: 'div',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._rowsCollection = this._analysisDefinitionNodeModel.queryRowsCollection;\n    this._queryGeometryModel = this._analysisDefinitionNodeModel.queryGeometryModel;\n    this._querySchemaModel = this._analysisDefinitionNodeModel.querySchemaModel;\n    this._tableModel = this._analysisDefinitionNodeModel.isSourceType() && this._analysisDefinitionNodeModel.getTableModel();\n\n    this._tableViewModel = new TableViewModel({\n      relativePositionated: opts.relativePositionated,\n      tableName: opts.tableName\n    }, {\n      analysisDefinitionNodeModel: this._analysisDefinitionNodeModel,\n      columnsCollection: this._columnsCollection\n    });\n\n    this._initBinds();\n\n    if (this._queryGeometryModel.shouldFetch()) {\n      this._queryGeometryModel.fetch();\n    }\n\n    if (this._querySchemaModel.shouldFetch()) {\n      this._querySchemaModel.fetch();\n    } else if (this._rowsCollection.shouldFetch()) {\n      this._fetchRowsData();\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    var tableElement = $('<div>').addClass('Table js-table');\n    this.$el.append(tableElement);\n    this._initViews();\n\n    this.$('.js-table').toggleClass('Table--relative', !!this._tableViewModel.get('relativePositionated'));\n    this._setDisableState();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._onChangeQueryOrStatus = this._onChangeQueryOrStatus.bind(this);\n\n    this.listenTo(this._querySchemaModel, 'change:query change:status', _.debounce(this._onChangeQueryOrStatus, 100));\n    this.listenTo(this._querySchemaModel, 'change:status', this._setDisableState);\n    this.listenTo(this._querySchemaModel, 'change:query', this._onQueryChanged);\n    this.listenTo(this._querySchemaModel, 'change:status', this._fetchRowsData);\n    this.listenTo(this._tableViewModel, 'change:sort_order change:order_by', this._fetchRowsData);\n\n    if (this._tableModel && this._tableModel.isSync()) {\n      var syncModel = this._tableModel.getSyncModel();\n      this.listenTo(syncModel, 'destroy', this.render);\n    }\n  },\n\n  _setDisableState: function () {\n    this.$('.js-table').toggleClass('is-disabled', !!this._tableViewModel.isDisabled());\n  },\n\n  _fetchRowsData: function (mdl) {\n    var attrsChanged = mdl && _.keys(mdl.changed);\n    var altersData = SQLUtils.altersData(this._querySchemaModel.get('query'));\n    var isCustomQueryApplied = this._tableViewModel.isCustomQueryApplied();\n    var changeComeFromSortOrOrder = false;\n\n    if (attrsChanged && (_.contains(attrsChanged, 'sort_order') || _.contains(attrsChanged, 'order_by'))) {\n      changeComeFromSortOrOrder = true;\n    }\n\n    if (this._querySchemaModel.isFetched() && !altersData) {\n      this._rowsCollection.fetch({\n        data: {\n          page: this._tableViewModel.get('page'),\n          order_by: !isCustomQueryApplied || changeComeFromSortOrOrder ? this._tableViewModel.get('order_by') : '',\n          sort_order: !isCustomQueryApplied || changeComeFromSortOrOrder ? this._tableViewModel.get('sort_order') : '',\n          exclude: !isCustomQueryApplied || changeComeFromSortOrOrder ? ['the_geom_webmercator'] : []\n        }\n      });\n    }\n  },\n\n  _initViews: function () {\n    var tableHeadView = new TableHeadView({\n      modals: this._modals,\n      queryGeometryModel: this._queryGeometryModel,\n      columnsCollection: this._columnsCollection,\n      tableViewModel: this._tableViewModel\n    });\n\n    this.addView(tableHeadView);\n    this.$('.js-table').append(tableHeadView.render().el);\n\n    var tableBodyView = new TableBodyView({\n      modals: this._modals,\n      columnsCollection: this._columnsCollection,\n      rowsCollection: this._rowsCollection,\n      queryGeometryModel: this._queryGeometryModel,\n      querySchemaModel: this._querySchemaModel,\n      tableViewModel: this._tableViewModel\n    });\n\n    this.addView(tableBodyView);\n    this.$('.js-table').append(tableBodyView.render().el);\n  },\n\n  _onChangeQueryOrStatus: function () {\n    var schemaStatus = this._querySchemaModel.get('status');\n    var geometryStatus = this._queryGeometryModel.get('status');\n\n    if (schemaStatus === 'unfetched' && this._querySchemaModel.canFetch()) {\n      this._querySchemaModel.fetch();\n    }\n\n    if (geometryStatus === 'unfetched' && this._queryGeometryModel.canFetch()) {\n      this._queryGeometryModel.fetch();\n    }\n  },\n\n  addRow: function () {\n    addTableRow({\n      tableViewModel: this._tableViewModel,\n      rowsCollection: this._rowsCollection\n    });\n  },\n\n  addColumn: function () {\n    addTableColumn({\n      tableViewModel: this._tableViewModel,\n      columnsCollection: this._columnsCollection\n    });\n  },\n\n  getColumnsCollection: function () {\n    return this._columnsCollection;\n  },\n\n  _onQueryChanged: function () {\n    this._tableViewModel.resetFetchDefaults();\n  },\n\n  // Remove elements that are not applied in the view\n  remove: function () {\n    $('.Table-paginator').remove();\n    CoreView.prototype.remove.apply(this);\n  }\n\n});\n",
    "var CoreView = require('backbone/core-view');\nrequire('tipsy');\n\n/**\n *  Tipsy tooltip view.\n *\n *  - Needs an element to work.\n *  - Inits tipsy library.\n *  - Clean bastard tipsy bindings easily.\n *\n */\n\nmodule.exports = CoreView.extend({\n  options: {\n    gravity: 's',\n    opacity: 1,\n    fade: true\n  },\n\n  initialize: function (opts) {\n    if (!opts.el) throw new Error('Element is needed to have tipsy tooltip working');\n    this._tipsyOpenedManually = opts.trigger === 'manual';\n    this._initTipsy();\n  },\n\n  _initTipsy: function () {\n    this.$el.tipsy(this.options);\n    this.tipsy = this.$el.data('tipsy');\n  },\n\n  showTipsy: function () {\n    this.$el.tipsy('show');\n  },\n\n  hideTipsy: function () {\n    this.$el.tipsy('hide');\n  },\n\n  destroyTipsy: function () {\n    if (this.tipsy) {\n      // tipsy does not return this\n      this.tipsy.hide();\n      this.$el.unbind('mouseleave mouseenter');\n    }\n    if (this._tipsyOpenedManually) {\n      this.$el.tipsy('hide');\n    }\n\n    this.$el.removeData('tipsy');\n    delete this.tipsy;\n  },\n\n  clean: function () {\n    this.destroyTipsy();\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./toggler.tpl');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Toggle',\n\n  events: {\n    'click .js-input': '_onClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.editorModel) throw new Error('editorModel should be provided');\n\n    this._editorModel = opts.editorModel;\n    this._labelsArray = opts.labels;\n    this._isDisableable = opts.isDisableable;\n\n    this.listenTo(this._editorModel, 'change:edition', this.render);\n    this.listenTo(this._editorModel, 'change:disabled', this.render);\n    this.add_related_model(this._editorModel);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var checked = this._editorModel.get('edition');\n    var disabled = this._editorModel.get('disabled') && this._isDisableable;\n\n    var _template = template({\n      labels: this._labelsArray,\n      checked: checked,\n      disabled: disabled\n    });\n\n    this.$el.append(_template);\n    return this;\n  },\n\n  _onClick: function () {\n    var checked = this._editorModel.get('edition');\n    this._editorModel.set({ edition: !checked });\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Text CDB-Size-small is-semibold u-rSpace--xl';\n if (disabled) { \n__p+=' is-disabled';\n } \n__p+='\">\\n  <label class=\"u-iBlock u-upperCase\">'+\n((__t=( labels[0] ))==null?'':_.escape(__t))+\n'</label>\\n  <input class=\"CDB-Toggle u-iBlock js-input\" type=\"checkbox\"\\n    ';\n if (disabled) { \n__p+=' disabled';\n } \n__p+='\\n    ';\n if (checked) { \n__p+=' checked ';\n } \n__p+=' >\\n  <span class=\"u-iBlock CDB-ToggleFace\"></span>\\n  <label class=\"u-iBlock u-upperCase\">'+\n((__t=( labels[1] ))==null?'':_.escape(__t))+\n'</label>\\n</div>';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./undo-redo.tpl');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-redo': '_onRedoClick',\n    'click .js-undo': '_onUndoClick',\n    'click .js-apply': '_onApplyClick',\n    'click .js-clear': '_onClearClick'\n  },\n\n  options: {\n    applyButton: false,\n    cancelButton: false\n  },\n\n  initialize: function (opts) {\n    if (!opts.editorModel) throw new Error('editorModel is required');\n    if (!opts.trackModel) throw new Error('trackModel is required');\n\n    this._trackModel = opts.trackModel;\n    this._editorModel = opts.editorModel;\n    this._clearModel = opts.clearModel;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var canClear = false;\n    if (this._clearModel) {\n      canClear = this._clearModel.get('visible') === true;\n    }\n\n    this.$el.html(\n      template({\n        canUndo: this._trackModel.canUndo(),\n        canRedo: this._trackModel.canRedo(),\n        canApply: this.options.applyButton && this._editorModel.isEditing(),\n        canClear: canClear\n      })\n    );\n    this._checkButtonsStyle();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._trackModel.bind('undo redo', this.render, this);\n    this._trackModel.bind('unredoChanged', this.render, this);\n    this._editorModel.bind('change:edition', this._checkButtonsStyle, this);\n    this.add_related_model(this._trackModel);\n    this.add_related_model(this._editorModel);\n\n    if (this._clearModel) {\n      this._clearModel.bind('change', this.render, this);\n      this.add_related_model(this._clearModel);\n    }\n  },\n\n  _onUndoClick: function () {\n    if (this._trackModel.canUndo()) {\n      this._trackModel.undo();\n    }\n  },\n\n  _onRedoClick: function () {\n    if (this._trackModel.canRedo()) {\n      this._trackModel.redo();\n    }\n  },\n\n  _onApplyClick: function () {\n    if (this.options.applyButton && this.options.onApplyClick) {\n      this.options.onApplyClick();\n    }\n  },\n\n  _onClearClick: function () {\n    if (this.options.clearButton && this.options.onClearClick) {\n      this.options.onClearClick();\n    }\n  },\n\n  _checkButtonsStyle: function (m) {\n    var editing = this._editorModel.isEditing();\n    this._getIcons().toggleClass('u-whiteTextColor', editing);\n  },\n\n  _getIcons: function () {\n    return this.$('.js-theme');\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-alignCenter\">\\n  <button class=\"js-undo\">\\n    <i class=\"CDB-IconFont CDB-IconFont-undo Size-large u-actionTextColor js-theme ';\n if (!canUndo) { \n__p+='is-disabled';\n } \n__p+='\"></i>\\n  </button>\\n  <button class=\"u-lSpace--xl js-redo\">\\n    <i class=\"CDB-IconFont CDB-IconFont-redo Size-large u-actionTextColor js-theme ';\n if (!canRedo) { \n__p+='is-disabled';\n } \n__p+='\"></i>\\n  </button>\\n  ';\n if (canClear) { \n__p+='\\n  <button class=\"u-lSpace--xl CDB-Button CDB-Button--secondary CDB-Button--white js-clear\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small\">'+\n((__t=( _t('components.undo-redo.clear') ))==null?'':_.escape(__t))+\n'</span>\\n  </button>\\n  ';\n } \n__p+='\\n  ';\n if (canApply) { \n__p+='\\n  <button class=\"u-lSpace--xl CDB-Button CDB-Button--primary js-apply\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small\">'+\n((__t=( _t('components.undo-redo.apply') ))==null?'':_.escape(__t))+\n'</span>\\n  </button>\\n  ';\n } \n__p+='\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./panel-with-options.tpl');\nvar InfoboxView = require('../../components/infobox/infobox-view');\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.createContentView) throw new Error('createContentView factory function is mandatory');\n    if (!opts.editorModel) throw new Error('editorModel is required');\n\n    this.template = this.options.template || template;\n\n    this._createContentView = opts.createContentView;\n    this._editorModel = opts.editorModel;\n    this._createControlView = opts.createControlView;\n    this._createActionView = opts.createActionView;\n    this._infoboxModel = opts.infoboxModel;\n    this._infoboxCollection = opts.infoboxCollection;\n\n    this._editorModel.on('change:edition', this._setStyleMenu, this);\n    this.add_related_model(this._editorModel);\n  },\n\n  render: function () {\n    var contentView;\n    var controlView;\n    var actionView;\n    var infoboxView;\n\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.html(this.template());\n\n    contentView = this._createContentView();\n\n    this._content().html(contentView.render().el);\n    this.addView(contentView);\n\n    if (this._infoboxModel) {\n      infoboxView = new InfoboxView({\n        infoboxModel: this._infoboxModel,\n        infoboxCollection: this._infoboxCollection\n      });\n\n      this._info().html(infoboxView.render().el);\n      this.addView(infoboxView);\n    }\n\n    if (this._createControlView) {\n      controlView = this._createControlView();\n      this._controls().html(controlView.render().el);\n      this.addView(controlView);\n    }\n\n    if (this._createActionView) {\n      actionView = this._createActionView();\n      this._actions().html(actionView.render().el);\n      this.addView(actionView);\n    }\n\n    this._setStyleMenu();\n\n    return this;\n  },\n\n  _content: function () {\n    return this.$('.js-content');\n  },\n\n  _controls: function () {\n    return this.$('.js-controls');\n  },\n\n  _actions: function () {\n    return this.$('.js-actions');\n  },\n\n  _info: function () {\n    return this.$('.js-info');\n  },\n\n  _setStyleMenu: function () {\n    this.$('.js-theme').toggleClass('is-dark', this._editorModel.isEditing());\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Editor-content js-content\"></div>\\n<div class=\"js-info\"></div>\\n<ul class=\"Options-bar u-flex u-justifySpace js-theme js-optionsBar\">\\n  <li class=\"CDB-InfoBox-footerItem js-controls\"></li>\\n  <li class=\"CDB-InfoBox-footerItem CDB-InfoBox-footerItem--right js-actions\"></li>\\n</ul>';\n}\nreturn __p;\n};\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar PermissionModel = require('./permission-model');\nvar OWN_ATTR_NAMES = ['id', 'username', 'avatar_url', 'name'];\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    access: 'r'\n  },\n\n  isOwn: function (model) {\n    return model.id === this.get('entity').id;\n  },\n\n  validate: function (attrs, options) {\n    if (attrs.access !== PermissionModel.READ_ONLY && attrs.access !== PermissionModel.READ_WRITE) {\n      return \"access can't take 'r' or 'rw' values\";\n    }\n  },\n\n  toJSON: function () {\n    var entity = _.pick(this.get('entity').toJSON(), OWN_ATTR_NAMES);\n    // translate name to username\n    if (!entity.username) {\n      entity.username = entity.name;\n      delete entity.name;\n    }\n    return {\n      type: this.get('type') || 'user',\n      entity: entity,\n      access: this.get('access')\n    };\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar camshaftReference = require('./camshaft-reference');\nvar QueryGeometryModel = require('./query-geometry-model');\nvar QuerySchemaModel = require('./query-schema-model');\nvar nodeIds = require('../value-objects/analysis-node-ids');\nvar checkAndBuildOpts = require('../helpers/required-opts');\nvar QueryRowsCollection = require('./query-rows-collection');\nvar fetchAllQueryObjects = require('../helpers/fetch-all-query-objects');\n\nvar REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n *  Base model for an analysis definition node.\n *  May point to one or multiple nodes in turn (referenced by ids).\n *\n *\n *  Analysis-definition-node-model\n *    Query-Schema-Model\n *    Query-Geometry-Model\n *    Query-Rows-Collection\n */\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function (attrs, opts) {\n    if (!this.id) throw new Error('id is required');\n\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    var modelOpts = {\n      configModel: this._configModel,\n      userModel: opts.userModel\n    };\n\n    var simpleGeom = this.get('simple_geom');\n\n    this.querySchemaModel = new QuerySchemaModel(undefined, modelOpts);\n\n    this.queryGeometryModel = new QueryGeometryModel({\n      simple_geom: simpleGeom,\n      status: simpleGeom ? 'fetched' : 'unfetched'\n    }, modelOpts);\n\n    this.queryRowsCollection = new QueryRowsCollection([], {\n      configModel: this._configModel,\n      userModel: opts.userModel,\n      tableName: '',\n      querySchemaModel: this.querySchemaModel\n    });\n\n    this.listenTo(this.queryGeometryModel, 'change:simple_geom', this._onGeometryTypeChanged);\n  },\n\n  fetchQueryObjects: function () {\n    if (this.get('status') === 'ready' && !this.get('error')) {\n      fetchAllQueryObjects({\n        queryGeometryModel: this.queryGeometryModel,\n        querySchemaModel: this.querySchemaModel,\n        queryRowsCollection: this.queryRowsCollection\n      });\n    }\n  },\n\n  /**\n   * @override {Backbone.prototype.parse}  flatten the provided analysis data and create source nodes if there are any.\n   */\n  parse: function (r, opts) {\n    // Allow omitting type when merging into an existing node\n    var sourceNames = (!r.type && opts.merge) ? [] : camshaftReference.getSourceNamesForAnalysisType(r.type);\n\n    var parsedParams = _.reduce(r.params, function (memo, val, name) {\n      var sourceName = sourceNames[sourceNames.indexOf(name)];\n\n      if (sourceName) {\n        this.collection.add(val, opts);\n        memo[name] = val.id;\n      } else {\n        memo[name] = val;\n      }\n\n      return memo;\n    }, {}, this);\n\n    var parsedOptions = _.reduce(r.options, function (memo, val, name) {\n      memo[name] = val;\n      return memo;\n    }, {}, this);\n\n    return _.defaults(\n      _.omit(r, 'params', 'options'),\n      parsedOptions,\n      parsedParams\n    );\n  },\n\n  /**\n   * @override {Backbone.prototype.toJSON} unflatten the internal structure to the expected nested JSON data structure.\n   * @param {Object} options\n   * @param {Boolean} options.skipOptions - Add or not analysis options to the definition\n   */\n  toJSON: function (options) {\n    options = options || {};\n\n    var analysisParams = [];\n    var paramsforJSON = {};\n    var paramsForType = camshaftReference.paramsForType(this.get('type'));\n\n    // Undo the parsing of the params previously done in .parse() (when model was created)\n    for (var name in paramsForType) {\n      var param = paramsForType[name];\n      var val = this.get(name);\n      var includeParamInJSON = true;\n\n      if (param.type === 'node') {\n        var node = this.collection.get(val);\n        if (node) {\n          val = node.toJSON(options);\n        } else if (param.optional) { // Node has no value but is optional. We don't serialize it.\n          includeParamInJSON = false;\n        } else { // Node has no value and is required. Throw error.\n          throw new Error('no node found for param \"' + name + '\" with id \"' + val + '\" in node ' + JSON.stringify(this.attributes));\n        }\n      }\n\n      if (includeParamInJSON) {\n        paramsforJSON[name] = val;\n        analysisParams.push(name);\n      }\n    }\n\n    var json = {\n      id: this.get('id'),\n      type: this.get('type'),\n      params: paramsforJSON\n    };\n\n    // style_history is not sent at all (neither inside params nor options). It is always set by the backend.\n    var optionsAttrs = _.omit(this.attributes, analysisParams.concat('id', 'type', 'status', 'style_history'));\n    if (!(options.skipOptions || _.isEmpty(optionsAttrs))) {\n      json['options'] = optionsAttrs;\n    }\n\n    return json;\n  },\n\n  /**\n   * @override {Backbone.prototype.isNew} for this.destroy() to work (not try to send DELETE request)\n   */\n  isNew: function () {\n    return true;\n  },\n\n  isReadOnly: function () {\n    // By default, any node should be read only by default, except the source node (with exceptions)\n    return true;\n  },\n\n  isCustomQueryApplied: function () {\n    // By default, any node shouldn't have a custom query applied, except the source node\n    return false;\n  },\n\n  canBeDeletedByUser: function () {\n    return this.hasPrimarySource();\n  },\n\n  hasFailed: function () {\n    return this.get('status') === 'failed';\n  },\n\n  isDone: function () {\n    return this.get('status') === 'ready';\n  },\n\n  destroy: function () {\n    if (this.querySchemaModel) {\n      this.querySchemaModel.destroy();\n      this.querySchemaModel = null;\n    }\n\n    return Backbone.Model.prototype.destroy.apply(this, arguments);\n  },\n\n  /**\n   * Creates a new node that have same params as the current node, with only the id differing.\n   * @param {String} newId - e.g. 'b1'\n   * @return {Object} instance of analysis-definition-node-model\n   */\n  clone: function (newId) {\n    if (!newId) throw new Error('newId is required');\n    if (!_.isString(newId) || newId.length < 2) throw new Error('newId is required as a non-empty string');\n    if (newId === this.id) throw new Error('newId must be different from current id, ' + this.id);\n\n    var attrs = this.toJSON();\n    attrs.id = newId;\n    return this.collection.add(attrs);\n  },\n\n  linkedListBySameLetter: function () {\n    var list = [this];\n    var prev = this;\n    var letter = this.letter();\n\n    while (true) {\n      var current = prev.getPrimarySource();\n      if (current && current.letter() === letter) {\n        list.push(current);\n        prev = current;\n      } else {\n        break;\n      }\n    }\n\n    return list;\n  },\n\n  /**\n   * @return {Boolean, null} null if the geoemtry type of this node is not known,\n   *   this is to indicate that the query model is not ready yet, up to caller to make the call or not\n   */\n  isValidAsInputForType: function (analysisType) {\n    if (analysisType === 'source') return false;\n\n    var geometry = this.queryGeometryModel.get('simple_geom');\n    return geometry\n      ? camshaftReference.isValidInputGeometryForType(geometry, analysisType)\n      : null;\n  },\n\n  containsNode: function (other) {\n    if (!other) return false;\n    return this.id === other.id || this._sourcesContains(other);\n  },\n\n  hasPrimarySource: function () {\n    return !!this.getPrimarySource();\n  },\n\n  hasSecondarySource: function () {\n    return !!this.getSecondarySource();\n  },\n\n  getPrimarySource: function () {\n    return this.collection.get(this._getPrimarySourceId());\n  },\n\n  getSecondarySource: function () {\n    // Assumption: there are only 1-2 sources, so secondary is the one that's not the primary\n    var primarySourceId = this._getPrimarySourceId();\n    var secondarySourceId = _.find(this.sourceIds(), function (sourceId) {\n      return sourceId !== primarySourceId;\n    });\n    return this.collection.get(secondarySourceId);\n  },\n\n  // Default query by default is the query already applied in the node.\n  // For source node is totally different\n  getDefaultQuery: function () {\n    return this.get('query');\n  },\n\n  /**\n   * @return {Array} e.g. ['c3', 'b2']\n   */\n  sourceIds: function () {\n    return _.map(this._sourceNames(), function (sourceName) {\n      return this.get(sourceName);\n    }, this);\n  },\n\n  changeSourceIds: function (currentId, newId, silenty) {\n    this._sourceNames().forEach(function (sourceName) {\n      if (this.get(sourceName) === currentId) {\n        this.set(sourceName, newId, { silent: silenty });\n      }\n    }, this);\n  },\n\n  isSourceType: function () {\n    return this.get('type') === 'source';\n  },\n\n  letter: function () {\n    return nodeIds.letter(this.id);\n  },\n\n  getStyleHistoryForLayer: function (layer_id) {\n    var styleHistory = this.get('style_history');\n    return styleHistory && styleHistory[layer_id];\n  },\n\n  // Private methods\n\n  _sourcesContains: function (other) {\n    var primarySource = this.getPrimarySource();\n    var secondarySource = this.getSecondarySource();\n    return !!(\n      (primarySource && primarySource.containsNode(other)) ||\n      (secondarySource && secondarySource.containsNode(other))\n    );\n  },\n\n  _getPrimarySourceId: function () {\n    var primarySourceName = this.get('primary_source_name') || this._sourceNames()[0];\n    return this.get(primarySourceName);\n  },\n\n  /**\n   * @return {Array} e.g. ['polygons_source', 'points_source']\n   */\n  _sourceNames: function () {\n    return camshaftReference.getSourceNamesForAnalysisType(this.get('type'));\n  },\n\n  _onGeometryTypeChanged: function (m, value) {\n    this.set('simple_geom', value);\n  }\n\n});\n",
    "var AnalysisDefinitionNodeModel = require('./analysis-definition-node-model');\nvar TableModel = require('./table-model');\nvar SQLUtils = require('../helpers/sql-utils');\n\n/**\n *  Case of a node model representing a source node.\n *  - It should provide new info about if the node is read only or not.\n *\n *  Analysis-definition-node-source-model\n *    Query-Schema-Model\n *    Query-Geometry-Model\n *    Table-Model\n */\nmodule.exports = AnalysisDefinitionNodeModel.extend({\n\n  defaults: {\n    status: 'ready'\n  },\n\n  /**\n   * @override AnalysisDefinitionNodeModel.prototype.initialize\n   */\n  initialize: function (attrs, opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n\n    this._userModel = opts.userModel;\n    AnalysisDefinitionNodeModel.prototype.initialize.apply(this, arguments);\n\n    var query = this.get('query');\n    this.querySchemaModel.set({\n      query: query,\n      ready: true\n    }, { silent: true });\n\n    this.queryGeometryModel.set({\n      query: query,\n      ready: true\n    }, { silent: true });\n\n    // TODO: we should check if it is necessary to check if we have to overwrite the whole\n    //       initialize or with this change is enough.\n    this.queryRowsCollection._tableName = this.get('table_name');\n\n    var tableData = opts.tableData || { name: this.get('table_name') };\n    this.tableModel = new TableModel(tableData, {\n      configModel: opts.configModel,\n      parse: true\n    });\n  },\n\n  getDefaultQuery: function () {\n    return SQLUtils.getDefaultSQL(\n      this.get('table_name'),\n      this.tableModel.getOwnerName(),\n      this._userModel.isInsideOrg()\n    );\n  },\n\n  isCustomQueryApplied: function () {\n    return !SQLUtils.isSameQuery(\n      this.querySchemaModel.get('query'),\n      this.getDefaultQuery()\n    );\n  },\n\n  isReadOnly: function () {\n    var isTableReadOnly = this.tableModel.isReadOnly(this._userModel);\n    var hasCustomQuery = this.isCustomQueryApplied();\n    return isTableReadOnly || hasCustomQuery;\n  },\n\n  getTableModel: function () {\n    return this.tableModel;\n  },\n\n  fetchTable: function () {\n    if (!this.tableModel.get('id')) {\n      this.tableModel.fetch();\n    }\n  },\n\n  setTableName: function (name) {\n    if (!name) throw new Error('name is required');\n\n    this.set('table_name', name);\n    this.tableModel.set('name', name);\n    this.queryRowsCollection.setTableName(name);\n    this.querySchemaModel.set({\n      status: 'unfetched',\n      query: this.getDefaultQuery()\n    });\n  }\n\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar Utils = require('../helpers/utils');\n\nrequire('backbone-model-file-upload');\n\nmodule.exports = Backbone.Model.extend({\n  fileAttribute: 'filename',\n\n  defaults: {\n    type: '',\n    filename: '',\n    interval: 0,\n    progress: 0,\n    state: 'idle',\n    option: ''\n  },\n\n  _initBinds: function () {\n    this.bind('progress', function (progress) {\n      this.set({\n        progress: progress * 100,\n        state: 'uploading'\n      });\n    }, this);\n\n    this.bind('change:filename change:url', function () {\n      if (this.get('state') === 'error') {\n        this.set({ state: 'idle' });\n        this.unset('get_error_text', { silent: true });\n      }\n    }, this);\n\n    this.bind('error invalid', function (m, d) {\n      this.set({\n        state: 'error',\n        error_code: (d && d.error_code) || '',\n        get_error_text: {\n          title: _t('componentes.data.asset-model.invalid-import'),\n          what_about: (d && d.msg) || ''\n        }\n      }, { silent: true });\n      // We need this, if not validate will run again and again and again... :(\n      this.trigger('change');\n    }, this);\n  },\n\n  validate: function (attrs) {\n    if (!attrs) {\n      return;\n    }\n\n    if (attrs.type === 'filename') { // Number of files\n      if (attrs.filename && attrs.filename.length) {\n        return {\n          msg: _t('componentes.data.asset-model.one-file-per-upload')\n        };\n      }\n      // File extension\n      var name = attrs.filename.name;\n      var ext = name.substr(name.lastIndexOf('.') + 1);\n\n      if (ext) {\n        ext = ext.toLowerCase();\n      }\n\n      if (!_.contains(['jpg', 'png', 'gif', 'svg'], ext)) {\n        return {\n          msg: _t('componentes.data.asset-model.invalid-extension')\n        };\n      }\n    }\n\n    if (attrs.type === 'url') { // Valid URL?\n      if (!Utils.isURL(attrs.url)) {\n        return {\n          msg: _t('componentes.data.asset-model.invalid-url')\n        };\n      }\n    }\n  },\n\n  isValid: function () {\n    return (this.get('filename') || this.get('url')) && this.get('state') !== 'error';\n  },\n\n  upload: function () {\n    var self = this;\n\n    var options = {\n      kind: this.get('kind')\n    };\n\n    if (this.get('type') === 'file') {\n      options.filename = this.get('filename');\n    } else if (this.get('type') === 'url') {\n      options.filename = this.get('filename');\n    }\n\n    this.xhr = this.save(options, {\n      success: function (m) {\n        m.set('state', 'uploaded');\n      },\n\n      error: function (m, msg) {\n        var response;\n        var message = _t('componentes.data.asset-model.connection-error');\n\n        if (msg && msg.status === 429) {\n          response = JSON.parse(msg.responseText);\n          message = response.error;\n        } else if (msg && msg.status === 400) {\n          response = JSON.parse(msg.responseText);\n          message = response.error;\n        }\n\n        self.set({\n          state: 'error',\n          get_error_text: { title: _t('componentes.data.asset-model.error'), what_about: message }\n        });\n      },\n\n      complete: function () {\n        delete self.xhr;\n      }\n    });\n  },\n\n  stopUpload: function () {\n    if (this.xhr) this.xhr.abort();\n  }\n});\n",
    "var Backbone = require('backbone');\nvar AssetModel = require('./asset-model');\nvar checkAndBuildOpts = require('../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = Backbone.Collection.extend({\n  model: AssetModel,\n\n  url: function (method) {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('asset', method);\n    return baseUrl + '/api/' + version + '/users/' + this._userModel.get('id') + '/assets';\n  },\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  parse: function (resp, xhr) {\n    return resp.assets;\n  },\n\n  selectAll: function () {\n    this.each(function (mdl) {\n      mdl.set('state', 'selected');\n    });\n  },\n\n  deselectAll: function (m) {\n    this.each(function (mdl) {\n      if (mdl !== m && mdl.get('state') === 'selected') {\n        mdl.set('state', '');\n      }\n    });\n  }\n});\n",
    "var Backbone = require('backbone');\n\n/**\n * Custom sync method to only allow a single request at a time,\n * any prev ongoing request at a time of a sync call will be aborted.\n *\n * @example\n *   var MyModel = Backbone.Model.extend({\n *     // \n *     sync: syncAbort,\n */\nmodule.exports = function (method, self, opts) {\n  if (this._xhr) {\n    this._xhr.abort();\n  }\n\n  var xhr = this._xhr = Backbone.Model.prototype.sync.apply(this, arguments);\n  xhr.always(function () {\n    self._xhr = null;\n  });\n\n  return xhr;\n};\n",
    "var _ = require('underscore');\nvar Poller = require('./poller');\n\nvar ImportModelPoller = function (model) {\n  var POLLING_INTERVAL = 2000; // Interval time between poll checkings\n  var POLLING_INTERVAL_MULTIPLIER = 2.5;  // Multiply interval by this number\n  var POLLING_REQUESTS_BEFORE_INTERVAL_CHANGE = 30; // Max tries until interval change\n\n  var options = {\n    interval: function (numberOfRequests) {\n      if (numberOfRequests >= POLLING_REQUESTS_BEFORE_INTERVAL_CHANGE) {\n        return POLLING_INTERVAL * POLLING_INTERVAL_MULTIPLIER;\n      }\n      return POLLING_INTERVAL;\n    },\n    stopWhen: function (model) {\n      var state = model.get('state');\n      return (state === 'complete' || state === 'failure');\n    }\n  };\n\n  Poller.call(this, model, options);\n};\n\nImportModelPoller.prototype = _.extend({}, Poller.prototype);\n\nmodule.exports = ImportModelPoller;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar ImportModelPoller = require('./import-model-poller');\nvar SynchronizationModel = require('../synchronization-model');\n\n/**\n *  New import model that controls\n *  the state of an import\n *\n */\nmodule.exports = Backbone.Model.extend({\n\n  idAttribute: 'item_queue_id',\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n\n    this._initBinds();\n    this.poller = new ImportModelPoller(this);\n  },\n\n  urlRoot: function () {\n    var version = this._configModel.urlVersion('import');\n    var baseUrl = this._configModel.get('base_url');\n\n    return baseUrl + '/api/' + version + '/imports';\n  },\n\n  _initBinds: function () {\n    this.bind('change:item_queue_id', this._checkQueueId, this);\n  },\n\n  createImport: function (data) {\n    var d = this._prepareData(data);\n    this[d.interval === 0 ? '_createRegularImport' : '_createSyncImport'](d);\n  },\n\n  _checkQueueId: function () {\n    if (this.get('item_queue_id')) {\n      this.pollCheck();\n    }\n  },\n\n  _prepareData: function (data) {\n    var d = {\n      create_vis: data.create_vis,\n      privacy: data.privacy\n    };\n\n    var type = data.type;\n\n    if (type !== 'remote') {\n      _.extend(d, {\n        type_guessing: data.type_guessing,\n        content_guessing: data.content_guessing,\n        interval: data.interval\n      });\n    }\n\n    var service = data.service_name;\n\n    if (type === 'url') {\n      _.extend(d, {\n        url: data.value\n      });\n    }\n\n    if (type === 'remote') {\n      _.extend(d, {\n        type: 'remote',\n        interval: null,\n        remote_visualization_id: data.remote_visualization_id,\n        create_vis: false,\n        value: data.value\n      });\n    }\n\n    if (type === 'sql') {\n      _.extend(d, {\n        table_name: data.table_name,\n        sql: data.value\n      });\n    }\n\n    if (type === 'duplication') {\n      _.extend(d, {\n        table_name: data.table_name,\n        table_copy: data.value\n      });\n    }\n\n    if (type === 'service') {\n      // If service is Twitter, service_item_id should be\n      // sent stringified\n      var service_item_id = (service === 'twitter_search') ? JSON.stringify(data.service_item_id) : data.service_item_id;\n\n      if (data.user_defined_limits) {\n        d.user_defined_limits = data.user_defined_limits;\n      }\n\n      _.extend(d, {\n        value: data.value,\n        service_name: data.service_name,\n        service_item_id: service_item_id\n      });\n    }\n\n    return d;\n  },\n\n  _createSyncImport: function (d) {\n    var self = this;\n    this._synchronizationModel = new SynchronizationModel(d, {\n      configModel: this._configModel\n    });\n\n    this._synchronizationModel.save(null, {\n      success: function (m) {\n        self.set('item_queue_id', m.get('data_import').item_queue_id);\n      },\n      error: function (mdl, r, opts) {\n        self._setErrorState(r);\n      }\n    });\n  },\n\n  _createRegularImport: function (d) {\n    var self = this;\n\n    this.save(d, {\n      error: function (mdl, r, opts) {\n        self._setErrorState(r);\n      }\n    });\n  },\n\n  _setErrorState: function (r) {\n    var msg;\n    try {\n      msg = r && JSON.parse(r.responseText).errors.imports;\n    } catch (err) {\n      msg = _t('data.import-model.error-starting-import');\n    }\n    this.set({\n      state: 'failure',\n      get_error_text: {\n        title: _t('data.import-model.error-title'),\n        what_about: msg\n      }\n    });\n  },\n\n  pollCheck: function () {\n    this.poller.start();\n  },\n\n  destroyCheck: function () {\n    this.poller.stop();\n  }\n});\n",
    "var _ = require('underscore');\n\n/*\n * Periodically fetches a model/collection. It waits for ongoing\n * fetch requests before trying to fetch again. A stop condition\n * can be specified.\n *\n * Usage example:\n *\n * var poller = new Poller(model, {\n *   interval: 1000,\n *   stopWhen: function (model) {\n *     return model.get('state') === 'completed';\n *   }\n * });\n *\n * poller.start();\n *\n * // ...\n *\n * poller.stop();\n *\n */\nvar Poller = function (model, opts) {\n  this.model = model;\n  this.numberOfRequests = 0;\n  this.polling = false;\n  this.interval = opts.interval;\n  if (typeof this.interval !== 'function') {\n    this.interval = function () { return opts.interval; };\n  }\n  this.stopWhen = opts.stopWhen;\n  this.error = opts.error;\n  this.autoStart = opts.autoStart;\n\n  if (this.autoStart) {\n    this.start();\n  }\n};\n\nPoller.prototype.start = function () {\n  if (this.timeout) {\n    return;\n  }\n\n  this._scheduleFetch();\n};\n\nPoller.prototype._scheduleFetch = function () {\n  this.timeout = setTimeout(this._fetch.bind(this), this.interval(this.numberOfRequests));\n};\n\nPoller.prototype._fetch = function () {\n  var self = this;\n  if (!self.polling) {\n    self.polling = true;\n    self.model.fetch({\n      success: function () {\n        self.polling = false;\n        self.numberOfRequests++;\n        if (self._continuePolling()) {\n          self._scheduleFetch();\n        }\n      },\n      error: function (e) {\n        _.isFunction(self.error) && self.error(self.model);\n      }\n    });\n  }\n};\n\nPoller.prototype._continuePolling = function () {\n  return !this.stopWhen ||\n    (_.isFunction(this.stopWhen) && !this.stopWhen(this.model));\n};\n\nPoller.prototype.stop = function () {\n  this.polling = false;\n  clearTimeout(this.timeout);\n  delete this.timeout;\n};\n\nmodule.exports = Poller;\n",
    "var _ = require('underscore');\nvar camshaftReference = require('camshaft-reference').getVersion('latest');\nvar DefaultCartography = require('./default-cartography.json');\n\nvar SOURCE_NAMES_MAP = {}; // string -> array, e.g. {'intersection': ['source', 'target']}\nvar DEFAULT_MISSING_PARAM_VALUES = [undefined, null, '', NaN];\n\nmodule.exports = {\n  hasType: function (type) {\n    return !!camshaftReference.analyses[type];\n  },\n\n  paramsForType: function (type) {\n    if (!this.hasType(type)) throw new Error('no analysis params found for type: ' + type);\n\n    return _.clone(camshaftReference.analyses[type].params);\n  },\n\n  /**\n   * Validate raw form attrs\n   * @param {Object} formAttrs - e.g. {type: 'buffer', source: 'a0', radius: 'meh'}\n   * @return {Object, undefined} returns an object with keys as faulty input, e.g. {radius: 'invalid-value'} for above\n   */\n  validate: function (formAttrs) {\n    var errors = {};\n\n    var parsedAttrs = this.parse(formAttrs);\n    var params = this.paramsForType(formAttrs.type);\n\n    for (var name in params) {\n      var param = params[name];\n      var val = parsedAttrs[name];\n\n      if (!param.optional || val !== undefined) {\n        switch (param.type) {\n          case 'node':\n            if (!val) {\n              errors[name] = _t('data.analysis-definition-node-model.validation.invalid-source');\n            }\n            break;\n          case 'number':\n            if (isNaN(val)) {\n              errors[name] = _t('data.analysis-definition-node-model.validation.invalid-value');\n            }\n            break;\n          case 'enum':\n            if (!_.contains(param.values, val)) {\n              errors[name] = _t('data.analysis-definition-node-model.validation.invalid-enum', {expectedValues: JSON.stringify(param.values)});\n            }\n            break;\n          default:\n            if (val === null) {\n              errors[name] = _t('data.analysis-definition-node-model.validation.missing-required');\n            }\n        }\n      }\n    }\n\n    if (!_.isEmpty(errors)) {\n      return errors;\n    }\n  },\n\n  /**\n   * Get type-parsed attrs from the raw form attrs\n   * @param {Object} formAttrs - e.g. {type: 'buffer', source: 'a0 ', radius: '123', dissolved: 'false'}\n   * @return {Object} e.g. {type: 'buffer', source: 'a0', radius: 123, dissolved: false}\n   */\n  parse: function (formAttrs) {\n    var parsedAttrs = _.extend({}, formAttrs);\n    var params = this.paramsForType(formAttrs.type);\n\n    for (var name in params) {\n      var param = params[name];\n      var val = parsedAttrs[name];\n\n      if (param.optional && _.contains(DEFAULT_MISSING_PARAM_VALUES, val)) {\n        delete parsedAttrs[name];\n      } else {\n        switch (param.type) {\n          case 'node':\n            parsedAttrs[name] = (val || '').trim();\n            break;\n          case 'number':\n            parsedAttrs[name] = parseFloat(val, 10);\n            break;\n          case 'boolean':\n            parsedAttrs[name] = val === 'true' || val === true;\n            break;\n          default:\n            if (_.contains(DEFAULT_MISSING_PARAM_VALUES, val)) {\n              parsedAttrs[name] = null;\n            } else if (_.isString(val)) {\n              parsedAttrs[name] = val.trim();\n            }\n        }\n      }\n    }\n\n    return parsedAttrs;\n  },\n\n  getSourceNamesForAnalysisType: function (type) {\n    if (!SOURCE_NAMES_MAP[type]) {\n      var sourceNames = [];\n      var params = this.paramsForType(type);\n\n      for (var name in params) {\n        var param = params[name];\n        if (param.type === 'node') {\n          sourceNames.push(name);\n        }\n      }\n\n      SOURCE_NAMES_MAP[type] = sourceNames;\n    }\n\n    return SOURCE_NAMES_MAP[type];\n  },\n\n  getDefaultCartoCSSForType: function () {\n    return _.template([\n      \"#layer['mapnik::geometry_type'=1] {\",\n      '  marker-width: <%= point.fill.size.fixed %>;',\n      '  marker-fill: <%= point.fill.color.fixed %>;',\n      '  marker-fill-opacity: <%= point.fill.color.opacity %>;',\n      '  marker-line-color: <%= point.stroke.color.fixed %>;',\n      '  marker-line-width: <%= point.stroke.size.fixed %>;',\n      '  marker-line-opacity: <%= point.stroke.color.opacity %>;',\n      '  marker-placement: point;',\n      '  marker-type: ellipse;',\n      '  marker-allow-overlap: true;',\n      '}',\n      \"#layer['mapnik::geometry_type'=2] {\",\n      '  line-color: <%= line.stroke.color.fixed %>;',\n      '  line-width: <%= line.stroke.size.fixed %>;',\n      '  line-opacity: 1;',\n      '}',\n      \"#layer['mapnik::geometry_type'=3] {\",\n      '  polygon-fill: <%= polygon.fill.color.fixed %>;',\n      '  polygon-opacity: <%= polygon.fill.color.opacity %>;',\n      '  polygon-gamma: 0.5;',\n      '  line-color: <%= polygon.stroke.color.fixed%>;',\n      '  line-width: <%= polygon.stroke.size.fixed %>;',\n      '  line-opacity: <%= polygon.stroke.color.opacity %>;',\n      '  line-comp-op: soft-light;',\n      '}'\n    ].join('\\n'))(DefaultCartography.simple);\n  },\n\n  isValidInputGeometryForType: function (simpleGeometryType, analysisType) {\n    var validGeometries = this.getValidInputGeometriesForType(analysisType);\n    return _.contains(validGeometries, simpleGeometryType) || _.contains(validGeometries, '*');\n  },\n\n  getValidInputGeometriesForType: function (analysisType) {\n    var params = this.paramsForType(analysisType);\n\n    var geometries = [];\n\n    for (var name in params) {\n      var param = params[name];\n      if (param.type === 'node') {\n        geometries = _.union(geometries, param.geometry);\n      }\n    }\n\n    return geometries;\n  }\n};\n",
    "var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n  idAttribute: 'name'\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\n/**\n * Model for general frontend configuration.\n * Ported from old cdb.config, since we can't reuse the older model that's tied to v3 of cartodb.js\n *\n * Also, rather than putting it as a global object, it's intended to be instantiated at the entry point and passed as\n * a collaborator object the models that needs it, e.g.:\n * var myModel = new MyModel({ id: 123,  }, {\n *   configModel: configModel\n * })\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    base_url: '/CHANGEME' // expected to be set when model is created\n  },\n\n  urlVersion: function (modelName, method, defaultVersion) {\n    method = method || '';\n    var version = this.get(modelName + '_' + method + '_url_version');\n    return version || defaultVersion || 'v1';\n  },\n\n  /**\n   * @param {String} [version=v2] Version of API to use\n   * @return {String} the full sql api url, including the api endpoint, e.g. http://user.carto.com/api/v2/sql\n   */\n  getSqlApiUrl: function (version) {\n    version = version || 'v2';\n    return this._getSqlApiBaseUrl() + '/api/' + version + '/sql';\n  },\n\n  /**\n   * @return {String} returns the base url to compose the final url, e.g. http://user.carto.com/\n   */\n  _getSqlApiBaseUrl: function () {\n    var url;\n    if (this.get('sql_api_template')) {\n      url = this.get('sql_api_template').replace('{user}', this.get('user_name'));\n    } else {\n      url = this.get('sql_api_protocol') + '://' +\n        this.get('user_name') + '.' +\n        this.get('sql_api_domain') + ':' +\n        this.get('sql_api_port');\n    }\n    return url;\n  },\n\n  dataServiceEnabled: function (name) {\n    var dataServices = this.get('dataservices_enabled');\n    if (!dataServices || !_.size(dataServices) || !name) {\n      return false;\n    }\n    return !!dataServices[name];\n  }\n});\n",
    "/* global Image */\n\nvar Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  getAttributes: function () {\n    return JSON.parse(JSON.stringify(this.attributes));\n  },\n\n  _generateClassName: function (urlTemplate) {\n    if (urlTemplate) {\n      return urlTemplate.replace(/\\s+/g, '').replace(/[^a-zA-Z_0-9 ]/g, '').toLowerCase();\n    } else return '';\n  },\n\n  parse: function (data) {\n    var attrs = {};\n\n    _.extend(attrs, data.options, {\n      id: data.id,\n      className: this._generateClassName(data.options.urlTemplate),\n      type: 'Tiled',\n      order: data.order,\n      parent_id: data.parent_id\n    });\n\n    return attrs;\n  },\n\n  toJSON: function () {\n    var layerOptions = _.clone(_.omit(this.attributes, ['order', 'id']));\n    var json = {\n      kind: 'tiled',\n      options: layerOptions,\n      order: this.get('order'),\n      id: this.id\n    };\n\n    return json;\n  },\n\n  getValue: function () {\n    return this.get('val');\n  },\n\n  /**\n   * validateTemplateURL - Validates current urlTemplate of layer.\n   *\n   * @param {Object} callbacks with success and error functions defined to be called depending on validation outcome.\n   */\n  validateTemplateURL: function (callbacks) {\n    var subdomains = ['a', 'b', 'c'];\n    var image = new Image();\n    image.onload = callbacks.success;\n    image.onerror = callbacks.error;\n    image.src = this.get('urlTemplate').replace(/\\{s\\}/g, function () {\n      return subdomains[Math.floor(Math.random() * 3)];\n    })\n      .replace(/\\{x\\}/g, '0')\n      .replace(/\\{y\\}/g, '0')\n      .replace(/\\{z\\}/g, '0');\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar CustomBaselayerModel = require('./custom-baselayer-model');\nvar checkAndBuildOpts = require('../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'currentUserId'\n];\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (d, opts) {\n    var self = opts.collection;\n\n    var m = new CustomBaselayerModel(d, {\n      parse: true,\n      collection: self\n    });\n\n    return m;\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('user');\n    return baseUrl + '/api/' + version + '/users/' + this._currentUserId + '/layers';\n  },\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  isCustomCategory: function () {\n    var custom = this.where(function (mdl) {\n      return ['NASA', 'TileJSON', 'WMS', 'Mapbox', 'Custom', undefined].some(function (category) {\n        return mdl.get('category') === category;\n      });\n    });\n    return custom;\n  },\n\n  getSelected: function () {\n    return this.findWhere({ selected: true });\n  },\n\n  hasCustomBaseLayer: function (className) {\n    if (!className) return;\n\n    var customBaseLayer = this.where({ className: className });\n\n    return customBaseLayer.length > 0;\n  }\n\n});\n",
    "module.exports={\n  \"simple\": {\n\n    \"point\": {\n      \"fill\": {\n        \"size\": {\n          \"fixed\": 7\n        },\n        \"color\": {\n          \"fixed\": \"#FFB927\",\n          \"opacity\": 0.9\n        }\n      },\n      \"stroke\": {\n        \"size\": {\n          \"fixed\": 1\n        },\n        \"color\": {\n          \"fixed\": \"#FFF\",\n          \"opacity\": 1\n        }\n      }\n    },\n\n    \"line\": {\n      \"fill\": {},\n      \"stroke\": {\n        \"size\": {\n          \"fixed\": 1.5\n        },\n        \"color\": {\n          \"fixed\": \"#3EBCAE\",\n          \"opacity\": 1\n        }\n      }\n    },\n\n    \"polygon\": {\n      \"fill\": {\n        \"color\": {\n          \"fixed\": \"#374C70\",\n          \"opacity\": 0.9\n        }\n      },\n      \"stroke\": {\n        \"size\": {\n          \"fixed\": 1\n        },\n        \"color\": {\n          \"fixed\": \"#FFF\",\n          \"opacity\": 0.5\n        }\n      }\n    }\n  }\n}\n",
    "module.exports={\n  \"fill\": {\n    \"size\": {\n      \"fixed\": 7\n    },\n    \"color\": {\n      \"fixed\": \"#FFB927\",\n      \"opacity\": 0.9\n    }\n  },\n  \"stroke\": {\n    \"size\": {\n      \"fixed\": 1\n    },\n    \"color\": {\n      \"fixed\": \"#FFF\",\n      \"opacity\": 1\n    }\n  },\n  \"blending\": \"none\",\n  \"aggregation\": {},\n  \"labels\": {\n    \"enabled\": false,\n    \"attribute\": null,\n    \"font\": \"DejaVu Sans Book\",\n    \"fill\": {\n      \"size\": {\n        \"fixed\": 10\n      },\n      \"color\": {\n        \"fixed\": \"#FFFFFF\",\n        \"opacity\": 1\n      }\n    },\n    \"halo\": {\n      \"size\": {\n        \"fixed\": 1\n      },\n      \"color\": {\n        \"fixed\": \"#6F808D\",\n        \"opacity\": 1\n      }\n    },\n    \"offset\": -10,\n    \"overlap\": true,\n    \"placement\": \"point\"\n  }\n}\n",
    "var Backbone = require('backbone');\n\n/**\n * Model for general editor configuration.\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    edition: false,\n    disabled: false\n  },\n  isEditing: function () {\n    return !!this.get('edition');\n  },\n  isDisabled: function () {\n    return !!this.get('disabled');\n  }\n});\n",
    "var MAP = {\n  'st_multipolygon': 'polygon',\n  'st_polygon': 'polygon',\n  'st_multilinestring': 'line',\n  'st_linestring': 'line',\n  'st_multipoint': 'point',\n  'st_point': 'point'\n};\n\n/**\n * @param {String} val e.g. 'ST_MultiPoint'\n * @return {String} e.g. 'point'\n */\nmodule.exports = function (val) {\n  return MAP[val.toLowerCase()];\n};\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar syncAbort = require('./backbone/sync-abort');\nvar UserModel = require('./user-model');\nvar GroupModel = require('./group-model');\n\n/**\n * A collection of Grantable objects.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, options) {\n    var type = attrs.type;\n    var configModel = attrs.configModel;\n    options = _.extend(options, {\n      configModel: configModel\n    });\n\n    if (attrs.model) {\n      attrs = _.extend({}, attrs, attrs.model);\n    }\n\n    if (type === 'user') {\n      return new UserModel(_.omit(attrs, 'configModel'), options);\n    } else if (type === 'group') {\n      return new GroupModel(_.omit(attrs, 'configModel'), options);\n    }\n  },\n\n  sync: syncAbort,\n\n  url: function (method) {\n    var baseUrl = this.configModel.get('base_url');\n    var version = this.configModel.urlVersion('organizationGrantables', method);\n    return baseUrl + '/api/' + version + '/organization/' + this.organization.id + '/grantables';\n  },\n\n  initialize: function (users, opts) {\n    if (!opts.organization) throw new Error('Organization is required');\n    if (!opts.currentUserId) throw new Error('currentUserId is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this.configModel = opts.configModel;\n    this.organization = opts.organization;\n    this.currentUserId = opts.currentUserId;\n  },\n\n  parse: function (response) {\n    this.trigger('fetched', this);\n    this.total_entries = response.total_entries;\n\n    return _.reduce(response.grantables, function (memo, m) {\n      if (m.id === this.currentUserId) {\n        this.total_entries--;\n      } else {\n        m.organization = this.organization;\n        m.configModel = this.configModel;\n        memo.push(m);\n      }\n      return memo;\n    }, [], this);\n  },\n\n  fetch: function (opts) {\n    opts = opts || {};\n    this.trigger('fetching', this);\n    opts.error = function (model, response) {\n      this.trigger('error', this);\n    }.bind(this);\n\n    return Backbone.Collection.prototype.fetch.call(this, opts);\n  },\n\n  totalCount: function () {\n    return this.total_entries;\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar UsersGroup = require('./users-group-collection');\n\n/**\n * Model representing a group.\n * Expected to be used in the context of a groups collection (e.g. OrganizationGroups),\n * which defines its API endpoint path.\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    display_name: ''\n  },\n\n  initialize: function (attrs, opts) {\n    this.parse(attrs || {}, opts); // handle given attrs in the same way as for .fetch()\n  },\n\n  parse: function (attrs, opts) {\n    this.users = new UsersGroup(attrs.users, {\n      group: this,\n      configModel: opts.configModel,\n      organization: opts.organization\n    });\n\n    return attrs;\n  }\n});\n",
    "var InfowindowDefinitionModel = require('./infowindow-definition-model');\n\nmodule.exports = InfowindowDefinitionModel.extend({\n\n  defaults: {\n    template_name: '',\n    latlng: [0, 0],\n    offset: [28, 0], // offset of the tip calculated from the bottom left corner\n    maxHeight: 180, // max height of the content, not the whole infowindow\n    autoPan: true,\n    template: '',\n    content: '',\n    visibility: false,\n    alternative_names: { },\n    fields: null, // contains the fields displayed in the infowindow,\n    width: 226,\n    headerColor: {\n      color: {\n        fixed: '#35AAE5',\n        opacity: 1\n      }\n    }\n  },\n\n  TEMPLATES: {\n    infowindow_light: require('../mustache-templates/infowindows/infowindow_light.jst.mustache'),\n    infowindow_dark: require('../mustache-templates/infowindows/infowindow_dark.jst.mustache'),\n    infowindow_color: require('../mustache-templates/infowindows/infowindow_color.jst.mustache'),\n    infowindow_header_with_image: require('../mustache-templates/infowindows/infowindow_header_with_image.jst.mustache'),\n    custom_infowindow_light: require('../mustache-templates/infowindows_custom/infowindow_light.jst.mustache'),\n    custom_infowindow_dark: require('../mustache-templates/infowindows_custom/infowindow_dark.jst.mustache'),\n    custom_infowindow_color: require('../mustache-templates/infowindows_custom/infowindow_color.jst.mustache'),\n    custom_infowindow_header_with_image: require('../mustache-templates/infowindows_custom/infowindow_header_with_image.jst.mustache')\n  },\n\n  _transformTemplate: function (template) {\n    var fixed = this.get('headerColor').color.fixed;\n\n    return template.replace('background: #35AAE5', 'background: ' + fixed);\n  },\n\n  setTemplate: function (templateName) {\n    var template = (typeof (this.TEMPLATES[templateName]) === 'undefined') ? '' : this.TEMPLATES[templateName];\n\n    if (templateName === 'infowindow_color') {\n      template = this._transformTemplate(template);\n    }\n\n    var attrs = {\n      'template_name': templateName,\n      'template': template,\n      'template_type': 'mustache'\n    };\n\n    if (templateName === '') {\n      attrs.fields = [];\n    }\n\n    this.set(attrs);\n  },\n\n  isEmptyTemplate: function () {\n    var isEmpty = this.fieldCount() === 0;\n    return this.hasTemplate() && isEmpty;\n  },\n\n  setDefault: function () {\n    this.setTemplate(this.defaults.template_name);\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar $ = require('jquery');\n\nmodule.exports = Backbone.Model.extend({\n\n  SYSTEM_COLUMNS: ['the_geom', 'the_geom_webmercator', 'created_at', 'updated_at', 'cartodb_id', 'cartodb_georef_status'],\n\n  TEMPLATES: {},\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n  },\n\n  clearFields: function () {\n    this.set({ 'fields': [] });\n  },\n\n  saveFields: function (where) {\n    where = where || 'old_fields';\n    this.set(where, _.clone(this.get('fields')));\n  },\n\n  fieldCount: function () {\n    var fields = this.get('fields');\n    if (!fields) return 0;\n    return fields.length;\n  },\n\n  restoreFields: function (whiteList, from) {\n    from = from || 'old_fields';\n    var fields = this.get(from);\n    if (whiteList) {\n      fields = fields.filter(function (f) {\n        return _.contains(whiteList, f.name);\n      });\n    }\n    if (fields && fields.length) {\n      this._setFields(fields);\n    }\n    this.unset(from);\n  },\n\n  containsField: function (fieldName) {\n    var fields = this.get('fields') || [];\n    return _.contains(_(fields).pluck('name'), fieldName);\n  },\n\n  getFieldProperty: function (fieldName, k) {\n    if (this.containsField(fieldName)) {\n      var fields = this.get('fields') || [];\n      var idx = _.indexOf(_(fields).pluck('name'), fieldName);\n      return fields[idx][k];\n    }\n    return null;\n  },\n\n  setFieldProperty: function (fieldName, k, v) {\n    if (this.containsField(fieldName)) {\n      var fields = this._cloneFields() || [];\n      var idx = _.indexOf(_(fields).pluck('name'), fieldName);\n      fields[idx][k] = v;\n      this._setFields(fields);\n    }\n    return this;\n  },\n\n  _cloneFields: function () {\n    return _(this.get('fields')).map(function (v) {\n      return _.clone(v);\n    });\n  },\n\n  _setFields: function (f) {\n    f.sort(function (a, b) { return a.position - b.position; });\n    this.set({ 'fields': f });\n  },\n\n  sortFields: function () {\n    this.get('fields').sort(function (a, b) { return a.position - b.position; });\n  },\n\n  _addField: function (fieldName, at) {\n    var dfd = $.Deferred();\n    if (!this.containsField(fieldName)) {\n      var fields = this.get('fields');\n\n      if (fields) {\n        at = at === undefined ? fields.length : at;\n        fields.push({ name: fieldName, title: true, position: at });\n      } else {\n        at = at === undefined ? 0 : at;\n        this.set('fields', [{ name: fieldName, title: true, position: at }], { silent: true });\n      }\n    }\n    dfd.resolve();\n    return dfd.promise();\n  },\n\n  addField: function (fieldName, at) {\n    var self = this;\n    $.when(this._addField(fieldName, at)).then(function () {\n      self.sortFields();\n      self.trigger('add:fields');\n      self.trigger('change:fields', self, self.get('fields'));\n      self.trigger('change', self);\n    });\n    return this;\n  },\n\n  removeField: function (fieldName) {\n    if (this.containsField(fieldName)) {\n      var fields = this._cloneFields() || [];\n      var idx = _.indexOf(_(fields).pluck('name'), fieldName);\n      if (idx >= 0) {\n        fields.splice(idx, 1);\n      }\n      this._setFields(fields);\n      this.trigger('remove:fields');\n    }\n    return this;\n  },\n\n  getAlternativeName: function (fieldName) {\n    return this.get('alternative_names') && this.get('alternative_names')[fieldName];\n  },\n\n  setAlternativeName: function (fieldName, alternativeName) {\n    var alternativeNames = _.clone(this.get('alternative_names') || {});\n\n    alternativeNames[fieldName] = alternativeName;\n    this.set({ 'alternative_names': alternativeNames });\n    this.trigger('change:alternative_names');\n  },\n\n  getFieldPos: function (fieldName) {\n    var p = this.getFieldProperty(fieldName, 'position');\n    if (p === undefined) {\n      return Number.MAX_VALUE;\n    }\n    return p;\n  },\n\n  unsetTemplate: function () {\n    this.setTemplate('');\n  },\n\n  setTemplate: function (templateName) {\n    var template = (typeof (this.TEMPLATES[templateName]) === 'undefined') ? '' : this.TEMPLATES[templateName];\n\n    var attrs = {\n      'template_name': templateName,\n      'template': template,\n      'template_type': 'mustache'\n    };\n\n    if (templateName === '') {\n      attrs.fields = [];\n    }\n\n    this.set(attrs);\n  },\n\n  getTemplate: function () {\n    var template_name = this.get('template_name');\n\n    if (template_name !== '') {\n      return this.TEMPLATES['custom_' + template_name];\n    } else {\n      return this.get('template');\n    }\n  },\n\n  hasTemplate: function () {\n    return !!this.get('template_name') && this.TEMPLATES[this.get('template_name')];\n  },\n\n  isCustomTemplate: function () {\n    return this.get('template_name') === '' && this.get('template') !== '';\n  }\n\n});\n",
    "var InfowindowDefinitionModel = require('./infowindow-definition-model');\n\nmodule.exports = InfowindowDefinitionModel.extend({\n\n  defaults: {\n    vertical_offset: 0,\n    horizontal_offset: 0,\n    position: 'top|center',\n    template_name: '',\n    template: ''\n  },\n\n  TEMPLATES: {\n    tooltip_dark: require('../mustache-templates/tooltips/tooltip_dark.jst.mustache'),\n    tooltip_light: require('../mustache-templates/tooltips/tooltip_light.jst.mustache'),\n    custom_tooltip_dark: require('../mustache-templates/tooltips_custom/tooltip_dark.jst.mustache'),\n    custom_tooltip_light: require('../mustache-templates/tooltips_custom/tooltip_light.jst.mustache')\n  },\n\n  setDefault: function () {\n    this.setTemplate(this.defaults.template_name);\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar syncAbort = require('./backbone/sync-abort');\nvar StyleDefinitionModel = require('../editor/style/style-definition-model');\nvar StyleCartoCSSModel = require('../editor/style/style-cartocss-model');\nvar DataSQLModel = require('../editor/layers/layer-content-views/data/data-sql-model');\nvar layerTypesAndKinds = require('./layer-types-and-kinds');\nvar InfowindowModel = require('./infowindow-click-model');\nvar TooltipModel = require('./infowindow-hover-model');\nvar TableNameUtils = require('../helpers/table-name-utils');\n\n// from_layer_id and from_letter are not attributes for the model, but are sent to the layer creation\n// endpoint when creating a layer from an existing analysis node (see user-actions)\nvar OWN_ATTR_NAMES = ['id', 'order', 'infowindow', 'tooltip', 'error', 'from_layer_id', 'from_letter'];\n\n/**\n * Model to edit a layer definition.\n * Should always exist as part of a LayerDefinitionsCollection, so its URL is given from there.\n */\nmodule.exports = Backbone.Model.extend({\n\n  /**\n   * @override {Backbone.prototype.sync} abort ongoing request if there is any\n   */\n  sync: syncAbort,\n\n  parse: function (r, opts) {\n    r.options = r.options || {};\n\n    // Flatten the attrs, to avoid having this.get('options').foobar internally\n    var attrs = _\n      .defaults(\n        _.pick(r, OWN_ATTR_NAMES),\n        _.omit(r.options, ['query', 'tile_style'])\n    );\n\n    // Only use type on the frontend, it will be mapped back when the model is serialized (see .toJSON)\n    attrs.type = attrs.type || layerTypesAndKinds.getType(r.kind);\n\n    // Map API endpoint attrs to the new names used client-side (cartodb.js in particular)\n    if (r.options.tile_style) {\n      attrs.cartocss = r.options.tile_style;\n    }\n    if (r.options.query) {\n      attrs.sql = r.options.query;\n    }\n\n    if (r.infowindow) {\n      if (!this.infowindowModel) {\n        this.infowindowModel = new InfowindowModel(r.infowindow, {\n          configModel: opts.configModel || this._configModel\n        });\n      }\n    }\n    if (r.tooltip) {\n      if (!this.tooltipModel) {\n        this.tooltipModel = new TooltipModel(r.tooltip, {\n          configModel: opts.configModel || this._configModel\n        });\n      }\n    }\n    if (r.options.table_name) {\n      // Set autostyle as false if it doesn't contain any id\n      attrs.autoStyle = attrs.autoStyle || false;\n\n      if (!this.styleModel) {\n        this.styleModel = new StyleDefinitionModel(r.options.style_properties, {\n          parse: true\n        });\n\n        this.cartocssModel = new StyleCartoCSSModel({\n          content: attrs.cartocss\n        }, {\n          history: r.options.cartocss_history || r.options.tile_style_history\n        });\n      }\n\n      if (!this.sqlModel) {\n        this.sqlModel = new DataSQLModel({\n          content: attrs.sql\n        }, {\n          history: r.options.sql_history\n        });\n      }\n    }\n\n    // Flatten the rest of the attributes\n    return attrs;\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n\n    this.on('change:source change:sql', this._onPosibleLayerSchemaChanged, this);\n\n    if (this.styleModel) {\n      this.styleModel.bind('change:type change:animated', function () {\n        if (this.styleModel.isAggregatedType() || this.styleModel.isAnimation()) {\n          // setTemplate will clear fields\n          this.infowindowModel && this.infowindowModel.unsetTemplate();\n          this.tooltipModel && this.tooltipModel.unsetTemplate();\n        }\n      }, this);\n    }\n  },\n\n  save: function (attrs, options) {\n    // We assume that if the layer is saved, we have to disable autostyle\n    var autoStyleAttrs = {\n      autoStyle: false\n    };\n\n    // But if the layer is saved with shouldPreserveAutoStyle option, we should preserve autostyle\n    if (options && options.shouldPreserveAutoStyle) {\n      delete autoStyleAttrs.autoStyle;\n    } else if (this.get('autoStyle')) {\n      this.styleModel && this.styleModel.resetPropertiesFromAutoStyle();\n    }\n\n    attrs = _.extend(\n      {},\n      autoStyleAttrs,\n      attrs\n    );\n\n    return Backbone.Model.prototype.save.apply(this, [attrs, options]);\n  },\n\n  toJSON: function () {\n    // Un-flatten the internal attrs to the datastructure that's expected by the API endpoint\n    var options = _.omit(this.attributes, OWN_ATTR_NAMES.concat(['cartocss', 'sql', 'autoStyle']));\n\n    // Map back internal attrs to the expected attrs names by the API endpoint\n    var cartocss = this.get('cartocss');\n\n    if (cartocss) {\n      options.tile_style = cartocss;\n    }\n    var sql = this.get('sql');\n    if (sql) {\n      options.query = sql;\n    }\n\n    var d = {\n      kind: layerTypesAndKinds.getKind(this.get('type')),\n      options: options\n    };\n\n    var infowindowData = this.infowindowModel && this.infowindowModel.toJSON();\n    if (!_.isEmpty(infowindowData)) {\n      d.infowindow = this.infowindowModel.toJSON();\n    }\n\n    var tooltipData = this.tooltipModel && this.tooltipModel.toJSON();\n    if (!_.isEmpty(tooltipData)) {\n      d.tooltip = this.tooltipModel.toJSON();\n    }\n\n    if (this.styleModel && !this.styleModel.isAutogenerated()) {\n      d.options.style_properties = this.styleModel.toJSON();\n    }\n\n    if (this.cartocssModel) {\n      d.options.cartocss_history = this.cartocssModel.getHistory();\n    }\n\n    if (this.sqlModel) {\n      d.options.sql_history = this.sqlModel.getHistory();\n    }\n\n    var attributes = _.omit(this.attributes, 'infowindow', 'tooltip', 'options', 'error', 'autoStyle');\n\n    return _.defaults(\n      d,\n      _.pick(attributes, OWN_ATTR_NAMES)\n    );\n  },\n\n  canBeDeletedByUser: function () {\n    return this.collection.getNumberOfDataLayers() > 1 && this.isDataLayer() &&\n      (this._canBeFoldedUnderAnotherLayer() || !this._isAllDataLayersDependingOnAnyAnalysisOfThisLayer());\n  },\n\n  isOwnerOfAnalysisNode: function (nodeModel) {\n    return nodeModel && nodeModel.letter() === this.get('letter');\n  },\n\n  ownedPrimaryAnalysisNodes: function () {\n    var nodeDefModel = this.getAnalysisDefinitionNodeModel();\n    return this.isOwnerOfAnalysisNode(nodeDefModel)\n      ? nodeDefModel.linkedListBySameLetter()\n      : [];\n  },\n\n  getName: function () {\n    return this.get('name') ||\n    this.get('table_name_alias') ||\n    this.get('table_name');\n  },\n\n  getTableName: function () {\n    return this.get('table_name') || '';\n  },\n\n  containsNode: function (other) {\n    var nodeDefModel = this.getAnalysisDefinitionNodeModel();\n    return nodeDefModel && nodeDefModel.containsNode(other);\n  },\n\n  getAnalysisDefinitionNodeModel: function () {\n    return this.findAnalysisDefinitionNodeModel(this.get('source'));\n  },\n\n  findAnalysisDefinitionNodeModel: function (id) {\n    return this.collection && this.collection.findAnalysisDefinitionNodeModel(id);\n  },\n\n  _onPosibleLayerSchemaChanged: function (eventName, attrs, options) {\n    // Used to avoid resetting styles on source_id changes when we have saved styles for the node\n    if (options && options.ignoreSchemaChange) {\n      return;\n    }\n\n    if (this.infowindowModel) {\n      this.infowindowModel.clearFields();\n    }\n    if (this.tooltipModel) {\n      this.tooltipModel.clearFields();\n    }\n    if (this.styleModel) {\n      this.styleModel.resetStyles();\n    }\n  },\n\n  toggleVisible: function () {\n    this.set('visible', !this.get('visible'));\n  },\n\n  toggleCollapse: function () {\n    this.set('collapsed', !this.get('collapsed'));\n  },\n\n  hasAnalyses: function () {\n    return this.getNumberOfAnalyses() > 0;\n  },\n\n  getNumberOfAnalyses: function () {\n    var analysisNode = this.getAnalysisDefinitionNodeModel();\n    var count = 0;\n\n    while (analysisNode && this.isOwnerOfAnalysisNode(analysisNode)) {\n      analysisNode = analysisNode.getPrimarySource();\n\n      if (analysisNode) {\n        count += 1;\n      }\n    }\n\n    return count;\n  },\n\n  getQualifiedTableName: function () {\n    var userName = this.get('user_name') || this.collection.userModel.get('username');\n    return TableNameUtils.getQualifiedTableName(\n      this.getTableName(),\n      userName,\n      this.collection.userModel.isInsideOrg()\n    );\n  },\n\n  getColumnNamesFromSchema: function () {\n    return this._getQuerySchemaModel().getColumnNames();\n  },\n\n  _getQuerySchemaModel: function () {\n    var nodeDefModel = this.getAnalysisDefinitionNodeModel();\n    return nodeDefModel.querySchemaModel;\n  },\n\n  isDataLayer: function () {\n    var layerType = this.get('type');\n    return layerTypesAndKinds.isCartoDBType(layerType) ||\n      layerTypesAndKinds.isTorqueType(layerType);\n  },\n\n  isTorqueLayer: function () {\n    return this.get('type') === 'torque';\n  },\n\n  _canBeFoldedUnderAnotherLayer: function () {\n    var thisNodeDefModel = this.getAnalysisDefinitionNodeModel();\n\n    return this.collection.any(function (m) {\n      if (m !== this && m.isDataLayer()) {\n        var otherNodeDefModel = m.getAnalysisDefinitionNodeModel();\n        if (otherNodeDefModel === thisNodeDefModel) return true;\n\n        var lastNode = _.last(otherNodeDefModel.linkedListBySameLetter());\n        return lastNode.getPrimarySource() === thisNodeDefModel;\n      }\n    }, this);\n  },\n\n  _isAllDataLayersDependingOnAnyAnalysisOfThisLayer: function () {\n    var nodeDefModel = this.getAnalysisDefinitionNodeModel();\n    if (!nodeDefModel) return false;\n    if (!this.isOwnerOfAnalysisNode(nodeDefModel)) return false;\n\n    var linkedNodesList = nodeDefModel.linkedListBySameLetter();\n\n    return this.collection.chain()\n      .filter(function (m) {\n        return m !== this && !!m.get('source');\n      }, this)\n      .all(function (m) {\n        return _.any(linkedNodesList, function (node) {\n          return m.containsNode(node);\n        });\n      }, this)\n      .value();\n  },\n\n  getAllDependentLayers: function () {\n    var self = this;\n    var layersCount = 0;\n\n    var layerDefinitionsCollectionModels = self.collection.models;\n\n    for (var i = 0; i < layerDefinitionsCollectionModels.length; i++) {\n      var layer = layerDefinitionsCollectionModels[i];\n      var dependentAnalysis = false;\n\n      if (layer !== self) {\n        var analysisNode = layer.getAnalysisDefinitionNodeModel();\n\n        while (analysisNode) {\n          if (self.isOwnerOfAnalysisNode(analysisNode)) {\n            dependentAnalysis = true;\n          }\n          analysisNode = analysisNode.getPrimarySource();\n        }\n\n        if (dependentAnalysis) {\n          layersCount += 1;\n        }\n      }\n    }\n    return layersCount;\n  },\n\n  matchesAttrs: function (otherAttrs) {\n    if (this.get('type') !== otherAttrs.type) {\n      return false;\n    }\n\n    if (layerTypesAndKinds.isTiledType(otherAttrs.type)) {\n      return this.get('name') === otherAttrs.name &&\n        this.get('urlTemplate') === otherAttrs.urlTemplate;\n    }\n\n    if (layerTypesAndKinds.isGMapsBase(otherAttrs.type)) {\n      return this.get('name') === otherAttrs.name &&\n        this.get('baseType') === otherAttrs.baseType &&\n          this.get('style') === otherAttrs.style;\n    }\n\n    if (layerTypesAndKinds.isPlainType(otherAttrs.type)) {\n      return this.get('color') === otherAttrs.color;\n    }\n\n    return false;\n  },\n\n  canBeGeoreferenced: function () {\n    var hasGeocodingAnalysisApplied = function () {\n      var analysisNode = this.getAnalysisDefinitionNodeModel();\n\n      if (analysisNode && analysisNode.get('type') === 'geocoding') {\n        return true;\n      }\n\n      while (analysisNode && this.isOwnerOfAnalysisNode(analysisNode)) {\n        analysisNode = analysisNode.getPrimarySource();\n\n        if (analysisNode && analysisNode.get('type') === 'geocoding') {\n          return true;\n        }\n      }\n\n      return false;\n    }.bind(this);\n\n    var analysisDefinitionNodeModel = this.getAnalysisDefinitionNodeModel();\n    return !hasGeocodingAnalysisApplied() &&\n           !analysisDefinitionNodeModel.queryGeometryModel.hasValue() &&\n           !analysisDefinitionNodeModel.isCustomQueryApplied() &&\n           !analysisDefinitionNodeModel.queryRowsCollection.isEmpty();\n  }\n});\n",
    "// Types\nvar PLAIN = 'Plain';\nvar CARTODB = 'CartoDB';\nvar TILED = 'Tiled';\nvar TORQUE = 'torque';\nvar GMAPSBASE = 'GMapsBase';\nvar WMS = 'WMS';\n\n// Values of `kind` attribute that the backend/DB knows about\nvar KIND_TO_TYPE_MAP = {\n  'background': PLAIN,\n  'carto': CARTODB,\n  'gmapsbase': GMAPSBASE,\n  'tiled': TILED,\n  'torque': TORQUE,\n  'wms': WMS\n};\n\nmodule.exports = {\n  getType: function (kind) {\n    var type = KIND_TO_TYPE_MAP[kind];\n\n    if (!type) {\n      throw new Error('no type found for given kind ' + kind);\n    }\n\n    return type;\n  },\n\n  getKind: function (type) {\n    if (!type) {\n      throw new Error('no kind found for given type ' + type);\n    }\n\n    var kind;\n    for (kind in KIND_TO_TYPE_MAP) {\n      if (KIND_TO_TYPE_MAP[kind] === type) {\n        break;\n      }\n    }\n\n    return kind;\n  },\n\n  isKindDataLayer: function (kind) {\n    var type = KIND_TO_TYPE_MAP[kind];\n    return this.isTypeDataLayer(type);\n  },\n\n  isTypeDataLayer: function (type) {\n    return this.isCartoDBType(type) || this.isTorqueType(type);\n  },\n\n  isCartoDBType: function (type) {\n    return type === CARTODB;\n  },\n\n  isTorqueType: function (type) {\n    return type === TORQUE;\n  },\n\n  isTiledType: function (type) {\n    return type === TILED;\n  },\n\n  isPlainType: function (type) {\n    return type === PLAIN;\n  },\n\n  isGMapsBase: function (type) {\n    return type === GMAPSBASE;\n  }\n};\n",
    "var Backbone = require('backbone');\nvar AssetModel = require('./asset-model');\nvar checkAndBuildOpts = require('../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'orgId'\n];\n\nmodule.exports = Backbone.Collection.extend({\n  model: AssetModel,\n\n  url: function (method) {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('organization-assets', method);\n    return baseUrl + '/api/' + version + '/organization/' + this._orgId + '/assets';\n  },\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  deselectAll: function (m) {\n    this.each(function (mdl) {\n      if (mdl !== m && mdl.get('state') === 'selected') {\n        mdl.set('state', '');\n      }\n    });\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\n/**\n *  Organization info model\n *\n */\nmodule.exports = Backbone.Model.extend({\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v1/org';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n\n    if (!_.isEmpty(this.get('owner'))) {\n      this._ownerModel = new Backbone.Model(\n        _.omit(this.get('owner'), 'organization')\n      );\n    }\n  },\n\n  getOwnerId: function () {\n    return this._ownerModel && this._ownerModel.get('id');\n  },\n\n  getOwnerEmail: function () {\n    return this._ownerModel && this._ownerModel.get('email');\n  },\n\n  isOrgAdmin: function (user) {\n    return this.getOwnerId() === user.get('id') || !!_.find(this.get('admins'), function (u) {\n      return u.id === user.get('id');\n    });\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar Utils = require('../helpers/utils');\nvar UserModel = require('./user-model');\nvar OrganizationModel = require('./organization-model');\nvar GroupModel = require('./group-model');\nvar ACLItemModel = require('./acl-item-model');\nvar READ_ONLY = 'r';\nvar READ_WRITE = 'rw';\n\n/**\n * manages a cartodb permission object, it contains:\n * - owner: an UserModel instance\n * - acl: a collection which includes the user and their permission.\n *\n *   see https://github.com/Vizzuality/cartodb-management/wiki/multiuser-REST-API#permissions-object\n *\n *   this object is not created to work alone, it should be a member of\n *   an object like visualization table\n *\n */\nvar PermissionModel = module.exports = Backbone.Model.extend({\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('perm');\n    return baseUrl + '/api/' + version + '/perm';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n    this.acl = new Backbone.Collection();\n    this.owner = opts._userModel;\n    this._generateOwner();\n    this._generateAcl();\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:owner', this._generateOwner, this);\n    this.bind('change:acl', this._generateAcl, this);\n  },\n\n  _generateOwner: function () {\n    if (!this.owner) {\n      this.owner = new UserModel(null, {\n        configModel: this._configModel\n      });\n    }\n    this.owner.set(this.get('owner'));\n  },\n\n  getOwner: function () {\n    return this.owner;\n  },\n\n  _generateAcl: function () {\n    var self = this;\n    this.acl.reset([], { silent: true });\n    _.each(this.get('acl'), function (aclItem) {\n      var model;\n      switch (aclItem.type) {\n        case 'user':\n          model = new UserModel(aclItem.entity, {\n            configModel: self._configModel\n          });\n          break;\n        case 'org':\n          model = new OrganizationModel(aclItem.entity, {\n            configModel: self._configModel\n          });\n          break;\n        case 'group':\n          model = new GroupModel(aclItem.entity, {\n            configModel: self._configModel\n          });\n          break;\n        default:\n          throw new Error('Unknown ACL item type: ' + aclItem.type);\n      }\n      this._grantAccess(model, aclItem.access);\n    }, this);\n  },\n\n  cleanPermissions: function () {\n    this.acl.reset();\n  },\n\n  hasAccess: function (model) {\n    // Having at least read access is the same as having any access\n    return this.hasReadAccess(model);\n  },\n\n  hasReadAccess: function (model) {\n    // If there is a representable ACL item it must be one of at least READ_ONLY access\n    return !!this.findRepresentableAclItem(model);\n  },\n\n  hasWriteAccess: function (model) {\n    var access = Utils.result(this.findRepresentableAclItem(model), 'get', 'access');\n    return access === READ_WRITE;\n  },\n\n  canChangeReadAccess: function (model) {\n    return this._canChangeAccess(model);\n  },\n\n  canChangeWriteAccess: function (model) {\n    return (!model.isBuilder || model.isBuilder()) && this._canChangeAccess(model, function (representableAclItem) {\n      return Utils.result(representableAclItem, 'get', 'access') !== READ_WRITE;\n    });\n  },\n\n  _canChangeAccess: function (model) {\n    var representableAclItem = this.findRepresentableAclItem(model);\n    return this.isOwner(model) || !representableAclItem ||\n    representableAclItem === this._ownAclItem(model) || Utils.result(arguments, 1, representableAclItem) || false;\n  },\n\n  grantWriteAccess: function (model) {\n    this._grantAccess(model, READ_WRITE);\n  },\n\n  grantReadAccess: function (model) {\n    this._grantAccess(model, READ_ONLY);\n  },\n\n  revokeWriteAccess: function (model) {\n    // Effectively \"downgrades\" to READ_ONLY\n    this.grantReadAccess(model);\n  },\n\n  /**\n   * Revokes access to a set of items\n   * @param {Object} model A single model or an array of models\n   */\n  revokeAccess: function (model) {\n    var aclItem = this._ownAclItem(model);\n    if (aclItem) {\n      this.acl.remove(aclItem);\n    }\n  },\n\n  isOwner: function (model) {\n    return _.result(this.owner, 'id') === _.result(model, 'id');\n  },\n\n  toJSON: function () {\n    return {\n      entity: this.get('entity'),\n      acl: this.acl.toJSON()\n    };\n  },\n\n  getUsersWithAnyPermission: function () {\n    return this.acl.chain()\n      .filter(this._hasTypeUser)\n      .map(this._getEntity)\n      .value();\n  },\n\n  isSharedWithOrganization: function () {\n    return this.acl.any(this._hasTypeOrg);\n  },\n\n  clone: function () {\n    var attrs = _.clone(this.attributes);\n    delete attrs.id;\n    return new PermissionModel(attrs, {\n      configModel: this._configModel\n    });\n  },\n\n  /**\n   * Overwrite this ACL list from other permission object\n   * @param otherPermission {Object} instance of PermissionModel\n   */\n  overwriteAcl: function (otherPermission) {\n    this.acl.reset(otherPermission.acl.models);\n  },\n\n  // Note that this may return an inherited ACL item\n  // use ._ownAclItem instead if only model's own is wanted (if there is any)\n  findRepresentableAclItem: function (model) {\n    if (this.isOwner(model)) {\n      return this._newAclItem(model, READ_WRITE);\n    } else {\n      var checkList = ['_ownAclItem', '_organizationAclItem', '_mostPrivilegedGroupAclItem'];\n      return this._findMostPrivilegedAclItem(checkList, function (fnName) {\n        return this[fnName](model);\n      });\n    }\n  },\n\n  _hasTypeUser: function (m) {\n    return m.get('type') === 'user';\n  },\n\n  _getEntity: function (m) {\n    return m.get('entity');\n  },\n\n  _hasTypeOrg: function (m) {\n    return m.get('type') === 'org';\n  },\n\n  _isOrganization: function (object) {\n    return object instanceof OrganizationModel;\n  },\n\n  _ownAclItem: function (model) {\n    if (!model || !_.isFunction(model.isNew)) {\n      console.log('model is required to find an ACL item');\n    }\n    if (!model.isNew()) {\n      return this.acl.find(function (aclItem) {\n        return aclItem.get('entity').id === model.id;\n      });\n    }\n  },\n\n  _organizationAclItem: function (m) {\n    var org = _.result(m.collection, 'organization') || m.organization;\n    if (org) {\n      return this._ownAclItem(org);\n    }\n  },\n\n  _mostPrivilegedGroupAclItem: function (m) {\n    var groups = _.result(m.groups, 'models');\n    if (groups) {\n      return this._findMostPrivilegedAclItem(groups, this._ownAclItem);\n    }\n  },\n\n  /**\n   * Iterates over a items in given list using the iteratee, stops and returns when found the ACL item with best access (i.e. READ_WRITE), or the\n   * list is completed.\n   * @param {Array} list\n   * @param {Function} iteratee that takes an item from list and returns an access\n   *   iteratee is called in context of this model.\n   * @Return {String} 'r', 'rw', or undefined if there were no access for given item\n   */\n  _findMostPrivilegedAclItem: function (list, iteratee) {\n    var aclItem;\n    for (var i = 0, x = list[i]; x && Utils.result(aclItem, 'get', 'access') !== READ_WRITE; x = list[++i]) {\n      // Keep last ACL item if iteratee returns nothing\n      aclItem = iteratee.call(this, x) || aclItem;\n    }\n    return aclItem;\n  },\n\n  /**\n   * Grants access to a set of items\n   * @param {Object} model\n   * @param {String} access can take the following values:\n   * - 'r': read only\n   * - 'rw': read and write permission\n   */\n  _grantAccess: function (model, access) {\n    var aclItem = this._ownAclItem(model);\n    if (aclItem) {\n      aclItem.set('access', access);\n    } else {\n      aclItem = this._newAclItem(model, access);\n      if (aclItem.isValid()) {\n        this.acl.add(aclItem);\n      } else {\n        throw new Error(access + ' is not a valid ACL access');\n      }\n    }\n  },\n\n  _newAclItem: function (model, access) {\n    var type;\n    if (model instanceof UserModel) {\n      type = 'user';\n    } else if (model instanceof GroupModel) {\n      type = 'group';\n    } else if (this._isOrganization(model)) {\n      type = 'org';\n    } else {\n      throw new Error('model not recognized as a valid ACL entity ' + model);\n    }\n\n    return new ACLItemModel({\n      type: type,\n      entity: model,\n      access: access\n    });\n  }\n});\n\nexports.READ_ONLY = READ_ONLY;\nexports.READ_WRITE = READ_WRITE;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar DEACTIVATE_MATRIX = {\n  'number': ['date'],\n  'boolean': ['date'],\n  'date': ['boolean']\n};\nvar DESTRUCTIVE_MATRIX = {\n  'string': {\n    'string': false,\n    'number': true,\n    'date': true,\n    'boolean': true\n  },\n  'number': {\n    'string': false,\n    'number': false,\n    'date': true,\n    'boolean': true\n  },\n  'date': {\n    'string': false,\n    'number': true,\n    'date': false,\n    'boolean': true\n  },\n  'boolean': {\n    'string': false,\n    'number': false,\n    'date': true,\n    'boolean': false\n  }\n};\nvar NON_EDITABLE_ATTRIBUTES = [\n  'the_geom_webmercator',\n  'cartodb_id',\n  'the_geom'\n];\n\nmodule.exports = Backbone.Model.extend({\n\n  url: function () {\n    if (this._tableName) {\n      var baseUrl = this._configModel.get('base_url');\n      var version = this._configModel.urlVersion('column');\n      var url = baseUrl + '/api/' + version + '/tables/' + this._tableName + '/columns/';\n\n      if (!this.isNew()) {\n        // If name changes, we should point to the \"old\" name\n        // in order to make the correct call\n        url += this.previous('name') || this.get('name');\n      }\n\n      return url;\n    }\n\n    return false;\n  },\n\n  parse: function (attrs) {\n    return {\n      name: attrs.name,\n      type: attrs.cartodb_type || attrs.type,\n      isNew: false\n    };\n  },\n\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._tableName = opts.tableName;\n    this._configModel = opts.configModel;\n  },\n\n  isNew: function () {\n    return this.get('isNew');\n  },\n\n  isEditable: function () {\n    return !_.contains(NON_EDITABLE_ATTRIBUTES, this.get('name'));\n  },\n\n  // This is relative becuase we could set any value to cartodb_id\n  isCartoDBIDColumn: function () {\n    return this.get('name') === 'cartodb_id' && this.get('type') === 'number';\n  },\n\n  isGeometryColumn: function () {\n    return this.get('type') === 'geometry';\n  }\n}, {\n  isTypeChangeDestructive: function (type, newType) {\n    return DESTRUCTIVE_MATRIX[type][newType];\n  },\n\n  isTypeChangeAllowed: function (type, newType) {\n    var deactivated = DEACTIVATE_MATRIX[type] || [];\n    deactivated = deactivated.concat([type]);\n    return !_.contains(deactivated, newType);\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar QueryColumnModel = require('./query-column-model');\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, opts) {\n    var self = opts.collection;\n    return new QueryColumnModel(attrs, {\n      configModel: self._configModel,\n      tableName: self._tableName\n    });\n  },\n\n  url: function () {\n    if (this._tableName) {\n      var baseUrl = this._configModel.get('base_url');\n      var version = this._configModel.urlVersion('column');\n      return baseUrl + '/api/' + version + '/tables/' + this._tableName + '/columns';\n    }\n\n    return false;\n  },\n\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n\n    this._tableName = opts.tableName;\n    this._querySchemaModel = opts.querySchemaModel;\n    this._configModel = opts.configModel;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('add remove change:type change:name', function () {\n      this.reset();\n      this._querySchemaModel.set('status', 'unfetched');\n      this._querySchemaModel.fetch();\n    }, this);\n    this._querySchemaModel.bind('change:status', function (mdl, status) {\n      if (status === 'fetched') {\n        this.reset(this._querySchemaModel.columnsCollection.toJSON());\n      }\n    }, this);\n  },\n\n  setTableName: function (name) {\n    if (!name) return;\n\n    if (this._tableName) {\n      this._tableName = name;\n\n      this.each(function (columnModel) {\n        columnModel._tableName = name;\n      });\n    }\n  },\n\n  addColumn: function (opts) {\n    opts = opts || {};\n    this.create(\n      {\n        name: 'column_' + new Date().getTime(),\n        type: 'string',\n        isNew: true\n      },\n      _.extend(\n        opts,\n        {\n          wait: true,\n          parse: false\n        }\n      )\n    );\n  }\n\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar syncAbort = require('./backbone/sync-abort');\n/* eslint-disable */\nvar template = _.template(\"\" +\n\"SELECT CASE LOWER(ST_GeometryType(<%= geom_column %>)) \" +\n\"     WHEN 'st_polygon' THEN 'polygon' \" +\n\"     WHEN 'st_multipolygon' THEN 'polygon' \" +\n\"     WHEN 'st_multilinestring' THEN 'line' \" +\n\"     WHEN 'st_linestring' THEN 'line' \" +\n\"     WHEN 'st_multipoint' THEN 'point' \" +\n\"     WHEN 'st_point' THEN 'point' \" +\n\"     ELSE '' \" +\n\"  END AS the_geom FROM (<%= sql %>) __wrapped WHERE <%= geom_column %> IS NOT NULL\"\n/* eslint-enable */\n);\n\nvar THE_GEOM_NOT_FOUND_ERROR = 'column \\\"the_geom\\\" does not exist';\nvar MAX_GET_LENGTH = 1024;\nvar PARAMS = {\n  sort_order: 'asc',\n  rows_per_page: 40,\n  page: 0\n};\nvar STATUS = {\n  unavailable: 'unavailable',\n  unfetched: 'unfetched',\n  fetching: 'fetching',\n  fetched: 'fetched'\n};\n\n/**\n * Model to represent a schema of a SQL query.\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    query: '',\n    status: STATUS.unavailable, // , unfetched, fetching, fetched\n    simple_geom: '', // , 'point', 'polygon', 'line'\n    ready: false // until true there's no data available on the table(s) used in the query\n  },\n\n  /**\n   * @override {Backbone.prototype.sync} abort ongoing request if there is any\n   */\n  sync: syncAbort,\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n\n    this._addChangeListener();\n  },\n\n  url: function () {\n    return this._configModel.getSqlApiUrl();\n  },\n\n  _addChangeListener: function () {\n    this.bind('change', this._onChange, this);\n  },\n\n  _removeChangeListener: function () {\n    this.unbind('change', this._onChange, this);\n  },\n\n  isFetched: function () {\n    return this.get('status') === STATUS.fetched;\n  },\n\n  isFetching: function () {\n    return this.get('status') === STATUS.fetching;\n  },\n\n  canFetch: function () {\n    return this.hasQuery() && this.get('ready');\n  },\n\n  hasQuery: function () {\n    return !!this.get('query');\n  },\n\n  shouldFetch: function () {\n    return this.canFetch() && !this.isFetched() && !this.isFetching();\n  },\n\n  resetFetch: function () {\n    this.set('status', STATUS.unfetched);\n  },\n\n  fetch: function (opts) {\n    if (!this.canFetch()) return;\n\n    this.set('status', STATUS.fetching);\n\n    opts = opts || {};\n    var errorCallback = opts && opts.error;\n\n    opts.data = _.extend(\n      opts.data || {},\n      {\n        api_key: this._configModel.get('api_key'),\n        q: this._getSqlApiQueryParam(opts.geomColumnName)\n      },\n      PARAMS\n    );\n\n    opts.method = this._httpMethod();\n\n    opts.error = function (model, response) {\n      if (response && response.statusText !== 'abort') {\n        var error = response.responseText ? JSON.parse(response.responseText).error : [];\n        // in case we get an error of the_geom does not exists try with the_geom_webmercator to get the geometry type\n        if (error.length === 1 && error[0] === THE_GEOM_NOT_FOUND_ERROR) {\n          this.fetch(_.extend({}, opts, { geomColumnName: 'the_geom_webmercator' }));\n        } else {\n          errorCallback && errorCallback(error);\n          this.set({\n            simple_geom: '',\n            query_errors: error,\n            status: STATUS.unavailable\n          });\n        }\n      }\n    }.bind(this);\n\n    return Backbone.Model.prototype.fetch.call(this, opts);\n  },\n\n  parse: function (r) {\n    var simpleGeom;\n\n    _.some(r.rows, function (row) {\n      return !!(simpleGeom = row.the_geom); // to stop when found a valid simple geom\n    });\n\n    return {\n      status: STATUS.fetched,\n      simple_geom: simpleGeom || ''\n    };\n  },\n\n  isNew: function () {\n    return true; // override Backbone.Model.prototype.isNew for this.destroy() to do its w/o sending a DELETE request\n  },\n\n  hasValue: function () {\n    return !!this.get('simple_geom');\n  },\n\n  _onChange: function () {\n    this._removeChangeListener();\n\n    if (!this.hasChanged('status') && this.get('status') === STATUS.fetching) {\n      // If it is already fetching just redo the fetch with latest attrs\n      // in case the query has changed\n      if (this.hasChanged('query')) {\n        this.fetch();\n      }\n    } else if (this.hasChanged('query') || this.hasChanged('ready')) {\n      this.set('status', this.get('query') ? STATUS.unfetched : STATUS.unavailable);\n    }\n\n    this._addChangeListener();\n  },\n\n  _getSqlApiQueryParam: function (geomColumnName) {\n    return template({\n      geom_column: geomColumnName || 'the_geom',\n      sql: this.get('query')\n    });\n  },\n\n  _httpMethod: function () {\n    return this._getSqlApiQueryParam().length > MAX_GET_LENGTH\n      ? 'POST'\n      : 'GET';\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  // In case that there is already an id attribute\n  idAttribute: '__id',\n\n  url: function () {\n    if (this._tableName && this._configModel) {\n      var baseUrl = this._configModel.get('base_url');\n      var version = this._configModel.urlVersion('record');\n      var url = baseUrl + '/api/' + version + '/tables/';\n\n      if (this.hasWriteAccess(this._userModel) && !this.isOwner(this._userModel)) {\n        var owner = this._permissionModel.getOwner();\n        var ownerUsername = owner.get('username');\n\n        url += ownerUsername + '.' + this._tableName + '/records';\n      } else {\n        url += this._tableName + '/records';\n      }\n\n      if (!this.isNew()) {\n        url += '/' + this.get('cartodb_id');\n      }\n\n      return url;\n    }\n\n    return false;\n  },\n\n  initialize: function (attrs, opts) {\n    this.collection = this.collection || {};\n\n    this._tableName = opts.tableName || this.collection._tableName;\n    this._configModel = opts.configModel || this.collection._configModel;\n    this._permissionModel = opts.permissionModel || this.collection._permissionModel;\n    this._userModel = opts.userModel || this.collection._userModel;\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('error', this._onError, this);\n  },\n\n  hasWriteAccess: function (userModel) {\n    if (!userModel || !this._permissionModel) {\n      return false;\n    }\n    return this._permissionModel.hasWriteAccess(userModel);\n  },\n\n  isOwner: function (userModel) {\n    if (!userModel || !this._permissionModel) {\n      return false;\n    }\n    return this._permissionModel.isOwner(userModel);\n  },\n\n  isNew: function () {\n    return !this.has('cartodb_id');\n  },\n\n  isGeomLoaded: function () {\n    try {\n      JSON.parse(this.get('the_geom'));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  },\n\n  fetchRowIfGeomIsNotLoaded: function (callback) {\n    if (this.isGeomLoaded()) {\n      callback();\n      return;\n    }\n\n    this.fetch({\n      success: callback\n    });\n  },\n\n  _onError: function () {\n    this.set(this.previousAttributes());\n  },\n\n  sync: function () {\n    this.trigger('loading', this);\n    Backbone.Model.prototype.sync.apply(this, arguments);\n  },\n\n  parse: function (attrs) {\n    if (!attrs.__id) {\n      attrs.__id = _.uniqueId();\n    }\n    return attrs;\n  },\n\n  toJSON: function () {\n    return _.omit(\n      this.attributes,\n      '__id',\n      'the_geom_webmercator'\n    );\n  }\n\n});\n",
    "var Backbone = require('backbone');\nvar QueryRowModel = require('./query-row-model');\nvar syncAbort = require('./backbone/sync-abort');\nvar _ = require('underscore');\n\nvar MAX_GET_LENGTH = 1024;\nvar WRAP_SQL_TEMPLATE = 'select <%= selectedColumns %> from (<%= sql %>) __wrapped';\n\nvar STATUS = {\n  unavailable: 'unavailable',\n  unfetched: 'unfetched',\n  fetching: 'fetching',\n  fetched: 'fetched'\n};\n\nmodule.exports = Backbone.Collection.extend({\n\n  DEFAULT_FETCH_OPTIONS: {\n    rows_per_page: 40,\n    sort_order: 'asc',\n    page: 0\n  },\n\n  // Due to a problem how Backbone checks if there is a duplicated model\n  // or not, we can't create the model with a function + its necessary options\n  model: QueryRowModel,\n\n  sync: syncAbort,\n\n  url: function () {\n    return this._configModel.getSqlApiUrl();\n  },\n\n  initialize: function (models, opts) {\n    opts = opts || {};\n\n    this._tableName = opts.tableName;\n    this._querySchemaModel = opts.querySchemaModel;\n    this._configModel = opts.configModel;\n\n    this.statusModel = new Backbone.Model({\n      status: STATUS.unavailable\n    });\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._querySchemaModel, 'change:query', this._onQuerySchemaQueryChange);\n  },\n\n  isFetched: function () {\n    return this.statusModel.get('status') === STATUS.fetched;\n  },\n\n  isFetching: function () {\n    return this.statusModel.get('status') === STATUS.fetching;\n  },\n\n  shouldFetch: function () {\n    return !this.isFetched() && !this.isFetching() && this.canFetch();\n  },\n\n  resetFetch: function () {\n    this.statusModel.set('status', STATUS.unfetched);\n  },\n\n  isEmpty: function () {\n    return this.size() === 0;\n  },\n\n  canFetch: function () {\n    return !!this._querySchemaModel.get('query') && this._querySchemaModel.get('ready') && this._querySchemaModel.isFetched();\n  },\n\n  _onQuerySchemaQueryChange: function () {\n    this.statusModel.set('status', 'unfetched');\n    this.reset([], { silent: true });\n  },\n\n  _geometryColumnSQL: function (column) {\n    /* eslint-disable */\n    return [\n      \"CASE\",\n      \"WHEN GeometryType(\" + column + \") = 'POINT' THEN\",\n        \"ST_AsGeoJSON(\" + column + \",8)\",\n      \"WHEN (\" + column + \" IS NULL) THEN\",\n        \"NULL\",\n      \"ELSE\",\n        \"GeometryType(\" + column + \")\",\n      \"END \" + column\n    ].join(' ');\n    /* eslint-enable */\n  },\n\n  // return wrapped SQL removing the_geom and the_geom_webmercator\n  // to avoid fetching those columns.\n  // So for a sql like\n  // select * from table the returned value is\n  // select column1, column2, column3... from table\n  _getWrappedSQL: function (excludeColumns) {\n    var self = this;\n    var schema = this._querySchemaModel.columnsCollection.toJSON();\n\n    var selectedColumns = _\n      .chain(schema)\n      .omit(function (item) {\n        return _.contains(excludeColumns, item.name);\n      })\n      .map(function (item, index) {\n        if (item.type === 'geometry') {\n          return self._geometryColumnSQL(item.name);\n        }\n        return '\"' + item.name + '\"';\n      })\n      .value();\n\n    return _.template(WRAP_SQL_TEMPLATE)({\n      selectedColumns: selectedColumns.join(','),\n      sql: this._querySchemaModel.get('query')\n    });\n  },\n\n  _httpMethod: function () {\n    return this._querySchemaModel.get('query').length > MAX_GET_LENGTH\n      ? 'POST'\n      : 'GET';\n  },\n\n  fetch: function (opts) {\n    opts = opts || {};\n\n    this.statusModel.set('status', STATUS.fetching);\n\n    var excludeColumns = (opts.data && opts.data.exclude) || [];\n\n    opts = opts || {};\n    opts.data = _.extend(\n      {},\n      this.DEFAULT_FETCH_OPTIONS,\n      opts.data && _.omit(opts.data, 'exclude') || {},\n      {\n        api_key: this._configModel.get('api_key'),\n        q: this._getWrappedSQL(excludeColumns)\n      }\n    );\n\n    opts.method = this._httpMethod();\n    var errorCallback = opts.error;\n    opts.error = function (coll, resp) {\n      this.trigger('fail', coll, resp);\n      this.statusModel.set('status', STATUS.unavailable);\n      errorCallback && errorCallback(coll, resp);\n    }.bind(this);\n\n    var successCallback = opts.success;\n    opts.success = function (coll, resp) {\n      this.statusModel.set('status', STATUS.fetched);\n      successCallback && successCallback(coll, resp);\n    }.bind(this);\n\n    // Needed to reset the whole collection when a fetch is done\n    opts.reset = true;\n\n    return Backbone.Collection.prototype.fetch.call(this, opts);\n  },\n\n  parse: function (r) {\n    return this._parseWithID(r.rows);\n  },\n\n  reset: function (result, opts) {\n    var items = [];\n\n    if (result && result.rows) {\n      // If reset comes from a fetch, we need to parse the rows\n      items = result.rows;\n    } else {\n      // If it comes directly from a simple reset function\n      items = result;\n    }\n\n    Backbone.Collection.prototype.reset.apply(this, [this._parseWithID(items)]);\n  },\n\n  _parseWithID: function (array) {\n    return _.map(array, function (attrs) {\n      attrs.__id = _.uniqueId();\n      return attrs;\n    });\n  },\n\n  addRow: function (opts) {\n    opts = opts || {};\n    this.create(\n      {\n        __id: _.uniqueId()\n      },\n      _.extend(\n        opts,\n        {\n          wait: true,\n          parse: true\n        }\n      )\n    );\n  },\n\n  setTableName: function (name) {\n    if (!name) return;\n\n    if (this._tableName) {\n      this._tableName = name;\n\n      this.each(function (rowModel) {\n        rowModel._tableName = name;\n      });\n    }\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar syncAbort = require('./backbone/sync-abort');\nvar QueryRowsCollection = require('./query-rows-collection');\nvar SQLUtils = require('../helpers/sql-utils');\n\nvar DEFAULT_TABLE_QUERY_TEMPLATE = _.template('SELECT * FROM <%= tableName %>');\nvar WRAPPED_SQL_QUERY_TEMPLATE = _.template('SELECT * FROM (<%= sql %>) __wrapped');\n\nvar MAX_GET_LENGTH = 1024;\nvar STATUS = {\n  unavailable: 'unavailable',\n  unfetched: 'unfetched',\n  fetching: 'fetching',\n  fetched: 'fetched'\n};\n\n/**\n * Model to represent a schema of a SQL query.\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    query: '',\n    sort_order: 'asc',\n    rows_per_page: 0,\n    page: 0,\n    status: STATUS.unavailable, // unfetched, fetching, fetched\n    ready: false // until true there's no data available on the table(s) used in the query\n  },\n\n  sync: syncAbort, // override {Backbone.prototype.sync} abort ongoing request if there is any\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n    this.columnsCollection = new Backbone.Collection([]);\n    this.rowsCollection = new QueryRowsCollection([]);\n\n    if (this.get('status') === STATUS.unavailable) {\n      this._setStatusPerQueryValue();\n    }\n\n    this._addChangeListener();\n  },\n\n  url: function () {\n    return this._configModel.getSqlApiUrl();\n  },\n\n  _addChangeListener: function () {\n    this.bind('change', this._onChange, this);\n  },\n\n  _removeChangeListener: function () {\n    this.unbind('change', this._onChange, this);\n  },\n\n  isFetched: function () {\n    return this.get('status') === STATUS.fetched;\n  },\n\n  isFetching: function () {\n    return this.get('status') === STATUS.fetching;\n  },\n\n  canFetch: function () {\n    return this.hasQuery() && this.get('ready');\n  },\n\n  hasQuery: function () {\n    return !!this.get('query');\n  },\n\n  shouldFetch: function () {\n    return this.canFetch() && !this.isFetched() && !this.isFetching();\n  },\n\n  fetch: function (opts) {\n    if (!this.canFetch()) return;\n\n    this.set('status', STATUS.fetching);\n\n    opts = opts || {};\n    var errorCallback = opts && opts.error;\n\n    opts.data = _.extend(\n      opts.data || {},\n      {\n        sort_order: this.get('sort_order'),\n        rows_per_page: this.get('rows_per_page'),\n        page: this.get('page'),\n        api_key: this._configModel.get('api_key'),\n        q: this._getSqlApiQueryParam()\n      }\n    );\n\n    opts.method = this._httpMethod();\n\n    opts.error = function (model, response) {\n      if (response && response.statusText !== 'abort') {\n        var error = response.responseText ? JSON.parse(response.responseText).error : [];\n        errorCallback && errorCallback(error);\n        this.set({\n          query_errors: error,\n          status: STATUS.unavailable\n        });\n      }\n    }.bind(this);\n\n    return Backbone.Model.prototype.fetch.call(this, opts);\n  },\n\n  parse: function (r) {\n    this.rowsCollection.reset(r.rows);\n\n    this.columnsCollection.reset(\n      _.map(r.fields, function (d, name) {\n        return {\n          name: name,\n          type: d.type\n        };\n      })\n    );\n\n    return { status: STATUS.fetched };\n  },\n\n  /**\n   * @override {Backbone.prototype.isNew} for this.destroy() to work (not try to send DELETE request)\n   */\n  isNew: function () {\n    return true;\n  },\n\n  hasDefaultQueryFor: function (tableName) {\n    if (!this.hasQuery()) {\n      return false;\n    }\n    var defaultQueryForTableName = DEFAULT_TABLE_QUERY_TEMPLATE({ tableName: tableName });\n    return SQLUtils.isSameQuery(this.get('query'), defaultQueryForTableName);\n  },\n\n  getColumnNames: function () {\n    return this.columnsCollection.pluck('name');\n  },\n\n  _onChange: function () {\n    this._removeChangeListener();\n\n    if (!this.hasChanged('status') && this.get('status') === STATUS.fetching) {\n      this.fetch(); // If is already fetching just redo the fetch with latest attrs\n    } else {\n      if (this.hasChanged('query')) {\n        this.columnsCollection.reset();\n        this._setStatusPerQueryValue();\n      }\n    }\n\n    this._addChangeListener();\n  },\n\n  _setStatusPerQueryValue: function () {\n    this.set('status', this.get('query') ? STATUS.unfetched : STATUS.unavailable);\n  },\n\n  // Basically checks if an schema is different than the current one\n  hasDifferentSchemaThan: function (schemaArray) {\n    return !_.every(schemaArray, function (columnObj) {\n      var columnModel = this.columnsCollection.findWhere({ name: columnObj.name });\n      return columnModel && (columnModel.get('type') === columnObj.type || columnObj.type == null);\n    }, this);\n  },\n\n  resetDueToAlteredData: function () {\n    this.set('status', STATUS.unfetched);\n    this.trigger('resetDueToAlteredData');\n    this.fetch();\n  },\n\n  _getSqlApiQueryParam: function () {\n    return WRAPPED_SQL_QUERY_TEMPLATE({\n      sql: this.get('query')\n    });\n  },\n\n  _httpMethod: function () {\n    return this._getSqlApiQueryParam().length > MAX_GET_LENGTH\n      ? 'POST'\n      : 'GET';\n  },\n\n  resetFetch: function () {\n    this.set('status', STATUS.unfetched);\n  }\n\n});\n",
    "var _ = require('underscore');\nvar AssetModel = require('./asset-model');\n\nmodule.exports = AssetModel.extend({\n\n  defaults: {\n    ext: 'svg',\n    folder: 'maki-icons',\n    host: 'https://s3.amazonaws.com',\n    bucket: 'com.cartodb.users-assets.production',\n    kind: 'marker',\n    name: '',\n    public_url: '',\n    size: '18',\n    state: 'idle'\n  },\n\n  getURLFor: function (name) {\n    var url = this.get('host') + '/' + this.get('bucket') + '/' + this.get('folder') + '/' + name;\n    var size = this.get('size') ? '-' + this.get('size') : '';\n    return url + size + '.' + this.get('ext');\n  },\n\n  toJSON: function () {\n    var c = _.clone(this.attributes);\n\n    c['public_url'] = this.getURLFor(c['icon']);\n    return c;\n  },\n\n  get: function (attr) {\n    var r = this.attributes[attr];\n\n    if (attr === 'public_url') {\n      r = this.getURLFor(this.attributes['icon']);\n    }\n\n    return r;\n  }\n});\n",
    "var StaticAssetModel = require('./static-asset-model');\nvar AssetsCollection = require('./assets-collection');\n\nmodule.exports = AssetsCollection.extend({\n  model: StaticAssetModel,\n\n  url: function () {\n    return '';\n  },\n\n  initialize: function (models, opts) {\n\n  },\n\n  parse: function (resp, xhr) {\n    return [];\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar MULTIPLIER = 1.2; // Multiply current interval for this number\nvar INTERVAL = 1500; // Interval time between poll checkings\nvar SYNC_GAP = 900000; // Gap (in ms) necessary to perform next synchronization\nvar POLLING_GAP = 15000; // Gap (in seconds) necessary to start polling and checking synchronization\n\n/**\n *  Synced table model\n */\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    name: '',\n    url: '',\n    state: '',\n    run_at: 0,\n    ran_at: 0,\n    retried_times: 0,\n    interval: 0,\n    error_code: 0,\n    error_message: '',\n    service_name: '',\n    service_item_id: '',\n    content_guessing: true,\n    type_guessing: true\n  },\n\n  urlRoot: function () {\n    var version = this._configModel.urlVersion('synchronizations');\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/' + version + '/synchronizations/';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    this._configModel = opts.configModel;\n\n    this.bind('destroy', function () {\n      this.unset('id');\n    });\n\n    this._checkState();\n\n    this.bind('change:error_code change:error_message change:state', this._checkState, this);\n  },\n\n  toJSON: function () {\n    var c = _.clone(this.attributes);\n\n    var d = {\n      url: c.url,\n      interval: c.interval,\n      content_guessing: c.content_guessing,\n      type_guessing: c.type_guessing,\n      create_vis: c.create_vis\n    };\n\n    if (c.type === 'remote') {\n      _.extend(d, {\n        remote_visualization_id: c.remote_visualization_id,\n        create_vis: false,\n        value: c.value\n      });\n    }\n\n    if (c.id !== undefined) {\n      d.id = c.id;\n    }\n\n    // Comes from a service?\n    if (c.service_name) {\n      d.service_name = c.service_name;\n      d.service_item_id = c.service_item_id;\n    }\n\n    return d;\n  },\n\n  _checkState: function () {\n    if (this.get('error_code') || this.get('error_message')) {\n      this.set('state', 'failure');\n    }\n  },\n\n  syncNow: function (callback) {\n    if (!callback) throw new Error('callback is required');\n\n    $.ajax({\n      url: this.url() + '/sync_now',\n      type: 'PUT'\n    }).always(callback);\n  },\n\n  // Checks for poll to finish\n  pollCheck: function (i) {\n    var self = this;\n    var interval = INTERVAL;\n\n    this.pollTimer = setInterval(request, interval);\n\n    function request () {\n      self.destroyCheck();\n\n      self.fetch({\n        error: function (m, e) {\n          self.set({\n            error_message: e.statusText || '',\n            state: 'failure'\n          });\n        }\n      });\n\n      interval = interval * MULTIPLIER;\n\n      self.pollTimer = setInterval(request, interval);\n    }\n  },\n\n  destroyCheck: function () {\n    clearInterval(this.pollTimer);\n  },\n\n  isSync: function () {\n    return !this.isNew() && this.get('interval') > 0;\n  },\n\n  isSyncing: function () {\n    return this.get('state') === 'syncing' || this.get('state') === 'queued';\n  },\n\n  canSyncNow: function () {\n    var ranAt = new Date(this.get('ran_at'));\n    var now = new Date();\n    var gap = SYNC_GAP; // Importer needs some time to perform the next sync, set 15 min as default.\n\n    if (this.isSyncing()) {\n      return false;\n    }\n\n    return (now.getTime() - ranAt.getTime()) > gap;\n  },\n\n  linkToTable: function (tableModel) {\n    var self = this;\n    if (tableModel.has('synchronization')) {\n      this.set(tableModel.get('synchronization'));\n    }\n\n    tableModel.bind('change:synchronization', function () {\n      self.set(tableModel.get('synchronization'));\n    }, tableModel);\n\n    tableModel.bind('destroy', function destroy () {\n      self.unbind(null, null, tableModel);\n      self.destroy();\n    }, tableModel);\n  }\n}, {\n  SYNC_GAP: SYNC_GAP,\n  POLLING_GAP: POLLING_GAP\n});\n",
    "var Backbone = require('backbone');\nvar ColumnModel = require('./column-model');\n\n/**\n * A collection of table columns\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: ColumnModel,\n\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.tableModel) throw new Error('tableModel is required');\n\n    this._configModel = opts.configModel;\n    this._tableModel = opts.tableModel;\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('column');\n    return baseUrl + '/api/' + version + '/tables/' + this._tableModel.get('name') + '/columns';\n  }\n\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar TableColumnsCollection = require('./table-columns-collection');\nvar getSimpleGeometryType = require('./get-simple-geometry-type');\nvar PermissionModel = require('./permission-model');\nvar SyncModel = require('./synchronization-model');\nvar TableNameUtils = require('../helpers/table-name-utils');\n\n/**\n * Model representing a table.\n */\nmodule.exports = Backbone.Model.extend({\n\n  idAttribute: 'name',\n\n  defaults: {\n    // always not fetched to begin with, since the only way to currently get table data is by an individual request\n    fetched: false,\n    schema: []\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n  },\n\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('table');\n    return baseUrl + '/api/' + version + '/tables';\n  },\n\n  parse: function (r, opts) {\n    var configModel = (opts && opts.configModel) || this._configModel;\n\n    // \"Sometimes\" table presenter returns the needed data within table_visualization\n    // attribute, because it returns the canonical visualization data. So we have to take\n    // the data from there.\n    if (r.table_visualization && !_.isEmpty(r.table_visualization)) {\n      r = _.extend(\n        {},\n        r.table_visualization,\n        {\n          geometry_types: r.geometry_types\n        }\n      );\n    }\n\n    if (r.synchronization) {\n      if (!this._syncModel) {\n        this._syncModel = new SyncModel(r.synchronization, {\n          configModel: configModel\n        });\n      } else {\n        this._syncModel.set(r.synchronization);\n      }\n    }\n\n    if (r.permission) {\n      if (!this._permissionModel) {\n        this._permissionModel = new PermissionModel(r.permission, {\n          configModel: configModel\n        });\n      } else {\n        this._permissionModel.set(r.permission);\n      }\n    }\n\n    var attrs = _.defaults({\n      fetched: true\n    }, r);\n\n    var columnsAttrs = _.map(r.schema, function (d) {\n      return {\n        name: d[0],\n        type: d[1]\n      };\n    }, this);\n\n    if (!this.columnsCollection) {\n      this.columnsCollection = new TableColumnsCollection(columnsAttrs, {\n        configModel: configModel,\n        tableModel: this\n      });\n    } else {\n      this.columnsCollection.reset(columnsAttrs);\n    }\n\n    return attrs;\n  },\n\n  isOwner: function (userModel) {\n    if (!userModel || !this._permissionModel) {\n      return false;\n    }\n    return this._permissionModel.isOwner(userModel);\n  },\n\n  getUnqualifiedName: function () {\n    return TableNameUtils.getUnqualifiedName(this.get('name'));\n  },\n\n  getOwnerName: function () {\n    var name = this.get('name');\n    if (!name) return null;\n    var tk = name.split('.');\n    if (tk.length === 2) {\n      return tk[0].replace(/\"/g, '');\n    } else if (this._permissionModel) {\n      var ownerModel = this._permissionModel.getOwner();\n      return ownerModel.get('username');\n    } else {\n      return '';\n    }\n  },\n\n  // \"user\".table -> user.table\n  getUnquotedName: function () {\n    var name = this.get('name');\n    return name && name.replace(/\"/g, '');\n  },\n\n  getGeometryType: function () {\n    var types = this.get('geometry_types');\n    var geomTypes = [];\n    if (!_.isArray(types)) {\n      return [];\n    }\n\n    for (var t in types) {\n      var type = types[t];\n      // when there are rows with no geo type null is returned as geotype\n      if (type) {\n        var a = getSimpleGeometryType(type.toLowerCase());\n        if (a) {\n          geomTypes.push(a);\n        }\n      }\n    }\n\n    return _.uniq(geomTypes);\n  },\n\n  getPermissionModel: function () {\n    return this._permissionModel;\n  },\n\n  isReadOnly: function (userModel) {\n    return this.isSync() || !this.hasWriteAccess(userModel);\n  },\n\n  isSync: function () {\n    var syncModel = this.getSyncModel();\n    var isSync = syncModel && syncModel.get('id');\n\n    return !!isSync;\n  },\n\n  hasWriteAccess: function (userModel) {\n    if (!userModel || !this._permissionModel) {\n      return false;\n    }\n    return this._permissionModel.hasWriteAccess(userModel);\n  },\n\n  getSyncModel: function () {\n    return this._syncModel;\n  }\n\n});\n",
    "var _ = require('underscore');\nvar BackboneUndo = require('backbone-undo');\nvar MAXIMUM_STACK_LENGTH = 30;\n\nmodule.exports = {\n  init: function (model, opts) {\n    if (!model) throw new Error('model is required to initialize undoManager');\n\n    opts = opts || {};\n    this.model = model;\n\n    this.model._undoManager = this.undoManager = new BackboneUndo({\n      maximumStackLength: opts.maximumStackLength || MAXIMUM_STACK_LENGTH,\n      register: this.model,\n      track: opts.track\n    });\n\n    this._trackEvents();\n    this._addMethods();\n\n    if (!_.isEmpty(opts.history)) {\n      opts.track && this.undoManager.stopTracking();\n      this._addHistory(opts.history);\n      opts.track && this.undoManager.startTracking();\n    }\n  },\n\n  _trackEvents: function () {\n    _.each(['undo', 'redo'], function (eventType) {\n      this.undoManager.bind(eventType, function () {\n        this.trigger(eventType, this.changed, this);\n      }, this.model);\n    }, this);\n\n    this.undoManager.stack.bind('add remove reset', function () {\n      this.trigger('unredoChanged', this.changed, this);\n    }, this.model);\n  },\n\n  _addHistory: function (history) {\n    var stack = this.undoManager.stack;\n\n    _.each(history, function (attrs, i) {\n      if (history[i + 1]) {\n        stack.add({\n          after: history[i + 1],\n          before: attrs,\n          type: 'change',\n          undoTypes: this.undoManager.undoTypes,\n          object: this.model,\n          magicFusionIndex: 0\n        });\n      }\n    }, this);\n\n    stack.pointer = stack.length - 1;\n  },\n\n  _addMethods: function () {\n    _.extend(\n      this.model,\n      {\n        undo: function () {\n          this._undoManager.undo();\n        },\n\n        redo: function () {\n          this._undoManager.redo();\n        },\n\n        canUndo: function () {\n          return this._undoManager.isAvailable('undo');\n        },\n\n        canRedo: function () {\n          return this._undoManager.isAvailable('redo');\n        },\n\n        getUndoHistory: function () {\n          var list = this._undoManager.stack.toJSON();\n          var data = _.reduce(list, function (memo, attrs, i) {\n            memo.push(attrs.before);\n            return memo;\n          }, [], this);\n          data.push(this.attributes);\n          return data;\n        }\n      }\n    );\n  }\n};\n",
    "var Backbone = require('backbone');\nvar GroupModel = require('./group-model');\n\n/**\n * Collection of a User's groups.\n */\nmodule.exports = Backbone.Collection.extend({\n  model: GroupModel,\n\n  initialize: function (models, opts) {\n    this.organization = opts.organization;\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar OrganizationModel = require('./organization-model');\nvar UserGroups = require('./user-groups-collection');\nvar CustomBaselayersCollection = require('./custom-baselayers-collection');\n\n/**\n *  User model\n *\n */\n\nvar UserModel = Backbone.Model.extend({\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v1/users';\n  },\n\n  defaults: {\n    avatar_url: 'http://cartodb.s3.amazonaws.com/static/public_dashboard_default_avatar.png',\n    username: '',\n    email: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    this._configModel = opts.configModel;\n    attrs = attrs || {};\n\n    if (!_.isEmpty(this.get('organization'))) {\n      this._organizationModel = new OrganizationModel(\n        this.get('organization'),\n        {\n          configModel: this._configModel,\n          currentUserId: this.id\n        }\n      );\n    }\n\n    if (this.get('layers')) {\n      this.layers = new CustomBaselayersCollection(this.get('layers'), {\n        configModel: this._configModel,\n        currentUserId: this.id\n      });\n    }\n\n    this.groups = new UserGroups(attrs.groups, {\n      organization: this._organizationModel\n    });\n  },\n\n  isViewer: function () {\n    return this.get('viewer') === true;\n  },\n\n  isBuilder: function () {\n    return !this.isViewer();\n  },\n\n  canCreateDatasets: function () {\n    if (!this.get('remaining_byte_quota') || this.get('remaining_byte_quota') <= 0) {\n      return false;\n    }\n    return true;\n  },\n\n  hasCreateMapsFeature: function () {\n    return this.isBuilder();\n  },\n\n  canCreateTwitterDataset: function () {\n    return !((this.get('twitter').quota - this.get('twitter').monthly_use) <= 0 && this.get('twitter').hard_limit);\n  },\n\n  canStartTrial: function () {\n    return !this.isInsideOrg() && this.get('account_type') === 'FREE' && this.get('table_count') > 0;\n  },\n\n  isActionEnabled: function (action) {\n    return this.get('actions') && this.get('actions')[action];\n  },\n\n  canCreatePrivateDatasets: function () {\n    var actions = this.get('actions');\n    return actions && actions.private_tables;\n  },\n\n  isInsideOrg: function () {\n    if (this._organizationModel) {\n      return !!this._organizationModel.id || this.isOrgOwner();\n    }\n    return false;\n  },\n\n  isOrgOwner: function () {\n    if (this._organizationModel) {\n      return this._organizationModel.getOwnerId() === this.get('id');\n    }\n    return false;\n  },\n\n  isOrgAdmin: function () {\n    if (this._organizationModel) {\n      return this._organizationModel.isOrgAdmin(this);\n    }\n    return false;\n  },\n\n  featureEnabled: function (name) {\n    var featureFlags = this.get('feature_flags');\n    if (!featureFlags || featureFlags.length === 0 || !name) {\n      return false;\n    }\n    return _.contains(featureFlags, name);\n  },\n\n  upgradeContactEmail: function () {\n    if (this.isInsideOrg()) {\n      if (this.isOrgOwner()) {\n        return 'enterprise-support@carto.com';\n      } else {\n        return this._organizationModel.getOwnerEmail();\n      }\n    } else {\n      return 'support@carto.com';\n    }\n  },\n\n  nameOrUsername: function () {\n    return this.get('name') || this.get('username');\n  },\n\n  getMaxConcurrentImports: function () {\n    return (this.get('limits') && this.get('limits').concurrent_imports) || 1;\n  },\n\n  getSchemaName: function () {\n    return this.isInsideOrg() ? this.get('username') : 'public';\n  },\n\n  renderData: function (currentUser) {\n    var name = this.get('username');\n    if (currentUser && currentUser.id === this.id) {\n      name = _t('user.you');\n    }\n    return {\n      username: name,\n      avatar_url: this.get('avatar_url')\n    };\n  },\n\n  clone: function () {\n    var attrs = _.clone(this.attributes);\n    delete attrs.id;\n    return new UserModel(attrs, {\n      configModel: this._configModel\n    });\n  },\n\n  getOrganization: function () {\n    return this._organizationModel;\n  }\n});\n\nmodule.exports = UserModel;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n *  User Notifications\n *\n */\n\nvar UserNotifications = Backbone.Model.extend({\n  sync: function (method, model, options) {\n    return Backbone.sync('update', model, options);\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v3/notifications/' + this.get('key');\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.key) throw new Error('key is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n    this.attributes = _.extend({ notifications: attrs }, { key: opts.key });\n  },\n\n  getKey: function (key) {\n    var notifications = this.get('notifications') || {};\n    return notifications[key];\n  },\n\n  setKey: function (key, value) {\n    var notifications = this.get('notifications') || {};\n    notifications[key] = value;\n    this.set('notifications', notifications);\n  }\n});\n\nmodule.exports = UserNotifications;\n",
    "var Backbone = require('backbone');\nvar syncAbort = require('./backbone/sync-abort');\n\n/**\n * A collection representing a set of users in a group.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  sync: syncAbort,\n\n  initialize: function (models, opts) {\n    if (!opts.group) throw new Error('group is required');\n    this.group = opts.group;\n    this.configModel = opts.configModel;\n    this.organization = opts.organization;\n  },\n\n  url: function (method) {\n    var baseUrl = this.configModel.get('base_url');\n    var version = this.configModel.urlVersion('organizationGroups', method);\n    return baseUrl + '/api/' + version + '/organization/' + this.organization.id + '/groups/' + this.group.id + '/users';\n  },\n\n  parse: function (response) {\n    this.total_entries = response.total_entries;\n    this.total_user_entries = response.total_user_entries;\n\n    return response.users;\n  },\n\n  totalCount: function () {\n    return this.total_user_entries;\n  }\n\n});\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar UsersGroup = require('./users-group-collection');\n\n// This module fetch the user for every group present\n// in the ACL permission collection. The vizjson doesn't\n// provide and we need it for the sharing stats in the header.\n\nmodule.exports = {\n  track: function (opts) {\n    this.acl = opts.acl;\n    this.configModel = opts.configModel;\n    this.userModel = opts.userModel;\n\n    this.acl.on('reset', this.fetchUsers, this);\n    this.fetchUsers();\n  },\n\n  fetchUsers: function () {\n    var self = this;\n    var promises = [];\n\n    promises = _.map(this.acl.where({type: 'group'}), function (group) {\n      var entity = group.get('entity');\n      var deferred = new $.Deferred();\n\n      if (!entity.users || entity.users.length === 0) {\n        entity.users = new UsersGroup([], {\n          group: entity,\n          configModel: self.configModel,\n          organization: self.userModel.getOrganization()\n        });\n\n        entity.users.fetch({\n          success: function () {\n            deferred.resolve();\n          }\n        });\n      } else {\n        deferred.resolve();\n      }\n\n      return deferred.promise();\n    }, this);\n\n    $.when.apply($, promises).done(function () {\n      self.acl.trigger('fetch');\n    });\n  }\n};\n",
    "var Backbone = require('backbone');\nvar PermissionModel = require('./permission-model');\n\n/**\n * Model that represents a visualization (v3)\n *\n * Even though a table might be represented as a Visualization in some cases, please use TableModel if you want to work\n * with the table data instead of adding table-specific methods here.\n */\n\nvar PRIVACY_OPTIONS = ['PUBLIC', 'LINK', 'PRIVATE', 'PASSWORD'];\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    visChanges: 0\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n\n    if (this.get('permission')) {\n      this._permissionModel = new PermissionModel(this.get('permission'), {\n        configModel: opts.configModel\n      });\n      this.unset('permission');\n    }\n  },\n\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('visualization');\n    return baseUrl + '/api/' + version + '/viz';\n  },\n\n  mapcapsURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v3/viz/' + this.id + '/mapcaps';\n  },\n\n  embedURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/builder/' + this.id + '/embed';\n  },\n\n  builderURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/builder/' + this.id + '/';\n  },\n\n  vizjsonURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('vizjson', 'read', 'v3');\n    return baseUrl + '/api/' + version + '/viz/' + this.id + '/viz.json';\n  },\n\n  stateURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v3/viz/' + this.id + '/state';\n  },\n\n  isVisualization: function () {\n    return this.get('type') === 'derived';\n  },\n\n  privacyOptions: function () {\n    return PRIVACY_OPTIONS;\n  },\n\n  recordChange: function () {\n    var visChanges = this.get('visChanges');\n    this.set('visChanges', visChanges + 1);\n  },\n\n  resetChanges: function () {\n    this.set('visChanges', 0);\n  },\n\n  getPermissionModel: function () {\n    return this._permissionModel;\n  }\n});\n",
    "var Backbone = require('backbone');\n\n/**\n *  Edit vis metadata dialog model\n *  to control if name and metadata\n *  are editable or not.\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    name: ''\n  },\n\n  validate: function (attrs) {\n    if (!attrs) return;\n    if (!attrs.name) {\n      return _t('components.modals.maps-metadata.validation.error.name');\n    }\n  }\n});\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar TableModel = require('./table-model');\nvar PermissionModel = require('./permission-model');\nvar SynchronizationModel = require('./synchronization-model');\nvar LikesModel = require('../components/likes/likes-model');\n\n/**\n * Model that represents a table visualization (v3)\n *\n */\n\nvar PRIVACY_OPTIONS = ['PUBLIC', 'LINK', 'PRIVATE'];\n\nmodule.exports = Backbone.Model.extend({\n\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('visualization');\n    return baseUrl + '/api/' + version + '/viz';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    this._configModel = opts.configModel;\n\n    this._initModels();\n  },\n\n  _initModels: function () {\n    var d = this.get('table');\n    if (!_.isEmpty(this.get('external_source'))) {\n      d = this.get('external_source');\n    }\n    this._tableModel = new TableModel(d, {\n      configModel: this._configModel,\n      parse: true\n    });\n\n    if (this.get('permission')) {\n      this._permissionModel = new PermissionModel(this.get('permission'), {\n        configModel: this._configModel\n      });\n      this.unset('permission');\n    }\n\n    this._likesModel = LikesModel.newByVisData({\n      vis_id: this.id,\n      liked: this.get('liked'),\n      likes: this.get('likes'),\n      configModel: this._configModel\n    });\n\n    if (this.get('synchronization')) {\n      this._synchronizationModel = new SynchronizationModel(this.get('synchronization'), {\n        configModel: this._configModel\n      });\n      this._synchronizationModel.linkToTable(this._tableModel);\n    }\n  },\n\n  isVisualization: function () {\n    return false;\n  },\n\n  getTableModel: function () {\n    return this._tableModel;\n  },\n\n  getLikesModel: function () {\n    return this._likesModel;\n  },\n\n  getPermissionModel: function () {\n    return this._permissionModel;\n  },\n\n  getSynchronizationModel: function () {\n    return this._synchronizationModel;\n  },\n\n  vizjsonURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('vizjson', 'read', 'v3');\n    return baseUrl + '/api/' + version + '/viz/' + this.id + '/viz.json';\n  },\n\n  isRaster: function () {\n    return this.get('kind') === 'raster';\n  },\n\n  datasetURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var tableName = this.getTableModel().getUnquotedName();\n    return baseUrl + '/dataset/' + tableName;\n  },\n\n  privacyOptions: function () {\n    return PRIVACY_OPTIONS;\n  },\n\n  toJSON: function () {\n    return _.omit(this.attributes, 'synchronization', 'stats', 'table');\n  }\n});\n",
    "var ACTIVE_LOCALE = window.ACTIVE_LOCALE;\nif (ACTIVE_LOCALE !== 'en') {\n  require('moment/locale/' + ACTIVE_LOCALE);\n}\nvar Locale = require('../../locale/index');\nvar Polyglot = require('node-polyglot');\nvar polyglot = new Polyglot({\n  locale: ACTIVE_LOCALE, // Needed for pluralize behaviour\n  phrases: Locale[ACTIVE_LOCALE]\n});\nwindow._t = polyglot.t.bind(polyglot);\n\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar ConfigModel = require('./data/config-model');\nvar DatasetContentView = require('./dataset/dataset-content/dataset-content-view');\nvar DatasetOptionsView = require('./dataset/dataset-options/dataset-options-view');\nvar ModalsServiceModel = require('./components/modals/modals-service-model');\nvar MetricsTracker = require('./components/metrics/metrics-tracker');\nvar AnalysisDefinitionNodeSourceModel = require('./data/analysis-definition-node-source-model');\nvar LayerDefinitionModel = require('./data/layer-definition-model');\nvar TableModel = require('./data/table-model');\nvar VisTableModel = require('./data/visualization-table-model');\nvar DatasetUnlockModalView = require('./dataset/dataset-unlock-modal-view');\nvar EditorModel = require('./data/editor-model');\nvar UserModel = require('./data/user-model');\nvar HeaderView = require('./dataset/dataset-header/dataset-header-view');\nvar Notifier = require('./components/notifier/notifier');\nvar UserGroupFetcher = require('./data/users-group-fetcher');\nvar SQLUtils = require('./helpers/sql-utils');\nvar BuilderActivatedNotification = require('./components/onboardings/builder-activated/builder-activated-notification-view');\nvar UserNotifications = require('./data/user-notifications');\nvar layerTypesAndKinds = require('./data/layer-types-and-kinds');\n\nvar userData = window.userData;\nvar visData = window.visualizationData;\nvar tableData = window.tableData;\nvar layersData = window.layersData;\nvar frontendConfig = window.frontendConfig;\nvar authTokens = window.authTokens;\nvar dashboardNotifications = window.dashboardNotifications;\n\nvar configModel = new ConfigModel(\n  _.defaults(\n    {\n      base_url: userData.base_url,\n      api_key: userData.api_key,\n      auth_tokens: authTokens\n    },\n    frontendConfig\n  )\n);\nvar userModel = new UserModel(userData, { configModel: configModel });\nvar modals = new ModalsServiceModel();\nvar tableModel = new TableModel(tableData, { parse: true, configModel: configModel });\nvar editorModel = new EditorModel();\nvar Router = new Backbone.Router();\nvar visModel = new VisTableModel(visData, { configModel: configModel });\nvar layersCollection = new Backbone.Collection(layersData);\nvar layerDataModel = layersCollection.find(function (mdl) {\n  var kind = mdl.get('kind');\n  return layerTypesAndKinds.isKindDataLayer(kind);\n});\n\nvar layerModel = new LayerDefinitionModel(layerDataModel.toJSON(), {\n  configModel: configModel,\n  parse: true\n});\n\nlayerModel.url = function () {\n  var baseUrl = configModel.get('base_url');\n  return baseUrl + '/api/v1/maps/' + visData.map_id + '/layers/' + layerModel.id;\n};\n\n// It is possible that a layer doesn't contain\nif (!layerModel.get('sql')) {\n  var defaultQuery = SQLUtils.getDefaultSQL(\n    tableModel.getUnqualifiedName(),\n    tableModel.get('permission').owner.username,\n    userModel.isInsideOrg()\n  );\n  layerModel.set('sql', defaultQuery);\n}\n\nvar analysisDefinitionNodeModel = new AnalysisDefinitionNodeSourceModel({\n  table_name: tableData.name,\n  query: layerModel.get('sql'),\n  type: 'source',\n  id: 'dummy-id'\n}, {\n  configModel: configModel,\n  userModel: userModel,\n  tableData: _.extend(\n    tableData,\n    {\n      synchronization: visData.synchronization || {}\n    }\n  )\n});\n\nUserGroupFetcher.track({\n  userModel: userModel,\n  configModel: configModel,\n  acl: visModel.getPermissionModel().acl\n});\n\n// Request geometries is case that the sql is custom, if not, follow\n// what table info provides\nvar queryGeometryModel = analysisDefinitionNodeModel.queryGeometryModel;\n\nif (!analysisDefinitionNodeModel.isCustomQueryApplied()) {\n  var simpleGeom = tableModel.getGeometryType();\n  queryGeometryModel.set({\n    status: 'fetched',\n    simple_geom: simpleGeom && simpleGeom[0]\n  });\n} else {\n  queryGeometryModel.fetch();\n}\n\nNotifier.init({\n  editorModel: editorModel\n});\n\nMetricsTracker.init({\n  userId: userModel.get('id'),\n  visId: visModel.get('id'),\n  configModel: configModel\n});\n\nvar headerView = new HeaderView({\n  router: Router,\n  modals: modals,\n  configModel: configModel,\n  userModel: userModel,\n  visModel: visModel,\n  analysisDefinitionNodeModel: analysisDefinitionNodeModel,\n  layerDefinitionModel: layerModel\n});\n$('.js-info').append(headerView.render().el);\n\nvar datasetContentView = new DatasetContentView({\n  el: $('.js-table'),\n  modals: modals,\n  userModel: userModel,\n  visModel: visModel,\n  analysisDefinitionNodeModel: analysisDefinitionNodeModel,\n  configModel: configModel\n});\ndatasetContentView.render();\n\nvar datasetOptionsView = new DatasetOptionsView({\n  el: $('.js-datasetOptions'),\n  editorModel: editorModel,\n  router: Router,\n  modals: modals,\n  configModel: configModel,\n  userModel: userModel,\n  visModel: visModel,\n  analysisDefinitionNodeModel: analysisDefinitionNodeModel,\n  layerDefinitionModel: layerModel\n});\n\ndatasetOptionsView.render();\n\nvar notifierView = Notifier.getView();\n$('.js-notifier').append(notifierView.render().el);\n\nvar rootUrl = configModel.get('base_url').replace(window.location.origin, '') + '/dataset/';\nBackbone.history.start({\n  pushState: true,\n  root: rootUrl\n});\n\nif (tableModel.isOwner(userModel) && visModel.get('locked')) {\n  modals.create(function (modalModel) {\n    return new DatasetUnlockModalView({\n      modalModel: modalModel,\n      visModel: visModel,\n      configModel: configModel,\n      tableName: tableModel.getUnquotedName()\n    });\n  });\n}\n\nif (!configModel.get('cartodb_com_hosted')) {\n  if (userModel.get('actions').builder_enabled && userModel.get('show_builder_activated_message') &&\n      _.isEmpty(dashboardNotifications)) {\n    var builderActivatedNotification = new UserNotifications(dashboardNotifications, {\n      key: 'dashboard',\n      configModel: configModel\n    });\n\n    var builderActivatedNotificationView = new BuilderActivatedNotification({\n      builderActivatedNotification: builderActivatedNotification\n    });\n\n    $('.js-editor').addClass('Editor--topBar');\n    builderActivatedNotificationView.bind('clean', function () {\n      $('.js-editor').removeClass('Editor--topBar');\n    }, this);\n  }\n}\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar UndoManager = require('../data/undo-manager.js');\n\n/**\n *  Data SQL Undo-redo model\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    content: ''\n  },\n\n  initialize: function (attrs, opts) {\n    this._history = this._generateHistory(opts && opts.history);\n\n    UndoManager.init(this, {\n      track: true,\n      history: this._history\n    });\n  },\n\n  _generateHistory: function (history) {\n    if (history && history.length) {\n      var data = _.reduce(history, function (memo, sql) {\n        memo.push({\n          content: sql\n        });\n        return memo;\n      }, [], this);\n      return data;\n    }\n\n    return false;\n  },\n\n  getHistory: function () {\n    return _.pluck(\n      this.getUndoHistory(),\n      'content'\n    );\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar ModalExportDataView = require('../../components/modals/export-data/modal-export-data-view');\nvar SyncInfoView = require('./dataset-content-sync-view');\nvar template = require('./dataset-content-options.tpl');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodeModel',\n  'configModel',\n  'modals',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  className: 'Dataset-viewOptions u-flex u-justifySpace u-alignCenter',\n\n  events: {\n    'click .js-addRow': '_onAddRowClick',\n    'click .js-addColumn': '_onAddColumnClick',\n    'click .js-export': '_onExportClick'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._tableModel = this._analysisDefinitionNodeModel.getTableModel();\n    this._querySchemaModel = this._analysisDefinitionNodeModel.querySchemaModel;\n    this._queryGeometryModel = this._analysisDefinitionNodeModel.queryGeometryModel;\n    this._syncModel = this._tableModel.getSyncModel();\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        isEditable: !this._analysisDefinitionNodeModel.isReadOnly(),\n        isCustomQueryApplied: this._analysisDefinitionNodeModel.isCustomQueryApplied()\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._querySchemaModel, 'change:query', this.render);\n    this.listenTo(this._syncModel, 'destroy', this.render);\n  },\n\n  _initViews: function () {\n    if (this._tableModel.isSync() && this._tableModel.isOwner(this._userModel)) {\n      var syncInfo = new SyncInfoView({\n        modals: this._modals,\n        syncModel: this._syncModel,\n        tableModel: this._tableModel,\n        querySchemaModel: this._querySchemaModel\n      });\n\n      this.$('.js-sync').html(syncInfo.render().el);\n      this.addView(syncInfo);\n    }\n  },\n\n  _onExportClick: function () {\n    this._modals.create(function (modalModel) {\n      return new ModalExportDataView({\n        modalModel: modalModel,\n        configModel: this._configModel,\n        fileName: this._tableModel.getUnquotedName(),\n        queryGeometryModel: this._queryGeometryModel\n      });\n    }.bind(this));\n  },\n\n  _onAddRowClick: function () {\n    this.trigger('addRow', this);\n  },\n\n  _onAddColumnClick: function () {\n    this.trigger('addColumn', this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"js-sync\"></div>\\n<div class=\"js-dataset\">\\n  <ul class=\"u-flex u-justifySpace\">\\n    ';\n if (isEditable) { \n__p+='\\n      <li>\\n        <button class=\"CDB-Text CDB-Size-small is-semibold u-actionTextColor u-upperCase js-addRow\">\\n          <div class=\"u-flex u-alignCenter\">\\n            <svg width=\"16px\" height=\"18px\" viewBox=\"0 0 16 6\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n              <defs>\\n                <path d=\"M4,3 L4,0 L3,0 L3,3 L0,3 L0,4 L3,4 L3,7 L4,7 L4,4 L7,4 L7,3 L4,3 Z\" id=\"path-1\"></path>\\n                <mask id=\"mask-2\" maskContentUnits=\"userSpaceOnUse\" maskUnits=\"objectBoundingBox\" x=\"0\" y=\"0\" width=\"7\" height=\"7\" fill=\"white\">\\n                    <use xlink:href=\"#path-1\"></use>\\n                </mask>\\n              </defs>\\n              <g id=\"Add-Row\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n                <use id=\"Combined-Shape\" stroke=\"#1181FB\" mask=\"url(#mask-2)\" stroke-width=\"2\" xlink:href=\"#path-1\"></use>\\n                <path d=\"M16,0 L16,3 L9,3 L9,0 L16,0 Z M10.0020142,1 L10.000989,2.01795972 L14.9926249,2.00301586 L14.9962966,1.00580263 L10.0020142,1 Z\" id=\"Combined-Shape\" fill=\"#1181FB\"></path>\\n                <path d=\"M16,4 L16,7 L9,7 L9,4 L16,4 Z M10.0020142,5 L10.000989,6.01795972 L14.9926249,6.00301586 L14.9962966,5.00580263 L10.0020142,5 Z\" id=\"Combined-Shape-Copy\" fill=\"#1181FB\"></path>\\n              </g>\\n            </svg>\\n            <span class=\"u-lSpace\">\\n              '+\n((__t=( _t('dataset.options.add-row') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </div>\\n        </button>\\n      </li>\\n      <li class=\"u-lSpace--xl\">\\n        <button class=\"CDB-Text CDB-Size-small is-semibold u-actionTextColor u-upperCase js-addColumn\">\\n          <div class=\"u-flex u-alignCenter\">\\n            <svg width=\"16px\" height=\"18px\" viewBox=\"0 4 16 6\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n              <g id=\"Add-Column\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(0.000000, 4.000000)\">\\n                <path d=\"M4,3 L4,0 L3,0 L3,3 L0,3 L0,4 L3,4 L3,7 L4,7 L4,4 L7,4 L7,3 L4,3 Z\" id=\"Combined-Shape\" fill=\"#1181FB\"></path>\\n                <path d=\"M9,0 L12,0 L12,7 L9,7 L9,0 Z M10,1 L11,1 L11,6 L10,6 L10,1 Z\" id=\"Combined-Shape\" fill=\"#1181FB\"></path>\\n                <path d=\"M13,0 L16,0 L16,7 L13,7 L13,0 Z M14,1 L15,1 L15,6 L14,6 L14,1 Z\" id=\"Combined-Shape-Copy-2\" fill=\"#1181FB\"></path>\\n              </g>\\n            </svg>\\n            <span class=\"u-lSpace\">\\n              '+\n((__t=( _t('dataset.options.add-column') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </div>\\n        </button>\\n      </li>\\n    ';\n } \n__p+='\\n    <li class=\"u-lSpace--xl\">\\n      <button class=\"CDB-Text CDB-Size-small is-semibold u-actionTextColor u-upperCase is-disabled js-export\">\\n        <div class=\"u-flex u-alignCenter\">\\n          <svg width=\"11px\" height=\"18px\" viewBox=\"-1 2 11 10\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n            <g id=\"Esport\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(0.000000, 3.000000)\" stroke-linecap=\"square\">\\n              <path d=\"M4.5,0.5 L4.5,6.5\" id=\"Line\" stroke=\"#1181FB\"></path>\\n              <path d=\"M4.5,7.5 L8.5,3.5\" id=\"Line\" stroke=\"#1181FB\"></path>\\n              <path d=\"M4.5,7.5 L0.5,3.5\" id=\"Line\" stroke=\"#1181FB\"></path>\\n            </g>\\n          </svg>\\n          <span class=\"u-lSpace\">\\n            '+\n((__t=( _t('dataset.options.export') ))==null?'':_.escape(__t))+\n'\\n          </span>\\n        </div>\\n      </button>\\n    </li>\\n  </ul>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar TipsyTooltipView = require('../../components/tipsy-tooltip-view');\nvar CreationModalView = require('../../components/modals/creation/modal-creation-view');\nvar SyncOptionsModalView = require('../../components/modals/sync-options/sync-options-modal-view');\nvar SyncModel = require('../../data/synchronization-model');\nvar template = require('./dataset-content-sync.tpl');\nvar moment = require('moment');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'syncModel',\n  'tableModel',\n  'querySchemaModel',\n  'modals'\n];\n\nmodule.exports = CoreView.extend({\n  tagName: 'div',\n  className: 'SyncInfo',\n\n  events: {\n    'click .js-options': '_onClickOptions',\n    'click .js-syncNow': '_onClickSyncNow'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._startSync = this._startSync.bind(this);\n\n    this._initBinds();\n\n    // Check sync now button\n    if (this._syncModel.isSyncing()) {\n      this._showSyncNowModal();\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var runAt = this._syncModel.get('run_at');\n\n    var d = {\n      canSyncNow: this._syncModel.canSyncNow(),\n      fromExternalSource: this._syncModel.get('from_external_source'),\n      ranAt: moment(this._syncModel.get('ran_at') || new Date()).fromNow(),\n      runAt: moment(runAt).fromNow(),\n      state: this._syncModel.get('state'),\n      errorCode: this._syncModel.get('error_code'),\n      errorMessage: this._syncModel.get('error_message')\n    };\n\n    // Due to the time we need to polling, we have to display to the user\n    // that the sync will be in a moment\n    if (!runAt || (new Date(runAt) <= new Date())) {\n      d.runAt = _t('dataset.sync.in-a-moment');\n    }\n\n    this.$el\n      .html(template(d))\n      .removeClass()\n      .addClass(this.className + ' ' + 'is-' + d.state);\n\n    // Tipsy\n    var tooltip = new TipsyTooltipView({\n      el: this.$('.js-syncNowDisabled'),\n      title: function () {\n        return _t('dataset.sync.disabled', {\n          gap: SyncModel.SYNC_GAP / (1000 * 60)\n        });\n      }\n    });\n    this.addView(tooltip);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    // Unbind in clean method\n    this._syncModel.bind('change', this.render, this);\n  },\n\n  _bindChangeSyncEvent: function () {\n    this._syncModel.bind('change:state', this._finishSync, this);\n  },\n\n  _unbindChangeSyncEvent: function () {\n    this._syncModel.unbind(null, null, this);\n  },\n\n  _onClickSyncNow: function (e) {\n    if (e) this.killEvent(e);\n\n    if (this._syncModel.canSyncNow()) {\n      this._showSyncNowModal();\n    }\n  },\n\n  _onClickOptions: function (e) {\n    var self = this;\n    var tableName = this._tableModel.getUnqualifiedName();\n\n    this._modals.create(function (modalModel) {\n      return new SyncOptionsModalView({\n        modalModel: modalModel,\n        syncModel: self._syncModel,\n        tableName: tableName\n      });\n    });\n  },\n\n  _startSync: function () {\n    this.render();\n    this._bindChangeSyncEvent();\n    this._syncModel.pollCheck();\n  },\n\n  _finishSync: function () {\n    if (!this._syncModel.isSyncing()) {\n      this._unbindChangeSyncEvent();\n      this._syncModel.destroyCheck();\n\n      // Reload table\n      this._querySchemaModel.set({\n        status: 'unfetched',\n        query: 'SELECT * FROM ' + this._tableModel.getUnquotedName()\n      });\n\n      this.render();\n    }\n  },\n\n  _showSyncNowModal: function (e) {\n    var self = this;\n    var tableName = this._tableModel.getUnqualifiedName();\n\n    this._modals.create(function (modalModel) {\n      return new CreationModalView({\n        modalModel: modalModel,\n        loadingTitle: _t('dataset.sync.loading', { tableName: tableName }),\n        errorTitle: _t('dataset.sync.error', { tableName: tableName }),\n        runAction: function (opts) {\n          self._syncModel.set({\n            state: 'syncing',\n            error_code: '',\n            error_message: ''\n          });\n\n          self._syncModel.bind('change:state', function () {\n            if (!self._syncModel.isSyncing()) {\n              modalModel.destroy();\n            }\n          }, self);\n\n          self._syncModel.syncNow(self._startSync);\n        }\n      });\n    });\n  },\n\n  clean: function () {\n    this._unbindChangeSyncEvent();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<p class=\"CDB-Text CDB-Size-small u-secondaryTextColor\">\\n  <span class=\"SyncInfo-state SyncInfo-state--small SyncInfo-state--'+\n((__t=( state ))==null?'':_.escape(__t))+\n' u-rSpace--s\"></span>\\n  <span class=\"u-upperCase\">\\n    ';\n if (state === \"success\") { \n__p+='\\n      '+\n((__t=( _t('dataset.sync.synced', { ranAt: ranAt }) ))==null?'':_.escape(__t))+\n'.\\n    ';\n } else if (state === \"syncing\") { \n__p+='\\n      '+\n((__t=( _t('dataset.sync.syncing') ))==null?'':_.escape(__t))+\n'...\\n    ';\n } else if (state === \"failure\") { \n__p+='\\n      '+\n((__t=( _t('dataset.sync.sync-failed') ))==null?'':_.escape(__t))+\n'.\\n    ';\n } \n__p+='\\n  </span>\\n\\n  ';\n if (state === \"success\") { \n__p+='\\n    '+\n((__t=( _t('dataset.sync.next', { runAt: runAt }) ))==null?'':_.escape(__t))+\n'.\\n  ';\n } else if (state === \"syncing\") { \n__p+='\\n    ';\n /* There's no need to add extra text in this case. */ \n__p+='\\n  ';\n } else if (errorCode || errorMessage) { \n__p+='\\n    '+\n((__t=( _t('dataset.sync.error-code', { errorCode: errorCode }) ))==null?'':_.escape(__t))+\n': '+\n((__t=( errorMessage ))==null?'':_.escape(__t))+\n'.\\n  ';\n } \n__p+='\\n\\n  ';\n if (!fromExternalSource) { \n__p+='\\n    ';\n if (state !== \"syncing\") { \n__p+='\\n      <button class=\"';\n if (canSyncNow) { \n__p+='u-actionTextColor js-syncNow';\n } else { \n__p+='is-disabled js-syncNowDisabled';\n } \n__p+='\">'+\n((__t=( _t('dataset.sync.sync-now') ))==null?'':_.escape(__t))+\n'</button>.\\n    ';\n } \n__p+='\\n  ';\n } \n__p+='\\n\\n  ';\n if (state !== \"syncing\") { \n__p+='\\n    <button class=\"js-options u-actionTextColor\">'+\n((__t=( _t('dataset.sync.view-options') ))==null?'':_.escape(__t))+\n'</button>.\\n  ';\n } \n__p+='\\n</p>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar TableManager = require('../../components/table/table-manager');\nvar DatasetContentOptionsView = require('./dataset-content-options-view');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodeModel',\n  'configModel',\n  'modals',\n  'userModel',\n  'visModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this.listenTo(this._visModel, 'change:name', this._onChangeTableVisName);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._tableView = TableManager.create({\n      relativePositionated: true,\n      analysisDefinitionNodeModel: this._analysisDefinitionNodeModel,\n      configModel: this._configModel,\n      modals: this._modals,\n      userModel: this._userModel\n    });\n    this.addView(this._tableView);\n    this.$el.append(this._tableView.render().el);\n\n    var datasetContentOptionsView = new DatasetContentOptionsView({\n      modals: this._modals,\n      userModel: this._userModel,\n      analysisDefinitionNodeModel: this._analysisDefinitionNodeModel,\n      configModel: this._configModel\n    });\n    datasetContentOptionsView.bind('addColumn', function () {\n      this._tableView.addColumn();\n    }, this);\n    datasetContentOptionsView.bind('addRow', function () {\n      this._tableView.addRow();\n    }, this);\n\n    this.addView(datasetContentOptionsView);\n    this.$el.prepend(datasetContentOptionsView.render().el);\n  },\n\n  _onChangeTableVisName: function () {\n    // Although all operations related with table rename are managed in the analysis-definition-source-node-model\n    // this columnsCollection doesn't belong to it and we need to take from it is generated.\n    this._tableView && this._tableView.getColumnsCollection().setTableName(this._visModel.get('name'));\n  }\n});\n",
    "var _ = require('underscore');\nvar ContextMenuView = require('../../components/context-menu/context-menu-view');\nvar CustomListCollection = require('../../components/custom-list/custom-list-collection');\nvar REQUIRED_OPTS = [\n  'ev',\n  'isTableOwner',\n  'isSync',\n  'isCustomQuery',\n  'triggerElementID'\n];\n\nmodule.exports = function (opts) {\n  _.each(REQUIRED_OPTS, function (item) {\n    if (opts[item] === undefined) throw new Error(item + ' is required');\n    this['_' + item] = opts[item];\n  }, this);\n\n  var position = { x: this._ev.clientX, y: this._ev.clientY };\n  var menuItems = [\n    {\n      label: _t('dataset.duplicate.' + (this._isCustomQuery ? 'customOption' : 'option')),\n      val: 'duplicate',\n      action: function () {\n        this.trigger('duplicate', this);\n      }\n    }\n  ];\n\n  if (this._isTableOwner) {\n    if (!this._isSync) {\n      menuItems.push({\n        label: _t('dataset.rename.option'),\n        val: 'rename',\n        action: function () {\n          this.trigger('rename', this);\n        }\n      });\n    }\n\n    menuItems = menuItems.concat([\n      {\n        label: _t('dataset.metadata.option'),\n        val: 'metadata',\n        action: function () {\n          this.trigger('metadata', this);\n        }\n      }, {\n        label: _t('dataset.lock.option'),\n        val: 'lock',\n        action: function () {\n          this.trigger('lock', this);\n        }\n      }, {\n        label: _t('dataset.delete.option'),\n        val: 'delete',\n        destructive: true,\n        action: function () {\n          this.trigger('delete', this);\n        }\n      }\n    ]);\n  }\n\n  var collection = new CustomListCollection(menuItems);\n\n  var view = new ContextMenuView({\n    collection: collection,\n    triggerElementID: this._triggerElementID,\n    position: position\n  });\n\n  collection.bind('change:selected', function (menuItem) {\n    var action = menuItem.get('action');\n    action && action.bind(view)(menuItem);\n  }, view);\n\n  view.model.bind('change:visible', function (model, isContextMenuVisible) {\n    if (view && !isContextMenuVisible) {\n      collection.unbind(null, null, view);\n      view.model.unbind(null, null, view);\n      view.remove();\n    }\n  }, view);\n\n  return view;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./dataset-header.tpl');\nvar moment = require('moment');\nvar InlineEditorView = require('../../components/inline-editor/inline-editor-view');\nvar TipsyTooltipView = require('../../components/tipsy-tooltip-view');\nvar renameTableOperation = require('../operations/table-rename-operation');\nvar templateInlineEditor = require('./inline-editor.tpl');\nvar ConfirmationModalView = require('../../components/modals/confirmation/modal-confirmation-view');\nvar RemoveDatasetModalView = require('../../components/modals/remove-dataset/remove-dataset-view');\nvar PublishView = require('../../components/modals/publish/publish-view');\nvar PrivacyDropdown = require('../../components/privacy-dropdown/privacy-dropdown-view');\nvar PrivacyCollection = require('../../components/modals/publish/privacy-collection');\nvar CreatePrivacyOptions = require('../../components/modals/publish/create-privacy-options');\nvar ShareWith = require('../../components/modals/publish/share-with-view');\nvar CreationModalView = require('../../components/modals/creation/modal-creation-view');\nvar EditMetadataView = require('../../components/modals/dataset-metadata/dataset-metadata-view');\nvar VisTableModel = require('../../data/visualization-table-model');\nvar templateConfirmation = require('./rename-confirmation-modal.tpl');\nvar createContextMenu = require('./create-context-menu');\nvar tableDuplicationOperation = require('../operations/table-duplication-operation');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\nvar TITLE_SUFFIX = ' | CARTO';\n\nvar PRIVACY_MAP = {\n  public: 'green',\n  link: 'orange',\n  private: 'red'\n};\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodeModel',\n  'configModel',\n  'layerDefinitionModel',\n  'modals',\n  'router',\n  'userModel',\n  'visModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  className: 'Editor-HeaderInfoEditor',\n\n  events: {\n    'click .js-options': '_showContextMenu',\n    'click .js-privacy': '_onPrivacyClick'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    var privacyOptions = CreatePrivacyOptions(this._visModel, this._userModel);\n    this._querySchemaModel = this._analysisDefinitionNodeModel.querySchemaModel;\n    this._tableModel = this._analysisDefinitionNodeModel.getTableModel();\n    this._syncModel = this._tableModel.getSyncModel();\n    this._privacyCollection = new PrivacyCollection(privacyOptions);\n\n    this._setDocumentTitle();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var privacy = this._visModel.get('privacy');\n    var isOwner = this._tableModel.isOwner(this._userModel);\n    var permissionModel = this._tableModel._permissionModel;\n    var hasWriteAccess = permissionModel.isOwner(this._userModel) || permissionModel.hasWriteAccess(this._userModel);\n\n    this.$el.html(\n      template({\n        title: this._tableModel.getUnqualifiedName(),\n        privacy: privacy,\n        isOwner: this._tableModel.isOwner(this._userModel),\n        isCustomQueryApplied: this._isCustomQueryApplied(),\n        privacyDOMElement: isOwner ? 'button' : 'span',\n        isSync: this._tableModel.isSync(),\n        syncState: this._syncModel.get('state'),\n        cssClass: PRIVACY_MAP[privacy.toLowerCase()],\n        ago: moment(this._visModel.get('updated_at')).fromNow(),\n        avatar: this._userModel.get('avatar_url'),\n        isInsideOrg: this._userModel.isInsideOrg(),\n        hasWriteAccess: hasWriteAccess\n      })\n    );\n\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._syncModel, 'change:state change:interval destroy', this.render);\n    this.listenTo(this._visModel, 'change:name', this._onChangeName);\n    this.listenTo(this._visModel, 'change:privacy change:name', this.render);\n    this.listenTo(this._querySchemaModel, 'change:query', this.render);\n  },\n\n  _initViews: function () {\n    var privacyDropdown;\n    var shareWith;\n    var isOwner = this._tableModel.isOwner(this._userModel);\n\n    if (this._isDatasetOwner() && !this._tableModel.isSync()) {\n      this._inlineEditor = new InlineEditorView({\n        template: templateInlineEditor,\n        renderOptions: {\n          name: this._tableModel.getUnqualifiedName()\n        },\n        onEdit: this._onRenameTable.bind(this)\n      });\n\n      this.$('.js-name').html(this._inlineEditor.render().el);\n      this.addView(this._inlineEditor);\n    }\n\n    if (!this._userModel.isInsideOrg()) {\n      privacyDropdown = new PrivacyDropdown({\n        privacyCollection: this._privacyCollection,\n        visDefinitionModel: this._visModel,\n        userModel: this._userModel,\n        configModel: this._configModel\n      });\n\n      this.$('.js-privacyDropdown').html(privacyDropdown.render().el);\n      this.addView(privacyDropdown);\n    }\n\n    if (isOwner && this._userModel.isInsideOrg()) {\n      shareWith = new ShareWith({\n        visDefinitionModel: this._visModel,\n        userModel: this._userModel,\n        action: this._onPrivacyClick.bind(this),\n        separationClass: 'u-rSpace--m'\n      });\n      this.$('.js-share-users').append(shareWith.render().el);\n      this.addView(shareWith);\n    }\n\n    if (this._tableModel.isSync() && this.$('.js-syncState').length) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$('.js-syncState'),\n        gravity: 'n',\n        title: function () {\n          return this._getSyncInfo();\n        }.bind(this)\n      });\n      this.addView(tooltip);\n    }\n  },\n\n  _showContextMenu: function (ev) {\n    var isTableOwner = this._tableModel.isOwner(this._userModel);\n    var isSync = this._tableModel.isSync();\n    var triggerElementID = 'context-menu-trigger-' + this._tableModel.cid;\n    this.$('.js-options').attr('id', triggerElementID);\n\n    if (this._menuView && this._menuView.isVisible()) {\n      this._menuView.hide();\n      this._menuView.clean();\n      delete this._menuView;\n      return;\n    }\n\n    this._menuView = createContextMenu({\n      ev: ev,\n      isTableOwner: isTableOwner,\n      isCustomQuery: this._isCustomQueryApplied(),\n      isSync: isSync,\n      triggerElementID: triggerElementID\n    });\n    this._menuView.bind('rename', function () {\n      this._inlineEditor && this._inlineEditor.edit();\n    }, this);\n    this._menuView.bind('delete', this._deleteDataset, this);\n    this._menuView.bind('duplicate', this._duplicateDataset, this);\n    this._menuView.bind('lock', this._lockDataset, this);\n    this._menuView.bind('metadata', this._metadataDataset, this);\n\n    this._menuView.show();\n    this.addView(this._menuView);\n  },\n\n  _deleteDataset: function () {\n    var self = this;\n\n    this._modals.create(function (modalModel) {\n      return new RemoveDatasetModalView({\n        modalModel: modalModel,\n        userModel: self._userModel,\n        visModel: self._visModel,\n        tableModel: self._tableModel,\n        configModel: self._configModel\n      });\n    });\n  },\n\n  _duplicateDataset: function () {\n    var self = this;\n    var tableName = this._tableModel.getUnquotedName();\n    var name = this._isCustomQueryApplied() ? _t('dataset.duplicate.query') : tableName;\n\n    this._modals.create(function (modalModel) {\n      return new CreationModalView({\n        modalModel: modalModel,\n        loadingTitle: _t('dataset.duplicate.loading', { name: name }),\n        errorTitle: _t('dataset.duplicate.error', { name: name }),\n        runAction: function (opts) {\n          tableDuplicationOperation({\n            query: self._querySchemaModel.get('query'),\n            tableModel: self._tableModel,\n            configModel: self._configModel,\n            onSuccess: function (importModel) {\n              var tableName = importModel.get('table_name');\n              var visTableModel = new VisTableModel({\n                id: tableName,\n                table: {\n                  name: tableName\n                }\n              }, {\n                configModel: self._configModel\n              });\n\n              window.location = visTableModel.datasetURL();\n            },\n            onError: function (importModel) {\n              var error = importModel.get('get_error_text');\n              var errorMessage = error && error.title;\n              opts.error && opts.error(errorMessage);\n            }\n          });\n        }\n      });\n    });\n  },\n\n  _lockDataset: function () {\n    var self = this;\n    var tableName = this._tableModel.getUnquotedName();\n\n    this._modals.create(function (modalModel) {\n      return new CreationModalView({\n        modalModel: modalModel,\n        loadingTitle: _t('dataset.lock.loading', { tableName: tableName }),\n        errorTitle: _t('dataset.lock.error', { tableName: tableName }),\n        runAction: function (opts) {\n          self._visModel.save({\n            locked: true\n          }, {\n            wait: true,\n            success: function () {\n              window.location = self._configModel.get('base_url') + '/dashboard/datasets';\n            },\n            error: function () {\n              opts.error && opts.error();\n            }\n          });\n        }\n      });\n    });\n  },\n\n  _metadataDataset: function () {\n    var isLocked = this._tableModel.isSync();\n    var self = this;\n    this._modals.create(function (modalModel) {\n      return new EditMetadataView({\n        modalModel: modalModel,\n        visDefinitionModel: self._visModel,\n        configModel: self._configModel,\n        isLocked: isLocked\n      });\n    });\n  },\n\n  _onRenameTable: function (newName) {\n    var self = this;\n    this._inlineEditor.hide();\n\n    if (newName === this._visModel.get('name')) {\n      return;\n    }\n\n    this._modals.create(function (modalModel) {\n      return new ConfirmationModalView({\n        modalModel: modalModel,\n        template: templateConfirmation,\n        renderOpts: {\n          tableName: self._visModel.get('name')\n        },\n        runAction: function () {\n          modalModel.destroy();\n\n          renameTableOperation({\n            visModel: self._visModel,\n            newName: newName,\n            onError: self._onRenameFailed.bind(self)\n          });\n        }\n      });\n    });\n  },\n\n  _onRenameFailed: function () {\n    this._visModel.set('name', this._visModel.previous('name'), { silent: true });\n    this.render();\n  },\n\n  _onChangeName: function () {\n    var name = this._visModel.get('name');\n    this._analysisDefinitionNodeModel.setTableName(name);\n\n    this._setDocumentTitle();\n\n    this._layerDefinitionModel.save({\n      sql: this._analysisDefinitionNodeModel.getDefaultQuery()\n    });\n\n    this._router.navigate(name, {\n      replace: true\n    });\n  },\n\n  _onPrivacyClick: function () {\n    var self = this;\n\n    this._modals.create(function (modalModel) {\n      return new PublishView({\n        mapcapsCollection: self._mapcapsCollection,\n        modalModel: modalModel,\n        visDefinitionModel: self._visModel,\n        privacyCollection: self._privacyCollection,\n        userModel: self._userModel,\n        configModel: self._configModel,\n        mode: 'share'\n      });\n    });\n  },\n\n  _getSyncInfo: function () {\n    var state = this._syncModel.get('state');\n    if (state === 'success') {\n      return _t('dataset.sync.synced', { ranAt: moment(this._syncModel.get('ran_at') || new Date()).fromNow() });\n    } else if (state === 'failure') {\n      var errorCode = this._syncModel.get('error_code');\n      var errorMessage = this._syncModel.get('error_message');\n      return _t('dataset.sync.error-code', { errorCode: errorCode }) + ':' + errorMessage;\n    } else {\n      return _t('dataset.sync.syncing');\n    }\n  },\n\n  _setDocumentTitle: function () {\n    document.title = this._tableModel.get('name') + TITLE_SUFFIX;\n  },\n\n  _isCustomQueryApplied: function () {\n    return this._analysisDefinitionNodeModel.isCustomQueryApplied();\n  },\n\n  _isEditable: function () {\n    return !this._analysisDefinitionNodeModel.isReadOnly();\n  },\n\n  _isDatasetOwner: function () {\n    return this._tableModel.isOwner(this._userModel);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Editor-HeaderInfo-inner\">\\n  <div class=\"Editor-HeaderInfo-title u-bSpace--m u-flex u-alignCenter\">\\n    ';\n if (isSync && isOwner) { \n__p+='\\n      <div class=\"Editor-HeaderInfo-actions\">\\n        <span class=\"SyncInfo-state SyncInfo-state--'+\n((__t=( syncState ))==null?'':_.escape(__t))+\n' u-rSpace--m js-syncState\"></span>\\n      </div>\\n    ';\n } \n__p+='\\n\\n    <div class=\"Editor-HeaderInfo-titleText is-larger js-name\">\\n      <h2 class=\"u-ellipsis CDB-Text CDB-Size-huge is-light\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h2>\\n    </div>\\n\\n    <div class=\"Editor-HeaderInfo-details u-lSpace\">\\n      ';\n if (!hasWriteAccess) { \n__p+='\\n        <span class=\"Tag CDB-Text CDB-Size-small u-rSpace u-upperCase js-readPermissionTag\">'+\n((__t=( _t('dataset.read') ))==null?'':_.escape(__t))+\n'</span>\\n      ';\n } \n__p+='\\n\\n      ';\n if (isCustomQueryApplied) { \n__p+='\\n        <span class=\"Tag Tag--outline Tag-outline--dark CDB-Text CDB-Size-small u-secondaryTextColor u-rSpace\">'+\n((__t=( _t('dataset.sql') ))==null?'':_.escape(__t))+\n'</span>\\n      ';\n } \n__p+='\\n\\n      <button class=\"CDB-Shape js-options\">\\n        <div class=\"CDB-Shape-threePoints is-blue is-small\">\\n          <div class=\"CDB-Shape-threePointsItem\"></div>\\n          <div class=\"CDB-Shape-threePointsItem\"></div>\\n          <div class=\"CDB-Shape-threePointsItem\"></div>\\n        </div>\\n      </button>\\n    </div>\\n  </div>\\n\\n  <div class=\"u-bSpace--xl u-flex u-alignCenter\">\\n    <div class=\"js-privacyDropdown u-rSpace--m\">\\n      <'+\n((__t=( privacyDOMElement ))==null?'':_.escape(__t))+\n' class=\"u-actionTextColor ';\n if (isOwner) { \n__p+='js-privacy';\n } \n__p+='\">\\n        <i class=\"Tag Tag--big Tag-fill Tag-fill--'+\n((__t=( cssClass ))==null?'':_.escape(__t))+\n' CDB-Text CDB-Size-small u-upperCase\">'+\n((__t=( privacy ))==null?'':_.escape(__t))+\n'</i>\\n      </'+\n((__t=( privacyDOMElement ))==null?'':_.escape(__t))+\n'>\\n    </div>\\n    ';\n if (isOwner && isInsideOrg) { \n__p+='\\n      <div class=\"js-share-users\"></div>\\n    ';\n } \n__p+='\\n    <span class=\"CDB-Text CDB-Size-medium u-altTextColor\">'+\n((__t=( _t('dataset.updated', { ago: ago }) ))==null?'':_.escape(__t))+\n'</span>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"Inline-editor\" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">\\n  <h2 class=\"CDB-Text CDB-Size-huge is-light u-ellipsis js-title Inline-editor-text is-larger\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</h2>\\n  <input type=\"text\" name=\"text\" class=\"Inline-editor-input Inline-editor-input--small CDB-Text CDB-InputText js-input\" value=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\" readonly>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"12px\" height=\"23px\" viewBox=\"0 0 12 23\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <path d=\"M3.85948829,15.9093411 L3.85948829,15.113874 C3.85948829,13.9648603 4.03625698,13.0196388 4.38979966,12.2781813 C4.74334234,11.5367237 5.40131468,10.7535402 6.36373642,9.92860729 C7.6993421,8.79923484 8.54144849,7.94976308 8.89008086,7.38016654 C9.23871322,6.81057 9.41302679,6.12313622 9.41302679,5.31784456 C9.41302679,4.3161403 9.09140598,3.54277728 8.44815472,2.99773232 C7.80490345,2.45268735 6.87932296,2.18016896 5.67138547,2.18016896 C4.8955557,2.18016896 4.13937853,2.27100842 3.40283128,2.45269008 C2.66628403,2.63437173 1.82172252,2.96581302 0.869121409,3.44702389 L0,1.45835626 C1.85609907,0.486113893 3.7956444,0 5.81869418,0 C7.69443451,0 9.15277619,0.461562686 10.193763,1.38470191 C11.2347497,2.30784113 11.7552353,3.60905508 11.7552353,5.28838281 C11.7552353,6.0052888 11.6594856,6.63625482 11.4679833,7.18129978 C11.2764811,7.72634475 10.9941422,8.24192009 10.6209582,8.72804127 C10.2477743,9.21416246 9.44249472,9.99734595 8.20509534,11.0776153 C7.21321171,11.9221894 6.55769449,12.6243539 6.23852401,13.1841299 C5.91935354,13.7439058 5.7597707,14.4902624 5.7597707,15.4232223 L5.7597707,15.9093411 L3.85948829,15.9093411 Z M2.95990869,20.3988536 C2.95990869,19.3235103 3.49337277,18.7858468 4.56031694,18.7858468 C5.07600662,18.7858468 5.47388191,18.9242161 5.75395476,19.2009588 C6.0340276,19.4777016 6.17406192,19.8769958 6.17406192,20.3988536 C6.17406192,20.9048974 6.03180483,21.2982616 5.74728639,21.5789578 C5.46276794,21.859654 5.06711542,22 4.56031694,22 C4.09797446,22 3.71565854,21.8754676 3.41335769,21.6263992 C3.11105685,21.3773307 2.95990869,20.9681529 2.95990869,20.3988536 Z\" stroke=\"none\" fill=\"#FEB100\" fill-rule=\"evenodd\" opacity=\"1\"></path>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        '+\n((__t=( _t('dataset.rename.title', { tableName: tableName }) ))==null?'':_.escape(__t))+\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">'+\n((__t=( _t('dataset.rename.desc') ))==null?'':_.escape(__t))+\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('dataset.rename.cancel') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('dataset.rename.confirm') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"CodeMirror-error\">\\n  <li class=\"CodeMirror-errorMessage u-lSpace--xl u-rSpace--xl\">\\n    '+\n((__t=( _t('components.codemirror.syntax-error') ))==null?'':_.escape(__t))+\n': <span>'+\n((__t=( message ))==null?'':_.escape(__t))+\n'</span>\\n  </li>\\n  <li class=\"CodeMirror-errorDocs\">\\n    <a href=\"https://carto.com/docs/cartodb-platform/sql-api/\" target=\"_black\">'+\n((__t=( _t('components.codemirror.docs') ))==null?'':_.escape(__t))+\n'</a>\\n  </li>\\n</ul>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar template = require('./dataset-actions.tpl');\nvar UndoButtons = require('../../components/undo-redo/undo-redo-view');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'mapAction',\n  'previewAction',\n  'trackModel',\n  'editorModel',\n  'queryGeometryModel',\n  'onApply',\n  'onClear',\n  'clearSQLModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Dataset-options-actions',\n\n  events: {\n    'click .js-createMap': '_onCreateMap',\n    'click .js-previewMap': '_onPreviewMap'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._queryGeometryModel.bind('change:status', this.render, this);\n    this.add_related_model(this._queryGeometryModel);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        hasGeometry: this._queryGeometryModel.hasValue(),\n        canCreateMap: true\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var view = new UndoButtons({\n      className: 'u-rSpace--xl',\n      trackModel: this._trackModel,\n      editorModel: this._editorModel,\n      clearModel: this._clearSQLModel,\n      applyButton: true,\n      clearButton: true,\n      onApplyClick: this._onApply.bind(this),\n      onClearClick: this._onClear.bind(this)\n    });\n\n    this.$('.js-createMap').before(view.render().el);\n    this.addView(view);\n  },\n\n  _onApply: function () {\n    this._onApply && this._onApply();\n  },\n\n  _onClear: function () {\n    this._onClear && this._onClear();\n  },\n\n  _onCreateMap: function () {\n    this._mapAction && this._mapAction();\n  },\n\n  _onPreviewMap: function () {\n    this._previewAction && this._previewAction();\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar template = require('./dataset-actions.tpl');\n\n// 'mapAction' is not required  because a viewer user can't create maps\nvar OPTS = {\n  previewAction: true,\n  queryGeometryModel: true,\n  mapAction: false\n};\n\nmodule.exports = CoreView.extend({\n  className: 'Dataset-options-actions',\n\n  events: {\n    'click .js-createMap': '_onCreateMap',\n    'click .js-previewMap': '_onPreviewMap'\n  },\n\n  initialize: function (opts) {\n    _.each(OPTS, function (isRequired, item) {\n      if (opts[item]) {\n        this['_' + item] = opts[item];\n      } else if (isRequired) {\n        throw new Error(item + ' is required');\n      }\n    }, this);\n\n    this._queryGeometryModel.bind('change:status', this.render, this);\n    this.add_related_model(this._queryGeometryModel);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        hasGeometry: this._queryGeometryModel.hasValue(),\n        canCreateMap: !!this._mapAction\n      })\n    );\n    return this;\n  },\n\n  _onPreviewMap: function () {\n    this._previewAction && this._previewAction();\n  },\n\n  _onCreateMap: function () {\n    this._mapAction && this._mapAction();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (hasGeometry) { \n__p+='\\n  <button class=\"u-rSpace--xl Dataset-tablePreview js-previewMap\">\\n    <span class=\"u-upperCase CDB-Button-Text CDB-Text CDB-Size-small\">'+\n((__t=( _t('dataset.preview-map.preview') ))==null?'':_.escape(__t))+\n'</span>\\n  </button>\\n';\n } \n__p+='\\n';\n if (canCreateMap) { \n__p+='\\n  <button class=\"CDB-Button CDB-Button--primary u-upperCase js-createMap\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small\">'+\n((__t=( _t('dataset.create-map.title') ))==null?'':_.escape(__t))+\n'</span>\\n  </button>\\n';\n } \n__p+='\\n';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar VisDefinitionModel = require('../../data/vis-definition-model');\nvar CreationModalView = require('../../components/modals/creation/modal-creation-view');\nvar DatasetBaseView = require('../../components/dataset/dataset-base-view');\nvar errorParser = require('../../helpers/error-parser');\nvar PanelWithOptionsView = require('../../components/view-options/panel-with-options-view');\nvar TabPaneView = require('../../components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('../../components/tab-pane/tab-pane-collection');\nvar Toggler = require('../../components/toggler/toggler-view');\nvar DatasetEditorView = require('./dataset-sql-view');\nvar ActionView = require('./dataset-actions-view');\nvar PreviewMapView = require('./preview-map-view');\nvar ActionViewEdition = require('./dataset-actions-edition-view');\nvar DataSQLModel = require('../data-sql-model');\nvar SQLNotifications = require('../../sql-notifications');\nvar MetricsTracker = require('../../components/metrics/metrics-tracker');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodeModel',\n  'configModel',\n  'editorModel',\n  'layerDefinitionModel',\n  'modals',\n  'router',\n  'userModel',\n  'visModel'\n];\n\nmodule.exports = DatasetBaseView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._querySchemaModel = this._analysisDefinitionNodeModel.querySchemaModel;\n\n    if (!this._layerDefinitionModel.sqlModel) {\n      var sqlHistory = this._layerDefinitionModel.options && this._layerDefinitionModel.options.sql_history;\n      this._layerDefinitionModel.sqlModel = new DataSQLModel({\n        content: this._querySchemaModel.get('query')\n      }, {\n        history: sqlHistory || []\n      });\n    }\n\n    DatasetBaseView.prototype.initialize.call(this, {\n      layerDefinitionModel: this._layerDefinitionModel,\n      editorModel: this._editorModel,\n      configModel: this._configModel,\n      querySchemaModel: this._querySchemaModel\n    });\n\n    this._tableModel = this._analysisDefinitionNodeModel.getTableModel();\n    this._queryGeometryModel = this._analysisDefinitionNodeModel.queryGeometryModel;\n    this._canCreateMap = this._userModel.hasCreateMapsFeature();\n    this._parseSQL = this._internalParseSQL.bind(this);\n\n    SQLNotifications.track(this);\n\n    this._configPanes();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    this._checkClearButton();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._editorModel, 'change:edition', this._onChangeEdition);\n    this.listenTo(this._querySchemaModel, 'change:query_errors', this._showErrors);\n    this.listenTo(this._visModel, 'change:name', this._onChangeName);\n    this.listenTo(this._sqlModel, 'undo redo', function () {\n      this._codemirrorModel.set('content', this._sqlModel.get('content'));\n    });\n  },\n\n  _onChangeName: function (model, name) {\n    this._codemirrorModel.set('content', this._analysisDefinitionNodeModel.getDefaultQuery());\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var panelWithOptionsView = new PanelWithOptionsView({\n      editorModel: self._editorModel,\n      createContentView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane\n        });\n      },\n      createControlView: function () {\n        return new Toggler({\n          editorModel: self._editorModel,\n          labels: [_t('dataset.data'), _t('dataset.sql')]\n        });\n      },\n      createActionView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane,\n          createContentKey: 'createActionView'\n        });\n      }\n    });\n\n    this.$el.append(panelWithOptionsView.render().el);\n    this.addView(panelWithOptionsView);\n  },\n\n  _onChangeEdition: function () {\n    this.$el.toggleClass('is-dark', this._editorModel.isEditing());\n\n    var edition = this._editorModel.get('edition');\n    var index = edition ? 1 : 0;\n    this._collectionPane.at(index).set({ selected: true });\n  },\n\n  _configPanes: function () {\n    var self = this;\n    var tabPaneTabs = [{\n      selected: !this._editorModel.get('edition'),\n      createContentView: function () {\n        return new CoreView();\n      },\n      createActionView: function () {\n        var actionViewOptions = {\n          queryGeometryModel: self._queryGeometryModel,\n          previewAction: self._previewMap.bind(self)\n        };\n        if (self._canCreateMap) {\n          actionViewOptions.mapAction = self._createMap.bind(self);\n        }\n        return new ActionView(actionViewOptions);\n      }\n    }, {\n      selected: this._editorModel.get('edition'),\n      createContentView: function () {\n        return new DatasetEditorView({\n          editorModel: self._editorModel,\n          codemirrorModel: self._codemirrorModel,\n          onApplyEvent: self._parseSQL,\n          layerDefinitionModel: self._layerDefinitionModel,\n          querySchemaModel: self._querySchemaModel\n        });\n      },\n      createActionView: function () {\n        var actionViewOptions = {\n          clearSQLModel: self._clearSQLModel,\n          trackModel: self._sqlModel,\n          editorModel: self._editorModel,\n          queryGeometryModel: self._queryGeometryModel,\n          onApply: self._parseSQL,\n          previewAction: self._previewMap.bind(self),\n          onClear: self._clearSQL.bind(self)\n        };\n        if (self._canCreateMap) {\n          actionViewOptions.mapAction = self._createMap.bind(self);\n        }\n        return new ActionViewEdition(actionViewOptions);\n      }\n    }];\n\n    this._collectionPane = new TabPaneCollection(tabPaneTabs);\n  },\n\n  _runQuery: function (query, callback) {\n    this._querySchemaModel.set({\n      query: query,\n      status: 'unfetched'\n    });\n\n    this._queryGeometryModel.set({\n      query: query,\n      simple_geom: '',\n      status: 'unfetched'\n    }, {\n      silent: true\n    });\n\n    this._querySchemaModel.fetch({\n      success: callback\n    });\n\n    this._queryGeometryModel.fetch();\n  },\n\n  _saveSQL: function () {\n    var content = this._codemirrorModel.get('content');\n    this._sqlModel.set('content', content);\n    this._querySchemaModel.set('query_errors', []);\n\n    if (this._tableModel.hasWriteAccess(this._userModel)) {\n      this._layerDefinitionModel.save({\n        sql: content\n      });\n\n      MetricsTracker.track('Applied sql', {\n        dataset_id: this._tableModel.get('id'),\n        sql: content\n      });\n    }\n\n    SQLNotifications.showNotification({\n      status: 'success',\n      info: _t('notifications.sql.success'),\n      closable: true\n    });\n\n    this._checkClearButton();\n  },\n\n  _defaultSQL: function () {\n    return this._analysisDefinitionNodeModel.getDefaultQuery();\n  },\n\n  _previewMap: function () {\n    var previewMap = new PreviewMapView({\n      analysisDefinitionNodeModel: this._analysisDefinitionNodeModel,\n      configModel: this._configModel,\n      modals: this._modals,\n      userModel: this._userModel,\n      visModel: this._visModel\n    });\n    $('body').append(previewMap.render().el);\n    this.addView(previewMap);\n  },\n\n  _createMap: function () {\n    var self = this;\n    var tableName = this._tableModel.getUnquotedName();\n\n    this._modals.create(function (modalModel) {\n      return new CreationModalView({\n        modalModel: modalModel,\n        loadingTitle: _t('dataset.create-map.loading', { tableName: tableName }),\n        errorTitle: _t('dataset.create-map.error', { tableName: tableName }),\n        runAction: function (opts) {\n          var newVisModel = new VisDefinitionModel({\n            name: self._visModel.get('name') + ' ' + _t('editor.map')\n          }, {\n            configModel: self._configModel\n          });\n\n          newVisModel.save({\n            source_visualization_id: self._visModel.get('id')\n          }, {\n            success: function (visModel) {\n              window.location = visModel.builderURL();\n            },\n            error: function (mdl, e) {\n              opts.error && opts.error(errorParser(e));\n            }\n          });\n        }\n      });\n    });\n  }\n});\n",
    "var CoreView = require('backbone/core-view');\nvar CodeMirrorView = require('../../components/code-mirror/code-mirror-view');\nvar ErrorTemplate = require('./code-mirror-error.tpl');\nvar FactoryHints = require('../../editor/editor-hints/factory-hints');\nvar SQLHints = require('../../editor/editor-hints/sql-hints');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Editor-content Dataset-editor',\n\n  initialize: function (opts) {\n    if (!opts.codemirrorModel) throw new Error('codemirrorModel is required');\n    if (!opts.onApplyEvent) throw new Error('onApplyEvent');\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n\n    this._codemirrorModel = opts.codemirrorModel;\n    this._querySchemaModel = opts.querySchemaModel;\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n\n    FactoryHints.init({\n      querySchemaModel: this._querySchemaModel,\n      layerDefinitionModel: this._layerDefinitionModel,\n      tokens: SQLHints\n    });\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var hints = FactoryHints.reset().hints;\n    this.codeMirrorView = new CodeMirrorView({\n      className: 'Dataset-codemirror',\n      model: this._codemirrorModel,\n      hints: hints,\n      mode: 'text/x-pgsql',\n      tip: _t('editor.data.code-mirror.tip'),\n      errorTemplate: ErrorTemplate\n    });\n\n    this.codeMirrorView.bind('codeSaved', this._triggerCodeSaved, this);\n    this.addView(this.codeMirrorView);\n    this.$el.append(this.codeMirrorView.render().el);\n  },\n\n  _triggerCodeSaved: function (code, view) {\n    this.options.onApplyEvent && this.options.onApplyEvent();\n  }\n\n});\n",
    "var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar cdb = require('cartodb.js');\nvar CreationModalView = require('../../components/modals/creation/modal-creation-view');\nvar VisDefinitionModel = require('../../data/vis-definition-model');\nvar errorParser = require('../../helpers/error-parser');\nvar template = require('./preview-map.tpl');\nvar checkAndBuildOpts = require('../../helpers/required-opts');\nvar ESC_KEY_CODE = 27;\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodeModel',\n  'configModel',\n  'modals',\n  'userModel',\n  'visModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  className: 'PreviewMap',\n\n  events: {\n    'click .js-back': 'clean',\n    'click .js-createMap': '_createMap'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._tableModel = this._analysisDefinitionNodeModel.getTableModel();\n    this._querySchemaModel = this._analysisDefinitionNodeModel.querySchemaModel;\n    this._syncModel = this._tableModel.getSyncModel();\n    this._canCreateMap = this._userModel.hasCreateMapsFeature();\n    this._onKeyDown = this._onKeyDown.bind(this);\n\n    this._initKeydownBinds();\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        isOwner: this._tableModel.isOwner(this._userModel),\n        isSync: this._tableModel.isSync(),\n        syncState: this._syncModel.get('state'),\n        name: this._tableModel.get('name'),\n        isCustomQueryApplied: this._analysisDefinitionNodeModel.isCustomQueryApplied(),\n        canCreateMap: this._canCreateMap\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._map = cdb.createVis(\n      this.$('.js-map'),\n      this._visModel.vizjsonURL(),\n      {\n        legends: false,\n        authToken: this._configModel.get('auth_tokens')\n      }\n    );\n  },\n\n  _initKeydownBinds: function () {\n    $(document).bind('keydown', this._onKeyDown);\n  },\n\n  _destroyKeydownBinds: function () {\n    $(document).unbind('keydown', this._onKeyDown);\n  },\n\n  _onKeyDown: function (ev) {\n    var keyCode = ev.which;\n    if (keyCode === ESC_KEY_CODE) {\n      this.clean();\n    }\n  },\n\n  _createMap: function () {\n    var self = this;\n    var tableName = this._tableModel.getUnquotedName();\n\n    this._modals.create(function (modalModel) {\n      return new CreationModalView({\n        modalModel: modalModel,\n        loadingTitle: _t('dataset.create-map.loading', { tableName: tableName }),\n        errorTitle: _t('dataset.create-map.error', { tableName: tableName }),\n        runAction: function (opts) {\n          var newVisModel = new VisDefinitionModel({\n            name: self._visModel.get('name') + ' ' + _t('editor.map')\n          }, {\n            configModel: self._configModel\n          });\n\n          newVisModel.save({\n            source_visualization_id: self._visModel.get('id')\n          }, {\n            success: function (visModel) {\n              window.location = visModel.builderURL();\n            },\n            error: function (mdl, e) {\n              opts.error && opts.error(errorParser(e));\n            }\n          });\n        }\n      });\n    });\n  },\n\n  clean: function () {\n    this._destroyKeydownBinds();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"PreviewMap-canvas\">\\n  <div class=\"PreviewMap-map js-map\"></div>\\n  <div class=\"PreviewMap-info u-flex u-justifySpace u-alignCenter js-info\">\\n    <div class=\"PreviewMap-infoName u-flex u-alignCenter\">\\n      ';\n if (isSync && isOwner) { \n__p+='\\n        <span class=\"SyncInfo-state SyncInfo-state--'+\n((__t=( syncState ))==null?'':_.escape(__t))+\n' u-rSpace--m js-syncState\"></span>\\n      ';\n } \n__p+='\\n      <h2 class=\"u-ellipsis CDB-Text CDB-Size-large u-rSpace--m is-light\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</h2>\\n      ';\n if (isCustomQueryApplied) { \n__p+='\\n        <span class=\"CDB-Tag CDB-Tag--opaque u-secondaryTextColor CDB-Text CDB-Size-medium u-upperCase\">'+\n((__t=( _t('dataset.sql') ))==null?'':_.escape(__t))+\n'</span>\\n      ';\n } \n__p+='\\n    </div>\\n    <div class=\"PreviewMap-infoActions\">\\n      <button class=\"u-upperCase CDB-Text CDB-Size-small u-lSpace--xl u-actionTextColor js-back\">\\n        '+\n((__t=( _t('dataset.preview-map.back') ))==null?'':_.escape(__t))+\n'\\n      </button>\\n      ';\n if (canCreateMap) { \n__p+='\\n        <button class=\"CDB-Button CDB-Button--primary u-upperCase u-lSpace--xl js-createMap\">\\n          <span class=\"CDB-Button-Text CDB-Text CDB-Size-small\">'+\n((__t=( _t('dataset.create-map.title') ))==null?'':_.escape(__t))+\n'</span>\\n        </button>\\n      ';\n } \n__p+='\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar errorParser = require('../helpers/error-parser');\nvar template = require('./dataset-unlock-modal.tpl');\nvar renderLoading = require('../components/loading/render-loading');\nvar ErrorView = require('../components/error/error-view');\n\nvar REQUIRED_OPTS = [\n  'tableName',\n  'visModel',\n  'configModel',\n  'modalModel'\n];\n\n/**\n *  Remove confirmation dialog\n */\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-confirm': '_onConfirm',\n    'click .js-cancel': '_onCancel'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        tableName: this._tableName\n      })\n    );\n    return this;\n  },\n\n  _initBinds: function () {\n    $(document).bind('keydown', this._onKeyDown);\n\n    this._modalModel.bind('change:show', function () {\n      if (this._visModel.get('locked')) {\n        this._onCancel();\n      }\n    }, this);\n    this.add_related_model(this._modalModel);\n  },\n\n  _disableBinds: function () {\n    $(document).unbind('keydown', this._onKeyDown);\n  },\n\n  _onKeyDown: function (ev) {\n    var keyCode = ev.which;\n    if (keyCode === $.ui.keyCode.ENTER) {\n      this._onConfirm();\n    }\n  },\n\n  _renderLoadingView: function () {\n    this.$el.html(\n      renderLoading({\n        title: _t('dataset.unlock.loading', { tableName: this._tableName })\n      })\n    );\n  },\n\n  _renderErrorView: function (errorMessage) {\n    var errorView = new ErrorView({\n      title: _t('dataset.unlock.error', { tableName: this._tableName }),\n      desc: errorMessage\n    });\n    this.$el.html(errorView.render().el);\n    this.addView(errorView);\n  },\n\n  _$content: function () {\n    return this.$('.js-content');\n  },\n\n  _onConfirm: function () {\n    this._renderLoadingView();\n\n    this._visModel.save({\n      locked: false\n    }, {\n      wait: true,\n      success: function () {\n        this._modalModel.destroy();\n      }.bind(this),\n      error: function (mdl, e) {\n        this._renderErrorView(errorParser(e));\n      }.bind(this)\n    });\n  },\n\n  _onCancel: function () {\n    window.location = this._configModel.get('base_url');\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"16px\" height=\"24px\" viewBox=\"0 5 16 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"lock-open\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(0.000000, 5.000000)\">\\n          <path d=\"M14,10.727 L14,5.5 C14,2.467 11.532,0 8.5,0 C5.468,0 3,2.467 3,5.5 L4,5.5 C4,3.019 6.019,1 8.5,1 C10.981,1 13,3.019 13,5.5 L13,9.765 C11.629,8.663 9.892,8 8,8 C3.589,8 0,11.589 0,16 C0,20.411 3.589,24 8,24 C12.411,24 16,20.411 16,16 C16,13.979 15.24,12.136 14,10.727 L14,10.727 Z M8,23 C4.141,23 1,19.86 1,16 C1,12.14 4.141,9 8,9 C11.859,9 15,12.14 15,16 C15,19.86 11.859,23 8,23 L8,23 Z\" id=\"Shape\" fill=\"#000000 \"></path>\\n          <path d=\"M8,15 C7.448,15 7,15.449 7,16 C7,16.365 7.207,16.672 7.5,16.847 L7.5,19.5 C7.5,19.776 7.724,20 8,20 C8.276,20 8.5,19.776 8.5,19.5 L8.5,16.847 C8.793,16.672 9,16.365 9,16 C9,15.449 8.552,15 8,15 L8,15 Z\" id=\"Shape\" fill=\"#000000 \"></path>\\n        </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">'+\n((__t=( _t('dataset.unlock.title', { tableName: tableName }) ))==null?'':_.escape(__t))+\n'</h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">'+\n((__t=( _t('dataset.unlock.desc') ))==null?'':_.escape(__t))+\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('dataset.unlock.cancel') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              '+\n((__t=( _t('dataset.unlock.confirm') ))==null?'':_.escape(__t))+\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n}\nreturn __p;\n};\n",
    "var Notifier = require('../../components/notifier/notifier');\nvar errorParser = require('../../helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.visModel) { throw new Error('visModel is required'); }\n\n  var visModel = opts.visModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n\n  visModel.destroy({\n    wait: true,\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      Notifier.addNotification({\n        status: 'error',\n        info: _t('dataset.delete.error', {\n          tableName: visModel.get('name'),\n          error: errorParser(e)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n",
    "var ImportModel = require('../../data/background-importer/import-model');\n\nmodule.exports = function (opts) {\n  if (!opts.tableModel) throw new Error('tableModel is required');\n  if (!opts.query) throw new Error('query is required');\n  if (!opts.configModel) throw new Error('configModel is required');\n\n  var tableModel = opts.tableModel;\n  var configModel = opts.configModel;\n  var query = opts.query;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var attrs = {\n    table_name: tableModel.getUnqualifiedName() + '_copy',\n    sql: query\n  };\n\n  var importModel = new ImportModel({}, {\n    configModel: configModel\n  });\n  importModel.save(attrs, {\n    error: errorCallback && errorCallback,\n    success: function (model, changes) {\n      model.bind('change:state', function () {\n        var state = this.get('state');\n        var success = this.get('success');\n        if (state === 'failure') {\n          errorCallback && errorCallback(model);\n        } else if (state === 'complete' && success) {\n          successCallback && successCallback(model);\n        }\n      }, model);\n    }\n  });\n};\n",
    "var Notifier = require('../../components/notifier/notifier');\nvar errorParser = require('../../helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.visModel) { throw new Error('visModel is required'); }\n  if (!opts.newName) { throw new Error('newName is required'); }\n\n  var visModel = opts.visModel;\n  var newName = opts.newName;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('dataset.rename.loading', { tableName: visModel.get('name') }),\n    closable: false\n  });\n\n  visModel.save({ name: newName }, {\n    wait: true,\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('dataset.rename.success', { tableName: visModel.get('name') }),\n        closable: true\n      });\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      notification.set({\n        status: 'error',\n        info: _t('dataset.rename.error', {\n          tableName: visModel.get('name'),\n          error: errorParser(e)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n",
    "var _ = require('underscore');\nvar TableNameUtils = require('../../helpers/table-name-utils');\n\nvar memo = {};\n\nvar OPTIONAL_OPTS = [\n  'querySchemaModel',\n  'layerDefinitionModel',\n  'tokens'\n];\n\nvar defaults = {\n  tableName: true,\n  columnsName: true,\n  keywords: true\n};\n\nmodule.exports = {\n  init: function (opts) {\n    if (!opts) throw new Error('options are required for hints');\n\n    this.options = _.defaults(\n      _.pick(opts, ['tableName', 'columnsName', 'keywords'])\n      , defaults\n    );\n\n    _.each(OPTIONAL_OPTS, function (item) {\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  hints: function () {\n    // array of objects {text, type}\n    return this.hints;\n  },\n\n  reset: function () {\n    this.hints = _.union(this._getTableName(), this._getColumns(), this._getKeywords());\n    return this;\n  },\n\n  _getKeywords: function () {\n    if (this.options.keywords) {\n      return this._tokens && this._memo(this._tokens);\n    } else {\n      return [];\n    }\n  },\n\n  _getColumns: function () {\n    if (!this.options.columnsName) {\n      return [];\n    }\n\n    var columns = this._querySchemaModel.columnsCollection;\n    return columns.map(function (mdl) {\n      var columnName = mdl.get('name');\n      return {\n        text: columnName,\n        type: 'Column_name'\n      };\n    });\n  },\n\n  _getTableName: function () {\n    if (!this.options.tableName) {\n      return [];\n    }\n\n    var tableName = this._layerDefinitionModel.getTableName();\n    tableName = TableNameUtils.getUnqualifiedName(tableName);\n    return [{\n      text: tableName,\n      type: 'Table_name'\n    }];\n  },\n\n  _memo: function (str, type) {\n    if (str in memo) {\n      return memo[str];\n    } else {\n      return (memo[str] = this._make(str, type));\n    }\n  },\n\n  _make: function (str, type) {\n    return _.chain(str).map(function (set) {\n      return set.keywords.split(' ').map(function (item) {\n        return {\n          text: item,\n          type: set.type\n        };\n      });\n    }).flatten().value();\n  }\n};\n",
    "module.exports = [{\n  keywords: 'alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit',\n  type: 'Sql'\n}, {\n  keywords: 'ST_GeometryType ST_polygon ST_multipolygon ST_multilinestring ST_linestring ST_multipoint ST_point',\n  type: 'Postgis'\n}];\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar UndoManager = require('../../../../data/undo-manager.js');\n\n/**\n *  Data SQL Undo-redo model\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    content: ''\n  },\n\n  initialize: function (attrs, opts) {\n    this._history = this._generateHistory(opts && opts.history);\n\n    UndoManager.init(this, {\n      track: true,\n      history: this._history\n    });\n  },\n\n  _generateHistory: function (history) {\n    if (history && history.length) {\n      var data = _.reduce(history, function (memo, sql) {\n        memo.push({\n          content: sql\n        });\n        return memo;\n      }, [], this);\n      return data;\n    }\n\n    return false;\n  },\n\n  getHistory: function () {\n    return _.pluck(\n      this.getUndoHistory(),\n      'content'\n    );\n  }\n});\n",
    "var Backbone = require('backbone');\nvar UndoManager = require('../../data/undo-manager.js');\nvar _ = require('underscore');\n\n/**\n *  CartoCSS Undo-redo model\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    content: ''\n  },\n\n  initialize: function (attrs, opts) {\n    this._history = this._generateHistory(opts && opts.history);\n\n    UndoManager.init(this, {\n      track: true,\n      history: this._history\n    });\n  },\n\n  _generateHistory: function (history) {\n    if (history && history.length) {\n      var data = _.reduce(history, function (memo, cartocss) {\n        memo.push({\n          content: cartocss\n        });\n        return memo;\n      }, [], this);\n      return data;\n    }\n\n    return false;\n  },\n\n  getHistory: function () {\n    return _.pluck(\n      this.getUndoHistory(),\n      'content'\n    );\n  }\n});\n",
    "var _ = require('underscore');\nvar SimpleStyleDefaults = require('./simple-style-defaults');\n\nmodule.exports = _.defaults({\n\n  generateAttributes: function (geometryType) {\n    return _.extend(\n      this._getStyleTypeAttrs(),\n      this._getFillAttrs(geometryType),\n      this._getStrokeAttrs(geometryType),\n      {\n        blending: 'lighter'\n      },\n      this._getAggrAttrs(geometryType),\n      this._getAnimatedAttrs(geometryType)\n    );\n  },\n\n  _getStyleTypeAttrs: function () {\n    return {\n      style: 'simple'\n    };\n  },\n\n  _getAnimatedAttrs: function (geometryType) {\n    return {\n      animated: {\n        attribute: null,\n        overlap: false,\n        duration: 30,\n        steps: 256,\n        trails: 2,\n        resolution: 4\n      }\n    };\n  },\n\n  _getAggrAttrs: function (geometryType) {\n    return {\n      aggregation: {}\n    };\n  }\n}, SimpleStyleDefaults);\n",
    "var _ = require('underscore');\nvar SimpleStyleDefaults = require('./simple-style-defaults');\nvar rampList = require('cartocolor');\n\nmodule.exports = _.defaults({\n\n  generateAttributes: function (geometryType) {\n    return _.extend(\n      this._getFillAttrs(geometryType),\n      this._getAggrAttrs(),\n      this._getAnimatedAttrs(),\n      this._getLabelsAttrs()\n    );\n  },\n\n  _getFillAttrs: function (geometryType) {\n    var attrs = {\n      fill: {\n        'size': {\n          fixed: 45\n        },\n        'color': {\n          attribute: 'cartodb_id',\n          range: rampList.ag_Sunset[7],\n          bins: 6\n        }\n      }\n    };\n\n    return attrs;\n  },\n\n  _getAggrAttrs: function () {\n    return {\n      aggregation: {}\n    };\n  },\n\n  _getAnimatedAttrs: function (geometryType) {\n    return {\n      animated: {\n        attribute: 'cartodb_id',\n        overlap: false,\n        duration: 30,\n        steps: 1,\n        trails: 0,\n        resolution: 4\n      }\n    };\n  },\n\n  _getLabelsAttrs: function () {\n    return {\n      labels: {}\n    };\n  }\n\n}, SimpleStyleDefaults);\n",
    "var _ = require('underscore');\nvar SimpleStyleDefaults = require('./simple-style-defaults');\nvar DefaultFormValues = require('../../../data/default-form-styles.json');\nvar Utils = require('../../../helpers/utils');\nvar rampList = require('cartocolor');\n\nmodule.exports = _.defaults({\n\n  _getAggrAttrs: function (geometryType) {\n    return {\n      aggregation: {\n        size: 10,\n        value: {\n          operator: 'count',\n          attribute: ''\n        }\n      }\n    };\n  },\n\n  _getStrokeAttrs: function (geometryType) {\n    var strokeAttrs = DefaultFormValues['stroke'];\n    return {\n      stroke: Utils.cloneObject(strokeAttrs)\n    };\n  },\n\n  _getFillAttrs: function (geometryType) {\n    var colors = rampList['ag_GrnYl'][5];\n    return {\n      fill: {\n        'color': {\n          attribute: 'agg_value',\n          bins: '5',\n          quantification: 'quantiles',\n          // TODO: flip the ramp when basemap is black\n          // range: rampList.ag_GrnYl[5].reverse()\n          range: Utils.cloneObject(colors)\n        }\n      }\n    };\n  }\n\n}, SimpleStyleDefaults);\n",
    "var _ = require('underscore');\nvar SimpleStyleDefaults = require('./simple-style-defaults');\nvar rampList = require('cartocolor');\n\nmodule.exports = _.defaults({\n  _getAggrAttrs: function (geometryType) {\n    return {\n      aggregation: {\n        dataset: 'countries',\n        change: 'manual',\n        value: {\n          operator: 'count',\n          attribute: ''\n        }\n      }\n    };\n  },\n\n  _getFillAttrs: function (geometryType) {\n    return {\n      fill: {\n        'color': {\n          attribute: 'agg_value_density',\n          bins: '5',\n          quantification: 'quantiles',\n          range: _.clone(rampList.Emrld[5])\n        }\n      }\n    };\n  }\n\n}, SimpleStyleDefaults);\n",
    "var _ = require('underscore');\nvar StyleDefaults = require('./style-defaults');\nvar DefaultCartography = require('../../../data/default-cartography.json');\nvar DefaultFormValues = require('../../../data/default-form-styles.json');\nvar Utils = require('../../../helpers/utils');\n\nmodule.exports = _.defaults({\n\n  generateAttributes: function (geometryType) {\n    return _.extend(\n      {},\n      this._getFillAttrs(geometryType),\n      this._getStrokeAttrs(geometryType),\n      {\n        blending: DefaultFormValues['blending']\n      },\n      this._getAggrAttrs(geometryType),\n      this._getLabelsAttrs()\n    );\n  },\n\n  _getFillAttrs: function (geometryType) {\n    var fillAttrs = DefaultCartography['simple'][geometryType]['fill'];\n    return {\n      fill: Utils.cloneObject(fillAttrs)\n    };\n  },\n\n  _getStrokeAttrs: function (geometryType) {\n    var strokeAttrs = DefaultCartography['simple'][geometryType]['stroke'];\n    return {\n      stroke: Utils.cloneObject(strokeAttrs)\n    };\n  },\n\n  _getAggrAttrs: function () {\n    var aggrAttrs = DefaultFormValues['aggregation'];\n    return {\n      aggregation: Utils.cloneObject(aggrAttrs)\n    };\n  },\n\n  _getLabelsAttrs: function () {\n    var labelsAttrs = DefaultFormValues['labels'];\n    return {\n      labels: Utils.cloneObject(labelsAttrs)\n    };\n  }\n}, StyleDefaults);\n",
    "var _ = require('underscore');\nvar HexabinsAggregationDefaults = require('./hexabins-aggregation-style-defaults');\n\nmodule.exports = _.defaults({\n\n  _getAggrAttrs: function (geometryType) {\n    return {\n      aggregation: {\n        size: 12,\n        value: {\n          operator: 'count',\n          attribute: ''\n        }\n      }\n    };\n  }\n\n}, HexabinsAggregationDefaults);\n",
    "module.exports = {\n  generateAttributes: function (geometryType) {\n    return {\n      fill: null,\n      stroke: null,\n      blending: null,\n      aggregation: {},\n      labels: {}\n    };\n  }\n};\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar StylesFactory = require('./styles-factory');\nvar UndoManager = require('../../data/undo-manager');\n\nmodule.exports = Backbone.Model.extend({\n\n  parse: function (r) {\n    r = r || {};\n    return _.extend(\n      {\n        type: r.type,\n        autogenerated: r && r.autogenerated\n      },\n      r.properties\n    );\n  },\n\n  initialize: function (attrs, opts) {\n    if (!this.get('type')) {\n      this.setDefaultPropertiesByType('simple', 'point');\n    }\n\n    UndoManager.init(this, { track: true });\n  },\n\n  resetPropertiesFromAutoStyle: function () {\n    if (this._stylesPreAutoStyle) {\n      delete this.attributes.autoStyle;\n      this.set(this._stylesPreAutoStyle);\n      this.removeStylesPreAutoStyle();\n    }\n  },\n\n  removeStylesPreAutoStyle: function () {\n    delete this._stylesPreAutoStyle;\n  },\n\n  setPropertiesFromAutoStyle: function (params) {\n    if (!params.definition) throw new Error('definition is required');\n    if (!params.geometryType) throw new Error('geometryType is required');\n    if (!params.widgetId) throw new Error('widgetId is required');\n\n    if (!this._stylesPreAutoStyle) {\n      this._stylesPreAutoStyle = JSON.parse(JSON.stringify(this.attributes));\n    }\n\n    // In order to trigger a proper change at the end of this function, we have\n    // to make a clear change in the attributes, like delete the autoStyle property.\n    delete this.attributes.autoStyle;\n\n    var extendAutoStyleProperties = function (attribute, newProperties) {\n      var properties = this.get(attribute);\n      // Check domain quotes\n      if (newProperties.color && newProperties.color.domain) {\n        var quotedDomain = _.compact(\n          _.map(newProperties.color.domain, function (name) {\n            if (name && name !== true) {\n              return '\"' + name.toString().replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"';\n            } else {\n              return name;\n            }\n          })\n        );\n        newProperties.color.static = true;\n        newProperties.color.domain = quotedDomain;\n        newProperties.color.quantification = 'category';\n        newProperties.color.attribute_type = 'string';\n      } else {\n        newProperties.color.bins = newProperties.color.range.length;\n        newProperties.color.quantification = 'quantiles';\n        newProperties.color.attribute_type = 'number';\n      }\n\n      properties = _.extend(\n        properties,\n        newProperties\n      );\n\n      return properties;\n    }.bind(this);\n\n    var currentAttrs = JSON.parse(JSON.stringify(this.attributes));\n    if (params.geometryType === 'line') {\n      currentAttrs.stroke = extendAutoStyleProperties('stroke', params.definition[params.geometryType]);\n    } else {\n      currentAttrs.fill = extendAutoStyleProperties('fill', params.definition[params.geometryType]);\n    }\n\n    this.set(\n      _.extend(\n        {\n          type: 'simple',\n          autoStyle: params.widgetId\n        },\n        currentAttrs\n      )\n    );\n  },\n\n  setDefaultPropertiesByType: function (styleType, geometryType, silently) {\n    // Get default aggregation and properties from factory and apply them\n    this.set(\n      _.extend(\n        {\n          type: styleType\n        },\n        StylesFactory.getDefaultStyleAttrsByType(styleType, geometryType)\n      ), {\n        silently: !!silently\n      }\n    );\n\n    // Although we want to make the change silently, we have several places listening\n    // for style changes, so we trigger this custom event\n    if (silently) {\n      this.trigger('style:update');\n    }\n  },\n\n  setFill: function (type) {\n    var simpleFill = StylesFactory.getDefaultStyleAttrsByType(type, 'point');\n    this.set('fill', simpleFill.fill);\n  },\n\n  applyLastState: function () {\n    this._undoManager.stopTracking();\n    this.trigger('change');\n    this._undoManager.startTracking();\n  },\n\n  resetStyles: function () {\n    this.setDefaultPropertiesByType('none', '');\n  },\n\n  // Backend will migrate current wizard properties to style properties,\n  // providing a flag which indicates if it is generated by them\n  isAutogenerated: function () {\n    return this.get('autogenerated');\n  },\n\n  isAggregatedType: function () {\n    return _.contains(StylesFactory.getAggregationTypes(), this.get('type'));\n  },\n\n  isAnimation: function () {\n    return this.get('type') === 'animation';\n  },\n\n  hasNoneStyles: function () {\n    return this.get('type') === 'none';\n  },\n\n  canApplyAutoStyle: function () {\n    return this.get('type') === 'simple';\n  },\n\n  getColumnsUsedForStyle: function () {\n    var columns = [];\n    // Fill (size and color)\n    var fill = this.get('fill');\n    if (fill && fill.color && fill.color.attribute) {\n      columns.push({\n        name: fill.color.attribute,\n        type: fill.color.attribute_type || 'string'\n      });\n    }\n    if (fill && fill.size && fill.size.attribute) {\n      columns.push({\n        name: fill.size.attribute,\n        type: 'number'\n      });\n    }\n\n    // Stroke (size and color)\n    var stroke = this.get('stroke');\n    if (stroke && stroke.color && stroke.color.attribute) {\n      columns.push({\n        name: stroke.color.attribute,\n        type: stroke.color.attribute_type || 'string'\n      });\n    }\n    if (stroke && stroke.size && stroke.size.attribute) {\n      columns.push({\n        name: stroke.size.attribute,\n        type: 'number'\n      });\n    }\n\n    // Labels\n    var labels = this.get('labels');\n    if (labels && labels.attribute && labels.enabled) {\n      columns.push({\n        name: labels.attribute\n      });\n    }\n\n    // Aggregation\n    var aggregation = this.get('aggregation');\n    if (aggregation && aggregation.value && aggregation.value.attribute) {\n      columns.push({\n        name: aggregation.value.attribute,\n        type: aggregation.value.attribute_type || 'string'\n      });\n    }\n\n    return columns;\n  },\n\n  // Unflatten attributes\n  toJSON: function () {\n    return {\n      type: this.get('type'),\n      properties: _.omit(this.attributes, 'type', 'autogenerated')\n    };\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<svg width=\"56px\" height=\"16px\" viewBox=\"718 455 56 16\">\\n    <g id=\"animated\" transform=\"translate(718.000000, 455.000000)\" class=\"Style-fill\">\\n        <rect id=\"Rectangle-649\" x=\"40\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n        <rect id=\"Rectangle-649\" opacity=\"0.8\" x=\"30\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n        <rect id=\"Rectangle-649\" opacity=\"0.6\" x=\"20\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n        <rect id=\"Rectangle-649\" opacity=\"0.4\" x=\"10\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n        <rect id=\"Rectangle-649\" opacity=\"0.2\" x=\"0\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n    </g>\\n</svg>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<svg width=\"56px\" height=\"25px\" viewBox=\"0 0 56 25\">\\n    <g id=\"Symbols\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n        <g id=\"Aggregation-/-Heatmap\" transform=\"translate(-15.000000, -16.000000)\">\\n            <g id=\"Group-7\">\\n                <g transform=\"translate(15.000000, 16.000000)\">\\n                    <g id=\"Group-2\" style=\"mix-blend-mode: luminosity;\" transform=\"translate(28.000000, 12.500000) rotate(-90.000000) translate(-28.000000, -12.500000) translate(15.500000, -15.500000)\" class=\"Style-fill\">\\n                        <g id=\"heat-copy-2\" transform=\"translate(0.000000, 36.000000)\">\\n                            <circle id=\"Oval-120\" opacity=\"0.4\" cx=\"6\" cy=\"6\" r=\"6\"></circle>\\n                            <circle id=\"Oval-120-Copy\" opacity=\"0.6\" cx=\"6.5\" cy=\"5.5\" r=\"4.03333333\"></circle>\\n                            <path d=\"M6.5,8.06666667 C7.91753086,8.06666667 9.06666667,6.91753086 9.06666667,5.5 C9.06666667,4.08246914 7.91753086,2.93333333 6.5,2.93333333 C5.08246914,2.93333333 3.93333333,4.08246914 3.93333333,5.5 C3.93333333,6.91753086 5.08246914,8.06666667 6.5,8.06666667 Z\" id=\"Oval-120-Copy-2\" opacity=\"0.8\"></path>\\n                            <circle id=\"Oval-120-Copy-3\" cx=\"6.5\" cy=\"5.5\" r=\"1.1\"></circle>\\n                        </g>\\n                        <g id=\"heat-copy-2\" transform=\"translate(13.000000, 48.000000)\">\\n                            <circle id=\"Oval-120\" opacity=\"0.4\" cx=\"4\" cy=\"4\" r=\"4\"></circle>\\n                            <circle id=\"Oval-120-Copy\" opacity=\"0.6\" cx=\"4\" cy=\"4\" r=\"2.93333333\"></circle>\\n                            <path d=\"M4,5.86666667 C5.03093153,5.86666667 5.86666667,5.03093153 5.86666667,4 C5.86666667,2.96906847 5.03093153,2.13333333 4,2.13333333 C2.96906847,2.13333333 2.13333333,2.96906847 2.13333333,4 C2.13333333,5.03093153 2.96906847,5.86666667 4,5.86666667 Z\" id=\"Oval-120-Copy-2\" opacity=\"0.8\"></path>\\n                            <circle id=\"Oval-120-Copy-3\" cx=\"4\" cy=\"4\" r=\"0.8\"></circle>\\n                        </g>\\n                        <g id=\"heat-copy-3\" transform=\"translate(0.500000, 0.500000)\">\\n                            <circle id=\"Oval-120\" opacity=\"0.4\" cx=\"12\" cy=\"12\" r=\"12\"></circle>\\n                            <ellipse id=\"Oval-120-Copy\" opacity=\"0.6\" cx=\"12\" cy=\"12\" rx=\"8.8\" ry=\"8.8\"></ellipse>\\n                            <path d=\"M12,17.6 C15.0927946,17.6 17.6,15.0927946 17.6,12 C17.6,8.9072054 15.0927946,6.4 12,6.4 C8.9072054,6.4 6.4,8.9072054 6.4,12 C6.4,15.0927946 8.9072054,17.6 12,17.6 Z\" id=\"Oval-120-Copy-2\" opacity=\"0.8\"></path>\\n                            <circle id=\"Oval-120-Copy-3\" cx=\"12\" cy=\"12\" r=\"2.4\"></circle>\\n                        </g>\\n                        <g id=\"heat\" transform=\"translate(8.000000, 25.000000)\">\\n                            <path d=\"M0.0682602115,8.5161863 C0.564222232,12.1776805 3.7025171,15 7.5,15 C11.6421356,15 15,11.6421356 15,7.5 C15,3.35786438 11.6421356,0 7.5,0 C3.35786438,0 0,3.35786438 0,7.5 C0,7.84465272 0.0232475903,8.18387567 0.0682602115,8.5161863 Z\" id=\"Oval-120\" opacity=\"0.4\"></path>\\n                            <circle id=\"Oval-120-Copy\" opacity=\"0.6\" cx=\"7.5\" cy=\"7.5\" r=\"5.5\"></circle>\\n                            <path d=\"M7.5,11 C9.43299662,11 11,9.43299662 11,7.5 C11,5.56700338 9.43299662,4 7.5,4 C5.56700338,4 4,5.56700338 4,7.5 C4,9.43299662 5.56700338,11 7.5,11 Z\" id=\"Oval-120-Copy-2\" opacity=\"0.8\"></path>\\n                            <circle id=\"Oval-120-Copy-3\" cx=\"7.5\" cy=\"7.5\" r=\"1.5\"></circle>\\n                        </g>\\n                    </g>\\n                    <g id=\"Group-8\" style=\"mix-blend-mode: luminosity;\" transform=\"translate(15.000000, 4.000000)\">\\n                        <path opacity=\"0.4\" d=\"M6,0.5 C6,0.5 10,4 13,0 C12,2.5 11.5,4.5 11.5,4.5 L10.5,6.5 L7,3.5 L6,0.5 Z\" id=\"Path-494\" class=\"Style-fill\"></path>\\n                        <path opacity=\"0.4\" d=\"M21.2158501,6.00893743 C21.2158501,6.00893743 25.2158501,9.50893743 28.2158501,5.50893743 C27.2158501,8.00893743 26.7158501,10.0089374 26.7158501,10.0089374 L25.7158501,12.0089374 L22.2158501,9.00893743 L21.2158501,6.00893743 Z\" id=\"Path-494\" class=\"Style-fill\" transform=\"translate(24.715850, 8.758937) rotate(52.000000) translate(-24.715850, -8.758937) \"></path>\\n                        <path opacity=\"0.4\" d=\"M16.9683476,9.30864826 C16.9683476,9.30864826 22.1000758,13.6622016 25.1000758,9.66220164 C24.1000758,12.1622016 23.8307892,14.1229281 23.8307892,14.1229281 L22.8307892,16.1229281 L17.6754544,11.4299685 L16.9683476,9.30864826 Z\" id=\"Path-494\" class=\"Style-fill\" transform=\"translate(21.034212, 12.715788) rotate(-135.000000) translate(-21.034212, -12.715788) \"></path>\\n                        <path opacity=\"0.4\" d=\"M6.01244045,6.22463473 C6.01244045,6.22463473 9.69418934,8.6717337 12.6941893,4.6717337 C11.6941893,7.1717337 11.1941893,9.1717337 11.1941893,9.1717337 L10.8665273,11.557349 L9.7765744,13.8621271 L6.01244045,6.22463473 Z\" id=\"Path-494\" class=\"Style-fill\" transform=\"translate(9.353315, 9.266930) rotate(-194.000000) translate(-9.353315, -9.266930) \"></path>\\n                        <path opacity=\"0.6\" d=\"M6,7.5 C5.85295664,5.882523 3.5,2.5 3.5,2.5 C3.5,2.5 6.5,5 9,5 C11.5,5 14.5,1 14.5,1 C14.5,1 12.5,4.25504557 12.5,6 C12.5,7.25504557 14.5,10 14.5,10 C14.5,10 12,8 9.5,8 C7,8 4.5,13.5 4.5,13.5 C4.5,13.5 6.18628997,9.54918967 6,7.5 Z\" id=\"Path-497\" class=\"Style-fill\"></path>\\n                        <path opacity=\"0.6\" d=\"M19.7830175,9.69012543 C19.6894445,8.07264843 16.7664559,5.429802 16.7664559,5.429802 C16.7664559,5.429802 20.2086087,8.27970692 21.7995178,8.27970692 C23.3904269,8.27970692 26.4566805,5.77970692 26.4566805,5.77970692 C26.4566805,5.77970692 24.4742142,8.43779004 24.4742142,10.1827445 C24.4742142,11.43779 25.8285796,12.5099091 25.8285796,12.5099091 C25.8285796,12.5099091 23.7086087,11.2797069 22.1176996,11.2797069 C20.5267905,11.2797069 17.9729009,15.2555074 17.9729009,15.2555074 C17.9729009,15.2555074 19.9015657,11.7393151 19.7830175,9.69012543 Z\" id=\"Path-497\" class=\"Style-fill\" transform=\"translate(21.611568, 10.342655) rotate(52.000000) translate(-21.611568, -10.342655) \"></path>\\n                        <path id=\"Path-499\" stroke=\"#979797\"></path>\\n                        <polygon id=\"Path-500\" class=\"Style-fill\" points=\"0.5 12.5 5 7.5 1 4\"></polygon>\\n                    </g>\\n                </g>\\n            </g>\\n        </g>\\n    </g>\\n</svg>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<svg width=\"52px\" height=\"23px\" viewBox=\"0 0 52 23\">\\n    <g id=\"Symbols\">\\n        <g id=\"Aggregation-/-Hexabins\" transform=\"translate(-15.000000, -17.000000)\" class=\"Style-fill\">\\n            <g id=\"Hexabins\">\\n                <g transform=\"translate(15.000000, 17.000000)\">\\n                    <polygon id=\"Polygon-1-Copy-4\" points=\"23 11 28 14 28 20 23 23 18 20 18 14\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-8\" points=\"17 0 22 3 22 9 17 12 12 9 12 3\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-8\" points=\"5 0 10 3 10 9 5 12 -1.15463195e-13 9 3.85466323e-09 3\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-13\" points=\"29 0 34 3 34 9 29 12 24 9 24 3\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-15\" points=\"41 0 46 3 46 9 41 12 36 9 36 3\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-14\" points=\"35 11 40 14 40 20 35 23 30 20 30 14\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-14\" points=\"47 11 52 14 52 20 47 23 42 20 42 14\"></polygon>\\n                </g>\\n            </g>\\n        </g>\\n    </g>\\n</svg>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<svg width=\"56px\" height=\"24px\" viewBox=\"16 16 56 24\">\\n    <g id=\"points\" transform=\"translate(16.000000, 16.000000)\"  class=\"Style-fill\">\\n        <path d=\"M6,10 C8.209139,10 10,8.209139 10,6 C10,3.790861 8.209139,2 6,2 C3.790861,2 2,3.790861 2,6 C2,8.209139 3.790861,10 6,10 Z\" id=\"Oval-59\"></path>\\n        <path d=\"M52,8 C54.209139,8 56,6.209139 56,4 C56,1.790861 54.209139,0 52,0 C49.790861,0 48,1.790861 48,4 C48,6.209139 49.790861,8 52,8 Z\" id=\"Oval-59-Copy-2\"></path>\\n        <path d=\"M52,22 C54.209139,22 56,20.209139 56,18 C56,15.790861 54.209139,14 52,14 C49.790861,14 48,15.790861 48,18 C48,20.209139 49.790861,22 52,22 Z\" id=\"Oval-59-Copy-3\"></path>\\n        <path d=\"M4,24 C6.209139,24 8,22.209139 8,20 C8,17.790861 6.209139,16 4,16 C1.790861,16 0,17.790861 0,20 C0,22.209139 1.790861,24 4,24 Z\" id=\"Oval-59-Copy\"></path>\\n        <path d=\"M28,8 C30.209139,8 32,6.209139 32,4 C32,1.790861 30.209139,0 28,0 C25.790861,0 24,1.790861 24,4 C24,6.209139 25.790861,8 28,8 Z\" id=\"Oval-59-Copy-4\"></path>\\n        <path d=\"M24,20 C26.209139,20 28,18.209139 28,16 C28,13.790861 26.209139,12 24,12 C21.790861,12 20,13.790861 20,16 C20,18.209139 21.790861,20 24,20 Z\" id=\"Oval-59-Copy-4\"></path>\\n        <path d=\"M16,16 C18.209139,16 20,14.209139 20,12 C20,9.790861 18.209139,8 16,8 C13.790861,8 12,9.790861 12,12 C12,14.209139 13.790861,16 16,16 Z\" id=\"Oval-59-Copy-4\"></path>\\n        <path d=\"M44,12 C46.209139,12 48,10.209139 48,8 C48,5.790861 46.209139,4 44,4 C41.790861,4 40,5.790861 40,8 C40,10.209139 41.790861,12 44,12 Z\" id=\"Oval-59-Copy-4\"></path>\\n    </g>\\n</svg>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<svg width=\"56px\" height=\"24px\" viewBox=\"0 0 56 24\">\\n    <g id=\"Symbols\">\\n        <g id=\"Aggregation-/-Admin-Regions\" transform=\"translate(-16.000000, -16.000000)\" class=\"Style-fill\">\\n            <g id=\"regions\">\\n                <g transform=\"translate(16.000000, 16.000000)\">\\n                    <polygon id=\"Rectangle-649\" points=\"9 8 1 0 27 0 27 17 36 17 36.0065918 23.9934082 25 24 9 16\"></polygon>\\n                    <polygon id=\"Rectangle-649\" points=\"0 2 7 9 7 17 21 24 0 24 0 15\"></polygon>\\n                    <polygon id=\"Rectangle-649\" points=\"29 0 50 0 50 6 56 6 56 24 48 24 38 24 38 15 29 15\"></polygon>\\n                    <rect id=\"Rectangle-1933\" x=\"52\" y=\"0\" width=\"4\" height=\"4\"></rect>\\n                </g>\\n            </g>\\n        </g>\\n    </g>\\n</svg>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<svg width=\"58px\" height=\"28px\" viewBox=\"0 0 58 28\">\\n    <g id=\"Symbols\">\\n        <g id=\"Aggregation-/-Squares\" transform=\"translate(-15.000000, -14.000000)\" class=\"Style-fill\">\\n            <g id=\"squares\">\\n                <g transform=\"translate(15.000000, 14.000000)\">\\n                    <rect id=\"Rectangle-847-Copy-2\" x=\"10\" y=\"0\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-5\" x=\"30\" y=\"20\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-12\" x=\"40\" y=\"20\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-13\" x=\"40\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-8\" x=\"20\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-6\" x=\"30\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-9\" x=\"20\" y=\"20\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-10\" x=\"10\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-10\" x=\"0\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-10\" x=\"50\" y=\"20\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-11\" x=\"20\" y=\"0\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                </g>\\n            </g>\\n        </g>\\n    </g>\\n</svg>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar StyleDefaults = require('./style-defaults/style-defaults');\nvar SimpleStyleDefaults = require('./style-defaults/simple-style-defaults');\nvar HeatmapDefaults = require('./style-defaults/heatmap-style-defaults');\nvar AnimationDefaults = require('./style-defaults/animation-style-defaults');\nvar SquareAggregationDefaults = require('./style-defaults/squares-aggregation-style-defaults');\nvar HexabinsAggregationDefaults = require('./style-defaults/hexabins-aggregation-style-defaults');\nvar RegionsAggregationDefaults = require('./style-defaults/regions-aggregation-style-defaults');\n\nvar STYLE_MAP = {\n  'none': {\n    labelTranslationKey: 'editor.style.types.none',\n    checkIfValid: function (geometryType) {\n      return !geometryType;\n    },\n    defaultStyles: StyleDefaults\n  },\n  'simple': {\n    labelTranslationKey: 'editor.style.types.simple',\n    iconTemplate: require('./style-icons/points.tpl'),\n    checkIfValid: function (geometryType) {\n      return !!geometryType;\n    },\n    defaultStyles: SimpleStyleDefaults\n  },\n  'squares': {\n    labelTranslationKey: 'editor.style.types.squares',\n    iconTemplate: require('./style-icons/squares.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: SquareAggregationDefaults\n  },\n  'hexabins': {\n    labelTranslationKey: 'editor.style.types.hexabins',\n    iconTemplate: require('./style-icons/hexabins.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: HexabinsAggregationDefaults\n  },\n  'regions': {\n    labelTranslationKey: 'editor.style.types.regions',\n    iconTemplate: require('./style-icons/regions.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: RegionsAggregationDefaults\n  },\n  'animation': {\n    labelTranslationKey: 'editor.style.types.animation',\n    iconTemplate: require('./style-icons/animated.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: AnimationDefaults\n  },\n  'heatmap': {\n    labelTranslationKey: 'editor.style.types.heatmap',\n    iconTemplate: require('./style-icons/heatmap.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: HeatmapDefaults\n  }\n};\n\nmodule.exports = {\n  getDefaultStyleAttrsByType: function (styleType, geometryType) {\n    var StyleDefaultsKlass = STYLE_MAP[styleType].defaultStyles;\n    return StyleDefaultsKlass.generateAttributes(geometryType);\n  },\n\n  getStyleTypes: function (currentType, geometryType) {\n    return _.reduce(STYLE_MAP, function (memo, val, key) {\n      if (currentType === key || (val.checkIfValid ? val.checkIfValid(geometryType) : true)) {\n        memo.push({\n          value: key,\n          label: _t(val.labelTranslationKey),\n          iconTemplate: val.iconTemplate\n        });\n      }\n      return memo;\n    }, []);\n  },\n\n  getFormTemplateByType: function (styleType) {\n    return STYLE_MAP[styleType].formTemplate;\n  },\n\n  getAggregationTypes: function () {\n    return ['squares', 'hexabins', 'regions'];\n  }\n};\n",
    "/**\n * Just provide info about the current browser\n */\n\nmodule.exports = function () {\n  var ua = navigator.userAgent;\n  var tem;\n  var M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n  if (/trident/i.test(M[1])) {\n    tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n    return {\n      name: 'IE ',\n      version: (tem[1] || '')\n    };\n  }\n  if (M[1] === 'Chrome') {\n    tem = ua.match(/\\bOPR\\/(\\d+)/);\n    if (tem != null) {\n      return {\n        name: 'Opera',\n        version: tem[1]\n      };\n    }\n  }\n  M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n  if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n    M.splice(1, 1, tem[1]);\n  }\n\n  return {\n    name: M[0],\n    version: M[1]\n  };\n};\n",
    "module.exports = [\n  'aliceblue', 'antiquewhite', 'aqua', 'aquamarine', 'azure', 'beige',\n  'bisque', 'black', 'blanchedalmond', 'blue', 'blueviolet', 'brown',\n  'burlywood', 'cadetblue', 'chartreuse', 'chocolate', 'coral', 'cornflowerblue',\n  'cornsilk', 'crimson', 'cyan', 'darkblue', 'darkcyan', 'darkgoldenrod',\n  'darkgray', 'darkgreen', 'darkkhaki', 'darkmagenta', 'darkolivegreen',\n  'darkorange', 'darkorchid', 'darkred', 'darksalmon', 'darkseagreen',\n  'darkslateblue', 'darkslategray', 'darkturquoise', 'darkviolet',\n  'deeppink', 'deepskyblue', 'dimgray', 'dodgerblue', 'firebrick',\n  'floralwhite', 'forestgreen', 'fuchsia', 'gainsboro', 'ghostwhite',\n  'gold', 'goldenrod', 'gray', 'grey', 'green', 'greenyellow', 'honeydew',\n  'hotpink', 'indianred', 'indigo', 'ivory', 'khaki', 'lavender',\n  'lavenderblush', 'lawngreen', 'lemonchiffon', 'lightblue', 'lightcoral',\n  'lightcyan', 'lightgoldenrodyellow', 'lightgray', 'lightgreen', 'lightpink',\n  'lightsalmon', 'lightseagreen', 'lightskyblue', 'lightslategray',\n  'lightsteelblue', 'lightyellow', 'lime', 'limegreen', 'linen', 'magenta',\n  'maroon', 'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple',\n  'mediumseagreen', 'mediumslateblue', 'mediumspringgreen', 'mediumturquoise',\n  'mediumvioletred', 'midnightblue', 'mintcream', 'mistyrose', 'moccasin',\n  'navajowhite', 'navy', 'oldlace', 'olive', 'olivedrab', 'orange', 'orangered',\n  'orchid', 'palegoldenrod', 'palegreen', 'paleturquoise', 'palevioletred',\n  'papayawhip', 'peachpuff', 'peru', 'pink', 'plum', 'powderblue',\n  'purple', 'red', 'rosybrown', 'royalblue', 'saddlebrown', 'salmon',\n  'sandybrown', 'seagreen', 'seashell', 'sienna', 'silver', 'skyblue',\n  'slateblue', 'slategray', 'snow', 'springgreen', 'steelblue', 'tan',\n  'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat', 'white',\n  'whitesmoke', 'yellow', 'yellowgreen'\n];\n",
    "var _ = require('underscore');\nvar DEFAULT_ERROR_MSG = '';\n\n/**\n *  Return error message when backend request fails\n *  It tries to get responseText > errors and error arrays, if not gets `statusText`.\n */\n\nmodule.exports = function (e) {\n  if (!e) { throw new Error('error is required'); }\n\n  try {\n    var responseText = e.responseText && e.responseText.trim() && JSON.parse(e.responseText);\n    var errorMessage = e.statusText || DEFAULT_ERROR_MSG;\n\n    if (responseText) {\n      var errors = _.compact(\n        _.map(['errors', 'error'], function (type) {\n          return responseText[type] && responseText[type].join(', ');\n        })\n      );\n      errorMessage = errors.join(', ');\n    }\n\n    return errorMessage;\n  } catch (err) {\n    return DEFAULT_ERROR_MSG;\n  }\n};\n",
    "/**\n *  Fetch all query objects (querySchemaModel, queryGeometryModel, queryRowsCollection)\n *  if necessary\n */\n\nmodule.exports = function (params, callback) {\n  if (!params) throw new Error('all query objects are required');\n  if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n  if (!params.queryGeometryModel) throw new Error('queryGeometryModel is required');\n  if (!params.queryRowsCollection) throw new Error('queryRowsCollection is required');\n\n  var allFetched = function () {\n    return params.querySchemaModel.isFetched() &&\n           params.queryGeometryModel.isFetched() &&\n           params.queryRowsCollection.isFetched();\n  };\n\n  var checkQueryRowsCollectionFetch = function () {\n    if (params.queryRowsCollection.shouldFetch()) {\n      var opts = {};\n      if (callback) {\n        opts.success = callback;\n      }\n      params.queryRowsCollection.fetch(opts);\n    } else {\n      // we need to check if all are fetched because shouldFetch include the fetching state\n      allFetched() && callback && callback();\n    }\n  };\n\n  var rows = params.queryRowsCollection.size();\n\n  // we need to check if besides queryGeometryModel, there is any row, because the user could have deleted them\n  if (params.queryGeometryModel.shouldFetch() || (rows === 0 && params.queryRowsCollection.shouldFetch())) {\n    params.queryGeometryModel.fetch();\n  }\n\n  if (params.querySchemaModel.shouldFetch()) {\n    params.querySchemaModel.fetch({\n      success: checkQueryRowsCollectionFetch\n    });\n  } else {\n    checkQueryRowsCollectionFetch();\n  }\n};\n",
    "var _ = require('underscore');\nvar DEFAULT_VALUES = {\n  top: 0,\n  left: 0\n};\nvar MIN_GAP = 10;\nvar MIN_HEIGHT = 205;\nvar MIN_WIDTH = 244;\n\n/**\n * Would you like to know where to open a context menu?\n * Just provide:\n * @param {Object} options.parentView               Parent element view\n * @param {Number} options.posX                     Position X of the context menu\n * @param {Number} options.posY                     Position Y of the context menu\n * @param {Number} options.elementWidth (optional)  Context menu width\n * @param {Number} options.elementHeight (optional) Context menu height\n * @param {Number} options.offsetX (optional)       Context menu offsetX\n * @param {Number} options.offsetY (optional)       Context menu offsetY\n *\n * By default, it will try to positionate to the right (inside) and to\n * the top (below).\n */\n\nvar MagicPositioner = function (params) {\n  if (!params.parentView) throw new Error('parentView within params is required');\n  if (!_.isNumber(params.posX)) throw new Error('posX within params is required');\n  if (!_.isNumber(params.posY)) throw new Error('posY within params is required');\n\n  var $parentView = params.parentView;\n  var parentViewHeight = $parentView.outerHeight();\n  var parentViewWidth = $parentView.outerWidth();\n  var posX = params.posX;\n  var posY = params.posY;\n  var offsetX = params.offsetX || 0;\n  var offsetY = params.offsetY || 0;\n  var elementWidth = params.elementWidth || MIN_WIDTH;\n  var elementHeight = params.elementHeight || MIN_HEIGHT;\n  var cssProps = DEFAULT_VALUES;\n\n  if ((posX - elementWidth) > MIN_GAP) {\n    cssProps.left = 'auto';\n    cssProps.right = (parentViewWidth - posX + offsetX) + 'px';\n  } else if ((posX + elementWidth) > elementWidth) {\n    cssProps.right = 'auto';\n    cssProps.left = (posX + offsetX) + 'px';\n  }\n\n  if ((posY + elementHeight) < parentViewHeight) {\n    cssProps.bottom = 'auto';\n    cssProps.top = (posY + offsetY) + 'px';\n  } else if ((posY + elementHeight) > parentViewHeight) {\n    cssProps.top = 'auto';\n    cssProps.bottom = (parentViewHeight - posY + offsetY) + 'px';\n  }\n\n  return cssProps;\n};\n\nmodule.exports = MagicPositioner;\n",
    "var _ = require('underscore');\n/**\n* Mapcard preview url generator\n*/\n\nmodule.exports = {\n  urlForStaticMap: function (mapsApiTemplate, visualization, width, height) {\n    var formattedMapsApiTemplate = mapsApiTemplate.replace('{user}', visualization._permissionModel.get('owner').username);\n    var template = 'tpl_' + visualization.get('id').replace(/-/g, '_');\n\n    var imageUrl = formattedMapsApiTemplate + '/api/v1/map/static/named/' + template + '/' + width + '/' + height + '.png' + this._generateAuthTokensParams(visualization);\n\n    return imageUrl;\n  },\n\n  _generateAuthTokensParams: function (visualization) {\n    var authTokens = visualization.get('auth_tokens');\n    if (authTokens && authTokens.length > 0) {\n      return '?' + _.map(authTokens, function (t) {\n        return 'auth_token=' + t;\n      }).join('&');\n    } else {\n      return '';\n    }\n  }\n};\n",
    "var $ = require('jquery');\n\n/**\n * Check if Linux user used right/middle click at the time of the event\n *\n * @param ev {Event}\n * @returns {boolean}\n */\nfunction isLinuxMiddleOrRightClick (ev) {\n  return ev.which === 2 || ev.which === 3;\n}\n\n/**\n * Check if Mac user used CMD key at the time of the event Mac user used CMD key at the time of the event.\n *\n * @param ev {Event}\n * @returns {boolean}\n */\nfunction isMacCmdKeyPressed (ev) {\n  return ev.metaKey;\n}\n\nfunction isCtrlKeyPressed (ev) {\n  return ev.ctrlKey;\n}\n\n/**\n * Click handler for a cartodb.js view, to navigate event target's href URL through the view's router.navigate method.\n *\n * The default behavior is:\n * Unless cmd/ctrl keys are pressed it will cancel the default link behavior and instead navigate to the URL set in the\n * target's href attribute.\n *\n * Prerequisities:\n *  - view has a this.router instance.\n *\n * Example of how to use:\n *   - In a template:\n *     <a href=\"/some/uri\" id=\"#my-link\" ...\n *     <a href=\"/special/uri\" id=\"#my-special-link\" ...\n *\n *   - In the view file:\n *     var navigateThroughRouter = require('--/--/common/view_helpers/navigateThroughRouter');\n *     module.exports = new CoreView.extend({\n *       events: {\n *         'click a#my-link': navigateThroughRouter\n *         'click a#my-special-link': this._myCustomRoute\n *       }\n *\n *       _myCustomRoute: function(ev) {\n *         // Here you can do you custom logic before/after the routing, e.g.:\n *         console.log('before changing route');\n *         navigateThroughRouter.apply(this, arguments);\n *         console.log('after changing route');\n *       }\n *\n * @param ev {Event}\n */\nmodule.exports = function (ev) {\n  // We always kill the default behaviour of the event, since container around view might have other click behavior.\n  // In case of a cmd/ctrl click by an user.\n  this.killEvent(ev);\n  var url = $(ev.target).closest('a').attr('href');\n\n  if (!url) {\n    return false;\n  }\n\n  if (!isLinuxMiddleOrRightClick(ev) && !isMacCmdKeyPressed(ev)) {\n    var routerModel = (this.routerModel || this.options.routerModel);\n    if (!routerModel) {\n      throw new Error('routerModel is required');\n    }\n\n    routerModel.navigate(url, { trigger: true });\n  } else if (isCtrlKeyPressed(ev) || isMacCmdKeyPressed(ev)) {\n    window.open(url, '_blank');\n  }\n};\n",
    "// Get coordinates from a GeoJSON\n\nmodule.exports = function (geometry) {\n  try {\n    var geojson = JSON.parse(geometry);\n    return geojson.coordinates.join(', ');\n  } catch (e) {\n    return false;\n  }\n};\n",
    "var _ = require('underscore');\n\nmodule.exports = function checkAndBuildRequiredOpts (actualOpts, requiredOpts, context) {\n  if (requiredOpts === void 0) {\n    throw new Error('Opts are required');\n  }\n\n  _.each(requiredOpts, function (item) {\n    if (actualOpts[item] === void 0) throw new Error(item + ' is required');\n    context['_' + item] = actualOpts[item];\n  }, context);\n};\n",
    "/**\n *  Checks properties from a SQL\n */\n\nvar TableNameUtils = require('./table-name-utils');\n\nmodule.exports = {\n  isSameQuery: function (originalQuery, customQuery) {\n    if (originalQuery == null || customQuery == null) { // eslint-disable-line\n      throw new Error('Needed parameters not provided');\n    }\n\n    var parseQuery = function (query) {\n      return query\n        .toLowerCase()\n        .replace(/\\\"/g, '') // Remove quoted things like \"pepe\".tableName\n        .replace(/;/g, '');\n    };\n\n    return parseQuery(originalQuery) === parseQuery(customQuery);\n  },\n\n  // return true if the sql query alters table schema in some way\n  altersSchema: function (sql) {\n    if (!sql) {\n      return false;\n    }\n\n    // Remove all line breaks in order to prevent\n    // search pattern problems\n    sql = this._removeLineBreaks(sql.trim());\n\n    return sql.search(/alter\\s+[\\w\\.\"]+\\s+/i) !== -1 ||\n      sql.search(/drop\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^vacuum\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^create\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^reindex\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^grant\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^revoke\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^cluster\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^comment\\s+on\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^explain\\s+[\\w\\.\\\"]+/i) !== -1;\n  },\n\n  // return true if the sql query alters table data\n  altersData: function (sql) {\n    if (!sql) {\n      return false;\n    }\n\n    // Remove all line breaks in order to prevent\n    // search pattern problems\n    sql = this._removeLineBreaks(sql.trim());\n\n    return this.altersSchema(sql) ||\n      sql.search(/^refresh\\s+materialized\\s+view\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^truncate\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/insert\\s+into/i) !== -1 ||\n      sql.search(/update\\s+[\\w\\.\\-\"]+\\s+.*set/i) !== -1 ||\n      sql.search(/delete\\s+from/i) !== -1;\n  },\n\n  _removeLineBreaks: function (sql) {\n    return sql.replace(/\\r?\\n|\\r/g, ' ');\n  },\n\n  getDefaultSQL: function (tableName, userName, inOrganization) {\n    return this.getDefaultSQLFromTableName(TableNameUtils.getQualifiedTableName(tableName, userName, inOrganization));\n  },\n\n  getDefaultSQLFromTableName: function (tableName) {\n    return 'SELECT * FROM ' + tableName;\n  }\n};\n",
    "/**\n *  Functions to work with SQL table names\n */\n\nmodule.exports = {\n  getUnqualifiedName: function (tablename) {\n    if (!tablename) return null;\n    var tk = tablename.split('.');\n    if (tk.length === 2) {\n      return this._getUnquotedName(tk[1]);\n    }\n    return this._getUnquotedName(tablename);\n  },\n\n  getUsername: function (tablename) {\n    if (!tablename) return null;\n    var tk = tablename.split('.');\n    if (tk.length === 2) {\n      return this._getUnquotedName(tk[0]);\n    }\n    return '';\n  },\n\n  _getUnquotedName: function (tablename) {\n    return tablename && tablename.replace(/\"/g, '');\n  },\n\n  _quoteIfNeeded: function (name) {\n    var VALID_IDENTIFIER = /^[a-zA-Z_][a-zA-Z0-9_$]*$/;\n    name = this._getUnquotedName(name);\n    if (!VALID_IDENTIFIER.test(name)) {\n      name = '\"' + name + '\"';\n    }\n    return name;\n  },\n\n  getQualifiedTableName: function (tableName, userName, inOrganization) {\n    var schemaPrefix = (inOrganization && userName) ? this._quoteIfNeeded(userName) + '.' : '';\n    return schemaPrefix + this._quoteIfNeeded(this.getUnqualifiedName(tableName));\n  },\n\n  isSameTableName: function (firstTableName, secondTableName, ownerUsername) {\n    var firstParts = this._getTableNameParts(firstTableName, ownerUsername);\n    var secondParts = this._getTableNameParts(secondTableName, ownerUsername);\n\n    return firstParts[0] === secondParts[0] && firstParts[1] === secondParts[1];\n  },\n\n  _getTableNameParts: function (tableName, ownerUsername) {\n    var table = this.getUnqualifiedName(tableName);\n    var username = this.getUsername(tableName) || ownerUsername;\n\n    return [username, table];\n  }\n};\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\n\n/*\n *  Util functions\n */\n\nmodule.exports = {\n  /*\n   *  Simple regex to check if string is an url/ftp\n   *  input ->  string with input text (example: 'https://carto.com')\n   *\n   *  return -> true\n   */\n  isURL: function (input) {\n    var urlregex = /^((http|https|ftp)\\:\\/\\/)/g;\n    if (input) {\n      return urlregex.test(input);\n    } else {\n      return false;\n    }\n  },\n\n  /*\n   *  check if string is blank (i.e.: str === \"\")\n   *  input ->  string with input text\n   *\n   * @return a boolean\n   */\n  isBlank: function (str) {\n    return (!str || /^\\s*$/.test(str));\n  },\n  /*\n   *  Transform bytes to a readable format, like MB, GB\n   *  input ->  34234244\n   *\n   *  return -> 3 MB\n   */\n  readablizeBytes: function (bytes, round) {\n    if (!bytes || isNaN(bytes)) {\n      return 0;\n    }\n    var s = ['bytes', 'kB', 'MB', 'GB', 'TB', 'PB'];\n    var e = Math.floor(Math.log(bytes) / Math.log(1024));\n    var value = (bytes / Math.pow(1024, Math.floor(e))).toFixed(2);\n\n    if (round) {\n      value = parseInt(value, 10);\n    }\n\n    return value + ' ' + s[e];\n  },\n\n  /**\n   *  Convert long numbers to\n   *  readizable numbers.\n   *\n   */\n  readizableNumber: function (num) {\n    if (num >= 1000000000) return (num / 1000000000).toFixed(1) + 'G';\n    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';\n    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';\n    return num;\n  },\n\n  /*\n   * formatNumber: adds thousands separators\n   * @return a string\n   *\n   */\n  formatNumber: function (x) {\n    if (!x) return '0';\n    var parts = x.toString().split('.');\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    return parts.join('.');\n  },\n\n  /**\n   * Similar to _.result, but also allows passing arbitrary arguments to the property if it's function.\n   * This makes code more terse  when one just wants to use a value if it's available, no if-checks required.\n   *\n   * @example Expected output\n   *   model.set('something', 'yay');\n   *   cdb.Utils.result(model, 'get', 'something') // => 'yay'\n   *   cdb.Utils.result(model, 'nonexisting', 'else') // => undefined\n   *   cdb.Utils.result(undefinedVar, 'get') // => null\n   *\n   * @example Of usage\n   *  return cdb.Utils.result(model, 'get', 'mightNotExist') === 'OK'\n   *\n   * @param {*} maybeFn\n   * @return {*} Result from called maybeFn if a function, null otherwise\n   */\n  result: function (object, property) {\n    if (object == null) return null;\n    var value = object[property];\n    return _.isFunction(value) ? value.apply(object, Array.prototype.slice.call(arguments, 2)) : value;\n  },\n\n  /**\n   *  Get the extension of a string\n   *\n   */\n  getFileExtension: function (str) {\n    if (!str) return '';\n    return str.substr(str.lastIndexOf('.') + 1);\n  },\n\n  /**\n   *  Add leading zeros to numbers\n   *\n   */\n  pad: function (num, size) {\n    var s = num + '';\n    while (s.length < size) s = '0' + s;\n    return s;\n  },\n\n  formatDate: function (opts) {\n    if (!opts.time) throw new Error();\n    if (opts.month === undefined) throw new Error();\n    if (opts.year === undefined) throw new Error();\n    if (!opts.day) throw new Error();\n\n    // Month in Date format should be specified as an index\n    var month = parseInt(opts.month + 1, 10);\n    var padZero = function (digit) {\n      digit = String(digit);\n      if (digit < 10 && digit.length === 1) {\n        return '0' + digit;\n      }\n      return digit;\n    };\n\n    return '' +\n      opts.year + '-' +\n      padZero(month) + '-' +\n      padZero(opts.day) + 'T' +\n      opts.time + 'Z';\n      // Not adding any info about timezone\n  },\n\n  /*\n   * rgbToHex\n   *\n   */\n  rgbToHex: function (r, g, b) {\n    function componentToHex (c) {\n      var hex = c.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    }\n\n    return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\n  },\n\n  /*\n   *  Returns true if the hex color passed as an input is valid\n   *  input -> hex (#FF00FF)\n   *  output -> true\n   *\n   * @return a boolean\n   */\n  isValidHex: function (hex) {\n    return !!hex.match(/(^#?[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i);\n  },\n\n  /*\n   *  Transforms an hex color into its RGB representation\n   *  input ->  hex (#FF00FF)\n   *  output ->  { r: 255, g: 0, b: 255 }\n   *\n   * @return a hash\n   */\n  hexToRGB: function (hex) {\n    if (!hex) {\n      hex = '#FFFFFF';\n    }\n\n    var shortRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\n    hex = hex.replace(shortRegex, function (m, r, g, b) {\n      return r + r + g + g + b + b;\n    });\n\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  },\n  /*\n   *  Transforms an hex color an a opacity value to a rgba string\n   *  input ->  hex (#FF00FF) and opacity (0.4)\n   *  output -> 'rgba(255,0,255,0.4)'\n   *\n   * @return a string\n   */\n  hexToRGBA: function (hex, opacity) {\n    function roundToTwo (num) {\n      return +(Math.round(num + 'e+2') + 'e-2');\n    }\n\n    var rgb = this.hexToRGB(hex);\n    opacity = opacity != null ? roundToTwo(opacity) : 1;\n    if (rgb) {\n      return 'rgba(' + [rgb.r, rgb.g, rgb.b, opacity].join(', ') + ')';\n    } else {\n      return hex;\n    }\n  },\n\n  /*\n   *  Strip html tags from a value.\n   *  input ->  string with input text (example: '<a href=\"#whoknows\">Jamon</a> </br> <p>Vamos</p>')\n   *  allowed -> allowed html tags in the result (example: '<a>')\n   *\n   *  return -> '<a href=\"#whoknows\">Jamon</a> Vamos'\n   */\n  stripHTML: function (input, allowed) {\n    allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');\n    var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n    if (!input || (typeof input !== 'string')) return '';\n    return input.replace(tags, function ($0, $1) {\n      return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';\n    });\n  },\n\n  /**\n   *  Remove all non-common characters like spaces, quotes, accents, etc. and\n   *  joins strings with underscore symbols\n   *\n   */\n  sanitizeString: function (str) {\n    return str.replace(/[^a-z0-9\\s]/gi, '').replace(/[_\\s]/g, '_');\n  },\n\n  /**\n   *  Returns true is value is a valid number. Based on jQuery isNumeric\n   */\n  isNumeric: function (value) {\n    return !isNaN(parseFloat(value)) && isFinite(value);\n  },\n\n  /**\n   * Formats a number that to include up to 2 decimal positions if less than 10\n   * and up to 1 if greater than 10.\n   */\n  formatDecimalPositions: function (value) {\n    // we are using here the unary operator because parseInt fails to handle exponential number\n    var converted = +value;\n    var p = 0;\n    var abs_v;\n\n    if (isNaN(converted) || converted === 0) {\n      return value;\n    }\n\n    abs_v = Math.abs(converted);\n\n    if (abs_v > 10) {\n      p = 1;\n    } else if (abs_v > 0.01) {\n      p = Math.min(Math.ceil(Math.abs(Math.log(abs_v) / Math.log(10))) + 2, 2);\n    }\n\n    value = value.toFixed(p);\n    var m = value.match(/(\\.0+)$/);\n    if (m) {\n      value = value.replace(m[0], '');\n    }\n\n    return value;\n  },\n\n  /**\n   *  Remove new lines from string\n   *\n   */\n  removeNewLines: function (str) {\n    return str.replace(/(\\r\\n|\\n|\\r)/gm, '');\n  },\n\n  /**\n   * Returns true if the string ends with provided suffix\n   */\n  endsWith: function (str, suffix) {\n    return str.indexOf(suffix, str.length - suffix.length) !== -1;\n  },\n\n  cloneObject: function (obj) {\n    if (!obj) {\n      return obj;\n    }\n    return JSON.parse(JSON.stringify(obj));\n  },\n\n  /**\n   *  Capitalize first letter of string\n   *\n   */\n  capitalize: function (str) {\n    if (!str) {\n      return str;\n    }\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  },\n\n  sanitizeHtml: function (text) {\n    return cdb.core.sanitize.sanitize(text || '');\n  }\n};\n",
    "module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-header CDB-infowindow-headerBg CDB-infowindow-headerBg--light js-header\\\" style=\\\"background: #35AAE5;\\\">\\n      {{#loading}}{{/loading}}\\n      <ul class=\\\"CDB-infowindow-list\\\">\\n        {{#content.fields}}\\n          {{^index}}\\n            <li class=\\\"CDB-infowindow-listItem\\\">\\n              {{#title}}<h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>{{/title}}\\n              {{#value}}<h4 class=\\\"CDB-infowindow-title {{#type}}{{ type }}{{/type}}\\\">{{{ value }}}</h4>{{/value}}\\n            </li>\\n            {{^value}}{{/value}}\\n          {{/index}}\\n        {{/content.fields}}\\n      </ul>\\n    </div>\\n    <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n      {{#loading}}\\n        <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n      {{/loading}}\\n      <ul class=\\\"CDB-infowindow-list js-content\\\">\\n        {{#content.fields}}\\n          {{#index}}\\n            <li class=\\\"CDB-infowindow-listItem\\\">\\n              {{#title}}\\n                <h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>\\n              {{/title}}\\n              {{#value}}\\n                <h4 class=\\\"CDB-infowindow-title\\\">{{{ value }}}</h4>\\n              {{/value}}\\n              {{^value}}\\n                <h4 class=\\\"CDB-infowindow-title\\\">NULL</h4>\\n              {{/value}}\\n            </li>\\n          {{/index}}\\n        {{/content.fields}}\\n      </ul>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--dark js-infowindow\\\" style=\\\"background:#2E3C43\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-bg\\\">\\n      <div class=\\\"CDB-infowindow-inner\\\">\\n        {{#loading}}\\n          <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n        {{/loading}}\\n        <ul class=\\\"CDB-infowindow-list js-content\\\">\\n          {{#content.fields}}\\n          <li class=\\\"CDB-infowindow-listItem\\\">\\n            {{#title}}<h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>{{/title}}\\n            {{#value}}<h4 class=\\\"CDB-infowindow-title\\\">{{{ value }}}</h4>{{/value}}\\n            {{^value}}<h4 class=\\\"CDB-infowindow-title\\\">null</h4>{{/value}}\\n          </li>\\n          {{/content.fields}}\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\" data-cover=\\\"true\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-header CDB-infowindow-headerMedia js-header js-cover\\\">\\n      {{#loading}}<div class=\\\"CDB-Loader js-loader\\\"></div>{{/loading}}\\n      <div class=\\\"CDB-infowindow-mediaTitle\\\">\\n        {{#content.fields.1}}\\n          {{#value}}\\n            <h4 class=\\\"CDB-infowindow-title\\\">\\n              <span>{{{ value }}}</span>\\n            </h4>\\n          {{/value}}\\n        {{/content.fields.1}}\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n      {{#loading}}<div class=\\\"CDB-Loader js-loader\\\"></div>{{/loading}}\\n      <div class=\\\"CDB-infowindow-list js-content\\\">\\n        {{#content.fields}}\\n          {{#index}}\\n            <div class=\\\"CDB-infowindow-listItem CDB-infowindow-listItem--order{{index}}\\\">\\n              {{#title}}<h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>{{/title}}\\n              {{#value}}<h4 class=\\\"CDB-infowindow-title\\\">{{{ value }}}</h4>{{/value}}\\n              {{^value}}<h4 class=\\\"CDB-infowindow-title\\\">null</h4>{{/value}}\\n            </div>\\n          {{/index}}\\n        {{/content.fields}}\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-bg\\\">\\n      <div class=\\\"CDB-infowindow-inner\\\">\\n        {{#loading}}\\n          <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n        {{/loading}}\\n        <ul class=\\\"CDB-infowindow-list js-content\\\">\\n          {{#content.fields}}\\n          <li class=\\\"CDB-infowindow-listItem\\\">\\n            {{#title}}<h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>{{/title}}\\n            {{#value}}<h4 class=\\\"CDB-infowindow-title\\\">{{{ value }}}</h4>{{/value}}\\n            {{^value}}<h4 class=\\\"CDB-infowindow-title\\\">null</h4>{{/value}}\\n          </li>\\n          {{/content.fields}}\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-header CDB-infowindow-headerBg CDB-infowindow-headerBg--light js-header\\\" style=\\\"background: #35AAE5;\\\">\\n      {{#loading}}{{/loading}}\\n      <ul class=\\\"CDB-infowindow-list\\\">\\n        {{#content.fields}}\\n          {{^position}}\\n        <li class=\\\"CDB-infowindow-listItem\\\">\\n          {{#title}}\\n            {{#alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{alternative_name}}}</h5>\\n            {{/alternative_name}}\\n            {{^alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{name}}}</h5>\\n            {{/alternative_name}}\\n          {{/title}}\\n          {{#name}}\\n          <h4 class=\\\"CDB-infowindow-title {{#type}}{{=<% %>=}}{{<%={{ }}=%>{{{ type }}}{{=<% %>=}}}}<%={{ }}=%>{{/type}}\\\">\\n            {{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%>\\n          </h4>\\n          {{/name}}\\n        </li>\\n          {{/position}}\\n        {{/content.fields}}\\n      </ul>\\n    </div>\\n    <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n      {{#loading}}\\n        <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n      {{/loading}}\\n      <ul class=\\\"CDB-infowindow-list js-content\\\">\\n        {{#content.fields}}\\n          {{#position}}\\n        <li class=\\\"CDB-infowindow-listItem\\\">\\n          {{#title}}\\n            {{#alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{alternative_name}}}</h5>\\n            {{/alternative_name}}\\n            {{^alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{name}}}</h5>\\n            {{/alternative_name}}\\n          {{/title}}\\n          <h4 class=\\\"CDB-infowindow-title\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n        </li>\\n          {{/position}}\\n        {{/content.fields}}\\n      </ul>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--dark js-infowindow\\\" style=\\\"background:#2E3C43\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-bg\\\">\\n      <div class=\\\"CDB-infowindow-inner\\\">\\n        {{#loading}}\\n          <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n        {{/loading}}\\n        <ul class=\\\"CDB-infowindow-list js-content\\\">\\n          {{#content.fields}}\\n          <li class=\\\"CDB-infowindow-listItem\\\">\\n            {{#title}}\\n              {{#alternative_name}}\\n              <h5 class=\\\"CDB-infowindow-subtitle\\\">{{alternative_name}}</h5>\\n              {{/alternative_name}}\\n              {{^alternative_name}}\\n              <h5 class=\\\"CDB-infowindow-subtitle\\\">{{name}}</h5>\\n              {{/alternative_name}}\\n            {{/title}}\\n            <h4 class=\\\"CDB-infowindow-title\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n          </li>\\n          {{/content.fields}}\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\" data-cover=\\\"true\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-header CDB-infowindow-headerMedia js-header js-cover\\\">\\n      {{#loading}}<div class=\\\"CDB-Loader js-loader\\\"></div>{{/loading}}\\n      <div class=\\\"CDB-infowindow-mediaTitle\\\">\\n        {{#content.fields.1}}\\n        <h4 class=\\\"CDB-infowindow-title\\\">\\n          <span>{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></span>\\n        </h4>\\n        {{/content.fields.1}}\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n      {{#loading}}<div class=\\\"CDB-Loader js-loader\\\"></div>{{/loading}}\\n      <div class=\\\"CDB-infowindow-list js-content\\\">\\n        {{#content.fields}}\\n          {{#position}}\\n        <div class=\\\"CDB-infowindow-listItem CDB-infowindow-listItem--order{{position}}\\\">\\n            {{#title}}\\n              {{#alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{alternative_name}}}</h5>\\n              {{/alternative_name}}\\n              {{^alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{name}}}</h5>\\n              {{/alternative_name}}\\n            {{/title}}\\n          <h4 class=\\\"CDB-infowindow-title\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n        </div>\\n          {{/position}}\\n        {{/content.fields}}\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-bg\\\">\\n      <div class=\\\"CDB-infowindow-inner\\\">\\n        {{#loading}}\\n          <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n        {{/loading}}\\n        <ul class=\\\"CDB-infowindow-list js-content\\\">\\n          {{#content.fields}}\\n          <li class=\\\"CDB-infowindow-listItem\\\">\\n            {{#title}}\\n              {{#alternative_name}}\\n              <h5 class=\\\"CDB-infowindow-subtitle\\\">{{alternative_name}}</h5>\\n              {{/alternative_name}}\\n              {{^alternative_name}}\\n              <h5 class=\\\"CDB-infowindow-subtitle\\\">{{name}}</h5>\\n              {{/alternative_name}}\\n            {{/title}}\\n            <h4 class=\\\"CDB-infowindow-title\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n          </li>\\n          {{/content.fields}}\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-Tooltip CDB-Tooltip--isDark\\\">\\n  <ul class=\\\"CDB-Tooltip-list\\\">\\n    {{#fields}}\\n      <li class=\\\"CDB-Tooltip-listItem\\\">\\n        {{#title}}\\n          <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ title }}}</h3>\\n        {{/title}}\\n        <h4 class=\\\"CDB-Tooltip-listText\\\">{{{ value }}}</h4>\\n      </li>\\n    {{/fields}}\\n  </ul>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-Tooltip CDB-Tooltip--isLight\\\">\\n  <ul class=\\\"CDB-Tooltip-list\\\">\\n    {{#fields}}\\n      <li class=\\\"CDB-Tooltip-listItem\\\">\\n        {{#title}}\\n          <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ title }}}</h3>\\n        {{/title}}\\n        <h4 class=\\\"CDB-Tooltip-listText\\\">{{{ value }}}</h4>\\n      </li>\\n    {{/fields}}\\n  </ul>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-Tooltip CDB-Tooltip--isDark\\\">\\n  <ul class=\\\"CDB-Tooltip-list\\\">\\n    {{#content.fields}}\\n      <li class=\\\"CDB-Tooltip-listItem\\\">\\n        {{#title}}\\n          <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ name }}}</h3>\\n        {{/title}}\\n        <h4 class=\\\"CDB-Tooltip-listText\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n      </li>\\n    {{/content.fields}}\\n  </ul>\\n</div>\\n\";\n",
    "module.exports = \"<div class=\\\"CDB-Tooltip CDB-Tooltip--isLight\\\">\\n  <ul class=\\\"CDB-Tooltip-list\\\">\\n    {{#content.fields}}\\n      <li class=\\\"CDB-Tooltip-listItem\\\">\\n        {{#title}}\\n          <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ name }}}</h3>\\n        {{/title}}\\n        <h4 class=\\\"CDB-Tooltip-listText\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n      </li>\\n    {{/content.fields}}\\n  </ul>\\n</div>\\n\";\n",
    "var _ = require('underscore');\nvar Notifier = require('./components/notifier/notifier');\n\nvar NOTIFICATION_ERROR_TEMPLATE = _.template(\"<span class='CDB-Text u-errorTextColor'><%- title %></span>\");\nvar NOTIFICATION_PREFIX = 'sql-notifications';\n\nvar SQLNotifications = {\n  track: function (view) {\n    // In order to not bloat the notification center we will create\n    // only one notification, and update it along the way\n    this._notificationId = NOTIFICATION_PREFIX;\n  },\n\n  removeNotification: function () {\n    Notifier.removeNotification(this._notificationId);\n  },\n\n  showNotification: function (attrs) {\n    this._addOrUpdateNotification(this._notificationId, attrs);\n  },\n\n  showErrorNotification: function (errors) {\n    var notificationAttrs = {\n      status: 'error',\n      info: _t('notifications.sql.error.body', {\n        body: NOTIFICATION_ERROR_TEMPLATE({\n          title: _t('notifications.sql.error.title')\n        }),\n        error: this._transformErrors(errors)\n      }),\n      closable: false\n    };\n\n    this._addOrUpdateNotification(this._notificationId, notificationAttrs);\n  },\n\n  _transformErrors: function (errors) {\n    return _.map(errors, function (err) {\n      return err.message;\n    }, this).join('. ');\n  },\n\n  _addOrUpdateNotification: function (notificationId, notificationAttrs) {\n    var notification = this._getNotification(notificationId);\n    if (notification) {\n      notification.set(notificationAttrs);\n    } else {\n      this._addNotification(notificationId, notificationAttrs);\n    }\n  },\n\n  _addNotification: function (notificationId, notificationAttrs) {\n    notificationAttrs = _.extend({\n      id: notificationId\n    }, notificationAttrs);\n    Notifier.addNotification(notificationAttrs);\n  },\n\n  _getNotification: function (notificationId) {\n    return Notifier.getNotification(notificationId);\n  }\n};\n\nmodule.exports = SQLNotifications;\n",
    "var _ = require('underscore');\n\nvar SOURCE_ID_REGEX = /^([a-z]+)(\\d*)$/; // matches a string with one or more letters + numbers, e.g. 'b2'\n\nvar newId = function (id, seqChange) {\n  if (!id || !id.match) throw new Error('invalid id');\n\n  var matches = id.match(SOURCE_ID_REGEX);\n  matches[2] = matches[2] || -1;\n\n  if (matches && matches.length === 3) {\n    // letter + next number\n    var letter = matches[1];\n    var seq = parseInt(matches[2], 10) + seqChange;\n    return letter + Math.max(seq, 0);\n  } else {\n    throw new Error('invalid id');\n  }\n};\n\n/**\n * Encapsulates logic related to the nodes' IDs.\n */\nmodule.exports = {\n\n  /**\n   * Get next id in sequence of given source id.\n   * @param {String} id, e.g. 'c2'\n   * @return {String} e.g. 'c3'\n   */\n  next: function (id) {\n    return newId(id, 1);\n  },\n\n  prev: function (id) {\n    return newId(id, -1);\n  },\n\n  /**\n   * Get the letter representation.\n   * @param {String, Object} sourceId or backbone model that have id. e.g. 'c2'\n   * @return {String} e.g. 'c' or an empty string if there is no letter in the given id\n   */\n  letter: function (sourceId) {\n    if (!sourceId || !_.isString(sourceId)) return '';\n    var match = sourceId.match(/^([a-z]+)/);\n    return _.isArray(match) && match[0] || '';\n  },\n\n  /**\n   * Get the sequence representation.\n   * @param {String, Object} sourceId or backbone model that have id. e.g. 'c2'\n   * @return {Number} e.g. 2 or undefined if there is no sequence\n   */\n  sequence: function (sourceId) {\n    if (!sourceId || !_.isString(sourceId)) return;\n    var match = sourceId.match(/(\\d+$)/);\n    return _.isArray(match) && match[0] || undefined;\n  },\n\n  changeLetter: function (id, newLetter) {\n    var seq = id.match(/(\\d+)$/)[0];\n    return newLetter + seq;\n  }\n\n};\n",
    "module.exports={\n  \"feedback\": \"Give us feedback!\",\n  \"user\": {\n    \"you\": \"You\"\n  },\n  \"months\": {\n    \"january\": \"January\",\n    \"february\": \"February\",\n    \"march\": \"March\",\n    \"april\": \"April\",\n    \"may\": \"May\",\n    \"june\": \"June\",\n    \"july\": \"July\",\n    \"august\": \"August\",\n    \"september\": \"September\",\n    \"october\": \"October\",\n    \"november\": \"November\",\n    \"december\": \"December\"\n  },\n  \"assets\": {\n    \"maki-icons\": {\n      \"disclaimer\": \"<a href='https://github.com/mapbox/maki' target='_blank'>Maki Icons</a>, an open source project by <a href='http://mapbox.com' target='_blank'>Mapbox</a>\"\n    }\n  },\n  \"operators\": {\n    \"count\": \"COUNT\",\n    \"sum\": \"SUM\",\n    \"avg\": \"AVG\",\n    \"min\": \"MIN\",\n    \"max\": \"MAX\"\n  },\n  \"builder-activated-notification\": {\n    \"message\": \"CARTO Builder has been activated in your account. <a href='https://carto.com/learn/guides' class='onboardingNotification-link'>Learn more</a> about it and let us know what you think or <a href='mailto:builder-support@carto.com' class='onboardingNotification-link'>contact us</a>. Happy mapping!\"\n  },\n  \"builder-onboarding\": {\n    \"title\": \"Welcome to Builder,\",\n    \"description\": \"Discover the new and exciting analyses you can perform with location intelligence.\",\n    \"take-tour\": \"Take a tour\",\n    \"edit-map\": \"Edit your map\",\n    \"toolbar\": {\n      \"title\": \"Toolbar\",\n      \"description\": \"The toolbar provides options to access your dashboard, edit your map, and configure its settings.\"\n    },\n    \"configurator\": {\n      \"title\": \"Edit pane\",\n      \"description\": \"Manage all the components of your map: add layers and widgets, import datasets, customize analyses, and change styles.\"\n    },\n    \"map\": {\n      \"title\": \"Map\",\n      \"description\": \"Your map reflects changes instantly.\"\n    },\n    \"widgets\": {\n      \"title\": \"Widgets pane\",\n      \"description\": \"The widgets you add to your map appear directly on your visualization.\"\n    },\n    \"skip\": \"skip\",\n    \"next\": \"next\"\n  },\n  \"data-onboarding\": {\n    \"title\": \"Welcome to the layer pane\",\n    \"description\": \"Analyze, style, and enhance your data with pop-ups and&nbsp;legends.\",\n    \"take-tour\": \"Take the tour\",\n    \"edit-layer\": \"Edit layer\",\n    \"layer-options\": {\n      \"title\": \"Layer options\",\n      \"description\": \"Layers can be renamed by double-clicking on the layer name, centered by clicking in the crosshair, and exported through their contextual menu.\"\n    },\n    \"data-tab\": {\n      \"title\": \"Data tab\",\n      \"description\": \"Style, add analysis, pop-ups, and legends to layers. To further explore your data, add widgets.\"\n    },\n    \"sql-editor\": {\n      \"title\": \"SQL View\",\n      \"description\": \"Data layers can be edited and processed by using the SQL view at the bottom of the screen.\"\n    },\n    \"add-geometry\": {\n      \"title\": \"Add geometries and switch to dataset view\",\n      \"description\": \"You can switch between map or data view. In map view, you can add points, lines, and polygons.\",\n      \"edit-layer\": \"Edit layer\"\n    },\n    \"exit\": \"Exit tour\",\n    \"next\": \"Next\"\n  },\n  \"analysis-onboarding\": {\n    \"title\": \"The Art of Analysis\",\n    \"description\": \"Build reproducible workflows for analyzing and explaining your data. Analyses turn your maps into Location Intelligence apps.\",\n    \"description-list\": {\n      \"item1\": \"Different analyses can be chained\",\n      \"item2\": \"Analyses are dynamic. When the data changes, the analysis is&nbsp;refreshed.\",\n      \"item3\": \"The original data is not modified by the analysis workflow.\",\n      \"item4\": \"Some analysis queries add calculated results to columns in your dataset.\"\n    },\n    \"done\": \"Done\",\n    \"add-analysis\": \"Add analysis\",\n    \"never-show-message\": \"Don't show me this again.\"\n  },\n  \"style-onboarding\": {\n    \"title\": \"Style this map!\",\n    \"description\": \"Apply aggregation styling to maps and define options by geometry attributes or by a column value.\",\n    \"aggregation\": {\n      \"title\": \"How would you like to aggregate your data?\",\n      \"description\": \"Map types are called \\\"Aggregation\\\". Add Torque, Heatmap, and other aggregation styles to data.\"\n    },\n    \"style\": {\n      \"title\": \"Make it beautiful!\",\n      \"description\": \"Use these options to style your data in beautiful ways. For example, you can create thematic maps by altering the FILL option by value.\",\n      \"short-description\": \"Use these options to style your data in beautiful ways.\"\n    },\n    \"cartocss\": {\n      \"title\": \"Dress it up with CartoCSS\",\n      \"description\": \"Further style data by using the CartoCSS view at the bottom of the screen.\"\n    },\n    \"take-tour\": \"Take the tour\",\n    \"style-layer\": \"Style layer\",\n    \"never-show-message\": \"Don't show me this again.\",\n    \"exit\": \"Exit tour\",\n    \"next\": \"Next\"\n  },\n  \"analyses-onboarding\": {\n    \"placeholders\": {\n      \"layer-name\": \"NAME OF THE LAYER\",\n      \"clusters\": \"CLUSTERS\",\n      \"method\": \"METHOD\",\n      \"percentage\": \"PERCENTAGE\"\n    },\n    \"done\": \"Done\",\n    \"finished\": \"has finished\",\n    \"style-analysis\": \"Style this analysis\",\n    \"read-more\": \"Read more in documentation\",\n    \"learn-more\": \"Learn more\",\n    \"never-show-message\": \"Don't show me this again.\",\n    \"no-new-columns\": \"No new columns were created.\",\n    \"geometries-updated\": \"The geometries in your table were updated\",\n    \"new-column-added\": \"A new column has been added to your dataset.\",\n    \"new-columns-created\": \"New columns have been created as a new dataset.\",\n    \"new-column-included\": \"A new column has been included with your original data.\",\n    \"new-columns-included\": \"New columns has been included with your original data.\",\n    \"new-columns-included-based-on-input\": \"New columns have been included with your original data based on the columns chosen for the input.\",\n    \"sampling\": {\n      \"title\": \"Subsample of rows\",\n      \"description\": \"A sample of your original table was randomly selected to give approximately a percentage of the rows from your input dataset.\"\n    },\n    \"merge\": {\n      \"title\": \"Join columns from 2nd layer\",\n      \"description\": \"This analysis performed a columnar JOIN in order to get columns from two different tables.\"\n    },\n    \"intersection\": {\n      \"title\": \"Filter points in polygons\",\n      \"description\": \"This analysis performs a spatial intersection, returning only the rows from the target layer which intersect with geometries in the source layer.\",\n      \"source-cartodb-id\": \"This number represents the cartodb_id of the source geometry\"\n    },\n    \"area-of-influence\": {\n      \"title\": \"Create areas of influence\",\n      \"description\": \"Area of influence creates polygons according to the parameters set by the user.\",\n      \"the-geom\": \"This column was updated to show the area of influence requested.\"\n    },\n    \"aggregate-intersection\": {\n      \"title\": \"Intersect second layer\",\n      \"description\": \"This operation performs a spatial intersection and aggregates the geometry values from the target layer that intersect with the geometry of the source layer.\",\n      \"count-vals-density\": \"This column is added if COUNT was chosen as the aggregation operation\",\n      \"extra-column\": \"This column is added if {operation_type} is chosen with column {column_name}\"\n    },\n    \"filter\": {\n      \"title\": \"Row filtering\",\n      \"description\": \"Row filtering allows you to quickly narrow down the total data you display on a map or input into an analysis node.\"\n    },\n    \"filter-by-node-column\": {\n      \"title\": \"Filter by layer\",\n      \"description\": \"Filter by layer allows you to filter the data in your layer by propagating the filters in the attached layer. Now if you filter on widgets added to the first node, the results in the second node would be also filtered.\"\n    },\n    \"spatial-markov-trend\": {\n      \"trend\": \"The normalized trend for each geometry\",\n      \"trend_up\": \"The probability that a geometry's value will move to a higher class\",\n      \"trend_down\": \"The probability that a geometry's value will move to a lower class\",\n      \"volatility\": \"A measure of the potential for a geometry to possess values in other classes\",\n      \"description\": \"Trends and volatility are calculated based on the time series data input. Trends calculated from inputs with a longer history are more precise. Inputs for the time column should equally spaced (e.g., all one week/month/year apart).\"\n    },\n    \"moran\": {\n      \"title\": \"Detect outliers and clusters\",\n      \"description\": \"Detect outliers and clusters finds areas in your data where clusters of high values or low values exist, as well as areas which are dissimilar from their neighbors.\",\n      \"quads\": \"Classification of the geometry from the analysis\",\n      \"significance\": \"The statistical significance of the geometry's classification of one of four quadrant types.\",\n      \"moran\": \"The local statistic calculated from the Moran's I analysis for each geometry/value in the dataset.\",\n      \"rowid\": \"The original row id of the geometry (cartodb_id).\"\n    },\n    \"kmeans\": {\n      \"title\": \"Calculating point clusters\",\n      \"cluster-no\": \"A numeric identifier for each cluster in your dataset. Values start at 1 and go up to the %{clusters} clusters you requested (or max rows if less).\",\n      \"description\": \"Point clustering is uses k-means to calculate a predefined number of clusters from your data.\"\n    },\n    \"data-observatory-measure\": {\n      \"title\": \"Enrich from the Data Observatory\",\n      \"custom-column\": \"This column contains the data requested from the Data Observatory\",\n      \"description\": \"The Data Observatory enrichment is the result of the geometry location and the measure requested.\"\n    },\n    \"connect-with-lines\": {\n      \"title\": \"Connect with lines\",\n      \"description\": \"Create lines from point datasets using a variety of methods\",\n      \"the-geom\": \"This column was updated to be lines according to the method chosen.\",\n      \"line-sequential\": \"This analysis creates a line by connecting all points in the dataset in a specified order\",\n      \"line-source-to-target\": \"Link a source point to a target point based on a shared attribute\",\n      \"line-to-column\": \"Create lines from a point to to a geometry stored in another column\",\n      \"line-to-single-point\": \"Connect the coordinate from latitude and longitude columns to the point geometry (`the_geom`) in your dataset.\"\n    },\n    \"group-points\": {\n      \"title\": \"Group points into polygons\",\n      \"the-geom\": \"This column was updated to polygons encompassing the input points.\",\n      \"category\": \"This will be the category over which the polygons were calculated\",\n      \"description\": \"Group points into polygons to create new polygons.\"\n    },\n    \"georeference\": {\n      \"title\": \"Georeference\",\n      \"the-geom\": \"This column, which stores the geographic information in your dataset, has been updated to reflect the boundaries or locations from the inputs specified.\",\n      \"description\": \"Georeferencing data is a service that uses information from many sources to get the geographical information associated with latitude/longitude columns, city names, postal codes, administrative boundaries, IP addresses, or street addresses.\"\n    },\n    \"centroid\": {\n      \"title\": \"Calculating centroids from geometries\",\n      \"description\": \"Centroids are calculated from all, groups, or singular geometries. Using the optional parameters of Category, Aggregate, and Weight you can change how they are calculated and what information the result will contain. \",\n      \"the-geom\": \"Point geometries representing the centroid(s) of your input data.\",\n      \"aggregated-value\": \"Stores the aggregate value for each centroid.\",\n      \"non-aggregated-value\": \"Contains the count of features considered for each centroid\",\n      \"category\": \"Stores the category value for each centroid from the source dataset\"\n    },\n    \"closest\": {\n      \"description\": \"Find nearest analysis locates the closest points between two tables.\",\n      \"source_cdb_id\": \"This column has been created with the related points id from the source table.\",\n      \"the-geom\": \"This column has been updated with the target table geometries.\",\n      \"title\": \"Find nearest\"\n    }\n  },\n  \"analyses\": {\n    \"connect-with-lines\": {\n      \"title\": \"Connect with lines\",\n      \"short-title\": \"Connect with lines\"\n    },\n    \"georeference\": {\n      \"title\": \"Georeference\",\n      \"short-title\": \"Georeference\"\n    },\n    \"data-observatory-measure\": {\n      \"title\": \"Enrich from Data Observatory\",\n      \"short-title\": \"Data observatory\",\n      \"age-and-gender\": \"Age and Gender\",\n      \"boundaries\": \"Boundaries\",\n      \"education\": \"Education\",\n      \"employment\": \"Employment\",\n      \"families\": \"Families\",\n      \"housing\": \"Housing\",\n      \"income\": \"Income\",\n      \"language\": \"Language\",\n      \"migration\": \"Migration\",\n      \"nationality\": \"Nationality\",\n      \"population-segments\": \"Population segments\",\n      \"race-and-ethnicity\": \"Race and Ethnicity\",\n      \"religion\": \"Religion\",\n      \"transportation\": \"Transportation\",\n      \"filters\": \"Filters\"\n    },\n    \"merge\": {\n      \"title\": \"Join columns from 2nd layer\",\n      \"short-title\": \"Join columns\"\n    },\n    \"filter-by-node-column\": {\n      \"title\": \"Filter by layer\",\n      \"short-title\": \"Filter by layer\"\n    },\n    \"centroid\": {\n      \"title\": \"Centroid from geometries\",\n      \"short-title\": \"Centroid\"\n    },\n    \"group-points\": {\n      \"title\": \"Group points into polygons\",\n      \"short-title\": \"Group points\"\n    },\n    \"convex-hull\": {\n      \"title\": \"Convex Hull\",\n      \"short-title\": \"Convex Hull\"\n    },\n    \"concave-hull\": {\n      \"title\": \"Concave Hull\",\n      \"short-title\": \"Concave Hull\"\n    },\n    \"bounding-box\": {\n      \"title\": \"Bounding Box\",\n      \"short-title\": \"Bounding Box\"\n    },\n    \"bounding-circle\": {\n      \"title\": \"Bounding Circle\",\n      \"short-title\": \"Bounding Circle\"\n    },\n    \"area-of-influence\": {\n      \"title\": \"Create areas of influence\",\n      \"short-title\": \"AOI\"\n    },\n    \"filter-intersection\": {\n      \"title\": \"Filter points in polygons\",\n      \"short-title\": \"Filter points in polygons\"\n    },\n    \"aggregate-intersection\": {\n      \"title\": \"Aggregate intersection\",\n      \"short-title\": \"Aggregate intersection\"\n    },\n    \"filter\": {\n      \"title\": \"Filter by column value\",\n      \"short-title\": \"Filter\"\n    },\n    \"sampling\": {\n      \"title\": \"Subsample percent of rows\",\n      \"short-title\": \"Sampling\"\n    },\n    \"kmeans\": {\n      \"title\": \"Calculate clusters of points\",\n      \"short-title\": \"Clusters\"\n    },\n    \"moran-cluster\": {\n      \"title\": \"Detect outliers and clusters\",\n      \"short-title\": \"Outliers & clusters\"\n    },\n    \"spatial-markov-trend\": {\n      \"title\": \"Predict trends and volatility\",\n      \"short-title\": \"Trends\"\n    },\n    \"source\": \"Source\",\n    \"routing\": {\n      \"short-title\": \"Routing\"\n    }\n  },\n  \"analysis-category\": {\n    \"all\": \"All\",\n    \"analyze-predict\": \"Analyze and predict\",\n    \"create-clean\": \"Create and clean\",\n    \"data-transformation\": \"Transform\"\n  },\n  \"form-components\": {\n    \"editors\": {\n      \"radio\": {\n        \"true\": \"True\",\n        \"false\": \"False\",\n        \"null\": \"Null\"\n      },\n      \"fill\": {\n        \"customize\": \"Custom color set\",\n        \"quantification\": {\n          \"title\": \"Quantification\",\n          \"methods\": {\n            \"jenks\": \"Jenks\",\n            \"equal\": \"Equal Interval\",\n            \"headtails\": \"Heads/Tails\",\n            \"quantiles\": \"Quantiles\",\n            \"category\": \"Category\"\n          }\n        },\n        \"bins\": \"Buckets\",\n        \"input-color\": {\n          \"solid\": \"Solid\",\n          \"value\": \"By value\",\n          \"img\": \"Img\"\n        },\n        \"input-number\": {\n          \"fixed\": \"Fixed\",\n          \"value\": \"By value\"\n        },\n        \"input-ramp\": {\n          \"buckets\": \"bucket |||| buckets\"\n        },\n        \"input-categories\": {\n          \"null\": \"null\",\n          \"others\": \"Others\"\n        },\n        \"image\": {\n          \"recently-title\": \"Most used\",\n          \"none\": \"None\",\n          \"show-all\": \"Show full collections\"\n        }\n      }\n    }\n  },\n  \"data\": {\n    \"import-model\": {\n      \"error-title\": \"There was an error\",\n      \"error-starting-import\": \"Unfortunately, there was an error starting the import\"\n    },\n    \"upload-model\": {\n      \"invalid-import\": \"Invalid import\",\n      \"one-file\": \"Unfortunately, only one file is allowed per upload\",\n      \"file-defined\": \"File name should be defined\",\n      \"file-extension\": \"Unfortunately, this file extension is not allowed\",\n      \"file-size\": \"Unfortunately, the size of the file is bigger than your remaining quota\",\n      \"visualization-id\": \"The remote visualization id was not specified\",\n      \"remote-file-size\": \"Unfortunately, the size of the remote dataset is bigger than your remaining quota\",\n      \"url-invalid\": \"Unfortunately, the URL provided is not valid\",\n      \"error-happened\": \"There was an error\",\n      \"connection-error\": \"Unfortunately, there was a connection error\",\n      \"twitter-dates-invalid\": \"Twitter dates are not valid\",\n      \"twitter-dates-empty\": \"Twitter dates are empty\",\n      \"twitter-categories-invalid\": \"Twitter categories are not valid\",\n      \"twitter-data\": \"Twitter data is empty\",\n      \"dataset-copy-undefined\": \"Dataset copy is not defined\",\n      \"query-undefined\": \"Query is not provided\"\n    },\n    \"analysis-definition-node-model\": {\n      \"validation\": {\n        \"missing-required\": \"Required\",\n        \"invalid-source\": \"Invalid source\",\n        \"invalid-value\": \"Invalid value\",\n        \"invalid-enum\": \"Invalid value, must be any of %{expectedValues}\"\n      }\n    }\n  },\n  \"components\": {\n    \"geocoding\": {\n      \"geocoding-error-details\": {\n        \"close\": \"close\",\n        \"description\": \"There was a problem georeferencing your data\",\n        \"title\": \"Geocoding Error\",\n        \"try-again\": \"Please try again and if the problem persists, <a href='mailto:support@carto.com?subject=Geocoding error with id:%{id}'>contact us</a> with the following code:\",\n        \"view-dataset\": \"view dataset\"\n      },\n      \"geocoding-success-detail\": {\n        \"amount-charged\": \"<strong>$%{price}</strong> will be charged to your account\",\n        \"credits-consumed\": \"You have consumed all your credits during this billing cycle, price is $%{price} / 1,000 extra credits.\",\n        \"description\": \"We've successfully geocoded <%- realRowsFormatted %> <%- geometryType %> of <%- processableRowsFormatted %>. |||| We've successfully geocoded <%- realRowsFormatted %> <%- geometryType %>s of <%- processableRowsFormatted %>.\",\n        \"explanation\": \"Rows that are not geocoded could have errors in their column values, or dont exist in our data. Try geocoding again and check the 'override all values' to try again.\",\n        \"no-extra-charge\": \"No extra charges have been done\",\n        \"remainingQuotaFormatted\": \"You still have %{remainingQuotaFormatted} credits left for this month.\",\n        \"title\": \"Data geocoded\",\n        \"try-again\": \"Unsuccessful rows don't count against your quota, so we encourage you to take a look and try again.\",\n        \"view-dataset\": \"view dataset\"\n      },\n      \"geocoding-no-result-details\": {\n        \"close\": \"close\",\n        \"description\": \"These rows contained empty values or perhaps we just didn't know what the values meant. We encourage you to take a look and try again.\",\n        \"title\": \"No rows were georeferenced\",\n        \"view-dataset\": \"view dataset\"\n      }\n    },\n    \"background-importer\": {\n      \"background-importer-item\": {\n        \"completed\": \"completed\",\n        \"error-connecting\": \"<span class='u-errorTextColor'>Error connecting</span> %{name}\",\n        \"from\": \"from\",\n        \"show\": \"show\"\n      },\n      \"warnings-details\": {\n        \"continue-btn\": \"Continue\",\n        \"find-connected-datasets\": \"You can find all the connected datasets under the datasets section.\",\n        \"no-more-datasets\": \"No more than %{maxTablesPerImport} datasets can be imported from a single file.\",\n        \"unable-to-import-datasets\": \"Unable to import all datasets in file\"\n      },\n      \"partial-import-details\": {\n        \"find-connected-datasets\": \"You can find all the connected datasets under the datasets section.\",\n        \"continue-btn\": \"Continue\",\n        \"too-many-datasets\": \"NOTE: The file you uploaded contained too many datasets. No more than %{maxTablesPerImport} datasets can be imported from a single file.\",\n        \"unable-to-import-as-layers\": \"Unable to add all imported datasets as layers\",\n        \"upgrade-your-account\": \"<a href='https://carto.com/pricing/'>Upgrade your account</a> to add more than %{userMaxLayers} layers to your maps.\"\n      },\n      \"connector-warning-details\": {\n        \"continue-btn\": \"Continue\",\n        \"too-many-rows\": \"You may have reached the maximum limit.\",\n        \"unable-to-import-all-rows\": \"For a database connector import, the number of rows allowed is %{maxRowsPerConnectorImport}. Some of your data may not be imported.\"\n      },\n      \"error-details\": {\n        \"check-errors\": \"Check errors\",\n        \"check-url\": \"Check that the URL you provided is OK\",\n        \"close\": \"close\",\n        \"dont-panic\": \"Dont panic, here's some info that might help\",\n        \"remote-server-code\": \"The remote server returned a <span class='ErrorDetails-itemTextStrong'>%{httpResponseCode}</span> code.\",\n        \"send-us-the-error-code\": \"Persisting error? Please <a href='mailto:support@carto.com'>send us</a> the following code\",\n        \"unknown-error\": \"An unknown error has happened\"\n      },\n      \"upgrade-errors\": {\n        \"8001\": {\n          \"description\": \"Remove some of your datasets to gain available space or upgrade your account\",\n          \"info\": \"Keep your data and get a larger quota by upgrading your plan\",\n          \"title\": \"Your quota has run out\"\n        },\n        \"8005\": {\n          \"description\": \"Remove any layer or upgrade your account\",\n          \"info\": \"Keep your maps and get more layer count quota by upgrading your plan\",\n          \"title\": \"You have reached your layer count limit\"\n        },\n        \"upgrade\": \"upgrade\"\n      },\n      \"twitter-import-details\": {\n        \"new-type-created\": \"We've created a new dataset containing a total of %{datasetTotalRowsFormatted}<br/>tweet%{tweetPlural} with your search terms\",\n        \"credit-left\": \"You still have %{availableTweetsFormatted} credit left for this billing cycle.\",\n        \"credits-left\": \"You still have %{availableTweetsFormatted} credits left for this billing cycle.\",\n        \"no-more-credits\": \"You have consumed all your credits during this billing cycle (price is $%{blockPriceFormatted}/%{blockSizeFormatted} extra credits).\",\n        \"twitter-import-title\": \"Your Twitter dataset is created\",\n        \"tweet-cost\": {\n          \"free\": \"No extra charges have been applied\",\n          \"paid\": \"$%{tweetsCostFormatted} will be charged to your account\"\n        },\n        \"errors\": {\n          \"no-results\": \"Your search query was correct but returned no results, \\n please try with a different set of parameters before running it again\"\n        }\n      },\n      \"background-geocoding-item\": {\n        \"geocoded\": \"%{realRowsFormatted}/%{processableRowsFormatted} row geocoded |||| %{realRowsFormatted}/%{processableRowsFormatted} rows geocoded\",\n        \"geocoded-by-lat-lng\": \"Geocoded by latitude and longitude\",\n        \"geocoding\": \"Geocoding %{tableName} dataset\",\n        \"show\": \"show\",\n        \"rows-geocoded\": {\n          \"without-dataset\": \"%{realRowsFormatted} row geocoded |||| %{realRowsFormatted} rows geocoded\",\n          \"in-dataset\": \"%{realRowsFormatted} row geocoded in %{tableName} dataset|||| %{realRowsFormatted} rows geocoded in %{tableName} dataset\"\n        },\n        \"errors\": {\n          \"no-rows-geocoded\": {\n            \"without-dataset\": \"No rows geocoded\",\n            \"in-dataset\": \"No rows geocoded in %{tableName} dataset\"\n          },\n          \"geocoding-layer\": \"Ouch! There was an error geocoding %{tableName} layer\"\n        }\n      },\n      \"background-import-limit\": {\n        \"hurry\": \"In a hurry? <a href='%{upgradeUrl}'>Upgrade your account</a> to import several files at a time\",\n        \"one-file\": \"Unfortunately, you can only import up to %{importQuota} files at the same time\"\n      },\n      \"free-trial\": \"Get a %{days} day free trial\",\n      \"connecting\": \"Connecting\",\n      \"dataset\": \"dataset\",\n      \"geocoding\": \"Geocoding\",\n      \"working\": \"Working\"\n    },\n    \"likes-pluralize\": \"like |||| likes\",\n    \"custom-list\": {\n      \"placeholder\": \"Search by %{typeLabel}\",\n      \"no-items\": \"There are no %{typeLabel} items\",\n      \"no-results\": \"No %{typeLabel} results found with '%{query}'\",\n      \"add-custom-result\": \"Add custom value\"\n    },\n    \"datepicker\": {\n      \"dates-placeholder\": \"Choose your dates\",\n      \"get-last\": \"Get last\",\n      \"hour\": \"hour\",\n      \"min\": \"min\",\n      \"from\": \"from\",\n      \"to\": \"to\",\n      \"or\": \"or\",\n      \"days-pluralize\": \"1 day |||| %{smart_count} days\",\n      \"weeks-pluralize\": \"1 week |||| %{smart_count} weeks\",\n      \"hours-pluralize\": \"hour week |||| %{smart_count} hours\",\n      \"gmt-convertion\": \"Date will be converted to GMT +0\",\n      \"invalid-date\": \"Invalid date\"\n    },\n    \"taglist\": {\n      \"none\": \"No tags\",\n      \"placeholder\": \"Add tags\"\n    },\n    \"pagination-search\": {\n      \"filter\": {\n        \"search\": \"Search\",\n        \"placeholder\": \"Search by username or email\"\n      },\n      \"loading\": {\n        \"title\": \"Loading...\"\n      },\n      \"error\": {\n        \"title\": \"Error\",\n        \"desc\": \"Oops there was an error.\"\n      },\n      \"no-results\": {\n        \"title\": \"Oh! No results\",\n        \"desc\": \"Unfortunately we could not find anything with these parameters\"\n      }\n    },\n    \"modals\": {\n      \"editor-vis-warning\": {\n        \"title\": \"You are about to open an Editor map with the new Builder\",\n        \"explanation\": \"Builder offers an easy-to-use and intuitive drag and drop functionality to analyze and visualize your data. However, some of the old Editor features, such as overlays, are not currently available in Builder.\",\n        \"question\": \"Opening your map in Builder may cause the loss of any feature not supported yet. Are you sure you want to continue?\",\n        \"go-back\": \"No, go back to dashboard\",\n        \"open\": \"Yes, open with Builder\",\n        \"duplicate\": \"duplicate and open with Builder\",\n        \"opening-title\": \"Opening %{name} with Builder\"\n      },\n      \"add-basemap\": {\n        \"modal-title\": \"Add a custom basemap\",\n        \"modal-desc\": \"Select from these great resources\",\n        \"adding-basemap\": \"Adding new basemap\",\n        \"add-basemap-error\": \"Could not add basemap\",\n        \"add-btn\": \"Add basemap\",\n        \"cancel-btn\": \"Cancel\",\n        \"validating\": \"Validating\",\n        \"saving\": \"Saving layer\",\n        \"fetching\": \"Fetching layers\",\n        \"get-layers\": \"Get layers\",\n        \"xyz\": {\n          \"insert\": \"Insert your XYZ URL\",\n          \"enter\": \"Enter a URL\",\n          \"not-valid\": \"Insert a valid XYZ URL\",\n          \"eg\": \"E.g.\",\n          \"tms\": \"TMS\",\n          \"couldnt-validate\": \"We couldn't validate this. If you're sure it contains data click \\\"add basemap\\\"\"\n        },\n        \"mapbox\": {\n          \"insert\": \"Insert your Mapbox URL\",\n          \"enter\": \"Enter your map ID/URL\",\n          \"enter-token\": \"Enter your access token\",\n          \"error\": \"Error retrieving your basemap. Please check your access token.\",\n          \"invalid\": \"This URL is not valid.\"\n        },\n        \"wms\": {\n          \"insert\": \"Insert your WMS/WMTS URL\",\n          \"invalid\": \"The URL is either invalid or contains unsupported projections\",\n          \"see-docs\": \"see docs\",\n          \"oh-no\": \"Oh! No results\",\n          \"unfortunately\": \"Unfortunately, we couldn't find a layer that matched your search term\",\n          \"tables-pluralize\": \"table |||| tables\",\n          \"placeholder\": \"%{layersFoundCount} %{layersFoundCountPluralize} found, %{layersAvailableCount} %{layersAvailableCountPluralize} available\"\n        },\n        \"tilejson\": {\n          \"insert\": \"Insert your TileJSON URL\",\n          \"invalid\": \"Invalid URL, please make sure it is correct\"\n        },\n        \"nasa\": {\n          \"select\": \"Select a date from which you want a NASA Worldview basemap\",\n          \"day\": \"Day\",\n          \"night\": \"Night\",\n          \"cant-select\": \"You can't select a date in night mode\"\n        }\n      },\n      \"export-data\": {\n        \"title\": \"Export data\",\n        \"desc\": \"Select the preferred file format\",\n        \"no-geometry\": \"To download any geospatial format like SHP, KML or GeoJSON don't forget to select the_geom on your query.\",\n        \"loading\": {\n          \"geometry\": \"Checking geometries...\",\n          \"preparing\": \"Preparing content...\"\n        },\n        \"errors\": {\n          \"title\": \"There was an error\",\n          \"geometry-error\": \"We can't read data geometries\",\n          \"unknown\": \"An error occurred\"\n        },\n        \"cancel\": \"Cancel\",\n        \"download\": \"Download\"\n      },\n      \"maps-metadata\": {\n        \"modal-title\": \"Map metadata\",\n        \"modal-desc\": \"Edit the attributes of your map\",\n        \"back-btn\": \"GO BACK\",\n        \"save-btn\": \"Save\",\n        \"cancel-btn\": \"Cancel\",\n        \"form\": {\n          \"name\": \"Map Name\",\n          \"name-placeholder\": \"Type your name here\",\n          \"description\": \"Description\",\n          \"description-placeholder\": \"Type your description here\",\n          \"tags\": \"Tags\",\n          \"markdown\": \"Markdown supported\"\n        },\n        \"validation\": {\n          \"error\": {\n            \"name\": \"Name can't be blank\"\n          }\n        },\n        \"error\": {\n          \"title\": \"We couldn't save your data\",\n          \"subtitle\": \"We had an error trying to save your data: <span class='CDB-Text is-semibold'>%{error}</span>\"\n        },\n        \"loading\": \"Saving your data...\",\n        \"success\": \"<span class='CDB-Text is-semibold'>Metadata</span> for %{name} map <span class='CDB-Text is-semibold'>was saved</span>.\"\n      },\n      \"dataset-metadata\": {\n        \"modal-title\": \"Dataset metadata\",\n        \"modal-desc\": \"Edit the attributes of your dataset\",\n        \"back-btn\": \"GO BACK\",\n        \"save-btn\": \"Save\",\n        \"cancel-btn\": \"Cancel\",\n        \"form\": {\n          \"name\": \"Dataset Name\",\n          \"name-placeholder\": \"Type your name here\",\n          \"description\": \"Description\",\n          \"description-placeholder\": \"Type your description here\",\n          \"attributions\": \"Attributions\",\n          \"attributions-placeholder\": \"Type your attributions here\",\n          \"tags\": \"Tags\",\n          \"source\": \"Source\",\n          \"source-placeholder\": \"Enter the source of the data\",\n          \"license\": \"License\",\n          \"markdown\": \"Markdown supported\"\n        },\n        \"validation\": {\n          \"error\": {\n            \"name\": \"Name can't be blank\"\n          }\n        },\n        \"error\": {\n          \"title\": \"We couldn't save your data\",\n          \"subtitle\": \"We had an error trying to save your data: <span class='CDB-Text is-semibold'>%{error}</span>\"\n        },\n        \"loading\": \"Saving your data...\",\n        \"success\": \"<span class='CDB-Text is-semibold'>Metadata</span> for %{name} dataset <span class='CDB-Text is-semibold'>was saved</span>.\"\n      },\n      \"publish\": {\n        \"done-btn\": \"Done\",\n        \"update-btn\": \"Update\",\n        \"publish-btn\": \"Publish\",\n        \"publishing-btn\": \"Publishing\",\n        \"updating-btn\": \"Updating\",\n        \"menu\": {\n          \"share\": \"Share with colleagues\",\n          \"publish\": \"publish\"\n        },\n        \"privacy\": {\n          \"privacy\": \"privacy\",\n          \"cta\": {\n            \"title\": \"Want some privacy?\",\n            \"desc-trial\": \"Check our plans with 14 days trial\",\n            \"desc-notrial\": \"Upgrade your account!\"\n          },\n          \"public\": {\n            \"type\": \"PUBLIC\",\n            \"title\": \"Public\",\n            \"body\": \"Everyone can view your table and download it\"\n          },\n          \"link\": {\n            \"type\": \"LINK\",\n            \"title\": \"Only accessible with link\",\n            \"body\": \"Only the people with a shared link can view the data\"\n          },\n          \"password\": {\n            \"type\": \"PASSWORD\",\n            \"title\": \"Password\",\n            \"body\": \"Set a password and share only with specific people\",\n            \"placeholder\": \"Type your password\"\n          },\n          \"private\": {\n            \"type\": \"PRIVATE\",\n            \"title\": \"Private\",\n            \"body\": \"Nobody can access this dataset\"\n          },\n          \"error\": {\n            \"title\": \"We couldn't save your data\",\n            \"subtitle\": \"We had an internal error trying to save your data. We recommend you try again.\"\n          },\n          \"upgrade\": {\n            \"title\": \"Interested in sharing within your organization?\",\n            \"desc\": \"%{contact} to try one of our Enterprise plans\",\n            \"contact\": \"Contact us\",\n            \"mail\": \"sales@carto.com\"\n          },\n          \"loading\": \"Saving your data...\"\n        },\n        \"share\": {\n          \"published\": \"Published %{when}\",\n          \"unpublished\": \"Never published.\",\n          \"last-published\": \"Last updated %{date}\",\n          \"unpublished-header\": \"Click on Publish to start sharing your map on the web\",\n          \"unpublished-subheader\": \"From the moment you click on publish, you will need to use this window to update your changes on the public version.\",\n          \"upgradeLabel\": \"Upgrade\",\n          \"upgradeLink\": \"https://carto.com/pricing/#pricing-standard\",\n          \"upgrade\": \"%{upgradeLink} to share with your colleagues?\",\n          \"private\": \"PRIVATE\",\n          \"get-link\": {\n            \"title\": \"Get the link\",\n            \"body\": \"Send to your friends, coworkers, or post it in your social networks.\",\n            \"link\": \"\",\n            \"copy\": \"COPY\",\n            \"select\": \"SELECT\",\n            \"private\": {\n              \"body\": \"Your map is %{private} Change privacy to get the link\"\n            }\n          },\n          \"embed\": {\n            \"title\": \"Embed it\",\n            \"body\": \"Insert your map into your blog, website, or simple application.\",\n            \"link\": \"Get a simple URL.\",\n            \"copy\": \"COPY\",\n            \"select\": \"SELECT\",\n            \"private\": {\n              \"body\": \"Your map is %{private} Change privacy to embed map\"\n            }\n          },\n          \"cartodbjs\": {\n            \"title\": \"CARTO.js\",\n            \"body\": \"Add your map to your applications using this URL.\",\n            \"link\": \"Read more.\",\n            \"copy\": \"COPY\",\n            \"select\": \"SELECT\"\n          },\n          \"mobile-sdk\": {\n            \"title\": \"CARTO Mobile SDK\",\n            \"body\": \"Add your map to your native mobile applications using this line of code.\",\n            \"link\": \"Read more.\",\n            \"copy\": \"COPY\",\n            \"select\": \"SELECT\"\n          },\n          \"error\": {\n            \"title\": \"We couldn't save your data\",\n            \"subtitle\": \"We had an internal error trying to save your data. We recommend you try again.\"\n          },\n          \"loading\": \"Saving your data...\",\n          \"organization\": {\n            \"title\": \"Default settings for your Organization\",\n            \"desc\": \"New users will have this permission\"\n          },\n          \"role\": {\n            \"viewer\": \"Viewer\",\n            \"builder\": \"Builder\"\n          },\n          \"tooltip\": {\n            \"group\": \"Access is inherited from group %{name}\",\n            \"org\": \"Access is inherited from organization\"\n          },\n          \"toggle\": {\n            \"read\": \"Read\",\n            \"write\": \"Write\"\n          },\n          \"add-people\": \"Add people\"\n        }\n      },\n      \"assets-picker\": {\n        \"browse\": \"Browse\",\n        \"delete-image\": \"Delete image\",\n        \"delete-images\": \"Delete images\",\n        \"deselect-all\": \"Deselect all\",\n        \"drag-and-drop\": \"Drag & drop your file\",\n        \"error-desc\": \"Please, go back and try again. If the problem persists contact us at <a href='mailto:support@carto.com'>support@carto.com</a>\",\n        \"go-back\": \"Go back\",\n        \"incorrect-url\": \"Error. Your URL doesnt look correct.\",\n        \"loading\": \"Loading\",\n        \"or\": \"or\",\n        \"select-all\": \"Select all\",\n        \"submit\": \"submit\",\n        \"upload-desc\": \"Paste a URL or select a file like JPG, GIF, PNG, SVG\",\n        \"upload-file-url\": \"Upload a file or a URL\"\n      },\n      \"add-asset\": {\n        \"icons\": \"Icons\",\n        \"modal-desc\": \"or just use our nice selection\",\n        \"modal-title\": \"Select marker image\",\n        \"set-image\": \"Set image\",\n        \"upload-file\": \"Upload file\",\n        \"upload-asset\": \"Upload asset\",\n        \"upload-image\": \"Upload your image\",\n        \"your-uploads\": \"Your uploads\",\n        \"organization-uploads\": \"Organization uploads\"\n      },\n      \"add-analysis\": {\n        \"modal-title\": \"Add a new analysis\",\n        \"modal-desc\": \"Select the analysis you want to add\",\n        \"loading-title\": \"Loading options\",\n        \"add-btn\": \"Add analysis\",\n        \"disabled-option-desc\": \"Your layer's geometries are %{simpleGeometryType} and this analysis needs %{requiredInputGeometries}\",\n        \"unknown-geometry-type\": \"unknown\",\n        \"info-analysis\": \"Info about analysis\",\n        \"option-types\": {\n          \"connect-with-lines\": {\n            \"title\": \"Connect with lines\",\n            \"desc\": \"Create lines from point datasets using a variety of methods\"\n          },\n          \"group-points\": {\n            \"title\": \"Group points into polygons\",\n            \"desc\": \"Aggregate points into polygons such as convex hulls or bounding boxes.\"\n          },\n          \"aggregate-intersection\": {\n            \"title\": \"Intersect second layer\",\n            \"desc\": \"Intersect with a second layer and calculate aggregations on the fly.\"\n          },\n          \"area-of-influence\": {\n            \"title\": \"Create areas of influence\",\n            \"desc\": \"Use travel time (e.g. walking or driving) or distance to calculate areas of influence from points.\"\n          },\n          \"georeference\": {\n            \"title\": \"Georeference\",\n            \"desc\": \"Use street addresses, city names, or other location text to generate point geometries.\"\n          },\n          \"filter-intersection\": {\n            \"title\": \"Filter points in polygons\",\n            \"desc\": \"Filter points intersecting your polygons layer, and augment those with your polygons columns.\"\n          },\n          \"filter\": {\n            \"title\": \"Filter by column value\",\n            \"desc\": \"Keep or discard rows according to a custom criteria.\"\n          },\n          \"merge\": {\n            \"title\": \"Join columns from 2nd layer\",\n            \"desc\": \"Join columns from a second layer by linking a shared value found in both datasets.\"\n          },\n          \"moran-cluster\": {\n            \"title\": \"Detect outliers and clusters\",\n            \"desc\": \"Use Moran's I to find high (HL) and low (LH) outliers and high (HH) and low (LL) clusters.\",\n            \"high-low\": \"High-Low (HL)\",\n            \"high-high\": \"High-High (HH)\",\n            \"low-high\": \"Low-High (LH)\",\n            \"low-low\": \"Low-Low (LL)\"\n          },\n          \"kmeans\": {\n            \"title\": \"Calculate clusters of points\",\n            \"desc\": \"Spatially separate a layer of points into a specified number (N) of groups.\"\n          },\n          \"centroid\": {\n            \"title\": \"Find centroid of geometries\",\n            \"desc\": \"Calculate a direct or weighted centroid based on all rows of a layer or by categories.\"\n          },\n          \"filter-by-node-column\": {\n            \"title\": \"Filter by layer\",\n            \"desc\": \"Filter your layer depending on a second layer such that widgets will effect both.\"\n          },\n          \"sampling\": {\n            \"title\": \"Subsample percent of rows\",\n            \"desc\": \"Subsample the rows in a dataset based on a specified percent.\"\n          },\n          \"spatial-markov-trend\": {\n            \"title\": \"Predict trends and volatility\",\n            \"desc\": \"Predict probability of upward and downward trends using spatial Markov chains.\"\n          },\n          \"data-observatory-measure\": {\n            \"title\": \"Enrich from Data Observatory\",\n            \"desc\": \"Add a new column with contextual demographic and economic measures.\"\n          },\n          \"deprecated-sql-function\": {\n            \"title\": \"SQL Function\",\n            \"desc\": \"Run your custom SQL function\"\n          }\n        }\n      },\n      \"add-widgets\": {\n        \"modal-title\": \"Add new widgets\",\n        \"modal-desc\": \"Select the widgets you want to add\",\n        \"continue-btn\": \"Continue\",\n        \"loading-title\": \"Loading columns\",\n        \"tab-pane\": {\n          \"histogram-label\": \"Histogram\",\n          \"category-label\": \"Category\",\n          \"formula-label\": \"Formula\",\n          \"time-series-label\": \"Time-series\"\n        },\n        \"percentage-in-top-cats\": \"% in top 10 cat\",\n        \"time-series-no-option-title\": \"None\",\n        \"time-series-no-option-desc\": \"This option won't show your time-series widget\"\n      },\n      \"add-layer\": {\n        \"modal-title\": \"Add a new layer\",\n        \"modal-desc\": \"Select an existing dataset or connect a new one\",\n        \"navigation\": {\n          \"search\": \"Search\",\n          \"search-placeholder\": \"by name, description, or :tag\",\n          \"connect-dataset\": \"Connect dataset\",\n          \"shared-with-you\": \"Shared with you\",\n          \"data-library\": \"Data library\",\n          \"create-empty-map\": \"Create empty map\",\n          \"create-empty-dataset\": \"Create empty dataset\",\n          \"create-empty-addLayer\": \"Add an empty layer\",\n          \"dataset-pluralize\": \"Dataset |||| Datasets\"\n        },\n        \"create-loading-title\": \"Creating an empty dataset\",\n        \"adding-new-layer\": \"Adding new layer\",\n        \"add-layer-error\": \"Could not add layer\",\n        \"imports\": {\n          \"ask-for-demo\": \"ask for demo\",\n          \"connector\": \"connector\",\n          \"demo-email-title\": \"I am interested in the %{name} connector\",\n          \"demo-email-desc\": \"Hi, I am interested in testing the %{name} connector. Please contact me to schedule a demo of this feature.\",\n          \"tab-options-error\": {\n            \"no-key\": \"%{name} key is not specified and the panel can't be enabled\",\n            \"not-allowed\": \"%{name} data source is not available for your plan. Please upgrade.\",\n            \"limits-reached\": \"You've reached the limits for your account. Please upgrade.\",\n            \"no-credits\": \"You've reached the available %{name} credits for your account this month.\"\n          },\n          \"member-pluralize\": \"member |||| members\",\n          \"item-pluralize\": \"item |||| items\",\n          \"form-import\": {\n            \"browse\": \"Browse\",\n            \"drag-and-drop\": \"Drag & drop your file\",\n            \"error-desc\": \"Error. Your URL doesnt look correct.\",\n            \"format\": \"Format\",\n            \"or\": \"or\",\n            \"title\": \"Enter a URL\",\n            \"desc\": \"Paste a URL and start the import\",\n            \"submit\": \"submit\"\n          },\n          \"header-import\": {\n            \"import-url\": \"Import your data from a %{brand} URL\",\n            \"file-selected\": \"File selected\",\n            \"paste-url\": \"Paste a URL %{fileEnabled} \",\n            \"select-a-file\": \"or select a file like CSV, XLS, ZIP, KML, GPX,\",\n            \"see-all-formats\": \"see all formats\",\n            \"sync-enabled\": \"Keep it synchronized with the source\",\n            \"sync-disabled\": \"Sync options are not available\",\n            \"type-selected\": \"%{brand} selected\",\n            \"type-import\": \"%{brand} import\",\n            \"upload-file-url\": \"Upload a file or a URL |||| Upload a URL\"\n          },\n          \"service-import\": {\n            \"and\": \"and\",\n            \"account-connected\": \"Account connected\",\n            \"connect-with\": \"Connect with %{title}\",\n            \"choose\": \"Choose\",\n            \"connect\": \"Connect\",\n            \"found-in\": \"%{size} %{pluralize} found in %{title}\",\n            \"item-selected\": \"Item selected\",\n            \"many-more-formats\": \"many more formats\",\n            \"no-results-title\": \"Oouch! There are no results\",\n            \"no-results-desc\": \"We haven't found any valid file from your account\",\n            \"state-idle-login\": \"Login to your account and select any item.\",\n            \"state-error\": \"We are sorry that you cant connect to your %{title} account. Be sure you have any pop-up blockers deactivated for this website.\",\n            \"state-token\": \"Checking Token.\",\n            \"state-oauth\": \"Requesting oAuth.\",\n            \"state-retrieving\": \"A list of your %{title} files will be displayed in a moment.\",\n            \"state-selected-sync\": \"You can choose when to sync the file.\",\n            \"state-selected-instagram\": \"A map containing all your georeferenced photos will be created\",\n            \"state-selected-no-sync\": \"Sync options are not available.\",\n            \"supported\": \"supported\",\n            \"try-again\": \"Try again\"\n          },\n          \"selected-state\": {\n            \"sync-my-data\": \"Sync my data\",\n            \"never\": \"Never\",\n            \"every-hour\": \"Every hour\",\n            \"every-day\": \"Every day\",\n            \"every-week\": \"Every week\",\n            \"every-month\": \"Every month\",\n            \"free-trial\": \"%{days} day free trial\",\n            \"more-features\": \"more features\",\n            \"upgrade-desc\": \"Upgrade your account to get sync options and %{features}\",\n            \"upgrade\": \"upgrade\"\n          },\n          \"twitter\": {\n            \"category\": \"Category\",\n            \"credits-consumed\": \"Twitter credits for this period consumed - %{extraTweets} will be charged\",\n            \"credits-left\": \"%{per}% of your %{remainingFormatted} Twitter credits left\",\n            \"credits-no-limit\": \"No limits - %{extraTweets} will be charged\",\n            \"extra-tweets\": \"extra tweets\",\n            \"fallback-title\": \"Enable the %{brand} connector\",\n            \"fallback-desc\": \"The %{brand} connector allows you to map %{brand} data activity related to your brand, event, or any term you may be interested in.\",\n            \"from-to\": \"From / to\",\n            \"terms-desc\": \"Enter up to four search terms using the category fields.\",\n            \"terms-placeholder\": \"Insert your terms separated by commas\",\n            \"title\": \"Twitter trends\",\n            \"twitter-gmt\": \"Time is in GMT+0\",\n            \"use\": \"Use\",\n            \"your-gmt\": \"You are in GMT\"\n          },\n          \"arcgis\": {\n            \"fallback-desc\": \"Enable the %{brand} connector in your account to connect your %{brand} data to CARTO and mantain it in sync with the source.\",\n            \"input-placeholder\": \"Paste your %{brand} table URL here\",\n            \"url-desc\": \"To retrieve a particular layer, add the layer index at the end of the URL\",\n            \"import-data\": \"Import your data from a %{brand} instance\",\n            \"sync-options\": \"Sync options only available for a layer\"\n          },\n          \"instagram\": {\n            \"fallback-desc\": \"Enable the %{brand} connector to map your photos or videos from your account in CARTO.\"\n          },\n          \"box\": {\n            \"fallback-desc\": \"Enable the %{brand} connector in your account to map your %{brand} files in CARTO or mantain your CARTO maps in sync with your Box data.\"\n          },\n          \"mailchimp\": {\n            \"campaign-selected\": \"%{brand} campaign selected\",\n            \"fallback-desc\": \"Enable the %{brand} connector in your account to map your user lists from %{brand} in CARTO or mantain your CARTO maps in sync with your %{brand} data.\",\n            \"map-campaign\": \"Map your %{brand} campaigns\",\n            \"state-idle\": \"Connect your %{brand} account to select any of your campaigns.\",\n            \"state-error\": \"We are sorry, there has been an error while connecting to your %{brand} account. Just in case it helps, be sure you have the pop-up blocker deactivated for this website.\",\n            \"state-token\": \"Checking %{brand} token.\",\n            \"state-oauth\": \"Requesting oAuth.\",\n            \"state-retrieving\": \"A list of your %{brand} campaigns will be displayed in a moment.\",\n            \"state-selected\": \"Campaign selected.\"\n          },\n          \"salesforce\": {\n            \"fallback-desc\": \"Enable the %{brand} connector in your account to map your user lists from %{brand} in CARTO or mantain your CARTO maps in sync with your %{brand} data.\",\n            \"input-placeholder\": \"Paste your %{brand} URL here\"\n          }\n        },\n        \"datasets\": {\n          \"item\": {\n            \"sync-failed\": \"Sync failed, the last attempt was\",\n            \"syncing\": \"Syncing\",\n            \"synced\": \"Synced\",\n            \"read\": \"read\",\n            \"from\": \"from\",\n            \"by\": \"by\",\n            \"no-description\": \"No description\",\n            \"rows-pluralize\": \"row |||| rows\",\n            \"tags-more\": \"and %{tagsCount} more\",\n            \"no-tags\": \"No tags\"\n          },\n          \"loading\": \"Loading\",\n          \"searching\": \"Searching\",\n          \"error\": {\n            \"title\": \"Ouch! There has been an error loading your datasets\",\n            \"desc\": \"If the problem persists contact us at\"\n          },\n          \"no-datasets\": {\n            \"title\": \"You have not connected any datasets yet\",\n            \"desc\": \"You can %{connectDataset} or %{search} in all our data library\",\n            \"connect-datasets\": \"connect datasets\",\n            \"search\": \"search\"\n          },\n          \"no-results\": {\n            \"desc\": \"There are no results in this page\",\n            \"found\": \"found\",\n            \"there-are-no\": \"There are no\",\n            \"no-fun\": \"No %{type}, no fun\"\n          }\n        },\n        \"footer\": {\n          \"guessing-desc\": \"Let CARTO automatically guess data types and content on import.\",\n          \"twitter-desc\": \"To get access to historical data (older than 30 days) you need to\",\n          \"contact-team\": \"contact our team\",\n          \"privacy-upgrade\": \"You cannot change the privacy of your new datasets. Click here to upgrade your account.\",\n          \"privacy-change\": \"Your new dataset will be %{privacy}\",\n          \"privacy-click\": \"Click to change it to %{nextPrivacy}\",\n          \"privacy-change-banned\": \"You cannot change the privacy of your new datasets.\",\n          \"add-layer\": \"Add layer\"\n        }\n      },\n      \"edit-feature\": {\n        \"confirmation\": {\n          \"title\": \"This geometry is too big to edit from the web\",\n          \"desc\": \"Editing this geometry could freeze or crash your browser, and you could lose your work. We encourage you to edit this feature through the API.\",\n          \"cancel\": \"Cancel\",\n          \"continue\": \"Ok, continue\"\n        },\n        \"delete\": {\n          \"title\": \"You are about to delete a feature\",\n          \"desc\": \"Are you sure you want to delete it?\",\n          \"cancel\": \"Cancel\",\n          \"confirm\": \"Ok, delete it\"\n        }\n      }\n    },\n    \"error\": {\n      \"default-title\": \"Oops, there was a problem\",\n      \"default-desc\": \"Reload the page again. If the problem persists contact us at <a href='mailto:support@carto.com'>support@carto.com</a>\"\n    },\n    \"backbone-forms\": {\n      \"select\": {\n        \"placeholder\": \"Select a %{keyAttr}\",\n        \"loading\": \"loading\",\n        \"empty\": \"No values\",\n        \"selected\": \"%{count} selected\"\n      },\n      \"operators\": {\n        \"count-message\": \"If you select 'COUNT' all columns are selected\"\n      },\n      \"interval-error\": \"Value must be between %{minValue} and %{maxValue}\",\n      \"copy-button\": \"COPY\",\n      \"data-observatory\": {\n        \"dropdown\": {\n          \"measurement\": {\n            \"search\": \"Search...\",\n            \"type\": \"measurements\"\n          },\n          \"filter\": {\n            \"header\": \"Filter measurements by\",\n            \"type\": \"filters\"\n          }\n        }\n      }\n    },\n    \"codemirror\": {\n      \"no-errors\": \"No errors\",\n      \"docs\": \"DOCS\",\n      \"syntax-error\": \"Syntax error\",\n      \"line\": \"Line\"\n    },\n    \"undo-redo\": {\n      \"clear\": \"CLEAR\",\n      \"apply\": \"APPLY\"\n    },\n    \"table\": {\n      \"columns\": {\n        \"change-type\": {\n          \"confirm\": \"ok, change it\",\n          \"cancel\": \"Cancel\",\n          \"desc\": \"Maps using this column will be affected and unconvertible data will be lost. Are you sure?\",\n          \"error\": \"There was an error changing %{columnName} column: %{error}\",\n          \"loading\": \"Changing %{columnName} column...\",\n          \"title\": \"%{columnName} column will change to %{newType}\",\n          \"success\": \"Column %{columnName} changed to %{newType}\"\n        },\n        \"create\": {\n          \"loading\": \"Adding new column...\",\n          \"error\": \"Error adding new column: %{error}\",\n          \"success\": \"%{columnName} column added\"\n        },\n        \"destroy\": {\n          \"cancel\": \"Cancel\",\n          \"confirm\": \"Ok, delete it\",\n          \"desc\": \"Maps using this column will be affected, are you sure you want to delete it?\",\n          \"error\": \"Error deleting %{columnName} column: %{error}\",\n          \"loading\": \"Removing your column %{columnName}...\",\n          \"success\": \"%{columnName} column deleted\",\n          \"title\": \"You are about to delete %{columnName} column \"\n        },\n        \"rename\": {\n          \"cancel\": \"Cancel\",\n          \"confirm\": \"ok, rename it\",\n          \"desc\": \"Maps using this column will be affected, are you sure you want to rename it?\",\n          \"error\": \"Error renaming column %{columnName} to %{newName}: %{error}\",\n          \"loading\": \"Renaming your column %{columnName} to %{newName}...\",\n          \"success\": \"Column %{columnName} renamed to %{newName}\",\n          \"title\": \"You are about to rename column %{columnName} to %{newName}\"\n        },\n        \"options\": {\n          \"order\": \"Order\",\n          \"rename\": \"Rename column\",\n          \"change\": \"Change data type\",\n          \"create\": \"Add new column\",\n          \"delete\": \"Delete this column...\"\n        },\n        \"types\": {\n          \"boolean\": \"Boolean\",\n          \"date\": \"Date\",\n          \"number\": \"Number\",\n          \"string\": \"String\"\n        }\n      },\n      \"rows\": {\n        \"loading\": {\n          \"title\": \"Loading rows...\"\n        },\n        \"error\": {\n          \"title\": \"There was an error...\",\n          \"desc\": \"It was not possible to obtain any results, check the query applied\"\n        },\n        \"result\": {\n          \"no-page-title\": \"Ouch! Sorry\",\n          \"no-page-desc\": \"This page %{page} doesn't contain any results...\",\n          \"no-results-title\": \"There is no data\",\n          \"no-results-desc\": \"\",\n          \"no-results-button\": \"\"\n        },\n        \"options\": {\n          \"copy\": \"Copy cell value\",\n          \"create\": \"Add new row\",\n          \"edit\": \"Edit this cell\",\n          \"delete\": \"Delete this row...\"\n        },\n        \"create\": {\n          \"loading\": \"Adding new row...\",\n          \"error\": \"Error adding new row: %{error}\",\n          \"success\": \"New row added\"\n        },\n        \"edit\": {\n          \"loading\": \"Editing %{attribute} with cartodb_id %{cartodbId}...\",\n          \"error\": \"Error editing %{attribute} with cartodb_id %{cartodbId}: %{error}\",\n          \"success\": \"Edited %{attribute} with cartodb_id %{cartodbId}\"\n        },\n        \"destroy\": {\n          \"cancel\": \"Cancel\",\n          \"confirm\": \"ok, delete\",\n          \"desc\": \"Are you sure you want to delete it?\",\n          \"error\": \"Error deleting row with cartodb_id %{cartodb_id}: %{error}\",\n          \"loading\": \"Removing your row with cartodb_id %{cartodb_id}...\",\n          \"success\": \"Row with cartodb_id %{cartodb_id} deleted\",\n          \"title\": \"You are about to delete row with cartodb_id %{cartodb_id}\"\n        },\n        \"paginator\": {\n          \"error\": \"There was an error with pagination: %{error}\",\n          \"to\": \"to\"\n        }\n      }\n    }\n  },\n  \"dataset\": {\n    \"sql\": \"SQL\",\n    \"data\": \"Metadata\",\n    \"updated\": \"Updated %{ago}\",\n    \"read\": \"Read\",\n    \"options\": {\n      \"add-row\": \"Add row\",\n      \"add-column\": \"Add column\",\n      \"export\": \"Export\"\n    },\n    \"preview-map\": {\n      \"preview\": \"preview\",\n      \"back\": \"back\"\n    },\n    \"create-map\": {\n      \"title\": \"Create map\",\n      \"loading\": \"Creating a map from %{tableName}\",\n      \"error\": \"There was an error creating the map\"\n    },\n    \"delete\": {\n      \"option\": \"Delete dataset...\",\n      \"cancel\": \"Cancel\",\n      \"confirm\": \"Ok, delete it\",\n      \"desc\": \"The deleted dataset cannot be recovered, be sure before proceeding. We recommend you to export your dataset before deleting it.\",\n      \"error\": \"Error deleting %{tableName}: %{error}\",\n      \"loading\": \"Deleting your dataset %{tableName}...\",\n      \"title\": \"You are about to delete the %{tableName} dataset\",\n      \"affected-vis-count\": \"%{smart_count} map affected |||| %{smart_count} maps affected\",\n      \"affected-vis-count-extended\": \"%{affectedVisCount} maps affected, some of them are\",\n      \"affected-entities-count\": \"%{smart_count} user will lose access |||| %{smart_count} users will lose access\",\n      \"affected-entities-count-extended\": \"%{affectedEntitiesCount} users will lose access, some of them are\",\n      \"whole-organization-affected\": \"All users from your organization will be affected\"\n    },\n    \"metadata\": {\n      \"option\": \"Edit metadata\",\n      \"error\": \"There was an error edititng metadata of your dataset %{name}\",\n      \"loading\": \"Editing metadata of your dataset %{name}...\"\n    },\n    \"duplicate\": {\n      \"option\": \"Duplicate dataset\",\n      \"query\": \"applied query\",\n      \"customOption\": \"Create Dataset from query\",\n      \"error\": \"There was an error duplicating %{name}\",\n      \"loading\": \"Duplicating your dataset %{name}...\"\n    },\n    \"lock\": {\n      \"option\": \"Lock dataset\",\n      \"error\": \"There was an error locking %{tableName}\",\n      \"loading\": \"Locking your dataset %{tableName}...\"\n    },\n    \"rename\": {\n      \"option\": \"Rename dataset\",\n      \"cancel\": \"Cancel\",\n      \"confirm\": \"ok, rename it\",\n      \"desc\": \"If you are accessing this dataset via API, don't forget to use the new name in your API calls afterwards.\",\n      \"error\": \"Error renaming %{tableName}: %{error}\",\n      \"loading\": \"Renaming your dataset %{tableName}...\",\n      \"success\": \"Dataset %{tableName} renamed\",\n      \"title\": \"Renaming %{tableName} will affect your API calls, maps, analyses, ...\"\n    },\n    \"sync\": {\n      \"in-a-moment\": \"in a few moments\",\n      \"synced\": \"Synced %{ranAt}\",\n      \"syncing\": \"Syncing\",\n      \"loading\": \"Syncing dataset %{tableName}\",\n      \"sync-failed\": \"Sync failed\",\n      \"next\": \"Next will be %{runAt}\",\n      \"error-code\": \"Error code %{errorCode}\",\n      \"sync-now\": \"Sync now\",\n      \"view-options\": \"View options\",\n      \"disabled\": \"You will be able to sync manually %{gap} minutes after your last synchronization\",\n      \"title\": \"Sync dataset options\",\n      \"desc\": \"Your dataset is in sync with a %{service} file: <br/>%{url}\",\n      \"label\": \"Sync my data\",\n      \"error\": \"There was an error setting the interval\",\n      \"confirm\": \"Save\",\n      \"cancel\": \"Cancel\"\n    },\n    \"unlock\": {\n      \"cancel\": \"back to dashboard\",\n      \"confirm\": \"ok, unlock it\",\n      \"desc\": \"That means you need to unlock it before doing anything. Are you sure?\",\n      \"error\": \"Error unlocking %{tableName}: %{error}\",\n      \"loading\": \"Unlocking your dataset %{tableName}...\",\n      \"success\": \"Dataset %{tableName} unlocked\",\n      \"title\": \"Your dataset %{tableName} is locked.\"\n    }\n  },\n  \"editor\": {\n    \"map\": \"map\",\n    \"map_name\": \"%{name} map\",\n    \"published\": \"Published %{when}\",\n    \"unpublished\": \"Map not published yet\",\n    \"map_pluralize\": \"%{smart_count} map |||| %{smart_count} maps\",\n    \"button_add\": \"Add\",\n    \"button_share\": \"SHARE\",\n    \"unpublished-changes\": \"Unpublished changes\",\n    \"error-query\": {\n      \"body\": \"Errors found in your SQL query. %{action} before continuing.\",\n      \"label\": \"Fix them\"\n    },\n    \"settings\": {\n      \"menu-tab-pane-labels\": {\n        \"preview\": \"Preview\",\n        \"snapshots\": \"Snapshots\"\n      },\n      \"preview\": {\n        \"mode\": {\n          \"title\": \"Mode\"\n        },\n        \"options\": {\n          \"title\": \"Map Options\",\n          \"subtitle\": \"Components that are shown in the map\",\n          \"description\": {\n            \"title\": \"Components\",\n            \"subtitle\": \"Change map elements\"\n          },\n          \"elements\": {\n            \"search\": \"Search box\",\n            \"zoom\": \"Zoom controls\",\n            \"fullscreen\": \"Fullscreen\",\n            \"scrollwheel\": \"Scroll wheel zoom\",\n            \"layer_selector\": \"Layer selector\",\n            \"logo\": \"CARTO Logo\",\n            \"widgets\": \"Widgets column\",\n            \"legends\": \"Legends\",\n            \"dashboard_menu\": \"Show toolbar\"\n          }\n        }\n      }\n    },\n    \"maps\": {\n      \"options\": {\n        \"duplicate\": \"Duplicate\",\n        \"edit-metadata\": \"Edit metadata\",\n        \"export-image\": \"Export image\",\n        \"export-map\": \"Download map\",\n        \"remove\": \"Delete map\",\n        \"rename\": \"Rename\"\n      },\n      \"duplicate\": {\n        \"error\": \"There was an error duplicating %{name}\",\n        \"loading\": \"Duplicating your map %{name}...\"\n      },\n      \"delete\": {\n        \"confirm\": \"Ok, delete it\",\n        \"cancel\": \"Cancel\",\n        \"desc\": \"The deleted map cannot be recovered, be sure before proceeding.\",\n        \"title\": \"You are about to delete map %{name}\",\n        \"error\": \"Error deleting map %{name}: %{error}\",\n        \"loading\": \"Removing the map %{name}...\",\n        \"success\": \"Map %{name} deleted\"\n      },\n      \"export-image\": {\n        \"title\": \"Export as image\",\n        \"export\": \"Export\",\n        \"generating\": \"Generating\",\n        \"disclaimer\": {\n          \"title\": \"Disclaimer\",\n          \"body\": \"Legends and widgets won't be exported as part of the image\"\n        },\n        \"download\": \"Download\",\n        \"errors\": {\n          \"try-again\": \"Please, try again. If the problem persists, contact support\",\n          \"error-attribution\": \"Error generating attribution.\",\n          \"error-basemap\": \"Error loading basemap.\",\n          \"error-image\": \"Error generating image.\"\n        }\n      },\n      \"export\": {\n        \"confirmation\": {\n          \"confirm\": \"Download\",\n          \"cancel\": \"Cancel\",\n          \"desc\": \"This map, and the connected data, will be downloaded as a .carto file\",\n          \"title\": \"Download \\\"%{name}\\\"\"\n        },\n        \"download\": {\n          \"confirm\": \"Download\",\n          \"tip\": \"Tip: Allow pop-ups from CARTO in your web browser.\",\n          \"desc\": \"Click Download to begin the .carto file download.\",\n          \"title\": \"Ready to Download\"\n        },\n        \"error\": {\n          \"title\": \"An error occured while exporting your map\",\n          \"desc\": \"Please try again. If the problem persists, please contact support\"\n        }\n      },\n      \"rename\": {\n        \"loading\": \"Renaming map...\",\n        \"success\": \"Map renamed to %{name}\",\n        \"error\": \"Error renaming map %{name}: %{error}\"\n      }\n    },\n    \"tab-pane\": {\n      \"layers\": {\n        \"title-label\": \"Layers\",\n        \"georeference\": {\n          \"title\": \"Layer not georeferenced\",\n          \"body\": \"The layer <span class='CDB-Text is-semibold'>%{name}</span> include non-georeferenced data.\"\n        }\n      },\n      \"elements\": {\n        \"title-label\": \"Elements\"\n      },\n      \"widgets\": {\n        \"title-label\": \"Widgets\"\n      }\n    },\n    \"elements\": {\n      \"message\": \"Unfortunately, map overlays are not available yet, but they will be very soon. Stay tuned!\"\n    },\n    \"layers\": {\n      \"options\": {\n        \"rename\": \"Rename\",\n        \"delete\": \"Delete layer\",\n        \"collapse\": \"Collapse\",\n        \"expand\": \"Expand\",\n        \"export\": \"Export data\",\n        \"hide\": \"Hide layer\",\n        \"show\": \"Show layer\",\n        \"edit\": \"Edit layer\",\n        \"center-map\": \"Center map on layer\"\n      },\n      \"drag-n-drop-analysis\": {\n        \"upgrade-max-layers-err\": \"%{a_start}Upgrade your account%{a_end} to add more than %{userMaxLayers} layers to your maps.\"\n      },\n      \"rename\": {\n        \"loading\": \"Renaming layer\",\n        \"success\": \"Layer renamed to %{name}\",\n        \"error\": \"<span class='u-errorTextColor'>Error renaming layer</span> %{name}: %{error}\"\n      },\n      \"moveTorqueLayer\": {\n        \"loading\": \"Moving torque layer to first position...\",\n        \"success\": \"Layer moved\",\n        \"error\": \"Error moving the layer...\"\n      },\n      \"delete\": {\n        \"confirm\": \"Ok, delete it\",\n        \"cancel\": \"Cancel\",\n        \"desc\": \"<span class='CDB-Text u-mainTextColor is-semibold'>%{layerVisName}</span> will be affected, are you sure you want to delete it?\",\n        \"title\": \"You are about to delete the layer %{layerName}\",\n        \"error\": \"<span class='u-errorTextColor'>Error deleting layer</span>: %{error}\",\n        \"loading\": \"Removing layer\",\n        \"success\": \"Layer deleted correctly.\",\n        \"widgets\": \"one widget |||| %{smart_count} widgets\",\n        \"analyses\": \"one analysis |||| %{smart_count} analyses\",\n        \"layers\": \"one layer |||| %{smart_count} layers\",\n        \"affected-items\": \"Deleting this layer affects\",\n        \"and\": \"and\",\n        \"link-to-export\": \"Before deleting the layer, you can <a href='#' data-event='exportMapAction'>export as .CARTO file</a>\"\n      },\n      \"layer\": {\n        \"animated\": \"Animated\",\n        \"heatmap\": \"Pixel\",\n        \"analysis\": \"Analysis\",\n        \"add-analysis\": \"Add analysis\",\n        \"analyses-count\": \"%{smart_count} Analysis |||| %{smart_count} Analyses\",\n        \"widgets-count\": \"%{smart_count} Widget |||| %{smart_count} Widgets\",\n        \"add-layer\": \"Add layer\",\n        \"delete\": \"Delete\",\n        \"cancel-delete-analysis\": \"Cancel\"\n      },\n      \"basemap\": {\n        \"remove-baselayer\": \"Remove baselayer\",\n        \"custom-basemap\": \"Custom basemap\",\n        \"title-label\": \"Basemap\",\n        \"by\": \"by\",\n        \"category\": {\n          \"title-label\": \"Source\",\n          \"select-category\": \"Select source\"\n        },\n        \"style\": {\n          \"title-label\": \"Style\",\n          \"select-style\": \"Select style\",\n          \"color\": \"Color\"\n        },\n        \"saving\": {\n          \"loading\": \"Saving new basemap...\",\n          \"error\": \"Error saving new basemap.\",\n          \"success\": \"Basemap saved successfully.\"\n        }\n      },\n      \"labels\": {\n        \"title-label\": \"Labels\"\n      },\n      \"color\": {\n        \"title-label\": \"Color\"\n      },\n      \"image\": {\n        \"title-label\": \"Image\"\n      },\n      \"gmaps\": {\n        \"title-label\": \"Google Maps\"\n      },\n      \"menu-tab-pane-labels\": {\n        \"data\": \"Data\",\n        \"analyses\": \"Analysis\",\n        \"style\": \"Style\",\n        \"infowindow\": \"Pop-up\",\n        \"legends\": \"Legend\"\n      },\n      \"infowindow-menu-tab-pane-labels\": {\n        \"click\": \"Click\",\n        \"hover\": \"Hover\"\n      },\n      \"analysis-form\": {\n        \"merge-type\": {\n          \"left\": \"Returns all rows from #1, with the matching rows in #2 or NULL when there is no match.\",\n          \"inner\": \"Returns the result of #1 intersecting #2 (i.e. the inner part of a Venn diagram intersection)\"\n        },\n        \"admin-region\": \"Admin. Region\",\n        \"aggregate\": \"Aggregate\",\n        \"aggregate-by\": \"Aggregate by\",\n        \"aggregate-by-help\": \"Will calculate aggregate values for each centroid\",\n        \"aggregate-column\": \"Aggregate column\",\n        \"all-to-all\": \"All to all\",\n        \"allow-holes\": \"Allow holes\",\n        \"apply-btn\": \"Apply\",\n        \"asc\": \"ASC\",\n        \"bicycle\": \"Bicycle\",\n        \"boundaries\": \"Boundaries\",\n        \"bounding-box\": \"Bounding Box\",\n        \"bounding-circle\": \"Bounding Circle\",\n        \"by\": \"By\",\n        \"by-bike\": \"bike\",\n        \"by-car\": \"car\",\n        \"by-walk\": \"walk\",\n        \"car\": \"Car\",\n        \"categorize-by\": \"Categorize by\",\n        \"categorize-by-help\": \"If selected a centroid will be found for each category\",\n        \"category-column\": \"Category column\",\n        \"city\": \"City\",\n        \"clusters-num\": \"# of clusters\",\n        \"column\": \"Column\",\n        \"columns\": \"Columns\",\n        \"concave-hull\": \"Concave Hull\",\n        \"confirm-analysis\": \"Confirm\",\n        \"convex-hull\": \"Convex Hull\",\n        \"country\": \"Country\",\n        \"create-btn\": \"Apply\",\n        \"data-observatory-measurement-area\": \"Country\",\n        \"data-observatory-measurement-column\": \"New col. name\",\n        \"data-observatory-measurement-column-help\": \"Adds a new column to your layer to store result\",\n        \"data-observatory-measurement-desc\": \"enrich your data\",\n        \"data-observatory-measurement-measurement\": \"Measurement\",\n        \"data-observatory-measurement-refine\": \"Choose a measure\",\n        \"data-observatory-measurement-segments\": \"Segments\",\n        \"define-columns\": \"Define column to find similarities with\",\n        \"define-reference-and-target\": \"Define reference and target layers\",\n        \"define-two-layers\": \"Define two layers\",\n        \"denominator\": \"Denominator\",\n        \"denominator-help\": \"A column to normalize the target column\",\n        \"deprecated-sql-function\": {\n          \"choose-function\": \"Choose the function to run on this node\",\n          \"choose-function-small\": \"Choose function\",\n          \"define-params\": \"define your parameters below\",\n          \"function\": \"function\",\n          \"input\": \"input\",\n          \"params\": \"Your Function's Parameters\",\n          \"target\": \"target node\",\n          \"title\": \"SQL Function\"\n        },\n        \"desc\": \"DESC\",\n        \"direction\": \"Direction\",\n        \"disabled-by-config\": \"This analysis type is disabled\",\n        \"dissolved\": \"Dissolved\",\n        \"dissolved-help\": \"Combine polygons tracts which have equal ranges\",\n        \"distance\": \"Distance\",\n        \"enter-latitude\": \"Enter latitude\",\n        \"enter-longitude\": \"Enter longitude\",\n        \"filter\": \"Filter\",\n        \"filter-aggregate\": \"Aggregate your results\",\n        \"filter-column\": \"Filter column\",\n        \"foreign-keys\": \"Foreign Keys\",\n        \"geometry-from\": \"Geometry from\",\n        \"georeference\": {\n          \"postal-code-help\": \"Select a column with postal codes\",\n          \"admin-region-help\": \"Select a column with region names\",\n          \"admin-region-extended-help\": \"Specify an admin. region or select a column with region names\",\n          \"admin-region\": \"Admin. Regions\",\n          \"city-help\": \"Select a column with city names\",\n          \"city-extended-help\": \"Specify a city or select a column with city names\",\n          \"city\": \"Cities\",\n          \"country-help\": \"Select a column with country names\",\n          \"country-extended-help\": \"Specify a country or select a column with country names\",\n          \"country\": \"Countries\",\n          \"enter-city-name\": \"Or enter city name\",\n          \"enter-country-name\": \"Or enter country name\",\n          \"enter-region-name\": \"Or enter region name\",\n          \"enter-state-name\": \"Or enter state name\",\n          \"ip-address-column\": \"IP Address\",\n          \"ip-address-help\": \"Select a column with IP addresses\",\n          \"ip-address\": \"IP Addresses\",\n          \"long-lat\": \"Longitude and Latitude\",\n          \"postal-code\": \"Postal Codes\",\n          \"select-a-country\": \"Select a country column\",\n          \"select-admin\": \"Select a region column\",\n          \"select-city\": \"Select a city column\",\n          \"select-country\": \"Select country column\",\n          \"select-ip\": \"Select an IP column\",\n          \"select-latitude\": \"Select a latitude column\",\n          \"select-longitude\": \"Select a longitude column\",\n          \"select-postal-code\": \"Select a postal code column\",\n          \"select-state\": \"Select state column\",\n          \"select-street-address\": \"Select an address column\",\n          \"state-help\": \"Specify a state or select a column with state names\",\n          \"street-address-column\": \"Street Address\",\n          \"street-address-column-help\": \"Select a column with street addresses\",\n          \"street-address-help\": \"Use columns or free text to compose your address schema. <a href='https://carto.com/learn/guides/analysis/geocode-street-addresses-into-point-geometries' target='_blank'>More info.</a>\",\n          \"street-address\": \"Street Addresses\",\n          \"advance\": \"Advanced mode\",\n          \"normal\": \"Normal mode\"\n        },\n        \"group-by\": \"Group by\",\n        \"hide\": \"Hide\",\n        \"inner\": \"Inner\",\n        \"input\": \"Input\",\n        \"input-layer\": \"Define your input layer\",\n        \"input-num\": \"Input #%{num}\",\n        \"intact\": \"Intact\",\n        \"intact-help\": \"Keep all polygon tracts as individual polygons\",\n        \"join-type\": \"Join Type\",\n        \"keep-columns\": \"Select the columns you want to keep\",\n        \"key-columns\": \"Key columns\",\n        \"key-columns-desc\": \"Choose similar columns to relate them\",\n        \"kilometers\": \"km\",\n        \"latitude\": \"Latitude\",\n        \"left\": \"Left\",\n        \"line-sequential\": \"Sequential\",\n        \"line-source-to-target\": \"To Source\",\n        \"line-to-column\": \"To Column\",\n        \"line-to-single-point\": \"To Single Point\",\n        \"link-layer\": \"Link to col.\",\n        \"link-layer-desc\": \"Specify a second layer to filter by\",\n        \"linked-layer\": \"Filter by layer\",\n        \"loading\": \"loading\",\n        \"longitude\": \"Longitude\",\n        \"max\": \"Max\",\n        \"measure-by\": \"Measure by\",\n        \"meters\": \"m\",\n        \"method\": \"Method\",\n        \"miles\": \"mi\",\n        \"min\": \"Min\",\n        \"mode\": \"Mode\",\n        \"find-nearest\": {\n          \"categorized\": \"Per group\",\n          \"categorized-help\": \"Calculate results per each category of the chosen column\",\n          \"criteria\": \"Select the target point layer\",\n          \"define-params\": \"Define your parameters\",\n          \"define-params-desc\": \"Define and categorize the number of results\",\n          \"input\": \"input\",\n          \"max-results\": \"max results\",\n          \"modal-desc\": \"Find nearest analysis locates the closest points between two tables.\",\n          \"modal-title\": \"Find nearest\",\n          \"target\": \"target\",\n          \"title\": \"Find nearest\"\n        },\n        \"neighbors\": \"Neighbors\",\n        \"neighbors-help\": \"Define the local neighborhood as this many nearest-neighbors\",\n        \"no\": \"No\",\n        \"no-coincidence\": \"When no coincidence no row will be added\",\n        \"should-match\": \"Column types should match\",\n        \"numerator\": \"Target column\",\n        \"numerator-help\": \"Measure spatial autocorrelation of this column\",\n        \"operation\": \"Operation\",\n        \"order\": \"Order\",\n        \"order-by\": \"Order by\",\n        \"order-results\": \"Order your results\",\n        \"parameters\": \"Parameters\",\n        \"parameters-description\": \"Tune your analysis\",\n        \"permutations\": \"Permutations\",\n        \"placeholder-text\": \"You have not added any analysis yet. Add an analysis to discover new things.\",\n        \"points_source\": \"Point source\",\n        \"polygons_source\": \"Polygon source\",\n        \"postal-code\": \"Postal Code\",\n        \"quota\": {\n          \"title\": \"confirm your analysis\",\n          \"loading\": \"Obtaining your quotas...\",\n          \"credits-left-body\": \"This might incur into an extra cost. Extra credits will be charged at $%{blockPrice}/%{blockSize}.\",\n          \"credits-left-message\": \"%{smart_count} credit left |||| %{smart_count} credits left\",\n          \"enough-quota\": \"You need to use approximately %{credits} of your credits.\",\n          \"hard-limit-not-enough-quota\": \"We're sorry the current quota is insufficient to enrich your data. Rows will be set to null and analysis may not complete. Please %{contact} us to extend your quota for this function.\",\n          \"soft-limit-enough-quota\": \"We're sorry the current quota is insufficient to enrich your data. This might need about %{credits} extra credits. Extra credits will be charged at $%{blockPrice}/%{blockSize}.\",\n          \"no-quota-assigned-body\": \"To get access to the %{analysis} function, %{contact}.\",\n          \"no-credits-body\": \"You have consumed all your credits during this billing cycle. %{contact} to get some more.\",\n          \"no-credits-message\": \"No credits available\",\n          \"contact-message\": {\n            \"no-credits\": {\n              \"regular\": \"Contact us\",\n              \"organization\": \"Contact your organization admin\"\n            },\n            \"no-quota-assigned\": {\n              \"regular\": \"contact our team\",\n              \"organization\": \"contact your organization admin\"\n            }\n          },\n          \"emails\": {\n            \"support\": \"support@carto.com\",\n            \"saas\": \"sales@carto.com\"\n          },\n          \"quota-error-title\": \"Error\",\n          \"quota-fetch-error\": \"There was an error obtaining your quota: %{error}.\",\n          \"quota-dataservice-down\": \"Dataservices API unreacheable.\",\n          \"cancel\": \"Cancel\",\n          \"confirm\": \"confirm\",\n          \"analysis-type\": {\n            \"routing\": \"Routing\",\n            \"trade-area\": \"Trade area\",\n            \"georeference-street-address\": \"Georeference street address\",\n            \"data-observatory-measure\": \"Data Observatory\"\n          }\n        },\n        \"public_transport\": \"Public transport\",\n        \"radius\": \"Distance\",\n        \"reference-layer-pluralize\": \"Define your reference layer |||| Define your reference layers\",\n        \"result\": \"Result\",\n        \"right\": \"Right\",\n        \"sampling\": \"Sampling\",\n        \"sampling-desc\": \"Select a sample of the data\",\n        \"sampling-rate\": \"% of data \",\n        \"search-by-column-name\": \"Search by column name\",\n        \"second-geom-required\": \"This analysis requires a second geometry column\",\n        \"select-column\": \"Select a column\",\n        \"select-type\": \"Select data type\",\n        \"setup-analysis\": \"Setup analysis\",\n        \"show\": \"Show\",\n        \"significance\": \"Significance\",\n        \"significance-help\": \"Filter outliers and clusters to this significance. Smaller numbers are more significant.\",\n        \"source\": \"Source\",\n        \"source-col\": \"Source col.\",\n        \"source-column\": \"Source column\",\n        \"spatial-markov-trend-desc\": \"select a column for each time period\",\n        \"spatial-markov-trend-time-columns\": \"Input columns\",\n        \"spatial-markov-trend-time-columns-help\": \"Each column should contain values for a time period\",\n        \"state\": \"State\",\n        \"target\": \"Target\",\n        \"target-layer\": \"Target layer\",\n        \"intersection-layer\": \"Intersect layer\",\n        \"filtering-layer\": \"Filtering layer\",\n        \"base-layer\": \"Base layer\",\n        \"target-col\": \"Target col.\",\n        \"target-column\": \"Target column\",\n        \"target-percent\": \"Target percent\",\n        \"target-percent-help\": \"Convex hull lookalike\",\n        \"time\": \"Time\",\n        \"time-seconds\": \"Time (Seconds)\",\n        \"to-closest\": \"To closest\",\n        \"top-range\": \"Top range\",\n        \"tracts\": \"Tracts\",\n        \"tracts-help\": \"Number of AOIs evenly spaced between 0 and RADIUS\",\n        \"tune-analysis\": \"Tune your analysis\",\n        \"tune-centroid\": \"Tune your centroid\",\n        \"tune-clusters\": \"Tune your clusters\",\n        \"units\": \"Units\",\n        \"type\": \"Type\",\n        \"value\": \"Value\",\n        \"value-aggregation\": \"Value aggregation\",\n        \"value-aggregation-desc\": \"Aggregate the desired value in your polygon(s)\",\n        \"value-aggregation-centroids\": \"Aggregate the desired value in your centroid(s)\",\n        \"valid-type\": \"This kind of data is not valid for this type\",\n        \"walk\": \"Walk\",\n        \"weight\": \"Weight\",\n        \"weight-column\": \"Weight column\",\n        \"weight-type\": \"Weight type\",\n        \"weighted-by\": \"Weighted by\",\n        \"weighted-by-help\": \"Weights contribution by a value for each point\",\n        \"workflow\": \"Your workflow\",\n        \"write-max-value\": \"Write max value\",\n        \"write-min-value\": \"Write min value\",\n        \"yes\": \"Yes\"\n      },\n      \"infowindow\": {\n        \"select-fields\": \"Select fields\",\n        \"no-fields\": \"You havent selected any fields to be shown in the popup.\",\n        \"placeholder-interactivity-text\": \"Popups are disabled because interactivity is not available for this layer.\",\n        \"placeholder-columns-text\": \"Popups are disabled because there are no columns available for this layer.\",\n        \"placeholder-geometry\": \"There's no geometry in your data to add a popup.\",\n        \"style\": {\n          \"title-label\": \"Style\",\n          \"select-style\": \"Select style\",\n          \"window-size\": \"Window size\",\n          \"header-color\": \"Header color\",\n          \"none\": \"None\",\n          \"custom\": \"Custom\",\n          \"infowindow_light\": \"Light\",\n          \"infowindow_dark\": \"Dark\",\n          \"infowindow_color\": \"Color\",\n          \"infowindow_header_with_image\": \"Image\"\n        },\n        \"items\": {\n          \"title-label\": \"Show items\",\n          \"description\": \"Add items\"\n        }\n      },\n      \"tooltip\": {\n        \"style\": {\n          \"none\": \"None\",\n          \"custom\": \"Custom\",\n          \"tooltip_light\": \"Light\",\n          \"tooltip_dark\": \"Dark\"\n        },\n        \"items\": {\n          \"title-label\": \"Show items\",\n          \"description\": \"Add items\"\n        }\n      },\n      \"filter-options\": {\n        \"top\": \"Top\",\n        \"bottom\": \"Bottom\",\n        \"between\": \"Between\",\n        \"is-equal-to\": \"Is equal to\",\n        \"is-greater-than\": \"Is greater than\",\n        \"is-less-than\": \"Is less than\"\n      },\n      \"notifier\": {\n        \"center-map\": {\n          \"loading\": \"Calculating coordinates...\",\n          \"success\": \"Map centered\",\n          \"error\": \"Error centering map\"\n        }\n      },\n      \"georeference\": {\n        \"manually-add\": \"Please georeference or manually add data to visualize.\",\n        \"georeference-button\": \"Georeference\",\n        \"visualize\": \"Layer doesn't have geometry\"\n      }\n    },\n    \"data\": {\n      \"no-geometry-data\": \"Your dataset doesn't contain any geometry data.\",\n      \"stats\": {\n        \"add-widget\": \"Add as a widget\",\n        \"edit\": \"EDIT\",\n        \"top-cat\": \"% in top 10 cat.\",\n        \"trues\": \"% true\",\n        \"null\": \"% null\",\n        \"number-of\": \"%{geometry} count\",\n        \"geometry-fallback\": \"features\"\n      },\n      \"data-toggle\": {\n        \"values\": \"VALUES\",\n        \"cartocss\": \"SQL\"\n      },\n      \"code-mirror\": {\n        \"tip\": \"CMD + S to apply your query. CTRL + Space to autocomplete.\"\n      },\n      \"notifier\": {\n        \"sql-alter-loading\": \"Modifying table\",\n        \"sql-alter-error\": \"Error in SQL query.\",\n        \"sql-alter-success\": \"Modification applied.\",\n        \"sql-applying\": \"Applying query\",\n        \"sql-error\": \"Error in SQL query.\",\n        \"sql-success\": \"SQL query applied.\"\n      },\n      \"messages\": {\n        \"sql-readonly\": {\n          \"title\": \"SQL READ-ONLY\",\n          \"body\": \"You just applied an analysis to this layer. The SQL is now read- only.\",\n          \"accept\": \"CLOSE\"\n        },\n        \"empty-data\": {\n          \"title\": \"NO DATA AVAILABLE\",\n          \"body\": \"There is no data available to be displayed.\"\n        }\n      }\n    },\n    \"infowindow\": {\n      \"apply\": \"APPLY\",\n      \"html-toggle\": {\n        \"values\": \"VALUES\",\n        \"html\": \"HTML\"\n      },\n      \"code-mirror\": {\n        \"save\": \"CMD + S to apply your html.\",\n        \"errors\": {\n          \"empty\": \"Template can't be empty.\"\n        }\n      },\n      \"messages\": {\n        \"custom-html-applied\": {\n          \"title\": \"CUSTOM HTML APPLIED\",\n          \"body\": \"You just applied custom html with HTML editor. You can continue and clean all html.\",\n          \"accept\": \"CONTINUE\"\n        },\n        \"layer-hidden\": {\n          \"title\": \"LAYER HIDDEN\",\n          \"body\": \"This layer is hidden, changes will not be shown until you make it visible.\",\n          \"show\": \"SHOW\"\n        }\n      }\n    },\n    \"export-image\": {\n      \"invalid-dimension\": \"Invalid dimension (%{limit}x%{limit}px)\",\n      \"properties\": {\n        \"width\": \"width\",\n        \"height\": \"height\",\n        \"size\": \"Size\",\n        \"size-subtitle\": \"Manually enter the image size\",\n        \"format\": \"Format\",\n        \"format-subtitle\": \"Choose a lossless (PNG) or lossy (JPG) format\",\n        \"options\": \"Options\",\n        \"options-subtitle\": \"Configure display options\"\n      }\n    },\n    \"legend\": {\n      \"no-geometry-data\": \"There's no geometry in your data to add a legend.\",\n      \"data-toggle\": {\n        \"values\": \"VALUES\",\n        \"html\": \"HTML\"\n      },\n      \"code-mirror\": {\n        \"save\": \"CMD + S to apply your html.\",\n        \"errors\": {\n          \"empty\": \"Template can't be empty.\"\n        },\n        \"pre-html\": \"<!-- insert your custom html code above this line -->\",\n        \"post-html\": \"<!-- insert your custom html code below this line -->\"\n      },\n      \"menu-tab-pane-labels\": {\n        \"color\": \"color\",\n        \"size\": \"size\"\n      },\n      \"messages\": {\n        \"custom-legend\": {\n          \"title\": \"CUSTOM LEGEND APPLIED\",\n          \"body\": \"You just applied custom html with HTML editor. You can continue and clean all html.\",\n          \"accept\": \"Delete custom html\"\n        },\n        \"layer-hidden\": {\n          \"title\": \"LAYER HIDDEN\",\n          \"body\": \"This layer is hidden. Changes won't be shown until you make it visible.\",\n          \"show\": \"SHOW\"\n        },\n        \"legends-disabled\": {\n          \"title\": \"LEGENDS DISABLED\",\n          \"body\": \"The legends setting is disabled. Changes made will not be shown until you enable legends.\",\n          \"show\": \"ENABLE\"\n        }\n      },\n      \"types\": {\n        \"none\": \"none\",\n        \"category\": \"category\",\n        \"gradient\": \"gradient\",\n        \"bubble\": \"bubble\",\n        \"custom\": \"custom\"\n      },\n      \"legend-form\": {\n        \"type\": {\n          \"title\": \"Select Style\"\n        },\n        \"properties\": {\n          \"title\": \"Creating your legend\",\n          \"subtitle\": \"Add items\"\n        },\n        \"add\": \"Add item\",\n        \"title\": \"Title\",\n        \"fill\": \"Fill\",\n        \"by-size\": \"By Size\",\n        \"by-color\": \"By Color\",\n        \"untitled\": \"Untitled\",\n        \"prefix\": \"Prefix\",\n        \"suffix\": \"Suffix\",\n        \"left-label\": \"Left Label\",\n        \"right-label\": \"Right Label\",\n        \"top-label\": \"Top Label\",\n        \"bottom-label\": \"Bottom Label\",\n        \"custom-label-placeholder\": \"Override dynamic value\"\n      },\n      \"pixel-title\": \"Amount\"\n    },\n    \"style\": {\n      \"types\": {\n        \"none\": \"-\",\n        \"simple\": \"none\",\n        \"hexabins\": \"hexbins\",\n        \"squares\": \"squares\",\n        \"regions\": \"Adm. Regions\",\n        \"heatmap\": \"pixel\",\n        \"animation\": \"animated\"\n      },\n      \"style-form\": {\n        \"type\": {\n          \"title-label\": \"Aggregation\"\n        },\n        \"aggregation\": {\n          \"title-label\": \"Aggregation Options\",\n          \"desc\": \"Configure how the aggregation works\"\n        },\n        \"properties\": {\n          \"title-label-point\": \"Style\",\n          \"title-label-line\": \"Lines style\",\n          \"title-label-polygon\": \"Polygons style\",\n          \"placeholder-text\": \"There's no geometry in your data that could be styled.\",\n          \"georeference\": \"Georeference\",\n          \"desc\": \"Change the visualization\"\n        },\n        \"unanimatable\": {\n          \"desc\": \"Not any numeric or date column found in your data.\",\n          \"body\": \"You can change your column's type in the %{link}.\",\n          \"label\": \"table view\"\n        }\n      },\n      \"code-mirror\": {\n        \"save\": \"CMD + S to apply your styles.\"\n      },\n      \"style-toggle\": {\n        \"values\": \"VALUES\",\n        \"cartocss\": \"CARTOCSS\"\n      },\n      \"messages\": {\n        \"fetched\": \"Schema fetched, select a style\",\n        \"fetching\": \"Schema is being fetched, when it is done, different styles will be avaiable\",\n        \"unavailable\": \"There was a problem getting schema, try to reload\",\n        \"none\": \"Your styles were reset, choose new styles for your layer, or go back to your previous style.\",\n        \"cartocss-applied\": {\n          \"title\": \"CARTOCSS APPLIED\",\n          \"body\": \"You just applied styles with CartoCSS. You can continue or clear all styles.\",\n          \"continue\": \"CONTINUE\",\n          \"clear\": \"CLEAR\"\n        },\n        \"layer-hidden\": {\n          \"title\": \"LAYER HIDDEN\",\n          \"body\": \"This layer is hidden, changes won't be shown until you make it visible.\",\n          \"show\": \"SHOW\"\n        },\n        \"torque-exists\": {\n          \"title\": \"TORQUE LAYER\",\n          \"body\": \"There is already a torque layer in the layers collection. If you continue, this layer will use the default style.\",\n          \"continue\": \"CONTINUE\",\n          \"cancel\": \"CANCEL\"\n        }\n      },\n      \"components\": {\n        \"fill\": \"Fill\",\n        \"stroke\": {\n          \"label\": \"Stroke\",\n          \"fetching\": \"Loading node schema...\",\n          \"unavailable\": \"Error getting node schema\",\n          \"error\": \"There was an error fetching node schema...\"\n        },\n        \"blending\": {\n          \"label\": \"Blending\",\n          \"options\": {\n            \"none\": \"none\",\n            \"darken\": \"darken\",\n            \"lighten\": \"lighten\",\n            \"lighter\": \"lighter\",\n            \"color-dodge\": \"color-dodge\",\n            \"color-burn\": \"color-burn\",\n            \"multiply\": \"multiply\",\n            \"screen\": \"screen\",\n            \"overlay\": \"overlay\",\n            \"src-over\": \"src-over\",\n            \"source-over\": \"source-over\",\n            \"xor\": \"xor\"\n          }\n        },\n        \"type\": {\n          \"label\": \"Type\",\n          \"options\": {\n            \"heatmap\": \"Heatmap\",\n            \"points\": \"Points\"\n          }\n        },\n        \"aggregation-value\": \"Operation\",\n        \"aggregation-size\": {\n          \"label\": \"Size\",\n          \"help\": \"In pixels\"\n        },\n        \"aggregation-dataset\": \"Admin. level\",\n        \"labels-enabled\": {\n          \"label\": \"labels\",\n          \"not-with-animated\": \"It won't be available with animations\"\n        },\n        \"labels-attribute\": {\n          \"label\": \"column\",\n          \"fetching\": \"Loading node schema...\",\n          \"unavailable\": \"Error getting node schema\",\n          \"error\": \"There was an error fetching node schema...\"\n        },\n        \"labels-font\": \"font\",\n        \"labels-offset\": \"offset\",\n        \"labels-fill\": \"size/color\",\n        \"labels-overlap\": {\n          \"label\": \"overlap\",\n          \"options\": {\n            \"true\": \"True\",\n            \"false\": \"False\"\n          }\n        },\n        \"labels-halo\": \"halo\",\n        \"labels-placement\": {\n          \"label\": \"placement\",\n          \"options\": {\n            \"point\": \"point\",\n            \"line\": \"line\",\n            \"vertex\": \"vertex\",\n            \"interior\": \"interior\"\n          }\n        },\n        \"animated-enabled\": {\n          \"label\": \"animated\",\n          \"already-one-torque\": \"There is already a torque layer in your map\",\n          \"not-with-labels\": \"It won't be available with labels\"\n        },\n        \"animated-attribute\": {\n          \"label\": \"column\",\n          \"fetching\": \"Loading node schema...\",\n          \"unavailable\": \"Error getting node schema\",\n          \"error\": \"There was an error fetching node schema...\"\n        },\n        \"animated-overlap\": {\n          \"label\": \"overlap\",\n          \"options\": {\n            \"true\": \"Accum.\",\n            \"false\": \"None\"\n          }\n        },\n        \"animated-trails\": \"trails\",\n        \"animated-resolution\": \"resolution\",\n        \"animated-steps\": \"steps\",\n        \"animated-duration\": \"duration\"\n      }\n    },\n    \"widgets\": {\n      \"no-geometry-data\": \"Your dataset lacks geometry data, it is not possible to add a widget.\",\n      \"options\": {\n        \"remove\": \"Delete...\",\n        \"rename\": \"Rename\",\n        \"edit\": \"Edit\"\n      },\n      \"delete\": {\n        \"confirm\": \"Ok, delete it\",\n        \"cancel\": \"Cancel\",\n        \"desc\": \"The widget cannot be recovered, be sure before proceeding.\",\n        \"title\": \"You are about to delete the widget %{name}\",\n        \"error\": \"Error deleting widget %{name}: %{error}\",\n        \"loading\": \"Removing the widget %{name}...\",\n        \"success\": \"Widget %{name} deleted\"\n      },\n      \"widgets-view\": {\n        \"add_widget\": \"Add widget\"\n      },\n      \"widgets-types\": {\n        \"histogram\": \"Histogram\",\n        \"category\": \"Category\",\n        \"formula\": \"Formula\",\n        \"time-series\": \"Time series\"\n      },\n      \"widgets-form\": {\n        \"placeholder-text\": \"You have not added any widgets yet. Add widgets to discover new things.\",\n        \"type\": {\n          \"title-label\": \"Type\",\n          \"description\": \"Choose the widget type\",\n          \"category\": \"Category\",\n          \"formula\": \"Formula\",\n          \"histogram\": \"Histogram\",\n          \"time_series\": \"Time Series\"\n        },\n        \"data\": {\n          \"columns-unavailable\": \"No columns available\",\n          \"aggregation\": \"Aggregation\",\n          \"aggregation_column\": \"Aggregation Column\",\n          \"bins\": \"Buckets\",\n          \"column\": \"Column\",\n          \"description\": \"Configure your values\",\n          \"end\": \"End\",\n          \"loading\": \"loading\",\n          \"operation\": \"Operation\",\n          \"prefix\": \"Prefix\",\n          \"start\": \"Start\",\n          \"suffix\": \"Suffix\",\n          \"title\": \"Title\",\n          \"title-label\": \"Data\",\n          \"value\": \"Value\",\n          \"aggregate-by\": \"aggregate by\",\n          \"operation-column\": \"operation column\"\n        },\n        \"style\": {\n          \"custom-categories\": \"Custom categ.\",\n          \"custom-disabled\": \"If an aggregated style is applied, auto style is disabled\",\n          \"custom-help\": \"Represent the widget's values with custom colors in the map\",\n          \"custom-ramp\": \"Custom ramp\",\n          \"define\": \"Define how your widget interacts with the data\",\n          \"description\": \"Description\",\n          \"fill\": \"Fill\",\n          \"no\": \"No\",\n          \"sync_on_bbox_change\": \"Dynamic\",\n          \"sync_on_data_change\": \"Unfiltered\",\n          \"title-label\": \"Behavior\",\n          \"yes\": \"Yes\"\n        }\n      }\n    },\n    \"edit-feature\": {\n      \"features\": {\n        \"point\": \"point\",\n        \"line\": \"line\",\n        \"polygon\": \"polygon\"\n      },\n      \"loading-state\": \"Requesting feature data...\",\n      \"error-state\": \"There was an error requesting feature data\",\n      \"overlay-text\": \"Start clicking on the map to draw your %{featureType}\",\n      \"add\": \"Add\",\n      \"save\": \"Save\",\n      \"attributes\": \"Attributes\",\n      \"attributes-columns\": \"Change column names and type in table mode\",\n      \"cancel\": \"Cancel\",\n      \"geometry\": \"Geometry\",\n      \"geometry-edit\": \"You can also edit it on the map\",\n      \"geometry-disabled\": \"Not available for hidden or read only layers\",\n      \"out-of-bounds-lng\": \"Longitude is out of bounds [-180, 180]\",\n      \"out-of-bounds-lat\": \"Latitude is out of bounds [-90, 90]\",\n      \"valid-lng\": \"Must be a valid longitude\",\n      \"valid-lat\": \"Must be a valid latitude\",\n      \"valid\": \"Only numbers allowed\",\n      \"delete\": \"Delete %{featureType}\",\n      \"edit\": \"Edit %{featureType}\",\n      \"analysis\": \"layers with analysis nodes\",\n      \"custom-sql\": \"layers with custom SQL applied\",\n      \"sync\": \"read only layers\",\n      \"disabled\": \"Feature editing is disabled in %{disabledLayerType}. To edit the data, export this layer and import it as a new layer.\"\n    }\n  },\n  \"notifications\": {\n    \"vis\": {\n      \"failed\": {\n        \"title\": \"This map couldn't be rendered\",\n        \"body\": \"Please refresh the page and contact us if the error persists\"\n      }\n    },\n    \"analysis\": {\n      \"waiting\": \"Analysis %{nodeId} enqueued...\",\n      \"running\": \"Analysis %{nodeId} running...\",\n      \"completed\": \"Analysis %{nodeId} completed\",\n      \"failed\": \"Analysis %{nodeId} failed\",\n      \"removed\": \"Analysis %{nodeId} deleted\",\n      \"contact\": {\n        \"label\": \"contact us\",\n        \"mail\": \"support@carto.com\"\n      },\n      \"sample\": \"sample\",\n      \"errors\": {\n        \"timeout\": \"Your analysis has taken too long. Try to %{sample} your data or %{contact} for further assistance\",\n        \"without-geom-webmercator\": \"The column \\\"the_geom_webmercator\\\" does not exist\"\n      }\n    },\n    \"widgets\": {\n      \"delete\": \"Widget deleted correctly.\",\n      \"success\": \"Widget successfully added\",\n      \"error\": {\n        \"title\": \"Error adding widget:\",\n        \"body\": \"%{body} %{error}\"\n      },\n      \"loading\": \"Adding widget\",\n      \"updating\": \"Updating widget\",\n      \"restoring\": \"Restoring widgets\",\n      \"restored\": \"Widgets restored\"\n    },\n    \"layer\": {\n      \"error\": \"Layer error: %{error}\",\n      \"added\": \"Layer added successfully\"\n    },\n    \"cartocss\": {\n      \"error\": {\n        \"body\": \"%{body} %{error}\",\n        \"title\": \"Error in CartoCSS styles:\"\n      },\n      \"success\": \"CartoCSS applied\"\n    },\n    \"sql\": {\n      \"alter-loading\": \"Modifying table\",\n      \"alter-success\": \"Modification applied\",\n      \"applying\": \"Applying query\",\n      \"error\": {\n        \"body\": \"%{body} %{error}\",\n        \"title\": \"Error in SQL query:\"\n      },\n      \"success\": \"SQL query applied\"\n    },\n    \"edit-feature\": {\n      \"edit\": {\n        \"loading\": \"Requesting geometry data...\",\n        \"error\": \"There was an error requesting geometry data\"\n      },\n      \"error\": {\n        \"body\": \"%{body} %{error}\"\n      },\n      \"destroy\": {\n        \"loading\": \"Deleting geometry\",\n        \"error\": \"Error deleting geometry\",\n        \"success\": \"Geometry deleted correctly\"\n      },\n      \"save\": {\n        \"loading\": \"Saving geometry\",\n        \"error\": \"Error saving geometry\",\n        \"success\": \"Geometry successfully saved\"\n      },\n      \"adding\": \"Adding geometry\"\n    }\n  }\n}\n",
    "module.exports={\n  \"editor\": {\n    \"map\": \"mapa\",\n    \"map_name\": \"%{name} mapa\",\n    \"map_pluralize\": \"%{smart_count} mapa |||| %{smart_count} mapas\"\n  }\n}\n",
    "module.exports = {\n  en: require('./en.json'),\n  sw: require('./sw.json'),\n  es: require('./es.json')\n};\n",
    "module.exports={\n  \"editor\": {\n    \"map\": \"karta\",\n    \"map_name\": \"%{name} karta\",\n    \"map_pluralize\": \"%{smart_count} karta |||| %{smart_count} kartor\"\n  }\n}\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n * NOTE! Migrated as-is from https://github.com/CartoDB/cartodb.js/blob/470399abb12b40d5476ab6bbfd792d95aa819f50/src/core/view.js 2016-06-03\n * Base View for all CartoDB views.\n * DO NOT USE Backbone.View directly\n */\nvar View = Backbone.View.extend({\n  classLabel: 'cdb.core.View',\n\n  constructor: function (options) {\n    this.options = _.defaults(options, this.options);\n    this._models = [];\n    this._subviews = {};\n    Backbone.View.call(this, options);\n    View.viewCount++;\n    View.views[this.cid] = this;\n    this._created_at = new Date();\n  },\n\n  add_related_model: function (m) {\n    if (!m) throw new Error('added non valid model');\n    this._models.push(m);\n  },\n\n  addView: function (v) {\n    this._subviews[v.cid] = v;\n    v._parent = this;\n  },\n\n  removeView: function (v) {\n    delete this._subviews[v.cid];\n  },\n\n  clearSubViews: function () {\n    _(this._subviews).each(function (v) {\n      v.clean();\n    });\n    this._subviews = {};\n  },\n\n  /**\n   * this methid clean removes the view\n   * and clean and events associated. call it when\n   * the view is not going to be used anymore\n   */\n  clean: function () {\n    this.trigger('clean');\n    this.clearSubViews();\n    // remove from parent\n    if (this._parent) {\n      this._parent.removeView(this);\n      this._parent = null;\n    }\n    this.remove();\n    this.allOff();\n    View.viewCount--;\n    delete View.views[this.cid];\n    return this;\n  },\n\n  /**\n   * Remove all event listeners on related models\n   */\n  allOff: function () {\n    this.off();\n\n    if (this.model && this.model.off) this.model.off(null, null, this);\n\n    var self = this;\n    _(this._models).each(function (m) {\n      m.off(null, null, self);\n    });\n    this._models = [];\n  },\n\n  show: function () {\n    this.$el.show();\n  },\n\n  hide: function () {\n    this.$el.hide();\n  },\n\n  /**\n  * Listen for an event on another object and triggers on itself, with the same name or a new one\n  * @method retrigger\n  * @param ev {String} event who triggers the action\n  * @param obj {Object} object where the event happens\n  * @param obj {Object} [optional] name of the retriggered event\n  */\n  retrigger: function (ev, obj, retrigEvent) {\n    if (!retrigEvent) {\n      retrigEvent = ev;\n    }\n    var self = this;\n    obj.bind && obj.bind(ev, function () {\n      self.trigger(retrigEvent);\n    }, self);\n    // add it as related model//object\n    this.add_related_model(obj);\n  },\n  /**\n  * Captures an event and prevents the default behaviour and stops it from bubbling\n  * @method killEvent\n  * @param event {Event}\n  */\n  killEvent: function (ev) {\n    if (ev && ev.preventDefault) {\n      ev.preventDefault();\n    }\n    if (ev && ev.stopPropagation) {\n      ev.stopPropagation();\n    }\n  },\n\n  /**\n  * Remove all the tipsy tooltips from the document\n  * @method cleanTooltips\n  */\n  cleanTooltips: function () {\n    this.$('.tipsy').remove();\n  }\n\n}, {\n  viewCount: 0,\n  views: {},\n\n  /**\n   * when a view with events is inherit and you want to add more events\n   * this helper can be used:\n   * var MyView = new core.View({\n   *  events: View.extendEvents({\n   *      'click': 'fn'\n   *  })\n   * })\n   */\n  extendEvents: function (newEvents) {\n    return function () {\n      return _.extend(newEvents, this.constructor.__super__.events);\n    };\n  },\n\n  /**\n   * search for views in a view and check if they are added as subviews\n   */\n  runChecker: function () {\n    _.each(View.views, function (view) {\n      _.each(view, function (prop, k) {\n        if (k !== '_parent' &&\n          view.hasOwnProperty(k) &&\n          prop instanceof View &&\n          view._subviews[prop.cid] === undefined) {\n          console.log('=========');\n          console.log('untracked view: ');\n          console.log(prop.el);\n          console.log('parent');\n          console.log(view.el);\n          console.log(' ');\n        }\n      });\n    });\n  }\n});\n\nmodule.exports = View;\n",
    "/*! jQuery UI - v1.11.4 - 2015-03-11\n* http://jqueryui.com\n* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js\n* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */\n\n(function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([ \"jquery\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}(function( $ ) {\n/*!\n * jQuery UI Core 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n\n\n// $.ui might exist from components with no dependencies, e.g., $.ui.position\n$.ui = $.ui || {};\n\n$.extend( $.ui, {\n\tversion: \"1.11.4\",\n\n\tkeyCode: {\n\t\tBACKSPACE: 8,\n\t\tCOMMA: 188,\n\t\tDELETE: 46,\n\t\tDOWN: 40,\n\t\tEND: 35,\n\t\tENTER: 13,\n\t\tESCAPE: 27,\n\t\tHOME: 36,\n\t\tLEFT: 37,\n\t\tPAGE_DOWN: 34,\n\t\tPAGE_UP: 33,\n\t\tPERIOD: 190,\n\t\tRIGHT: 39,\n\t\tSPACE: 32,\n\t\tTAB: 9,\n\t\tUP: 38\n\t}\n});\n\n// plugins\n$.fn.extend({\n\tscrollParent: function( includeHidden ) {\n\t\tvar position = this.css( \"position\" ),\n\t\t\texcludeStaticParent = position === \"absolute\",\n\t\t\toverflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,\n\t\t\tscrollParent = this.parents().filter( function() {\n\t\t\t\tvar parent = $( this );\n\t\t\t\tif ( excludeStaticParent && parent.css( \"position\" ) === \"static\" ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn overflowRegex.test( parent.css( \"overflow\" ) + parent.css( \"overflow-y\" ) + parent.css( \"overflow-x\" ) );\n\t\t\t}).eq( 0 );\n\n\t\treturn position === \"fixed\" || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;\n\t},\n\n\tuniqueId: (function() {\n\t\tvar uuid = 0;\n\n\t\treturn function() {\n\t\t\treturn this.each(function() {\n\t\t\t\tif ( !this.id ) {\n\t\t\t\t\tthis.id = \"ui-id-\" + ( ++uuid );\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t})(),\n\n\tremoveUniqueId: function() {\n\t\treturn this.each(function() {\n\t\t\tif ( /^ui-id-\\d+$/.test( this.id ) ) {\n\t\t\t\t$( this ).removeAttr( \"id\" );\n\t\t\t}\n\t\t});\n\t}\n});\n\n// selectors\nfunction focusable( element, isTabIndexNotNaN ) {\n\tvar map, mapName, img,\n\t\tnodeName = element.nodeName.toLowerCase();\n\tif ( \"area\" === nodeName ) {\n\t\tmap = element.parentNode;\n\t\tmapName = map.name;\n\t\tif ( !element.href || !mapName || map.nodeName.toLowerCase() !== \"map\" ) {\n\t\t\treturn false;\n\t\t}\n\t\timg = $( \"img[usemap='#\" + mapName + \"']\" )[ 0 ];\n\t\treturn !!img && visible( img );\n\t}\n\treturn ( /^(input|select|textarea|button|object)$/.test( nodeName ) ?\n\t\t!element.disabled :\n\t\t\"a\" === nodeName ?\n\t\t\telement.href || isTabIndexNotNaN :\n\t\t\tisTabIndexNotNaN) &&\n\t\t// the element and all of its ancestors must be visible\n\t\tvisible( element );\n}\n\nfunction visible( element ) {\n\treturn $.expr.filters.visible( element ) &&\n\t\t!$( element ).parents().addBack().filter(function() {\n\t\t\treturn $.css( this, \"visibility\" ) === \"hidden\";\n\t\t}).length;\n}\n\n$.extend( $.expr[ \":\" ], {\n\tdata: $.expr.createPseudo ?\n\t\t$.expr.createPseudo(function( dataName ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn !!$.data( elem, dataName );\n\t\t\t};\n\t\t}) :\n\t\t// support: jQuery <1.8\n\t\tfunction( elem, i, match ) {\n\t\t\treturn !!$.data( elem, match[ 3 ] );\n\t\t},\n\n\tfocusable: function( element ) {\n\t\treturn focusable( element, !isNaN( $.attr( element, \"tabindex\" ) ) );\n\t},\n\n\ttabbable: function( element ) {\n\t\tvar tabIndex = $.attr( element, \"tabindex\" ),\n\t\t\tisTabIndexNaN = isNaN( tabIndex );\n\t\treturn ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );\n\t}\n});\n\n// support: jQuery <1.8\nif ( !$( \"<a>\" ).outerWidth( 1 ).jquery ) {\n\t$.each( [ \"Width\", \"Height\" ], function( i, name ) {\n\t\tvar side = name === \"Width\" ? [ \"Left\", \"Right\" ] : [ \"Top\", \"Bottom\" ],\n\t\t\ttype = name.toLowerCase(),\n\t\t\torig = {\n\t\t\t\tinnerWidth: $.fn.innerWidth,\n\t\t\t\tinnerHeight: $.fn.innerHeight,\n\t\t\t\touterWidth: $.fn.outerWidth,\n\t\t\t\touterHeight: $.fn.outerHeight\n\t\t\t};\n\n\t\tfunction reduce( elem, size, border, margin ) {\n\t\t\t$.each( side, function() {\n\t\t\t\tsize -= parseFloat( $.css( elem, \"padding\" + this ) ) || 0;\n\t\t\t\tif ( border ) {\n\t\t\t\t\tsize -= parseFloat( $.css( elem, \"border\" + this + \"Width\" ) ) || 0;\n\t\t\t\t}\n\t\t\t\tif ( margin ) {\n\t\t\t\t\tsize -= parseFloat( $.css( elem, \"margin\" + this ) ) || 0;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn size;\n\t\t}\n\n\t\t$.fn[ \"inner\" + name ] = function( size ) {\n\t\t\tif ( size === undefined ) {\n\t\t\t\treturn orig[ \"inner\" + name ].call( this );\n\t\t\t}\n\n\t\t\treturn this.each(function() {\n\t\t\t\t$( this ).css( type, reduce( this, size ) + \"px\" );\n\t\t\t});\n\t\t};\n\n\t\t$.fn[ \"outer\" + name] = function( size, margin ) {\n\t\t\tif ( typeof size !== \"number\" ) {\n\t\t\t\treturn orig[ \"outer\" + name ].call( this, size );\n\t\t\t}\n\n\t\t\treturn this.each(function() {\n\t\t\t\t$( this).css( type, reduce( this, size, true, margin ) + \"px\" );\n\t\t\t});\n\t\t};\n\t});\n}\n\n// support: jQuery <1.8\nif ( !$.fn.addBack ) {\n\t$.fn.addBack = function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t};\n}\n\n// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)\nif ( $( \"<a>\" ).data( \"a-b\", \"a\" ).removeData( \"a-b\" ).data( \"a-b\" ) ) {\n\t$.fn.removeData = (function( removeData ) {\n\t\treturn function( key ) {\n\t\t\tif ( arguments.length ) {\n\t\t\t\treturn removeData.call( this, $.camelCase( key ) );\n\t\t\t} else {\n\t\t\t\treturn removeData.call( this );\n\t\t\t}\n\t\t};\n\t})( $.fn.removeData );\n}\n\n// deprecated\n$.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\n\n$.fn.extend({\n\tfocus: (function( orig ) {\n\t\treturn function( delay, fn ) {\n\t\t\treturn typeof delay === \"number\" ?\n\t\t\t\tthis.each(function() {\n\t\t\t\t\tvar elem = this;\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$( elem ).focus();\n\t\t\t\t\t\tif ( fn ) {\n\t\t\t\t\t\t\tfn.call( elem );\n\t\t\t\t\t\t}\n\t\t\t\t\t}, delay );\n\t\t\t\t}) :\n\t\t\t\torig.apply( this, arguments );\n\t\t};\n\t})( $.fn.focus ),\n\n\tdisableSelection: (function() {\n\t\tvar eventType = \"onselectstart\" in document.createElement( \"div\" ) ?\n\t\t\t\"selectstart\" :\n\t\t\t\"mousedown\";\n\n\t\treturn function() {\n\t\t\treturn this.bind( eventType + \".ui-disableSelection\", function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t\t};\n\t})(),\n\n\tenableSelection: function() {\n\t\treturn this.unbind( \".ui-disableSelection\" );\n\t},\n\n\tzIndex: function( zIndex ) {\n\t\tif ( zIndex !== undefined ) {\n\t\t\treturn this.css( \"zIndex\", zIndex );\n\t\t}\n\n\t\tif ( this.length ) {\n\t\t\tvar elem = $( this[ 0 ] ), position, value;\n\t\t\twhile ( elem.length && elem[ 0 ] !== document ) {\n\t\t\t\t// Ignore z-index if position is set to a value where z-index is ignored by the browser\n\t\t\t\t// This makes behavior of this function consistent across browsers\n\t\t\t\t// WebKit always returns auto if the element is positioned\n\t\t\t\tposition = elem.css( \"position\" );\n\t\t\t\tif ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\n\t\t\t\t\t// IE returns 0 when zIndex is not specified\n\t\t\t\t\t// other browsers return a string\n\t\t\t\t\t// we ignore the case of nested elements with an explicit value of 0\n\t\t\t\t\t// <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n\t\t\t\t\tvalue = parseInt( elem.css( \"zIndex\" ), 10 );\n\t\t\t\t\tif ( !isNaN( value ) && value !== 0 ) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telem = elem.parent();\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n});\n\n// $.ui.plugin is deprecated. Use $.widget() extensions instead.\n$.ui.plugin = {\n\tadd: function( module, option, set ) {\n\t\tvar i,\n\t\t\tproto = $.ui[ module ].prototype;\n\t\tfor ( i in set ) {\n\t\t\tproto.plugins[ i ] = proto.plugins[ i ] || [];\n\t\t\tproto.plugins[ i ].push( [ option, set[ i ] ] );\n\t\t}\n\t},\n\tcall: function( instance, name, args, allowDisconnected ) {\n\t\tvar i,\n\t\t\tset = instance.plugins[ name ];\n\n\t\tif ( !set ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( i = 0; i < set.length; i++ ) {\n\t\t\tif ( instance.options[ set[ i ][ 0 ] ] ) {\n\t\t\t\tset[ i ][ 1 ].apply( instance.element, args );\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n/*!\n * jQuery UI Widget 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\n\n\nvar widget_uuid = 0,\n\twidget_slice = Array.prototype.slice;\n\n$.cleanData = (function( orig ) {\n\treturn function( elems ) {\n\t\tvar events, elem, i;\n\t\tfor ( i = 0; (elem = elems[i]) != null; i++ ) {\n\t\t\ttry {\n\n\t\t\t\t// Only trigger remove when necessary to save time\n\t\t\t\tevents = $._data( elem, \"events\" );\n\t\t\t\tif ( events && events.remove ) {\n\t\t\t\t\t$( elem ).triggerHandler( \"remove\" );\n\t\t\t\t}\n\n\t\t\t// http://bugs.jquery.com/ticket/8235\n\t\t\t} catch ( e ) {}\n\t\t}\n\t\torig( elems );\n\t};\n})( $.cleanData );\n\n$.widget = function( name, base, prototype ) {\n\tvar fullName, existingConstructor, constructor, basePrototype,\n\t\t// proxiedPrototype allows the provided prototype to remain unmodified\n\t\t// so that it can be used as a mixin for multiple widgets (#8876)\n\t\tproxiedPrototype = {},\n\t\tnamespace = name.split( \".\" )[ 0 ];\n\n\tname = name.split( \".\" )[ 1 ];\n\tfullName = namespace + \"-\" + name;\n\n\tif ( !prototype ) {\n\t\tprototype = base;\n\t\tbase = $.Widget;\n\t}\n\n\t// create selector for plugin\n\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n\t\treturn !!$.data( elem, fullName );\n\t};\n\n\t$[ namespace ] = $[ namespace ] || {};\n\texistingConstructor = $[ namespace ][ name ];\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\n\t\t// allow instantiation without \"new\" keyword\n\t\tif ( !this._createWidget ) {\n\t\t\treturn new constructor( options, element );\n\t\t}\n\n\t\t// allow instantiation without initializing for simple inheritance\n\t\t// must use \"new\" keyword (the code above always passes args)\n\t\tif ( arguments.length ) {\n\t\t\tthis._createWidget( options, element );\n\t\t}\n\t};\n\t// extend with the existing constructor to carry over any static properties\n\t$.extend( constructor, existingConstructor, {\n\t\tversion: prototype.version,\n\t\t// copy the object used to create the prototype in case we need to\n\t\t// redefine the widget later\n\t\t_proto: $.extend( {}, prototype ),\n\t\t// track widgets that inherit from this widget in case this widget is\n\t\t// redefined after a widget inherits from it\n\t\t_childConstructors: []\n\t});\n\n\tbasePrototype = new base();\n\t// we need to make the options hash a property directly on the new instance\n\t// otherwise we'll modify the options hash on the prototype that we're\n\t// inheriting from\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\n\t$.each( prototype, function( prop, value ) {\n\t\tif ( !$.isFunction( value ) ) {\n\t\t\tproxiedPrototype[ prop ] = value;\n\t\t\treturn;\n\t\t}\n\t\tproxiedPrototype[ prop ] = (function() {\n\t\t\tvar _super = function() {\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\n\t\t\t\t},\n\t\t\t\t_superApply = function( args ) {\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, args );\n\t\t\t\t};\n\t\t\treturn function() {\n\t\t\t\tvar __super = this._super,\n\t\t\t\t\t__superApply = this._superApply,\n\t\t\t\t\treturnValue;\n\n\t\t\t\tthis._super = _super;\n\t\t\t\tthis._superApply = _superApply;\n\n\t\t\t\treturnValue = value.apply( this, arguments );\n\n\t\t\t\tthis._super = __super;\n\t\t\t\tthis._superApply = __superApply;\n\n\t\t\t\treturn returnValue;\n\t\t\t};\n\t\t})();\n\t});\n\tconstructor.prototype = $.widget.extend( basePrototype, {\n\t\t// TODO: remove support for widgetEventPrefix\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\n\t\t// don't prefix for widgets that aren't DOM-based\n\t\twidgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name\n\t}, proxiedPrototype, {\n\t\tconstructor: constructor,\n\t\tnamespace: namespace,\n\t\twidgetName: name,\n\t\twidgetFullName: fullName\n\t});\n\n\t// If this widget is being redefined then we need to find all widgets that\n\t// are inheriting from it and redefine all of them so that they inherit from\n\t// the new version of this widget. We're essentially trying to replace one\n\t// level in the prototype chain.\n\tif ( existingConstructor ) {\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\n\t\t\tvar childPrototype = child.prototype;\n\n\t\t\t// redefine the child widget using the same prototype that was\n\t\t\t// originally used, but inherit from the new version of the base\n\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor, child._proto );\n\t\t});\n\t\t// remove the list of existing child constructors from the old constructor\n\t\t// so the old child constructors can be garbage collected\n\t\tdelete existingConstructor._childConstructors;\n\t} else {\n\t\tbase._childConstructors.push( constructor );\n\t}\n\n\t$.widget.bridge( name, constructor );\n\n\treturn constructor;\n};\n\n$.widget.extend = function( target ) {\n\tvar input = widget_slice.call( arguments, 1 ),\n\t\tinputIndex = 0,\n\t\tinputLength = input.length,\n\t\tkey,\n\t\tvalue;\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\n\t\tfor ( key in input[ inputIndex ] ) {\n\t\t\tvalue = input[ inputIndex ][ key ];\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n\t\t\t\t// Clone objects\n\t\t\t\tif ( $.isPlainObject( value ) ) {\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\n\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\n\t\t\t\t\t\t$.widget.extend( {}, value );\n\t\t\t\t// Copy everything else by reference\n\t\t\t\t} else {\n\t\t\t\t\ttarget[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target;\n};\n\n$.widget.bridge = function( name, object ) {\n\tvar fullName = object.prototype.widgetFullName || name;\n\t$.fn[ name ] = function( options ) {\n\t\tvar isMethodCall = typeof options === \"string\",\n\t\t\targs = widget_slice.call( arguments, 1 ),\n\t\t\treturnValue = this;\n\n\t\tif ( isMethodCall ) {\n\t\t\tthis.each(function() {\n\t\t\t\tvar methodValue,\n\t\t\t\t\tinstance = $.data( this, fullName );\n\t\t\t\tif ( options === \"instance\" ) {\n\t\t\t\t\treturnValue = instance;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif ( !instance ) {\n\t\t\t\t\treturn $.error( \"cannot call methods on \" + name + \" prior to initialization; \" +\n\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\n\t\t\t\t}\n\t\t\t\tif ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === \"_\" ) {\n\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name + \" widget instance\" );\n\t\t\t\t}\n\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\n\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\n\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\n\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\n\t\t\t\t\t\tmethodValue;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\n\t\t\t// Allow multiple hashes to be passed on init\n\t\t\tif ( args.length ) {\n\t\t\t\toptions = $.widget.extend.apply( null, [ options ].concat(args) );\n\t\t\t}\n\n\t\t\tthis.each(function() {\n\t\t\t\tvar instance = $.data( this, fullName );\n\t\t\t\tif ( instance ) {\n\t\t\t\t\tinstance.option( options || {} );\n\t\t\t\t\tif ( instance._init ) {\n\t\t\t\t\t\tinstance._init();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn returnValue;\n\t};\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n\twidgetName: \"widget\",\n\twidgetEventPrefix: \"\",\n\tdefaultElement: \"<div>\",\n\toptions: {\n\t\tdisabled: false,\n\n\t\t// callbacks\n\t\tcreate: null\n\t},\n\t_createWidget: function( options, element ) {\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\n\t\tthis.element = $( element );\n\t\tthis.uuid = widget_uuid++;\n\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\n\n\t\tthis.bindings = $();\n\t\tthis.hoverable = $();\n\t\tthis.focusable = $();\n\n\t\tif ( element !== this ) {\n\t\t\t$.data( element, this.widgetFullName, this );\n\t\t\tthis._on( true, this.element, {\n\t\t\t\tremove: function( event ) {\n\t\t\t\t\tif ( event.target === element ) {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.document = $( element.style ?\n\t\t\t\t// element within the document\n\t\t\t\telement.ownerDocument :\n\t\t\t\t// element is window or document\n\t\t\t\telement.document || element );\n\t\t\tthis.window = $( this.document[0].defaultView || this.document[0].parentWindow );\n\t\t}\n\n\t\tthis.options = $.widget.extend( {},\n\t\t\tthis.options,\n\t\t\tthis._getCreateOptions(),\n\t\t\toptions );\n\n\t\tthis._create();\n\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\n\t\tthis._init();\n\t},\n\t_getCreateOptions: $.noop,\n\t_getCreateEventData: $.noop,\n\t_create: $.noop,\n\t_init: $.noop,\n\n\tdestroy: function() {\n\t\tthis._destroy();\n\t\t// we can probably remove the unbind calls in 2.0\n\t\t// all event bindings should go through this._on()\n\t\tthis.element\n\t\t\t.unbind( this.eventNamespace )\n\t\t\t.removeData( this.widgetFullName )\n\t\t\t// support: jquery <1.6.3\n\t\t\t// http://bugs.jquery.com/ticket/9413\n\t\t\t.removeData( $.camelCase( this.widgetFullName ) );\n\t\tthis.widget()\n\t\t\t.unbind( this.eventNamespace )\n\t\t\t.removeAttr( \"aria-disabled\" )\n\t\t\t.removeClass(\n\t\t\t\tthis.widgetFullName + \"-disabled \" +\n\t\t\t\t\"ui-state-disabled\" );\n\n\t\t// clean up events and states\n\t\tthis.bindings.unbind( this.eventNamespace );\n\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\n\t\tthis.focusable.removeClass( \"ui-state-focus\" );\n\t},\n\t_destroy: $.noop,\n\n\twidget: function() {\n\t\treturn this.element;\n\t},\n\n\toption: function( key, value ) {\n\t\tvar options = key,\n\t\t\tparts,\n\t\t\tcurOption,\n\t\t\ti;\n\n\t\tif ( arguments.length === 0 ) {\n\t\t\t// don't return a reference to the internal hash\n\t\t\treturn $.widget.extend( {}, this.options );\n\t\t}\n\n\t\tif ( typeof key === \"string\" ) {\n\t\t\t// handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n\t\t\toptions = {};\n\t\t\tparts = key.split( \".\" );\n\t\t\tkey = parts.shift();\n\t\t\tif ( parts.length ) {\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\n\t\t\t\t}\n\t\t\t\tkey = parts.pop();\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\n\t\t\t\t}\n\t\t\t\tcurOption[ key ] = value;\n\t\t\t} else {\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\n\t\t\t\t}\n\t\t\t\toptions[ key ] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis._setOptions( options );\n\n\t\treturn this;\n\t},\n\t_setOptions: function( options ) {\n\t\tvar key;\n\n\t\tfor ( key in options ) {\n\t\t\tthis._setOption( key, options[ key ] );\n\t\t}\n\n\t\treturn this;\n\t},\n\t_setOption: function( key, value ) {\n\t\tthis.options[ key ] = value;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.widget()\n\t\t\t\t.toggleClass( this.widgetFullName + \"-disabled\", !!value );\n\n\t\t\t// If the widget is becoming disabled, then nothing is interactive\n\t\t\tif ( value ) {\n\t\t\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\n\t\t\t\tthis.focusable.removeClass( \"ui-state-focus\" );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tenable: function() {\n\t\treturn this._setOptions({ disabled: false });\n\t},\n\tdisable: function() {\n\t\treturn this._setOptions({ disabled: true });\n\t},\n\n\t_on: function( suppressDisabledCheck, element, handlers ) {\n\t\tvar delegateElement,\n\t\t\tinstance = this;\n\n\t\t// no suppressDisabledCheck flag, shuffle arguments\n\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\n\t\t\thandlers = element;\n\t\t\telement = suppressDisabledCheck;\n\t\t\tsuppressDisabledCheck = false;\n\t\t}\n\n\t\t// no element argument, shuffle and use this.element\n\t\tif ( !handlers ) {\n\t\t\thandlers = element;\n\t\t\telement = this.element;\n\t\t\tdelegateElement = this.widget();\n\t\t} else {\n\t\t\telement = delegateElement = $( element );\n\t\t\tthis.bindings = this.bindings.add( element );\n\t\t}\n\n\t\t$.each( handlers, function( event, handler ) {\n\t\t\tfunction handlerProxy() {\n\t\t\t\t// allow widgets to customize the disabled handling\n\t\t\t\t// - disabled as an array instead of boolean\n\t\t\t\t// - disabled class as method for disabling individual parts\n\t\t\t\tif ( !suppressDisabledCheck &&\n\t\t\t\t\t\t( instance.options.disabled === true ||\n\t\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t\t.apply( instance, arguments );\n\t\t\t}\n\n\t\t\t// copy the guid so direct unbinding works\n\t\t\tif ( typeof handler !== \"string\" ) {\n\t\t\t\thandlerProxy.guid = handler.guid =\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\n\t\t\t}\n\n\t\t\tvar match = event.match( /^([\\w:-]*)\\s*(.*)$/ ),\n\t\t\t\teventName = match[1] + instance.eventNamespace,\n\t\t\t\tselector = match[2];\n\t\t\tif ( selector ) {\n\t\t\t\tdelegateElement.delegate( selector, eventName, handlerProxy );\n\t\t\t} else {\n\t\t\t\telement.bind( eventName, handlerProxy );\n\t\t\t}\n\t\t});\n\t},\n\n\t_off: function( element, eventName ) {\n\t\teventName = (eventName || \"\").split( \" \" ).join( this.eventNamespace + \" \" ) +\n\t\t\tthis.eventNamespace;\n\t\telement.unbind( eventName ).undelegate( eventName );\n\n\t\t// Clear the stack to avoid memory leaks (#10056)\n\t\tthis.bindings = $( this.bindings.not( element ).get() );\n\t\tthis.focusable = $( this.focusable.not( element ).get() );\n\t\tthis.hoverable = $( this.hoverable.not( element ).get() );\n\t},\n\n\t_delay: function( handler, delay ) {\n\t\tfunction handlerProxy() {\n\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t.apply( instance, arguments );\n\t\t}\n\t\tvar instance = this;\n\t\treturn setTimeout( handlerProxy, delay || 0 );\n\t},\n\n\t_hoverable: function( element ) {\n\t\tthis.hoverable = this.hoverable.add( element );\n\t\tthis._on( element, {\n\t\t\tmouseenter: function( event ) {\n\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-hover\" );\n\t\t\t},\n\t\t\tmouseleave: function( event ) {\n\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-hover\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_focusable: function( element ) {\n\t\tthis.focusable = this.focusable.add( element );\n\t\tthis._on( element, {\n\t\t\tfocusin: function( event ) {\n\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-focus\" );\n\t\t\t},\n\t\t\tfocusout: function( event ) {\n\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-focus\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_trigger: function( type, event, data ) {\n\t\tvar prop, orig,\n\t\t\tcallback = this.options[ type ];\n\n\t\tdata = data || {};\n\t\tevent = $.Event( event );\n\t\tevent.type = ( type === this.widgetEventPrefix ?\n\t\t\ttype :\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\n\t\t// the original event may come from any element\n\t\t// so we need to reset the target on the new event\n\t\tevent.target = this.element[ 0 ];\n\n\t\t// copy original event properties over to the new event\n\t\torig = event.originalEvent;\n\t\tif ( orig ) {\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tif ( !( prop in event ) ) {\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element.trigger( event, data );\n\t\treturn !( $.isFunction( callback ) &&\n\t\t\tcallback.apply( this.element[0], [ event ].concat( data ) ) === false ||\n\t\t\tevent.isDefaultPrevented() );\n\t}\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n\t\tif ( typeof options === \"string\" ) {\n\t\t\toptions = { effect: options };\n\t\t}\n\t\tvar hasOptions,\n\t\t\teffectName = !options ?\n\t\t\t\tmethod :\n\t\t\t\toptions === true || typeof options === \"number\" ?\n\t\t\t\t\tdefaultEffect :\n\t\t\t\t\toptions.effect || defaultEffect;\n\t\toptions = options || {};\n\t\tif ( typeof options === \"number\" ) {\n\t\t\toptions = { duration: options };\n\t\t}\n\t\thasOptions = !$.isEmptyObject( options );\n\t\toptions.complete = callback;\n\t\tif ( options.delay ) {\n\t\t\telement.delay( options.delay );\n\t\t}\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n\t\t\telement[ method ]( options );\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\n\t\t} else {\n\t\t\telement.queue(function( next ) {\n\t\t\t\t$( this )[ method ]();\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback.call( element[ 0 ] );\n\t\t\t\t}\n\t\t\t\tnext();\n\t\t\t});\n\t\t}\n\t};\n});\n\nvar widget = $.widget;\n\n\n/*!\n * jQuery UI Mouse 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/mouse/\n */\n\n\nvar mouseHandled = false;\n$( document ).mouseup( function() {\n\tmouseHandled = false;\n});\n\nvar mouse = $.widget(\"ui.mouse\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tcancel: \"input,textarea,button,select,option\",\n\t\tdistance: 1,\n\t\tdelay: 0\n\t},\n\t_mouseInit: function() {\n\t\tvar that = this;\n\n\t\tthis.element\n\t\t\t.bind(\"mousedown.\" + this.widgetName, function(event) {\n\t\t\t\treturn that._mouseDown(event);\n\t\t\t})\n\t\t\t.bind(\"click.\" + this.widgetName, function(event) {\n\t\t\t\tif (true === $.data(event.target, that.widgetName + \".preventClickEvent\")) {\n\t\t\t\t\t$.removeData(event.target, that.widgetName + \".preventClickEvent\");\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.started = false;\n\t},\n\n\t// TODO: make sure destroying one instance of mouse doesn't mess with\n\t// other instances of mouse\n\t_mouseDestroy: function() {\n\t\tthis.element.unbind(\".\" + this.widgetName);\n\t\tif ( this._mouseMoveDelegate ) {\n\t\t\tthis.document\n\t\t\t\t.unbind(\"mousemove.\" + this.widgetName, this._mouseMoveDelegate)\n\t\t\t\t.unbind(\"mouseup.\" + this.widgetName, this._mouseUpDelegate);\n\t\t}\n\t},\n\n\t_mouseDown: function(event) {\n\t\t// don't let more than one widget handle mouseStart\n\t\tif ( mouseHandled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._mouseMoved = false;\n\n\t\t// we may have missed mouseup (out of window)\n\t\t(this._mouseStarted && this._mouseUp(event));\n\n\t\tthis._mouseDownEvent = event;\n\n\t\tvar that = this,\n\t\t\tbtnIsLeft = (event.which === 1),\n\t\t\t// event.target.nodeName works around a bug in IE 8 with\n\t\t\t// disabled inputs (#7620)\n\t\t\telIsCancel = (typeof this.options.cancel === \"string\" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);\n\t\tif (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.mouseDelayMet = !this.options.delay;\n\t\tif (!this.mouseDelayMet) {\n\t\t\tthis._mouseDelayTimer = setTimeout(function() {\n\t\t\t\tthat.mouseDelayMet = true;\n\t\t\t}, this.options.delay);\n\t\t}\n\n\t\tif (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n\t\t\tthis._mouseStarted = (this._mouseStart(event) !== false);\n\t\t\tif (!this._mouseStarted) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Click event may never have fired (Gecko & Opera)\n\t\tif (true === $.data(event.target, this.widgetName + \".preventClickEvent\")) {\n\t\t\t$.removeData(event.target, this.widgetName + \".preventClickEvent\");\n\t\t}\n\n\t\t// these delegates are required to keep context\n\t\tthis._mouseMoveDelegate = function(event) {\n\t\t\treturn that._mouseMove(event);\n\t\t};\n\t\tthis._mouseUpDelegate = function(event) {\n\t\t\treturn that._mouseUp(event);\n\t\t};\n\n\t\tthis.document\n\t\t\t.bind( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.bind( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tevent.preventDefault();\n\n\t\tmouseHandled = true;\n\t\treturn true;\n\t},\n\n\t_mouseMove: function(event) {\n\t\t// Only check for mouseups outside the document if you've moved inside the document\n\t\t// at least once. This prevents the firing of mouseup in the case of IE<9, which will\n\t\t// fire a mousemove event if content is placed under the cursor. See #7778\n\t\t// Support: IE <9\n\t\tif ( this._mouseMoved ) {\n\t\t\t// IE mouseup check - mouseup happened when mouse was out of window\n\t\t\tif ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {\n\t\t\t\treturn this._mouseUp(event);\n\n\t\t\t// Iframe mouseup check - mouseup occurred in another document\n\t\t\t} else if ( !event.which ) {\n\t\t\t\treturn this._mouseUp( event );\n\t\t\t}\n\t\t}\n\n\t\tif ( event.which || event.button ) {\n\t\t\tthis._mouseMoved = true;\n\t\t}\n\n\t\tif (this._mouseStarted) {\n\t\t\tthis._mouseDrag(event);\n\t\t\treturn event.preventDefault();\n\t\t}\n\n\t\tif (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n\t\t\tthis._mouseStarted =\n\t\t\t\t(this._mouseStart(this._mouseDownEvent, event) !== false);\n\t\t\t(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));\n\t\t}\n\n\t\treturn !this._mouseStarted;\n\t},\n\n\t_mouseUp: function(event) {\n\t\tthis.document\n\t\t\t.unbind( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.unbind( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tif (this._mouseStarted) {\n\t\t\tthis._mouseStarted = false;\n\n\t\t\tif (event.target === this._mouseDownEvent.target) {\n\t\t\t\t$.data(event.target, this.widgetName + \".preventClickEvent\", true);\n\t\t\t}\n\n\t\t\tthis._mouseStop(event);\n\t\t}\n\n\t\tmouseHandled = false;\n\t\treturn false;\n\t},\n\n\t_mouseDistanceMet: function(event) {\n\t\treturn (Math.max(\n\t\t\t\tMath.abs(this._mouseDownEvent.pageX - event.pageX),\n\t\t\t\tMath.abs(this._mouseDownEvent.pageY - event.pageY)\n\t\t\t) >= this.options.distance\n\t\t);\n\t},\n\n\t_mouseDelayMet: function(/* event */) {\n\t\treturn this.mouseDelayMet;\n\t},\n\n\t// These are placeholder methods, to be overriden by extending plugin\n\t_mouseStart: function(/* event */) {},\n\t_mouseDrag: function(/* event */) {},\n\t_mouseStop: function(/* event */) {},\n\t_mouseCapture: function(/* event */) { return true; }\n});\n\n\n/*!\n * jQuery UI Position 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/position/\n */\n\n(function() {\n\n$.ui = $.ui || {};\n\nvar cachedScrollbarWidth, supportsOffsetFractions,\n\tmax = Math.max,\n\tabs = Math.abs,\n\tround = Math.round,\n\trhorizontal = /left|center|right/,\n\trvertical = /top|center|bottom/,\n\troffset = /[\\+\\-]\\d+(\\.[\\d]+)?%?/,\n\trposition = /^\\w+/,\n\trpercent = /%$/,\n\t_position = $.fn.position;\n\nfunction getOffsets( offsets, width, height ) {\n\treturn [\n\t\tparseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),\n\t\tparseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )\n\t];\n}\n\nfunction parseCss( element, property ) {\n\treturn parseInt( $.css( element, property ), 10 ) || 0;\n}\n\nfunction getDimensions( elem ) {\n\tvar raw = elem[0];\n\tif ( raw.nodeType === 9 ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: 0, left: 0 }\n\t\t};\n\t}\n\tif ( $.isWindow( raw ) ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: elem.scrollTop(), left: elem.scrollLeft() }\n\t\t};\n\t}\n\tif ( raw.preventDefault ) {\n\t\treturn {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\toffset: { top: raw.pageY, left: raw.pageX }\n\t\t};\n\t}\n\treturn {\n\t\twidth: elem.outerWidth(),\n\t\theight: elem.outerHeight(),\n\t\toffset: elem.offset()\n\t};\n}\n\n$.position = {\n\tscrollbarWidth: function() {\n\t\tif ( cachedScrollbarWidth !== undefined ) {\n\t\t\treturn cachedScrollbarWidth;\n\t\t}\n\t\tvar w1, w2,\n\t\t\tdiv = $( \"<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>\" ),\n\t\t\tinnerDiv = div.children()[0];\n\n\t\t$( \"body\" ).append( div );\n\t\tw1 = innerDiv.offsetWidth;\n\t\tdiv.css( \"overflow\", \"scroll\" );\n\n\t\tw2 = innerDiv.offsetWidth;\n\n\t\tif ( w1 === w2 ) {\n\t\t\tw2 = div[0].clientWidth;\n\t\t}\n\n\t\tdiv.remove();\n\n\t\treturn (cachedScrollbarWidth = w1 - w2);\n\t},\n\tgetScrollInfo: function( within ) {\n\t\tvar overflowX = within.isWindow || within.isDocument ? \"\" :\n\t\t\t\twithin.element.css( \"overflow-x\" ),\n\t\t\toverflowY = within.isWindow || within.isDocument ? \"\" :\n\t\t\t\twithin.element.css( \"overflow-y\" ),\n\t\t\thasOverflowX = overflowX === \"scroll\" ||\n\t\t\t\t( overflowX === \"auto\" && within.width < within.element[0].scrollWidth ),\n\t\t\thasOverflowY = overflowY === \"scroll\" ||\n\t\t\t\t( overflowY === \"auto\" && within.height < within.element[0].scrollHeight );\n\t\treturn {\n\t\t\twidth: hasOverflowY ? $.position.scrollbarWidth() : 0,\n\t\t\theight: hasOverflowX ? $.position.scrollbarWidth() : 0\n\t\t};\n\t},\n\tgetWithinInfo: function( element ) {\n\t\tvar withinElement = $( element || window ),\n\t\t\tisWindow = $.isWindow( withinElement[0] ),\n\t\t\tisDocument = !!withinElement[ 0 ] && withinElement[ 0 ].nodeType === 9;\n\t\treturn {\n\t\t\telement: withinElement,\n\t\t\tisWindow: isWindow,\n\t\t\tisDocument: isDocument,\n\t\t\toffset: withinElement.offset() || { left: 0, top: 0 },\n\t\t\tscrollLeft: withinElement.scrollLeft(),\n\t\t\tscrollTop: withinElement.scrollTop(),\n\n\t\t\t// support: jQuery 1.6.x\n\t\t\t// jQuery 1.6 doesn't support .outerWidth/Height() on documents or windows\n\t\t\twidth: isWindow || isDocument ? withinElement.width() : withinElement.outerWidth(),\n\t\t\theight: isWindow || isDocument ? withinElement.height() : withinElement.outerHeight()\n\t\t};\n\t}\n};\n\n$.fn.position = function( options ) {\n\tif ( !options || !options.of ) {\n\t\treturn _position.apply( this, arguments );\n\t}\n\n\t// make a copy, we don't want to modify arguments\n\toptions = $.extend( {}, options );\n\n\tvar atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,\n\t\ttarget = $( options.of ),\n\t\twithin = $.position.getWithinInfo( options.within ),\n\t\tscrollInfo = $.position.getScrollInfo( within ),\n\t\tcollision = ( options.collision || \"flip\" ).split( \" \" ),\n\t\toffsets = {};\n\n\tdimensions = getDimensions( target );\n\tif ( target[0].preventDefault ) {\n\t\t// force left top to allow flipping\n\t\toptions.at = \"left top\";\n\t}\n\ttargetWidth = dimensions.width;\n\ttargetHeight = dimensions.height;\n\ttargetOffset = dimensions.offset;\n\t// clone to reuse original targetOffset later\n\tbasePosition = $.extend( {}, targetOffset );\n\n\t// force my and at to have valid horizontal and vertical positions\n\t// if a value is missing or invalid, it will be converted to center\n\t$.each( [ \"my\", \"at\" ], function() {\n\t\tvar pos = ( options[ this ] || \"\" ).split( \" \" ),\n\t\t\thorizontalOffset,\n\t\t\tverticalOffset;\n\n\t\tif ( pos.length === 1) {\n\t\t\tpos = rhorizontal.test( pos[ 0 ] ) ?\n\t\t\t\tpos.concat( [ \"center\" ] ) :\n\t\t\t\trvertical.test( pos[ 0 ] ) ?\n\t\t\t\t\t[ \"center\" ].concat( pos ) :\n\t\t\t\t\t[ \"center\", \"center\" ];\n\t\t}\n\t\tpos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : \"center\";\n\t\tpos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : \"center\";\n\n\t\t// calculate offsets\n\t\thorizontalOffset = roffset.exec( pos[ 0 ] );\n\t\tverticalOffset = roffset.exec( pos[ 1 ] );\n\t\toffsets[ this ] = [\n\t\t\thorizontalOffset ? horizontalOffset[ 0 ] : 0,\n\t\t\tverticalOffset ? verticalOffset[ 0 ] : 0\n\t\t];\n\n\t\t// reduce to just the positions without the offsets\n\t\toptions[ this ] = [\n\t\t\trposition.exec( pos[ 0 ] )[ 0 ],\n\t\t\trposition.exec( pos[ 1 ] )[ 0 ]\n\t\t];\n\t});\n\n\t// normalize collision option\n\tif ( collision.length === 1 ) {\n\t\tcollision[ 1 ] = collision[ 0 ];\n\t}\n\n\tif ( options.at[ 0 ] === \"right\" ) {\n\t\tbasePosition.left += targetWidth;\n\t} else if ( options.at[ 0 ] === \"center\" ) {\n\t\tbasePosition.left += targetWidth / 2;\n\t}\n\n\tif ( options.at[ 1 ] === \"bottom\" ) {\n\t\tbasePosition.top += targetHeight;\n\t} else if ( options.at[ 1 ] === \"center\" ) {\n\t\tbasePosition.top += targetHeight / 2;\n\t}\n\n\tatOffset = getOffsets( offsets.at, targetWidth, targetHeight );\n\tbasePosition.left += atOffset[ 0 ];\n\tbasePosition.top += atOffset[ 1 ];\n\n\treturn this.each(function() {\n\t\tvar collisionPosition, using,\n\t\t\telem = $( this ),\n\t\t\telemWidth = elem.outerWidth(),\n\t\t\telemHeight = elem.outerHeight(),\n\t\t\tmarginLeft = parseCss( this, \"marginLeft\" ),\n\t\t\tmarginTop = parseCss( this, \"marginTop\" ),\n\t\t\tcollisionWidth = elemWidth + marginLeft + parseCss( this, \"marginRight\" ) + scrollInfo.width,\n\t\t\tcollisionHeight = elemHeight + marginTop + parseCss( this, \"marginBottom\" ) + scrollInfo.height,\n\t\t\tposition = $.extend( {}, basePosition ),\n\t\t\tmyOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );\n\n\t\tif ( options.my[ 0 ] === \"right\" ) {\n\t\t\tposition.left -= elemWidth;\n\t\t} else if ( options.my[ 0 ] === \"center\" ) {\n\t\t\tposition.left -= elemWidth / 2;\n\t\t}\n\n\t\tif ( options.my[ 1 ] === \"bottom\" ) {\n\t\t\tposition.top -= elemHeight;\n\t\t} else if ( options.my[ 1 ] === \"center\" ) {\n\t\t\tposition.top -= elemHeight / 2;\n\t\t}\n\n\t\tposition.left += myOffset[ 0 ];\n\t\tposition.top += myOffset[ 1 ];\n\n\t\t// if the browser doesn't support fractions, then round for consistent results\n\t\tif ( !supportsOffsetFractions ) {\n\t\t\tposition.left = round( position.left );\n\t\t\tposition.top = round( position.top );\n\t\t}\n\n\t\tcollisionPosition = {\n\t\t\tmarginLeft: marginLeft,\n\t\t\tmarginTop: marginTop\n\t\t};\n\n\t\t$.each( [ \"left\", \"top\" ], function( i, dir ) {\n\t\t\tif ( $.ui.position[ collision[ i ] ] ) {\n\t\t\t\t$.ui.position[ collision[ i ] ][ dir ]( position, {\n\t\t\t\t\ttargetWidth: targetWidth,\n\t\t\t\t\ttargetHeight: targetHeight,\n\t\t\t\t\telemWidth: elemWidth,\n\t\t\t\t\telemHeight: elemHeight,\n\t\t\t\t\tcollisionPosition: collisionPosition,\n\t\t\t\t\tcollisionWidth: collisionWidth,\n\t\t\t\t\tcollisionHeight: collisionHeight,\n\t\t\t\t\toffset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],\n\t\t\t\t\tmy: options.my,\n\t\t\t\t\tat: options.at,\n\t\t\t\t\twithin: within,\n\t\t\t\t\telem: elem\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif ( options.using ) {\n\t\t\t// adds feedback as second argument to using callback, if present\n\t\t\tusing = function( props ) {\n\t\t\t\tvar left = targetOffset.left - position.left,\n\t\t\t\t\tright = left + targetWidth - elemWidth,\n\t\t\t\t\ttop = targetOffset.top - position.top,\n\t\t\t\t\tbottom = top + targetHeight - elemHeight,\n\t\t\t\t\tfeedback = {\n\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\telement: target,\n\t\t\t\t\t\t\tleft: targetOffset.left,\n\t\t\t\t\t\t\ttop: targetOffset.top,\n\t\t\t\t\t\t\twidth: targetWidth,\n\t\t\t\t\t\t\theight: targetHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\telement: {\n\t\t\t\t\t\t\telement: elem,\n\t\t\t\t\t\t\tleft: position.left,\n\t\t\t\t\t\t\ttop: position.top,\n\t\t\t\t\t\t\twidth: elemWidth,\n\t\t\t\t\t\t\theight: elemHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\thorizontal: right < 0 ? \"left\" : left > 0 ? \"right\" : \"center\",\n\t\t\t\t\t\tvertical: bottom < 0 ? \"top\" : top > 0 ? \"bottom\" : \"middle\"\n\t\t\t\t\t};\n\t\t\t\tif ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {\n\t\t\t\t\tfeedback.horizontal = \"center\";\n\t\t\t\t}\n\t\t\t\tif ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {\n\t\t\t\t\tfeedback.vertical = \"middle\";\n\t\t\t\t}\n\t\t\t\tif ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {\n\t\t\t\t\tfeedback.important = \"horizontal\";\n\t\t\t\t} else {\n\t\t\t\t\tfeedback.important = \"vertical\";\n\t\t\t\t}\n\t\t\t\toptions.using.call( this, props, feedback );\n\t\t\t};\n\t\t}\n\n\t\telem.offset( $.extend( position, { using: using } ) );\n\t});\n};\n\n$.ui.position = {\n\tfit: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\touterWidth = within.width,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = withinOffset - collisionPosLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,\n\t\t\t\tnewOverRight;\n\n\t\t\t// element is wider than within\n\t\t\tif ( data.collisionWidth > outerWidth ) {\n\t\t\t\t// element is initially over the left side of within\n\t\t\t\tif ( overLeft > 0 && overRight <= 0 ) {\n\t\t\t\t\tnewOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;\n\t\t\t\t\tposition.left += overLeft - newOverRight;\n\t\t\t\t// element is initially over right side of within\n\t\t\t\t} else if ( overRight > 0 && overLeft <= 0 ) {\n\t\t\t\t\tposition.left = withinOffset;\n\t\t\t\t// element is initially over both left and right sides of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overLeft > overRight ) {\n\t\t\t\t\t\tposition.left = withinOffset + outerWidth - data.collisionWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.left = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t// too far left -> align with left edge\n\t\t\t} else if ( overLeft > 0 ) {\n\t\t\t\tposition.left += overLeft;\n\t\t\t// too far right -> align with right edge\n\t\t\t} else if ( overRight > 0 ) {\n\t\t\t\tposition.left -= overRight;\n\t\t\t// adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.left = max( position.left - collisionPosLeft, position.left );\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\touterHeight = data.within.height,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = withinOffset - collisionPosTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,\n\t\t\t\tnewOverBottom;\n\n\t\t\t// element is taller than within\n\t\t\tif ( data.collisionHeight > outerHeight ) {\n\t\t\t\t// element is initially over the top of within\n\t\t\t\tif ( overTop > 0 && overBottom <= 0 ) {\n\t\t\t\t\tnewOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;\n\t\t\t\t\tposition.top += overTop - newOverBottom;\n\t\t\t\t// element is initially over bottom of within\n\t\t\t\t} else if ( overBottom > 0 && overTop <= 0 ) {\n\t\t\t\t\tposition.top = withinOffset;\n\t\t\t\t// element is initially over both top and bottom of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overTop > overBottom ) {\n\t\t\t\t\t\tposition.top = withinOffset + outerHeight - data.collisionHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.top = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t// too far up -> align with top\n\t\t\t} else if ( overTop > 0 ) {\n\t\t\t\tposition.top += overTop;\n\t\t\t// too far down -> align with bottom edge\n\t\t\t} else if ( overBottom > 0 ) {\n\t\t\t\tposition.top -= overBottom;\n\t\t\t// adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.top = max( position.top - collisionPosTop, position.top );\n\t\t\t}\n\t\t}\n\t},\n\tflip: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.left + within.scrollLeft,\n\t\t\t\touterWidth = within.width,\n\t\t\t\toffsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = collisionPosLeft - offsetLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,\n\t\t\t\tmyOffset = data.my[ 0 ] === \"left\" ?\n\t\t\t\t\t-data.elemWidth :\n\t\t\t\t\tdata.my[ 0 ] === \"right\" ?\n\t\t\t\t\t\tdata.elemWidth :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 0 ] === \"left\" ?\n\t\t\t\t\tdata.targetWidth :\n\t\t\t\t\tdata.at[ 0 ] === \"right\" ?\n\t\t\t\t\t\t-data.targetWidth :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 0 ],\n\t\t\t\tnewOverRight,\n\t\t\t\tnewOverLeft;\n\n\t\t\tif ( overLeft < 0 ) {\n\t\t\t\tnewOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;\n\t\t\t\tif ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t} else if ( overRight > 0 ) {\n\t\t\t\tnewOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;\n\t\t\t\tif ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.top + within.scrollTop,\n\t\t\t\touterHeight = within.height,\n\t\t\t\toffsetTop = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = collisionPosTop - offsetTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,\n\t\t\t\ttop = data.my[ 1 ] === \"top\",\n\t\t\t\tmyOffset = top ?\n\t\t\t\t\t-data.elemHeight :\n\t\t\t\t\tdata.my[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\tdata.elemHeight :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 1 ] === \"top\" ?\n\t\t\t\t\tdata.targetHeight :\n\t\t\t\t\tdata.at[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\t-data.targetHeight :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 1 ],\n\t\t\t\tnewOverTop,\n\t\t\t\tnewOverBottom;\n\t\t\tif ( overTop < 0 ) {\n\t\t\t\tnewOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;\n\t\t\t\tif ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t} else if ( overBottom > 0 ) {\n\t\t\t\tnewOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;\n\t\t\t\tif ( newOverTop > 0 || abs( newOverTop ) < overBottom ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tflipfit: {\n\t\tleft: function() {\n\t\t\t$.ui.position.flip.left.apply( this, arguments );\n\t\t\t$.ui.position.fit.left.apply( this, arguments );\n\t\t},\n\t\ttop: function() {\n\t\t\t$.ui.position.flip.top.apply( this, arguments );\n\t\t\t$.ui.position.fit.top.apply( this, arguments );\n\t\t}\n\t}\n};\n\n// fraction support test\n(function() {\n\tvar testElement, testElementParent, testElementStyle, offsetLeft, i,\n\t\tbody = document.getElementsByTagName( \"body\" )[ 0 ],\n\t\tdiv = document.createElement( \"div\" );\n\n\t//Create a \"fake body\" for testing based on method used in jQuery.support\n\ttestElement = document.createElement( body ? \"div\" : \"body\" );\n\ttestElementStyle = {\n\t\tvisibility: \"hidden\",\n\t\twidth: 0,\n\t\theight: 0,\n\t\tborder: 0,\n\t\tmargin: 0,\n\t\tbackground: \"none\"\n\t};\n\tif ( body ) {\n\t\t$.extend( testElementStyle, {\n\t\t\tposition: \"absolute\",\n\t\t\tleft: \"-1000px\",\n\t\t\ttop: \"-1000px\"\n\t\t});\n\t}\n\tfor ( i in testElementStyle ) {\n\t\ttestElement.style[ i ] = testElementStyle[ i ];\n\t}\n\ttestElement.appendChild( div );\n\ttestElementParent = body || document.documentElement;\n\ttestElementParent.insertBefore( testElement, testElementParent.firstChild );\n\n\tdiv.style.cssText = \"position: absolute; left: 10.7432222px;\";\n\n\toffsetLeft = $( div ).offset().left;\n\tsupportsOffsetFractions = offsetLeft > 10 && offsetLeft < 11;\n\n\ttestElement.innerHTML = \"\";\n\ttestElementParent.removeChild( testElement );\n})();\n\n})();\n\nvar position = $.ui.position;\n\n\n/*!\n * jQuery UI Accordion 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/accordion/\n */\n\n\nvar accordion = $.widget( \"ui.accordion\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tactive: 0,\n\t\tanimate: {},\n\t\tcollapsible: false,\n\t\tevent: \"click\",\n\t\theader: \"> li > :first-child,> :not(li):even\",\n\t\theightStyle: \"auto\",\n\t\ticons: {\n\t\t\tactiveHeader: \"ui-icon-triangle-1-s\",\n\t\t\theader: \"ui-icon-triangle-1-e\"\n\t\t},\n\n\t\t// callbacks\n\t\tactivate: null,\n\t\tbeforeActivate: null\n\t},\n\n\thideProps: {\n\t\tborderTopWidth: \"hide\",\n\t\tborderBottomWidth: \"hide\",\n\t\tpaddingTop: \"hide\",\n\t\tpaddingBottom: \"hide\",\n\t\theight: \"hide\"\n\t},\n\n\tshowProps: {\n\t\tborderTopWidth: \"show\",\n\t\tborderBottomWidth: \"show\",\n\t\tpaddingTop: \"show\",\n\t\tpaddingBottom: \"show\",\n\t\theight: \"show\"\n\t},\n\n\t_create: function() {\n\t\tvar options = this.options;\n\t\tthis.prevShow = this.prevHide = $();\n\t\tthis.element.addClass( \"ui-accordion ui-widget ui-helper-reset\" )\n\t\t\t// ARIA\n\t\t\t.attr( \"role\", \"tablist\" );\n\n\t\t// don't allow collapsible: false and active: false / null\n\t\tif ( !options.collapsible && (options.active === false || options.active == null) ) {\n\t\t\toptions.active = 0;\n\t\t}\n\n\t\tthis._processPanels();\n\t\t// handle negative values\n\t\tif ( options.active < 0 ) {\n\t\t\toptions.active += this.headers.length;\n\t\t}\n\t\tthis._refresh();\n\t},\n\n\t_getCreateEventData: function() {\n\t\treturn {\n\t\t\theader: this.active,\n\t\t\tpanel: !this.active.length ? $() : this.active.next()\n\t\t};\n\t},\n\n\t_createIcons: function() {\n\t\tvar icons = this.options.icons;\n\t\tif ( icons ) {\n\t\t\t$( \"<span>\" )\n\t\t\t\t.addClass( \"ui-accordion-header-icon ui-icon \" + icons.header )\n\t\t\t\t.prependTo( this.headers );\n\t\t\tthis.active.children( \".ui-accordion-header-icon\" )\n\t\t\t\t.removeClass( icons.header )\n\t\t\t\t.addClass( icons.activeHeader );\n\t\t\tthis.headers.addClass( \"ui-accordion-icons\" );\n\t\t}\n\t},\n\n\t_destroyIcons: function() {\n\t\tthis.headers\n\t\t\t.removeClass( \"ui-accordion-icons\" )\n\t\t\t.children( \".ui-accordion-header-icon\" )\n\t\t\t\t.remove();\n\t},\n\n\t_destroy: function() {\n\t\tvar contents;\n\n\t\t// clean up main element\n\t\tthis.element\n\t\t\t.removeClass( \"ui-accordion ui-widget ui-helper-reset\" )\n\t\t\t.removeAttr( \"role\" );\n\n\t\t// clean up headers\n\t\tthis.headers\n\t\t\t.removeClass( \"ui-accordion-header ui-accordion-header-active ui-state-default \" +\n\t\t\t\t\"ui-corner-all ui-state-active ui-state-disabled ui-corner-top\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-expanded\" )\n\t\t\t.removeAttr( \"aria-selected\" )\n\t\t\t.removeAttr( \"aria-controls\" )\n\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t.removeUniqueId();\n\n\t\tthis._destroyIcons();\n\n\t\t// clean up content panels\n\t\tcontents = this.headers.next()\n\t\t\t.removeClass( \"ui-helper-reset ui-widget-content ui-corner-bottom \" +\n\t\t\t\t\"ui-accordion-content ui-accordion-content-active ui-state-disabled\" )\n\t\t\t.css( \"display\", \"\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t.removeAttr( \"aria-labelledby\" )\n\t\t\t.removeUniqueId();\n\n\t\tif ( this.options.heightStyle !== \"content\" ) {\n\t\t\tcontents.css( \"height\", \"\" );\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"active\" ) {\n\t\t\t// _activate() will handle invalid values and update this.options\n\t\t\tthis._activate( value );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key === \"event\" ) {\n\t\t\tif ( this.options.event ) {\n\t\t\t\tthis._off( this.headers, this.options.event );\n\t\t\t}\n\t\t\tthis._setupEvents( value );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\t// setting collapsible: false while collapsed; open first panel\n\t\tif ( key === \"collapsible\" && !value && this.options.active === false ) {\n\t\t\tthis._activate( 0 );\n\t\t}\n\n\t\tif ( key === \"icons\" ) {\n\t\t\tthis._destroyIcons();\n\t\t\tif ( value ) {\n\t\t\t\tthis._createIcons();\n\t\t\t}\n\t\t}\n\n\t\t// #5332 - opacity doesn't cascade to positioned elements in IE\n\t\t// so we need to add the disabled class to the headers and panels\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.element\n\t\t\t\t.toggleClass( \"ui-state-disabled\", !!value )\n\t\t\t\t.attr( \"aria-disabled\", value );\n\t\t\tthis.headers.add( this.headers.next() )\n\t\t\t\t.toggleClass( \"ui-state-disabled\", !!value );\n\t\t}\n\t},\n\n\t_keydown: function( event ) {\n\t\tif ( event.altKey || event.ctrlKey ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar keyCode = $.ui.keyCode,\n\t\t\tlength = this.headers.length,\n\t\t\tcurrentIndex = this.headers.index( event.target ),\n\t\t\ttoFocus = false;\n\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase keyCode.RIGHT:\n\t\t\tcase keyCode.DOWN:\n\t\t\t\ttoFocus = this.headers[ ( currentIndex + 1 ) % length ];\n\t\t\t\tbreak;\n\t\t\tcase keyCode.LEFT:\n\t\t\tcase keyCode.UP:\n\t\t\t\ttoFocus = this.headers[ ( currentIndex - 1 + length ) % length ];\n\t\t\t\tbreak;\n\t\t\tcase keyCode.SPACE:\n\t\t\tcase keyCode.ENTER:\n\t\t\t\tthis._eventHandler( event );\n\t\t\t\tbreak;\n\t\t\tcase keyCode.HOME:\n\t\t\t\ttoFocus = this.headers[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase keyCode.END:\n\t\t\t\ttoFocus = this.headers[ length - 1 ];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( toFocus ) {\n\t\t\t$( event.target ).attr( \"tabIndex\", -1 );\n\t\t\t$( toFocus ).attr( \"tabIndex\", 0 );\n\t\t\ttoFocus.focus();\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\n\t_panelKeyDown: function( event ) {\n\t\tif ( event.keyCode === $.ui.keyCode.UP && event.ctrlKey ) {\n\t\t\t$( event.currentTarget ).prev().focus();\n\t\t}\n\t},\n\n\trefresh: function() {\n\t\tvar options = this.options;\n\t\tthis._processPanels();\n\n\t\t// was collapsed or no panel\n\t\tif ( ( options.active === false && options.collapsible === true ) || !this.headers.length ) {\n\t\t\toptions.active = false;\n\t\t\tthis.active = $();\n\t\t// active false only when collapsible is true\n\t\t} else if ( options.active === false ) {\n\t\t\tthis._activate( 0 );\n\t\t// was active, but active panel is gone\n\t\t} else if ( this.active.length && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {\n\t\t\t// all remaining panel are disabled\n\t\t\tif ( this.headers.length === this.headers.find(\".ui-state-disabled\").length ) {\n\t\t\t\toptions.active = false;\n\t\t\t\tthis.active = $();\n\t\t\t// activate previous panel\n\t\t\t} else {\n\t\t\t\tthis._activate( Math.max( 0, options.active - 1 ) );\n\t\t\t}\n\t\t// was active, active panel still exists\n\t\t} else {\n\t\t\t// make sure active index is correct\n\t\t\toptions.active = this.headers.index( this.active );\n\t\t}\n\n\t\tthis._destroyIcons();\n\n\t\tthis._refresh();\n\t},\n\n\t_processPanels: function() {\n\t\tvar prevHeaders = this.headers,\n\t\t\tprevPanels = this.panels;\n\n\t\tthis.headers = this.element.find( this.options.header )\n\t\t\t.addClass( \"ui-accordion-header ui-state-default ui-corner-all\" );\n\n\t\tthis.panels = this.headers.next()\n\t\t\t.addClass( \"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom\" )\n\t\t\t.filter( \":not(.ui-accordion-content-active)\" )\n\t\t\t.hide();\n\n\t\t// Avoid memory leaks (#10056)\n\t\tif ( prevPanels ) {\n\t\t\tthis._off( prevHeaders.not( this.headers ) );\n\t\t\tthis._off( prevPanels.not( this.panels ) );\n\t\t}\n\t},\n\n\t_refresh: function() {\n\t\tvar maxHeight,\n\t\t\toptions = this.options,\n\t\t\theightStyle = options.heightStyle,\n\t\t\tparent = this.element.parent();\n\n\t\tthis.active = this._findActive( options.active )\n\t\t\t.addClass( \"ui-accordion-header-active ui-state-active ui-corner-top\" )\n\t\t\t.removeClass( \"ui-corner-all\" );\n\t\tthis.active.next()\n\t\t\t.addClass( \"ui-accordion-content-active\" )\n\t\t\t.show();\n\n\t\tthis.headers\n\t\t\t.attr( \"role\", \"tab\" )\n\t\t\t.each(function() {\n\t\t\t\tvar header = $( this ),\n\t\t\t\t\theaderId = header.uniqueId().attr( \"id\" ),\n\t\t\t\t\tpanel = header.next(),\n\t\t\t\t\tpanelId = panel.uniqueId().attr( \"id\" );\n\t\t\t\theader.attr( \"aria-controls\", panelId );\n\t\t\t\tpanel.attr( \"aria-labelledby\", headerId );\n\t\t\t})\n\t\t\t.next()\n\t\t\t\t.attr( \"role\", \"tabpanel\" );\n\n\t\tthis.headers\n\t\t\t.not( this.active )\n\t\t\t.attr({\n\t\t\t\t\"aria-selected\": \"false\",\n\t\t\t\t\"aria-expanded\": \"false\",\n\t\t\t\ttabIndex: -1\n\t\t\t})\n\t\t\t.next()\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-hidden\": \"true\"\n\t\t\t\t})\n\t\t\t\t.hide();\n\n\t\t// make sure at least one header is in the tab order\n\t\tif ( !this.active.length ) {\n\t\t\tthis.headers.eq( 0 ).attr( \"tabIndex\", 0 );\n\t\t} else {\n\t\t\tthis.active.attr({\n\t\t\t\t\"aria-selected\": \"true\",\n\t\t\t\t\"aria-expanded\": \"true\",\n\t\t\t\ttabIndex: 0\n\t\t\t})\n\t\t\t.next()\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-hidden\": \"false\"\n\t\t\t\t});\n\t\t}\n\n\t\tthis._createIcons();\n\n\t\tthis._setupEvents( options.event );\n\n\t\tif ( heightStyle === \"fill\" ) {\n\t\t\tmaxHeight = parent.height();\n\t\t\tthis.element.siblings( \":visible\" ).each(function() {\n\t\t\t\tvar elem = $( this ),\n\t\t\t\t\tposition = elem.css( \"position\" );\n\n\t\t\t\tif ( position === \"absolute\" || position === \"fixed\" ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tmaxHeight -= elem.outerHeight( true );\n\t\t\t});\n\n\t\t\tthis.headers.each(function() {\n\t\t\t\tmaxHeight -= $( this ).outerHeight( true );\n\t\t\t});\n\n\t\t\tthis.headers.next()\n\t\t\t\t.each(function() {\n\t\t\t\t\t$( this ).height( Math.max( 0, maxHeight -\n\t\t\t\t\t\t$( this ).innerHeight() + $( this ).height() ) );\n\t\t\t\t})\n\t\t\t\t.css( \"overflow\", \"auto\" );\n\t\t} else if ( heightStyle === \"auto\" ) {\n\t\t\tmaxHeight = 0;\n\t\t\tthis.headers.next()\n\t\t\t\t.each(function() {\n\t\t\t\t\tmaxHeight = Math.max( maxHeight, $( this ).css( \"height\", \"\" ).height() );\n\t\t\t\t})\n\t\t\t\t.height( maxHeight );\n\t\t}\n\t},\n\n\t_activate: function( index ) {\n\t\tvar active = this._findActive( index )[ 0 ];\n\n\t\t// trying to activate the already active panel\n\t\tif ( active === this.active[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// trying to collapse, simulate a click on the currently active header\n\t\tactive = active || this.active[ 0 ];\n\n\t\tthis._eventHandler({\n\t\t\ttarget: active,\n\t\t\tcurrentTarget: active,\n\t\t\tpreventDefault: $.noop\n\t\t});\n\t},\n\n\t_findActive: function( selector ) {\n\t\treturn typeof selector === \"number\" ? this.headers.eq( selector ) : $();\n\t},\n\n\t_setupEvents: function( event ) {\n\t\tvar events = {\n\t\t\tkeydown: \"_keydown\"\n\t\t};\n\t\tif ( event ) {\n\t\t\t$.each( event.split( \" \" ), function( index, eventName ) {\n\t\t\t\tevents[ eventName ] = \"_eventHandler\";\n\t\t\t});\n\t\t}\n\n\t\tthis._off( this.headers.add( this.headers.next() ) );\n\t\tthis._on( this.headers, events );\n\t\tthis._on( this.headers.next(), { keydown: \"_panelKeyDown\" });\n\t\tthis._hoverable( this.headers );\n\t\tthis._focusable( this.headers );\n\t},\n\n\t_eventHandler: function( event ) {\n\t\tvar options = this.options,\n\t\t\tactive = this.active,\n\t\t\tclicked = $( event.currentTarget ),\n\t\t\tclickedIsActive = clicked[ 0 ] === active[ 0 ],\n\t\t\tcollapsing = clickedIsActive && options.collapsible,\n\t\t\ttoShow = collapsing ? $() : clicked.next(),\n\t\t\ttoHide = active.next(),\n\t\t\teventData = {\n\t\t\t\toldHeader: active,\n\t\t\t\toldPanel: toHide,\n\t\t\t\tnewHeader: collapsing ? $() : clicked,\n\t\t\t\tnewPanel: toShow\n\t\t\t};\n\n\t\tevent.preventDefault();\n\n\t\tif (\n\t\t\t\t// click on active header, but not collapsible\n\t\t\t\t( clickedIsActive && !options.collapsible ) ||\n\t\t\t\t// allow canceling activation\n\t\t\t\t( this._trigger( \"beforeActivate\", event, eventData ) === false ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\toptions.active = collapsing ? false : this.headers.index( clicked );\n\n\t\t// when the call to ._toggle() comes after the class changes\n\t\t// it causes a very odd bug in IE 8 (see #6720)\n\t\tthis.active = clickedIsActive ? $() : clicked;\n\t\tthis._toggle( eventData );\n\n\t\t// switch classes\n\t\t// corner classes on the previously active header stay after the animation\n\t\tactive.removeClass( \"ui-accordion-header-active ui-state-active\" );\n\t\tif ( options.icons ) {\n\t\t\tactive.children( \".ui-accordion-header-icon\" )\n\t\t\t\t.removeClass( options.icons.activeHeader )\n\t\t\t\t.addClass( options.icons.header );\n\t\t}\n\n\t\tif ( !clickedIsActive ) {\n\t\t\tclicked\n\t\t\t\t.removeClass( \"ui-corner-all\" )\n\t\t\t\t.addClass( \"ui-accordion-header-active ui-state-active ui-corner-top\" );\n\t\t\tif ( options.icons ) {\n\t\t\t\tclicked.children( \".ui-accordion-header-icon\" )\n\t\t\t\t\t.removeClass( options.icons.header )\n\t\t\t\t\t.addClass( options.icons.activeHeader );\n\t\t\t}\n\n\t\t\tclicked\n\t\t\t\t.next()\n\t\t\t\t.addClass( \"ui-accordion-content-active\" );\n\t\t}\n\t},\n\n\t_toggle: function( data ) {\n\t\tvar toShow = data.newPanel,\n\t\t\ttoHide = this.prevShow.length ? this.prevShow : data.oldPanel;\n\n\t\t// handle activating a panel during the animation for another activation\n\t\tthis.prevShow.add( this.prevHide ).stop( true, true );\n\t\tthis.prevShow = toShow;\n\t\tthis.prevHide = toHide;\n\n\t\tif ( this.options.animate ) {\n\t\t\tthis._animate( toShow, toHide, data );\n\t\t} else {\n\t\t\ttoHide.hide();\n\t\t\ttoShow.show();\n\t\t\tthis._toggleComplete( data );\n\t\t}\n\n\t\ttoHide.attr({\n\t\t\t\"aria-hidden\": \"true\"\n\t\t});\n\t\ttoHide.prev().attr({\n\t\t\t\"aria-selected\": \"false\",\n\t\t\t\"aria-expanded\": \"false\"\n\t\t});\n\t\t// if we're switching panels, remove the old header from the tab order\n\t\t// if we're opening from collapsed state, remove the previous header from the tab order\n\t\t// if we're collapsing, then keep the collapsing header in the tab order\n\t\tif ( toShow.length && toHide.length ) {\n\t\t\ttoHide.prev().attr({\n\t\t\t\t\"tabIndex\": -1,\n\t\t\t\t\"aria-expanded\": \"false\"\n\t\t\t});\n\t\t} else if ( toShow.length ) {\n\t\t\tthis.headers.filter(function() {\n\t\t\t\treturn parseInt( $( this ).attr( \"tabIndex\" ), 10 ) === 0;\n\t\t\t})\n\t\t\t.attr( \"tabIndex\", -1 );\n\t\t}\n\n\t\ttoShow\n\t\t\t.attr( \"aria-hidden\", \"false\" )\n\t\t\t.prev()\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-selected\": \"true\",\n\t\t\t\t\t\"aria-expanded\": \"true\",\n\t\t\t\t\ttabIndex: 0\n\t\t\t\t});\n\t},\n\n\t_animate: function( toShow, toHide, data ) {\n\t\tvar total, easing, duration,\n\t\t\tthat = this,\n\t\t\tadjust = 0,\n\t\t\tboxSizing = toShow.css( \"box-sizing\" ),\n\t\t\tdown = toShow.length &&\n\t\t\t\t( !toHide.length || ( toShow.index() < toHide.index() ) ),\n\t\t\tanimate = this.options.animate || {},\n\t\t\toptions = down && animate.down || animate,\n\t\t\tcomplete = function() {\n\t\t\t\tthat._toggleComplete( data );\n\t\t\t};\n\n\t\tif ( typeof options === \"number\" ) {\n\t\t\tduration = options;\n\t\t}\n\t\tif ( typeof options === \"string\" ) {\n\t\t\teasing = options;\n\t\t}\n\t\t// fall back from options to animation in case of partial down settings\n\t\teasing = easing || options.easing || animate.easing;\n\t\tduration = duration || options.duration || animate.duration;\n\n\t\tif ( !toHide.length ) {\n\t\t\treturn toShow.animate( this.showProps, duration, easing, complete );\n\t\t}\n\t\tif ( !toShow.length ) {\n\t\t\treturn toHide.animate( this.hideProps, duration, easing, complete );\n\t\t}\n\n\t\ttotal = toShow.show().outerHeight();\n\t\ttoHide.animate( this.hideProps, {\n\t\t\tduration: duration,\n\t\t\teasing: easing,\n\t\t\tstep: function( now, fx ) {\n\t\t\t\tfx.now = Math.round( now );\n\t\t\t}\n\t\t});\n\t\ttoShow\n\t\t\t.hide()\n\t\t\t.animate( this.showProps, {\n\t\t\t\tduration: duration,\n\t\t\t\teasing: easing,\n\t\t\t\tcomplete: complete,\n\t\t\t\tstep: function( now, fx ) {\n\t\t\t\t\tfx.now = Math.round( now );\n\t\t\t\t\tif ( fx.prop !== \"height\" ) {\n\t\t\t\t\t\tif ( boxSizing === \"content-box\" ) {\n\t\t\t\t\t\t\tadjust += fx.now;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if ( that.options.heightStyle !== \"content\" ) {\n\t\t\t\t\t\tfx.now = Math.round( total - toHide.outerHeight() - adjust );\n\t\t\t\t\t\tadjust = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\t_toggleComplete: function( data ) {\n\t\tvar toHide = data.oldPanel;\n\n\t\ttoHide\n\t\t\t.removeClass( \"ui-accordion-content-active\" )\n\t\t\t.prev()\n\t\t\t\t.removeClass( \"ui-corner-top\" )\n\t\t\t\t.addClass( \"ui-corner-all\" );\n\n\t\t// Work around for rendering bug in IE (#5421)\n\t\tif ( toHide.length ) {\n\t\t\ttoHide.parent()[ 0 ].className = toHide.parent()[ 0 ].className;\n\t\t}\n\t\tthis._trigger( \"activate\", null, data );\n\t}\n});\n\n\n/*!\n * jQuery UI Menu 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/menu/\n */\n\n\nvar menu = $.widget( \"ui.menu\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<ul>\",\n\tdelay: 300,\n\toptions: {\n\t\ticons: {\n\t\t\tsubmenu: \"ui-icon-carat-1-e\"\n\t\t},\n\t\titems: \"> *\",\n\t\tmenus: \"ul\",\n\t\tposition: {\n\t\t\tmy: \"left-1 top\",\n\t\t\tat: \"right top\"\n\t\t},\n\t\trole: \"menu\",\n\n\t\t// callbacks\n\t\tblur: null,\n\t\tfocus: null,\n\t\tselect: null\n\t},\n\n\t_create: function() {\n\t\tthis.activeMenu = this.element;\n\n\t\t// Flag used to prevent firing of the click handler\n\t\t// as the event bubbles up through nested menus\n\t\tthis.mouseHandled = false;\n\t\tthis.element\n\t\t\t.uniqueId()\n\t\t\t.addClass( \"ui-menu ui-widget ui-widget-content\" )\n\t\t\t.toggleClass( \"ui-menu-icons\", !!this.element.find( \".ui-icon\" ).length )\n\t\t\t.attr({\n\t\t\t\trole: this.options.role,\n\t\t\t\ttabIndex: 0\n\t\t\t});\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis.element\n\t\t\t\t.addClass( \"ui-state-disabled\" )\n\t\t\t\t.attr( \"aria-disabled\", \"true\" );\n\t\t}\n\n\t\tthis._on({\n\t\t\t// Prevent focus from sticking to links inside menu after clicking\n\t\t\t// them (focus should always stay on UL during navigation).\n\t\t\t\"mousedown .ui-menu-item\": function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t},\n\t\t\t\"click .ui-menu-item\": function( event ) {\n\t\t\t\tvar target = $( event.target );\n\t\t\t\tif ( !this.mouseHandled && target.not( \".ui-state-disabled\" ).length ) {\n\t\t\t\t\tthis.select( event );\n\n\t\t\t\t\t// Only set the mouseHandled flag if the event will bubble, see #9469.\n\t\t\t\t\tif ( !event.isPropagationStopped() ) {\n\t\t\t\t\t\tthis.mouseHandled = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Open submenu on click\n\t\t\t\t\tif ( target.has( \".ui-menu\" ).length ) {\n\t\t\t\t\t\tthis.expand( event );\n\t\t\t\t\t} else if ( !this.element.is( \":focus\" ) && $( this.document[ 0 ].activeElement ).closest( \".ui-menu\" ).length ) {\n\n\t\t\t\t\t\t// Redirect focus to the menu\n\t\t\t\t\t\tthis.element.trigger( \"focus\", [ true ] );\n\n\t\t\t\t\t\t// If the active item is on the top level, let it stay active.\n\t\t\t\t\t\t// Otherwise, blur the active item since it is no longer visible.\n\t\t\t\t\t\tif ( this.active && this.active.parents( \".ui-menu\" ).length === 1 ) {\n\t\t\t\t\t\t\tclearTimeout( this.timer );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"mouseenter .ui-menu-item\": function( event ) {\n\t\t\t\t// Ignore mouse events while typeahead is active, see #10458.\n\t\t\t\t// Prevents focusing the wrong item when typeahead causes a scroll while the mouse\n\t\t\t\t// is over an item in the menu\n\t\t\t\tif ( this.previousFilter ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar target = $( event.currentTarget );\n\t\t\t\t// Remove ui-state-active class from siblings of the newly focused menu item\n\t\t\t\t// to avoid a jump caused by adjacent elements both having a class with a border\n\t\t\t\ttarget.siblings( \".ui-state-active\" ).removeClass( \"ui-state-active\" );\n\t\t\t\tthis.focus( event, target );\n\t\t\t},\n\t\t\tmouseleave: \"collapseAll\",\n\t\t\t\"mouseleave .ui-menu\": \"collapseAll\",\n\t\t\tfocus: function( event, keepActiveItem ) {\n\t\t\t\t// If there's already an active item, keep it active\n\t\t\t\t// If not, activate the first item\n\t\t\t\tvar item = this.active || this.element.find( this.options.items ).eq( 0 );\n\n\t\t\t\tif ( !keepActiveItem ) {\n\t\t\t\t\tthis.focus( event, item );\n\t\t\t\t}\n\t\t\t},\n\t\t\tblur: function( event ) {\n\t\t\t\tthis._delay(function() {\n\t\t\t\t\tif ( !$.contains( this.element[0], this.document[0].activeElement ) ) {\n\t\t\t\t\t\tthis.collapseAll( event );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tkeydown: \"_keydown\"\n\t\t});\n\n\t\tthis.refresh();\n\n\t\t// Clicks outside of a menu collapse any open menus\n\t\tthis._on( this.document, {\n\t\t\tclick: function( event ) {\n\t\t\t\tif ( this._closeOnDocumentClick( event ) ) {\n\t\t\t\t\tthis.collapseAll( event );\n\t\t\t\t}\n\n\t\t\t\t// Reset the mouseHandled flag\n\t\t\t\tthis.mouseHandled = false;\n\t\t\t}\n\t\t});\n\t},\n\n\t_destroy: function() {\n\t\t// Destroy (sub)menus\n\t\tthis.element\n\t\t\t.removeAttr( \"aria-activedescendant\" )\n\t\t\t.find( \".ui-menu\" ).addBack()\n\t\t\t\t.removeClass( \"ui-menu ui-widget ui-widget-content ui-menu-icons ui-front\" )\n\t\t\t\t.removeAttr( \"role\" )\n\t\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t\t.removeAttr( \"aria-labelledby\" )\n\t\t\t\t.removeAttr( \"aria-expanded\" )\n\t\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t\t.removeAttr( \"aria-disabled\" )\n\t\t\t\t.removeUniqueId()\n\t\t\t\t.show();\n\n\t\t// Destroy menu items\n\t\tthis.element.find( \".ui-menu-item\" )\n\t\t\t.removeClass( \"ui-menu-item\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-disabled\" )\n\t\t\t.removeUniqueId()\n\t\t\t.removeClass( \"ui-state-hover\" )\n\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-haspopup\" )\n\t\t\t.children().each( function() {\n\t\t\t\tvar elem = $( this );\n\t\t\t\tif ( elem.data( \"ui-menu-submenu-carat\" ) ) {\n\t\t\t\t\telem.remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Destroy menu dividers\n\t\tthis.element.find( \".ui-menu-divider\" ).removeClass( \"ui-menu-divider ui-widget-content\" );\n\t},\n\n\t_keydown: function( event ) {\n\t\tvar match, prev, character, skip,\n\t\t\tpreventDefault = true;\n\n\t\tswitch ( event.keyCode ) {\n\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\tthis.previousPage( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\tthis.nextPage( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.HOME:\n\t\t\tthis._move( \"first\", \"first\", event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.END:\n\t\t\tthis._move( \"last\", \"last\", event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.UP:\n\t\t\tthis.previous( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.DOWN:\n\t\t\tthis.next( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.LEFT:\n\t\t\tthis.collapse( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.RIGHT:\n\t\t\tif ( this.active && !this.active.is( \".ui-state-disabled\" ) ) {\n\t\t\t\tthis.expand( event );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.ENTER:\n\t\tcase $.ui.keyCode.SPACE:\n\t\t\tthis._activate( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.ESCAPE:\n\t\t\tthis.collapse( event );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tpreventDefault = false;\n\t\t\tprev = this.previousFilter || \"\";\n\t\t\tcharacter = String.fromCharCode( event.keyCode );\n\t\t\tskip = false;\n\n\t\t\tclearTimeout( this.filterTimer );\n\n\t\t\tif ( character === prev ) {\n\t\t\t\tskip = true;\n\t\t\t} else {\n\t\t\t\tcharacter = prev + character;\n\t\t\t}\n\n\t\t\tmatch = this._filterMenuItems( character );\n\t\t\tmatch = skip && match.index( this.active.next() ) !== -1 ?\n\t\t\t\tthis.active.nextAll( \".ui-menu-item\" ) :\n\t\t\t\tmatch;\n\n\t\t\t// If no matches on the current filter, reset to the last character pressed\n\t\t\t// to move down the menu to the first item that starts with that character\n\t\t\tif ( !match.length ) {\n\t\t\t\tcharacter = String.fromCharCode( event.keyCode );\n\t\t\t\tmatch = this._filterMenuItems( character );\n\t\t\t}\n\n\t\t\tif ( match.length ) {\n\t\t\t\tthis.focus( event, match );\n\t\t\t\tthis.previousFilter = character;\n\t\t\t\tthis.filterTimer = this._delay(function() {\n\t\t\t\t\tdelete this.previousFilter;\n\t\t\t\t}, 1000 );\n\t\t\t} else {\n\t\t\t\tdelete this.previousFilter;\n\t\t\t}\n\t\t}\n\n\t\tif ( preventDefault ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\n\t_activate: function( event ) {\n\t\tif ( !this.active.is( \".ui-state-disabled\" ) ) {\n\t\t\tif ( this.active.is( \"[aria-haspopup='true']\" ) ) {\n\t\t\t\tthis.expand( event );\n\t\t\t} else {\n\t\t\t\tthis.select( event );\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh: function() {\n\t\tvar menus, items,\n\t\t\tthat = this,\n\t\t\ticon = this.options.icons.submenu,\n\t\t\tsubmenus = this.element.find( this.options.menus );\n\n\t\tthis.element.toggleClass( \"ui-menu-icons\", !!this.element.find( \".ui-icon\" ).length );\n\n\t\t// Initialize nested menus\n\t\tsubmenus.filter( \":not(.ui-menu)\" )\n\t\t\t.addClass( \"ui-menu ui-widget ui-widget-content ui-front\" )\n\t\t\t.hide()\n\t\t\t.attr({\n\t\t\t\trole: this.options.role,\n\t\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\t\"aria-expanded\": \"false\"\n\t\t\t})\n\t\t\t.each(function() {\n\t\t\t\tvar menu = $( this ),\n\t\t\t\t\titem = menu.parent(),\n\t\t\t\t\tsubmenuCarat = $( \"<span>\" )\n\t\t\t\t\t\t.addClass( \"ui-menu-icon ui-icon \" + icon )\n\t\t\t\t\t\t.data( \"ui-menu-submenu-carat\", true );\n\n\t\t\t\titem\n\t\t\t\t\t.attr( \"aria-haspopup\", \"true\" )\n\t\t\t\t\t.prepend( submenuCarat );\n\t\t\t\tmenu.attr( \"aria-labelledby\", item.attr( \"id\" ) );\n\t\t\t});\n\n\t\tmenus = submenus.add( this.element );\n\t\titems = menus.find( this.options.items );\n\n\t\t// Initialize menu-items containing spaces and/or dashes only as dividers\n\t\titems.not( \".ui-menu-item\" ).each(function() {\n\t\t\tvar item = $( this );\n\t\t\tif ( that._isDivider( item ) ) {\n\t\t\t\titem.addClass( \"ui-widget-content ui-menu-divider\" );\n\t\t\t}\n\t\t});\n\n\t\t// Don't refresh list items that are already adapted\n\t\titems.not( \".ui-menu-item, .ui-menu-divider\" )\n\t\t\t.addClass( \"ui-menu-item\" )\n\t\t\t.uniqueId()\n\t\t\t.attr({\n\t\t\t\ttabIndex: -1,\n\t\t\t\trole: this._itemRole()\n\t\t\t});\n\n\t\t// Add aria-disabled attribute to any disabled menu item\n\t\titems.filter( \".ui-state-disabled\" ).attr( \"aria-disabled\", \"true\" );\n\n\t\t// If the active item has been removed, blur the menu\n\t\tif ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {\n\t\t\tthis.blur();\n\t\t}\n\t},\n\n\t_itemRole: function() {\n\t\treturn {\n\t\t\tmenu: \"menuitem\",\n\t\t\tlistbox: \"option\"\n\t\t}[ this.options.role ];\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icons\" ) {\n\t\t\tthis.element.find( \".ui-menu-icon\" )\n\t\t\t\t.removeClass( this.options.icons.submenu )\n\t\t\t\t.addClass( value.submenu );\n\t\t}\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.element\n\t\t\t\t.toggleClass( \"ui-state-disabled\", !!value )\n\t\t\t\t.attr( \"aria-disabled\", value );\n\t\t}\n\t\tthis._super( key, value );\n\t},\n\n\tfocus: function( event, item ) {\n\t\tvar nested, focused;\n\t\tthis.blur( event, event && event.type === \"focus\" );\n\n\t\tthis._scrollIntoView( item );\n\n\t\tthis.active = item.first();\n\t\tfocused = this.active.addClass( \"ui-state-focus\" ).removeClass( \"ui-state-active\" );\n\t\t// Only update aria-activedescendant if there's a role\n\t\t// otherwise we assume focus is managed elsewhere\n\t\tif ( this.options.role ) {\n\t\t\tthis.element.attr( \"aria-activedescendant\", focused.attr( \"id\" ) );\n\t\t}\n\n\t\t// Highlight active parent menu item, if any\n\t\tthis.active\n\t\t\t.parent()\n\t\t\t.closest( \".ui-menu-item\" )\n\t\t\t.addClass( \"ui-state-active\" );\n\n\t\tif ( event && event.type === \"keydown\" ) {\n\t\t\tthis._close();\n\t\t} else {\n\t\t\tthis.timer = this._delay(function() {\n\t\t\t\tthis._close();\n\t\t\t}, this.delay );\n\t\t}\n\n\t\tnested = item.children( \".ui-menu\" );\n\t\tif ( nested.length && event && ( /^mouse/.test( event.type ) ) ) {\n\t\t\tthis._startOpening(nested);\n\t\t}\n\t\tthis.activeMenu = item.parent();\n\n\t\tthis._trigger( \"focus\", event, { item: item } );\n\t},\n\n\t_scrollIntoView: function( item ) {\n\t\tvar borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;\n\t\tif ( this._hasScroll() ) {\n\t\t\tborderTop = parseFloat( $.css( this.activeMenu[0], \"borderTopWidth\" ) ) || 0;\n\t\t\tpaddingTop = parseFloat( $.css( this.activeMenu[0], \"paddingTop\" ) ) || 0;\n\t\t\toffset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;\n\t\t\tscroll = this.activeMenu.scrollTop();\n\t\t\telementHeight = this.activeMenu.height();\n\t\t\titemHeight = item.outerHeight();\n\n\t\t\tif ( offset < 0 ) {\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset );\n\t\t\t} else if ( offset + itemHeight > elementHeight ) {\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );\n\t\t\t}\n\t\t}\n\t},\n\n\tblur: function( event, fromFocus ) {\n\t\tif ( !fromFocus ) {\n\t\t\tclearTimeout( this.timer );\n\t\t}\n\n\t\tif ( !this.active ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.active.removeClass( \"ui-state-focus\" );\n\t\tthis.active = null;\n\n\t\tthis._trigger( \"blur\", event, { item: this.active } );\n\t},\n\n\t_startOpening: function( submenu ) {\n\t\tclearTimeout( this.timer );\n\n\t\t// Don't open if already open fixes a Firefox bug that caused a .5 pixel\n\t\t// shift in the submenu position when mousing over the carat icon\n\t\tif ( submenu.attr( \"aria-hidden\" ) !== \"true\" ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.timer = this._delay(function() {\n\t\t\tthis._close();\n\t\t\tthis._open( submenu );\n\t\t}, this.delay );\n\t},\n\n\t_open: function( submenu ) {\n\t\tvar position = $.extend({\n\t\t\tof: this.active\n\t\t}, this.options.position );\n\n\t\tclearTimeout( this.timer );\n\t\tthis.element.find( \".ui-menu\" ).not( submenu.parents( \".ui-menu\" ) )\n\t\t\t.hide()\n\t\t\t.attr( \"aria-hidden\", \"true\" );\n\n\t\tsubmenu\n\t\t\t.show()\n\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t.attr( \"aria-expanded\", \"true\" )\n\t\t\t.position( position );\n\t},\n\n\tcollapseAll: function( event, all ) {\n\t\tclearTimeout( this.timer );\n\t\tthis.timer = this._delay(function() {\n\t\t\t// If we were passed an event, look for the submenu that contains the event\n\t\t\tvar currentMenu = all ? this.element :\n\t\t\t\t$( event && event.target ).closest( this.element.find( \".ui-menu\" ) );\n\n\t\t\t// If we found no valid submenu ancestor, use the main menu to close all sub menus anyway\n\t\t\tif ( !currentMenu.length ) {\n\t\t\t\tcurrentMenu = this.element;\n\t\t\t}\n\n\t\t\tthis._close( currentMenu );\n\n\t\t\tthis.blur( event );\n\t\t\tthis.activeMenu = currentMenu;\n\t\t}, this.delay );\n\t},\n\n\t// With no arguments, closes the currently active menu - if nothing is active\n\t// it closes all menus.  If passed an argument, it will search for menus BELOW\n\t_close: function( startMenu ) {\n\t\tif ( !startMenu ) {\n\t\t\tstartMenu = this.active ? this.active.parent() : this.element;\n\t\t}\n\n\t\tstartMenu\n\t\t\t.find( \".ui-menu\" )\n\t\t\t\t.hide()\n\t\t\t\t.attr( \"aria-hidden\", \"true\" )\n\t\t\t\t.attr( \"aria-expanded\", \"false\" )\n\t\t\t.end()\n\t\t\t.find( \".ui-state-active\" ).not( \".ui-state-focus\" )\n\t\t\t\t.removeClass( \"ui-state-active\" );\n\t},\n\n\t_closeOnDocumentClick: function( event ) {\n\t\treturn !$( event.target ).closest( \".ui-menu\" ).length;\n\t},\n\n\t_isDivider: function( item ) {\n\n\t\t// Match hyphen, em dash, en dash\n\t\treturn !/[^\\-\\u2014\\u2013\\s]/.test( item.text() );\n\t},\n\n\tcollapse: function( event ) {\n\t\tvar newItem = this.active &&\n\t\t\tthis.active.parent().closest( \".ui-menu-item\", this.element );\n\t\tif ( newItem && newItem.length ) {\n\t\t\tthis._close();\n\t\t\tthis.focus( event, newItem );\n\t\t}\n\t},\n\n\texpand: function( event ) {\n\t\tvar newItem = this.active &&\n\t\t\tthis.active\n\t\t\t\t.children( \".ui-menu \" )\n\t\t\t\t.find( this.options.items )\n\t\t\t\t.first();\n\n\t\tif ( newItem && newItem.length ) {\n\t\t\tthis._open( newItem.parent() );\n\n\t\t\t// Delay so Firefox will not hide activedescendant change in expanding submenu from AT\n\t\t\tthis._delay(function() {\n\t\t\t\tthis.focus( event, newItem );\n\t\t\t});\n\t\t}\n\t},\n\n\tnext: function( event ) {\n\t\tthis._move( \"next\", \"first\", event );\n\t},\n\n\tprevious: function( event ) {\n\t\tthis._move( \"prev\", \"last\", event );\n\t},\n\n\tisFirstItem: function() {\n\t\treturn this.active && !this.active.prevAll( \".ui-menu-item\" ).length;\n\t},\n\n\tisLastItem: function() {\n\t\treturn this.active && !this.active.nextAll( \".ui-menu-item\" ).length;\n\t},\n\n\t_move: function( direction, filter, event ) {\n\t\tvar next;\n\t\tif ( this.active ) {\n\t\t\tif ( direction === \"first\" || direction === \"last\" ) {\n\t\t\t\tnext = this.active\n\t\t\t\t\t[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( \".ui-menu-item\" )\n\t\t\t\t\t.eq( -1 );\n\t\t\t} else {\n\t\t\t\tnext = this.active\n\t\t\t\t\t[ direction + \"All\" ]( \".ui-menu-item\" )\n\t\t\t\t\t.eq( 0 );\n\t\t\t}\n\t\t}\n\t\tif ( !next || !next.length || !this.active ) {\n\t\t\tnext = this.activeMenu.find( this.options.items )[ filter ]();\n\t\t}\n\n\t\tthis.focus( event, next );\n\t},\n\n\tnextPage: function( event ) {\n\t\tvar item, base, height;\n\n\t\tif ( !this.active ) {\n\t\t\tthis.next( event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.isLastItem() ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( this._hasScroll() ) {\n\t\t\tbase = this.active.offset().top;\n\t\t\theight = this.element.height();\n\t\t\tthis.active.nextAll( \".ui-menu-item\" ).each(function() {\n\t\t\t\titem = $( this );\n\t\t\t\treturn item.offset().top - base - height < 0;\n\t\t\t});\n\n\t\t\tthis.focus( event, item );\n\t\t} else {\n\t\t\tthis.focus( event, this.activeMenu.find( this.options.items )\n\t\t\t\t[ !this.active ? \"first\" : \"last\" ]() );\n\t\t}\n\t},\n\n\tpreviousPage: function( event ) {\n\t\tvar item, base, height;\n\t\tif ( !this.active ) {\n\t\t\tthis.next( event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.isFirstItem() ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( this._hasScroll() ) {\n\t\t\tbase = this.active.offset().top;\n\t\t\theight = this.element.height();\n\t\t\tthis.active.prevAll( \".ui-menu-item\" ).each(function() {\n\t\t\t\titem = $( this );\n\t\t\t\treturn item.offset().top - base + height > 0;\n\t\t\t});\n\n\t\t\tthis.focus( event, item );\n\t\t} else {\n\t\t\tthis.focus( event, this.activeMenu.find( this.options.items ).first() );\n\t\t}\n\t},\n\n\t_hasScroll: function() {\n\t\treturn this.element.outerHeight() < this.element.prop( \"scrollHeight\" );\n\t},\n\n\tselect: function( event ) {\n\t\t// TODO: It should never be possible to not have an active item at this\n\t\t// point, but the tests don't trigger mouseenter before click.\n\t\tthis.active = this.active || $( event.target ).closest( \".ui-menu-item\" );\n\t\tvar ui = { item: this.active };\n\t\tif ( !this.active.has( \".ui-menu\" ).length ) {\n\t\t\tthis.collapseAll( event, true );\n\t\t}\n\t\tthis._trigger( \"select\", event, ui );\n\t},\n\n\t_filterMenuItems: function(character) {\n\t\tvar escapedCharacter = character.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" ),\n\t\t\tregex = new RegExp( \"^\" + escapedCharacter, \"i\" );\n\n\t\treturn this.activeMenu\n\t\t\t.find( this.options.items )\n\n\t\t\t// Only match on items, not dividers or other content (#10571)\n\t\t\t.filter( \".ui-menu-item\" )\n\t\t\t.filter(function() {\n\t\t\t\treturn regex.test( $.trim( $( this ).text() ) );\n\t\t\t});\n\t}\n});\n\n\n/*!\n * jQuery UI Autocomplete 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/autocomplete/\n */\n\n\n$.widget( \"ui.autocomplete\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<input>\",\n\toptions: {\n\t\tappendTo: null,\n\t\tautoFocus: false,\n\t\tdelay: 300,\n\t\tminLength: 1,\n\t\tposition: {\n\t\t\tmy: \"left top\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"none\"\n\t\t},\n\t\tsource: null,\n\n\t\t// callbacks\n\t\tchange: null,\n\t\tclose: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tresponse: null,\n\t\tsearch: null,\n\t\tselect: null\n\t},\n\n\trequestIndex: 0,\n\tpending: 0,\n\n\t_create: function() {\n\t\t// Some browsers only repeat keydown events, not keypress events,\n\t\t// so we use the suppressKeyPress flag to determine if we've already\n\t\t// handled the keydown event. #7269\n\t\t// Unfortunately the code for & in keypress is the same as the up arrow,\n\t\t// so we use the suppressKeyPressRepeat flag to avoid handling keypress\n\t\t// events when we know the keydown event was used to modify the\n\t\t// search term. #7799\n\t\tvar suppressKeyPress, suppressKeyPressRepeat, suppressInput,\n\t\t\tnodeName = this.element[ 0 ].nodeName.toLowerCase(),\n\t\t\tisTextarea = nodeName === \"textarea\",\n\t\t\tisInput = nodeName === \"input\";\n\n\t\tthis.isMultiLine =\n\t\t\t// Textareas are always multi-line\n\t\t\tisTextarea ? true :\n\t\t\t// Inputs are always single-line, even if inside a contentEditable element\n\t\t\t// IE also treats inputs as contentEditable\n\t\t\tisInput ? false :\n\t\t\t// All other element types are determined by whether or not they're contentEditable\n\t\t\tthis.element.prop( \"isContentEditable\" );\n\n\t\tthis.valueMethod = this.element[ isTextarea || isInput ? \"val\" : \"text\" ];\n\t\tthis.isNewMenu = true;\n\n\t\tthis.element\n\t\t\t.addClass( \"ui-autocomplete-input\" )\n\t\t\t.attr( \"autocomplete\", \"off\" );\n\n\t\tthis._on( this.element, {\n\t\t\tkeydown: function( event ) {\n\t\t\t\tif ( this.element.prop( \"readOnly\" ) ) {\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tsuppressInput = true;\n\t\t\t\t\tsuppressKeyPressRepeat = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsuppressKeyPress = false;\n\t\t\t\tsuppressInput = false;\n\t\t\t\tsuppressKeyPressRepeat = false;\n\t\t\t\tvar keyCode = $.ui.keyCode;\n\t\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase keyCode.PAGE_UP:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._move( \"previousPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.PAGE_DOWN:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._move( \"nextPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.UP:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._keyEvent( \"previous\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.DOWN:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._keyEvent( \"next\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.ENTER:\n\t\t\t\t\t// when menu is open and has focus\n\t\t\t\t\tif ( this.menu.active ) {\n\t\t\t\t\t\t// #6055 - Opera still allows the keypress to occur\n\t\t\t\t\t\t// which causes forms to submit\n\t\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis.menu.select( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.TAB:\n\t\t\t\t\tif ( this.menu.active ) {\n\t\t\t\t\t\tthis.menu.select( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.ESCAPE:\n\t\t\t\t\tif ( this.menu.element.is( \":visible\" ) ) {\n\t\t\t\t\t\tif ( !this.isMultiLine ) {\n\t\t\t\t\t\t\tthis._value( this.term );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.close( event );\n\t\t\t\t\t\t// Different browsers have different default behavior for escape\n\t\t\t\t\t\t// Single press can mean undo or clear\n\t\t\t\t\t\t// Double press in IE means clear the whole form\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tsuppressKeyPressRepeat = true;\n\t\t\t\t\t// search timeout should be triggered before the input value is changed\n\t\t\t\t\tthis._searchTimeout( event );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t\tkeypress: function( event ) {\n\t\t\t\tif ( suppressKeyPress ) {\n\t\t\t\t\tsuppressKeyPress = false;\n\t\t\t\t\tif ( !this.isMultiLine || this.menu.element.is( \":visible\" ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( suppressKeyPressRepeat ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// replicate some key handlers to allow them to repeat in Firefox and Opera\n\t\t\t\tvar keyCode = $.ui.keyCode;\n\t\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase keyCode.PAGE_UP:\n\t\t\t\t\tthis._move( \"previousPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.PAGE_DOWN:\n\t\t\t\t\tthis._move( \"nextPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.UP:\n\t\t\t\t\tthis._keyEvent( \"previous\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.DOWN:\n\t\t\t\t\tthis._keyEvent( \"next\", event );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t\tinput: function( event ) {\n\t\t\t\tif ( suppressInput ) {\n\t\t\t\t\tsuppressInput = false;\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._searchTimeout( event );\n\t\t\t},\n\t\t\tfocus: function() {\n\t\t\t\tthis.selectedItem = null;\n\t\t\t\tthis.previous = this._value();\n\t\t\t},\n\t\t\tblur: function( event ) {\n\t\t\t\tif ( this.cancelBlur ) {\n\t\t\t\t\tdelete this.cancelBlur;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclearTimeout( this.searching );\n\t\t\t\tthis.close( event );\n\t\t\t\tthis._change( event );\n\t\t\t}\n\t\t});\n\n\t\tthis._initSource();\n\t\tthis.menu = $( \"<ul>\" )\n\t\t\t.addClass( \"ui-autocomplete ui-front\" )\n\t\t\t.appendTo( this._appendTo() )\n\t\t\t.menu({\n\t\t\t\t// disable ARIA support, the live region takes care of that\n\t\t\t\trole: null\n\t\t\t})\n\t\t\t.hide()\n\t\t\t.menu( \"instance\" );\n\n\t\tthis._on( this.menu.element, {\n\t\t\tmousedown: function( event ) {\n\t\t\t\t// prevent moving focus out of the text field\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\n\t\t\t\t// so we set a flag to know when we should ignore the blur event\n\t\t\t\tthis.cancelBlur = true;\n\t\t\t\tthis._delay(function() {\n\t\t\t\t\tdelete this.cancelBlur;\n\t\t\t\t});\n\n\t\t\t\t// clicking on the scrollbar causes focus to shift to the body\n\t\t\t\t// but we can't detect a mouseup or a click immediately afterward\n\t\t\t\t// so we have to track the next mousedown and close the menu if\n\t\t\t\t// the user clicks somewhere outside of the autocomplete\n\t\t\t\tvar menuElement = this.menu.element[ 0 ];\n\t\t\t\tif ( !$( event.target ).closest( \".ui-menu-item\" ).length ) {\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tvar that = this;\n\t\t\t\t\t\tthis.document.one( \"mousedown\", function( event ) {\n\t\t\t\t\t\t\tif ( event.target !== that.element[ 0 ] &&\n\t\t\t\t\t\t\t\t\tevent.target !== menuElement &&\n\t\t\t\t\t\t\t\t\t!$.contains( menuElement, event.target ) ) {\n\t\t\t\t\t\t\t\tthat.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tmenufocus: function( event, ui ) {\n\t\t\t\tvar label, item;\n\t\t\t\t// support: Firefox\n\t\t\t\t// Prevent accidental activation of menu items in Firefox (#7024 #9118)\n\t\t\t\tif ( this.isNewMenu ) {\n\t\t\t\t\tthis.isNewMenu = false;\n\t\t\t\t\tif ( event.originalEvent && /^mouse/.test( event.originalEvent.type ) ) {\n\t\t\t\t\t\tthis.menu.blur();\n\n\t\t\t\t\t\tthis.document.one( \"mousemove\", function() {\n\t\t\t\t\t\t\t$( event.target ).trigger( event.originalEvent );\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titem = ui.item.data( \"ui-autocomplete-item\" );\n\t\t\t\tif ( false !== this._trigger( \"focus\", event, { item: item } ) ) {\n\t\t\t\t\t// use value to match what will end up in the input, if it was a key event\n\t\t\t\t\tif ( event.originalEvent && /^key/.test( event.originalEvent.type ) ) {\n\t\t\t\t\t\tthis._value( item.value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Announce the value in the liveRegion\n\t\t\t\tlabel = ui.item.attr( \"aria-label\" ) || item.value;\n\t\t\t\tif ( label && $.trim( label ).length ) {\n\t\t\t\t\tthis.liveRegion.children().hide();\n\t\t\t\t\t$( \"<div>\" ).text( label ).appendTo( this.liveRegion );\n\t\t\t\t}\n\t\t\t},\n\t\t\tmenuselect: function( event, ui ) {\n\t\t\t\tvar item = ui.item.data( \"ui-autocomplete-item\" ),\n\t\t\t\t\tprevious = this.previous;\n\n\t\t\t\t// only trigger when focus was lost (click on menu)\n\t\t\t\tif ( this.element[ 0 ] !== this.document[ 0 ].activeElement ) {\n\t\t\t\t\tthis.element.focus();\n\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t// #6109 - IE triggers two focus events and the second\n\t\t\t\t\t// is asynchronous, so we need to reset the previous\n\t\t\t\t\t// term synchronously and asynchronously :-(\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t\tthis.selectedItem = item;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif ( false !== this._trigger( \"select\", event, { item: item } ) ) {\n\t\t\t\t\tthis._value( item.value );\n\t\t\t\t}\n\t\t\t\t// reset the term after the select event\n\t\t\t\t// this allows custom select handling to work properly\n\t\t\t\tthis.term = this._value();\n\n\t\t\t\tthis.close( event );\n\t\t\t\tthis.selectedItem = item;\n\t\t\t}\n\t\t});\n\n\t\tthis.liveRegion = $( \"<span>\", {\n\t\t\t\trole: \"status\",\n\t\t\t\t\"aria-live\": \"assertive\",\n\t\t\t\t\"aria-relevant\": \"additions\"\n\t\t\t})\n\t\t\t.addClass( \"ui-helper-hidden-accessible\" )\n\t\t\t.appendTo( this.document[ 0 ].body );\n\n\t\t// turning off autocomplete prevents the browser from remembering the\n\t\t// value when navigating through history, so we re-enable autocomplete\n\t\t// if the page is unloaded before the widget is destroyed. #7790\n\t\tthis._on( this.window, {\n\t\t\tbeforeunload: function() {\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_destroy: function() {\n\t\tclearTimeout( this.searching );\n\t\tthis.element\n\t\t\t.removeClass( \"ui-autocomplete-input\" )\n\t\t\t.removeAttr( \"autocomplete\" );\n\t\tthis.menu.element.remove();\n\t\tthis.liveRegion.remove();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"source\" ) {\n\t\t\tthis._initSource();\n\t\t}\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.menu.element.appendTo( this._appendTo() );\n\t\t}\n\t\tif ( key === \"disabled\" && value && this.xhr ) {\n\t\t\tthis.xhr.abort();\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\n\t\tif ( element ) {\n\t\t\telement = element.jquery || element.nodeType ?\n\t\t\t\t$( element ) :\n\t\t\t\tthis.document.find( element ).eq( 0 );\n\t\t}\n\n\t\tif ( !element || !element[ 0 ] ) {\n\t\t\telement = this.element.closest( \".ui-front\" );\n\t\t}\n\n\t\tif ( !element.length ) {\n\t\t\telement = this.document[ 0 ].body;\n\t\t}\n\n\t\treturn element;\n\t},\n\n\t_initSource: function() {\n\t\tvar array, url,\n\t\t\tthat = this;\n\t\tif ( $.isArray( this.options.source ) ) {\n\t\t\tarray = this.options.source;\n\t\t\tthis.source = function( request, response ) {\n\t\t\t\tresponse( $.ui.autocomplete.filter( array, request.term ) );\n\t\t\t};\n\t\t} else if ( typeof this.options.source === \"string\" ) {\n\t\t\turl = this.options.source;\n\t\t\tthis.source = function( request, response ) {\n\t\t\t\tif ( that.xhr ) {\n\t\t\t\t\tthat.xhr.abort();\n\t\t\t\t}\n\t\t\t\tthat.xhr = $.ajax({\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: request,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tsuccess: function( data ) {\n\t\t\t\t\t\tresponse( data );\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\tresponse([]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t} else {\n\t\t\tthis.source = this.options.source;\n\t\t}\n\t},\n\n\t_searchTimeout: function( event ) {\n\t\tclearTimeout( this.searching );\n\t\tthis.searching = this._delay(function() {\n\n\t\t\t// Search if the value has changed, or if the user retypes the same value (see #7434)\n\t\t\tvar equalValues = this.term === this._value(),\n\t\t\t\tmenuVisible = this.menu.element.is( \":visible\" ),\n\t\t\t\tmodifierKey = event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;\n\n\t\t\tif ( !equalValues || ( equalValues && !menuVisible && !modifierKey ) ) {\n\t\t\t\tthis.selectedItem = null;\n\t\t\t\tthis.search( null, event );\n\t\t\t}\n\t\t}, this.options.delay );\n\t},\n\n\tsearch: function( value, event ) {\n\t\tvalue = value != null ? value : this._value();\n\n\t\t// always save the actual value, not the one passed as an argument\n\t\tthis.term = this._value();\n\n\t\tif ( value.length < this.options.minLength ) {\n\t\t\treturn this.close( event );\n\t\t}\n\n\t\tif ( this._trigger( \"search\", event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._search( value );\n\t},\n\n\t_search: function( value ) {\n\t\tthis.pending++;\n\t\tthis.element.addClass( \"ui-autocomplete-loading\" );\n\t\tthis.cancelSearch = false;\n\n\t\tthis.source( { term: value }, this._response() );\n\t},\n\n\t_response: function() {\n\t\tvar index = ++this.requestIndex;\n\n\t\treturn $.proxy(function( content ) {\n\t\t\tif ( index === this.requestIndex ) {\n\t\t\t\tthis.__response( content );\n\t\t\t}\n\n\t\t\tthis.pending--;\n\t\t\tif ( !this.pending ) {\n\t\t\t\tthis.element.removeClass( \"ui-autocomplete-loading\" );\n\t\t\t}\n\t\t}, this );\n\t},\n\n\t__response: function( content ) {\n\t\tif ( content ) {\n\t\t\tcontent = this._normalize( content );\n\t\t}\n\t\tthis._trigger( \"response\", null, { content: content } );\n\t\tif ( !this.options.disabled && content && content.length && !this.cancelSearch ) {\n\t\t\tthis._suggest( content );\n\t\t\tthis._trigger( \"open\" );\n\t\t} else {\n\t\t\t// use ._close() instead of .close() so we don't cancel future searches\n\t\t\tthis._close();\n\t\t}\n\t},\n\n\tclose: function( event ) {\n\t\tthis.cancelSearch = true;\n\t\tthis._close( event );\n\t},\n\n\t_close: function( event ) {\n\t\tif ( this.menu.element.is( \":visible\" ) ) {\n\t\t\tthis.menu.element.hide();\n\t\t\tthis.menu.blur();\n\t\t\tthis.isNewMenu = true;\n\t\t\tthis._trigger( \"close\", event );\n\t\t}\n\t},\n\n\t_change: function( event ) {\n\t\tif ( this.previous !== this._value() ) {\n\t\t\tthis._trigger( \"change\", event, { item: this.selectedItem } );\n\t\t}\n\t},\n\n\t_normalize: function( items ) {\n\t\t// assume all items have the right format when the first item is complete\n\t\tif ( items.length && items[ 0 ].label && items[ 0 ].value ) {\n\t\t\treturn items;\n\t\t}\n\t\treturn $.map( items, function( item ) {\n\t\t\tif ( typeof item === \"string\" ) {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: item,\n\t\t\t\t\tvalue: item\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn $.extend( {}, item, {\n\t\t\t\tlabel: item.label || item.value,\n\t\t\t\tvalue: item.value || item.label\n\t\t\t});\n\t\t});\n\t},\n\n\t_suggest: function( items ) {\n\t\tvar ul = this.menu.element.empty();\n\t\tthis._renderMenu( ul, items );\n\t\tthis.isNewMenu = true;\n\t\tthis.menu.refresh();\n\n\t\t// size and position menu\n\t\tul.show();\n\t\tthis._resizeMenu();\n\t\tul.position( $.extend({\n\t\t\tof: this.element\n\t\t}, this.options.position ) );\n\n\t\tif ( this.options.autoFocus ) {\n\t\t\tthis.menu.next();\n\t\t}\n\t},\n\n\t_resizeMenu: function() {\n\t\tvar ul = this.menu.element;\n\t\tul.outerWidth( Math.max(\n\t\t\t// Firefox wraps long text (possibly a rounding bug)\n\t\t\t// so we add 1px to avoid the wrapping (#7513)\n\t\t\tul.width( \"\" ).outerWidth() + 1,\n\t\t\tthis.element.outerWidth()\n\t\t) );\n\t},\n\n\t_renderMenu: function( ul, items ) {\n\t\tvar that = this;\n\t\t$.each( items, function( index, item ) {\n\t\t\tthat._renderItemData( ul, item );\n\t\t});\n\t},\n\n\t_renderItemData: function( ul, item ) {\n\t\treturn this._renderItem( ul, item ).data( \"ui-autocomplete-item\", item );\n\t},\n\n\t_renderItem: function( ul, item ) {\n\t\treturn $( \"<li>\" ).text( item.label ).appendTo( ul );\n\t},\n\n\t_move: function( direction, event ) {\n\t\tif ( !this.menu.element.is( \":visible\" ) ) {\n\t\t\tthis.search( null, event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.menu.isFirstItem() && /^previous/.test( direction ) ||\n\t\t\t\tthis.menu.isLastItem() && /^next/.test( direction ) ) {\n\n\t\t\tif ( !this.isMultiLine ) {\n\t\t\t\tthis._value( this.term );\n\t\t\t}\n\n\t\t\tthis.menu.blur();\n\t\t\treturn;\n\t\t}\n\t\tthis.menu[ direction ]( event );\n\t},\n\n\twidget: function() {\n\t\treturn this.menu.element;\n\t},\n\n\t_value: function() {\n\t\treturn this.valueMethod.apply( this.element, arguments );\n\t},\n\n\t_keyEvent: function( keyEvent, event ) {\n\t\tif ( !this.isMultiLine || this.menu.element.is( \":visible\" ) ) {\n\t\t\tthis._move( keyEvent, event );\n\n\t\t\t// prevents moving cursor to beginning/end of the text field in some browsers\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n});\n\n$.extend( $.ui.autocomplete, {\n\tescapeRegex: function( value ) {\n\t\treturn value.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" );\n\t},\n\tfilter: function( array, term ) {\n\t\tvar matcher = new RegExp( $.ui.autocomplete.escapeRegex( term ), \"i\" );\n\t\treturn $.grep( array, function( value ) {\n\t\t\treturn matcher.test( value.label || value.value || value );\n\t\t});\n\t}\n});\n\n// live region extension, adding a `messages` option\n// NOTE: This is an experimental API. We are still investigating\n// a full solution for string manipulation and internationalization.\n$.widget( \"ui.autocomplete\", $.ui.autocomplete, {\n\toptions: {\n\t\tmessages: {\n\t\t\tnoResults: \"No search results.\",\n\t\t\tresults: function( amount ) {\n\t\t\t\treturn amount + ( amount > 1 ? \" results are\" : \" result is\" ) +\n\t\t\t\t\t\" available, use up and down arrow keys to navigate.\";\n\t\t\t}\n\t\t}\n\t},\n\n\t__response: function( content ) {\n\t\tvar message;\n\t\tthis._superApply( arguments );\n\t\tif ( this.options.disabled || this.cancelSearch ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( content && content.length ) {\n\t\t\tmessage = this.options.messages.results( content.length );\n\t\t} else {\n\t\t\tmessage = this.options.messages.noResults;\n\t\t}\n\t\tthis.liveRegion.children().hide();\n\t\t$( \"<div>\" ).text( message ).appendTo( this.liveRegion );\n\t}\n});\n\nvar autocomplete = $.ui.autocomplete;\n\n\n/*!\n * jQuery UI Button 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/button/\n */\n\n\nvar lastActive,\n\tbaseClasses = \"ui-button ui-widget ui-state-default ui-corner-all\",\n\ttypeClasses = \"ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only\",\n\tformResetHandler = function() {\n\t\tvar form = $( this );\n\t\tsetTimeout(function() {\n\t\t\tform.find( \":ui-button\" ).button( \"refresh\" );\n\t\t}, 1 );\n\t},\n\tradioGroup = function( radio ) {\n\t\tvar name = radio.name,\n\t\t\tform = radio.form,\n\t\t\tradios = $( [] );\n\t\tif ( name ) {\n\t\t\tname = name.replace( /'/g, \"\\\\'\" );\n\t\t\tif ( form ) {\n\t\t\t\tradios = $( form ).find( \"[name='\" + name + \"'][type=radio]\" );\n\t\t\t} else {\n\t\t\t\tradios = $( \"[name='\" + name + \"'][type=radio]\", radio.ownerDocument )\n\t\t\t\t\t.filter(function() {\n\t\t\t\t\t\treturn !this.form;\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn radios;\n\t};\n\n$.widget( \"ui.button\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<button>\",\n\toptions: {\n\t\tdisabled: null,\n\t\ttext: true,\n\t\tlabel: null,\n\t\ticons: {\n\t\t\tprimary: null,\n\t\t\tsecondary: null\n\t\t}\n\t},\n\t_create: function() {\n\t\tthis.element.closest( \"form\" )\n\t\t\t.unbind( \"reset\" + this.eventNamespace )\n\t\t\t.bind( \"reset\" + this.eventNamespace, formResetHandler );\n\n\t\tif ( typeof this.options.disabled !== \"boolean\" ) {\n\t\t\tthis.options.disabled = !!this.element.prop( \"disabled\" );\n\t\t} else {\n\t\t\tthis.element.prop( \"disabled\", this.options.disabled );\n\t\t}\n\n\t\tthis._determineButtonType();\n\t\tthis.hasTitle = !!this.buttonElement.attr( \"title\" );\n\n\t\tvar that = this,\n\t\t\toptions = this.options,\n\t\t\ttoggleButton = this.type === \"checkbox\" || this.type === \"radio\",\n\t\t\tactiveClass = !toggleButton ? \"ui-state-active\" : \"\";\n\n\t\tif ( options.label === null ) {\n\t\t\toptions.label = (this.type === \"input\" ? this.buttonElement.val() : this.buttonElement.html());\n\t\t}\n\n\t\tthis._hoverable( this.buttonElement );\n\n\t\tthis.buttonElement\n\t\t\t.addClass( baseClasses )\n\t\t\t.attr( \"role\", \"button\" )\n\t\t\t.bind( \"mouseenter\" + this.eventNamespace, function() {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( this === lastActive ) {\n\t\t\t\t\t$( this ).addClass( \"ui-state-active\" );\n\t\t\t\t}\n\t\t\t})\n\t\t\t.bind( \"mouseleave\" + this.eventNamespace, function() {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$( this ).removeClass( activeClass );\n\t\t\t})\n\t\t\t.bind( \"click\" + this.eventNamespace, function( event ) {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Can't use _focusable() because the element that receives focus\n\t\t// and the element that gets the ui-state-focus class are different\n\t\tthis._on({\n\t\t\tfocus: function() {\n\t\t\t\tthis.buttonElement.addClass( \"ui-state-focus\" );\n\t\t\t},\n\t\t\tblur: function() {\n\t\t\t\tthis.buttonElement.removeClass( \"ui-state-focus\" );\n\t\t\t}\n\t\t});\n\n\t\tif ( toggleButton ) {\n\t\t\tthis.element.bind( \"change\" + this.eventNamespace, function() {\n\t\t\t\tthat.refresh();\n\t\t\t});\n\t\t}\n\n\t\tif ( this.type === \"checkbox\" ) {\n\t\t\tthis.buttonElement.bind( \"click\" + this.eventNamespace, function() {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t} else if ( this.type === \"radio\" ) {\n\t\t\tthis.buttonElement.bind( \"click\" + this.eventNamespace, function() {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t$( this ).addClass( \"ui-state-active\" );\n\t\t\t\tthat.buttonElement.attr( \"aria-pressed\", \"true\" );\n\n\t\t\t\tvar radio = that.element[ 0 ];\n\t\t\t\tradioGroup( radio )\n\t\t\t\t\t.not( radio )\n\t\t\t\t\t.map(function() {\n\t\t\t\t\t\treturn $( this ).button( \"widget\" )[ 0 ];\n\t\t\t\t\t})\n\t\t\t\t\t.removeClass( \"ui-state-active\" )\n\t\t\t\t\t.attr( \"aria-pressed\", \"false\" );\n\t\t\t});\n\t\t} else {\n\t\t\tthis.buttonElement\n\t\t\t\t.bind( \"mousedown\" + this.eventNamespace, function() {\n\t\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t$( this ).addClass( \"ui-state-active\" );\n\t\t\t\t\tlastActive = this;\n\t\t\t\t\tthat.document.one( \"mouseup\", function() {\n\t\t\t\t\t\tlastActive = null;\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.bind( \"mouseup\" + this.eventNamespace, function() {\n\t\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t$( this ).removeClass( \"ui-state-active\" );\n\t\t\t\t})\n\t\t\t\t.bind( \"keydown\" + this.eventNamespace, function(event) {\n\t\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif ( event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER ) {\n\t\t\t\t\t\t$( this ).addClass( \"ui-state-active\" );\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// see #8559, we bind to blur here in case the button element loses\n\t\t\t\t// focus between keydown and keyup, it would be left in an \"active\" state\n\t\t\t\t.bind( \"keyup\" + this.eventNamespace + \" blur\" + this.eventNamespace, function() {\n\t\t\t\t\t$( this ).removeClass( \"ui-state-active\" );\n\t\t\t\t});\n\n\t\t\tif ( this.buttonElement.is(\"a\") ) {\n\t\t\t\tthis.buttonElement.keyup(function(event) {\n\t\t\t\t\tif ( event.keyCode === $.ui.keyCode.SPACE ) {\n\t\t\t\t\t\t// TODO pass through original event correctly (just as 2nd argument doesn't work)\n\t\t\t\t\t\t$( this ).click();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis._setOption( \"disabled\", options.disabled );\n\t\tthis._resetButton();\n\t},\n\n\t_determineButtonType: function() {\n\t\tvar ancestor, labelSelector, checked;\n\n\t\tif ( this.element.is(\"[type=checkbox]\") ) {\n\t\t\tthis.type = \"checkbox\";\n\t\t} else if ( this.element.is(\"[type=radio]\") ) {\n\t\t\tthis.type = \"radio\";\n\t\t} else if ( this.element.is(\"input\") ) {\n\t\t\tthis.type = \"input\";\n\t\t} else {\n\t\t\tthis.type = \"button\";\n\t\t}\n\n\t\tif ( this.type === \"checkbox\" || this.type === \"radio\" ) {\n\t\t\t// we don't search against the document in case the element\n\t\t\t// is disconnected from the DOM\n\t\t\tancestor = this.element.parents().last();\n\t\t\tlabelSelector = \"label[for='\" + this.element.attr(\"id\") + \"']\";\n\t\t\tthis.buttonElement = ancestor.find( labelSelector );\n\t\t\tif ( !this.buttonElement.length ) {\n\t\t\t\tancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();\n\t\t\t\tthis.buttonElement = ancestor.filter( labelSelector );\n\t\t\t\tif ( !this.buttonElement.length ) {\n\t\t\t\t\tthis.buttonElement = ancestor.find( labelSelector );\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.element.addClass( \"ui-helper-hidden-accessible\" );\n\n\t\t\tchecked = this.element.is( \":checked\" );\n\t\t\tif ( checked ) {\n\t\t\t\tthis.buttonElement.addClass( \"ui-state-active\" );\n\t\t\t}\n\t\t\tthis.buttonElement.prop( \"aria-pressed\", checked );\n\t\t} else {\n\t\t\tthis.buttonElement = this.element;\n\t\t}\n\t},\n\n\twidget: function() {\n\t\treturn this.buttonElement;\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass( \"ui-helper-hidden-accessible\" );\n\t\tthis.buttonElement\n\t\t\t.removeClass( baseClasses + \" ui-state-active \" + typeClasses )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-pressed\" )\n\t\t\t.html( this.buttonElement.find(\".ui-button-text\").html() );\n\n\t\tif ( !this.hasTitle ) {\n\t\t\tthis.buttonElement.removeAttr( \"title\" );\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.widget().toggleClass( \"ui-state-disabled\", !!value );\n\t\t\tthis.element.prop( \"disabled\", !!value );\n\t\t\tif ( value ) {\n\t\t\t\tif ( this.type === \"checkbox\" || this.type === \"radio\" ) {\n\t\t\t\t\tthis.buttonElement.removeClass( \"ui-state-focus\" );\n\t\t\t\t} else {\n\t\t\t\t\tthis.buttonElement.removeClass( \"ui-state-focus ui-state-active\" );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis._resetButton();\n\t},\n\n\trefresh: function() {\n\t\t//See #8237 & #8828\n\t\tvar isDisabled = this.element.is( \"input, button\" ) ? this.element.is( \":disabled\" ) : this.element.hasClass( \"ui-button-disabled\" );\n\n\t\tif ( isDisabled !== this.options.disabled ) {\n\t\t\tthis._setOption( \"disabled\", isDisabled );\n\t\t}\n\t\tif ( this.type === \"radio\" ) {\n\t\t\tradioGroup( this.element[0] ).each(function() {\n\t\t\t\tif ( $( this ).is( \":checked\" ) ) {\n\t\t\t\t\t$( this ).button( \"widget\" )\n\t\t\t\t\t\t.addClass( \"ui-state-active\" )\n\t\t\t\t\t\t.attr( \"aria-pressed\", \"true\" );\n\t\t\t\t} else {\n\t\t\t\t\t$( this ).button( \"widget\" )\n\t\t\t\t\t\t.removeClass( \"ui-state-active\" )\n\t\t\t\t\t\t.attr( \"aria-pressed\", \"false\" );\n\t\t\t\t}\n\t\t\t});\n\t\t} else if ( this.type === \"checkbox\" ) {\n\t\t\tif ( this.element.is( \":checked\" ) ) {\n\t\t\t\tthis.buttonElement\n\t\t\t\t\t.addClass( \"ui-state-active\" )\n\t\t\t\t\t.attr( \"aria-pressed\", \"true\" );\n\t\t\t} else {\n\t\t\t\tthis.buttonElement\n\t\t\t\t\t.removeClass( \"ui-state-active\" )\n\t\t\t\t\t.attr( \"aria-pressed\", \"false\" );\n\t\t\t}\n\t\t}\n\t},\n\n\t_resetButton: function() {\n\t\tif ( this.type === \"input\" ) {\n\t\t\tif ( this.options.label ) {\n\t\t\t\tthis.element.val( this.options.label );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tvar buttonElement = this.buttonElement.removeClass( typeClasses ),\n\t\t\tbuttonText = $( \"<span></span>\", this.document[0] )\n\t\t\t\t.addClass( \"ui-button-text\" )\n\t\t\t\t.html( this.options.label )\n\t\t\t\t.appendTo( buttonElement.empty() )\n\t\t\t\t.text(),\n\t\t\ticons = this.options.icons,\n\t\t\tmultipleIcons = icons.primary && icons.secondary,\n\t\t\tbuttonClasses = [];\n\n\t\tif ( icons.primary || icons.secondary ) {\n\t\t\tif ( this.options.text ) {\n\t\t\t\tbuttonClasses.push( \"ui-button-text-icon\" + ( multipleIcons ? \"s\" : ( icons.primary ? \"-primary\" : \"-secondary\" ) ) );\n\t\t\t}\n\n\t\t\tif ( icons.primary ) {\n\t\t\t\tbuttonElement.prepend( \"<span class='ui-button-icon-primary ui-icon \" + icons.primary + \"'></span>\" );\n\t\t\t}\n\n\t\t\tif ( icons.secondary ) {\n\t\t\t\tbuttonElement.append( \"<span class='ui-button-icon-secondary ui-icon \" + icons.secondary + \"'></span>\" );\n\t\t\t}\n\n\t\t\tif ( !this.options.text ) {\n\t\t\t\tbuttonClasses.push( multipleIcons ? \"ui-button-icons-only\" : \"ui-button-icon-only\" );\n\n\t\t\t\tif ( !this.hasTitle ) {\n\t\t\t\t\tbuttonElement.attr( \"title\", $.trim( buttonText ) );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tbuttonClasses.push( \"ui-button-text-only\" );\n\t\t}\n\t\tbuttonElement.addClass( buttonClasses.join( \" \" ) );\n\t}\n});\n\n$.widget( \"ui.buttonset\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\titems: \"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)\"\n\t},\n\n\t_create: function() {\n\t\tthis.element.addClass( \"ui-buttonset\" );\n\t},\n\n\t_init: function() {\n\t\tthis.refresh();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.buttons.button( \"option\", key, value );\n\t\t}\n\n\t\tthis._super( key, value );\n\t},\n\n\trefresh: function() {\n\t\tvar rtl = this.element.css( \"direction\" ) === \"rtl\",\n\t\t\tallButtons = this.element.find( this.options.items ),\n\t\t\texistingButtons = allButtons.filter( \":ui-button\" );\n\n\t\t// Initialize new buttons\n\t\tallButtons.not( \":ui-button\" ).button();\n\n\t\t// Refresh existing buttons\n\t\texistingButtons.button( \"refresh\" );\n\n\t\tthis.buttons = allButtons\n\t\t\t.map(function() {\n\t\t\t\treturn $( this ).button( \"widget\" )[ 0 ];\n\t\t\t})\n\t\t\t\t.removeClass( \"ui-corner-all ui-corner-left ui-corner-right\" )\n\t\t\t\t.filter( \":first\" )\n\t\t\t\t\t.addClass( rtl ? \"ui-corner-right\" : \"ui-corner-left\" )\n\t\t\t\t.end()\n\t\t\t\t.filter( \":last\" )\n\t\t\t\t\t.addClass( rtl ? \"ui-corner-left\" : \"ui-corner-right\" )\n\t\t\t\t.end()\n\t\t\t.end();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element.removeClass( \"ui-buttonset\" );\n\t\tthis.buttons\n\t\t\t.map(function() {\n\t\t\t\treturn $( this ).button( \"widget\" )[ 0 ];\n\t\t\t})\n\t\t\t\t.removeClass( \"ui-corner-left ui-corner-right\" )\n\t\t\t.end()\n\t\t\t.button( \"destroy\" );\n\t}\n});\n\nvar button = $.ui.button;\n\n\n/*!\n * jQuery UI Datepicker 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/datepicker/\n */\n\n\n$.extend($.ui, { datepicker: { version: \"1.11.4\" } });\n\nvar datepicker_instActive;\n\nfunction datepicker_getZindex( elem ) {\n\tvar position, value;\n\twhile ( elem.length && elem[ 0 ] !== document ) {\n\t\t// Ignore z-index if position is set to a value where z-index is ignored by the browser\n\t\t// This makes behavior of this function consistent across browsers\n\t\t// WebKit always returns auto if the element is positioned\n\t\tposition = elem.css( \"position\" );\n\t\tif ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\n\t\t\t// IE returns 0 when zIndex is not specified\n\t\t\t// other browsers return a string\n\t\t\t// we ignore the case of nested elements with an explicit value of 0\n\t\t\t// <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n\t\t\tvalue = parseInt( elem.css( \"zIndex\" ), 10 );\n\t\t\tif ( !isNaN( value ) && value !== 0 ) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t\telem = elem.parent();\n\t}\n\n\treturn 0;\n}\n/* Date picker manager.\n   Use the singleton instance of this class, $.datepicker, to interact with the date picker.\n   Settings for (groups of) date pickers are maintained in an instance object,\n   allowing multiple different settings on the same page. */\n\nfunction Datepicker() {\n\tthis._curInst = null; // The current instance in use\n\tthis._keyEvent = false; // If the last event was a key event\n\tthis._disabledInputs = []; // List of date picker inputs that have been disabled\n\tthis._datepickerShowing = false; // True if the popup picker is showing , false if not\n\tthis._inDialog = false; // True if showing within a \"dialog\", false if not\n\tthis._mainDivId = \"ui-datepicker-div\"; // The ID of the main datepicker division\n\tthis._inlineClass = \"ui-datepicker-inline\"; // The name of the inline marker class\n\tthis._appendClass = \"ui-datepicker-append\"; // The name of the append marker class\n\tthis._triggerClass = \"ui-datepicker-trigger\"; // The name of the trigger marker class\n\tthis._dialogClass = \"ui-datepicker-dialog\"; // The name of the dialog marker class\n\tthis._disableClass = \"ui-datepicker-disabled\"; // The name of the disabled covering marker class\n\tthis._unselectableClass = \"ui-datepicker-unselectable\"; // The name of the unselectable cell marker class\n\tthis._currentClass = \"ui-datepicker-current-day\"; // The name of the current day marker class\n\tthis._dayOverClass = \"ui-datepicker-days-cell-over\"; // The name of the day hover marker class\n\tthis.regional = []; // Available regional settings, indexed by language code\n\tthis.regional[\"\"] = { // Default regional settings\n\t\tcloseText: \"Done\", // Display text for close link\n\t\tprevText: \"Prev\", // Display text for previous month link\n\t\tnextText: \"Next\", // Display text for next month link\n\t\tcurrentText: \"Today\", // Display text for current month link\n\t\tmonthNames: [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\n\t\t\t\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"], // Names of months for drop-down and formatting\n\t\tmonthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], // For formatting\n\t\tdayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], // For formatting\n\t\tdayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], // For formatting\n\t\tdayNamesMin: [\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"], // Column headings for days starting at Sunday\n\t\tweekHeader: \"Wk\", // Column header for week of the year\n\t\tdateFormat: \"mm/dd/yy\", // See format options on parseDate\n\t\tfirstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...\n\t\tisRTL: false, // True if right-to-left language, false if left-to-right\n\t\tshowMonthAfterYear: false, // True if the year select precedes month, false for month then year\n\t\tyearSuffix: \"\" // Additional text to append to the year in the month headers\n\t};\n\tthis._defaults = { // Global defaults for all the date picker instances\n\t\tshowOn: \"focus\", // \"focus\" for popup on focus,\n\t\t\t// \"button\" for trigger button, or \"both\" for either\n\t\tshowAnim: \"fadeIn\", // Name of jQuery animation for popup\n\t\tshowOptions: {}, // Options for enhanced animations\n\t\tdefaultDate: null, // Used when field is blank: actual date,\n\t\t\t// +/-number for offset from today, null for today\n\t\tappendText: \"\", // Display text following the input box, e.g. showing the format\n\t\tbuttonText: \"...\", // Text for trigger button\n\t\tbuttonImage: \"\", // URL for trigger button image\n\t\tbuttonImageOnly: false, // True if the image appears alone, false if it appears on a button\n\t\thideIfNoPrevNext: false, // True to hide next/previous month links\n\t\t\t// if not applicable, false to just disable them\n\t\tnavigationAsDateFormat: false, // True if date formatting applied to prev/today/next links\n\t\tgotoCurrent: false, // True if today link goes back to current selection instead\n\t\tchangeMonth: false, // True if month can be selected directly, false if only prev/next\n\t\tchangeYear: false, // True if year can be selected directly, false if only prev/next\n\t\tyearRange: \"c-10:c+10\", // Range of years to display in drop-down,\n\t\t\t// either relative to today's year (-nn:+nn), relative to currently displayed year\n\t\t\t// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)\n\t\tshowOtherMonths: false, // True to show dates in other months, false to leave blank\n\t\tselectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable\n\t\tshowWeek: false, // True to show week of the year, false to not show it\n\t\tcalculateWeek: this.iso8601Week, // How to calculate the week of the year,\n\t\t\t// takes a Date and returns the number of the week for it\n\t\tshortYearCutoff: \"+10\", // Short year values < this are in the current century,\n\t\t\t// > this are in the previous century,\n\t\t\t// string value starting with \"+\" for current year + value\n\t\tminDate: null, // The earliest selectable date, or null for no limit\n\t\tmaxDate: null, // The latest selectable date, or null for no limit\n\t\tduration: \"fast\", // Duration of display/closure\n\t\tbeforeShowDay: null, // Function that takes a date and returns an array with\n\t\t\t// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or \"\",\n\t\t\t// [2] = cell title (optional), e.g. $.datepicker.noWeekends\n\t\tbeforeShow: null, // Function that takes an input field and\n\t\t\t// returns a set of custom settings for the date picker\n\t\tonSelect: null, // Define a callback function when a date is selected\n\t\tonChangeMonthYear: null, // Define a callback function when the month or year is changed\n\t\tonClose: null, // Define a callback function when the datepicker is closed\n\t\tnumberOfMonths: 1, // Number of months to show at a time\n\t\tshowCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)\n\t\tstepMonths: 1, // Number of months to step back/forward\n\t\tstepBigMonths: 12, // Number of months to step back/forward for the big links\n\t\taltField: \"\", // Selector for an alternate field to store selected dates into\n\t\taltFormat: \"\", // The date format to use for the alternate field\n\t\tconstrainInput: true, // The input is constrained by the current date format\n\t\tshowButtonPanel: false, // True to show button panel, false to not show it\n\t\tautoSize: false, // True to size the input for the date format, false to leave as is\n\t\tdisabled: false // The initial disabled state\n\t};\n\t$.extend(this._defaults, this.regional[\"\"]);\n\tthis.regional.en = $.extend( true, {}, this.regional[ \"\" ]);\n\tthis.regional[ \"en-US\" ] = $.extend( true, {}, this.regional.en );\n\tthis.dpDiv = datepicker_bindHover($(\"<div id='\" + this._mainDivId + \"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\"));\n}\n\n$.extend(Datepicker.prototype, {\n\t/* Class name added to elements to indicate already configured with a date picker. */\n\tmarkerClassName: \"hasDatepicker\",\n\n\t//Keep track of the maximum number of rows displayed (see #7043)\n\tmaxRows: 4,\n\n\t// TODO rename to \"widget\" when switching to widget factory\n\t_widgetDatepicker: function() {\n\t\treturn this.dpDiv;\n\t},\n\n\t/* Override the default settings for all instances of the date picker.\n\t * @param  settings  object - the new settings to use as defaults (anonymous object)\n\t * @return the manager object\n\t */\n\tsetDefaults: function(settings) {\n\t\tdatepicker_extendRemove(this._defaults, settings || {});\n\t\treturn this;\n\t},\n\n\t/* Attach the date picker to a jQuery selection.\n\t * @param  target\telement - the target input field or division or span\n\t * @param  settings  object - the new settings to use for this date picker instance (anonymous)\n\t */\n\t_attachDatepicker: function(target, settings) {\n\t\tvar nodeName, inline, inst;\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\tinline = (nodeName === \"div\" || nodeName === \"span\");\n\t\tif (!target.id) {\n\t\t\tthis.uuid += 1;\n\t\t\ttarget.id = \"dp\" + this.uuid;\n\t\t}\n\t\tinst = this._newInst($(target), inline);\n\t\tinst.settings = $.extend({}, settings || {});\n\t\tif (nodeName === \"input\") {\n\t\t\tthis._connectDatepicker(target, inst);\n\t\t} else if (inline) {\n\t\t\tthis._inlineDatepicker(target, inst);\n\t\t}\n\t},\n\n\t/* Create a new instance object. */\n\t_newInst: function(target, inline) {\n\t\tvar id = target[0].id.replace(/([^A-Za-z0-9_\\-])/g, \"\\\\\\\\$1\"); // escape jQuery meta chars\n\t\treturn {id: id, input: target, // associated target\n\t\t\tselectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection\n\t\t\tdrawMonth: 0, drawYear: 0, // month being drawn\n\t\t\tinline: inline, // is datepicker inline or not\n\t\t\tdpDiv: (!inline ? this.dpDiv : // presentation div\n\t\t\tdatepicker_bindHover($(\"<div class='\" + this._inlineClass + \" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\")))};\n\t},\n\n\t/* Attach the date picker to an input field. */\n\t_connectDatepicker: function(target, inst) {\n\t\tvar input = $(target);\n\t\tinst.append = $([]);\n\t\tinst.trigger = $([]);\n\t\tif (input.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\t\tthis._attachments(input, inst);\n\t\tinput.addClass(this.markerClassName).keydown(this._doKeyDown).\n\t\t\tkeypress(this._doKeyPress).keyup(this._doKeyUp);\n\t\tthis._autoSize(inst);\n\t\t$.data(target, \"datepicker\", inst);\n\t\t//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)\n\t\tif( inst.settings.disabled ) {\n\t\t\tthis._disableDatepicker( target );\n\t\t}\n\t},\n\n\t/* Make attachments based on settings. */\n\t_attachments: function(input, inst) {\n\t\tvar showOn, buttonText, buttonImage,\n\t\t\tappendText = this._get(inst, \"appendText\"),\n\t\t\tisRTL = this._get(inst, \"isRTL\");\n\n\t\tif (inst.append) {\n\t\t\tinst.append.remove();\n\t\t}\n\t\tif (appendText) {\n\t\t\tinst.append = $(\"<span class='\" + this._appendClass + \"'>\" + appendText + \"</span>\");\n\t\t\tinput[isRTL ? \"before\" : \"after\"](inst.append);\n\t\t}\n\n\t\tinput.unbind(\"focus\", this._showDatepicker);\n\n\t\tif (inst.trigger) {\n\t\t\tinst.trigger.remove();\n\t\t}\n\n\t\tshowOn = this._get(inst, \"showOn\");\n\t\tif (showOn === \"focus\" || showOn === \"both\") { // pop-up date picker when in the marked field\n\t\t\tinput.focus(this._showDatepicker);\n\t\t}\n\t\tif (showOn === \"button\" || showOn === \"both\") { // pop-up date picker when button clicked\n\t\t\tbuttonText = this._get(inst, \"buttonText\");\n\t\t\tbuttonImage = this._get(inst, \"buttonImage\");\n\t\t\tinst.trigger = $(this._get(inst, \"buttonImageOnly\") ?\n\t\t\t\t$(\"<img/>\").addClass(this._triggerClass).\n\t\t\t\t\tattr({ src: buttonImage, alt: buttonText, title: buttonText }) :\n\t\t\t\t$(\"<button type='button'></button>\").addClass(this._triggerClass).\n\t\t\t\t\thtml(!buttonImage ? buttonText : $(\"<img/>\").attr(\n\t\t\t\t\t{ src:buttonImage, alt:buttonText, title:buttonText })));\n\t\t\tinput[isRTL ? \"before\" : \"after\"](inst.trigger);\n\t\t\tinst.trigger.click(function() {\n\t\t\t\tif ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {\n\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t} else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {\n\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t\t$.datepicker._showDatepicker(input[0]);\n\t\t\t\t} else {\n\t\t\t\t\t$.datepicker._showDatepicker(input[0]);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t},\n\n\t/* Apply the maximum length for the date format. */\n\t_autoSize: function(inst) {\n\t\tif (this._get(inst, \"autoSize\") && !inst.inline) {\n\t\t\tvar findMax, max, maxI, i,\n\t\t\t\tdate = new Date(2009, 12 - 1, 20), // Ensure double digits\n\t\t\t\tdateFormat = this._get(inst, \"dateFormat\");\n\n\t\t\tif (dateFormat.match(/[DM]/)) {\n\t\t\t\tfindMax = function(names) {\n\t\t\t\t\tmax = 0;\n\t\t\t\t\tmaxI = 0;\n\t\t\t\t\tfor (i = 0; i < names.length; i++) {\n\t\t\t\t\t\tif (names[i].length > max) {\n\t\t\t\t\t\t\tmax = names[i].length;\n\t\t\t\t\t\t\tmaxI = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn maxI;\n\t\t\t\t};\n\t\t\t\tdate.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?\n\t\t\t\t\t\"monthNames\" : \"monthNamesShort\"))));\n\t\t\t\tdate.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?\n\t\t\t\t\t\"dayNames\" : \"dayNamesShort\"))) + 20 - date.getDay());\n\t\t\t}\n\t\t\tinst.input.attr(\"size\", this._formatDate(inst, date).length);\n\t\t}\n\t},\n\n\t/* Attach an inline date picker to a div. */\n\t_inlineDatepicker: function(target, inst) {\n\t\tvar divSpan = $(target);\n\t\tif (divSpan.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\t\tdivSpan.addClass(this.markerClassName).append(inst.dpDiv);\n\t\t$.data(target, \"datepicker\", inst);\n\t\tthis._setDate(inst, this._getDefaultDate(inst), true);\n\t\tthis._updateDatepicker(inst);\n\t\tthis._updateAlternate(inst);\n\t\t//If disabled option is true, disable the datepicker before showing it (see ticket #5665)\n\t\tif( inst.settings.disabled ) {\n\t\t\tthis._disableDatepicker( target );\n\t\t}\n\t\t// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements\n\t\t// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height\n\t\tinst.dpDiv.css( \"display\", \"block\" );\n\t},\n\n\t/* Pop-up the date picker in a \"dialog\" box.\n\t * @param  input element - ignored\n\t * @param  date\tstring or Date - the initial date to display\n\t * @param  onSelect  function - the function to call when a date is selected\n\t * @param  settings  object - update the dialog date picker instance's settings (anonymous object)\n\t * @param  pos int[2] - coordinates for the dialog's position within the screen or\n\t *\t\t\t\t\tevent - with x/y coordinates or\n\t *\t\t\t\t\tleave empty for default (screen centre)\n\t * @return the manager object\n\t */\n\t_dialogDatepicker: function(input, date, onSelect, settings, pos) {\n\t\tvar id, browserWidth, browserHeight, scrollX, scrollY,\n\t\t\tinst = this._dialogInst; // internal instance\n\n\t\tif (!inst) {\n\t\t\tthis.uuid += 1;\n\t\t\tid = \"dp\" + this.uuid;\n\t\t\tthis._dialogInput = $(\"<input type='text' id='\" + id +\n\t\t\t\t\"' style='position: absolute; top: -100px; width: 0px;'/>\");\n\t\t\tthis._dialogInput.keydown(this._doKeyDown);\n\t\t\t$(\"body\").append(this._dialogInput);\n\t\t\tinst = this._dialogInst = this._newInst(this._dialogInput, false);\n\t\t\tinst.settings = {};\n\t\t\t$.data(this._dialogInput[0], \"datepicker\", inst);\n\t\t}\n\t\tdatepicker_extendRemove(inst.settings, settings || {});\n\t\tdate = (date && date.constructor === Date ? this._formatDate(inst, date) : date);\n\t\tthis._dialogInput.val(date);\n\n\t\tthis._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);\n\t\tif (!this._pos) {\n\t\t\tbrowserWidth = document.documentElement.clientWidth;\n\t\t\tbrowserHeight = document.documentElement.clientHeight;\n\t\t\tscrollX = document.documentElement.scrollLeft || document.body.scrollLeft;\n\t\t\tscrollY = document.documentElement.scrollTop || document.body.scrollTop;\n\t\t\tthis._pos = // should use actual width/height below\n\t\t\t\t[(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];\n\t\t}\n\n\t\t// move input on screen for focus, but hidden behind dialog\n\t\tthis._dialogInput.css(\"left\", (this._pos[0] + 20) + \"px\").css(\"top\", this._pos[1] + \"px\");\n\t\tinst.settings.onSelect = onSelect;\n\t\tthis._inDialog = true;\n\t\tthis.dpDiv.addClass(this._dialogClass);\n\t\tthis._showDatepicker(this._dialogInput[0]);\n\t\tif ($.blockUI) {\n\t\t\t$.blockUI(this.dpDiv);\n\t\t}\n\t\t$.data(this._dialogInput[0], \"datepicker\", inst);\n\t\treturn this;\n\t},\n\n\t/* Detach a datepicker from its control.\n\t * @param  target\telement - the target input field or division or span\n\t */\n\t_destroyDatepicker: function(target) {\n\t\tvar nodeName,\n\t\t\t$target = $(target),\n\t\t\tinst = $.data(target, \"datepicker\");\n\n\t\tif (!$target.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\t$.removeData(target, \"datepicker\");\n\t\tif (nodeName === \"input\") {\n\t\t\tinst.append.remove();\n\t\t\tinst.trigger.remove();\n\t\t\t$target.removeClass(this.markerClassName).\n\t\t\t\tunbind(\"focus\", this._showDatepicker).\n\t\t\t\tunbind(\"keydown\", this._doKeyDown).\n\t\t\t\tunbind(\"keypress\", this._doKeyPress).\n\t\t\t\tunbind(\"keyup\", this._doKeyUp);\n\t\t} else if (nodeName === \"div\" || nodeName === \"span\") {\n\t\t\t$target.removeClass(this.markerClassName).empty();\n\t\t}\n\n\t\tif ( datepicker_instActive === inst ) {\n\t\t\tdatepicker_instActive = null;\n\t\t}\n\t},\n\n\t/* Enable the date picker to a jQuery selection.\n\t * @param  target\telement - the target input field or division or span\n\t */\n\t_enableDatepicker: function(target) {\n\t\tvar nodeName, inline,\n\t\t\t$target = $(target),\n\t\t\tinst = $.data(target, \"datepicker\");\n\n\t\tif (!$target.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\tif (nodeName === \"input\") {\n\t\t\ttarget.disabled = false;\n\t\t\tinst.trigger.filter(\"button\").\n\t\t\t\teach(function() { this.disabled = false; }).end().\n\t\t\t\tfilter(\"img\").css({opacity: \"1.0\", cursor: \"\"});\n\t\t} else if (nodeName === \"div\" || nodeName === \"span\") {\n\t\t\tinline = $target.children(\".\" + this._inlineClass);\n\t\t\tinline.children().removeClass(\"ui-state-disabled\");\n\t\t\tinline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").\n\t\t\t\tprop(\"disabled\", false);\n\t\t}\n\t\tthis._disabledInputs = $.map(this._disabledInputs,\n\t\t\tfunction(value) { return (value === target ? null : value); }); // delete entry\n\t},\n\n\t/* Disable the date picker to a jQuery selection.\n\t * @param  target\telement - the target input field or division or span\n\t */\n\t_disableDatepicker: function(target) {\n\t\tvar nodeName, inline,\n\t\t\t$target = $(target),\n\t\t\tinst = $.data(target, \"datepicker\");\n\n\t\tif (!$target.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\tif (nodeName === \"input\") {\n\t\t\ttarget.disabled = true;\n\t\t\tinst.trigger.filter(\"button\").\n\t\t\t\teach(function() { this.disabled = true; }).end().\n\t\t\t\tfilter(\"img\").css({opacity: \"0.5\", cursor: \"default\"});\n\t\t} else if (nodeName === \"div\" || nodeName === \"span\") {\n\t\t\tinline = $target.children(\".\" + this._inlineClass);\n\t\t\tinline.children().addClass(\"ui-state-disabled\");\n\t\t\tinline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").\n\t\t\t\tprop(\"disabled\", true);\n\t\t}\n\t\tthis._disabledInputs = $.map(this._disabledInputs,\n\t\t\tfunction(value) { return (value === target ? null : value); }); // delete entry\n\t\tthis._disabledInputs[this._disabledInputs.length] = target;\n\t},\n\n\t/* Is the first field in a jQuery collection disabled as a datepicker?\n\t * @param  target\telement - the target input field or division or span\n\t * @return boolean - true if disabled, false if enabled\n\t */\n\t_isDisabledDatepicker: function(target) {\n\t\tif (!target) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (var i = 0; i < this._disabledInputs.length; i++) {\n\t\t\tif (this._disabledInputs[i] === target) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/* Retrieve the instance data for the target control.\n\t * @param  target  element - the target input field or division or span\n\t * @return  object - the associated instance data\n\t * @throws  error if a jQuery problem getting data\n\t */\n\t_getInst: function(target) {\n\t\ttry {\n\t\t\treturn $.data(target, \"datepicker\");\n\t\t}\n\t\tcatch (err) {\n\t\t\tthrow \"Missing instance data for this datepicker\";\n\t\t}\n\t},\n\n\t/* Update or retrieve the settings for a date picker attached to an input field or division.\n\t * @param  target  element - the target input field or division or span\n\t * @param  name\tobject - the new settings to update or\n\t *\t\t\t\tstring - the name of the setting to change or retrieve,\n\t *\t\t\t\twhen retrieving also \"all\" for all instance settings or\n\t *\t\t\t\t\"defaults\" for all global defaults\n\t * @param  value   any - the new value for the setting\n\t *\t\t\t\t(omit if above is an object or to retrieve a value)\n\t */\n\t_optionDatepicker: function(target, name, value) {\n\t\tvar settings, date, minDate, maxDate,\n\t\t\tinst = this._getInst(target);\n\n\t\tif (arguments.length === 2 && typeof name === \"string\") {\n\t\t\treturn (name === \"defaults\" ? $.extend({}, $.datepicker._defaults) :\n\t\t\t\t(inst ? (name === \"all\" ? $.extend({}, inst.settings) :\n\t\t\t\tthis._get(inst, name)) : null));\n\t\t}\n\n\t\tsettings = name || {};\n\t\tif (typeof name === \"string\") {\n\t\t\tsettings = {};\n\t\t\tsettings[name] = value;\n\t\t}\n\n\t\tif (inst) {\n\t\t\tif (this._curInst === inst) {\n\t\t\t\tthis._hideDatepicker();\n\t\t\t}\n\n\t\t\tdate = this._getDateDatepicker(target, true);\n\t\t\tminDate = this._getMinMaxDate(inst, \"min\");\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\");\n\t\t\tdatepicker_extendRemove(inst.settings, settings);\n\t\t\t// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided\n\t\t\tif (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {\n\t\t\t\tinst.settings.minDate = this._formatDate(inst, minDate);\n\t\t\t}\n\t\t\tif (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {\n\t\t\t\tinst.settings.maxDate = this._formatDate(inst, maxDate);\n\t\t\t}\n\t\t\tif ( \"disabled\" in settings ) {\n\t\t\t\tif ( settings.disabled ) {\n\t\t\t\t\tthis._disableDatepicker(target);\n\t\t\t\t} else {\n\t\t\t\t\tthis._enableDatepicker(target);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._attachments($(target), inst);\n\t\t\tthis._autoSize(inst);\n\t\t\tthis._setDate(inst, date);\n\t\t\tthis._updateAlternate(inst);\n\t\t\tthis._updateDatepicker(inst);\n\t\t}\n\t},\n\n\t// change method deprecated\n\t_changeDatepicker: function(target, name, value) {\n\t\tthis._optionDatepicker(target, name, value);\n\t},\n\n\t/* Redraw the date picker attached to an input field or division.\n\t * @param  target  element - the target input field or division or span\n\t */\n\t_refreshDatepicker: function(target) {\n\t\tvar inst = this._getInst(target);\n\t\tif (inst) {\n\t\t\tthis._updateDatepicker(inst);\n\t\t}\n\t},\n\n\t/* Set the dates for a jQuery selection.\n\t * @param  target element - the target input field or division or span\n\t * @param  date\tDate - the new date\n\t */\n\t_setDateDatepicker: function(target, date) {\n\t\tvar inst = this._getInst(target);\n\t\tif (inst) {\n\t\t\tthis._setDate(inst, date);\n\t\t\tthis._updateDatepicker(inst);\n\t\t\tthis._updateAlternate(inst);\n\t\t}\n\t},\n\n\t/* Get the date(s) for the first entry in a jQuery selection.\n\t * @param  target element - the target input field or division or span\n\t * @param  noDefault boolean - true if no default date is to be used\n\t * @return Date - the current date\n\t */\n\t_getDateDatepicker: function(target, noDefault) {\n\t\tvar inst = this._getInst(target);\n\t\tif (inst && !inst.inline) {\n\t\t\tthis._setDateFromField(inst, noDefault);\n\t\t}\n\t\treturn (inst ? this._getDate(inst) : null);\n\t},\n\n\t/* Handle keystrokes. */\n\t_doKeyDown: function(event) {\n\t\tvar onSelect, dateStr, sel,\n\t\t\tinst = $.datepicker._getInst(event.target),\n\t\t\thandled = true,\n\t\t\tisRTL = inst.dpDiv.is(\".ui-datepicker-rtl\");\n\n\t\tinst._keyEvent = true;\n\t\tif ($.datepicker._datepickerShowing) {\n\t\t\tswitch (event.keyCode) {\n\t\t\t\tcase 9: $.datepicker._hideDatepicker();\n\t\t\t\t\t\thandled = false;\n\t\t\t\t\t\tbreak; // hide on tab out\n\t\t\t\tcase 13: sel = $(\"td.\" + $.datepicker._dayOverClass + \":not(.\" +\n\t\t\t\t\t\t\t\t\t$.datepicker._currentClass + \")\", inst.dpDiv);\n\t\t\t\t\t\tif (sel[0]) {\n\t\t\t\t\t\t\t$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tonSelect = $.datepicker._get(inst, \"onSelect\");\n\t\t\t\t\t\tif (onSelect) {\n\t\t\t\t\t\t\tdateStr = $.datepicker._formatDate(inst);\n\n\t\t\t\t\t\t\t// trigger custom callback\n\t\t\t\t\t\t\tonSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false; // don't submit the form\n\t\t\t\tcase 27: $.datepicker._hideDatepicker();\n\t\t\t\t\t\tbreak; // hide on escape\n\t\t\t\tcase 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?\n\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepBigMonths\") :\n\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepMonths\")), \"M\");\n\t\t\t\t\t\tbreak; // previous month/year on page up/+ ctrl\n\t\t\t\tcase 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?\n\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepBigMonths\") :\n\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepMonths\")), \"M\");\n\t\t\t\t\t\tbreak; // next month/year on page down/+ ctrl\n\t\t\t\tcase 35: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._clearDate(event.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // clear on ctrl or command +end\n\t\t\t\tcase 36: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._gotoToday(event.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // current on ctrl or command +home\n\t\t\t\tcase 37: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), \"D\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\t// -1 day on ctrl or command +left\n\t\t\t\t\t\tif (event.originalEvent.altKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (event.ctrlKey ?\n\t\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepBigMonths\") :\n\t\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepMonths\")), \"M\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// next month/year on alt +left on Mac\n\t\t\t\t\t\tbreak;\n\t\t\t\tcase 38: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, -7, \"D\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // -1 week on ctrl or command +up\n\t\t\t\tcase 39: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), \"D\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\t// +1 day on ctrl or command +right\n\t\t\t\t\t\tif (event.originalEvent.altKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (event.ctrlKey ?\n\t\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepBigMonths\") :\n\t\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepMonths\")), \"M\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// next month/year on alt +right\n\t\t\t\t\t\tbreak;\n\t\t\t\tcase 40: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, +7, \"D\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // +1 week on ctrl or command +down\n\t\t\t\tdefault: handled = false;\n\t\t\t}\n\t\t} else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home\n\t\t\t$.datepicker._showDatepicker(this);\n\t\t} else {\n\t\t\thandled = false;\n\t\t}\n\n\t\tif (handled) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t},\n\n\t/* Filter entered characters - based on date format. */\n\t_doKeyPress: function(event) {\n\t\tvar chars, chr,\n\t\t\tinst = $.datepicker._getInst(event.target);\n\n\t\tif ($.datepicker._get(inst, \"constrainInput\")) {\n\t\t\tchars = $.datepicker._possibleChars($.datepicker._get(inst, \"dateFormat\"));\n\t\t\tchr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);\n\t\t\treturn event.ctrlKey || event.metaKey || (chr < \" \" || !chars || chars.indexOf(chr) > -1);\n\t\t}\n\t},\n\n\t/* Synchronise manual entry and field/alternate field. */\n\t_doKeyUp: function(event) {\n\t\tvar date,\n\t\t\tinst = $.datepicker._getInst(event.target);\n\n\t\tif (inst.input.val() !== inst.lastVal) {\n\t\t\ttry {\n\t\t\t\tdate = $.datepicker.parseDate($.datepicker._get(inst, \"dateFormat\"),\n\t\t\t\t\t(inst.input ? inst.input.val() : null),\n\t\t\t\t\t$.datepicker._getFormatConfig(inst));\n\n\t\t\t\tif (date) { // only if valid\n\t\t\t\t\t$.datepicker._setDateFromField(inst);\n\t\t\t\t\t$.datepicker._updateAlternate(inst);\n\t\t\t\t\t$.datepicker._updateDatepicker(inst);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (err) {\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t/* Pop-up the date picker for a given input field.\n\t * If false returned from beforeShow event handler do not show.\n\t * @param  input  element - the input field attached to the date picker or\n\t *\t\t\t\t\tevent - if triggered by focus\n\t */\n\t_showDatepicker: function(input) {\n\t\tinput = input.target || input;\n\t\tif (input.nodeName.toLowerCase() !== \"input\") { // find from button/image trigger\n\t\t\tinput = $(\"input\", input.parentNode)[0];\n\t\t}\n\n\t\tif ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here\n\t\t\treturn;\n\t\t}\n\n\t\tvar inst, beforeShow, beforeShowSettings, isFixed,\n\t\t\toffset, showAnim, duration;\n\n\t\tinst = $.datepicker._getInst(input);\n\t\tif ($.datepicker._curInst && $.datepicker._curInst !== inst) {\n\t\t\t$.datepicker._curInst.dpDiv.stop(true, true);\n\t\t\tif ( inst && $.datepicker._datepickerShowing ) {\n\t\t\t\t$.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );\n\t\t\t}\n\t\t}\n\n\t\tbeforeShow = $.datepicker._get(inst, \"beforeShow\");\n\t\tbeforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};\n\t\tif(beforeShowSettings === false){\n\t\t\treturn;\n\t\t}\n\t\tdatepicker_extendRemove(inst.settings, beforeShowSettings);\n\n\t\tinst.lastVal = null;\n\t\t$.datepicker._lastInput = input;\n\t\t$.datepicker._setDateFromField(inst);\n\n\t\tif ($.datepicker._inDialog) { // hide cursor\n\t\t\tinput.value = \"\";\n\t\t}\n\t\tif (!$.datepicker._pos) { // position below input\n\t\t\t$.datepicker._pos = $.datepicker._findPos(input);\n\t\t\t$.datepicker._pos[1] += input.offsetHeight; // add the height\n\t\t}\n\n\t\tisFixed = false;\n\t\t$(input).parents().each(function() {\n\t\t\tisFixed |= $(this).css(\"position\") === \"fixed\";\n\t\t\treturn !isFixed;\n\t\t});\n\n\t\toffset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};\n\t\t$.datepicker._pos = null;\n\t\t//to avoid flashes on Firefox\n\t\tinst.dpDiv.empty();\n\t\t// determine sizing offscreen\n\t\tinst.dpDiv.css({position: \"absolute\", display: \"block\", top: \"-1000px\"});\n\t\t$.datepicker._updateDatepicker(inst);\n\t\t// fix width for dynamic number of date pickers\n\t\t// and adjust position before showing\n\t\toffset = $.datepicker._checkOffset(inst, offset, isFixed);\n\t\tinst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ?\n\t\t\t\"static\" : (isFixed ? \"fixed\" : \"absolute\")), display: \"none\",\n\t\t\tleft: offset.left + \"px\", top: offset.top + \"px\"});\n\n\t\tif (!inst.inline) {\n\t\t\tshowAnim = $.datepicker._get(inst, \"showAnim\");\n\t\t\tduration = $.datepicker._get(inst, \"duration\");\n\t\t\tinst.dpDiv.css( \"z-index\", datepicker_getZindex( $( input ) ) + 1 );\n\t\t\t$.datepicker._datepickerShowing = true;\n\n\t\t\tif ( $.effects && $.effects.effect[ showAnim ] ) {\n\t\t\t\tinst.dpDiv.show(showAnim, $.datepicker._get(inst, \"showOptions\"), duration);\n\t\t\t} else {\n\t\t\t\tinst.dpDiv[showAnim || \"show\"](showAnim ? duration : null);\n\t\t\t}\n\n\t\t\tif ( $.datepicker._shouldFocusInput( inst ) ) {\n\t\t\t\tinst.input.focus();\n\t\t\t}\n\n\t\t\t$.datepicker._curInst = inst;\n\t\t}\n\t},\n\n\t/* Generate the date picker content. */\n\t_updateDatepicker: function(inst) {\n\t\tthis.maxRows = 4; //Reset the max number of rows being displayed (see #7043)\n\t\tdatepicker_instActive = inst; // for delegate hover events\n\t\tinst.dpDiv.empty().append(this._generateHTML(inst));\n\t\tthis._attachHandlers(inst);\n\n\t\tvar origyearshtml,\n\t\t\tnumMonths = this._getNumberOfMonths(inst),\n\t\t\tcols = numMonths[1],\n\t\t\twidth = 17,\n\t\t\tactiveCell = inst.dpDiv.find( \".\" + this._dayOverClass + \" a\" );\n\n\t\tif ( activeCell.length > 0 ) {\n\t\t\tdatepicker_handleMouseover.apply( activeCell.get( 0 ) );\n\t\t}\n\n\t\tinst.dpDiv.removeClass(\"ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4\").width(\"\");\n\t\tif (cols > 1) {\n\t\t\tinst.dpDiv.addClass(\"ui-datepicker-multi-\" + cols).css(\"width\", (width * cols) + \"em\");\n\t\t}\n\t\tinst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? \"add\" : \"remove\") +\n\t\t\t\"Class\"](\"ui-datepicker-multi\");\n\t\tinst.dpDiv[(this._get(inst, \"isRTL\") ? \"add\" : \"remove\") +\n\t\t\t\"Class\"](\"ui-datepicker-rtl\");\n\n\t\tif (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput( inst ) ) {\n\t\t\tinst.input.focus();\n\t\t}\n\n\t\t// deffered render of the years select (to avoid flashes on Firefox)\n\t\tif( inst.yearshtml ){\n\t\t\torigyearshtml = inst.yearshtml;\n\t\t\tsetTimeout(function(){\n\t\t\t\t//assure that inst.yearshtml didn't change.\n\t\t\t\tif( origyearshtml === inst.yearshtml && inst.yearshtml ){\n\t\t\t\t\tinst.dpDiv.find(\"select.ui-datepicker-year:first\").replaceWith(inst.yearshtml);\n\t\t\t\t}\n\t\t\t\torigyearshtml = inst.yearshtml = null;\n\t\t\t}, 0);\n\t\t}\n\t},\n\n\t// #6694 - don't focus the input if it's already focused\n\t// this breaks the change event in IE\n\t// Support: IE and jQuery <1.9\n\t_shouldFocusInput: function( inst ) {\n\t\treturn inst.input && inst.input.is( \":visible\" ) && !inst.input.is( \":disabled\" ) && !inst.input.is( \":focus\" );\n\t},\n\n\t/* Check positioning to remain on screen. */\n\t_checkOffset: function(inst, offset, isFixed) {\n\t\tvar dpWidth = inst.dpDiv.outerWidth(),\n\t\t\tdpHeight = inst.dpDiv.outerHeight(),\n\t\t\tinputWidth = inst.input ? inst.input.outerWidth() : 0,\n\t\t\tinputHeight = inst.input ? inst.input.outerHeight() : 0,\n\t\t\tviewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),\n\t\t\tviewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());\n\n\t\toffset.left -= (this._get(inst, \"isRTL\") ? (dpWidth - inputWidth) : 0);\n\t\toffset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;\n\t\toffset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;\n\n\t\t// now check if datepicker is showing outside window viewport - move to a better place if so.\n\t\toffset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\n\t\t\tMath.abs(offset.left + dpWidth - viewWidth) : 0);\n\t\toffset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\n\t\t\tMath.abs(dpHeight + inputHeight) : 0);\n\n\t\treturn offset;\n\t},\n\n\t/* Find an object's position on the screen. */\n\t_findPos: function(obj) {\n\t\tvar position,\n\t\t\tinst = this._getInst(obj),\n\t\t\tisRTL = this._get(inst, \"isRTL\");\n\n\t\twhile (obj && (obj.type === \"hidden\" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {\n\t\t\tobj = obj[isRTL ? \"previousSibling\" : \"nextSibling\"];\n\t\t}\n\n\t\tposition = $(obj).offset();\n\t\treturn [position.left, position.top];\n\t},\n\n\t/* Hide the date picker from view.\n\t * @param  input  element - the input field attached to the date picker\n\t */\n\t_hideDatepicker: function(input) {\n\t\tvar showAnim, duration, postProcess, onClose,\n\t\t\tinst = this._curInst;\n\n\t\tif (!inst || (input && inst !== $.data(input, \"datepicker\"))) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._datepickerShowing) {\n\t\t\tshowAnim = this._get(inst, \"showAnim\");\n\t\t\tduration = this._get(inst, \"duration\");\n\t\t\tpostProcess = function() {\n\t\t\t\t$.datepicker._tidyDialog(inst);\n\t\t\t};\n\n\t\t\t// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed\n\t\t\tif ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {\n\t\t\t\tinst.dpDiv.hide(showAnim, $.datepicker._get(inst, \"showOptions\"), duration, postProcess);\n\t\t\t} else {\n\t\t\t\tinst.dpDiv[(showAnim === \"slideDown\" ? \"slideUp\" :\n\t\t\t\t\t(showAnim === \"fadeIn\" ? \"fadeOut\" : \"hide\"))]((showAnim ? duration : null), postProcess);\n\t\t\t}\n\n\t\t\tif (!showAnim) {\n\t\t\t\tpostProcess();\n\t\t\t}\n\t\t\tthis._datepickerShowing = false;\n\n\t\t\tonClose = this._get(inst, \"onClose\");\n\t\t\tif (onClose) {\n\t\t\t\tonClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : \"\"), inst]);\n\t\t\t}\n\n\t\t\tthis._lastInput = null;\n\t\t\tif (this._inDialog) {\n\t\t\t\tthis._dialogInput.css({ position: \"absolute\", left: \"0\", top: \"-100px\" });\n\t\t\t\tif ($.blockUI) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t\t$(\"body\").append(this.dpDiv);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._inDialog = false;\n\t\t}\n\t},\n\n\t/* Tidy up after a dialog display. */\n\t_tidyDialog: function(inst) {\n\t\tinst.dpDiv.removeClass(this._dialogClass).unbind(\".ui-datepicker-calendar\");\n\t},\n\n\t/* Close date picker if clicked elsewhere. */\n\t_checkExternalClick: function(event) {\n\t\tif (!$.datepicker._curInst) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $target = $(event.target),\n\t\t\tinst = $.datepicker._getInst($target[0]);\n\n\t\tif ( ( ( $target[0].id !== $.datepicker._mainDivId &&\n\t\t\t\t$target.parents(\"#\" + $.datepicker._mainDivId).length === 0 &&\n\t\t\t\t!$target.hasClass($.datepicker.markerClassName) &&\n\t\t\t\t!$target.closest(\".\" + $.datepicker._triggerClass).length &&\n\t\t\t\t$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI) ) ) ||\n\t\t\t( $target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst ) ) {\n\t\t\t\t$.datepicker._hideDatepicker();\n\t\t}\n\t},\n\n\t/* Adjust one of the date sub-fields. */\n\t_adjustDate: function(id, offset, period) {\n\t\tvar target = $(id),\n\t\t\tinst = this._getInst(target[0]);\n\n\t\tif (this._isDisabledDatepicker(target[0])) {\n\t\t\treturn;\n\t\t}\n\t\tthis._adjustInstDate(inst, offset +\n\t\t\t(period === \"M\" ? this._get(inst, \"showCurrentAtPos\") : 0), // undo positioning\n\t\t\tperiod);\n\t\tthis._updateDatepicker(inst);\n\t},\n\n\t/* Action for current link. */\n\t_gotoToday: function(id) {\n\t\tvar date,\n\t\t\ttarget = $(id),\n\t\t\tinst = this._getInst(target[0]);\n\n\t\tif (this._get(inst, \"gotoCurrent\") && inst.currentDay) {\n\t\t\tinst.selectedDay = inst.currentDay;\n\t\t\tinst.drawMonth = inst.selectedMonth = inst.currentMonth;\n\t\t\tinst.drawYear = inst.selectedYear = inst.currentYear;\n\t\t} else {\n\t\t\tdate = new Date();\n\t\t\tinst.selectedDay = date.getDate();\n\t\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\t}\n\t\tthis._notifyChange(inst);\n\t\tthis._adjustDate(target);\n\t},\n\n\t/* Action for selecting a new month/year. */\n\t_selectMonthYear: function(id, select, period) {\n\t\tvar target = $(id),\n\t\t\tinst = this._getInst(target[0]);\n\n\t\tinst[\"selected\" + (period === \"M\" ? \"Month\" : \"Year\")] =\n\t\tinst[\"draw\" + (period === \"M\" ? \"Month\" : \"Year\")] =\n\t\t\tparseInt(select.options[select.selectedIndex].value,10);\n\n\t\tthis._notifyChange(inst);\n\t\tthis._adjustDate(target);\n\t},\n\n\t/* Action for selecting a day. */\n\t_selectDay: function(id, month, year, td) {\n\t\tvar inst,\n\t\t\ttarget = $(id);\n\n\t\tif ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {\n\t\t\treturn;\n\t\t}\n\n\t\tinst = this._getInst(target[0]);\n\t\tinst.selectedDay = inst.currentDay = $(\"a\", td).html();\n\t\tinst.selectedMonth = inst.currentMonth = month;\n\t\tinst.selectedYear = inst.currentYear = year;\n\t\tthis._selectDate(id, this._formatDate(inst,\n\t\t\tinst.currentDay, inst.currentMonth, inst.currentYear));\n\t},\n\n\t/* Erase the input field and hide the date picker. */\n\t_clearDate: function(id) {\n\t\tvar target = $(id);\n\t\tthis._selectDate(target, \"\");\n\t},\n\n\t/* Update the input field with the selected date. */\n\t_selectDate: function(id, dateStr) {\n\t\tvar onSelect,\n\t\t\ttarget = $(id),\n\t\t\tinst = this._getInst(target[0]);\n\n\t\tdateStr = (dateStr != null ? dateStr : this._formatDate(inst));\n\t\tif (inst.input) {\n\t\t\tinst.input.val(dateStr);\n\t\t}\n\t\tthis._updateAlternate(inst);\n\n\t\tonSelect = this._get(inst, \"onSelect\");\n\t\tif (onSelect) {\n\t\t\tonSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback\n\t\t} else if (inst.input) {\n\t\t\tinst.input.trigger(\"change\"); // fire the change event\n\t\t}\n\n\t\tif (inst.inline){\n\t\t\tthis._updateDatepicker(inst);\n\t\t} else {\n\t\t\tthis._hideDatepicker();\n\t\t\tthis._lastInput = inst.input[0];\n\t\t\tif (typeof(inst.input[0]) !== \"object\") {\n\t\t\t\tinst.input.focus(); // restore focus\n\t\t\t}\n\t\t\tthis._lastInput = null;\n\t\t}\n\t},\n\n\t/* Update any alternate field to synchronise with the main field. */\n\t_updateAlternate: function(inst) {\n\t\tvar altFormat, date, dateStr,\n\t\t\taltField = this._get(inst, \"altField\");\n\n\t\tif (altField) { // update alternate field too\n\t\t\taltFormat = this._get(inst, \"altFormat\") || this._get(inst, \"dateFormat\");\n\t\t\tdate = this._getDate(inst);\n\t\t\tdateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));\n\t\t\t$(altField).each(function() { $(this).val(dateStr); });\n\t\t}\n\t},\n\n\t/* Set as beforeShowDay function to prevent selection of weekends.\n\t * @param  date  Date - the date to customise\n\t * @return [boolean, string] - is this date selectable?, what is its CSS class?\n\t */\n\tnoWeekends: function(date) {\n\t\tvar day = date.getDay();\n\t\treturn [(day > 0 && day < 6), \"\"];\n\t},\n\n\t/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.\n\t * @param  date  Date - the date to get the week for\n\t * @return  number - the number of the week within the year that contains this date\n\t */\n\tiso8601Week: function(date) {\n\t\tvar time,\n\t\t\tcheckDate = new Date(date.getTime());\n\n\t\t// Find Thursday of this week starting on Monday\n\t\tcheckDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\n\n\t\ttime = checkDate.getTime();\n\t\tcheckDate.setMonth(0); // Compare with Jan 1\n\t\tcheckDate.setDate(1);\n\t\treturn Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;\n\t},\n\n\t/* Parse a string value into a date object.\n\t * See formatDate below for the possible formats.\n\t *\n\t * @param  format string - the expected format of the date\n\t * @param  value string - the date in the above format\n\t * @param  settings Object - attributes include:\n\t *\t\t\t\t\tshortYearCutoff  number - the cutoff year for determining the century (optional)\n\t *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\n\t *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\n\t *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\n\t *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\n\t * @return  Date - the extracted date value or null if value is blank\n\t */\n\tparseDate: function (format, value, settings) {\n\t\tif (format == null || value == null) {\n\t\t\tthrow \"Invalid arguments\";\n\t\t}\n\n\t\tvalue = (typeof value === \"object\" ? value.toString() : value + \"\");\n\t\tif (value === \"\") {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar iFormat, dim, extra,\n\t\t\tiValue = 0,\n\t\t\tshortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,\n\t\t\tshortYearCutoff = (typeof shortYearCutoffTemp !== \"string\" ? shortYearCutoffTemp :\n\t\t\t\tnew Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),\n\t\t\tdayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,\n\t\t\tdayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,\n\t\t\tmonthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,\n\t\t\tmonthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,\n\t\t\tyear = -1,\n\t\t\tmonth = -1,\n\t\t\tday = -1,\n\t\t\tdoy = -1,\n\t\t\tliteral = false,\n\t\t\tdate,\n\t\t\t// Check whether a format character is doubled\n\t\t\tlookAhead = function(match) {\n\t\t\t\tvar matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\n\t\t\t\tif (matches) {\n\t\t\t\t\tiFormat++;\n\t\t\t\t}\n\t\t\t\treturn matches;\n\t\t\t},\n\t\t\t// Extract a number from the string value\n\t\t\tgetNumber = function(match) {\n\t\t\t\tvar isDoubled = lookAhead(match),\n\t\t\t\t\tsize = (match === \"@\" ? 14 : (match === \"!\" ? 20 :\n\t\t\t\t\t(match === \"y\" && isDoubled ? 4 : (match === \"o\" ? 3 : 2)))),\n\t\t\t\t\tminSize = (match === \"y\" ? size : 1),\n\t\t\t\t\tdigits = new RegExp(\"^\\\\d{\" + minSize + \",\" + size + \"}\"),\n\t\t\t\t\tnum = value.substring(iValue).match(digits);\n\t\t\t\tif (!num) {\n\t\t\t\t\tthrow \"Missing number at position \" + iValue;\n\t\t\t\t}\n\t\t\t\tiValue += num[0].length;\n\t\t\t\treturn parseInt(num[0], 10);\n\t\t\t},\n\t\t\t// Extract a name from the string value and convert to an index\n\t\t\tgetName = function(match, shortNames, longNames) {\n\t\t\t\tvar index = -1,\n\t\t\t\t\tnames = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {\n\t\t\t\t\t\treturn [ [k, v] ];\n\t\t\t\t\t}).sort(function (a, b) {\n\t\t\t\t\t\treturn -(a[1].length - b[1].length);\n\t\t\t\t\t});\n\n\t\t\t\t$.each(names, function (i, pair) {\n\t\t\t\t\tvar name = pair[1];\n\t\t\t\t\tif (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\tindex = pair[0];\n\t\t\t\t\t\tiValue += name.length;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\treturn index + 1;\n\t\t\t\t} else {\n\t\t\t\t\tthrow \"Unknown name at position \" + iValue;\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Confirm that a literal character matches the string value\n\t\t\tcheckLiteral = function() {\n\t\t\t\tif (value.charAt(iValue) !== format.charAt(iFormat)) {\n\t\t\t\t\tthrow \"Unexpected literal at position \" + iValue;\n\t\t\t\t}\n\t\t\t\tiValue++;\n\t\t\t};\n\n\t\tfor (iFormat = 0; iFormat < format.length; iFormat++) {\n\t\t\tif (literal) {\n\t\t\t\tif (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\n\t\t\t\t\tliteral = false;\n\t\t\t\t} else {\n\t\t\t\t\tcheckLiteral();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch (format.charAt(iFormat)) {\n\t\t\t\t\tcase \"d\":\n\t\t\t\t\t\tday = getNumber(\"d\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"D\":\n\t\t\t\t\t\tgetName(\"D\", dayNamesShort, dayNames);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"o\":\n\t\t\t\t\t\tdoy = getNumber(\"o\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"m\":\n\t\t\t\t\t\tmonth = getNumber(\"m\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"M\":\n\t\t\t\t\t\tmonth = getName(\"M\", monthNamesShort, monthNames);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"y\":\n\t\t\t\t\t\tyear = getNumber(\"y\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"@\":\n\t\t\t\t\t\tdate = new Date(getNumber(\"@\"));\n\t\t\t\t\t\tyear = date.getFullYear();\n\t\t\t\t\t\tmonth = date.getMonth() + 1;\n\t\t\t\t\t\tday = date.getDate();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"!\":\n\t\t\t\t\t\tdate = new Date((getNumber(\"!\") - this._ticksTo1970) / 10000);\n\t\t\t\t\t\tyear = date.getFullYear();\n\t\t\t\t\t\tmonth = date.getMonth() + 1;\n\t\t\t\t\t\tday = date.getDate();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\tif (lookAhead(\"'\")){\n\t\t\t\t\t\t\tcheckLiteral();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tliteral = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcheckLiteral();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (iValue < value.length){\n\t\t\textra = value.substr(iValue);\n\t\t\tif (!/^\\s+/.test(extra)) {\n\t\t\t\tthrow \"Extra/unparsed characters found in date: \" + extra;\n\t\t\t}\n\t\t}\n\n\t\tif (year === -1) {\n\t\t\tyear = new Date().getFullYear();\n\t\t} else if (year < 100) {\n\t\t\tyear += new Date().getFullYear() - new Date().getFullYear() % 100 +\n\t\t\t\t(year <= shortYearCutoff ? 0 : -100);\n\t\t}\n\n\t\tif (doy > -1) {\n\t\t\tmonth = 1;\n\t\t\tday = doy;\n\t\t\tdo {\n\t\t\t\tdim = this._getDaysInMonth(year, month - 1);\n\t\t\t\tif (day <= dim) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tmonth++;\n\t\t\t\tday -= dim;\n\t\t\t} while (true);\n\t\t}\n\n\t\tdate = this._daylightSavingAdjust(new Date(year, month - 1, day));\n\t\tif (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {\n\t\t\tthrow \"Invalid date\"; // E.g. 31/02/00\n\t\t}\n\t\treturn date;\n\t},\n\n\t/* Standard date formats. */\n\tATOM: \"yy-mm-dd\", // RFC 3339 (ISO 8601)\n\tCOOKIE: \"D, dd M yy\",\n\tISO_8601: \"yy-mm-dd\",\n\tRFC_822: \"D, d M y\",\n\tRFC_850: \"DD, dd-M-y\",\n\tRFC_1036: \"D, d M y\",\n\tRFC_1123: \"D, d M yy\",\n\tRFC_2822: \"D, d M yy\",\n\tRSS: \"D, d M y\", // RFC 822\n\tTICKS: \"!\",\n\tTIMESTAMP: \"@\",\n\tW3C: \"yy-mm-dd\", // ISO 8601\n\n\t_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +\n\t\tMath.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),\n\n\t/* Format a date object into a string value.\n\t * The format can be combinations of the following:\n\t * d  - day of month (no leading zero)\n\t * dd - day of month (two digit)\n\t * o  - day of year (no leading zeros)\n\t * oo - day of year (three digit)\n\t * D  - day name short\n\t * DD - day name long\n\t * m  - month of year (no leading zero)\n\t * mm - month of year (two digit)\n\t * M  - month name short\n\t * MM - month name long\n\t * y  - year (two digit)\n\t * yy - year (four digit)\n\t * @ - Unix timestamp (ms since 01/01/1970)\n\t * ! - Windows ticks (100ns since 01/01/0001)\n\t * \"...\" - literal text\n\t * '' - single quote\n\t *\n\t * @param  format string - the desired format of the date\n\t * @param  date Date - the date value to format\n\t * @param  settings Object - attributes include:\n\t *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\n\t *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\n\t *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\n\t *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\n\t * @return  string - the date in the above format\n\t */\n\tformatDate: function (format, date, settings) {\n\t\tif (!date) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tvar iFormat,\n\t\t\tdayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,\n\t\t\tdayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,\n\t\t\tmonthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,\n\t\t\tmonthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,\n\t\t\t// Check whether a format character is doubled\n\t\t\tlookAhead = function(match) {\n\t\t\t\tvar matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\n\t\t\t\tif (matches) {\n\t\t\t\t\tiFormat++;\n\t\t\t\t}\n\t\t\t\treturn matches;\n\t\t\t},\n\t\t\t// Format a number, with leading zero if necessary\n\t\t\tformatNumber = function(match, value, len) {\n\t\t\t\tvar num = \"\" + value;\n\t\t\t\tif (lookAhead(match)) {\n\t\t\t\t\twhile (num.length < len) {\n\t\t\t\t\t\tnum = \"0\" + num;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn num;\n\t\t\t},\n\t\t\t// Format a name, short or long as requested\n\t\t\tformatName = function(match, value, shortNames, longNames) {\n\t\t\t\treturn (lookAhead(match) ? longNames[value] : shortNames[value]);\n\t\t\t},\n\t\t\toutput = \"\",\n\t\t\tliteral = false;\n\n\t\tif (date) {\n\t\t\tfor (iFormat = 0; iFormat < format.length; iFormat++) {\n\t\t\t\tif (literal) {\n\t\t\t\t\tif (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\n\t\t\t\t\t\tliteral = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput += format.charAt(iFormat);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tswitch (format.charAt(iFormat)) {\n\t\t\t\t\t\tcase \"d\":\n\t\t\t\t\t\t\toutput += formatNumber(\"d\", date.getDate(), 2);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"D\":\n\t\t\t\t\t\t\toutput += formatName(\"D\", date.getDay(), dayNamesShort, dayNames);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"o\":\n\t\t\t\t\t\t\toutput += formatNumber(\"o\",\n\t\t\t\t\t\t\t\tMath.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"m\":\n\t\t\t\t\t\t\toutput += formatNumber(\"m\", date.getMonth() + 1, 2);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"M\":\n\t\t\t\t\t\t\toutput += formatName(\"M\", date.getMonth(), monthNamesShort, monthNames);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"y\":\n\t\t\t\t\t\t\toutput += (lookAhead(\"y\") ? date.getFullYear() :\n\t\t\t\t\t\t\t\t(date.getYear() % 100 < 10 ? \"0\" : \"\") + date.getYear() % 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"@\":\n\t\t\t\t\t\t\toutput += date.getTime();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"!\":\n\t\t\t\t\t\t\toutput += date.getTime() * 10000 + this._ticksTo1970;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\t\tif (lookAhead(\"'\")) {\n\t\t\t\t\t\t\t\toutput += \"'\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tliteral = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\toutput += format.charAt(iFormat);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t},\n\n\t/* Extract all possible characters from the date format. */\n\t_possibleChars: function (format) {\n\t\tvar iFormat,\n\t\t\tchars = \"\",\n\t\t\tliteral = false,\n\t\t\t// Check whether a format character is doubled\n\t\t\tlookAhead = function(match) {\n\t\t\t\tvar matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\n\t\t\t\tif (matches) {\n\t\t\t\t\tiFormat++;\n\t\t\t\t}\n\t\t\t\treturn matches;\n\t\t\t};\n\n\t\tfor (iFormat = 0; iFormat < format.length; iFormat++) {\n\t\t\tif (literal) {\n\t\t\t\tif (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\n\t\t\t\t\tliteral = false;\n\t\t\t\t} else {\n\t\t\t\t\tchars += format.charAt(iFormat);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch (format.charAt(iFormat)) {\n\t\t\t\t\tcase \"d\": case \"m\": case \"y\": case \"@\":\n\t\t\t\t\t\tchars += \"0123456789\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"D\": case \"M\":\n\t\t\t\t\t\treturn null; // Accept anything\n\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\tif (lookAhead(\"'\")) {\n\t\t\t\t\t\t\tchars += \"'\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tliteral = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tchars += format.charAt(iFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn chars;\n\t},\n\n\t/* Get a setting value, defaulting if necessary. */\n\t_get: function(inst, name) {\n\t\treturn inst.settings[name] !== undefined ?\n\t\t\tinst.settings[name] : this._defaults[name];\n\t},\n\n\t/* Parse existing date and initialise date picker. */\n\t_setDateFromField: function(inst, noDefault) {\n\t\tif (inst.input.val() === inst.lastVal) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar dateFormat = this._get(inst, \"dateFormat\"),\n\t\t\tdates = inst.lastVal = inst.input ? inst.input.val() : null,\n\t\t\tdefaultDate = this._getDefaultDate(inst),\n\t\t\tdate = defaultDate,\n\t\t\tsettings = this._getFormatConfig(inst);\n\n\t\ttry {\n\t\t\tdate = this.parseDate(dateFormat, dates, settings) || defaultDate;\n\t\t} catch (event) {\n\t\t\tdates = (noDefault ? \"\" : dates);\n\t\t}\n\t\tinst.selectedDay = date.getDate();\n\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\tinst.currentDay = (dates ? date.getDate() : 0);\n\t\tinst.currentMonth = (dates ? date.getMonth() : 0);\n\t\tinst.currentYear = (dates ? date.getFullYear() : 0);\n\t\tthis._adjustInstDate(inst);\n\t},\n\n\t/* Retrieve the default date shown on opening. */\n\t_getDefaultDate: function(inst) {\n\t\treturn this._restrictMinMax(inst,\n\t\t\tthis._determineDate(inst, this._get(inst, \"defaultDate\"), new Date()));\n\t},\n\n\t/* A date may be specified as an exact value or a relative one. */\n\t_determineDate: function(inst, date, defaultDate) {\n\t\tvar offsetNumeric = function(offset) {\n\t\t\t\tvar date = new Date();\n\t\t\t\tdate.setDate(date.getDate() + offset);\n\t\t\t\treturn date;\n\t\t\t},\n\t\t\toffsetString = function(offset) {\n\t\t\t\ttry {\n\t\t\t\t\treturn $.datepicker.parseDate($.datepicker._get(inst, \"dateFormat\"),\n\t\t\t\t\t\toffset, $.datepicker._getFormatConfig(inst));\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Ignore\n\t\t\t\t}\n\n\t\t\t\tvar date = (offset.toLowerCase().match(/^c/) ?\n\t\t\t\t\t$.datepicker._getDate(inst) : null) || new Date(),\n\t\t\t\t\tyear = date.getFullYear(),\n\t\t\t\t\tmonth = date.getMonth(),\n\t\t\t\t\tday = date.getDate(),\n\t\t\t\t\tpattern = /([+\\-]?[0-9]+)\\s*(d|D|w|W|m|M|y|Y)?/g,\n\t\t\t\t\tmatches = pattern.exec(offset);\n\n\t\t\t\twhile (matches) {\n\t\t\t\t\tswitch (matches[2] || \"d\") {\n\t\t\t\t\t\tcase \"d\" : case \"D\" :\n\t\t\t\t\t\t\tday += parseInt(matches[1],10); break;\n\t\t\t\t\t\tcase \"w\" : case \"W\" :\n\t\t\t\t\t\t\tday += parseInt(matches[1],10) * 7; break;\n\t\t\t\t\t\tcase \"m\" : case \"M\" :\n\t\t\t\t\t\t\tmonth += parseInt(matches[1],10);\n\t\t\t\t\t\t\tday = Math.min(day, $.datepicker._getDaysInMonth(year, month));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"y\": case \"Y\" :\n\t\t\t\t\t\t\tyear += parseInt(matches[1],10);\n\t\t\t\t\t\t\tday = Math.min(day, $.datepicker._getDaysInMonth(year, month));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmatches = pattern.exec(offset);\n\t\t\t\t}\n\t\t\t\treturn new Date(year, month, day);\n\t\t\t},\n\t\t\tnewDate = (date == null || date === \"\" ? defaultDate : (typeof date === \"string\" ? offsetString(date) :\n\t\t\t\t(typeof date === \"number\" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));\n\n\t\tnewDate = (newDate && newDate.toString() === \"Invalid Date\" ? defaultDate : newDate);\n\t\tif (newDate) {\n\t\t\tnewDate.setHours(0);\n\t\t\tnewDate.setMinutes(0);\n\t\t\tnewDate.setSeconds(0);\n\t\t\tnewDate.setMilliseconds(0);\n\t\t}\n\t\treturn this._daylightSavingAdjust(newDate);\n\t},\n\n\t/* Handle switch to/from daylight saving.\n\t * Hours may be non-zero on daylight saving cut-over:\n\t * > 12 when midnight changeover, but then cannot generate\n\t * midnight datetime, so jump to 1AM, otherwise reset.\n\t * @param  date  (Date) the date to check\n\t * @return  (Date) the corrected date\n\t */\n\t_daylightSavingAdjust: function(date) {\n\t\tif (!date) {\n\t\t\treturn null;\n\t\t}\n\t\tdate.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);\n\t\treturn date;\n\t},\n\n\t/* Set the date(s) directly. */\n\t_setDate: function(inst, date, noChange) {\n\t\tvar clear = !date,\n\t\t\torigMonth = inst.selectedMonth,\n\t\t\torigYear = inst.selectedYear,\n\t\t\tnewDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));\n\n\t\tinst.selectedDay = inst.currentDay = newDate.getDate();\n\t\tinst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();\n\t\tinst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();\n\t\tif ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {\n\t\t\tthis._notifyChange(inst);\n\t\t}\n\t\tthis._adjustInstDate(inst);\n\t\tif (inst.input) {\n\t\t\tinst.input.val(clear ? \"\" : this._formatDate(inst));\n\t\t}\n\t},\n\n\t/* Retrieve the date(s) directly. */\n\t_getDate: function(inst) {\n\t\tvar startDate = (!inst.currentYear || (inst.input && inst.input.val() === \"\") ? null :\n\t\t\tthis._daylightSavingAdjust(new Date(\n\t\t\tinst.currentYear, inst.currentMonth, inst.currentDay)));\n\t\t\treturn startDate;\n\t},\n\n\t/* Attach the onxxx handlers.  These are declared statically so\n\t * they work with static code transformers like Caja.\n\t */\n\t_attachHandlers: function(inst) {\n\t\tvar stepMonths = this._get(inst, \"stepMonths\"),\n\t\t\tid = \"#\" + inst.id.replace( /\\\\\\\\/g, \"\\\\\" );\n\t\tinst.dpDiv.find(\"[data-handler]\").map(function () {\n\t\t\tvar handler = {\n\t\t\t\tprev: function () {\n\t\t\t\t\t$.datepicker._adjustDate(id, -stepMonths, \"M\");\n\t\t\t\t},\n\t\t\t\tnext: function () {\n\t\t\t\t\t$.datepicker._adjustDate(id, +stepMonths, \"M\");\n\t\t\t\t},\n\t\t\t\thide: function () {\n\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t},\n\t\t\t\ttoday: function () {\n\t\t\t\t\t$.datepicker._gotoToday(id);\n\t\t\t\t},\n\t\t\t\tselectDay: function () {\n\t\t\t\t\t$.datepicker._selectDay(id, +this.getAttribute(\"data-month\"), +this.getAttribute(\"data-year\"), this);\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tselectMonth: function () {\n\t\t\t\t\t$.datepicker._selectMonthYear(id, this, \"M\");\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tselectYear: function () {\n\t\t\t\t\t$.datepicker._selectMonthYear(id, this, \"Y\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t};\n\t\t\t$(this).bind(this.getAttribute(\"data-event\"), handler[this.getAttribute(\"data-handler\")]);\n\t\t});\n\t},\n\n\t/* Generate the HTML for the current state of the date picker. */\n\t_generateHTML: function(inst) {\n\t\tvar maxDraw, prevText, prev, nextText, next, currentText, gotoDate,\n\t\t\tcontrols, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,\n\t\t\tmonthNames, monthNamesShort, beforeShowDay, showOtherMonths,\n\t\t\tselectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,\n\t\t\tcornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,\n\t\t\tprintDate, dRow, tbody, daySettings, otherMonth, unselectable,\n\t\t\ttempDate = new Date(),\n\t\t\ttoday = this._daylightSavingAdjust(\n\t\t\t\tnew Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time\n\t\t\tisRTL = this._get(inst, \"isRTL\"),\n\t\t\tshowButtonPanel = this._get(inst, \"showButtonPanel\"),\n\t\t\thideIfNoPrevNext = this._get(inst, \"hideIfNoPrevNext\"),\n\t\t\tnavigationAsDateFormat = this._get(inst, \"navigationAsDateFormat\"),\n\t\t\tnumMonths = this._getNumberOfMonths(inst),\n\t\t\tshowCurrentAtPos = this._get(inst, \"showCurrentAtPos\"),\n\t\t\tstepMonths = this._get(inst, \"stepMonths\"),\n\t\t\tisMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),\n\t\t\tcurrentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :\n\t\t\t\tnew Date(inst.currentYear, inst.currentMonth, inst.currentDay))),\n\t\t\tminDate = this._getMinMaxDate(inst, \"min\"),\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\"),\n\t\t\tdrawMonth = inst.drawMonth - showCurrentAtPos,\n\t\t\tdrawYear = inst.drawYear;\n\n\t\tif (drawMonth < 0) {\n\t\t\tdrawMonth += 12;\n\t\t\tdrawYear--;\n\t\t}\n\t\tif (maxDate) {\n\t\t\tmaxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),\n\t\t\t\tmaxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));\n\t\t\tmaxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);\n\t\t\twhile (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {\n\t\t\t\tdrawMonth--;\n\t\t\t\tif (drawMonth < 0) {\n\t\t\t\t\tdrawMonth = 11;\n\t\t\t\t\tdrawYear--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tinst.drawMonth = drawMonth;\n\t\tinst.drawYear = drawYear;\n\n\t\tprevText = this._get(inst, \"prevText\");\n\t\tprevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,\n\t\t\tthis._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),\n\t\t\tthis._getFormatConfig(inst)));\n\n\t\tprev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?\n\t\t\t\"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'\" +\n\t\t\t\" title='\" + prevText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"e\" : \"w\") + \"'>\" + prevText + \"</span></a>\" :\n\t\t\t(hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='\"+ prevText +\"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"e\" : \"w\") + \"'>\" + prevText + \"</span></a>\"));\n\n\t\tnextText = this._get(inst, \"nextText\");\n\t\tnextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,\n\t\t\tthis._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),\n\t\t\tthis._getFormatConfig(inst)));\n\n\t\tnext = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?\n\t\t\t\"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'\" +\n\t\t\t\" title='\" + nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"w\" : \"e\") + \"'>\" + nextText + \"</span></a>\" :\n\t\t\t(hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='\"+ nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"w\" : \"e\") + \"'>\" + nextText + \"</span></a>\"));\n\n\t\tcurrentText = this._get(inst, \"currentText\");\n\t\tgotoDate = (this._get(inst, \"gotoCurrent\") && inst.currentDay ? currentDate : today);\n\t\tcurrentText = (!navigationAsDateFormat ? currentText :\n\t\t\tthis.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));\n\n\t\tcontrols = (!inst.inline ? \"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>\" +\n\t\t\tthis._get(inst, \"closeText\") + \"</button>\" : \"\");\n\n\t\tbuttonPanel = (showButtonPanel) ? \"<div class='ui-datepicker-buttonpane ui-widget-content'>\" + (isRTL ? controls : \"\") +\n\t\t\t(this._isInRange(inst, gotoDate) ? \"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'\" +\n\t\t\t\">\" + currentText + \"</button>\" : \"\") + (isRTL ? \"\" : controls) + \"</div>\" : \"\";\n\n\t\tfirstDay = parseInt(this._get(inst, \"firstDay\"),10);\n\t\tfirstDay = (isNaN(firstDay) ? 0 : firstDay);\n\n\t\tshowWeek = this._get(inst, \"showWeek\");\n\t\tdayNames = this._get(inst, \"dayNames\");\n\t\tdayNamesMin = this._get(inst, \"dayNamesMin\");\n\t\tmonthNames = this._get(inst, \"monthNames\");\n\t\tmonthNamesShort = this._get(inst, \"monthNamesShort\");\n\t\tbeforeShowDay = this._get(inst, \"beforeShowDay\");\n\t\tshowOtherMonths = this._get(inst, \"showOtherMonths\");\n\t\tselectOtherMonths = this._get(inst, \"selectOtherMonths\");\n\t\tdefaultDate = this._getDefaultDate(inst);\n\t\thtml = \"\";\n\t\tdow;\n\t\tfor (row = 0; row < numMonths[0]; row++) {\n\t\t\tgroup = \"\";\n\t\t\tthis.maxRows = 4;\n\t\t\tfor (col = 0; col < numMonths[1]; col++) {\n\t\t\t\tselectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));\n\t\t\t\tcornerClass = \" ui-corner-all\";\n\t\t\t\tcalender = \"\";\n\t\t\t\tif (isMultiMonth) {\n\t\t\t\t\tcalender += \"<div class='ui-datepicker-group\";\n\t\t\t\t\tif (numMonths[1] > 1) {\n\t\t\t\t\t\tswitch (col) {\n\t\t\t\t\t\t\tcase 0: calender += \" ui-datepicker-group-first\";\n\t\t\t\t\t\t\t\tcornerClass = \" ui-corner-\" + (isRTL ? \"right\" : \"left\"); break;\n\t\t\t\t\t\t\tcase numMonths[1]-1: calender += \" ui-datepicker-group-last\";\n\t\t\t\t\t\t\t\tcornerClass = \" ui-corner-\" + (isRTL ? \"left\" : \"right\"); break;\n\t\t\t\t\t\t\tdefault: calender += \" ui-datepicker-group-middle\"; cornerClass = \"\"; break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcalender += \"'>\";\n\t\t\t\t}\n\t\t\t\tcalender += \"<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix\" + cornerClass + \"'>\" +\n\t\t\t\t\t(/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : \"\") +\n\t\t\t\t\t(/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : \"\") +\n\t\t\t\t\tthis._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,\n\t\t\t\t\trow > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers\n\t\t\t\t\t\"</div><table class='ui-datepicker-calendar'><thead>\" +\n\t\t\t\t\t\"<tr>\";\n\t\t\t\tthead = (showWeek ? \"<th class='ui-datepicker-week-col'>\" + this._get(inst, \"weekHeader\") + \"</th>\" : \"\");\n\t\t\t\tfor (dow = 0; dow < 7; dow++) { // days of the week\n\t\t\t\t\tday = (dow + firstDay) % 7;\n\t\t\t\t\tthead += \"<th scope='col'\" + ((dow + firstDay + 6) % 7 >= 5 ? \" class='ui-datepicker-week-end'\" : \"\") + \">\" +\n\t\t\t\t\t\t\"<span title='\" + dayNames[day] + \"'>\" + dayNamesMin[day] + \"</span></th>\";\n\t\t\t\t}\n\t\t\t\tcalender += thead + \"</tr></thead><tbody>\";\n\t\t\t\tdaysInMonth = this._getDaysInMonth(drawYear, drawMonth);\n\t\t\t\tif (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {\n\t\t\t\t\tinst.selectedDay = Math.min(inst.selectedDay, daysInMonth);\n\t\t\t\t}\n\t\t\t\tleadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;\n\t\t\t\tcurRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate\n\t\t\t\tnumRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)\n\t\t\t\tthis.maxRows = numRows;\n\t\t\t\tprintDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));\n\t\t\t\tfor (dRow = 0; dRow < numRows; dRow++) { // create date picker rows\n\t\t\t\t\tcalender += \"<tr>\";\n\t\t\t\t\ttbody = (!showWeek ? \"\" : \"<td class='ui-datepicker-week-col'>\" +\n\t\t\t\t\t\tthis._get(inst, \"calculateWeek\")(printDate) + \"</td>\");\n\t\t\t\t\tfor (dow = 0; dow < 7; dow++) { // create date picker days\n\t\t\t\t\t\tdaySettings = (beforeShowDay ?\n\t\t\t\t\t\t\tbeforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, \"\"]);\n\t\t\t\t\t\totherMonth = (printDate.getMonth() !== drawMonth);\n\t\t\t\t\t\tunselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||\n\t\t\t\t\t\t\t(minDate && printDate < minDate) || (maxDate && printDate > maxDate);\n\t\t\t\t\t\ttbody += \"<td class='\" +\n\t\t\t\t\t\t\t((dow + firstDay + 6) % 7 >= 5 ? \" ui-datepicker-week-end\" : \"\") + // highlight weekends\n\t\t\t\t\t\t\t(otherMonth ? \" ui-datepicker-other-month\" : \"\") + // highlight days from other months\n\t\t\t\t\t\t\t((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key\n\t\t\t\t\t\t\t(defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?\n\t\t\t\t\t\t\t// or defaultDate is current printedDate and defaultDate is selectedDate\n\t\t\t\t\t\t\t\" \" + this._dayOverClass : \"\") + // highlight selected day\n\t\t\t\t\t\t\t(unselectable ? \" \" + this._unselectableClass + \" ui-state-disabled\": \"\") +  // highlight unselectable days\n\t\t\t\t\t\t\t(otherMonth && !showOtherMonths ? \"\" : \" \" + daySettings[1] + // highlight custom dates\n\t\t\t\t\t\t\t(printDate.getTime() === currentDate.getTime() ? \" \" + this._currentClass : \"\") + // highlight selected day\n\t\t\t\t\t\t\t(printDate.getTime() === today.getTime() ? \" ui-datepicker-today\" : \"\")) + \"'\" + // highlight today (if different)\n\t\t\t\t\t\t\t((!otherMonth || showOtherMonths) && daySettings[2] ? \" title='\" + daySettings[2].replace(/'/g, \"&#39;\") + \"'\" : \"\") + // cell title\n\t\t\t\t\t\t\t(unselectable ? \"\" : \" data-handler='selectDay' data-event='click' data-month='\" + printDate.getMonth() + \"' data-year='\" + printDate.getFullYear() + \"'\") + \">\" + // actions\n\t\t\t\t\t\t\t(otherMonth && !showOtherMonths ? \"&#xa0;\" : // display for other months\n\t\t\t\t\t\t\t(unselectable ? \"<span class='ui-state-default'>\" + printDate.getDate() + \"</span>\" : \"<a class='ui-state-default\" +\n\t\t\t\t\t\t\t(printDate.getTime() === today.getTime() ? \" ui-state-highlight\" : \"\") +\n\t\t\t\t\t\t\t(printDate.getTime() === currentDate.getTime() ? \" ui-state-active\" : \"\") + // highlight selected day\n\t\t\t\t\t\t\t(otherMonth ? \" ui-priority-secondary\" : \"\") + // distinguish dates from other months\n\t\t\t\t\t\t\t\"' href='#'>\" + printDate.getDate() + \"</a>\")) + \"</td>\"; // display selectable date\n\t\t\t\t\t\tprintDate.setDate(printDate.getDate() + 1);\n\t\t\t\t\t\tprintDate = this._daylightSavingAdjust(printDate);\n\t\t\t\t\t}\n\t\t\t\t\tcalender += tbody + \"</tr>\";\n\t\t\t\t}\n\t\t\t\tdrawMonth++;\n\t\t\t\tif (drawMonth > 11) {\n\t\t\t\t\tdrawMonth = 0;\n\t\t\t\t\tdrawYear++;\n\t\t\t\t}\n\t\t\t\tcalender += \"</tbody></table>\" + (isMultiMonth ? \"</div>\" +\n\t\t\t\t\t\t\t((numMonths[0] > 0 && col === numMonths[1]-1) ? \"<div class='ui-datepicker-row-break'></div>\" : \"\") : \"\");\n\t\t\t\tgroup += calender;\n\t\t\t}\n\t\t\thtml += group;\n\t\t}\n\t\thtml += buttonPanel;\n\t\tinst._keyEvent = false;\n\t\treturn html;\n\t},\n\n\t/* Generate the month and year header. */\n\t_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,\n\t\t\tsecondary, monthNames, monthNamesShort) {\n\n\t\tvar inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,\n\t\t\tchangeMonth = this._get(inst, \"changeMonth\"),\n\t\t\tchangeYear = this._get(inst, \"changeYear\"),\n\t\t\tshowMonthAfterYear = this._get(inst, \"showMonthAfterYear\"),\n\t\t\thtml = \"<div class='ui-datepicker-title'>\",\n\t\t\tmonthHtml = \"\";\n\n\t\t// month selection\n\t\tif (secondary || !changeMonth) {\n\t\t\tmonthHtml += \"<span class='ui-datepicker-month'>\" + monthNames[drawMonth] + \"</span>\";\n\t\t} else {\n\t\t\tinMinYear = (minDate && minDate.getFullYear() === drawYear);\n\t\t\tinMaxYear = (maxDate && maxDate.getFullYear() === drawYear);\n\t\t\tmonthHtml += \"<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>\";\n\t\t\tfor ( month = 0; month < 12; month++) {\n\t\t\t\tif ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {\n\t\t\t\t\tmonthHtml += \"<option value='\" + month + \"'\" +\n\t\t\t\t\t\t(month === drawMonth ? \" selected='selected'\" : \"\") +\n\t\t\t\t\t\t\">\" + monthNamesShort[month] + \"</option>\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tmonthHtml += \"</select>\";\n\t\t}\n\n\t\tif (!showMonthAfterYear) {\n\t\t\thtml += monthHtml + (secondary || !(changeMonth && changeYear) ? \"&#xa0;\" : \"\");\n\t\t}\n\n\t\t// year selection\n\t\tif ( !inst.yearshtml ) {\n\t\t\tinst.yearshtml = \"\";\n\t\t\tif (secondary || !changeYear) {\n\t\t\t\thtml += \"<span class='ui-datepicker-year'>\" + drawYear + \"</span>\";\n\t\t\t} else {\n\t\t\t\t// determine range of years to display\n\t\t\t\tyears = this._get(inst, \"yearRange\").split(\":\");\n\t\t\t\tthisYear = new Date().getFullYear();\n\t\t\t\tdetermineYear = function(value) {\n\t\t\t\t\tvar year = (value.match(/c[+\\-].*/) ? drawYear + parseInt(value.substring(1), 10) :\n\t\t\t\t\t\t(value.match(/[+\\-].*/) ? thisYear + parseInt(value, 10) :\n\t\t\t\t\t\tparseInt(value, 10)));\n\t\t\t\t\treturn (isNaN(year) ? thisYear : year);\n\t\t\t\t};\n\t\t\t\tyear = determineYear(years[0]);\n\t\t\t\tendYear = Math.max(year, determineYear(years[1] || \"\"));\n\t\t\t\tyear = (minDate ? Math.max(year, minDate.getFullYear()) : year);\n\t\t\t\tendYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);\n\t\t\t\tinst.yearshtml += \"<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>\";\n\t\t\t\tfor (; year <= endYear; year++) {\n\t\t\t\t\tinst.yearshtml += \"<option value='\" + year + \"'\" +\n\t\t\t\t\t\t(year === drawYear ? \" selected='selected'\" : \"\") +\n\t\t\t\t\t\t\">\" + year + \"</option>\";\n\t\t\t\t}\n\t\t\t\tinst.yearshtml += \"</select>\";\n\n\t\t\t\thtml += inst.yearshtml;\n\t\t\t\tinst.yearshtml = null;\n\t\t\t}\n\t\t}\n\n\t\thtml += this._get(inst, \"yearSuffix\");\n\t\tif (showMonthAfterYear) {\n\t\t\thtml += (secondary || !(changeMonth && changeYear) ? \"&#xa0;\" : \"\") + monthHtml;\n\t\t}\n\t\thtml += \"</div>\"; // Close datepicker_header\n\t\treturn html;\n\t},\n\n\t/* Adjust one of the date sub-fields. */\n\t_adjustInstDate: function(inst, offset, period) {\n\t\tvar year = inst.drawYear + (period === \"Y\" ? offset : 0),\n\t\t\tmonth = inst.drawMonth + (period === \"M\" ? offset : 0),\n\t\t\tday = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === \"D\" ? offset : 0),\n\t\t\tdate = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));\n\n\t\tinst.selectedDay = date.getDate();\n\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\tif (period === \"M\" || period === \"Y\") {\n\t\t\tthis._notifyChange(inst);\n\t\t}\n\t},\n\n\t/* Ensure a date is within any min/max bounds. */\n\t_restrictMinMax: function(inst, date) {\n\t\tvar minDate = this._getMinMaxDate(inst, \"min\"),\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\"),\n\t\t\tnewDate = (minDate && date < minDate ? minDate : date);\n\t\treturn (maxDate && newDate > maxDate ? maxDate : newDate);\n\t},\n\n\t/* Notify change of month/year. */\n\t_notifyChange: function(inst) {\n\t\tvar onChange = this._get(inst, \"onChangeMonthYear\");\n\t\tif (onChange) {\n\t\t\tonChange.apply((inst.input ? inst.input[0] : null),\n\t\t\t\t[inst.selectedYear, inst.selectedMonth + 1, inst]);\n\t\t}\n\t},\n\n\t/* Determine the number of months to show. */\n\t_getNumberOfMonths: function(inst) {\n\t\tvar numMonths = this._get(inst, \"numberOfMonths\");\n\t\treturn (numMonths == null ? [1, 1] : (typeof numMonths === \"number\" ? [1, numMonths] : numMonths));\n\t},\n\n\t/* Determine the current maximum date - ensure no time components are set. */\n\t_getMinMaxDate: function(inst, minMax) {\n\t\treturn this._determineDate(inst, this._get(inst, minMax + \"Date\"), null);\n\t},\n\n\t/* Find the number of days in a given month. */\n\t_getDaysInMonth: function(year, month) {\n\t\treturn 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();\n\t},\n\n\t/* Find the day of the week of the first of a month. */\n\t_getFirstDayOfMonth: function(year, month) {\n\t\treturn new Date(year, month, 1).getDay();\n\t},\n\n\t/* Determines if we should allow a \"next/prev\" month display change. */\n\t_canAdjustMonth: function(inst, offset, curYear, curMonth) {\n\t\tvar numMonths = this._getNumberOfMonths(inst),\n\t\t\tdate = this._daylightSavingAdjust(new Date(curYear,\n\t\t\tcurMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));\n\n\t\tif (offset < 0) {\n\t\t\tdate.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));\n\t\t}\n\t\treturn this._isInRange(inst, date);\n\t},\n\n\t/* Is the given date in the accepted range? */\n\t_isInRange: function(inst, date) {\n\t\tvar yearSplit, currentYear,\n\t\t\tminDate = this._getMinMaxDate(inst, \"min\"),\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\"),\n\t\t\tminYear = null,\n\t\t\tmaxYear = null,\n\t\t\tyears = this._get(inst, \"yearRange\");\n\t\t\tif (years){\n\t\t\t\tyearSplit = years.split(\":\");\n\t\t\t\tcurrentYear = new Date().getFullYear();\n\t\t\t\tminYear = parseInt(yearSplit[0], 10);\n\t\t\t\tmaxYear = parseInt(yearSplit[1], 10);\n\t\t\t\tif ( yearSplit[0].match(/[+\\-].*/) ) {\n\t\t\t\t\tminYear += currentYear;\n\t\t\t\t}\n\t\t\t\tif ( yearSplit[1].match(/[+\\-].*/) ) {\n\t\t\t\t\tmaxYear += currentYear;\n\t\t\t\t}\n\t\t\t}\n\n\t\treturn ((!minDate || date.getTime() >= minDate.getTime()) &&\n\t\t\t(!maxDate || date.getTime() <= maxDate.getTime()) &&\n\t\t\t(!minYear || date.getFullYear() >= minYear) &&\n\t\t\t(!maxYear || date.getFullYear() <= maxYear));\n\t},\n\n\t/* Provide the configuration settings for formatting/parsing. */\n\t_getFormatConfig: function(inst) {\n\t\tvar shortYearCutoff = this._get(inst, \"shortYearCutoff\");\n\t\tshortYearCutoff = (typeof shortYearCutoff !== \"string\" ? shortYearCutoff :\n\t\t\tnew Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));\n\t\treturn {shortYearCutoff: shortYearCutoff,\n\t\t\tdayNamesShort: this._get(inst, \"dayNamesShort\"), dayNames: this._get(inst, \"dayNames\"),\n\t\t\tmonthNamesShort: this._get(inst, \"monthNamesShort\"), monthNames: this._get(inst, \"monthNames\")};\n\t},\n\n\t/* Format the given date for display. */\n\t_formatDate: function(inst, day, month, year) {\n\t\tif (!day) {\n\t\t\tinst.currentDay = inst.selectedDay;\n\t\t\tinst.currentMonth = inst.selectedMonth;\n\t\t\tinst.currentYear = inst.selectedYear;\n\t\t}\n\t\tvar date = (day ? (typeof day === \"object\" ? day :\n\t\t\tthis._daylightSavingAdjust(new Date(year, month, day))) :\n\t\t\tthis._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));\n\t\treturn this.formatDate(this._get(inst, \"dateFormat\"), date, this._getFormatConfig(inst));\n\t}\n});\n\n/*\n * Bind hover events for datepicker elements.\n * Done via delegate so the binding only occurs once in the lifetime of the parent div.\n * Global datepicker_instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.\n */\nfunction datepicker_bindHover(dpDiv) {\n\tvar selector = \"button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a\";\n\treturn dpDiv.delegate(selector, \"mouseout\", function() {\n\t\t\t$(this).removeClass(\"ui-state-hover\");\n\t\t\tif (this.className.indexOf(\"ui-datepicker-prev\") !== -1) {\n\t\t\t\t$(this).removeClass(\"ui-datepicker-prev-hover\");\n\t\t\t}\n\t\t\tif (this.className.indexOf(\"ui-datepicker-next\") !== -1) {\n\t\t\t\t$(this).removeClass(\"ui-datepicker-next-hover\");\n\t\t\t}\n\t\t})\n\t\t.delegate( selector, \"mouseover\", datepicker_handleMouseover );\n}\n\nfunction datepicker_handleMouseover() {\n\tif (!$.datepicker._isDisabledDatepicker( datepicker_instActive.inline? datepicker_instActive.dpDiv.parent()[0] : datepicker_instActive.input[0])) {\n\t\t$(this).parents(\".ui-datepicker-calendar\").find(\"a\").removeClass(\"ui-state-hover\");\n\t\t$(this).addClass(\"ui-state-hover\");\n\t\tif (this.className.indexOf(\"ui-datepicker-prev\") !== -1) {\n\t\t\t$(this).addClass(\"ui-datepicker-prev-hover\");\n\t\t}\n\t\tif (this.className.indexOf(\"ui-datepicker-next\") !== -1) {\n\t\t\t$(this).addClass(\"ui-datepicker-next-hover\");\n\t\t}\n\t}\n}\n\n/* jQuery extend now ignores nulls! */\nfunction datepicker_extendRemove(target, props) {\n\t$.extend(target, props);\n\tfor (var name in props) {\n\t\tif (props[name] == null) {\n\t\t\ttarget[name] = props[name];\n\t\t}\n\t}\n\treturn target;\n}\n\n/* Invoke the datepicker functionality.\n   @param  options  string - a command, optionally followed by additional parameters or\n\t\t\t\t\tObject - settings for attaching new datepicker functionality\n   @return  jQuery object */\n$.fn.datepicker = function(options){\n\n\t/* Verify an empty collection wasn't passed - Fixes #6976 */\n\tif ( !this.length ) {\n\t\treturn this;\n\t}\n\n\t/* Initialise the date picker. */\n\tif (!$.datepicker.initialized) {\n\t\t$(document).mousedown($.datepicker._checkExternalClick);\n\t\t$.datepicker.initialized = true;\n\t}\n\n\t/* Append datepicker main container to body if not exist. */\n\tif ($(\"#\"+$.datepicker._mainDivId).length === 0) {\n\t\t$(\"body\").append($.datepicker.dpDiv);\n\t}\n\n\tvar otherArgs = Array.prototype.slice.call(arguments, 1);\n\tif (typeof options === \"string\" && (options === \"isDisabled\" || options === \"getDate\" || options === \"widget\")) {\n\t\treturn $.datepicker[\"_\" + options + \"Datepicker\"].\n\t\t\tapply($.datepicker, [this[0]].concat(otherArgs));\n\t}\n\tif (options === \"option\" && arguments.length === 2 && typeof arguments[1] === \"string\") {\n\t\treturn $.datepicker[\"_\" + options + \"Datepicker\"].\n\t\t\tapply($.datepicker, [this[0]].concat(otherArgs));\n\t}\n\treturn this.each(function() {\n\t\ttypeof options === \"string\" ?\n\t\t\t$.datepicker[\"_\" + options + \"Datepicker\"].\n\t\t\t\tapply($.datepicker, [this].concat(otherArgs)) :\n\t\t\t$.datepicker._attachDatepicker(this, options);\n\t});\n};\n\n$.datepicker = new Datepicker(); // singleton instance\n$.datepicker.initialized = false;\n$.datepicker.uuid = new Date().getTime();\n$.datepicker.version = \"1.11.4\";\n\nvar datepicker = $.datepicker;\n\n\n/*!\n * jQuery UI Draggable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/draggable/\n */\n\n\n$.widget(\"ui.draggable\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"drag\",\n\toptions: {\n\t\taddClasses: true,\n\t\tappendTo: \"parent\",\n\t\taxis: false,\n\t\tconnectToSortable: false,\n\t\tcontainment: false,\n\t\tcursor: \"auto\",\n\t\tcursorAt: false,\n\t\tgrid: false,\n\t\thandle: false,\n\t\thelper: \"original\",\n\t\tiframeFix: false,\n\t\topacity: false,\n\t\trefreshPositions: false,\n\t\trevert: false,\n\t\trevertDuration: 500,\n\t\tscope: \"default\",\n\t\tscroll: true,\n\t\tscrollSensitivity: 20,\n\t\tscrollSpeed: 20,\n\t\tsnap: false,\n\t\tsnapMode: \"both\",\n\t\tsnapTolerance: 20,\n\t\tstack: false,\n\t\tzIndex: false,\n\n\t\t// callbacks\n\t\tdrag: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\t_create: function() {\n\n\t\tif ( this.options.helper === \"original\" ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\t\tif (this.options.addClasses){\n\t\t\tthis.element.addClass(\"ui-draggable\");\n\t\t}\n\t\tif (this.options.disabled){\n\t\t\tthis.element.addClass(\"ui-draggable-disabled\");\n\t\t}\n\t\tthis._setHandleClassName();\n\n\t\tthis._mouseInit();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"handle\" ) {\n\t\t\tthis._removeHandleClassName();\n\t\t\tthis._setHandleClassName();\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tif ( ( this.helper || this.element ).is( \".ui-draggable-dragging\" ) ) {\n\t\t\tthis.destroyOnClear = true;\n\t\t\treturn;\n\t\t}\n\t\tthis.element.removeClass( \"ui-draggable ui-draggable-dragging ui-draggable-disabled\" );\n\t\tthis._removeHandleClassName();\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseCapture: function(event) {\n\t\tvar o = this.options;\n\n\t\tthis._blurActiveElement( event );\n\n\t\t// among others, prevent a drag on a resizable-handle\n\t\tif (this.helper || o.disabled || $(event.target).closest(\".ui-resizable-handle\").length > 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\t//Quit if we're not on a valid handle\n\t\tthis.handle = this._getHandle(event);\n\t\tif (!this.handle) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._blockFrames( o.iframeFix === true ? \"iframe\" : o.iframeFix );\n\n\t\treturn true;\n\n\t},\n\n\t_blockFrames: function( selector ) {\n\t\tthis.iframeBlocks = this.document.find( selector ).map(function() {\n\t\t\tvar iframe = $( this );\n\n\t\t\treturn $( \"<div>\" )\n\t\t\t\t.css( \"position\", \"absolute\" )\n\t\t\t\t.appendTo( iframe.parent() )\n\t\t\t\t.outerWidth( iframe.outerWidth() )\n\t\t\t\t.outerHeight( iframe.outerHeight() )\n\t\t\t\t.offset( iframe.offset() )[ 0 ];\n\t\t});\n\t},\n\n\t_unblockFrames: function() {\n\t\tif ( this.iframeBlocks ) {\n\t\t\tthis.iframeBlocks.remove();\n\t\t\tdelete this.iframeBlocks;\n\t\t}\n\t},\n\n\t_blurActiveElement: function( event ) {\n\t\tvar document = this.document[ 0 ];\n\n\t\t// Only need to blur if the event occurred on the draggable itself, see #10527\n\t\tif ( !this.handleElement.is( event.target ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// support: IE9\n\t\t// IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\n\t\ttry {\n\n\t\t\t// Support: IE9, IE10\n\t\t\t// If the <body> is blurred, IE will switch windows, see #9520\n\t\t\tif ( document.activeElement && document.activeElement.nodeName.toLowerCase() !== \"body\" ) {\n\n\t\t\t\t// Blur any element that currently has focus, see #4261\n\t\t\t\t$( document.activeElement ).blur();\n\t\t\t}\n\t\t} catch ( error ) {}\n\t},\n\n\t_mouseStart: function(event) {\n\n\t\tvar o = this.options;\n\n\t\t//Create and append the visible helper\n\t\tthis.helper = this._createHelper(event);\n\n\t\tthis.helper.addClass(\"ui-draggable-dragging\");\n\n\t\t//Cache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//If ddmanager is used for droppables, set the global draggable\n\t\tif ($.ui.ddmanager) {\n\t\t\t$.ui.ddmanager.current = this;\n\t\t}\n\n\t\t/*\n\t\t * - Position generation -\n\t\t * This block generates everything position related - it's the core of draggables.\n\t\t */\n\n\t\t//Cache the margins of the original element\n\t\tthis._cacheMargins();\n\n\t\t//Store the helper's css position\n\t\tthis.cssPosition = this.helper.css( \"position\" );\n\t\tthis.scrollParent = this.helper.scrollParent( true );\n\t\tthis.offsetParent = this.helper.offsetParent();\n\t\tthis.hasFixedAncestor = this.helper.parents().filter(function() {\n\t\t\t\treturn $( this ).css( \"position\" ) === \"fixed\";\n\t\t\t}).length > 0;\n\n\t\t//The element's absolute position on the page minus margins\n\t\tthis.positionAbs = this.element.offset();\n\t\tthis._refreshOffsets( event );\n\n\t\t//Generate the original position\n\t\tthis.originalPosition = this.position = this._generatePosition( event, false );\n\t\tthis.originalPageX = event.pageX;\n\t\tthis.originalPageY = event.pageY;\n\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\n\t\t(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\n\n\t\t//Set a containment if given in the options\n\t\tthis._setContainment();\n\n\t\t//Trigger event + callbacks\n\t\tif (this._trigger(\"start\", event) === false) {\n\t\t\tthis._clear();\n\t\t\treturn false;\n\t\t}\n\n\t\t//Recache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//Prepare the droppable offsets\n\t\tif ($.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\t\t}\n\n\t\t// Reset helper's right/bottom css if they're set and set explicit width/height instead\n\t\t// as this prevents resizing of elements with right/bottom set (see #7772)\n\t\tthis._normalizeRightBottom();\n\n\t\tthis._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position\n\n\t\t//If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStart(this, event);\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t_refreshOffsets: function( event ) {\n\t\tthis.offset = {\n\t\t\ttop: this.positionAbs.top - this.margins.top,\n\t\t\tleft: this.positionAbs.left - this.margins.left,\n\t\t\tscroll: false,\n\t\t\tparent: this._getParentOffset(),\n\t\t\trelative: this._getRelativeOffset()\n\t\t};\n\n\t\tthis.offset.click = {\n\t\t\tleft: event.pageX - this.offset.left,\n\t\t\ttop: event.pageY - this.offset.top\n\t\t};\n\t},\n\n\t_mouseDrag: function(event, noPropagation) {\n\t\t// reset any necessary cached properties (see #5009)\n\t\tif ( this.hasFixedAncestor ) {\n\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t}\n\n\t\t//Compute the helpers position\n\t\tthis.position = this._generatePosition( event, true );\n\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\n\n\t\t//Call plugins and callbacks and use the resulting position if something is returned\n\t\tif (!noPropagation) {\n\t\t\tvar ui = this._uiHash();\n\t\t\tif (this._trigger(\"drag\", event, ui) === false) {\n\t\t\t\tthis._mouseUp({});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.position = ui.position;\n\t\t}\n\n\t\tthis.helper[ 0 ].style.left = this.position.left + \"px\";\n\t\tthis.helper[ 0 ].style.top = this.position.top + \"px\";\n\n\t\tif ($.ui.ddmanager) {\n\t\t\t$.ui.ddmanager.drag(this, event);\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function(event) {\n\n\t\t//If we are using droppables, inform the manager about the drop\n\t\tvar that = this,\n\t\t\tdropped = false;\n\t\tif ($.ui.ddmanager && !this.options.dropBehaviour) {\n\t\t\tdropped = $.ui.ddmanager.drop(this, event);\n\t\t}\n\n\t\t//if a drop comes from outside (a sortable)\n\t\tif (this.dropped) {\n\t\t\tdropped = this.dropped;\n\t\t\tthis.dropped = false;\n\t\t}\n\n\t\tif ((this.options.revert === \"invalid\" && !dropped) || (this.options.revert === \"valid\" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {\n\t\t\t$(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {\n\t\t\t\tif (that._trigger(\"stop\", event) !== false) {\n\t\t\t\t\tthat._clear();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (this._trigger(\"stop\", event) !== false) {\n\t\t\t\tthis._clear();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseUp: function( event ) {\n\t\tthis._unblockFrames();\n\n\t\t//If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStop(this, event);\n\t\t}\n\n\t\t// Only need to focus if the event occurred on the draggable itself, see #10527\n\t\tif ( this.handleElement.is( event.target ) ) {\n\t\t\t// The interaction is over; whether or not the click resulted in a drag, focus the element\n\t\t\tthis.element.focus();\n\t\t}\n\n\t\treturn $.ui.mouse.prototype._mouseUp.call(this, event);\n\t},\n\n\tcancel: function() {\n\n\t\tif (this.helper.is(\".ui-draggable-dragging\")) {\n\t\t\tthis._mouseUp({});\n\t\t} else {\n\t\t\tthis._clear();\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t_getHandle: function(event) {\n\t\treturn this.options.handle ?\n\t\t\t!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :\n\t\t\ttrue;\n\t},\n\n\t_setHandleClassName: function() {\n\t\tthis.handleElement = this.options.handle ?\n\t\t\tthis.element.find( this.options.handle ) : this.element;\n\t\tthis.handleElement.addClass( \"ui-draggable-handle\" );\n\t},\n\n\t_removeHandleClassName: function() {\n\t\tthis.handleElement.removeClass( \"ui-draggable-handle\" );\n\t},\n\n\t_createHelper: function(event) {\n\n\t\tvar o = this.options,\n\t\t\thelperIsFunction = $.isFunction( o.helper ),\n\t\t\thelper = helperIsFunction ?\n\t\t\t\t$( o.helper.apply( this.element[ 0 ], [ event ] ) ) :\n\t\t\t\t( o.helper === \"clone\" ?\n\t\t\t\t\tthis.element.clone().removeAttr( \"id\" ) :\n\t\t\t\t\tthis.element );\n\n\t\tif (!helper.parents(\"body\").length) {\n\t\t\thelper.appendTo((o.appendTo === \"parent\" ? this.element[0].parentNode : o.appendTo));\n\t\t}\n\n\t\t// http://bugs.jqueryui.com/ticket/9446\n\t\t// a helper function can return the original element\n\t\t// which wouldn't have been set to relative in _create\n\t\tif ( helperIsFunction && helper[ 0 ] === this.element[ 0 ] ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\n\t\tif (helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css(\"position\"))) {\n\t\t\thelper.css(\"position\", \"absolute\");\n\t\t}\n\n\t\treturn helper;\n\n\t},\n\n\t_setPositionRelative: function() {\n\t\tif ( !( /^(?:r|a|f)/ ).test( this.element.css( \"position\" ) ) ) {\n\t\t\tthis.element[ 0 ].style.position = \"relative\";\n\t\t}\n\t},\n\n\t_adjustOffsetFromHelper: function(obj) {\n\t\tif (typeof obj === \"string\") {\n\t\t\tobj = obj.split(\" \");\n\t\t}\n\t\tif ($.isArray(obj)) {\n\t\t\tobj = { left: +obj[0], top: +obj[1] || 0 };\n\t\t}\n\t\tif (\"left\" in obj) {\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t}\n\t\tif (\"right\" in obj) {\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t}\n\t\tif (\"top\" in obj) {\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t}\n\t\tif (\"bottom\" in obj) {\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t}\n\t},\n\n\t_isRootNode: function( element ) {\n\t\treturn ( /(html|body)/i ).test( element.tagName ) || element === this.document[ 0 ];\n\t},\n\n\t_getParentOffset: function() {\n\n\t\t//Get the offsetParent and cache its position\n\t\tvar po = this.offsetParent.offset(),\n\t\t\tdocument = this.document[ 0 ];\n\n\t\t// This is a special case where we need to modify a offset calculated on start, since the following happened:\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that\n\t\t//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\n\t\tif (this.cssPosition === \"absolute\" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {\n\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t}\n\n\t\tif ( this._isRootNode( this.offsetParent[ 0 ] ) ) {\n\t\t\tpo = { top: 0, left: 0 };\n\t\t}\n\n\t\treturn {\n\t\t\ttop: po.top + (parseInt(this.offsetParent.css(\"borderTopWidth\"), 10) || 0),\n\t\t\tleft: po.left + (parseInt(this.offsetParent.css(\"borderLeftWidth\"), 10) || 0)\n\t\t};\n\n\t},\n\n\t_getRelativeOffset: function() {\n\t\tif ( this.cssPosition !== \"relative\" ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\tvar p = this.element.position(),\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: p.top - ( parseInt(this.helper.css( \"top\" ), 10) || 0 ) + ( !scrollIsRootNode ? this.scrollParent.scrollTop() : 0 ),\n\t\t\tleft: p.left - ( parseInt(this.helper.css( \"left\" ), 10) || 0 ) + ( !scrollIsRootNode ? this.scrollParent.scrollLeft() : 0 )\n\t\t};\n\n\t},\n\n\t_cacheMargins: function() {\n\t\tthis.margins = {\n\t\t\tleft: (parseInt(this.element.css(\"marginLeft\"), 10) || 0),\n\t\t\ttop: (parseInt(this.element.css(\"marginTop\"), 10) || 0),\n\t\t\tright: (parseInt(this.element.css(\"marginRight\"), 10) || 0),\n\t\t\tbottom: (parseInt(this.element.css(\"marginBottom\"), 10) || 0)\n\t\t};\n\t},\n\n\t_cacheHelperProportions: function() {\n\t\tthis.helperProportions = {\n\t\t\twidth: this.helper.outerWidth(),\n\t\t\theight: this.helper.outerHeight()\n\t\t};\n\t},\n\n\t_setContainment: function() {\n\n\t\tvar isUserScrollable, c, ce,\n\t\t\to = this.options,\n\t\t\tdocument = this.document[ 0 ];\n\n\t\tthis.relativeContainer = null;\n\n\t\tif ( !o.containment ) {\n\t\t\tthis.containment = null;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"window\" ) {\n\t\t\tthis.containment = [\n\t\t\t\t$( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,\n\t\t\t\t$( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,\n\t\t\t\t$( window ).scrollLeft() + $( window ).width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t$( window ).scrollTop() + ( $( window ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"document\") {\n\t\t\tthis.containment = [\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t$( document ).width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t( $( document ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment.constructor === Array ) {\n\t\t\tthis.containment = o.containment;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"parent\" ) {\n\t\t\to.containment = this.helper[ 0 ].parentNode;\n\t\t}\n\n\t\tc = $( o.containment );\n\t\tce = c[ 0 ];\n\n\t\tif ( !ce ) {\n\t\t\treturn;\n\t\t}\n\n\t\tisUserScrollable = /(scroll|auto)/.test( c.css( \"overflow\" ) );\n\n\t\tthis.containment = [\n\t\t\t( parseInt( c.css( \"borderLeftWidth\" ), 10 ) || 0 ) + ( parseInt( c.css( \"paddingLeft\" ), 10 ) || 0 ),\n\t\t\t( parseInt( c.css( \"borderTopWidth\" ), 10 ) || 0 ) + ( parseInt( c.css( \"paddingTop\" ), 10 ) || 0 ),\n\t\t\t( isUserScrollable ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -\n\t\t\t\t( parseInt( c.css( \"borderRightWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingRight\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.width -\n\t\t\t\tthis.margins.left -\n\t\t\t\tthis.margins.right,\n\t\t\t( isUserScrollable ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -\n\t\t\t\t( parseInt( c.css( \"borderBottomWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingBottom\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.height -\n\t\t\t\tthis.margins.top -\n\t\t\t\tthis.margins.bottom\n\t\t];\n\t\tthis.relativeContainer = c;\n\t},\n\n\t_convertPositionTo: function(d, pos) {\n\n\t\tif (!pos) {\n\t\t\tpos = this.position;\n\t\t}\n\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpos.top\t+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.relative.top * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.top * mod -\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.offset.scroll.top : ( scrollIsRootNode ? 0 : this.offset.scroll.top ) ) * mod)\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpos.left +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.relative.left * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.left * mod\t-\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.offset.scroll.left : ( scrollIsRootNode ? 0 : this.offset.scroll.left ) ) * mod)\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_generatePosition: function( event, constrainPosition ) {\n\n\t\tvar containment, co, top, left,\n\t\t\to = this.options,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] ),\n\t\t\tpageX = event.pageX,\n\t\t\tpageY = event.pageY;\n\n\t\t// Cache the scroll\n\t\tif ( !scrollIsRootNode || !this.offset.scroll ) {\n\t\t\tthis.offset.scroll = {\n\t\t\t\ttop: this.scrollParent.scrollTop(),\n\t\t\t\tleft: this.scrollParent.scrollLeft()\n\t\t\t};\n\t\t}\n\n\t\t/*\n\t\t * - Position constraining -\n\t\t * Constrain the position to a mix of grid, containment.\n\t\t */\n\n\t\t// If we are not dragging yet, we won't check for options\n\t\tif ( constrainPosition ) {\n\t\t\tif ( this.containment ) {\n\t\t\t\tif ( this.relativeContainer ){\n\t\t\t\t\tco = this.relativeContainer.offset();\n\t\t\t\t\tcontainment = [\n\t\t\t\t\t\tthis.containment[ 0 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 1 ] + co.top,\n\t\t\t\t\t\tthis.containment[ 2 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 3 ] + co.top\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tcontainment = this.containment;\n\t\t\t\t}\n\n\t\t\t\tif (event.pageX - this.offset.click.left < containment[0]) {\n\t\t\t\t\tpageX = containment[0] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif (event.pageY - this.offset.click.top < containment[1]) {\n\t\t\t\t\tpageY = containment[1] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t\tif (event.pageX - this.offset.click.left > containment[2]) {\n\t\t\t\t\tpageX = containment[2] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif (event.pageY - this.offset.click.top > containment[3]) {\n\t\t\t\t\tpageY = containment[3] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (o.grid) {\n\t\t\t\t//Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)\n\t\t\t\ttop = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;\n\t\t\t\tpageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\n\n\t\t\t\tleft = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;\n\t\t\t\tpageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"y\" ) {\n\t\t\t\tpageX = this.originalPageX;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"x\" ) {\n\t\t\t\tpageY = this.originalPageY;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpageY -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.click.top\t-\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.relative.top -\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.top +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( this.cssPosition === \"fixed\" ? -this.offset.scroll.top : ( scrollIsRootNode ? 0 : this.offset.scroll.top ) )\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpageX -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.click.left -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.relative.left -\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.left +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( this.cssPosition === \"fixed\" ? -this.offset.scroll.left : ( scrollIsRootNode ? 0 : this.offset.scroll.left ) )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_clear: function() {\n\t\tthis.helper.removeClass(\"ui-draggable-dragging\");\n\t\tif (this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {\n\t\t\tthis.helper.remove();\n\t\t}\n\t\tthis.helper = null;\n\t\tthis.cancelHelperRemoval = false;\n\t\tif ( this.destroyOnClear ) {\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\n\t_normalizeRightBottom: function() {\n\t\tif ( this.options.axis !== \"y\" && this.helper.css( \"right\" ) !== \"auto\" ) {\n\t\t\tthis.helper.width( this.helper.width() );\n\t\t\tthis.helper.css( \"right\", \"auto\" );\n\t\t}\n\t\tif ( this.options.axis !== \"x\" && this.helper.css( \"bottom\" ) !== \"auto\" ) {\n\t\t\tthis.helper.height( this.helper.height() );\n\t\t\tthis.helper.css( \"bottom\", \"auto\" );\n\t\t}\n\t},\n\n\t// From now on bulk stuff - mainly helpers\n\n\t_trigger: function( type, event, ui ) {\n\t\tui = ui || this._uiHash();\n\t\t$.ui.plugin.call( this, type, [ event, ui, this ], true );\n\n\t\t// Absolute position and offset (see #6884 ) have to be recalculated after plugins\n\t\tif ( /^(drag|start|stop)/.test( type ) ) {\n\t\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\t\t\tui.offset = this.positionAbs;\n\t\t}\n\t\treturn $.Widget.prototype._trigger.call( this, type, event, ui );\n\t},\n\n\tplugins: {},\n\n\t_uiHash: function() {\n\t\treturn {\n\t\t\thelper: this.helper,\n\t\t\tposition: this.position,\n\t\t\toriginalPosition: this.originalPosition,\n\t\t\toffset: this.positionAbs\n\t\t};\n\t}\n\n});\n\n$.ui.plugin.add( \"draggable\", \"connectToSortable\", {\n\tstart: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t});\n\n\t\tdraggable.sortables = [];\n\t\t$( draggable.options.connectToSortable ).each(function() {\n\t\t\tvar sortable = $( this ).sortable( \"instance\" );\n\n\t\t\tif ( sortable && !sortable.options.disabled ) {\n\t\t\t\tdraggable.sortables.push( sortable );\n\n\t\t\t\t// refreshPositions is called at drag start to refresh the containerCache\n\t\t\t\t// which is used in drag. This ensures it's initialized and synchronized\n\t\t\t\t// with any changes that might have happened on the page since initialization.\n\t\t\t\tsortable.refreshPositions();\n\t\t\t\tsortable._trigger(\"activate\", event, uiSortable);\n\t\t\t}\n\t\t});\n\t},\n\tstop: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t});\n\n\t\tdraggable.cancelHelperRemoval = false;\n\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar sortable = this;\n\n\t\t\tif ( sortable.isOver ) {\n\t\t\t\tsortable.isOver = 0;\n\n\t\t\t\t// Allow this sortable to handle removing the helper\n\t\t\t\tdraggable.cancelHelperRemoval = true;\n\t\t\t\tsortable.cancelHelperRemoval = false;\n\n\t\t\t\t// Use _storedCSS To restore properties in the sortable,\n\t\t\t\t// as this also handles revert (#9675) since the draggable\n\t\t\t\t// may have modified them in unexpected ways (#8809)\n\t\t\t\tsortable._storedCSS = {\n\t\t\t\t\tposition: sortable.placeholder.css( \"position\" ),\n\t\t\t\t\ttop: sortable.placeholder.css( \"top\" ),\n\t\t\t\t\tleft: sortable.placeholder.css( \"left\" )\n\t\t\t\t};\n\n\t\t\t\tsortable._mouseStop(event);\n\n\t\t\t\t// Once drag has ended, the sortable should return to using\n\t\t\t\t// its original helper, not the shared helper from draggable\n\t\t\t\tsortable.options.helper = sortable.options._helper;\n\t\t\t} else {\n\t\t\t\t// Prevent this Sortable from removing the helper.\n\t\t\t\t// However, don't set the draggable to remove the helper\n\t\t\t\t// either as another connected Sortable may yet handle the removal.\n\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\tsortable._trigger( \"deactivate\", event, uiSortable );\n\t\t\t}\n\t\t});\n\t},\n\tdrag: function( event, ui, draggable ) {\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar innermostIntersecting = false,\n\t\t\t\tsortable = this;\n\n\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\tsortable.positionAbs = draggable.positionAbs;\n\t\t\tsortable.helperProportions = draggable.helperProportions;\n\t\t\tsortable.offset.click = draggable.offset.click;\n\n\t\t\tif ( sortable._intersectsWith( sortable.containerCache ) ) {\n\t\t\t\tinnermostIntersecting = true;\n\n\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\t\t\tthis.positionAbs = draggable.positionAbs;\n\t\t\t\t\tthis.helperProportions = draggable.helperProportions;\n\t\t\t\t\tthis.offset.click = draggable.offset.click;\n\n\t\t\t\t\tif ( this !== sortable &&\n\t\t\t\t\t\t\tthis._intersectsWith( this.containerCache ) &&\n\t\t\t\t\t\t\t$.contains( sortable.element[ 0 ], this.element[ 0 ] ) ) {\n\t\t\t\t\t\tinnermostIntersecting = false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn innermostIntersecting;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ( innermostIntersecting ) {\n\t\t\t\t// If it intersects, we use a little isOver variable and set it once,\n\t\t\t\t// so that the move-in stuff gets fired only once.\n\t\t\t\tif ( !sortable.isOver ) {\n\t\t\t\t\tsortable.isOver = 1;\n\n\t\t\t\t\t// Store draggable's parent in case we need to reappend to it later.\n\t\t\t\t\tdraggable._parent = ui.helper.parent();\n\n\t\t\t\t\tsortable.currentItem = ui.helper\n\t\t\t\t\t\t.appendTo( sortable.element )\n\t\t\t\t\t\t.data( \"ui-sortable-item\", true );\n\n\t\t\t\t\t// Store helper option to later restore it\n\t\t\t\t\tsortable.options._helper = sortable.options.helper;\n\n\t\t\t\t\tsortable.options.helper = function() {\n\t\t\t\t\t\treturn ui.helper[ 0 ];\n\t\t\t\t\t};\n\n\t\t\t\t\t// Fire the start events of the sortable with our passed browser event,\n\t\t\t\t\t// and our own helper (so it doesn't create a new one)\n\t\t\t\t\tevent.target = sortable.currentItem[ 0 ];\n\t\t\t\t\tsortable._mouseCapture( event, true );\n\t\t\t\t\tsortable._mouseStart( event, true, true );\n\n\t\t\t\t\t// Because the browser event is way off the new appended portlet,\n\t\t\t\t\t// modify necessary variables to reflect the changes\n\t\t\t\t\tsortable.offset.click.top = draggable.offset.click.top;\n\t\t\t\t\tsortable.offset.click.left = draggable.offset.click.left;\n\t\t\t\t\tsortable.offset.parent.left -= draggable.offset.parent.left -\n\t\t\t\t\t\tsortable.offset.parent.left;\n\t\t\t\t\tsortable.offset.parent.top -= draggable.offset.parent.top -\n\t\t\t\t\t\tsortable.offset.parent.top;\n\n\t\t\t\t\tdraggable._trigger( \"toSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is in a valid drop zone,\n\t\t\t\t\t// used solely in the revert option to handle \"valid/invalid\".\n\t\t\t\t\tdraggable.dropped = sortable.element;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables in the case that\n\t\t\t\t\t// adding to one sortable changes the location of the other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t});\n\n\t\t\t\t\t// hack so receive/update callbacks work (mostly)\n\t\t\t\t\tdraggable.currentItem = draggable.element;\n\t\t\t\t\tsortable.fromOutside = draggable;\n\t\t\t\t}\n\n\t\t\t\tif ( sortable.currentItem ) {\n\t\t\t\t\tsortable._mouseDrag( event );\n\t\t\t\t\t// Copy the sortable's position because the draggable's can potentially reflect\n\t\t\t\t\t// a relative position, while sortable is always absolute, which the dragged\n\t\t\t\t\t// element has now become. (#8809)\n\t\t\t\t\tui.position = sortable.position;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If it doesn't intersect with the sortable, and it intersected before,\n\t\t\t\t// we fake the drag stop of the sortable, but make sure it doesn't remove\n\t\t\t\t// the helper by using cancelHelperRemoval.\n\t\t\t\tif ( sortable.isOver ) {\n\n\t\t\t\t\tsortable.isOver = 0;\n\t\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\t\t// Calling sortable's mouseStop would trigger a revert,\n\t\t\t\t\t// so revert must be temporarily false until after mouseStop is called.\n\t\t\t\t\tsortable.options._revert = sortable.options.revert;\n\t\t\t\t\tsortable.options.revert = false;\n\n\t\t\t\t\tsortable._trigger( \"out\", event, sortable._uiHash( sortable ) );\n\t\t\t\t\tsortable._mouseStop( event, true );\n\n\t\t\t\t\t// restore sortable behaviors that were modfied\n\t\t\t\t\t// when the draggable entered the sortable area (#9481)\n\t\t\t\t\tsortable.options.revert = sortable.options._revert;\n\t\t\t\t\tsortable.options.helper = sortable.options._helper;\n\n\t\t\t\t\tif ( sortable.placeholder ) {\n\t\t\t\t\t\tsortable.placeholder.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Restore and recalculate the draggable's offset considering the sortable\n\t\t\t\t\t// may have modified them in unexpected ways. (#8809, #10669)\n\t\t\t\t\tui.helper.appendTo( draggable._parent );\n\t\t\t\t\tdraggable._refreshOffsets( event );\n\t\t\t\t\tui.position = draggable._generatePosition( event, true );\n\n\t\t\t\t\tdraggable._trigger( \"fromSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is no longer in a valid drop zone\n\t\t\t\t\tdraggable.dropped = false;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables just in case removing\n\t\t\t\t\t// from one sortable changes the location of other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"cursor\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( \"body\" ),\n\t\t\to = instance.options;\n\n\t\tif (t.css(\"cursor\")) {\n\t\t\to._cursor = t.css(\"cursor\");\n\t\t}\n\t\tt.css(\"cursor\", o.cursor);\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif (o._cursor) {\n\t\t\t$(\"body\").css(\"cursor\", o._cursor);\n\t\t}\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"opacity\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\t\tif (t.css(\"opacity\")) {\n\t\t\to._opacity = t.css(\"opacity\");\n\t\t}\n\t\tt.css(\"opacity\", o.opacity);\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif (o._opacity) {\n\t\t\t$(ui.helper).css(\"opacity\", o._opacity);\n\t\t}\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"scroll\", {\n\tstart: function( event, ui, i ) {\n\t\tif ( !i.scrollParentNotHidden ) {\n\t\t\ti.scrollParentNotHidden = i.helper.scrollParent( false );\n\t\t}\n\n\t\tif ( i.scrollParentNotHidden[ 0 ] !== i.document[ 0 ] && i.scrollParentNotHidden[ 0 ].tagName !== \"HTML\" ) {\n\t\t\ti.overflowOffset = i.scrollParentNotHidden.offset();\n\t\t}\n\t},\n\tdrag: function( event, ui, i  ) {\n\n\t\tvar o = i.options,\n\t\t\tscrolled = false,\n\t\t\tscrollParent = i.scrollParentNotHidden[ 0 ],\n\t\t\tdocument = i.document[ 0 ];\n\n\t\tif ( scrollParent !== document && scrollParent.tagName !== \"HTML\" ) {\n\t\t\tif ( !o.axis || o.axis !== \"x\" ) {\n\t\t\t\tif ( ( i.overflowOffset.top + scrollParent.offsetHeight ) - event.pageY < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageY - i.overflowOffset.top < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !o.axis || o.axis !== \"y\" ) {\n\t\t\t\tif ( ( i.overflowOffset.left + scrollParent.offsetWidth ) - event.pageX < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageX - i.overflowOffset.left < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif (!o.axis || o.axis !== \"x\") {\n\t\t\t\tif (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);\n\t\t\t\t} else if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!o.axis || o.axis !== \"y\") {\n\t\t\t\tif (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);\n\t\t\t\t} else if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t$.ui.ddmanager.prepareOffsets(i, event);\n\t\t}\n\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"snap\", {\n\tstart: function( event, ui, i ) {\n\n\t\tvar o = i.options;\n\n\t\ti.snapElements = [];\n\n\t\t$(o.snap.constructor !== String ? ( o.snap.items || \":data(ui-draggable)\" ) : o.snap).each(function() {\n\t\t\tvar $t = $(this),\n\t\t\t\t$o = $t.offset();\n\t\t\tif (this !== i.element[0]) {\n\t\t\t\ti.snapElements.push({\n\t\t\t\t\titem: this,\n\t\t\t\t\twidth: $t.outerWidth(), height: $t.outerHeight(),\n\t\t\t\t\ttop: $o.top, left: $o.left\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t},\n\tdrag: function( event, ui, inst ) {\n\n\t\tvar ts, bs, ls, rs, l, r, t, b, i, first,\n\t\t\to = inst.options,\n\t\t\td = o.snapTolerance,\n\t\t\tx1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,\n\t\t\ty1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;\n\n\t\tfor (i = inst.snapElements.length - 1; i >= 0; i--){\n\n\t\t\tl = inst.snapElements[i].left - inst.margins.left;\n\t\t\tr = l + inst.snapElements[i].width;\n\t\t\tt = inst.snapElements[i].top - inst.margins.top;\n\t\t\tb = t + inst.snapElements[i].height;\n\n\t\t\tif ( x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains( inst.snapElements[ i ].item.ownerDocument, inst.snapElements[ i ].item ) ) {\n\t\t\t\tif (inst.snapElements[i].snapping) {\n\t\t\t\t\t(inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));\n\t\t\t\t}\n\t\t\t\tinst.snapElements[i].snapping = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (o.snapMode !== \"inner\") {\n\t\t\t\tts = Math.abs(t - y2) <= d;\n\t\t\t\tbs = Math.abs(b - y1) <= d;\n\t\t\t\tls = Math.abs(l - x2) <= d;\n\t\t\t\trs = Math.abs(r - x1) <= d;\n\t\t\t\tif (ts) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: t - inst.helperProportions.height, left: 0 }).top;\n\t\t\t\t}\n\t\t\t\tif (bs) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: b, left: 0 }).top;\n\t\t\t\t}\n\t\t\t\tif (ls) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: l - inst.helperProportions.width }).left;\n\t\t\t\t}\n\t\t\t\tif (rs) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: r }).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfirst = (ts || bs || ls || rs);\n\n\t\t\tif (o.snapMode !== \"outer\") {\n\t\t\t\tts = Math.abs(t - y1) <= d;\n\t\t\t\tbs = Math.abs(b - y2) <= d;\n\t\t\t\tls = Math.abs(l - x1) <= d;\n\t\t\t\trs = Math.abs(r - x2) <= d;\n\t\t\t\tif (ts) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: t, left: 0 }).top;\n\t\t\t\t}\n\t\t\t\tif (bs) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: b - inst.helperProportions.height, left: 0 }).top;\n\t\t\t\t}\n\t\t\t\tif (ls) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: l }).left;\n\t\t\t\t}\n\t\t\t\tif (rs) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: r - inst.helperProportions.width }).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {\n\t\t\t\t(inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));\n\t\t\t}\n\t\t\tinst.snapElements[i].snapping = (ts || bs || ls || rs || first);\n\n\t\t}\n\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"stack\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar min,\n\t\t\to = instance.options,\n\t\t\tgroup = $.makeArray($(o.stack)).sort(function(a, b) {\n\t\t\t\treturn (parseInt($(a).css(\"zIndex\"), 10) || 0) - (parseInt($(b).css(\"zIndex\"), 10) || 0);\n\t\t\t});\n\n\t\tif (!group.length) { return; }\n\n\t\tmin = parseInt($(group[0]).css(\"zIndex\"), 10) || 0;\n\t\t$(group).each(function(i) {\n\t\t\t$(this).css(\"zIndex\", min + i);\n\t\t});\n\t\tthis.css(\"zIndex\", (min + group.length));\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"zIndex\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\n\t\tif (t.css(\"zIndex\")) {\n\t\t\to._zIndex = t.css(\"zIndex\");\n\t\t}\n\t\tt.css(\"zIndex\", o.zIndex);\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\n\t\tif (o._zIndex) {\n\t\t\t$(ui.helper).css(\"zIndex\", o._zIndex);\n\t\t}\n\t}\n});\n\nvar draggable = $.ui.draggable;\n\n\n/*!\n * jQuery UI Resizable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/resizable/\n */\n\n\n$.widget(\"ui.resizable\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"resize\",\n\toptions: {\n\t\talsoResize: false,\n\t\tanimate: false,\n\t\tanimateDuration: \"slow\",\n\t\tanimateEasing: \"swing\",\n\t\taspectRatio: false,\n\t\tautoHide: false,\n\t\tcontainment: false,\n\t\tghost: false,\n\t\tgrid: false,\n\t\thandles: \"e,s,se\",\n\t\thelper: false,\n\t\tmaxHeight: null,\n\t\tmaxWidth: null,\n\t\tminHeight: 10,\n\t\tminWidth: 10,\n\t\t// See #7960\n\t\tzIndex: 90,\n\n\t\t// callbacks\n\t\tresize: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t_num: function( value ) {\n\t\treturn parseInt( value, 10 ) || 0;\n\t},\n\n\t_isNumber: function( value ) {\n\t\treturn !isNaN( parseInt( value, 10 ) );\n\t},\n\n\t_hasScroll: function( el, a ) {\n\n\t\tif ( $( el ).css( \"overflow\" ) === \"hidden\") {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar scroll = ( a && a === \"left\" ) ? \"scrollLeft\" : \"scrollTop\",\n\t\t\thas = false;\n\n\t\tif ( el[ scroll ] > 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// TODO: determine which cases actually cause this to happen\n\t\t// if the element doesn't have the scroll set, see if it's possible to\n\t\t// set the scroll\n\t\tel[ scroll ] = 1;\n\t\thas = ( el[ scroll ] > 0 );\n\t\tel[ scroll ] = 0;\n\t\treturn has;\n\t},\n\n\t_create: function() {\n\n\t\tvar n, i, handle, axis, hname,\n\t\t\tthat = this,\n\t\t\to = this.options;\n\t\tthis.element.addClass(\"ui-resizable\");\n\n\t\t$.extend(this, {\n\t\t\t_aspectRatio: !!(o.aspectRatio),\n\t\t\taspectRatio: o.aspectRatio,\n\t\t\toriginalElement: this.element,\n\t\t\t_proportionallyResizeElements: [],\n\t\t\t_helper: o.helper || o.ghost || o.animate ? o.helper || \"ui-resizable-helper\" : null\n\t\t});\n\n\t\t// Wrap the element if it cannot hold child nodes\n\t\tif (this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)) {\n\n\t\t\tthis.element.wrap(\n\t\t\t\t$(\"<div class='ui-wrapper' style='overflow: hidden;'></div>\").css({\n\t\t\t\t\tposition: this.element.css(\"position\"),\n\t\t\t\t\twidth: this.element.outerWidth(),\n\t\t\t\t\theight: this.element.outerHeight(),\n\t\t\t\t\ttop: this.element.css(\"top\"),\n\t\t\t\t\tleft: this.element.css(\"left\")\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.element = this.element.parent().data(\n\t\t\t\t\"ui-resizable\", this.element.resizable( \"instance\" )\n\t\t\t);\n\n\t\t\tthis.elementIsWrapper = true;\n\n\t\t\tthis.element.css({\n\t\t\t\tmarginLeft: this.originalElement.css(\"marginLeft\"),\n\t\t\t\tmarginTop: this.originalElement.css(\"marginTop\"),\n\t\t\t\tmarginRight: this.originalElement.css(\"marginRight\"),\n\t\t\t\tmarginBottom: this.originalElement.css(\"marginBottom\")\n\t\t\t});\n\t\t\tthis.originalElement.css({\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tmarginTop: 0,\n\t\t\t\tmarginRight: 0,\n\t\t\t\tmarginBottom: 0\n\t\t\t});\n\t\t\t// support: Safari\n\t\t\t// Prevent Safari textarea resize\n\t\t\tthis.originalResizeStyle = this.originalElement.css(\"resize\");\n\t\t\tthis.originalElement.css(\"resize\", \"none\");\n\n\t\t\tthis._proportionallyResizeElements.push( this.originalElement.css({\n\t\t\t\tposition: \"static\",\n\t\t\t\tzoom: 1,\n\t\t\t\tdisplay: \"block\"\n\t\t\t}) );\n\n\t\t\t// support: IE9\n\t\t\t// avoid IE jump (hard set the margin)\n\t\t\tthis.originalElement.css({ margin: this.originalElement.css(\"margin\") });\n\n\t\t\tthis._proportionallyResize();\n\t\t}\n\n\t\tthis.handles = o.handles ||\n\t\t\t( !$(\".ui-resizable-handle\", this.element).length ?\n\t\t\t\t\"e,s,se\" : {\n\t\t\t\t\tn: \".ui-resizable-n\",\n\t\t\t\t\te: \".ui-resizable-e\",\n\t\t\t\t\ts: \".ui-resizable-s\",\n\t\t\t\t\tw: \".ui-resizable-w\",\n\t\t\t\t\tse: \".ui-resizable-se\",\n\t\t\t\t\tsw: \".ui-resizable-sw\",\n\t\t\t\t\tne: \".ui-resizable-ne\",\n\t\t\t\t\tnw: \".ui-resizable-nw\"\n\t\t\t\t} );\n\n\t\tthis._handles = $();\n\t\tif ( this.handles.constructor === String ) {\n\n\t\t\tif ( this.handles === \"all\") {\n\t\t\t\tthis.handles = \"n,e,s,w,se,sw,ne,nw\";\n\t\t\t}\n\n\t\t\tn = this.handles.split(\",\");\n\t\t\tthis.handles = {};\n\n\t\t\tfor (i = 0; i < n.length; i++) {\n\n\t\t\t\thandle = $.trim(n[i]);\n\t\t\t\thname = \"ui-resizable-\" + handle;\n\t\t\t\taxis = $(\"<div class='ui-resizable-handle \" + hname + \"'></div>\");\n\n\t\t\t\taxis.css({ zIndex: o.zIndex });\n\n\t\t\t\t// TODO : What's going on here?\n\t\t\t\tif (\"se\" === handle) {\n\t\t\t\t\taxis.addClass(\"ui-icon ui-icon-gripsmall-diagonal-se\");\n\t\t\t\t}\n\n\t\t\t\tthis.handles[handle] = \".ui-resizable-\" + handle;\n\t\t\t\tthis.element.append(axis);\n\t\t\t}\n\n\t\t}\n\n\t\tthis._renderAxis = function(target) {\n\n\t\t\tvar i, axis, padPos, padWrapper;\n\n\t\t\ttarget = target || this.element;\n\n\t\t\tfor (i in this.handles) {\n\n\t\t\t\tif (this.handles[i].constructor === String) {\n\t\t\t\t\tthis.handles[i] = this.element.children( this.handles[ i ] ).first().show();\n\t\t\t\t} else if ( this.handles[ i ].jquery || this.handles[ i ].nodeType ) {\n\t\t\t\t\tthis.handles[ i ] = $( this.handles[ i ] );\n\t\t\t\t\tthis._on( this.handles[ i ], { \"mousedown\": that._mouseDown });\n\t\t\t\t}\n\n\t\t\t\tif (this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)) {\n\n\t\t\t\t\taxis = $(this.handles[i], this.element);\n\n\t\t\t\t\tpadWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();\n\n\t\t\t\t\tpadPos = [ \"padding\",\n\t\t\t\t\t\t/ne|nw|n/.test(i) ? \"Top\" :\n\t\t\t\t\t\t/se|sw|s/.test(i) ? \"Bottom\" :\n\t\t\t\t\t\t/^e$/.test(i) ? \"Right\" : \"Left\" ].join(\"\");\n\n\t\t\t\t\ttarget.css(padPos, padWrapper);\n\n\t\t\t\t\tthis._proportionallyResize();\n\t\t\t\t}\n\n\t\t\t\tthis._handles = this._handles.add( this.handles[ i ] );\n\t\t\t}\n\t\t};\n\n\t\t// TODO: make renderAxis a prototype function\n\t\tthis._renderAxis(this.element);\n\n\t\tthis._handles = this._handles.add( this.element.find( \".ui-resizable-handle\" ) );\n\t\tthis._handles.disableSelection();\n\n\t\tthis._handles.mouseover(function() {\n\t\t\tif (!that.resizing) {\n\t\t\t\tif (this.className) {\n\t\t\t\t\taxis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);\n\t\t\t\t}\n\t\t\t\tthat.axis = axis && axis[1] ? axis[1] : \"se\";\n\t\t\t}\n\t\t});\n\n\t\tif (o.autoHide) {\n\t\t\tthis._handles.hide();\n\t\t\t$(this.element)\n\t\t\t\t.addClass(\"ui-resizable-autohide\")\n\t\t\t\t.mouseenter(function() {\n\t\t\t\t\tif (o.disabled) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t$(this).removeClass(\"ui-resizable-autohide\");\n\t\t\t\t\tthat._handles.show();\n\t\t\t\t})\n\t\t\t\t.mouseleave(function() {\n\t\t\t\t\tif (o.disabled) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!that.resizing) {\n\t\t\t\t\t\t$(this).addClass(\"ui-resizable-autohide\");\n\t\t\t\t\t\tthat._handles.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tthis._mouseInit();\n\t},\n\n\t_destroy: function() {\n\n\t\tthis._mouseDestroy();\n\n\t\tvar wrapper,\n\t\t\t_destroy = function(exp) {\n\t\t\t\t$(exp)\n\t\t\t\t\t.removeClass(\"ui-resizable ui-resizable-disabled ui-resizable-resizing\")\n\t\t\t\t\t.removeData(\"resizable\")\n\t\t\t\t\t.removeData(\"ui-resizable\")\n\t\t\t\t\t.unbind(\".resizable\")\n\t\t\t\t\t.find(\".ui-resizable-handle\")\n\t\t\t\t\t\t.remove();\n\t\t\t};\n\n\t\t// TODO: Unwrap at same DOM position\n\t\tif (this.elementIsWrapper) {\n\t\t\t_destroy(this.element);\n\t\t\twrapper = this.element;\n\t\t\tthis.originalElement.css({\n\t\t\t\tposition: wrapper.css(\"position\"),\n\t\t\t\twidth: wrapper.outerWidth(),\n\t\t\t\theight: wrapper.outerHeight(),\n\t\t\t\ttop: wrapper.css(\"top\"),\n\t\t\t\tleft: wrapper.css(\"left\")\n\t\t\t}).insertAfter( wrapper );\n\t\t\twrapper.remove();\n\t\t}\n\n\t\tthis.originalElement.css(\"resize\", this.originalResizeStyle);\n\t\t_destroy(this.originalElement);\n\n\t\treturn this;\n\t},\n\n\t_mouseCapture: function(event) {\n\t\tvar i, handle,\n\t\t\tcapture = false;\n\n\t\tfor (i in this.handles) {\n\t\t\thandle = $(this.handles[i])[0];\n\t\t\tif (handle === event.target || $.contains(handle, event.target)) {\n\t\t\t\tcapture = true;\n\t\t\t}\n\t\t}\n\n\t\treturn !this.options.disabled && capture;\n\t},\n\n\t_mouseStart: function(event) {\n\n\t\tvar curleft, curtop, cursor,\n\t\t\to = this.options,\n\t\t\tel = this.element;\n\n\t\tthis.resizing = true;\n\n\t\tthis._renderProxy();\n\n\t\tcurleft = this._num(this.helper.css(\"left\"));\n\t\tcurtop = this._num(this.helper.css(\"top\"));\n\n\t\tif (o.containment) {\n\t\t\tcurleft += $(o.containment).scrollLeft() || 0;\n\t\t\tcurtop += $(o.containment).scrollTop() || 0;\n\t\t}\n\n\t\tthis.offset = this.helper.offset();\n\t\tthis.position = { left: curleft, top: curtop };\n\n\t\tthis.size = this._helper ? {\n\t\t\t\twidth: this.helper.width(),\n\t\t\t\theight: this.helper.height()\n\t\t\t} : {\n\t\t\t\twidth: el.width(),\n\t\t\t\theight: el.height()\n\t\t\t};\n\n\t\tthis.originalSize = this._helper ? {\n\t\t\t\twidth: el.outerWidth(),\n\t\t\t\theight: el.outerHeight()\n\t\t\t} : {\n\t\t\t\twidth: el.width(),\n\t\t\t\theight: el.height()\n\t\t\t};\n\n\t\tthis.sizeDiff = {\n\t\t\twidth: el.outerWidth() - el.width(),\n\t\t\theight: el.outerHeight() - el.height()\n\t\t};\n\n\t\tthis.originalPosition = { left: curleft, top: curtop };\n\t\tthis.originalMousePosition = { left: event.pageX, top: event.pageY };\n\n\t\tthis.aspectRatio = (typeof o.aspectRatio === \"number\") ?\n\t\t\to.aspectRatio :\n\t\t\t((this.originalSize.width / this.originalSize.height) || 1);\n\n\t\tcursor = $(\".ui-resizable-\" + this.axis).css(\"cursor\");\n\t\t$(\"body\").css(\"cursor\", cursor === \"auto\" ? this.axis + \"-resize\" : cursor);\n\n\t\tel.addClass(\"ui-resizable-resizing\");\n\t\tthis._propagate(\"start\", event);\n\t\treturn true;\n\t},\n\n\t_mouseDrag: function(event) {\n\n\t\tvar data, props,\n\t\t\tsmp = this.originalMousePosition,\n\t\t\ta = this.axis,\n\t\t\tdx = (event.pageX - smp.left) || 0,\n\t\t\tdy = (event.pageY - smp.top) || 0,\n\t\t\ttrigger = this._change[a];\n\n\t\tthis._updatePrevProperties();\n\n\t\tif (!trigger) {\n\t\t\treturn false;\n\t\t}\n\n\t\tdata = trigger.apply(this, [ event, dx, dy ]);\n\n\t\tthis._updateVirtualBoundaries(event.shiftKey);\n\t\tif (this._aspectRatio || event.shiftKey) {\n\t\t\tdata = this._updateRatio(data, event);\n\t\t}\n\n\t\tdata = this._respectSize(data, event);\n\n\t\tthis._updateCache(data);\n\n\t\tthis._propagate(\"resize\", event);\n\n\t\tprops = this._applyChanges();\n\n\t\tif ( !this._helper && this._proportionallyResizeElements.length ) {\n\t\t\tthis._proportionallyResize();\n\t\t}\n\n\t\tif ( !$.isEmptyObject( props ) ) {\n\t\t\tthis._updatePrevProperties();\n\t\t\tthis._trigger( \"resize\", event, this.ui() );\n\t\t\tthis._applyChanges();\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function(event) {\n\n\t\tthis.resizing = false;\n\t\tvar pr, ista, soffseth, soffsetw, s, left, top,\n\t\t\to = this.options, that = this;\n\n\t\tif (this._helper) {\n\n\t\t\tpr = this._proportionallyResizeElements;\n\t\t\tista = pr.length && (/textarea/i).test(pr[0].nodeName);\n\t\t\tsoffseth = ista && this._hasScroll(pr[0], \"left\") ? 0 : that.sizeDiff.height;\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width;\n\n\t\t\ts = {\n\t\t\t\twidth: (that.helper.width()  - soffsetw),\n\t\t\t\theight: (that.helper.height() - soffseth)\n\t\t\t};\n\t\t\tleft = (parseInt(that.element.css(\"left\"), 10) +\n\t\t\t\t(that.position.left - that.originalPosition.left)) || null;\n\t\t\ttop = (parseInt(that.element.css(\"top\"), 10) +\n\t\t\t\t(that.position.top - that.originalPosition.top)) || null;\n\n\t\t\tif (!o.animate) {\n\t\t\t\tthis.element.css($.extend(s, { top: top, left: left }));\n\t\t\t}\n\n\t\t\tthat.helper.height(that.size.height);\n\t\t\tthat.helper.width(that.size.width);\n\n\t\t\tif (this._helper && !o.animate) {\n\t\t\t\tthis._proportionallyResize();\n\t\t\t}\n\t\t}\n\n\t\t$(\"body\").css(\"cursor\", \"auto\");\n\n\t\tthis.element.removeClass(\"ui-resizable-resizing\");\n\n\t\tthis._propagate(\"stop\", event);\n\n\t\tif (this._helper) {\n\t\t\tthis.helper.remove();\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\t_updatePrevProperties: function() {\n\t\tthis.prevPosition = {\n\t\t\ttop: this.position.top,\n\t\t\tleft: this.position.left\n\t\t};\n\t\tthis.prevSize = {\n\t\t\twidth: this.size.width,\n\t\t\theight: this.size.height\n\t\t};\n\t},\n\n\t_applyChanges: function() {\n\t\tvar props = {};\n\n\t\tif ( this.position.top !== this.prevPosition.top ) {\n\t\t\tprops.top = this.position.top + \"px\";\n\t\t}\n\t\tif ( this.position.left !== this.prevPosition.left ) {\n\t\t\tprops.left = this.position.left + \"px\";\n\t\t}\n\t\tif ( this.size.width !== this.prevSize.width ) {\n\t\t\tprops.width = this.size.width + \"px\";\n\t\t}\n\t\tif ( this.size.height !== this.prevSize.height ) {\n\t\t\tprops.height = this.size.height + \"px\";\n\t\t}\n\n\t\tthis.helper.css( props );\n\n\t\treturn props;\n\t},\n\n\t_updateVirtualBoundaries: function(forceAspectRatio) {\n\t\tvar pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,\n\t\t\to = this.options;\n\n\t\tb = {\n\t\t\tminWidth: this._isNumber(o.minWidth) ? o.minWidth : 0,\n\t\t\tmaxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : Infinity,\n\t\t\tminHeight: this._isNumber(o.minHeight) ? o.minHeight : 0,\n\t\t\tmaxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : Infinity\n\t\t};\n\n\t\tif (this._aspectRatio || forceAspectRatio) {\n\t\t\tpMinWidth = b.minHeight * this.aspectRatio;\n\t\t\tpMinHeight = b.minWidth / this.aspectRatio;\n\t\t\tpMaxWidth = b.maxHeight * this.aspectRatio;\n\t\t\tpMaxHeight = b.maxWidth / this.aspectRatio;\n\n\t\t\tif (pMinWidth > b.minWidth) {\n\t\t\t\tb.minWidth = pMinWidth;\n\t\t\t}\n\t\t\tif (pMinHeight > b.minHeight) {\n\t\t\t\tb.minHeight = pMinHeight;\n\t\t\t}\n\t\t\tif (pMaxWidth < b.maxWidth) {\n\t\t\t\tb.maxWidth = pMaxWidth;\n\t\t\t}\n\t\t\tif (pMaxHeight < b.maxHeight) {\n\t\t\t\tb.maxHeight = pMaxHeight;\n\t\t\t}\n\t\t}\n\t\tthis._vBoundaries = b;\n\t},\n\n\t_updateCache: function(data) {\n\t\tthis.offset = this.helper.offset();\n\t\tif (this._isNumber(data.left)) {\n\t\t\tthis.position.left = data.left;\n\t\t}\n\t\tif (this._isNumber(data.top)) {\n\t\t\tthis.position.top = data.top;\n\t\t}\n\t\tif (this._isNumber(data.height)) {\n\t\t\tthis.size.height = data.height;\n\t\t}\n\t\tif (this._isNumber(data.width)) {\n\t\t\tthis.size.width = data.width;\n\t\t}\n\t},\n\n\t_updateRatio: function( data ) {\n\n\t\tvar cpos = this.position,\n\t\t\tcsize = this.size,\n\t\t\ta = this.axis;\n\n\t\tif (this._isNumber(data.height)) {\n\t\t\tdata.width = (data.height * this.aspectRatio);\n\t\t} else if (this._isNumber(data.width)) {\n\t\t\tdata.height = (data.width / this.aspectRatio);\n\t\t}\n\n\t\tif (a === \"sw\") {\n\t\t\tdata.left = cpos.left + (csize.width - data.width);\n\t\t\tdata.top = null;\n\t\t}\n\t\tif (a === \"nw\") {\n\t\t\tdata.top = cpos.top + (csize.height - data.height);\n\t\t\tdata.left = cpos.left + (csize.width - data.width);\n\t\t}\n\n\t\treturn data;\n\t},\n\n\t_respectSize: function( data ) {\n\n\t\tvar o = this._vBoundaries,\n\t\t\ta = this.axis,\n\t\t\tismaxw = this._isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width),\n\t\t\tismaxh = this._isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height),\n\t\t\tisminw = this._isNumber(data.width) && o.minWidth && (o.minWidth > data.width),\n\t\t\tisminh = this._isNumber(data.height) && o.minHeight && (o.minHeight > data.height),\n\t\t\tdw = this.originalPosition.left + this.originalSize.width,\n\t\t\tdh = this.position.top + this.size.height,\n\t\t\tcw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);\n\t\tif (isminw) {\n\t\t\tdata.width = o.minWidth;\n\t\t}\n\t\tif (isminh) {\n\t\t\tdata.height = o.minHeight;\n\t\t}\n\t\tif (ismaxw) {\n\t\t\tdata.width = o.maxWidth;\n\t\t}\n\t\tif (ismaxh) {\n\t\t\tdata.height = o.maxHeight;\n\t\t}\n\n\t\tif (isminw && cw) {\n\t\t\tdata.left = dw - o.minWidth;\n\t\t}\n\t\tif (ismaxw && cw) {\n\t\t\tdata.left = dw - o.maxWidth;\n\t\t}\n\t\tif (isminh && ch) {\n\t\t\tdata.top = dh - o.minHeight;\n\t\t}\n\t\tif (ismaxh && ch) {\n\t\t\tdata.top = dh - o.maxHeight;\n\t\t}\n\n\t\t// Fixing jump error on top/left - bug #2330\n\t\tif (!data.width && !data.height && !data.left && data.top) {\n\t\t\tdata.top = null;\n\t\t} else if (!data.width && !data.height && !data.top && data.left) {\n\t\t\tdata.left = null;\n\t\t}\n\n\t\treturn data;\n\t},\n\n\t_getPaddingPlusBorderDimensions: function( element ) {\n\t\tvar i = 0,\n\t\t\twidths = [],\n\t\t\tborders = [\n\t\t\t\telement.css( \"borderTopWidth\" ),\n\t\t\t\telement.css( \"borderRightWidth\" ),\n\t\t\t\telement.css( \"borderBottomWidth\" ),\n\t\t\t\telement.css( \"borderLeftWidth\" )\n\t\t\t],\n\t\t\tpaddings = [\n\t\t\t\telement.css( \"paddingTop\" ),\n\t\t\t\telement.css( \"paddingRight\" ),\n\t\t\t\telement.css( \"paddingBottom\" ),\n\t\t\t\telement.css( \"paddingLeft\" )\n\t\t\t];\n\n\t\tfor ( ; i < 4; i++ ) {\n\t\t\twidths[ i ] = ( parseInt( borders[ i ], 10 ) || 0 );\n\t\t\twidths[ i ] += ( parseInt( paddings[ i ], 10 ) || 0 );\n\t\t}\n\n\t\treturn {\n\t\t\theight: widths[ 0 ] + widths[ 2 ],\n\t\t\twidth: widths[ 1 ] + widths[ 3 ]\n\t\t};\n\t},\n\n\t_proportionallyResize: function() {\n\n\t\tif (!this._proportionallyResizeElements.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar prel,\n\t\t\ti = 0,\n\t\t\telement = this.helper || this.element;\n\n\t\tfor ( ; i < this._proportionallyResizeElements.length; i++) {\n\n\t\t\tprel = this._proportionallyResizeElements[i];\n\n\t\t\t// TODO: Seems like a bug to cache this.outerDimensions\n\t\t\t// considering that we are in a loop.\n\t\t\tif (!this.outerDimensions) {\n\t\t\t\tthis.outerDimensions = this._getPaddingPlusBorderDimensions( prel );\n\t\t\t}\n\n\t\t\tprel.css({\n\t\t\t\theight: (element.height() - this.outerDimensions.height) || 0,\n\t\t\t\twidth: (element.width() - this.outerDimensions.width) || 0\n\t\t\t});\n\n\t\t}\n\n\t},\n\n\t_renderProxy: function() {\n\n\t\tvar el = this.element, o = this.options;\n\t\tthis.elementOffset = el.offset();\n\n\t\tif (this._helper) {\n\n\t\t\tthis.helper = this.helper || $(\"<div style='overflow:hidden;'></div>\");\n\n\t\t\tthis.helper.addClass(this._helper).css({\n\t\t\t\twidth: this.element.outerWidth() - 1,\n\t\t\t\theight: this.element.outerHeight() - 1,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tleft: this.elementOffset.left + \"px\",\n\t\t\t\ttop: this.elementOffset.top + \"px\",\n\t\t\t\tzIndex: ++o.zIndex //TODO: Don't modify option\n\t\t\t});\n\n\t\t\tthis.helper\n\t\t\t\t.appendTo(\"body\")\n\t\t\t\t.disableSelection();\n\n\t\t} else {\n\t\t\tthis.helper = this.element;\n\t\t}\n\n\t},\n\n\t_change: {\n\t\te: function(event, dx) {\n\t\t\treturn { width: this.originalSize.width + dx };\n\t\t},\n\t\tw: function(event, dx) {\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\n\t\t\treturn { left: sp.left + dx, width: cs.width - dx };\n\t\t},\n\t\tn: function(event, dx, dy) {\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\n\t\t\treturn { top: sp.top + dy, height: cs.height - dy };\n\t\t},\n\t\ts: function(event, dx, dy) {\n\t\t\treturn { height: this.originalSize.height + dy };\n\t\t},\n\t\tse: function(event, dx, dy) {\n\t\t\treturn $.extend(this._change.s.apply(this, arguments),\n\t\t\t\tthis._change.e.apply(this, [ event, dx, dy ]));\n\t\t},\n\t\tsw: function(event, dx, dy) {\n\t\t\treturn $.extend(this._change.s.apply(this, arguments),\n\t\t\t\tthis._change.w.apply(this, [ event, dx, dy ]));\n\t\t},\n\t\tne: function(event, dx, dy) {\n\t\t\treturn $.extend(this._change.n.apply(this, arguments),\n\t\t\t\tthis._change.e.apply(this, [ event, dx, dy ]));\n\t\t},\n\t\tnw: function(event, dx, dy) {\n\t\t\treturn $.extend(this._change.n.apply(this, arguments),\n\t\t\t\tthis._change.w.apply(this, [ event, dx, dy ]));\n\t\t}\n\t},\n\n\t_propagate: function(n, event) {\n\t\t$.ui.plugin.call(this, n, [ event, this.ui() ]);\n\t\t(n !== \"resize\" && this._trigger(n, event, this.ui()));\n\t},\n\n\tplugins: {},\n\n\tui: function() {\n\t\treturn {\n\t\t\toriginalElement: this.originalElement,\n\t\t\telement: this.element,\n\t\t\thelper: this.helper,\n\t\t\tposition: this.position,\n\t\t\tsize: this.size,\n\t\t\toriginalSize: this.originalSize,\n\t\t\toriginalPosition: this.originalPosition\n\t\t};\n\t}\n\n});\n\n/*\n * Resizable Extensions\n */\n\n$.ui.plugin.add(\"resizable\", \"animate\", {\n\n\tstop: function( event ) {\n\t\tvar that = $(this).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tpr = that._proportionallyResizeElements,\n\t\t\tista = pr.length && (/textarea/i).test(pr[0].nodeName),\n\t\t\tsoffseth = ista && that._hasScroll(pr[0], \"left\") ? 0 : that.sizeDiff.height,\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width,\n\t\t\tstyle = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },\n\t\t\tleft = (parseInt(that.element.css(\"left\"), 10) +\n\t\t\t\t(that.position.left - that.originalPosition.left)) || null,\n\t\t\ttop = (parseInt(that.element.css(\"top\"), 10) +\n\t\t\t\t(that.position.top - that.originalPosition.top)) || null;\n\n\t\tthat.element.animate(\n\t\t\t$.extend(style, top && left ? { top: top, left: left } : {}), {\n\t\t\t\tduration: o.animateDuration,\n\t\t\t\teasing: o.animateEasing,\n\t\t\t\tstep: function() {\n\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\twidth: parseInt(that.element.css(\"width\"), 10),\n\t\t\t\t\t\theight: parseInt(that.element.css(\"height\"), 10),\n\t\t\t\t\t\ttop: parseInt(that.element.css(\"top\"), 10),\n\t\t\t\t\t\tleft: parseInt(that.element.css(\"left\"), 10)\n\t\t\t\t\t};\n\n\t\t\t\t\tif (pr && pr.length) {\n\t\t\t\t\t\t$(pr[0]).css({ width: data.width, height: data.height });\n\t\t\t\t\t}\n\n\t\t\t\t\t// propagating resize, and updating values for each animation step\n\t\t\t\t\tthat._updateCache(data);\n\t\t\t\t\tthat._propagate(\"resize\", event);\n\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n});\n\n$.ui.plugin.add( \"resizable\", \"containment\", {\n\n\tstart: function() {\n\t\tvar element, p, co, ch, cw, width, height,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tel = that.element,\n\t\t\toc = o.containment,\n\t\t\tce = ( oc instanceof $ ) ? oc.get( 0 ) : ( /parent/.test( oc ) ) ? el.parent().get( 0 ) : oc;\n\n\t\tif ( !ce ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthat.containerElement = $( ce );\n\n\t\tif ( /document/.test( oc ) || oc === document ) {\n\t\t\tthat.containerOffset = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t};\n\t\t\tthat.containerPosition = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t};\n\n\t\t\tthat.parentData = {\n\t\t\t\telement: $( document ),\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: $( document ).width(),\n\t\t\t\theight: $( document ).height() || document.body.parentNode.scrollHeight\n\t\t\t};\n\t\t} else {\n\t\t\telement = $( ce );\n\t\t\tp = [];\n\t\t\t$([ \"Top\", \"Right\", \"Left\", \"Bottom\" ]).each(function( i, name ) {\n\t\t\t\tp[ i ] = that._num( element.css( \"padding\" + name ) );\n\t\t\t});\n\n\t\t\tthat.containerOffset = element.offset();\n\t\t\tthat.containerPosition = element.position();\n\t\t\tthat.containerSize = {\n\t\t\t\theight: ( element.innerHeight() - p[ 3 ] ),\n\t\t\t\twidth: ( element.innerWidth() - p[ 1 ] )\n\t\t\t};\n\n\t\t\tco = that.containerOffset;\n\t\t\tch = that.containerSize.height;\n\t\t\tcw = that.containerSize.width;\n\t\t\twidth = ( that._hasScroll ( ce, \"left\" ) ? ce.scrollWidth : cw );\n\t\t\theight = ( that._hasScroll ( ce ) ? ce.scrollHeight : ch ) ;\n\n\t\t\tthat.parentData = {\n\t\t\t\telement: ce,\n\t\t\t\tleft: co.left,\n\t\t\t\ttop: co.top,\n\t\t\t\twidth: width,\n\t\t\t\theight: height\n\t\t\t};\n\t\t}\n\t},\n\n\tresize: function( event ) {\n\t\tvar woset, hoset, isParent, isOffsetRelative,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tco = that.containerOffset,\n\t\t\tcp = that.position,\n\t\t\tpRatio = that._aspectRatio || event.shiftKey,\n\t\t\tcop = {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t},\n\t\t\tce = that.containerElement,\n\t\t\tcontinueResize = true;\n\n\t\tif ( ce[ 0 ] !== document && ( /static/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\tcop = co;\n\t\t}\n\n\t\tif ( cp.left < ( that._helper ? co.left : 0 ) ) {\n\t\t\tthat.size.width = that.size.width +\n\t\t\t\t( that._helper ?\n\t\t\t\t\t( that.position.left - co.left ) :\n\t\t\t\t\t( that.position.left - cop.left ) );\n\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t\tthat.position.left = o.helper ? co.left : 0;\n\t\t}\n\n\t\tif ( cp.top < ( that._helper ? co.top : 0 ) ) {\n\t\t\tthat.size.height = that.size.height +\n\t\t\t\t( that._helper ?\n\t\t\t\t\t( that.position.top - co.top ) :\n\t\t\t\t\tthat.position.top );\n\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t\tthat.position.top = that._helper ? co.top : 0;\n\t\t}\n\n\t\tisParent = that.containerElement.get( 0 ) === that.element.parent().get( 0 );\n\t\tisOffsetRelative = /relative|absolute/.test( that.containerElement.css( \"position\" ) );\n\n\t\tif ( isParent && isOffsetRelative ) {\n\t\t\tthat.offset.left = that.parentData.left + that.position.left;\n\t\t\tthat.offset.top = that.parentData.top + that.position.top;\n\t\t} else {\n\t\t\tthat.offset.left = that.element.offset().left;\n\t\t\tthat.offset.top = that.element.offset().top;\n\t\t}\n\n\t\twoset = Math.abs( that.sizeDiff.width +\n\t\t\t(that._helper ?\n\t\t\t\tthat.offset.left - cop.left :\n\t\t\t\t(that.offset.left - co.left)) );\n\n\t\thoset = Math.abs( that.sizeDiff.height +\n\t\t\t(that._helper ?\n\t\t\t\tthat.offset.top - cop.top :\n\t\t\t\t(that.offset.top - co.top)) );\n\n\t\tif ( woset + that.size.width >= that.parentData.width ) {\n\t\t\tthat.size.width = that.parentData.width - woset;\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( hoset + that.size.height >= that.parentData.height ) {\n\t\t\tthat.size.height = that.parentData.height - hoset;\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( !continueResize ) {\n\t\t\tthat.position.left = that.prevPosition.left;\n\t\t\tthat.position.top = that.prevPosition.top;\n\t\t\tthat.size.width = that.prevSize.width;\n\t\t\tthat.size.height = that.prevSize.height;\n\t\t}\n\t},\n\n\tstop: function() {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tco = that.containerOffset,\n\t\t\tcop = that.containerPosition,\n\t\t\tce = that.containerElement,\n\t\t\thelper = $( that.helper ),\n\t\t\tho = helper.offset(),\n\t\t\tw = helper.outerWidth() - that.sizeDiff.width,\n\t\t\th = helper.outerHeight() - that.sizeDiff.height;\n\n\t\tif ( that._helper && !o.animate && ( /relative/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\t$( this ).css({\n\t\t\t\tleft: ho.left - cop.left - co.left,\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t});\n\t\t}\n\n\t\tif ( that._helper && !o.animate && ( /static/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\t$( this ).css({\n\t\t\t\tleft: ho.left - cop.left - co.left,\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t});\n\t\t}\n\t}\n});\n\n$.ui.plugin.add(\"resizable\", \"alsoResize\", {\n\n\tstart: function() {\n\t\tvar that = $(this).resizable( \"instance\" ),\n\t\t\to = that.options;\n\n\t\t$(o.alsoResize).each(function() {\n\t\t\tvar el = $(this);\n\t\t\tel.data(\"ui-resizable-alsoresize\", {\n\t\t\t\twidth: parseInt(el.width(), 10), height: parseInt(el.height(), 10),\n\t\t\t\tleft: parseInt(el.css(\"left\"), 10), top: parseInt(el.css(\"top\"), 10)\n\t\t\t});\n\t\t});\n\t},\n\n\tresize: function(event, ui) {\n\t\tvar that = $(this).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tos = that.originalSize,\n\t\t\top = that.originalPosition,\n\t\t\tdelta = {\n\t\t\t\theight: (that.size.height - os.height) || 0,\n\t\t\t\twidth: (that.size.width - os.width) || 0,\n\t\t\t\ttop: (that.position.top - op.top) || 0,\n\t\t\t\tleft: (that.position.left - op.left) || 0\n\t\t\t};\n\n\t\t\t$(o.alsoResize).each(function() {\n\t\t\t\tvar el = $(this), start = $(this).data(\"ui-resizable-alsoresize\"), style = {},\n\t\t\t\t\tcss = el.parents(ui.originalElement[0]).length ?\n\t\t\t\t\t\t\t[ \"width\", \"height\" ] :\n\t\t\t\t\t\t\t[ \"width\", \"height\", \"top\", \"left\" ];\n\n\t\t\t\t$.each(css, function(i, prop) {\n\t\t\t\t\tvar sum = (start[prop] || 0) + (delta[prop] || 0);\n\t\t\t\t\tif (sum && sum >= 0) {\n\t\t\t\t\t\tstyle[prop] = sum || null;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tel.css(style);\n\t\t\t});\n\t},\n\n\tstop: function() {\n\t\t$(this).removeData(\"resizable-alsoresize\");\n\t}\n});\n\n$.ui.plugin.add(\"resizable\", \"ghost\", {\n\n\tstart: function() {\n\n\t\tvar that = $(this).resizable( \"instance\" ), o = that.options, cs = that.size;\n\n\t\tthat.ghost = that.originalElement.clone();\n\t\tthat.ghost\n\t\t\t.css({\n\t\t\t\topacity: 0.25,\n\t\t\t\tdisplay: \"block\",\n\t\t\t\tposition: \"relative\",\n\t\t\t\theight: cs.height,\n\t\t\t\twidth: cs.width,\n\t\t\t\tmargin: 0,\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t})\n\t\t\t.addClass(\"ui-resizable-ghost\")\n\t\t\t.addClass(typeof o.ghost === \"string\" ? o.ghost : \"\");\n\n\t\tthat.ghost.appendTo(that.helper);\n\n\t},\n\n\tresize: function() {\n\t\tvar that = $(this).resizable( \"instance\" );\n\t\tif (that.ghost) {\n\t\t\tthat.ghost.css({\n\t\t\t\tposition: \"relative\",\n\t\t\t\theight: that.size.height,\n\t\t\t\twidth: that.size.width\n\t\t\t});\n\t\t}\n\t},\n\n\tstop: function() {\n\t\tvar that = $(this).resizable( \"instance\" );\n\t\tif (that.ghost && that.helper) {\n\t\t\tthat.helper.get(0).removeChild(that.ghost.get(0));\n\t\t}\n\t}\n\n});\n\n$.ui.plugin.add(\"resizable\", \"grid\", {\n\n\tresize: function() {\n\t\tvar outerDimensions,\n\t\t\tthat = $(this).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tcs = that.size,\n\t\t\tos = that.originalSize,\n\t\t\top = that.originalPosition,\n\t\t\ta = that.axis,\n\t\t\tgrid = typeof o.grid === \"number\" ? [ o.grid, o.grid ] : o.grid,\n\t\t\tgridX = (grid[0] || 1),\n\t\t\tgridY = (grid[1] || 1),\n\t\t\tox = Math.round((cs.width - os.width) / gridX) * gridX,\n\t\t\toy = Math.round((cs.height - os.height) / gridY) * gridY,\n\t\t\tnewWidth = os.width + ox,\n\t\t\tnewHeight = os.height + oy,\n\t\t\tisMaxWidth = o.maxWidth && (o.maxWidth < newWidth),\n\t\t\tisMaxHeight = o.maxHeight && (o.maxHeight < newHeight),\n\t\t\tisMinWidth = o.minWidth && (o.minWidth > newWidth),\n\t\t\tisMinHeight = o.minHeight && (o.minHeight > newHeight);\n\n\t\to.grid = grid;\n\n\t\tif (isMinWidth) {\n\t\t\tnewWidth += gridX;\n\t\t}\n\t\tif (isMinHeight) {\n\t\t\tnewHeight += gridY;\n\t\t}\n\t\tif (isMaxWidth) {\n\t\t\tnewWidth -= gridX;\n\t\t}\n\t\tif (isMaxHeight) {\n\t\t\tnewHeight -= gridY;\n\t\t}\n\n\t\tif (/^(se|s|e)$/.test(a)) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t} else if (/^(ne)$/.test(a)) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t\tthat.position.top = op.top - oy;\n\t\t} else if (/^(sw)$/.test(a)) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t\tthat.position.left = op.left - ox;\n\t\t} else {\n\t\t\tif ( newHeight - gridY <= 0 || newWidth - gridX <= 0) {\n\t\t\t\touterDimensions = that._getPaddingPlusBorderDimensions( this );\n\t\t\t}\n\n\t\t\tif ( newHeight - gridY > 0 ) {\n\t\t\t\tthat.size.height = newHeight;\n\t\t\t\tthat.position.top = op.top - oy;\n\t\t\t} else {\n\t\t\t\tnewHeight = gridY - outerDimensions.height;\n\t\t\t\tthat.size.height = newHeight;\n\t\t\t\tthat.position.top = op.top + os.height - newHeight;\n\t\t\t}\n\t\t\tif ( newWidth - gridX > 0 ) {\n\t\t\t\tthat.size.width = newWidth;\n\t\t\t\tthat.position.left = op.left - ox;\n\t\t\t} else {\n\t\t\t\tnewWidth = gridX - outerDimensions.width;\n\t\t\t\tthat.size.width = newWidth;\n\t\t\t\tthat.position.left = op.left + os.width - newWidth;\n\t\t\t}\n\t\t}\n\t}\n\n});\n\nvar resizable = $.ui.resizable;\n\n\n/*!\n * jQuery UI Dialog 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/dialog/\n */\n\n\nvar dialog = $.widget( \"ui.dialog\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tappendTo: \"body\",\n\t\tautoOpen: true,\n\t\tbuttons: [],\n\t\tcloseOnEscape: true,\n\t\tcloseText: \"Close\",\n\t\tdialogClass: \"\",\n\t\tdraggable: true,\n\t\thide: null,\n\t\theight: \"auto\",\n\t\tmaxHeight: null,\n\t\tmaxWidth: null,\n\t\tminHeight: 150,\n\t\tminWidth: 150,\n\t\tmodal: false,\n\t\tposition: {\n\t\t\tmy: \"center\",\n\t\t\tat: \"center\",\n\t\t\tof: window,\n\t\t\tcollision: \"fit\",\n\t\t\t// Ensure the titlebar is always visible\n\t\t\tusing: function( pos ) {\n\t\t\t\tvar topOffset = $( this ).css( pos ).offset().top;\n\t\t\t\tif ( topOffset < 0 ) {\n\t\t\t\t\t$( this ).css( \"top\", pos.top - topOffset );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tresizable: true,\n\t\tshow: null,\n\t\ttitle: null,\n\t\twidth: 300,\n\n\t\t// callbacks\n\t\tbeforeClose: null,\n\t\tclose: null,\n\t\tdrag: null,\n\t\tdragStart: null,\n\t\tdragStop: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tresize: null,\n\t\tresizeStart: null,\n\t\tresizeStop: null\n\t},\n\n\tsizeRelatedOptions: {\n\t\tbuttons: true,\n\t\theight: true,\n\t\tmaxHeight: true,\n\t\tmaxWidth: true,\n\t\tminHeight: true,\n\t\tminWidth: true,\n\t\twidth: true\n\t},\n\n\tresizableRelatedOptions: {\n\t\tmaxHeight: true,\n\t\tmaxWidth: true,\n\t\tminHeight: true,\n\t\tminWidth: true\n\t},\n\n\t_create: function() {\n\t\tthis.originalCss = {\n\t\t\tdisplay: this.element[ 0 ].style.display,\n\t\t\twidth: this.element[ 0 ].style.width,\n\t\t\tminHeight: this.element[ 0 ].style.minHeight,\n\t\t\tmaxHeight: this.element[ 0 ].style.maxHeight,\n\t\t\theight: this.element[ 0 ].style.height\n\t\t};\n\t\tthis.originalPosition = {\n\t\t\tparent: this.element.parent(),\n\t\t\tindex: this.element.parent().children().index( this.element )\n\t\t};\n\t\tthis.originalTitle = this.element.attr( \"title\" );\n\t\tthis.options.title = this.options.title || this.originalTitle;\n\n\t\tthis._createWrapper();\n\n\t\tthis.element\n\t\t\t.show()\n\t\t\t.removeAttr( \"title\" )\n\t\t\t.addClass( \"ui-dialog-content ui-widget-content\" )\n\t\t\t.appendTo( this.uiDialog );\n\n\t\tthis._createTitlebar();\n\t\tthis._createButtonPane();\n\n\t\tif ( this.options.draggable && $.fn.draggable ) {\n\t\t\tthis._makeDraggable();\n\t\t}\n\t\tif ( this.options.resizable && $.fn.resizable ) {\n\t\t\tthis._makeResizable();\n\t\t}\n\n\t\tthis._isOpen = false;\n\n\t\tthis._trackFocus();\n\t},\n\n\t_init: function() {\n\t\tif ( this.options.autoOpen ) {\n\t\t\tthis.open();\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\t\tif ( element && (element.jquery || element.nodeType) ) {\n\t\t\treturn $( element );\n\t\t}\n\t\treturn this.document.find( element || \"body\" ).eq( 0 );\n\t},\n\n\t_destroy: function() {\n\t\tvar next,\n\t\t\toriginalPosition = this.originalPosition;\n\n\t\tthis._untrackInstance();\n\t\tthis._destroyOverlay();\n\n\t\tthis.element\n\t\t\t.removeUniqueId()\n\t\t\t.removeClass( \"ui-dialog-content ui-widget-content\" )\n\t\t\t.css( this.originalCss )\n\t\t\t// Without detaching first, the following becomes really slow\n\t\t\t.detach();\n\n\t\tthis.uiDialog.stop( true, true ).remove();\n\n\t\tif ( this.originalTitle ) {\n\t\t\tthis.element.attr( \"title\", this.originalTitle );\n\t\t}\n\n\t\tnext = originalPosition.parent.children().eq( originalPosition.index );\n\t\t// Don't try to place the dialog next to itself (#8613)\n\t\tif ( next.length && next[ 0 ] !== this.element[ 0 ] ) {\n\t\t\tnext.before( this.element );\n\t\t} else {\n\t\t\toriginalPosition.parent.append( this.element );\n\t\t}\n\t},\n\n\twidget: function() {\n\t\treturn this.uiDialog;\n\t},\n\n\tdisable: $.noop,\n\tenable: $.noop,\n\n\tclose: function( event ) {\n\t\tvar activeElement,\n\t\t\tthat = this;\n\n\t\tif ( !this._isOpen || this._trigger( \"beforeClose\", event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isOpen = false;\n\t\tthis._focusedElement = null;\n\t\tthis._destroyOverlay();\n\t\tthis._untrackInstance();\n\n\t\tif ( !this.opener.filter( \":focusable\" ).focus().length ) {\n\n\t\t\t// support: IE9\n\t\t\t// IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\n\t\t\ttry {\n\t\t\t\tactiveElement = this.document[ 0 ].activeElement;\n\n\t\t\t\t// Support: IE9, IE10\n\t\t\t\t// If the <body> is blurred, IE will switch windows, see #4520\n\t\t\t\tif ( activeElement && activeElement.nodeName.toLowerCase() !== \"body\" ) {\n\n\t\t\t\t\t// Hiding a focused element doesn't trigger blur in WebKit\n\t\t\t\t\t// so in case we have nothing to focus on, explicitly blur the active element\n\t\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=47182\n\t\t\t\t\t$( activeElement ).blur();\n\t\t\t\t}\n\t\t\t} catch ( error ) {}\n\t\t}\n\n\t\tthis._hide( this.uiDialog, this.options.hide, function() {\n\t\t\tthat._trigger( \"close\", event );\n\t\t});\n\t},\n\n\tisOpen: function() {\n\t\treturn this._isOpen;\n\t},\n\n\tmoveToTop: function() {\n\t\tthis._moveToTop();\n\t},\n\n\t_moveToTop: function( event, silent ) {\n\t\tvar moved = false,\n\t\t\tzIndices = this.uiDialog.siblings( \".ui-front:visible\" ).map(function() {\n\t\t\t\treturn +$( this ).css( \"z-index\" );\n\t\t\t}).get(),\n\t\t\tzIndexMax = Math.max.apply( null, zIndices );\n\n\t\tif ( zIndexMax >= +this.uiDialog.css( \"z-index\" ) ) {\n\t\t\tthis.uiDialog.css( \"z-index\", zIndexMax + 1 );\n\t\t\tmoved = true;\n\t\t}\n\n\t\tif ( moved && !silent ) {\n\t\t\tthis._trigger( \"focus\", event );\n\t\t}\n\t\treturn moved;\n\t},\n\n\topen: function() {\n\t\tvar that = this;\n\t\tif ( this._isOpen ) {\n\t\t\tif ( this._moveToTop() ) {\n\t\t\t\tthis._focusTabbable();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isOpen = true;\n\t\tthis.opener = $( this.document[ 0 ].activeElement );\n\n\t\tthis._size();\n\t\tthis._position();\n\t\tthis._createOverlay();\n\t\tthis._moveToTop( null, true );\n\n\t\t// Ensure the overlay is moved to the top with the dialog, but only when\n\t\t// opening. The overlay shouldn't move after the dialog is open so that\n\t\t// modeless dialogs opened after the modal dialog stack properly.\n\t\tif ( this.overlay ) {\n\t\t\tthis.overlay.css( \"z-index\", this.uiDialog.css( \"z-index\" ) - 1 );\n\t\t}\n\n\t\tthis._show( this.uiDialog, this.options.show, function() {\n\t\t\tthat._focusTabbable();\n\t\t\tthat._trigger( \"focus\" );\n\t\t});\n\n\t\t// Track the dialog immediately upon openening in case a focus event\n\t\t// somehow occurs outside of the dialog before an element inside the\n\t\t// dialog is focused (#10152)\n\t\tthis._makeFocusTarget();\n\n\t\tthis._trigger( \"open\" );\n\t},\n\n\t_focusTabbable: function() {\n\t\t// Set focus to the first match:\n\t\t// 1. An element that was focused previously\n\t\t// 2. First element inside the dialog matching [autofocus]\n\t\t// 3. Tabbable element inside the content element\n\t\t// 4. Tabbable element inside the buttonpane\n\t\t// 5. The close button\n\t\t// 6. The dialog itself\n\t\tvar hasFocus = this._focusedElement;\n\t\tif ( !hasFocus ) {\n\t\t\thasFocus = this.element.find( \"[autofocus]\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.element.find( \":tabbable\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.uiDialogButtonPane.find( \":tabbable\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.uiDialogTitlebarClose.filter( \":tabbable\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.uiDialog;\n\t\t}\n\t\thasFocus.eq( 0 ).focus();\n\t},\n\n\t_keepFocus: function( event ) {\n\t\tfunction checkFocus() {\n\t\t\tvar activeElement = this.document[0].activeElement,\n\t\t\t\tisActive = this.uiDialog[0] === activeElement ||\n\t\t\t\t\t$.contains( this.uiDialog[0], activeElement );\n\t\t\tif ( !isActive ) {\n\t\t\t\tthis._focusTabbable();\n\t\t\t}\n\t\t}\n\t\tevent.preventDefault();\n\t\tcheckFocus.call( this );\n\t\t// support: IE\n\t\t// IE <= 8 doesn't prevent moving focus even with event.preventDefault()\n\t\t// so we check again later\n\t\tthis._delay( checkFocus );\n\t},\n\n\t_createWrapper: function() {\n\t\tthis.uiDialog = $(\"<div>\")\n\t\t\t.addClass( \"ui-dialog ui-widget ui-widget-content ui-corner-all ui-front \" +\n\t\t\t\tthis.options.dialogClass )\n\t\t\t.hide()\n\t\t\t.attr({\n\t\t\t\t// Setting tabIndex makes the div focusable\n\t\t\t\ttabIndex: -1,\n\t\t\t\trole: \"dialog\"\n\t\t\t})\n\t\t\t.appendTo( this._appendTo() );\n\n\t\tthis._on( this.uiDialog, {\n\t\t\tkeydown: function( event ) {\n\t\t\t\tif ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&\n\t\t\t\t\t\tevent.keyCode === $.ui.keyCode.ESCAPE ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tthis.close( event );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// prevent tabbing out of dialogs\n\t\t\t\tif ( event.keyCode !== $.ui.keyCode.TAB || event.isDefaultPrevented() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar tabbables = this.uiDialog.find( \":tabbable\" ),\n\t\t\t\t\tfirst = tabbables.filter( \":first\" ),\n\t\t\t\t\tlast = tabbables.filter( \":last\" );\n\n\t\t\t\tif ( ( event.target === last[0] || event.target === this.uiDialog[0] ) && !event.shiftKey ) {\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tfirst.focus();\n\t\t\t\t\t});\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t} else if ( ( event.target === first[0] || event.target === this.uiDialog[0] ) && event.shiftKey ) {\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tlast.focus();\n\t\t\t\t\t});\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\t\t\tmousedown: function( event ) {\n\t\t\t\tif ( this._moveToTop( event ) ) {\n\t\t\t\t\tthis._focusTabbable();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// We assume that any existing aria-describedby attribute means\n\t\t// that the dialog content is marked up properly\n\t\t// otherwise we brute force the content as the description\n\t\tif ( !this.element.find( \"[aria-describedby]\" ).length ) {\n\t\t\tthis.uiDialog.attr({\n\t\t\t\t\"aria-describedby\": this.element.uniqueId().attr( \"id\" )\n\t\t\t});\n\t\t}\n\t},\n\n\t_createTitlebar: function() {\n\t\tvar uiDialogTitle;\n\n\t\tthis.uiDialogTitlebar = $( \"<div>\" )\n\t\t\t.addClass( \"ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix\" )\n\t\t\t.prependTo( this.uiDialog );\n\t\tthis._on( this.uiDialogTitlebar, {\n\t\t\tmousedown: function( event ) {\n\t\t\t\t// Don't prevent click on close button (#8838)\n\t\t\t\t// Focusing a dialog that is partially scrolled out of view\n\t\t\t\t// causes the browser to scroll it into view, preventing the click event\n\t\t\t\tif ( !$( event.target ).closest( \".ui-dialog-titlebar-close\" ) ) {\n\t\t\t\t\t// Dialog isn't getting focus when dragging (#8063)\n\t\t\t\t\tthis.uiDialog.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// support: IE\n\t\t// Use type=\"button\" to prevent enter keypresses in textboxes from closing the\n\t\t// dialog in IE (#9312)\n\t\tthis.uiDialogTitlebarClose = $( \"<button type='button'></button>\" )\n\t\t\t.button({\n\t\t\t\tlabel: this.options.closeText,\n\t\t\t\ticons: {\n\t\t\t\t\tprimary: \"ui-icon-closethick\"\n\t\t\t\t},\n\t\t\t\ttext: false\n\t\t\t})\n\t\t\t.addClass( \"ui-dialog-titlebar-close\" )\n\t\t\t.appendTo( this.uiDialogTitlebar );\n\t\tthis._on( this.uiDialogTitlebarClose, {\n\t\t\tclick: function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.close( event );\n\t\t\t}\n\t\t});\n\n\t\tuiDialogTitle = $( \"<span>\" )\n\t\t\t.uniqueId()\n\t\t\t.addClass( \"ui-dialog-title\" )\n\t\t\t.prependTo( this.uiDialogTitlebar );\n\t\tthis._title( uiDialogTitle );\n\n\t\tthis.uiDialog.attr({\n\t\t\t\"aria-labelledby\": uiDialogTitle.attr( \"id\" )\n\t\t});\n\t},\n\n\t_title: function( title ) {\n\t\tif ( !this.options.title ) {\n\t\t\ttitle.html( \"&#160;\" );\n\t\t}\n\t\ttitle.text( this.options.title );\n\t},\n\n\t_createButtonPane: function() {\n\t\tthis.uiDialogButtonPane = $( \"<div>\" )\n\t\t\t.addClass( \"ui-dialog-buttonpane ui-widget-content ui-helper-clearfix\" );\n\n\t\tthis.uiButtonSet = $( \"<div>\" )\n\t\t\t.addClass( \"ui-dialog-buttonset\" )\n\t\t\t.appendTo( this.uiDialogButtonPane );\n\n\t\tthis._createButtons();\n\t},\n\n\t_createButtons: function() {\n\t\tvar that = this,\n\t\t\tbuttons = this.options.buttons;\n\n\t\t// if we already have a button pane, remove it\n\t\tthis.uiDialogButtonPane.remove();\n\t\tthis.uiButtonSet.empty();\n\n\t\tif ( $.isEmptyObject( buttons ) || ($.isArray( buttons ) && !buttons.length) ) {\n\t\t\tthis.uiDialog.removeClass( \"ui-dialog-buttons\" );\n\t\t\treturn;\n\t\t}\n\n\t\t$.each( buttons, function( name, props ) {\n\t\t\tvar click, buttonOptions;\n\t\t\tprops = $.isFunction( props ) ?\n\t\t\t\t{ click: props, text: name } :\n\t\t\t\tprops;\n\t\t\t// Default to a non-submitting button\n\t\t\tprops = $.extend( { type: \"button\" }, props );\n\t\t\t// Change the context for the click callback to be the main element\n\t\t\tclick = props.click;\n\t\t\tprops.click = function() {\n\t\t\t\tclick.apply( that.element[ 0 ], arguments );\n\t\t\t};\n\t\t\tbuttonOptions = {\n\t\t\t\ticons: props.icons,\n\t\t\t\ttext: props.showText\n\t\t\t};\n\t\t\tdelete props.icons;\n\t\t\tdelete props.showText;\n\t\t\t$( \"<button></button>\", props )\n\t\t\t\t.button( buttonOptions )\n\t\t\t\t.appendTo( that.uiButtonSet );\n\t\t});\n\t\tthis.uiDialog.addClass( \"ui-dialog-buttons\" );\n\t\tthis.uiDialogButtonPane.appendTo( this.uiDialog );\n\t},\n\n\t_makeDraggable: function() {\n\t\tvar that = this,\n\t\t\toptions = this.options;\n\n\t\tfunction filteredUi( ui ) {\n\t\t\treturn {\n\t\t\t\tposition: ui.position,\n\t\t\t\toffset: ui.offset\n\t\t\t};\n\t\t}\n\n\t\tthis.uiDialog.draggable({\n\t\t\tcancel: \".ui-dialog-content, .ui-dialog-titlebar-close\",\n\t\t\thandle: \".ui-dialog-titlebar\",\n\t\t\tcontainment: \"document\",\n\t\t\tstart: function( event, ui ) {\n\t\t\t\t$( this ).addClass( \"ui-dialog-dragging\" );\n\t\t\t\tthat._blockFrames();\n\t\t\t\tthat._trigger( \"dragStart\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tdrag: function( event, ui ) {\n\t\t\t\tthat._trigger( \"drag\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tstop: function( event, ui ) {\n\t\t\t\tvar left = ui.offset.left - that.document.scrollLeft(),\n\t\t\t\t\ttop = ui.offset.top - that.document.scrollTop();\n\n\t\t\t\toptions.position = {\n\t\t\t\t\tmy: \"left top\",\n\t\t\t\t\tat: \"left\" + (left >= 0 ? \"+\" : \"\") + left + \" \" +\n\t\t\t\t\t\t\"top\" + (top >= 0 ? \"+\" : \"\") + top,\n\t\t\t\t\tof: that.window\n\t\t\t\t};\n\t\t\t\t$( this ).removeClass( \"ui-dialog-dragging\" );\n\t\t\t\tthat._unblockFrames();\n\t\t\t\tthat._trigger( \"dragStop\", event, filteredUi( ui ) );\n\t\t\t}\n\t\t});\n\t},\n\n\t_makeResizable: function() {\n\t\tvar that = this,\n\t\t\toptions = this.options,\n\t\t\thandles = options.resizable,\n\t\t\t// .ui-resizable has position: relative defined in the stylesheet\n\t\t\t// but dialogs have to use absolute or fixed positioning\n\t\t\tposition = this.uiDialog.css(\"position\"),\n\t\t\tresizeHandles = typeof handles === \"string\" ?\n\t\t\t\thandles\t:\n\t\t\t\t\"n,e,s,w,se,sw,ne,nw\";\n\n\t\tfunction filteredUi( ui ) {\n\t\t\treturn {\n\t\t\t\toriginalPosition: ui.originalPosition,\n\t\t\t\toriginalSize: ui.originalSize,\n\t\t\t\tposition: ui.position,\n\t\t\t\tsize: ui.size\n\t\t\t};\n\t\t}\n\n\t\tthis.uiDialog.resizable({\n\t\t\tcancel: \".ui-dialog-content\",\n\t\t\tcontainment: \"document\",\n\t\t\talsoResize: this.element,\n\t\t\tmaxWidth: options.maxWidth,\n\t\t\tmaxHeight: options.maxHeight,\n\t\t\tminWidth: options.minWidth,\n\t\t\tminHeight: this._minHeight(),\n\t\t\thandles: resizeHandles,\n\t\t\tstart: function( event, ui ) {\n\t\t\t\t$( this ).addClass( \"ui-dialog-resizing\" );\n\t\t\t\tthat._blockFrames();\n\t\t\t\tthat._trigger( \"resizeStart\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tresize: function( event, ui ) {\n\t\t\t\tthat._trigger( \"resize\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tstop: function( event, ui ) {\n\t\t\t\tvar offset = that.uiDialog.offset(),\n\t\t\t\t\tleft = offset.left - that.document.scrollLeft(),\n\t\t\t\t\ttop = offset.top - that.document.scrollTop();\n\n\t\t\t\toptions.height = that.uiDialog.height();\n\t\t\t\toptions.width = that.uiDialog.width();\n\t\t\t\toptions.position = {\n\t\t\t\t\tmy: \"left top\",\n\t\t\t\t\tat: \"left\" + (left >= 0 ? \"+\" : \"\") + left + \" \" +\n\t\t\t\t\t\t\"top\" + (top >= 0 ? \"+\" : \"\") + top,\n\t\t\t\t\tof: that.window\n\t\t\t\t};\n\t\t\t\t$( this ).removeClass( \"ui-dialog-resizing\" );\n\t\t\t\tthat._unblockFrames();\n\t\t\t\tthat._trigger( \"resizeStop\", event, filteredUi( ui ) );\n\t\t\t}\n\t\t})\n\t\t.css( \"position\", position );\n\t},\n\n\t_trackFocus: function() {\n\t\tthis._on( this.widget(), {\n\t\t\tfocusin: function( event ) {\n\t\t\t\tthis._makeFocusTarget();\n\t\t\t\tthis._focusedElement = $( event.target );\n\t\t\t}\n\t\t});\n\t},\n\n\t_makeFocusTarget: function() {\n\t\tthis._untrackInstance();\n\t\tthis._trackingInstances().unshift( this );\n\t},\n\n\t_untrackInstance: function() {\n\t\tvar instances = this._trackingInstances(),\n\t\t\texists = $.inArray( this, instances );\n\t\tif ( exists !== -1 ) {\n\t\t\tinstances.splice( exists, 1 );\n\t\t}\n\t},\n\n\t_trackingInstances: function() {\n\t\tvar instances = this.document.data( \"ui-dialog-instances\" );\n\t\tif ( !instances ) {\n\t\t\tinstances = [];\n\t\t\tthis.document.data( \"ui-dialog-instances\", instances );\n\t\t}\n\t\treturn instances;\n\t},\n\n\t_minHeight: function() {\n\t\tvar options = this.options;\n\n\t\treturn options.height === \"auto\" ?\n\t\t\toptions.minHeight :\n\t\t\tMath.min( options.minHeight, options.height );\n\t},\n\n\t_position: function() {\n\t\t// Need to show the dialog to get the actual offset in the position plugin\n\t\tvar isVisible = this.uiDialog.is( \":visible\" );\n\t\tif ( !isVisible ) {\n\t\t\tthis.uiDialog.show();\n\t\t}\n\t\tthis.uiDialog.position( this.options.position );\n\t\tif ( !isVisible ) {\n\t\t\tthis.uiDialog.hide();\n\t\t}\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar that = this,\n\t\t\tresize = false,\n\t\t\tresizableOptions = {};\n\n\t\t$.each( options, function( key, value ) {\n\t\t\tthat._setOption( key, value );\n\n\t\t\tif ( key in that.sizeRelatedOptions ) {\n\t\t\t\tresize = true;\n\t\t\t}\n\t\t\tif ( key in that.resizableRelatedOptions ) {\n\t\t\t\tresizableOptions[ key ] = value;\n\t\t\t}\n\t\t});\n\n\t\tif ( resize ) {\n\t\t\tthis._size();\n\t\t\tthis._position();\n\t\t}\n\t\tif ( this.uiDialog.is( \":data(ui-resizable)\" ) ) {\n\t\t\tthis.uiDialog.resizable( \"option\", resizableOptions );\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar isDraggable, isResizable,\n\t\t\tuiDialog = this.uiDialog;\n\n\t\tif ( key === \"dialogClass\" ) {\n\t\t\tuiDialog\n\t\t\t\t.removeClass( this.options.dialogClass )\n\t\t\t\t.addClass( value );\n\t\t}\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.uiDialog.appendTo( this._appendTo() );\n\t\t}\n\n\t\tif ( key === \"buttons\" ) {\n\t\t\tthis._createButtons();\n\t\t}\n\n\t\tif ( key === \"closeText\" ) {\n\t\t\tthis.uiDialogTitlebarClose.button({\n\t\t\t\t// Ensure that we always pass a string\n\t\t\t\tlabel: \"\" + value\n\t\t\t});\n\t\t}\n\n\t\tif ( key === \"draggable\" ) {\n\t\t\tisDraggable = uiDialog.is( \":data(ui-draggable)\" );\n\t\t\tif ( isDraggable && !value ) {\n\t\t\t\tuiDialog.draggable( \"destroy\" );\n\t\t\t}\n\n\t\t\tif ( !isDraggable && value ) {\n\t\t\t\tthis._makeDraggable();\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"position\" ) {\n\t\t\tthis._position();\n\t\t}\n\n\t\tif ( key === \"resizable\" ) {\n\t\t\t// currently resizable, becoming non-resizable\n\t\t\tisResizable = uiDialog.is( \":data(ui-resizable)\" );\n\t\t\tif ( isResizable && !value ) {\n\t\t\t\tuiDialog.resizable( \"destroy\" );\n\t\t\t}\n\n\t\t\t// currently resizable, changing handles\n\t\t\tif ( isResizable && typeof value === \"string\" ) {\n\t\t\t\tuiDialog.resizable( \"option\", \"handles\", value );\n\t\t\t}\n\n\t\t\t// currently non-resizable, becoming resizable\n\t\t\tif ( !isResizable && value !== false ) {\n\t\t\t\tthis._makeResizable();\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"title\" ) {\n\t\t\tthis._title( this.uiDialogTitlebar.find( \".ui-dialog-title\" ) );\n\t\t}\n\t},\n\n\t_size: function() {\n\t\t// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content\n\t\t// divs will both have width and height set, so we need to reset them\n\t\tvar nonContentHeight, minContentHeight, maxContentHeight,\n\t\t\toptions = this.options;\n\n\t\t// Reset content sizing\n\t\tthis.element.show().css({\n\t\t\twidth: \"auto\",\n\t\t\tminHeight: 0,\n\t\t\tmaxHeight: \"none\",\n\t\t\theight: 0\n\t\t});\n\n\t\tif ( options.minWidth > options.width ) {\n\t\t\toptions.width = options.minWidth;\n\t\t}\n\n\t\t// reset wrapper sizing\n\t\t// determine the height of all the non-content elements\n\t\tnonContentHeight = this.uiDialog.css({\n\t\t\t\theight: \"auto\",\n\t\t\t\twidth: options.width\n\t\t\t})\n\t\t\t.outerHeight();\n\t\tminContentHeight = Math.max( 0, options.minHeight - nonContentHeight );\n\t\tmaxContentHeight = typeof options.maxHeight === \"number\" ?\n\t\t\tMath.max( 0, options.maxHeight - nonContentHeight ) :\n\t\t\t\"none\";\n\n\t\tif ( options.height === \"auto\" ) {\n\t\t\tthis.element.css({\n\t\t\t\tminHeight: minContentHeight,\n\t\t\t\tmaxHeight: maxContentHeight,\n\t\t\t\theight: \"auto\"\n\t\t\t});\n\t\t} else {\n\t\t\tthis.element.height( Math.max( 0, options.height - nonContentHeight ) );\n\t\t}\n\n\t\tif ( this.uiDialog.is( \":data(ui-resizable)\" ) ) {\n\t\t\tthis.uiDialog.resizable( \"option\", \"minHeight\", this._minHeight() );\n\t\t}\n\t},\n\n\t_blockFrames: function() {\n\t\tthis.iframeBlocks = this.document.find( \"iframe\" ).map(function() {\n\t\t\tvar iframe = $( this );\n\n\t\t\treturn $( \"<div>\" )\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\twidth: iframe.outerWidth(),\n\t\t\t\t\theight: iframe.outerHeight()\n\t\t\t\t})\n\t\t\t\t.appendTo( iframe.parent() )\n\t\t\t\t.offset( iframe.offset() )[0];\n\t\t});\n\t},\n\n\t_unblockFrames: function() {\n\t\tif ( this.iframeBlocks ) {\n\t\t\tthis.iframeBlocks.remove();\n\t\t\tdelete this.iframeBlocks;\n\t\t}\n\t},\n\n\t_allowInteraction: function( event ) {\n\t\tif ( $( event.target ).closest( \".ui-dialog\" ).length ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// TODO: Remove hack when datepicker implements\n\t\t// the .ui-front logic (#8989)\n\t\treturn !!$( event.target ).closest( \".ui-datepicker\" ).length;\n\t},\n\n\t_createOverlay: function() {\n\t\tif ( !this.options.modal ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We use a delay in case the overlay is created from an\n\t\t// event that we're going to be cancelling (#2804)\n\t\tvar isOpening = true;\n\t\tthis._delay(function() {\n\t\t\tisOpening = false;\n\t\t});\n\n\t\tif ( !this.document.data( \"ui-dialog-overlays\" ) ) {\n\n\t\t\t// Prevent use of anchors and inputs\n\t\t\t// Using _on() for an event handler shared across many instances is\n\t\t\t// safe because the dialogs stack and must be closed in reverse order\n\t\t\tthis._on( this.document, {\n\t\t\t\tfocusin: function( event ) {\n\t\t\t\t\tif ( isOpening ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !this._allowInteraction( event ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis._trackingInstances()[ 0 ]._focusTabbable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.overlay = $( \"<div>\" )\n\t\t\t.addClass( \"ui-widget-overlay ui-front\" )\n\t\t\t.appendTo( this._appendTo() );\n\t\tthis._on( this.overlay, {\n\t\t\tmousedown: \"_keepFocus\"\n\t\t});\n\t\tthis.document.data( \"ui-dialog-overlays\",\n\t\t\t(this.document.data( \"ui-dialog-overlays\" ) || 0) + 1 );\n\t},\n\n\t_destroyOverlay: function() {\n\t\tif ( !this.options.modal ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.overlay ) {\n\t\t\tvar overlays = this.document.data( \"ui-dialog-overlays\" ) - 1;\n\n\t\t\tif ( !overlays ) {\n\t\t\t\tthis.document\n\t\t\t\t\t.unbind( \"focusin\" )\n\t\t\t\t\t.removeData( \"ui-dialog-overlays\" );\n\t\t\t} else {\n\t\t\t\tthis.document.data( \"ui-dialog-overlays\", overlays );\n\t\t\t}\n\n\t\t\tthis.overlay.remove();\n\t\t\tthis.overlay = null;\n\t\t}\n\t}\n});\n\n\n/*!\n * jQuery UI Droppable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/droppable/\n */\n\n\n$.widget( \"ui.droppable\", {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"drop\",\n\toptions: {\n\t\taccept: \"*\",\n\t\tactiveClass: false,\n\t\taddClasses: true,\n\t\tgreedy: false,\n\t\thoverClass: false,\n\t\tscope: \"default\",\n\t\ttolerance: \"intersect\",\n\n\t\t// callbacks\n\t\tactivate: null,\n\t\tdeactivate: null,\n\t\tdrop: null,\n\t\tout: null,\n\t\tover: null\n\t},\n\t_create: function() {\n\n\t\tvar proportions,\n\t\t\to = this.options,\n\t\t\taccept = o.accept;\n\n\t\tthis.isover = false;\n\t\tthis.isout = true;\n\n\t\tthis.accept = $.isFunction( accept ) ? accept : function( d ) {\n\t\t\treturn d.is( accept );\n\t\t};\n\n\t\tthis.proportions = function( /* valueToWrite */ ) {\n\t\t\tif ( arguments.length ) {\n\t\t\t\t// Store the droppable's proportions\n\t\t\t\tproportions = arguments[ 0 ];\n\t\t\t} else {\n\t\t\t\t// Retrieve or derive the droppable's proportions\n\t\t\t\treturn proportions ?\n\t\t\t\t\tproportions :\n\t\t\t\t\tproportions = {\n\t\t\t\t\t\twidth: this.element[ 0 ].offsetWidth,\n\t\t\t\t\t\theight: this.element[ 0 ].offsetHeight\n\t\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tthis._addToManager( o.scope );\n\n\t\to.addClasses && this.element.addClass( \"ui-droppable\" );\n\n\t},\n\n\t_addToManager: function( scope ) {\n\t\t// Add the reference and positions to the manager\n\t\t$.ui.ddmanager.droppables[ scope ] = $.ui.ddmanager.droppables[ scope ] || [];\n\t\t$.ui.ddmanager.droppables[ scope ].push( this );\n\t},\n\n\t_splice: function( drop ) {\n\t\tvar i = 0;\n\t\tfor ( ; i < drop.length; i++ ) {\n\t\t\tif ( drop[ i ] === this ) {\n\t\t\t\tdrop.splice( i, 1 );\n\t\t\t}\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tvar drop = $.ui.ddmanager.droppables[ this.options.scope ];\n\n\t\tthis._splice( drop );\n\n\t\tthis.element.removeClass( \"ui-droppable ui-droppable-disabled\" );\n\t},\n\n\t_setOption: function( key, value ) {\n\n\t\tif ( key === \"accept\" ) {\n\t\t\tthis.accept = $.isFunction( value ) ? value : function( d ) {\n\t\t\t\treturn d.is( value );\n\t\t\t};\n\t\t} else if ( key === \"scope\" ) {\n\t\t\tvar drop = $.ui.ddmanager.droppables[ this.options.scope ];\n\n\t\t\tthis._splice( drop );\n\t\t\tthis._addToManager( value );\n\t\t}\n\n\t\tthis._super( key, value );\n\t},\n\n\t_activate: function( event ) {\n\t\tvar draggable = $.ui.ddmanager.current;\n\t\tif ( this.options.activeClass ) {\n\t\t\tthis.element.addClass( this.options.activeClass );\n\t\t}\n\t\tif ( draggable ){\n\t\t\tthis._trigger( \"activate\", event, this.ui( draggable ) );\n\t\t}\n\t},\n\n\t_deactivate: function( event ) {\n\t\tvar draggable = $.ui.ddmanager.current;\n\t\tif ( this.options.activeClass ) {\n\t\t\tthis.element.removeClass( this.options.activeClass );\n\t\t}\n\t\tif ( draggable ){\n\t\t\tthis._trigger( \"deactivate\", event, this.ui( draggable ) );\n\t\t}\n\t},\n\n\t_over: function( event ) {\n\n\t\tvar draggable = $.ui.ddmanager.current;\n\n\t\t// Bail if draggable and droppable are same element\n\t\tif ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {\n\t\t\tif ( this.options.hoverClass ) {\n\t\t\t\tthis.element.addClass( this.options.hoverClass );\n\t\t\t}\n\t\t\tthis._trigger( \"over\", event, this.ui( draggable ) );\n\t\t}\n\n\t},\n\n\t_out: function( event ) {\n\n\t\tvar draggable = $.ui.ddmanager.current;\n\n\t\t// Bail if draggable and droppable are same element\n\t\tif ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {\n\t\t\tif ( this.options.hoverClass ) {\n\t\t\t\tthis.element.removeClass( this.options.hoverClass );\n\t\t\t}\n\t\t\tthis._trigger( \"out\", event, this.ui( draggable ) );\n\t\t}\n\n\t},\n\n\t_drop: function( event, custom ) {\n\n\t\tvar draggable = custom || $.ui.ddmanager.current,\n\t\t\tchildrenIntersection = false;\n\n\t\t// Bail if draggable and droppable are same element\n\t\tif ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.element.find( \":data(ui-droppable)\" ).not( \".ui-draggable-dragging\" ).each(function() {\n\t\t\tvar inst = $( this ).droppable( \"instance\" );\n\t\t\tif (\n\t\t\t\tinst.options.greedy &&\n\t\t\t\t!inst.options.disabled &&\n\t\t\t\tinst.options.scope === draggable.options.scope &&\n\t\t\t\tinst.accept.call( inst.element[ 0 ], ( draggable.currentItem || draggable.element ) ) &&\n\t\t\t\t$.ui.intersect( draggable, $.extend( inst, { offset: inst.element.offset() } ), inst.options.tolerance, event )\n\t\t\t) { childrenIntersection = true; return false; }\n\t\t});\n\t\tif ( childrenIntersection ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {\n\t\t\tif ( this.options.activeClass ) {\n\t\t\t\tthis.element.removeClass( this.options.activeClass );\n\t\t\t}\n\t\t\tif ( this.options.hoverClass ) {\n\t\t\t\tthis.element.removeClass( this.options.hoverClass );\n\t\t\t}\n\t\t\tthis._trigger( \"drop\", event, this.ui( draggable ) );\n\t\t\treturn this.element;\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tui: function( c ) {\n\t\treturn {\n\t\t\tdraggable: ( c.currentItem || c.element ),\n\t\t\thelper: c.helper,\n\t\t\tposition: c.position,\n\t\t\toffset: c.positionAbs\n\t\t};\n\t}\n\n});\n\n$.ui.intersect = (function() {\n\tfunction isOverAxis( x, reference, size ) {\n\t\treturn ( x >= reference ) && ( x < ( reference + size ) );\n\t}\n\n\treturn function( draggable, droppable, toleranceMode, event ) {\n\n\t\tif ( !droppable.offset ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar x1 = ( draggable.positionAbs || draggable.position.absolute ).left + draggable.margins.left,\n\t\t\ty1 = ( draggable.positionAbs || draggable.position.absolute ).top + draggable.margins.top,\n\t\t\tx2 = x1 + draggable.helperProportions.width,\n\t\t\ty2 = y1 + draggable.helperProportions.height,\n\t\t\tl = droppable.offset.left,\n\t\t\tt = droppable.offset.top,\n\t\t\tr = l + droppable.proportions().width,\n\t\t\tb = t + droppable.proportions().height;\n\n\t\tswitch ( toleranceMode ) {\n\t\tcase \"fit\":\n\t\t\treturn ( l <= x1 && x2 <= r && t <= y1 && y2 <= b );\n\t\tcase \"intersect\":\n\t\t\treturn ( l < x1 + ( draggable.helperProportions.width / 2 ) && // Right Half\n\t\t\t\tx2 - ( draggable.helperProportions.width / 2 ) < r && // Left Half\n\t\t\t\tt < y1 + ( draggable.helperProportions.height / 2 ) && // Bottom Half\n\t\t\t\ty2 - ( draggable.helperProportions.height / 2 ) < b ); // Top Half\n\t\tcase \"pointer\":\n\t\t\treturn isOverAxis( event.pageY, t, droppable.proportions().height ) && isOverAxis( event.pageX, l, droppable.proportions().width );\n\t\tcase \"touch\":\n\t\t\treturn (\n\t\t\t\t( y1 >= t && y1 <= b ) || // Top edge touching\n\t\t\t\t( y2 >= t && y2 <= b ) || // Bottom edge touching\n\t\t\t\t( y1 < t && y2 > b ) // Surrounded vertically\n\t\t\t) && (\n\t\t\t\t( x1 >= l && x1 <= r ) || // Left edge touching\n\t\t\t\t( x2 >= l && x2 <= r ) || // Right edge touching\n\t\t\t\t( x1 < l && x2 > r ) // Surrounded horizontally\n\t\t\t);\n\t\tdefault:\n\t\t\treturn false;\n\t\t}\n\t};\n})();\n\n/*\n\tThis manager tracks offsets of draggables and droppables\n*/\n$.ui.ddmanager = {\n\tcurrent: null,\n\tdroppables: { \"default\": [] },\n\tprepareOffsets: function( t, event ) {\n\n\t\tvar i, j,\n\t\t\tm = $.ui.ddmanager.droppables[ t.options.scope ] || [],\n\t\t\ttype = event ? event.type : null, // workaround for #2317\n\t\t\tlist = ( t.currentItem || t.element ).find( \":data(ui-droppable)\" ).addBack();\n\n\t\tdroppablesLoop: for ( i = 0; i < m.length; i++ ) {\n\n\t\t\t// No disabled and non-accepted\n\t\t\tif ( m[ i ].options.disabled || ( t && !m[ i ].accept.call( m[ i ].element[ 0 ], ( t.currentItem || t.element ) ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Filter out elements in the current dragged item\n\t\t\tfor ( j = 0; j < list.length; j++ ) {\n\t\t\t\tif ( list[ j ] === m[ i ].element[ 0 ] ) {\n\t\t\t\t\tm[ i ].proportions().height = 0;\n\t\t\t\t\tcontinue droppablesLoop;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tm[ i ].visible = m[ i ].element.css( \"display\" ) !== \"none\";\n\t\t\tif ( !m[ i ].visible ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Activate the droppable if used directly from draggables\n\t\t\tif ( type === \"mousedown\" ) {\n\t\t\t\tm[ i ]._activate.call( m[ i ], event );\n\t\t\t}\n\n\t\t\tm[ i ].offset = m[ i ].element.offset();\n\t\t\tm[ i ].proportions({ width: m[ i ].element[ 0 ].offsetWidth, height: m[ i ].element[ 0 ].offsetHeight });\n\n\t\t}\n\n\t},\n\tdrop: function( draggable, event ) {\n\n\t\tvar dropped = false;\n\t\t// Create a copy of the droppables in case the list changes during the drop (#9116)\n\t\t$.each( ( $.ui.ddmanager.droppables[ draggable.options.scope ] || [] ).slice(), function() {\n\n\t\t\tif ( !this.options ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !this.options.disabled && this.visible && $.ui.intersect( draggable, this, this.options.tolerance, event ) ) {\n\t\t\t\tdropped = this._drop.call( this, event ) || dropped;\n\t\t\t}\n\n\t\t\tif ( !this.options.disabled && this.visible && this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {\n\t\t\t\tthis.isout = true;\n\t\t\t\tthis.isover = false;\n\t\t\t\tthis._deactivate.call( this, event );\n\t\t\t}\n\n\t\t});\n\t\treturn dropped;\n\n\t},\n\tdragStart: function( draggable, event ) {\n\t\t// Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)\n\t\tdraggable.element.parentsUntil( \"body\" ).bind( \"scroll.droppable\", function() {\n\t\t\tif ( !draggable.options.refreshPositions ) {\n\t\t\t\t$.ui.ddmanager.prepareOffsets( draggable, event );\n\t\t\t}\n\t\t});\n\t},\n\tdrag: function( draggable, event ) {\n\n\t\t// If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.\n\t\tif ( draggable.options.refreshPositions ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( draggable, event );\n\t\t}\n\n\t\t// Run through all droppables and check their positions based on specific tolerance options\n\t\t$.each( $.ui.ddmanager.droppables[ draggable.options.scope ] || [], function() {\n\n\t\t\tif ( this.options.disabled || this.greedyChild || !this.visible ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar parentInstance, scope, parent,\n\t\t\t\tintersects = $.ui.intersect( draggable, this, this.options.tolerance, event ),\n\t\t\t\tc = !intersects && this.isover ? \"isout\" : ( intersects && !this.isover ? \"isover\" : null );\n\t\t\tif ( !c ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.options.greedy ) {\n\t\t\t\t// find droppable parents with same scope\n\t\t\t\tscope = this.options.scope;\n\t\t\t\tparent = this.element.parents( \":data(ui-droppable)\" ).filter(function() {\n\t\t\t\t\treturn $( this ).droppable( \"instance\" ).options.scope === scope;\n\t\t\t\t});\n\n\t\t\t\tif ( parent.length ) {\n\t\t\t\t\tparentInstance = $( parent[ 0 ] ).droppable( \"instance\" );\n\t\t\t\t\tparentInstance.greedyChild = ( c === \"isover\" );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// we just moved into a greedy child\n\t\t\tif ( parentInstance && c === \"isover\" ) {\n\t\t\t\tparentInstance.isover = false;\n\t\t\t\tparentInstance.isout = true;\n\t\t\t\tparentInstance._out.call( parentInstance, event );\n\t\t\t}\n\n\t\t\tthis[ c ] = true;\n\t\t\tthis[c === \"isout\" ? \"isover\" : \"isout\"] = false;\n\t\t\tthis[c === \"isover\" ? \"_over\" : \"_out\"].call( this, event );\n\n\t\t\t// we just moved out of a greedy child\n\t\t\tif ( parentInstance && c === \"isout\" ) {\n\t\t\t\tparentInstance.isout = false;\n\t\t\t\tparentInstance.isover = true;\n\t\t\t\tparentInstance._over.call( parentInstance, event );\n\t\t\t}\n\t\t});\n\n\t},\n\tdragStop: function( draggable, event ) {\n\t\tdraggable.element.parentsUntil( \"body\" ).unbind( \"scroll.droppable\" );\n\t\t// Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)\n\t\tif ( !draggable.options.refreshPositions ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( draggable, event );\n\t\t}\n\t}\n};\n\nvar droppable = $.ui.droppable;\n\n\n/*!\n * jQuery UI Effects 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/effects-core/\n */\n\n\nvar dataSpace = \"ui-effects-\",\n\n\t// Create a local jQuery because jQuery Color relies on it and the\n\t// global may not exist with AMD and a custom build (#10199)\n\tjQuery = $;\n\n$.effects = {\n\teffect: {}\n};\n\n/*!\n * jQuery Color Animations v2.1.2\n * https://github.com/jquery/jquery-color\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * Date: Wed Jan 16 08:47:09 2013 -0600\n */\n(function( jQuery, undefined ) {\n\n\tvar stepHooks = \"backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor\",\n\n\t// plusequals test for += 100 -= 100\n\trplusequals = /^([\\-+])=\\s*(\\d+\\.?\\d*)/,\n\t// a set of RE's that can match strings and generate color tuples.\n\tstringParsers = [ {\n\t\t\tre: /rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\texecResult[ 1 ],\n\t\t\t\t\texecResult[ 2 ],\n\t\t\t\t\texecResult[ 3 ],\n\t\t\t\t\texecResult[ 4 ]\n\t\t\t\t];\n\t\t\t}\n\t\t}, {\n\t\t\tre: /rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\texecResult[ 1 ] * 2.55,\n\t\t\t\t\texecResult[ 2 ] * 2.55,\n\t\t\t\t\texecResult[ 3 ] * 2.55,\n\t\t\t\t\texecResult[ 4 ]\n\t\t\t\t];\n\t\t\t}\n\t\t}, {\n\t\t\t// this regex ignores A-F because it's compared against an already lowercased string\n\t\t\tre: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\tparseInt( execResult[ 1 ], 16 ),\n\t\t\t\t\tparseInt( execResult[ 2 ], 16 ),\n\t\t\t\t\tparseInt( execResult[ 3 ], 16 )\n\t\t\t\t];\n\t\t\t}\n\t\t}, {\n\t\t\t// this regex ignores A-F because it's compared against an already lowercased string\n\t\t\tre: /#([a-f0-9])([a-f0-9])([a-f0-9])/,\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\tparseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),\n\t\t\t\t\tparseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),\n\t\t\t\t\tparseInt( execResult[ 3 ] + execResult[ 3 ], 16 )\n\t\t\t\t];\n\t\t\t}\n\t\t}, {\n\t\t\tre: /hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\n\t\t\tspace: \"hsla\",\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\texecResult[ 1 ],\n\t\t\t\t\texecResult[ 2 ] / 100,\n\t\t\t\t\texecResult[ 3 ] / 100,\n\t\t\t\t\texecResult[ 4 ]\n\t\t\t\t];\n\t\t\t}\n\t\t} ],\n\n\t// jQuery.Color( )\n\tcolor = jQuery.Color = function( color, green, blue, alpha ) {\n\t\treturn new jQuery.Color.fn.parse( color, green, blue, alpha );\n\t},\n\tspaces = {\n\t\trgba: {\n\t\t\tprops: {\n\t\t\t\tred: {\n\t\t\t\t\tidx: 0,\n\t\t\t\t\ttype: \"byte\"\n\t\t\t\t},\n\t\t\t\tgreen: {\n\t\t\t\t\tidx: 1,\n\t\t\t\t\ttype: \"byte\"\n\t\t\t\t},\n\t\t\t\tblue: {\n\t\t\t\t\tidx: 2,\n\t\t\t\t\ttype: \"byte\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\thsla: {\n\t\t\tprops: {\n\t\t\t\thue: {\n\t\t\t\t\tidx: 0,\n\t\t\t\t\ttype: \"degrees\"\n\t\t\t\t},\n\t\t\t\tsaturation: {\n\t\t\t\t\tidx: 1,\n\t\t\t\t\ttype: \"percent\"\n\t\t\t\t},\n\t\t\t\tlightness: {\n\t\t\t\t\tidx: 2,\n\t\t\t\t\ttype: \"percent\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tpropTypes = {\n\t\t\"byte\": {\n\t\t\tfloor: true,\n\t\t\tmax: 255\n\t\t},\n\t\t\"percent\": {\n\t\t\tmax: 1\n\t\t},\n\t\t\"degrees\": {\n\t\t\tmod: 360,\n\t\t\tfloor: true\n\t\t}\n\t},\n\tsupport = color.support = {},\n\n\t// element for support tests\n\tsupportElem = jQuery( \"<p>\" )[ 0 ],\n\n\t// colors = jQuery.Color.names\n\tcolors,\n\n\t// local aliases of functions called often\n\teach = jQuery.each;\n\n// determine rgba support immediately\nsupportElem.style.cssText = \"background-color:rgba(1,1,1,.5)\";\nsupport.rgba = supportElem.style.backgroundColor.indexOf( \"rgba\" ) > -1;\n\n// define cache name and alpha properties\n// for rgba and hsla spaces\neach( spaces, function( spaceName, space ) {\n\tspace.cache = \"_\" + spaceName;\n\tspace.props.alpha = {\n\t\tidx: 3,\n\t\ttype: \"percent\",\n\t\tdef: 1\n\t};\n});\n\nfunction clamp( value, prop, allowEmpty ) {\n\tvar type = propTypes[ prop.type ] || {};\n\n\tif ( value == null ) {\n\t\treturn (allowEmpty || !prop.def) ? null : prop.def;\n\t}\n\n\t// ~~ is an short way of doing floor for positive numbers\n\tvalue = type.floor ? ~~value : parseFloat( value );\n\n\t// IE will pass in empty strings as value for alpha,\n\t// which will hit this case\n\tif ( isNaN( value ) ) {\n\t\treturn prop.def;\n\t}\n\n\tif ( type.mod ) {\n\t\t// we add mod before modding to make sure that negatives values\n\t\t// get converted properly: -10 -> 350\n\t\treturn (value + type.mod) % type.mod;\n\t}\n\n\t// for now all property types without mod have min and max\n\treturn 0 > value ? 0 : type.max < value ? type.max : value;\n}\n\nfunction stringParse( string ) {\n\tvar inst = color(),\n\t\trgba = inst._rgba = [];\n\n\tstring = string.toLowerCase();\n\n\teach( stringParsers, function( i, parser ) {\n\t\tvar parsed,\n\t\t\tmatch = parser.re.exec( string ),\n\t\t\tvalues = match && parser.parse( match ),\n\t\t\tspaceName = parser.space || \"rgba\";\n\n\t\tif ( values ) {\n\t\t\tparsed = inst[ spaceName ]( values );\n\n\t\t\t// if this was an rgba parse the assignment might happen twice\n\t\t\t// oh well....\n\t\t\tinst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];\n\t\t\trgba = inst._rgba = parsed._rgba;\n\n\t\t\t// exit each( stringParsers ) here because we matched\n\t\t\treturn false;\n\t\t}\n\t});\n\n\t// Found a stringParser that handled it\n\tif ( rgba.length ) {\n\n\t\t// if this came from a parsed string, force \"transparent\" when alpha is 0\n\t\t// chrome, (and maybe others) return \"transparent\" as rgba(0,0,0,0)\n\t\tif ( rgba.join() === \"0,0,0,0\" ) {\n\t\t\tjQuery.extend( rgba, colors.transparent );\n\t\t}\n\t\treturn inst;\n\t}\n\n\t// named colors\n\treturn colors[ string ];\n}\n\ncolor.fn = jQuery.extend( color.prototype, {\n\tparse: function( red, green, blue, alpha ) {\n\t\tif ( red === undefined ) {\n\t\t\tthis._rgba = [ null, null, null, null ];\n\t\t\treturn this;\n\t\t}\n\t\tif ( red.jquery || red.nodeType ) {\n\t\t\tred = jQuery( red ).css( green );\n\t\t\tgreen = undefined;\n\t\t}\n\n\t\tvar inst = this,\n\t\t\ttype = jQuery.type( red ),\n\t\t\trgba = this._rgba = [];\n\n\t\t// more than 1 argument specified - assume ( red, green, blue, alpha )\n\t\tif ( green !== undefined ) {\n\t\t\tred = [ red, green, blue, alpha ];\n\t\t\ttype = \"array\";\n\t\t}\n\n\t\tif ( type === \"string\" ) {\n\t\t\treturn this.parse( stringParse( red ) || colors._default );\n\t\t}\n\n\t\tif ( type === \"array\" ) {\n\t\t\teach( spaces.rgba.props, function( key, prop ) {\n\t\t\t\trgba[ prop.idx ] = clamp( red[ prop.idx ], prop );\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( type === \"object\" ) {\n\t\t\tif ( red instanceof color ) {\n\t\t\t\teach( spaces, function( spaceName, space ) {\n\t\t\t\t\tif ( red[ space.cache ] ) {\n\t\t\t\t\t\tinst[ space.cache ] = red[ space.cache ].slice();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\teach( spaces, function( spaceName, space ) {\n\t\t\t\t\tvar cache = space.cache;\n\t\t\t\t\teach( space.props, function( key, prop ) {\n\n\t\t\t\t\t\t// if the cache doesn't exist, and we know how to convert\n\t\t\t\t\t\tif ( !inst[ cache ] && space.to ) {\n\n\t\t\t\t\t\t\t// if the value was null, we don't need to copy it\n\t\t\t\t\t\t\t// if the key was alpha, we don't need to copy it either\n\t\t\t\t\t\t\tif ( key === \"alpha\" || red[ key ] == null ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tinst[ cache ] = space.to( inst._rgba );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// this is the only case where we allow nulls for ALL properties.\n\t\t\t\t\t\t// call clamp with alwaysAllowEmpty\n\t\t\t\t\t\tinst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );\n\t\t\t\t\t});\n\n\t\t\t\t\t// everything defined but alpha?\n\t\t\t\t\tif ( inst[ cache ] && jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {\n\t\t\t\t\t\t// use the default of 1\n\t\t\t\t\t\tinst[ cache ][ 3 ] = 1;\n\t\t\t\t\t\tif ( space.from ) {\n\t\t\t\t\t\t\tinst._rgba = space.from( inst[ cache ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t},\n\tis: function( compare ) {\n\t\tvar is = color( compare ),\n\t\t\tsame = true,\n\t\t\tinst = this;\n\n\t\teach( spaces, function( _, space ) {\n\t\t\tvar localCache,\n\t\t\t\tisCache = is[ space.cache ];\n\t\t\tif (isCache) {\n\t\t\t\tlocalCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];\n\t\t\t\teach( space.props, function( _, prop ) {\n\t\t\t\t\tif ( isCache[ prop.idx ] != null ) {\n\t\t\t\t\t\tsame = ( isCache[ prop.idx ] === localCache[ prop.idx ] );\n\t\t\t\t\t\treturn same;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn same;\n\t\t});\n\t\treturn same;\n\t},\n\t_space: function() {\n\t\tvar used = [],\n\t\t\tinst = this;\n\t\teach( spaces, function( spaceName, space ) {\n\t\t\tif ( inst[ space.cache ] ) {\n\t\t\t\tused.push( spaceName );\n\t\t\t}\n\t\t});\n\t\treturn used.pop();\n\t},\n\ttransition: function( other, distance ) {\n\t\tvar end = color( other ),\n\t\t\tspaceName = end._space(),\n\t\t\tspace = spaces[ spaceName ],\n\t\t\tstartColor = this.alpha() === 0 ? color( \"transparent\" ) : this,\n\t\t\tstart = startColor[ space.cache ] || space.to( startColor._rgba ),\n\t\t\tresult = start.slice();\n\n\t\tend = end[ space.cache ];\n\t\teach( space.props, function( key, prop ) {\n\t\t\tvar index = prop.idx,\n\t\t\t\tstartValue = start[ index ],\n\t\t\t\tendValue = end[ index ],\n\t\t\t\ttype = propTypes[ prop.type ] || {};\n\n\t\t\t// if null, don't override start value\n\t\t\tif ( endValue === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// if null - use end\n\t\t\tif ( startValue === null ) {\n\t\t\t\tresult[ index ] = endValue;\n\t\t\t} else {\n\t\t\t\tif ( type.mod ) {\n\t\t\t\t\tif ( endValue - startValue > type.mod / 2 ) {\n\t\t\t\t\t\tstartValue += type.mod;\n\t\t\t\t\t} else if ( startValue - endValue > type.mod / 2 ) {\n\t\t\t\t\t\tstartValue -= type.mod;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresult[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );\n\t\t\t}\n\t\t});\n\t\treturn this[ spaceName ]( result );\n\t},\n\tblend: function( opaque ) {\n\t\t// if we are already opaque - return ourself\n\t\tif ( this._rgba[ 3 ] === 1 ) {\n\t\t\treturn this;\n\t\t}\n\n\t\tvar rgb = this._rgba.slice(),\n\t\t\ta = rgb.pop(),\n\t\t\tblend = color( opaque )._rgba;\n\n\t\treturn color( jQuery.map( rgb, function( v, i ) {\n\t\t\treturn ( 1 - a ) * blend[ i ] + a * v;\n\t\t}));\n\t},\n\ttoRgbaString: function() {\n\t\tvar prefix = \"rgba(\",\n\t\t\trgba = jQuery.map( this._rgba, function( v, i ) {\n\t\t\t\treturn v == null ? ( i > 2 ? 1 : 0 ) : v;\n\t\t\t});\n\n\t\tif ( rgba[ 3 ] === 1 ) {\n\t\t\trgba.pop();\n\t\t\tprefix = \"rgb(\";\n\t\t}\n\n\t\treturn prefix + rgba.join() + \")\";\n\t},\n\ttoHslaString: function() {\n\t\tvar prefix = \"hsla(\",\n\t\t\thsla = jQuery.map( this.hsla(), function( v, i ) {\n\t\t\t\tif ( v == null ) {\n\t\t\t\t\tv = i > 2 ? 1 : 0;\n\t\t\t\t}\n\n\t\t\t\t// catch 1 and 2\n\t\t\t\tif ( i && i < 3 ) {\n\t\t\t\t\tv = Math.round( v * 100 ) + \"%\";\n\t\t\t\t}\n\t\t\t\treturn v;\n\t\t\t});\n\n\t\tif ( hsla[ 3 ] === 1 ) {\n\t\t\thsla.pop();\n\t\t\tprefix = \"hsl(\";\n\t\t}\n\t\treturn prefix + hsla.join() + \")\";\n\t},\n\ttoHexString: function( includeAlpha ) {\n\t\tvar rgba = this._rgba.slice(),\n\t\t\talpha = rgba.pop();\n\n\t\tif ( includeAlpha ) {\n\t\t\trgba.push( ~~( alpha * 255 ) );\n\t\t}\n\n\t\treturn \"#\" + jQuery.map( rgba, function( v ) {\n\n\t\t\t// default to 0 when nulls exist\n\t\t\tv = ( v || 0 ).toString( 16 );\n\t\t\treturn v.length === 1 ? \"0\" + v : v;\n\t\t}).join(\"\");\n\t},\n\ttoString: function() {\n\t\treturn this._rgba[ 3 ] === 0 ? \"transparent\" : this.toRgbaString();\n\t}\n});\ncolor.fn.parse.prototype = color.fn;\n\n// hsla conversions adapted from:\n// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021\n\nfunction hue2rgb( p, q, h ) {\n\th = ( h + 1 ) % 1;\n\tif ( h * 6 < 1 ) {\n\t\treturn p + ( q - p ) * h * 6;\n\t}\n\tif ( h * 2 < 1) {\n\t\treturn q;\n\t}\n\tif ( h * 3 < 2 ) {\n\t\treturn p + ( q - p ) * ( ( 2 / 3 ) - h ) * 6;\n\t}\n\treturn p;\n}\n\nspaces.hsla.to = function( rgba ) {\n\tif ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {\n\t\treturn [ null, null, null, rgba[ 3 ] ];\n\t}\n\tvar r = rgba[ 0 ] / 255,\n\t\tg = rgba[ 1 ] / 255,\n\t\tb = rgba[ 2 ] / 255,\n\t\ta = rgba[ 3 ],\n\t\tmax = Math.max( r, g, b ),\n\t\tmin = Math.min( r, g, b ),\n\t\tdiff = max - min,\n\t\tadd = max + min,\n\t\tl = add * 0.5,\n\t\th, s;\n\n\tif ( min === max ) {\n\t\th = 0;\n\t} else if ( r === max ) {\n\t\th = ( 60 * ( g - b ) / diff ) + 360;\n\t} else if ( g === max ) {\n\t\th = ( 60 * ( b - r ) / diff ) + 120;\n\t} else {\n\t\th = ( 60 * ( r - g ) / diff ) + 240;\n\t}\n\n\t// chroma (diff) == 0 means greyscale which, by definition, saturation = 0%\n\t// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)\n\tif ( diff === 0 ) {\n\t\ts = 0;\n\t} else if ( l <= 0.5 ) {\n\t\ts = diff / add;\n\t} else {\n\t\ts = diff / ( 2 - add );\n\t}\n\treturn [ Math.round(h) % 360, s, l, a == null ? 1 : a ];\n};\n\nspaces.hsla.from = function( hsla ) {\n\tif ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {\n\t\treturn [ null, null, null, hsla[ 3 ] ];\n\t}\n\tvar h = hsla[ 0 ] / 360,\n\t\ts = hsla[ 1 ],\n\t\tl = hsla[ 2 ],\n\t\ta = hsla[ 3 ],\n\t\tq = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,\n\t\tp = 2 * l - q;\n\n\treturn [\n\t\tMath.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),\n\t\tMath.round( hue2rgb( p, q, h ) * 255 ),\n\t\tMath.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),\n\t\ta\n\t];\n};\n\neach( spaces, function( spaceName, space ) {\n\tvar props = space.props,\n\t\tcache = space.cache,\n\t\tto = space.to,\n\t\tfrom = space.from;\n\n\t// makes rgba() and hsla()\n\tcolor.fn[ spaceName ] = function( value ) {\n\n\t\t// generate a cache for this space if it doesn't exist\n\t\tif ( to && !this[ cache ] ) {\n\t\t\tthis[ cache ] = to( this._rgba );\n\t\t}\n\t\tif ( value === undefined ) {\n\t\t\treturn this[ cache ].slice();\n\t\t}\n\n\t\tvar ret,\n\t\t\ttype = jQuery.type( value ),\n\t\t\tarr = ( type === \"array\" || type === \"object\" ) ? value : arguments,\n\t\t\tlocal = this[ cache ].slice();\n\n\t\teach( props, function( key, prop ) {\n\t\t\tvar val = arr[ type === \"object\" ? key : prop.idx ];\n\t\t\tif ( val == null ) {\n\t\t\t\tval = local[ prop.idx ];\n\t\t\t}\n\t\t\tlocal[ prop.idx ] = clamp( val, prop );\n\t\t});\n\n\t\tif ( from ) {\n\t\t\tret = color( from( local ) );\n\t\t\tret[ cache ] = local;\n\t\t\treturn ret;\n\t\t} else {\n\t\t\treturn color( local );\n\t\t}\n\t};\n\n\t// makes red() green() blue() alpha() hue() saturation() lightness()\n\teach( props, function( key, prop ) {\n\t\t// alpha is included in more than one space\n\t\tif ( color.fn[ key ] ) {\n\t\t\treturn;\n\t\t}\n\t\tcolor.fn[ key ] = function( value ) {\n\t\t\tvar vtype = jQuery.type( value ),\n\t\t\t\tfn = ( key === \"alpha\" ? ( this._hsla ? \"hsla\" : \"rgba\" ) : spaceName ),\n\t\t\t\tlocal = this[ fn ](),\n\t\t\t\tcur = local[ prop.idx ],\n\t\t\t\tmatch;\n\n\t\t\tif ( vtype === \"undefined\" ) {\n\t\t\t\treturn cur;\n\t\t\t}\n\n\t\t\tif ( vtype === \"function\" ) {\n\t\t\t\tvalue = value.call( this, cur );\n\t\t\t\tvtype = jQuery.type( value );\n\t\t\t}\n\t\t\tif ( value == null && prop.empty ) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tif ( vtype === \"string\" ) {\n\t\t\t\tmatch = rplusequals.exec( value );\n\t\t\t\tif ( match ) {\n\t\t\t\t\tvalue = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === \"+\" ? 1 : -1 );\n\t\t\t\t}\n\t\t\t}\n\t\t\tlocal[ prop.idx ] = value;\n\t\t\treturn this[ fn ]( local );\n\t\t};\n\t});\n});\n\n// add cssHook and .fx.step function for each named hook.\n// accept a space separated string of properties\ncolor.hook = function( hook ) {\n\tvar hooks = hook.split( \" \" );\n\teach( hooks, function( i, hook ) {\n\t\tjQuery.cssHooks[ hook ] = {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar parsed, curElem,\n\t\t\t\t\tbackgroundColor = \"\";\n\n\t\t\t\tif ( value !== \"transparent\" && ( jQuery.type( value ) !== \"string\" || ( parsed = stringParse( value ) ) ) ) {\n\t\t\t\t\tvalue = color( parsed || value );\n\t\t\t\t\tif ( !support.rgba && value._rgba[ 3 ] !== 1 ) {\n\t\t\t\t\t\tcurElem = hook === \"backgroundColor\" ? elem.parentNode : elem;\n\t\t\t\t\t\twhile (\n\t\t\t\t\t\t\t(backgroundColor === \"\" || backgroundColor === \"transparent\") &&\n\t\t\t\t\t\t\tcurElem && curElem.style\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tbackgroundColor = jQuery.css( curElem, \"backgroundColor\" );\n\t\t\t\t\t\t\t\tcurElem = curElem.parentNode;\n\t\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvalue = value.blend( backgroundColor && backgroundColor !== \"transparent\" ?\n\t\t\t\t\t\t\tbackgroundColor :\n\t\t\t\t\t\t\t\"_default\" );\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = value.toRgbaString();\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\telem.style[ hook ] = value;\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// wrapped to prevent IE from throwing errors on \"invalid\" values like 'auto' or 'inherit'\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tjQuery.fx.step[ hook ] = function( fx ) {\n\t\t\tif ( !fx.colorInit ) {\n\t\t\t\tfx.start = color( fx.elem, hook );\n\t\t\t\tfx.end = color( fx.end );\n\t\t\t\tfx.colorInit = true;\n\t\t\t}\n\t\t\tjQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );\n\t\t};\n\t});\n\n};\n\ncolor.hook( stepHooks );\n\njQuery.cssHooks.borderColor = {\n\texpand: function( value ) {\n\t\tvar expanded = {};\n\n\t\teach( [ \"Top\", \"Right\", \"Bottom\", \"Left\" ], function( i, part ) {\n\t\t\texpanded[ \"border\" + part + \"Color\" ] = value;\n\t\t});\n\t\treturn expanded;\n\t}\n};\n\n// Basic color names only.\n// Usage of any of the other color names requires adding yourself or including\n// jquery.color.svg-names.js.\ncolors = jQuery.Color.names = {\n\t// 4.1. Basic color keywords\n\taqua: \"#00ffff\",\n\tblack: \"#000000\",\n\tblue: \"#0000ff\",\n\tfuchsia: \"#ff00ff\",\n\tgray: \"#808080\",\n\tgreen: \"#008000\",\n\tlime: \"#00ff00\",\n\tmaroon: \"#800000\",\n\tnavy: \"#000080\",\n\tolive: \"#808000\",\n\tpurple: \"#800080\",\n\tred: \"#ff0000\",\n\tsilver: \"#c0c0c0\",\n\tteal: \"#008080\",\n\twhite: \"#ffffff\",\n\tyellow: \"#ffff00\",\n\n\t// 4.2.3. \"transparent\" color keyword\n\ttransparent: [ null, null, null, 0 ],\n\n\t_default: \"#ffffff\"\n};\n\n})( jQuery );\n\n/******************************************************************************/\n/****************************** CLASS ANIMATIONS ******************************/\n/******************************************************************************/\n(function() {\n\nvar classAnimationActions = [ \"add\", \"remove\", \"toggle\" ],\n\tshorthandStyles = {\n\t\tborder: 1,\n\t\tborderBottom: 1,\n\t\tborderColor: 1,\n\t\tborderLeft: 1,\n\t\tborderRight: 1,\n\t\tborderTop: 1,\n\t\tborderWidth: 1,\n\t\tmargin: 1,\n\t\tpadding: 1\n\t};\n\n$.each([ \"borderLeftStyle\", \"borderRightStyle\", \"borderBottomStyle\", \"borderTopStyle\" ], function( _, prop ) {\n\t$.fx.step[ prop ] = function( fx ) {\n\t\tif ( fx.end !== \"none\" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {\n\t\t\tjQuery.style( fx.elem, prop, fx.end );\n\t\t\tfx.setAttr = true;\n\t\t}\n\t};\n});\n\nfunction getElementStyles( elem ) {\n\tvar key, len,\n\t\tstyle = elem.ownerDocument.defaultView ?\n\t\t\telem.ownerDocument.defaultView.getComputedStyle( elem, null ) :\n\t\t\telem.currentStyle,\n\t\tstyles = {};\n\n\tif ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {\n\t\tlen = style.length;\n\t\twhile ( len-- ) {\n\t\t\tkey = style[ len ];\n\t\t\tif ( typeof style[ key ] === \"string\" ) {\n\t\t\t\tstyles[ $.camelCase( key ) ] = style[ key ];\n\t\t\t}\n\t\t}\n\t// support: Opera, IE <9\n\t} else {\n\t\tfor ( key in style ) {\n\t\t\tif ( typeof style[ key ] === \"string\" ) {\n\t\t\t\tstyles[ key ] = style[ key ];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn styles;\n}\n\nfunction styleDifference( oldStyle, newStyle ) {\n\tvar diff = {},\n\t\tname, value;\n\n\tfor ( name in newStyle ) {\n\t\tvalue = newStyle[ name ];\n\t\tif ( oldStyle[ name ] !== value ) {\n\t\t\tif ( !shorthandStyles[ name ] ) {\n\t\t\t\tif ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {\n\t\t\t\t\tdiff[ name ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn diff;\n}\n\n// support: jQuery <1.8\nif ( !$.fn.addBack ) {\n\t$.fn.addBack = function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t};\n}\n\n$.effects.animateClass = function( value, duration, easing, callback ) {\n\tvar o = $.speed( duration, easing, callback );\n\n\treturn this.queue( function() {\n\t\tvar animated = $( this ),\n\t\t\tbaseClass = animated.attr( \"class\" ) || \"\",\n\t\t\tapplyClassChange,\n\t\t\tallAnimations = o.children ? animated.find( \"*\" ).addBack() : animated;\n\n\t\t// map the animated objects to store the original styles.\n\t\tallAnimations = allAnimations.map(function() {\n\t\t\tvar el = $( this );\n\t\t\treturn {\n\t\t\t\tel: el,\n\t\t\t\tstart: getElementStyles( this )\n\t\t\t};\n\t\t});\n\n\t\t// apply class change\n\t\tapplyClassChange = function() {\n\t\t\t$.each( classAnimationActions, function(i, action) {\n\t\t\t\tif ( value[ action ] ) {\n\t\t\t\t\tanimated[ action + \"Class\" ]( value[ action ] );\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tapplyClassChange();\n\n\t\t// map all animated objects again - calculate new styles and diff\n\t\tallAnimations = allAnimations.map(function() {\n\t\t\tthis.end = getElementStyles( this.el[ 0 ] );\n\t\t\tthis.diff = styleDifference( this.start, this.end );\n\t\t\treturn this;\n\t\t});\n\n\t\t// apply original class\n\t\tanimated.attr( \"class\", baseClass );\n\n\t\t// map all animated objects again - this time collecting a promise\n\t\tallAnimations = allAnimations.map(function() {\n\t\t\tvar styleInfo = this,\n\t\t\t\tdfd = $.Deferred(),\n\t\t\t\topts = $.extend({}, o, {\n\t\t\t\t\tqueue: false,\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tdfd.resolve( styleInfo );\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tthis.el.animate( this.diff, opts );\n\t\t\treturn dfd.promise();\n\t\t});\n\n\t\t// once all animations have completed:\n\t\t$.when.apply( $, allAnimations.get() ).done(function() {\n\n\t\t\t// set the final class\n\t\t\tapplyClassChange();\n\n\t\t\t// for each animated element,\n\t\t\t// clear all css properties that were animated\n\t\t\t$.each( arguments, function() {\n\t\t\t\tvar el = this.el;\n\t\t\t\t$.each( this.diff, function(key) {\n\t\t\t\t\tel.css( key, \"\" );\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// this is guarnteed to be there if you use jQuery.speed()\n\t\t\t// it also handles dequeuing the next anim...\n\t\t\to.complete.call( animated[ 0 ] );\n\t\t});\n\t});\n};\n\n$.fn.extend({\n\taddClass: (function( orig ) {\n\t\treturn function( classNames, speed, easing, callback ) {\n\t\t\treturn speed ?\n\t\t\t\t$.effects.animateClass.call( this,\n\t\t\t\t\t{ add: classNames }, speed, easing, callback ) :\n\t\t\t\torig.apply( this, arguments );\n\t\t};\n\t})( $.fn.addClass ),\n\n\tremoveClass: (function( orig ) {\n\t\treturn function( classNames, speed, easing, callback ) {\n\t\t\treturn arguments.length > 1 ?\n\t\t\t\t$.effects.animateClass.call( this,\n\t\t\t\t\t{ remove: classNames }, speed, easing, callback ) :\n\t\t\t\torig.apply( this, arguments );\n\t\t};\n\t})( $.fn.removeClass ),\n\n\ttoggleClass: (function( orig ) {\n\t\treturn function( classNames, force, speed, easing, callback ) {\n\t\t\tif ( typeof force === \"boolean\" || force === undefined ) {\n\t\t\t\tif ( !speed ) {\n\t\t\t\t\t// without speed parameter\n\t\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t\t} else {\n\t\t\t\t\treturn $.effects.animateClass.call( this,\n\t\t\t\t\t\t(force ? { add: classNames } : { remove: classNames }),\n\t\t\t\t\t\tspeed, easing, callback );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// without force parameter\n\t\t\t\treturn $.effects.animateClass.call( this,\n\t\t\t\t\t{ toggle: classNames }, force, speed, easing );\n\t\t\t}\n\t\t};\n\t})( $.fn.toggleClass ),\n\n\tswitchClass: function( remove, add, speed, easing, callback) {\n\t\treturn $.effects.animateClass.call( this, {\n\t\t\tadd: add,\n\t\t\tremove: remove\n\t\t}, speed, easing, callback );\n\t}\n});\n\n})();\n\n/******************************************************************************/\n/*********************************** EFFECTS **********************************/\n/******************************************************************************/\n\n(function() {\n\n$.extend( $.effects, {\n\tversion: \"1.11.4\",\n\n\t// Saves a set of properties in a data storage\n\tsave: function( element, set ) {\n\t\tfor ( var i = 0; i < set.length; i++ ) {\n\t\t\tif ( set[ i ] !== null ) {\n\t\t\t\telement.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );\n\t\t\t}\n\t\t}\n\t},\n\n\t// Restores a set of previously saved properties from a data storage\n\trestore: function( element, set ) {\n\t\tvar val, i;\n\t\tfor ( i = 0; i < set.length; i++ ) {\n\t\t\tif ( set[ i ] !== null ) {\n\t\t\t\tval = element.data( dataSpace + set[ i ] );\n\t\t\t\t// support: jQuery 1.6.2\n\t\t\t\t// http://bugs.jquery.com/ticket/9917\n\t\t\t\t// jQuery 1.6.2 incorrectly returns undefined for any falsy value.\n\t\t\t\t// We can't differentiate between \"\" and 0 here, so we just assume\n\t\t\t\t// empty string since it's likely to be a more common value...\n\t\t\t\tif ( val === undefined ) {\n\t\t\t\t\tval = \"\";\n\t\t\t\t}\n\t\t\t\telement.css( set[ i ], val );\n\t\t\t}\n\t\t}\n\t},\n\n\tsetMode: function( el, mode ) {\n\t\tif (mode === \"toggle\") {\n\t\t\tmode = el.is( \":hidden\" ) ? \"show\" : \"hide\";\n\t\t}\n\t\treturn mode;\n\t},\n\n\t// Translates a [top,left] array into a baseline value\n\t// this should be a little more flexible in the future to handle a string & hash\n\tgetBaseline: function( origin, original ) {\n\t\tvar y, x;\n\t\tswitch ( origin[ 0 ] ) {\n\t\t\tcase \"top\": y = 0; break;\n\t\t\tcase \"middle\": y = 0.5; break;\n\t\t\tcase \"bottom\": y = 1; break;\n\t\t\tdefault: y = origin[ 0 ] / original.height;\n\t\t}\n\t\tswitch ( origin[ 1 ] ) {\n\t\t\tcase \"left\": x = 0; break;\n\t\t\tcase \"center\": x = 0.5; break;\n\t\t\tcase \"right\": x = 1; break;\n\t\t\tdefault: x = origin[ 1 ] / original.width;\n\t\t}\n\t\treturn {\n\t\t\tx: x,\n\t\t\ty: y\n\t\t};\n\t},\n\n\t// Wraps the element around a wrapper that copies position properties\n\tcreateWrapper: function( element ) {\n\n\t\t// if the element is already wrapped, return it\n\t\tif ( element.parent().is( \".ui-effects-wrapper\" )) {\n\t\t\treturn element.parent();\n\t\t}\n\n\t\t// wrap the element\n\t\tvar props = {\n\t\t\t\twidth: element.outerWidth(true),\n\t\t\t\theight: element.outerHeight(true),\n\t\t\t\t\"float\": element.css( \"float\" )\n\t\t\t},\n\t\t\twrapper = $( \"<div></div>\" )\n\t\t\t\t.addClass( \"ui-effects-wrapper\" )\n\t\t\t\t.css({\n\t\t\t\t\tfontSize: \"100%\",\n\t\t\t\t\tbackground: \"transparent\",\n\t\t\t\t\tborder: \"none\",\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tpadding: 0\n\t\t\t\t}),\n\t\t\t// Store the size in case width/height are defined in % - Fixes #5245\n\t\t\tsize = {\n\t\t\t\twidth: element.width(),\n\t\t\t\theight: element.height()\n\t\t\t},\n\t\t\tactive = document.activeElement;\n\n\t\t// support: Firefox\n\t\t// Firefox incorrectly exposes anonymous content\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=561664\n\t\ttry {\n\t\t\tactive.id;\n\t\t} catch ( e ) {\n\t\t\tactive = document.body;\n\t\t}\n\n\t\telement.wrap( wrapper );\n\n\t\t// Fixes #7595 - Elements lose focus when wrapped.\n\t\tif ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {\n\t\t\t$( active ).focus();\n\t\t}\n\n\t\twrapper = element.parent(); //Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element\n\n\t\t// transfer positioning properties to the wrapper\n\t\tif ( element.css( \"position\" ) === \"static\" ) {\n\t\t\twrapper.css({ position: \"relative\" });\n\t\t\telement.css({ position: \"relative\" });\n\t\t} else {\n\t\t\t$.extend( props, {\n\t\t\t\tposition: element.css( \"position\" ),\n\t\t\t\tzIndex: element.css( \"z-index\" )\n\t\t\t});\n\t\t\t$.each([ \"top\", \"left\", \"bottom\", \"right\" ], function(i, pos) {\n\t\t\t\tprops[ pos ] = element.css( pos );\n\t\t\t\tif ( isNaN( parseInt( props[ pos ], 10 ) ) ) {\n\t\t\t\t\tprops[ pos ] = \"auto\";\n\t\t\t\t}\n\t\t\t});\n\t\t\telement.css({\n\t\t\t\tposition: \"relative\",\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\tright: \"auto\",\n\t\t\t\tbottom: \"auto\"\n\t\t\t});\n\t\t}\n\t\telement.css(size);\n\n\t\treturn wrapper.css( props ).show();\n\t},\n\n\tremoveWrapper: function( element ) {\n\t\tvar active = document.activeElement;\n\n\t\tif ( element.parent().is( \".ui-effects-wrapper\" ) ) {\n\t\t\telement.parent().replaceWith( element );\n\n\t\t\t// Fixes #7595 - Elements lose focus when wrapped.\n\t\t\tif ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {\n\t\t\t\t$( active ).focus();\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\t},\n\n\tsetTransition: function( element, list, factor, value ) {\n\t\tvalue = value || {};\n\t\t$.each( list, function( i, x ) {\n\t\t\tvar unit = element.cssUnit( x );\n\t\t\tif ( unit[ 0 ] > 0 ) {\n\t\t\t\tvalue[ x ] = unit[ 0 ] * factor + unit[ 1 ];\n\t\t\t}\n\t\t});\n\t\treturn value;\n\t}\n});\n\n// return an effect options object for the given parameters:\nfunction _normalizeArguments( effect, options, speed, callback ) {\n\n\t// allow passing all options as the first parameter\n\tif ( $.isPlainObject( effect ) ) {\n\t\toptions = effect;\n\t\teffect = effect.effect;\n\t}\n\n\t// convert to an object\n\teffect = { effect: effect };\n\n\t// catch (effect, null, ...)\n\tif ( options == null ) {\n\t\toptions = {};\n\t}\n\n\t// catch (effect, callback)\n\tif ( $.isFunction( options ) ) {\n\t\tcallback = options;\n\t\tspeed = null;\n\t\toptions = {};\n\t}\n\n\t// catch (effect, speed, ?)\n\tif ( typeof options === \"number\" || $.fx.speeds[ options ] ) {\n\t\tcallback = speed;\n\t\tspeed = options;\n\t\toptions = {};\n\t}\n\n\t// catch (effect, options, callback)\n\tif ( $.isFunction( speed ) ) {\n\t\tcallback = speed;\n\t\tspeed = null;\n\t}\n\n\t// add options to effect\n\tif ( options ) {\n\t\t$.extend( effect, options );\n\t}\n\n\tspeed = speed || options.duration;\n\teffect.duration = $.fx.off ? 0 :\n\t\ttypeof speed === \"number\" ? speed :\n\t\tspeed in $.fx.speeds ? $.fx.speeds[ speed ] :\n\t\t$.fx.speeds._default;\n\n\teffect.complete = callback || options.complete;\n\n\treturn effect;\n}\n\nfunction standardAnimationOption( option ) {\n\t// Valid standard speeds (nothing, number, named speed)\n\tif ( !option || typeof option === \"number\" || $.fx.speeds[ option ] ) {\n\t\treturn true;\n\t}\n\n\t// Invalid strings - treat as \"normal\" speed\n\tif ( typeof option === \"string\" && !$.effects.effect[ option ] ) {\n\t\treturn true;\n\t}\n\n\t// Complete callback\n\tif ( $.isFunction( option ) ) {\n\t\treturn true;\n\t}\n\n\t// Options hash (but not naming an effect)\n\tif ( typeof option === \"object\" && !option.effect ) {\n\t\treturn true;\n\t}\n\n\t// Didn't match any standard API\n\treturn false;\n}\n\n$.fn.extend({\n\teffect: function( /* effect, options, speed, callback */ ) {\n\t\tvar args = _normalizeArguments.apply( this, arguments ),\n\t\t\tmode = args.mode,\n\t\t\tqueue = args.queue,\n\t\t\teffectMethod = $.effects.effect[ args.effect ];\n\n\t\tif ( $.fx.off || !effectMethod ) {\n\t\t\t// delegate to the original method (e.g., .show()) if possible\n\t\t\tif ( mode ) {\n\t\t\t\treturn this[ mode ]( args.duration, args.complete );\n\t\t\t} else {\n\t\t\t\treturn this.each( function() {\n\t\t\t\t\tif ( args.complete ) {\n\t\t\t\t\t\targs.complete.call( this );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction run( next ) {\n\t\t\tvar elem = $( this ),\n\t\t\t\tcomplete = args.complete,\n\t\t\t\tmode = args.mode;\n\n\t\t\tfunction done() {\n\t\t\t\tif ( $.isFunction( complete ) ) {\n\t\t\t\t\tcomplete.call( elem[0] );\n\t\t\t\t}\n\t\t\t\tif ( $.isFunction( next ) ) {\n\t\t\t\t\tnext();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If the element already has the correct final state, delegate to\n\t\t\t// the core methods so the internal tracking of \"olddisplay\" works.\n\t\t\tif ( elem.is( \":hidden\" ) ? mode === \"hide\" : mode === \"show\" ) {\n\t\t\t\telem[ mode ]();\n\t\t\t\tdone();\n\t\t\t} else {\n\t\t\t\teffectMethod.call( elem[0], args, done );\n\t\t\t}\n\t\t}\n\n\t\treturn queue === false ? this.each( run ) : this.queue( queue || \"fx\", run );\n\t},\n\n\tshow: (function( orig ) {\n\t\treturn function( option ) {\n\t\t\tif ( standardAnimationOption( option ) ) {\n\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t} else {\n\t\t\t\tvar args = _normalizeArguments.apply( this, arguments );\n\t\t\t\targs.mode = \"show\";\n\t\t\t\treturn this.effect.call( this, args );\n\t\t\t}\n\t\t};\n\t})( $.fn.show ),\n\n\thide: (function( orig ) {\n\t\treturn function( option ) {\n\t\t\tif ( standardAnimationOption( option ) ) {\n\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t} else {\n\t\t\t\tvar args = _normalizeArguments.apply( this, arguments );\n\t\t\t\targs.mode = \"hide\";\n\t\t\t\treturn this.effect.call( this, args );\n\t\t\t}\n\t\t};\n\t})( $.fn.hide ),\n\n\ttoggle: (function( orig ) {\n\t\treturn function( option ) {\n\t\t\tif ( standardAnimationOption( option ) || typeof option === \"boolean\" ) {\n\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t} else {\n\t\t\t\tvar args = _normalizeArguments.apply( this, arguments );\n\t\t\t\targs.mode = \"toggle\";\n\t\t\t\treturn this.effect.call( this, args );\n\t\t\t}\n\t\t};\n\t})( $.fn.toggle ),\n\n\t// helper functions\n\tcssUnit: function(key) {\n\t\tvar style = this.css( key ),\n\t\t\tval = [];\n\n\t\t$.each( [ \"em\", \"px\", \"%\", \"pt\" ], function( i, unit ) {\n\t\t\tif ( style.indexOf( unit ) > 0 ) {\n\t\t\t\tval = [ parseFloat( style ), unit ];\n\t\t\t}\n\t\t});\n\t\treturn val;\n\t}\n});\n\n})();\n\n/******************************************************************************/\n/*********************************** EASING ***********************************/\n/******************************************************************************/\n\n(function() {\n\n// based on easing equations from Robert Penner (http://www.robertpenner.com/easing)\n\nvar baseEasings = {};\n\n$.each( [ \"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Expo\" ], function( i, name ) {\n\tbaseEasings[ name ] = function( p ) {\n\t\treturn Math.pow( p, i + 2 );\n\t};\n});\n\n$.extend( baseEasings, {\n\tSine: function( p ) {\n\t\treturn 1 - Math.cos( p * Math.PI / 2 );\n\t},\n\tCirc: function( p ) {\n\t\treturn 1 - Math.sqrt( 1 - p * p );\n\t},\n\tElastic: function( p ) {\n\t\treturn p === 0 || p === 1 ? p :\n\t\t\t-Math.pow( 2, 8 * (p - 1) ) * Math.sin( ( (p - 1) * 80 - 7.5 ) * Math.PI / 15 );\n\t},\n\tBack: function( p ) {\n\t\treturn p * p * ( 3 * p - 2 );\n\t},\n\tBounce: function( p ) {\n\t\tvar pow2,\n\t\t\tbounce = 4;\n\n\t\twhile ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}\n\t\treturn 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );\n\t}\n});\n\n$.each( baseEasings, function( name, easeIn ) {\n\t$.easing[ \"easeIn\" + name ] = easeIn;\n\t$.easing[ \"easeOut\" + name ] = function( p ) {\n\t\treturn 1 - easeIn( 1 - p );\n\t};\n\t$.easing[ \"easeInOut\" + name ] = function( p ) {\n\t\treturn p < 0.5 ?\n\t\t\teaseIn( p * 2 ) / 2 :\n\t\t\t1 - easeIn( p * -2 + 2 ) / 2;\n\t};\n});\n\n})();\n\nvar effect = $.effects;\n\n\n/*!\n * jQuery UI Effects Blind 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/blind-effect/\n */\n\n\nvar effectBlind = $.effects.effect.blind = function( o, done ) {\n\t// Create element\n\tvar el = $( this ),\n\t\trvertical = /up|down|vertical/,\n\t\trpositivemotion = /up|left|vertical|horizontal/,\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tdirection = o.direction || \"up\",\n\t\tvertical = rvertical.test( direction ),\n\t\tref = vertical ? \"height\" : \"width\",\n\t\tref2 = vertical ? \"top\" : \"left\",\n\t\tmotion = rpositivemotion.test( direction ),\n\t\tanimation = {},\n\t\tshow = mode === \"show\",\n\t\twrapper, distance, margin;\n\n\t// if already wrapped, the wrapper's properties are my property. #6245\n\tif ( el.parent().is( \".ui-effects-wrapper\" ) ) {\n\t\t$.effects.save( el.parent(), props );\n\t} else {\n\t\t$.effects.save( el, props );\n\t}\n\tel.show();\n\twrapper = $.effects.createWrapper( el ).css({\n\t\toverflow: \"hidden\"\n\t});\n\n\tdistance = wrapper[ ref ]();\n\tmargin = parseFloat( wrapper.css( ref2 ) ) || 0;\n\n\tanimation[ ref ] = show ? distance : 0;\n\tif ( !motion ) {\n\t\tel\n\t\t\t.css( vertical ? \"bottom\" : \"right\", 0 )\n\t\t\t.css( vertical ? \"top\" : \"left\", \"auto\" )\n\t\t\t.css({ position: \"absolute\" });\n\n\t\tanimation[ ref2 ] = show ? margin : distance + margin;\n\t}\n\n\t// start at 0 if we are showing\n\tif ( show ) {\n\t\twrapper.css( ref, 0 );\n\t\tif ( !motion ) {\n\t\t\twrapper.css( ref2, margin + distance );\n\t\t}\n\t}\n\n\t// Animate\n\twrapper.animate( animation, {\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tqueue: false,\n\t\tcomplete: function() {\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n};\n\n\n/*!\n * jQuery UI Effects Bounce 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/bounce-effect/\n */\n\n\nvar effectBounce = $.effects.effect.bounce = function( o, done ) {\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\n\t\t// defaults:\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\n\t\thide = mode === \"hide\",\n\t\tshow = mode === \"show\",\n\t\tdirection = o.direction || \"up\",\n\t\tdistance = o.distance,\n\t\ttimes = o.times || 5,\n\n\t\t// number of internal animations\n\t\tanims = times * 2 + ( show || hide ? 1 : 0 ),\n\t\tspeed = o.duration / anims,\n\t\teasing = o.easing,\n\n\t\t// utility:\n\t\tref = ( direction === \"up\" || direction === \"down\" ) ? \"top\" : \"left\",\n\t\tmotion = ( direction === \"up\" || direction === \"left\" ),\n\t\ti,\n\t\tupAnim,\n\t\tdownAnim,\n\n\t\t// we will need to re-assemble the queue to stack our animations in place\n\t\tqueue = el.queue(),\n\t\tqueuelen = queue.length;\n\n\t// Avoid touching opacity to prevent clearType and PNG issues in IE\n\tif ( show || hide ) {\n\t\tprops.push( \"opacity\" );\n\t}\n\n\t$.effects.save( el, props );\n\tel.show();\n\t$.effects.createWrapper( el ); // Create Wrapper\n\n\t// default distance for the BIGGEST bounce is the outer Distance / 3\n\tif ( !distance ) {\n\t\tdistance = el[ ref === \"top\" ? \"outerHeight\" : \"outerWidth\" ]() / 3;\n\t}\n\n\tif ( show ) {\n\t\tdownAnim = { opacity: 1 };\n\t\tdownAnim[ ref ] = 0;\n\n\t\t// if we are showing, force opacity 0 and set the initial position\n\t\t// then do the \"first\" animation\n\t\tel.css( \"opacity\", 0 )\n\t\t\t.css( ref, motion ? -distance * 2 : distance * 2 )\n\t\t\t.animate( downAnim, speed, easing );\n\t}\n\n\t// start at the smallest distance if we are hiding\n\tif ( hide ) {\n\t\tdistance = distance / Math.pow( 2, times - 1 );\n\t}\n\n\tdownAnim = {};\n\tdownAnim[ ref ] = 0;\n\t// Bounces up/down/left/right then back to 0 -- times * 2 animations happen here\n\tfor ( i = 0; i < times; i++ ) {\n\t\tupAnim = {};\n\t\tupAnim[ ref ] = ( motion ? \"-=\" : \"+=\" ) + distance;\n\n\t\tel.animate( upAnim, speed, easing )\n\t\t\t.animate( downAnim, speed, easing );\n\n\t\tdistance = hide ? distance * 2 : distance / 2;\n\t}\n\n\t// Last Bounce when Hiding\n\tif ( hide ) {\n\t\tupAnim = { opacity: 0 };\n\t\tupAnim[ ref ] = ( motion ? \"-=\" : \"+=\" ) + distance;\n\n\t\tel.animate( upAnim, speed, easing );\n\t}\n\n\tel.queue(function() {\n\t\tif ( hide ) {\n\t\t\tel.hide();\n\t\t}\n\t\t$.effects.restore( el, props );\n\t\t$.effects.removeWrapper( el );\n\t\tdone();\n\t});\n\n\t// inject all the animations we just queued to be first in line (after \"inprogress\")\n\tif ( queuelen > 1) {\n\t\tqueue.splice.apply( queue,\n\t\t\t[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );\n\t}\n\tel.dequeue();\n\n};\n\n\n/*!\n * jQuery UI Effects Clip 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/clip-effect/\n */\n\n\nvar effectClip = $.effects.effect.clip = function( o, done ) {\n\t// Create element\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tshow = mode === \"show\",\n\t\tdirection = o.direction || \"vertical\",\n\t\tvert = direction === \"vertical\",\n\t\tsize = vert ? \"height\" : \"width\",\n\t\tposition = vert ? \"top\" : \"left\",\n\t\tanimation = {},\n\t\twrapper, animate, distance;\n\n\t// Save & Show\n\t$.effects.save( el, props );\n\tel.show();\n\n\t// Create Wrapper\n\twrapper = $.effects.createWrapper( el ).css({\n\t\toverflow: \"hidden\"\n\t});\n\tanimate = ( el[0].tagName === \"IMG\" ) ? wrapper : el;\n\tdistance = animate[ size ]();\n\n\t// Shift\n\tif ( show ) {\n\t\tanimate.css( size, 0 );\n\t\tanimate.css( position, distance / 2 );\n\t}\n\n\t// Create Animation Object:\n\tanimation[ size ] = show ? distance : 0;\n\tanimation[ position ] = show ? 0 : distance / 2;\n\n\t// Animate\n\tanimate.animate( animation, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: function() {\n\t\t\tif ( !show ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n\n};\n\n\n/*!\n * jQuery UI Effects Drop 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/drop-effect/\n */\n\n\nvar effectDrop = $.effects.effect.drop = function( o, done ) {\n\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"opacity\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tshow = mode === \"show\",\n\t\tdirection = o.direction || \"left\",\n\t\tref = ( direction === \"up\" || direction === \"down\" ) ? \"top\" : \"left\",\n\t\tmotion = ( direction === \"up\" || direction === \"left\" ) ? \"pos\" : \"neg\",\n\t\tanimation = {\n\t\t\topacity: show ? 1 : 0\n\t\t},\n\t\tdistance;\n\n\t// Adjust\n\t$.effects.save( el, props );\n\tel.show();\n\t$.effects.createWrapper( el );\n\n\tdistance = o.distance || el[ ref === \"top\" ? \"outerHeight\" : \"outerWidth\" ]( true ) / 2;\n\n\tif ( show ) {\n\t\tel\n\t\t\t.css( \"opacity\", 0 )\n\t\t\t.css( ref, motion === \"pos\" ? -distance : distance );\n\t}\n\n\t// Animation\n\tanimation[ ref ] = ( show ?\n\t\t( motion === \"pos\" ? \"+=\" : \"-=\" ) :\n\t\t( motion === \"pos\" ? \"-=\" : \"+=\" ) ) +\n\t\tdistance;\n\n\t// Animate\n\tel.animate( animation, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: function() {\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n};\n\n\n/*!\n * jQuery UI Effects Explode 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/explode-effect/\n */\n\n\nvar effectExplode = $.effects.effect.explode = function( o, done ) {\n\n\tvar rows = o.pieces ? Math.round( Math.sqrt( o.pieces ) ) : 3,\n\t\tcells = rows,\n\t\tel = $( this ),\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tshow = mode === \"show\",\n\n\t\t// show and then visibility:hidden the element before calculating offset\n\t\toffset = el.show().css( \"visibility\", \"hidden\" ).offset(),\n\n\t\t// width and height of a piece\n\t\twidth = Math.ceil( el.outerWidth() / cells ),\n\t\theight = Math.ceil( el.outerHeight() / rows ),\n\t\tpieces = [],\n\n\t\t// loop\n\t\ti, j, left, top, mx, my;\n\n\t// children animate complete:\n\tfunction childComplete() {\n\t\tpieces.push( this );\n\t\tif ( pieces.length === rows * cells ) {\n\t\t\tanimComplete();\n\t\t}\n\t}\n\n\t// clone the element for each row and cell.\n\tfor ( i = 0; i < rows ; i++ ) { // ===>\n\t\ttop = offset.top + i * height;\n\t\tmy = i - ( rows - 1 ) / 2 ;\n\n\t\tfor ( j = 0; j < cells ; j++ ) { // |||\n\t\t\tleft = offset.left + j * width;\n\t\t\tmx = j - ( cells - 1 ) / 2 ;\n\n\t\t\t// Create a clone of the now hidden main element that will be absolute positioned\n\t\t\t// within a wrapper div off the -left and -top equal to size of our pieces\n\t\t\tel\n\t\t\t\t.clone()\n\t\t\t\t.appendTo( \"body\" )\n\t\t\t\t.wrap( \"<div></div>\" )\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\tvisibility: \"visible\",\n\t\t\t\t\tleft: -j * width,\n\t\t\t\t\ttop: -i * height\n\t\t\t\t})\n\n\t\t\t// select the wrapper - make it overflow: hidden and absolute positioned based on\n\t\t\t// where the original was located +left and +top equal to the size of pieces\n\t\t\t\t.parent()\n\t\t\t\t.addClass( \"ui-effects-explode\" )\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\twidth: width,\n\t\t\t\t\theight: height,\n\t\t\t\t\tleft: left + ( show ? mx * width : 0 ),\n\t\t\t\t\ttop: top + ( show ? my * height : 0 ),\n\t\t\t\t\topacity: show ? 0 : 1\n\t\t\t\t}).animate({\n\t\t\t\t\tleft: left + ( show ? 0 : mx * width ),\n\t\t\t\t\ttop: top + ( show ? 0 : my * height ),\n\t\t\t\t\topacity: show ? 1 : 0\n\t\t\t\t}, o.duration || 500, o.easing, childComplete );\n\t\t}\n\t}\n\n\tfunction animComplete() {\n\t\tel.css({\n\t\t\tvisibility: \"visible\"\n\t\t});\n\t\t$( pieces ).remove();\n\t\tif ( !show ) {\n\t\t\tel.hide();\n\t\t}\n\t\tdone();\n\t}\n};\n\n\n/*!\n * jQuery UI Effects Fade 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/fade-effect/\n */\n\n\nvar effectFade = $.effects.effect.fade = function( o, done ) {\n\tvar el = $( this ),\n\t\tmode = $.effects.setMode( el, o.mode || \"toggle\" );\n\n\tel.animate({\n\t\topacity: mode\n\t}, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: done\n\t});\n};\n\n\n/*!\n * jQuery UI Effects Fold 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/fold-effect/\n */\n\n\nvar effectFold = $.effects.effect.fold = function( o, done ) {\n\n\t// Create element\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tshow = mode === \"show\",\n\t\thide = mode === \"hide\",\n\t\tsize = o.size || 15,\n\t\tpercent = /([0-9]+)%/.exec( size ),\n\t\thorizFirst = !!o.horizFirst,\n\t\twidthFirst = show !== horizFirst,\n\t\tref = widthFirst ? [ \"width\", \"height\" ] : [ \"height\", \"width\" ],\n\t\tduration = o.duration / 2,\n\t\twrapper, distance,\n\t\tanimation1 = {},\n\t\tanimation2 = {};\n\n\t$.effects.save( el, props );\n\tel.show();\n\n\t// Create Wrapper\n\twrapper = $.effects.createWrapper( el ).css({\n\t\toverflow: \"hidden\"\n\t});\n\tdistance = widthFirst ?\n\t\t[ wrapper.width(), wrapper.height() ] :\n\t\t[ wrapper.height(), wrapper.width() ];\n\n\tif ( percent ) {\n\t\tsize = parseInt( percent[ 1 ], 10 ) / 100 * distance[ hide ? 0 : 1 ];\n\t}\n\tif ( show ) {\n\t\twrapper.css( horizFirst ? {\n\t\t\theight: 0,\n\t\t\twidth: size\n\t\t} : {\n\t\t\theight: size,\n\t\t\twidth: 0\n\t\t});\n\t}\n\n\t// Animation\n\tanimation1[ ref[ 0 ] ] = show ? distance[ 0 ] : size;\n\tanimation2[ ref[ 1 ] ] = show ? distance[ 1 ] : 0;\n\n\t// Animate\n\twrapper\n\t\t.animate( animation1, duration, o.easing )\n\t\t.animate( animation2, duration, o.easing, function() {\n\t\t\tif ( hide ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t});\n\n};\n\n\n/*!\n * jQuery UI Effects Highlight 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/highlight-effect/\n */\n\n\nvar effectHighlight = $.effects.effect.highlight = function( o, done ) {\n\tvar elem = $( this ),\n\t\tprops = [ \"backgroundImage\", \"backgroundColor\", \"opacity\" ],\n\t\tmode = $.effects.setMode( elem, o.mode || \"show\" ),\n\t\tanimation = {\n\t\t\tbackgroundColor: elem.css( \"backgroundColor\" )\n\t\t};\n\n\tif (mode === \"hide\") {\n\t\tanimation.opacity = 0;\n\t}\n\n\t$.effects.save( elem, props );\n\n\telem\n\t\t.show()\n\t\t.css({\n\t\t\tbackgroundImage: \"none\",\n\t\t\tbackgroundColor: o.color || \"#ffff99\"\n\t\t})\n\t\t.animate( animation, {\n\t\t\tqueue: false,\n\t\t\tduration: o.duration,\n\t\t\teasing: o.easing,\n\t\t\tcomplete: function() {\n\t\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\t\telem.hide();\n\t\t\t\t}\n\t\t\t\t$.effects.restore( elem, props );\n\t\t\t\tdone();\n\t\t\t}\n\t\t});\n};\n\n\n/*!\n * jQuery UI Effects Size 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/size-effect/\n */\n\n\nvar effectSize = $.effects.effect.size = function( o, done ) {\n\n\t// Create element\n\tvar original, baseline, factor,\n\t\tel = $( this ),\n\t\tprops0 = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"width\", \"height\", \"overflow\", \"opacity\" ],\n\n\t\t// Always restore\n\t\tprops1 = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"overflow\", \"opacity\" ],\n\n\t\t// Copy for children\n\t\tprops2 = [ \"width\", \"height\", \"overflow\" ],\n\t\tcProps = [ \"fontSize\" ],\n\t\tvProps = [ \"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\" ],\n\t\thProps = [ \"borderLeftWidth\", \"borderRightWidth\", \"paddingLeft\", \"paddingRight\" ],\n\n\t\t// Set options\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\n\t\trestore = o.restore || mode !== \"effect\",\n\t\tscale = o.scale || \"both\",\n\t\torigin = o.origin || [ \"middle\", \"center\" ],\n\t\tposition = el.css( \"position\" ),\n\t\tprops = restore ? props0 : props1,\n\t\tzero = {\n\t\t\theight: 0,\n\t\t\twidth: 0,\n\t\t\touterHeight: 0,\n\t\t\touterWidth: 0\n\t\t};\n\n\tif ( mode === \"show\" ) {\n\t\tel.show();\n\t}\n\toriginal = {\n\t\theight: el.height(),\n\t\twidth: el.width(),\n\t\touterHeight: el.outerHeight(),\n\t\touterWidth: el.outerWidth()\n\t};\n\n\tif ( o.mode === \"toggle\" && mode === \"show\" ) {\n\t\tel.from = o.to || zero;\n\t\tel.to = o.from || original;\n\t} else {\n\t\tel.from = o.from || ( mode === \"show\" ? zero : original );\n\t\tel.to = o.to || ( mode === \"hide\" ? zero : original );\n\t}\n\n\t// Set scaling factor\n\tfactor = {\n\t\tfrom: {\n\t\t\ty: el.from.height / original.height,\n\t\t\tx: el.from.width / original.width\n\t\t},\n\t\tto: {\n\t\t\ty: el.to.height / original.height,\n\t\t\tx: el.to.width / original.width\n\t\t}\n\t};\n\n\t// Scale the css box\n\tif ( scale === \"box\" || scale === \"both\" ) {\n\n\t\t// Vertical props scaling\n\t\tif ( factor.from.y !== factor.to.y ) {\n\t\t\tprops = props.concat( vProps );\n\t\t\tel.from = $.effects.setTransition( el, vProps, factor.from.y, el.from );\n\t\t\tel.to = $.effects.setTransition( el, vProps, factor.to.y, el.to );\n\t\t}\n\n\t\t// Horizontal props scaling\n\t\tif ( factor.from.x !== factor.to.x ) {\n\t\t\tprops = props.concat( hProps );\n\t\t\tel.from = $.effects.setTransition( el, hProps, factor.from.x, el.from );\n\t\t\tel.to = $.effects.setTransition( el, hProps, factor.to.x, el.to );\n\t\t}\n\t}\n\n\t// Scale the content\n\tif ( scale === \"content\" || scale === \"both\" ) {\n\n\t\t// Vertical props scaling\n\t\tif ( factor.from.y !== factor.to.y ) {\n\t\t\tprops = props.concat( cProps ).concat( props2 );\n\t\t\tel.from = $.effects.setTransition( el, cProps, factor.from.y, el.from );\n\t\t\tel.to = $.effects.setTransition( el, cProps, factor.to.y, el.to );\n\t\t}\n\t}\n\n\t$.effects.save( el, props );\n\tel.show();\n\t$.effects.createWrapper( el );\n\tel.css( \"overflow\", \"hidden\" ).css( el.from );\n\n\t// Adjust\n\tif (origin) { // Calculate baseline shifts\n\t\tbaseline = $.effects.getBaseline( origin, original );\n\t\tel.from.top = ( original.outerHeight - el.outerHeight() ) * baseline.y;\n\t\tel.from.left = ( original.outerWidth - el.outerWidth() ) * baseline.x;\n\t\tel.to.top = ( original.outerHeight - el.to.outerHeight ) * baseline.y;\n\t\tel.to.left = ( original.outerWidth - el.to.outerWidth ) * baseline.x;\n\t}\n\tel.css( el.from ); // set top & left\n\n\t// Animate\n\tif ( scale === \"content\" || scale === \"both\" ) { // Scale the children\n\n\t\t// Add margins/font-size\n\t\tvProps = vProps.concat([ \"marginTop\", \"marginBottom\" ]).concat(cProps);\n\t\thProps = hProps.concat([ \"marginLeft\", \"marginRight\" ]);\n\t\tprops2 = props0.concat(vProps).concat(hProps);\n\n\t\tel.find( \"*[width]\" ).each( function() {\n\t\t\tvar child = $( this ),\n\t\t\t\tc_original = {\n\t\t\t\t\theight: child.height(),\n\t\t\t\t\twidth: child.width(),\n\t\t\t\t\touterHeight: child.outerHeight(),\n\t\t\t\t\touterWidth: child.outerWidth()\n\t\t\t\t};\n\t\t\tif (restore) {\n\t\t\t\t$.effects.save(child, props2);\n\t\t\t}\n\n\t\t\tchild.from = {\n\t\t\t\theight: c_original.height * factor.from.y,\n\t\t\t\twidth: c_original.width * factor.from.x,\n\t\t\t\touterHeight: c_original.outerHeight * factor.from.y,\n\t\t\t\touterWidth: c_original.outerWidth * factor.from.x\n\t\t\t};\n\t\t\tchild.to = {\n\t\t\t\theight: c_original.height * factor.to.y,\n\t\t\t\twidth: c_original.width * factor.to.x,\n\t\t\t\touterHeight: c_original.height * factor.to.y,\n\t\t\t\touterWidth: c_original.width * factor.to.x\n\t\t\t};\n\n\t\t\t// Vertical props scaling\n\t\t\tif ( factor.from.y !== factor.to.y ) {\n\t\t\t\tchild.from = $.effects.setTransition( child, vProps, factor.from.y, child.from );\n\t\t\t\tchild.to = $.effects.setTransition( child, vProps, factor.to.y, child.to );\n\t\t\t}\n\n\t\t\t// Horizontal props scaling\n\t\t\tif ( factor.from.x !== factor.to.x ) {\n\t\t\t\tchild.from = $.effects.setTransition( child, hProps, factor.from.x, child.from );\n\t\t\t\tchild.to = $.effects.setTransition( child, hProps, factor.to.x, child.to );\n\t\t\t}\n\n\t\t\t// Animate children\n\t\t\tchild.css( child.from );\n\t\t\tchild.animate( child.to, o.duration, o.easing, function() {\n\n\t\t\t\t// Restore children\n\t\t\t\tif ( restore ) {\n\t\t\t\t\t$.effects.restore( child, props2 );\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t// Animate\n\tel.animate( el.to, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: function() {\n\t\t\tif ( el.to.opacity === 0 ) {\n\t\t\t\tel.css( \"opacity\", el.from.opacity );\n\t\t\t}\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\tif ( !restore ) {\n\n\t\t\t\t// we need to calculate our new positioning based on the scaling\n\t\t\t\tif ( position === \"static\" ) {\n\t\t\t\t\tel.css({\n\t\t\t\t\t\tposition: \"relative\",\n\t\t\t\t\t\ttop: el.to.top,\n\t\t\t\t\t\tleft: el.to.left\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t$.each([ \"top\", \"left\" ], function( idx, pos ) {\n\t\t\t\t\t\tel.css( pos, function( _, str ) {\n\t\t\t\t\t\t\tvar val = parseInt( str, 10 ),\n\t\t\t\t\t\t\t\ttoRef = idx ? el.to.left : el.to.top;\n\n\t\t\t\t\t\t\t// if original was \"auto\", recalculate the new value from wrapper\n\t\t\t\t\t\t\tif ( str === \"auto\" ) {\n\t\t\t\t\t\t\t\treturn toRef + \"px\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn val + toRef + \"px\";\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n\n};\n\n\n/*!\n * jQuery UI Effects Scale 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/scale-effect/\n */\n\n\nvar effectScale = $.effects.effect.scale = function( o, done ) {\n\n\t// Create element\n\tvar el = $( this ),\n\t\toptions = $.extend( true, {}, o ),\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\n\t\tpercent = parseInt( o.percent, 10 ) ||\n\t\t\t( parseInt( o.percent, 10 ) === 0 ? 0 : ( mode === \"hide\" ? 0 : 100 ) ),\n\t\tdirection = o.direction || \"both\",\n\t\torigin = o.origin,\n\t\toriginal = {\n\t\t\theight: el.height(),\n\t\t\twidth: el.width(),\n\t\t\touterHeight: el.outerHeight(),\n\t\t\touterWidth: el.outerWidth()\n\t\t},\n\t\tfactor = {\n\t\t\ty: direction !== \"horizontal\" ? (percent / 100) : 1,\n\t\t\tx: direction !== \"vertical\" ? (percent / 100) : 1\n\t\t};\n\n\t// We are going to pass this effect to the size effect:\n\toptions.effect = \"size\";\n\toptions.queue = false;\n\toptions.complete = done;\n\n\t// Set default origin and restore for show/hide\n\tif ( mode !== \"effect\" ) {\n\t\toptions.origin = origin || [ \"middle\", \"center\" ];\n\t\toptions.restore = true;\n\t}\n\n\toptions.from = o.from || ( mode === \"show\" ? {\n\t\theight: 0,\n\t\twidth: 0,\n\t\touterHeight: 0,\n\t\touterWidth: 0\n\t} : original );\n\toptions.to = {\n\t\theight: original.height * factor.y,\n\t\twidth: original.width * factor.x,\n\t\touterHeight: original.outerHeight * factor.y,\n\t\touterWidth: original.outerWidth * factor.x\n\t};\n\n\t// Fade option to support puff\n\tif ( options.fade ) {\n\t\tif ( mode === \"show\" ) {\n\t\t\toptions.from.opacity = 0;\n\t\t\toptions.to.opacity = 1;\n\t\t}\n\t\tif ( mode === \"hide\" ) {\n\t\t\toptions.from.opacity = 1;\n\t\t\toptions.to.opacity = 0;\n\t\t}\n\t}\n\n\t// Animate\n\tel.effect( options );\n\n};\n\n\n/*!\n * jQuery UI Effects Puff 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/puff-effect/\n */\n\n\nvar effectPuff = $.effects.effect.puff = function( o, done ) {\n\tvar elem = $( this ),\n\t\tmode = $.effects.setMode( elem, o.mode || \"hide\" ),\n\t\thide = mode === \"hide\",\n\t\tpercent = parseInt( o.percent, 10 ) || 150,\n\t\tfactor = percent / 100,\n\t\toriginal = {\n\t\t\theight: elem.height(),\n\t\t\twidth: elem.width(),\n\t\t\touterHeight: elem.outerHeight(),\n\t\t\touterWidth: elem.outerWidth()\n\t\t};\n\n\t$.extend( o, {\n\t\teffect: \"scale\",\n\t\tqueue: false,\n\t\tfade: true,\n\t\tmode: mode,\n\t\tcomplete: done,\n\t\tpercent: hide ? percent : 100,\n\t\tfrom: hide ?\n\t\t\toriginal :\n\t\t\t{\n\t\t\t\theight: original.height * factor,\n\t\t\t\twidth: original.width * factor,\n\t\t\t\touterHeight: original.outerHeight * factor,\n\t\t\t\touterWidth: original.outerWidth * factor\n\t\t\t}\n\t});\n\n\telem.effect( o );\n};\n\n\n/*!\n * jQuery UI Effects Pulsate 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/pulsate-effect/\n */\n\n\nvar effectPulsate = $.effects.effect.pulsate = function( o, done ) {\n\tvar elem = $( this ),\n\t\tmode = $.effects.setMode( elem, o.mode || \"show\" ),\n\t\tshow = mode === \"show\",\n\t\thide = mode === \"hide\",\n\t\tshowhide = ( show || mode === \"hide\" ),\n\n\t\t// showing or hiding leaves of the \"last\" animation\n\t\tanims = ( ( o.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),\n\t\tduration = o.duration / anims,\n\t\tanimateTo = 0,\n\t\tqueue = elem.queue(),\n\t\tqueuelen = queue.length,\n\t\ti;\n\n\tif ( show || !elem.is(\":visible\")) {\n\t\telem.css( \"opacity\", 0 ).show();\n\t\tanimateTo = 1;\n\t}\n\n\t// anims - 1 opacity \"toggles\"\n\tfor ( i = 1; i < anims; i++ ) {\n\t\telem.animate({\n\t\t\topacity: animateTo\n\t\t}, duration, o.easing );\n\t\tanimateTo = 1 - animateTo;\n\t}\n\n\telem.animate({\n\t\topacity: animateTo\n\t}, duration, o.easing);\n\n\telem.queue(function() {\n\t\tif ( hide ) {\n\t\t\telem.hide();\n\t\t}\n\t\tdone();\n\t});\n\n\t// We just queued up \"anims\" animations, we need to put them next in the queue\n\tif ( queuelen > 1 ) {\n\t\tqueue.splice.apply( queue,\n\t\t\t[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );\n\t}\n\telem.dequeue();\n};\n\n\n/*!\n * jQuery UI Effects Shake 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/shake-effect/\n */\n\n\nvar effectShake = $.effects.effect.shake = function( o, done ) {\n\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\n\t\tdirection = o.direction || \"left\",\n\t\tdistance = o.distance || 20,\n\t\ttimes = o.times || 3,\n\t\tanims = times * 2 + 1,\n\t\tspeed = Math.round( o.duration / anims ),\n\t\tref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\n\t\tpositiveMotion = (direction === \"up\" || direction === \"left\"),\n\t\tanimation = {},\n\t\tanimation1 = {},\n\t\tanimation2 = {},\n\t\ti,\n\n\t\t// we will need to re-assemble the queue to stack our animations in place\n\t\tqueue = el.queue(),\n\t\tqueuelen = queue.length;\n\n\t$.effects.save( el, props );\n\tel.show();\n\t$.effects.createWrapper( el );\n\n\t// Animation\n\tanimation[ ref ] = ( positiveMotion ? \"-=\" : \"+=\" ) + distance;\n\tanimation1[ ref ] = ( positiveMotion ? \"+=\" : \"-=\" ) + distance * 2;\n\tanimation2[ ref ] = ( positiveMotion ? \"-=\" : \"+=\" ) + distance * 2;\n\n\t// Animate\n\tel.animate( animation, speed, o.easing );\n\n\t// Shakes\n\tfor ( i = 1; i < times; i++ ) {\n\t\tel.animate( animation1, speed, o.easing ).animate( animation2, speed, o.easing );\n\t}\n\tel\n\t\t.animate( animation1, speed, o.easing )\n\t\t.animate( animation, speed / 2, o.easing )\n\t\t.queue(function() {\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t});\n\n\t// inject all the animations we just queued to be first in line (after \"inprogress\")\n\tif ( queuelen > 1) {\n\t\tqueue.splice.apply( queue,\n\t\t\t[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );\n\t}\n\tel.dequeue();\n\n};\n\n\n/*!\n * jQuery UI Effects Slide 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/slide-effect/\n */\n\n\nvar effectSlide = $.effects.effect.slide = function( o, done ) {\n\n\t// Create element\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"width\", \"height\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"show\" ),\n\t\tshow = mode === \"show\",\n\t\tdirection = o.direction || \"left\",\n\t\tref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\n\t\tpositiveMotion = (direction === \"up\" || direction === \"left\"),\n\t\tdistance,\n\t\tanimation = {};\n\n\t// Adjust\n\t$.effects.save( el, props );\n\tel.show();\n\tdistance = o.distance || el[ ref === \"top\" ? \"outerHeight\" : \"outerWidth\" ]( true );\n\n\t$.effects.createWrapper( el ).css({\n\t\toverflow: \"hidden\"\n\t});\n\n\tif ( show ) {\n\t\tel.css( ref, positiveMotion ? (isNaN(distance) ? \"-\" + distance : -distance) : distance );\n\t}\n\n\t// Animation\n\tanimation[ ref ] = ( show ?\n\t\t( positiveMotion ? \"+=\" : \"-=\") :\n\t\t( positiveMotion ? \"-=\" : \"+=\")) +\n\t\tdistance;\n\n\t// Animate\n\tel.animate( animation, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: function() {\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n};\n\n\n/*!\n * jQuery UI Effects Transfer 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/transfer-effect/\n */\n\n\nvar effectTransfer = $.effects.effect.transfer = function( o, done ) {\n\tvar elem = $( this ),\n\t\ttarget = $( o.to ),\n\t\ttargetFixed = target.css( \"position\" ) === \"fixed\",\n\t\tbody = $(\"body\"),\n\t\tfixTop = targetFixed ? body.scrollTop() : 0,\n\t\tfixLeft = targetFixed ? body.scrollLeft() : 0,\n\t\tendPosition = target.offset(),\n\t\tanimation = {\n\t\t\ttop: endPosition.top - fixTop,\n\t\t\tleft: endPosition.left - fixLeft,\n\t\t\theight: target.innerHeight(),\n\t\t\twidth: target.innerWidth()\n\t\t},\n\t\tstartPosition = elem.offset(),\n\t\ttransfer = $( \"<div class='ui-effects-transfer'></div>\" )\n\t\t\t.appendTo( document.body )\n\t\t\t.addClass( o.className )\n\t\t\t.css({\n\t\t\t\ttop: startPosition.top - fixTop,\n\t\t\t\tleft: startPosition.left - fixLeft,\n\t\t\t\theight: elem.innerHeight(),\n\t\t\t\twidth: elem.innerWidth(),\n\t\t\t\tposition: targetFixed ? \"fixed\" : \"absolute\"\n\t\t\t})\n\t\t\t.animate( animation, o.duration, o.easing, function() {\n\t\t\t\ttransfer.remove();\n\t\t\t\tdone();\n\t\t\t});\n};\n\n\n/*!\n * jQuery UI Progressbar 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/progressbar/\n */\n\n\nvar progressbar = $.widget( \"ui.progressbar\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tmax: 100,\n\t\tvalue: 0,\n\n\t\tchange: null,\n\t\tcomplete: null\n\t},\n\n\tmin: 0,\n\n\t_create: function() {\n\t\t// Constrain initial value\n\t\tthis.oldValue = this.options.value = this._constrainedValue();\n\n\t\tthis.element\n\t\t\t.addClass( \"ui-progressbar ui-widget ui-widget-content ui-corner-all\" )\n\t\t\t.attr({\n\t\t\t\t// Only set static values, aria-valuenow and aria-valuemax are\n\t\t\t\t// set inside _refreshValue()\n\t\t\t\trole: \"progressbar\",\n\t\t\t\t\"aria-valuemin\": this.min\n\t\t\t});\n\n\t\tthis.valueDiv = $( \"<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>\" )\n\t\t\t.appendTo( this.element );\n\n\t\tthis._refreshValue();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass( \"ui-progressbar ui-widget ui-widget-content ui-corner-all\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-valuemin\" )\n\t\t\t.removeAttr( \"aria-valuemax\" )\n\t\t\t.removeAttr( \"aria-valuenow\" );\n\n\t\tthis.valueDiv.remove();\n\t},\n\n\tvalue: function( newValue ) {\n\t\tif ( newValue === undefined ) {\n\t\t\treturn this.options.value;\n\t\t}\n\n\t\tthis.options.value = this._constrainedValue( newValue );\n\t\tthis._refreshValue();\n\t},\n\n\t_constrainedValue: function( newValue ) {\n\t\tif ( newValue === undefined ) {\n\t\t\tnewValue = this.options.value;\n\t\t}\n\n\t\tthis.indeterminate = newValue === false;\n\n\t\t// sanitize value\n\t\tif ( typeof newValue !== \"number\" ) {\n\t\t\tnewValue = 0;\n\t\t}\n\n\t\treturn this.indeterminate ? false :\n\t\t\tMath.min( this.options.max, Math.max( this.min, newValue ) );\n\t},\n\n\t_setOptions: function( options ) {\n\t\t// Ensure \"value\" option is set after other values (like max)\n\t\tvar value = options.value;\n\t\tdelete options.value;\n\n\t\tthis._super( options );\n\n\t\tthis.options.value = this._constrainedValue( value );\n\t\tthis._refreshValue();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"max\" ) {\n\t\t\t// Don't allow a max less than min\n\t\t\tvalue = Math.max( this.min, value );\n\t\t}\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.element\n\t\t\t\t.toggleClass( \"ui-state-disabled\", !!value )\n\t\t\t\t.attr( \"aria-disabled\", value );\n\t\t}\n\t\tthis._super( key, value );\n\t},\n\n\t_percentage: function() {\n\t\treturn this.indeterminate ? 100 : 100 * ( this.options.value - this.min ) / ( this.options.max - this.min );\n\t},\n\n\t_refreshValue: function() {\n\t\tvar value = this.options.value,\n\t\t\tpercentage = this._percentage();\n\n\t\tthis.valueDiv\n\t\t\t.toggle( this.indeterminate || value > this.min )\n\t\t\t.toggleClass( \"ui-corner-right\", value === this.options.max )\n\t\t\t.width( percentage.toFixed(0) + \"%\" );\n\n\t\tthis.element.toggleClass( \"ui-progressbar-indeterminate\", this.indeterminate );\n\n\t\tif ( this.indeterminate ) {\n\t\t\tthis.element.removeAttr( \"aria-valuenow\" );\n\t\t\tif ( !this.overlayDiv ) {\n\t\t\t\tthis.overlayDiv = $( \"<div class='ui-progressbar-overlay'></div>\" ).appendTo( this.valueDiv );\n\t\t\t}\n\t\t} else {\n\t\t\tthis.element.attr({\n\t\t\t\t\"aria-valuemax\": this.options.max,\n\t\t\t\t\"aria-valuenow\": value\n\t\t\t});\n\t\t\tif ( this.overlayDiv ) {\n\t\t\t\tthis.overlayDiv.remove();\n\t\t\t\tthis.overlayDiv = null;\n\t\t\t}\n\t\t}\n\n\t\tif ( this.oldValue !== value ) {\n\t\t\tthis.oldValue = value;\n\t\t\tthis._trigger( \"change\" );\n\t\t}\n\t\tif ( value === this.options.max ) {\n\t\t\tthis._trigger( \"complete\" );\n\t\t}\n\t}\n});\n\n\n/*!\n * jQuery UI Selectable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/selectable/\n */\n\n\nvar selectable = $.widget(\"ui.selectable\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tappendTo: \"body\",\n\t\tautoRefresh: true,\n\t\tdistance: 0,\n\t\tfilter: \"*\",\n\t\ttolerance: \"touch\",\n\n\t\t// callbacks\n\t\tselected: null,\n\t\tselecting: null,\n\t\tstart: null,\n\t\tstop: null,\n\t\tunselected: null,\n\t\tunselecting: null\n\t},\n\t_create: function() {\n\t\tvar selectees,\n\t\t\tthat = this;\n\n\t\tthis.element.addClass(\"ui-selectable\");\n\n\t\tthis.dragged = false;\n\n\t\t// cache selectee children based on filter\n\t\tthis.refresh = function() {\n\t\t\tselectees = $(that.options.filter, that.element[0]);\n\t\t\tselectees.addClass(\"ui-selectee\");\n\t\t\tselectees.each(function() {\n\t\t\t\tvar $this = $(this),\n\t\t\t\t\tpos = $this.offset();\n\t\t\t\t$.data(this, \"selectable-item\", {\n\t\t\t\t\telement: this,\n\t\t\t\t\t$element: $this,\n\t\t\t\t\tleft: pos.left,\n\t\t\t\t\ttop: pos.top,\n\t\t\t\t\tright: pos.left + $this.outerWidth(),\n\t\t\t\t\tbottom: pos.top + $this.outerHeight(),\n\t\t\t\t\tstartselected: false,\n\t\t\t\t\tselected: $this.hasClass(\"ui-selected\"),\n\t\t\t\t\tselecting: $this.hasClass(\"ui-selecting\"),\n\t\t\t\t\tunselecting: $this.hasClass(\"ui-unselecting\")\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\tthis.refresh();\n\n\t\tthis.selectees = selectees.addClass(\"ui-selectee\");\n\n\t\tthis._mouseInit();\n\n\t\tthis.helper = $(\"<div class='ui-selectable-helper'></div>\");\n\t},\n\n\t_destroy: function() {\n\t\tthis.selectees\n\t\t\t.removeClass(\"ui-selectee\")\n\t\t\t.removeData(\"selectable-item\");\n\t\tthis.element\n\t\t\t.removeClass(\"ui-selectable ui-selectable-disabled\");\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseStart: function(event) {\n\t\tvar that = this,\n\t\t\toptions = this.options;\n\n\t\tthis.opos = [ event.pageX, event.pageY ];\n\n\t\tif (this.options.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.selectees = $(options.filter, this.element[0]);\n\n\t\tthis._trigger(\"start\", event);\n\n\t\t$(options.appendTo).append(this.helper);\n\t\t// position helper (lasso)\n\t\tthis.helper.css({\n\t\t\t\"left\": event.pageX,\n\t\t\t\"top\": event.pageY,\n\t\t\t\"width\": 0,\n\t\t\t\"height\": 0\n\t\t});\n\n\t\tif (options.autoRefresh) {\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tthis.selectees.filter(\".ui-selected\").each(function() {\n\t\t\tvar selectee = $.data(this, \"selectable-item\");\n\t\t\tselectee.startselected = true;\n\t\t\tif (!event.metaKey && !event.ctrlKey) {\n\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\n\t\t\t\tselectee.selected = false;\n\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\n\t\t\t\tselectee.unselecting = true;\n\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t$(event.target).parents().addBack().each(function() {\n\t\t\tvar doSelect,\n\t\t\t\tselectee = $.data(this, \"selectable-item\");\n\t\t\tif (selectee) {\n\t\t\t\tdoSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass(\"ui-selected\");\n\t\t\t\tselectee.$element\n\t\t\t\t\t.removeClass(doSelect ? \"ui-unselecting\" : \"ui-selected\")\n\t\t\t\t\t.addClass(doSelect ? \"ui-selecting\" : \"ui-unselecting\");\n\t\t\t\tselectee.unselecting = !doSelect;\n\t\t\t\tselectee.selecting = doSelect;\n\t\t\t\tselectee.selected = doSelect;\n\t\t\t\t// selectable (UN)SELECTING callback\n\t\t\t\tif (doSelect) {\n\t\t\t\t\tthat._trigger(\"selecting\", event, {\n\t\t\t\t\t\tselecting: selectee.element\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t},\n\n\t_mouseDrag: function(event) {\n\n\t\tthis.dragged = true;\n\n\t\tif (this.options.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar tmp,\n\t\t\tthat = this,\n\t\t\toptions = this.options,\n\t\t\tx1 = this.opos[0],\n\t\t\ty1 = this.opos[1],\n\t\t\tx2 = event.pageX,\n\t\t\ty2 = event.pageY;\n\n\t\tif (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }\n\t\tif (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }\n\t\tthis.helper.css({ left: x1, top: y1, width: x2 - x1, height: y2 - y1 });\n\n\t\tthis.selectees.each(function() {\n\t\t\tvar selectee = $.data(this, \"selectable-item\"),\n\t\t\t\thit = false;\n\n\t\t\t//prevent helper from being selected if appendTo: selectable\n\t\t\tif (!selectee || selectee.element === that.element[0]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (options.tolerance === \"touch\") {\n\t\t\t\thit = ( !(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1) );\n\t\t\t} else if (options.tolerance === \"fit\") {\n\t\t\t\thit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);\n\t\t\t}\n\n\t\t\tif (hit) {\n\t\t\t\t// SELECT\n\t\t\t\tif (selectee.selected) {\n\t\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\n\t\t\t\t\tselectee.selected = false;\n\t\t\t\t}\n\t\t\t\tif (selectee.unselecting) {\n\t\t\t\t\tselectee.$element.removeClass(\"ui-unselecting\");\n\t\t\t\t\tselectee.unselecting = false;\n\t\t\t\t}\n\t\t\t\tif (!selectee.selecting) {\n\t\t\t\t\tselectee.$element.addClass(\"ui-selecting\");\n\t\t\t\t\tselectee.selecting = true;\n\t\t\t\t\t// selectable SELECTING callback\n\t\t\t\t\tthat._trigger(\"selecting\", event, {\n\t\t\t\t\t\tselecting: selectee.element\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// UNSELECT\n\t\t\t\tif (selectee.selecting) {\n\t\t\t\t\tif ((event.metaKey || event.ctrlKey) && selectee.startselected) {\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selecting\");\n\t\t\t\t\t\tselectee.selecting = false;\n\t\t\t\t\t\tselectee.$element.addClass(\"ui-selected\");\n\t\t\t\t\t\tselectee.selected = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selecting\");\n\t\t\t\t\t\tselectee.selecting = false;\n\t\t\t\t\t\tif (selectee.startselected) {\n\t\t\t\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\n\t\t\t\t\t\t\tselectee.unselecting = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectee.selected) {\n\t\t\t\t\tif (!event.metaKey && !event.ctrlKey && !selectee.startselected) {\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\n\t\t\t\t\t\tselectee.selected = false;\n\n\t\t\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\n\t\t\t\t\t\tselectee.unselecting = true;\n\t\t\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function(event) {\n\t\tvar that = this;\n\n\t\tthis.dragged = false;\n\n\t\t$(\".ui-unselecting\", this.element[0]).each(function() {\n\t\t\tvar selectee = $.data(this, \"selectable-item\");\n\t\t\tselectee.$element.removeClass(\"ui-unselecting\");\n\t\t\tselectee.unselecting = false;\n\t\t\tselectee.startselected = false;\n\t\t\tthat._trigger(\"unselected\", event, {\n\t\t\t\tunselected: selectee.element\n\t\t\t});\n\t\t});\n\t\t$(\".ui-selecting\", this.element[0]).each(function() {\n\t\t\tvar selectee = $.data(this, \"selectable-item\");\n\t\t\tselectee.$element.removeClass(\"ui-selecting\").addClass(\"ui-selected\");\n\t\t\tselectee.selecting = false;\n\t\t\tselectee.selected = true;\n\t\t\tselectee.startselected = true;\n\t\t\tthat._trigger(\"selected\", event, {\n\t\t\t\tselected: selectee.element\n\t\t\t});\n\t\t});\n\t\tthis._trigger(\"stop\", event);\n\n\t\tthis.helper.remove();\n\n\t\treturn false;\n\t}\n\n});\n\n\n/*!\n * jQuery UI Selectmenu 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/selectmenu\n */\n\n\nvar selectmenu = $.widget( \"ui.selectmenu\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<select>\",\n\toptions: {\n\t\tappendTo: null,\n\t\tdisabled: null,\n\t\ticons: {\n\t\t\tbutton: \"ui-icon-triangle-1-s\"\n\t\t},\n\t\tposition: {\n\t\t\tmy: \"left top\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"none\"\n\t\t},\n\t\twidth: null,\n\n\t\t// callbacks\n\t\tchange: null,\n\t\tclose: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tselect: null\n\t},\n\n\t_create: function() {\n\t\tvar selectmenuId = this.element.uniqueId().attr( \"id\" );\n\t\tthis.ids = {\n\t\t\telement: selectmenuId,\n\t\t\tbutton: selectmenuId + \"-button\",\n\t\t\tmenu: selectmenuId + \"-menu\"\n\t\t};\n\n\t\tthis._drawButton();\n\t\tthis._drawMenu();\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis.disable();\n\t\t}\n\t},\n\n\t_drawButton: function() {\n\t\tvar that = this;\n\n\t\t// Associate existing label with the new button\n\t\tthis.label = $( \"label[for='\" + this.ids.element + \"']\" ).attr( \"for\", this.ids.button );\n\t\tthis._on( this.label, {\n\t\t\tclick: function( event ) {\n\t\t\t\tthis.button.focus();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t});\n\n\t\t// Hide original select element\n\t\tthis.element.hide();\n\n\t\t// Create button\n\t\tthis.button = $( \"<span>\", {\n\t\t\t\"class\": \"ui-selectmenu-button ui-widget ui-state-default ui-corner-all\",\n\t\t\ttabindex: this.options.disabled ? -1 : 0,\n\t\t\tid: this.ids.button,\n\t\t\trole: \"combobox\",\n\t\t\t\"aria-expanded\": \"false\",\n\t\t\t\"aria-autocomplete\": \"list\",\n\t\t\t\"aria-owns\": this.ids.menu,\n\t\t\t\"aria-haspopup\": \"true\"\n\t\t})\n\t\t\t.insertAfter( this.element );\n\n\t\t$( \"<span>\", {\n\t\t\t\"class\": \"ui-icon \" + this.options.icons.button\n\t\t})\n\t\t\t.prependTo( this.button );\n\n\t\tthis.buttonText = $( \"<span>\", {\n\t\t\t\"class\": \"ui-selectmenu-text\"\n\t\t})\n\t\t\t.appendTo( this.button );\n\n\t\tthis._setText( this.buttonText, this.element.find( \"option:selected\" ).text() );\n\t\tthis._resizeButton();\n\n\t\tthis._on( this.button, this._buttonEvents );\n\t\tthis.button.one( \"focusin\", function() {\n\n\t\t\t// Delay rendering the menu items until the button receives focus.\n\t\t\t// The menu may have already been rendered via a programmatic open.\n\t\t\tif ( !that.menuItems ) {\n\t\t\t\tthat._refreshMenu();\n\t\t\t}\n\t\t});\n\t\tthis._hoverable( this.button );\n\t\tthis._focusable( this.button );\n\t},\n\n\t_drawMenu: function() {\n\t\tvar that = this;\n\n\t\t// Create menu\n\t\tthis.menu = $( \"<ul>\", {\n\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\"aria-labelledby\": this.ids.button,\n\t\t\tid: this.ids.menu\n\t\t});\n\n\t\t// Wrap menu\n\t\tthis.menuWrap = $( \"<div>\", {\n\t\t\t\"class\": \"ui-selectmenu-menu ui-front\"\n\t\t})\n\t\t\t.append( this.menu )\n\t\t\t.appendTo( this._appendTo() );\n\n\t\t// Initialize menu widget\n\t\tthis.menuInstance = this.menu\n\t\t\t.menu({\n\t\t\t\trole: \"listbox\",\n\t\t\t\tselect: function( event, ui ) {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t// support: IE8\n\t\t\t\t\t// If the item was selected via a click, the text selection\n\t\t\t\t\t// will be destroyed in IE\n\t\t\t\t\tthat._setSelection();\n\n\t\t\t\t\tthat._select( ui.item.data( \"ui-selectmenu-item\" ), event );\n\t\t\t\t},\n\t\t\t\tfocus: function( event, ui ) {\n\t\t\t\t\tvar item = ui.item.data( \"ui-selectmenu-item\" );\n\n\t\t\t\t\t// Prevent inital focus from firing and check if its a newly focused item\n\t\t\t\t\tif ( that.focusIndex != null && item.index !== that.focusIndex ) {\n\t\t\t\t\t\tthat._trigger( \"focus\", event, { item: item } );\n\t\t\t\t\t\tif ( !that.isOpen ) {\n\t\t\t\t\t\t\tthat._select( item, event );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthat.focusIndex = item.index;\n\n\t\t\t\t\tthat.button.attr( \"aria-activedescendant\",\n\t\t\t\t\t\tthat.menuItems.eq( item.index ).attr( \"id\" ) );\n\t\t\t\t}\n\t\t\t})\n\t\t\t.menu( \"instance\" );\n\n\t\t// Adjust menu styles to dropdown\n\t\tthis.menu\n\t\t\t.addClass( \"ui-corner-bottom\" )\n\t\t\t.removeClass( \"ui-corner-all\" );\n\n\t\t// Don't close the menu on mouseleave\n\t\tthis.menuInstance._off( this.menu, \"mouseleave\" );\n\n\t\t// Cancel the menu's collapseAll on document click\n\t\tthis.menuInstance._closeOnDocumentClick = function() {\n\t\t\treturn false;\n\t\t};\n\n\t\t// Selects often contain empty items, but never contain dividers\n\t\tthis.menuInstance._isDivider = function() {\n\t\t\treturn false;\n\t\t};\n\t},\n\n\trefresh: function() {\n\t\tthis._refreshMenu();\n\t\tthis._setText( this.buttonText, this._getSelectedItem().text() );\n\t\tif ( !this.options.width ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\t},\n\n\t_refreshMenu: function() {\n\t\tthis.menu.empty();\n\n\t\tvar item,\n\t\t\toptions = this.element.find( \"option\" );\n\n\t\tif ( !options.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._parseOptions( options );\n\t\tthis._renderMenu( this.menu, this.items );\n\n\t\tthis.menuInstance.refresh();\n\t\tthis.menuItems = this.menu.find( \"li\" ).not( \".ui-selectmenu-optgroup\" );\n\n\t\titem = this._getSelectedItem();\n\n\t\t// Update the menu to have the correct item focused\n\t\tthis.menuInstance.focus( null, item );\n\t\tthis._setAria( item.data( \"ui-selectmenu-item\" ) );\n\n\t\t// Set disabled state\n\t\tthis._setOption( \"disabled\", this.element.prop( \"disabled\" ) );\n\t},\n\n\topen: function( event ) {\n\t\tif ( this.options.disabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If this is the first time the menu is being opened, render the items\n\t\tif ( !this.menuItems ) {\n\t\t\tthis._refreshMenu();\n\t\t} else {\n\n\t\t\t// Menu clears focus on close, reset focus to selected item\n\t\t\tthis.menu.find( \".ui-state-focus\" ).removeClass( \"ui-state-focus\" );\n\t\t\tthis.menuInstance.focus( null, this._getSelectedItem() );\n\t\t}\n\n\t\tthis.isOpen = true;\n\t\tthis._toggleAttr();\n\t\tthis._resizeMenu();\n\t\tthis._position();\n\n\t\tthis._on( this.document, this._documentClick );\n\n\t\tthis._trigger( \"open\", event );\n\t},\n\n\t_position: function() {\n\t\tthis.menuWrap.position( $.extend( { of: this.button }, this.options.position ) );\n\t},\n\n\tclose: function( event ) {\n\t\tif ( !this.isOpen ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isOpen = false;\n\t\tthis._toggleAttr();\n\n\t\tthis.range = null;\n\t\tthis._off( this.document );\n\n\t\tthis._trigger( \"close\", event );\n\t},\n\n\twidget: function() {\n\t\treturn this.button;\n\t},\n\n\tmenuWidget: function() {\n\t\treturn this.menu;\n\t},\n\n\t_renderMenu: function( ul, items ) {\n\t\tvar that = this,\n\t\t\tcurrentOptgroup = \"\";\n\n\t\t$.each( items, function( index, item ) {\n\t\t\tif ( item.optgroup !== currentOptgroup ) {\n\t\t\t\t$( \"<li>\", {\n\t\t\t\t\t\"class\": \"ui-selectmenu-optgroup ui-menu-divider\" +\n\t\t\t\t\t\t( item.element.parent( \"optgroup\" ).prop( \"disabled\" ) ?\n\t\t\t\t\t\t\t\" ui-state-disabled\" :\n\t\t\t\t\t\t\t\"\" ),\n\t\t\t\t\ttext: item.optgroup\n\t\t\t\t})\n\t\t\t\t\t.appendTo( ul );\n\n\t\t\t\tcurrentOptgroup = item.optgroup;\n\t\t\t}\n\n\t\t\tthat._renderItemData( ul, item );\n\t\t});\n\t},\n\n\t_renderItemData: function( ul, item ) {\n\t\treturn this._renderItem( ul, item ).data( \"ui-selectmenu-item\", item );\n\t},\n\n\t_renderItem: function( ul, item ) {\n\t\tvar li = $( \"<li>\" );\n\n\t\tif ( item.disabled ) {\n\t\t\tli.addClass( \"ui-state-disabled\" );\n\t\t}\n\t\tthis._setText( li, item.label );\n\n\t\treturn li.appendTo( ul );\n\t},\n\n\t_setText: function( element, value ) {\n\t\tif ( value ) {\n\t\t\telement.text( value );\n\t\t} else {\n\t\t\telement.html( \"&#160;\" );\n\t\t}\n\t},\n\n\t_move: function( direction, event ) {\n\t\tvar item, next,\n\t\t\tfilter = \".ui-menu-item\";\n\n\t\tif ( this.isOpen ) {\n\t\t\titem = this.menuItems.eq( this.focusIndex );\n\t\t} else {\n\t\t\titem = this.menuItems.eq( this.element[ 0 ].selectedIndex );\n\t\t\tfilter += \":not(.ui-state-disabled)\";\n\t\t}\n\n\t\tif ( direction === \"first\" || direction === \"last\" ) {\n\t\t\tnext = item[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( filter ).eq( -1 );\n\t\t} else {\n\t\t\tnext = item[ direction + \"All\" ]( filter ).eq( 0 );\n\t\t}\n\n\t\tif ( next.length ) {\n\t\t\tthis.menuInstance.focus( event, next );\n\t\t}\n\t},\n\n\t_getSelectedItem: function() {\n\t\treturn this.menuItems.eq( this.element[ 0 ].selectedIndex );\n\t},\n\n\t_toggle: function( event ) {\n\t\tthis[ this.isOpen ? \"close\" : \"open\" ]( event );\n\t},\n\n\t_setSelection: function() {\n\t\tvar selection;\n\n\t\tif ( !this.range ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( window.getSelection ) {\n\t\t\tselection = window.getSelection();\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange( this.range );\n\n\t\t// support: IE8\n\t\t} else {\n\t\t\tthis.range.select();\n\t\t}\n\n\t\t// support: IE\n\t\t// Setting the text selection kills the button focus in IE, but\n\t\t// restoring the focus doesn't kill the selection.\n\t\tthis.button.focus();\n\t},\n\n\t_documentClick: {\n\t\tmousedown: function( event ) {\n\t\t\tif ( !this.isOpen ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !$( event.target ).closest( \".ui-selectmenu-menu, #\" + this.ids.button ).length ) {\n\t\t\t\tthis.close( event );\n\t\t\t}\n\t\t}\n\t},\n\n\t_buttonEvents: {\n\n\t\t// Prevent text selection from being reset when interacting with the selectmenu (#10144)\n\t\tmousedown: function() {\n\t\t\tvar selection;\n\n\t\t\tif ( window.getSelection ) {\n\t\t\t\tselection = window.getSelection();\n\t\t\t\tif ( selection.rangeCount ) {\n\t\t\t\t\tthis.range = selection.getRangeAt( 0 );\n\t\t\t\t}\n\n\t\t\t// support: IE8\n\t\t\t} else {\n\t\t\t\tthis.range = document.selection.createRange();\n\t\t\t}\n\t\t},\n\n\t\tclick: function( event ) {\n\t\t\tthis._setSelection();\n\t\t\tthis._toggle( event );\n\t\t},\n\n\t\tkeydown: function( event ) {\n\t\t\tvar preventDefault = true;\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase $.ui.keyCode.TAB:\n\t\t\t\tcase $.ui.keyCode.ESCAPE:\n\t\t\t\t\tthis.close( event );\n\t\t\t\t\tpreventDefault = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.ENTER:\n\t\t\t\t\tif ( this.isOpen ) {\n\t\t\t\t\t\tthis._selectFocusedItem( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\t\tif ( event.altKey ) {\n\t\t\t\t\t\tthis._toggle( event );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._move( \"prev\", event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\t\tif ( event.altKey ) {\n\t\t\t\t\t\tthis._toggle( event );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._move( \"next\", event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.SPACE:\n\t\t\t\t\tif ( this.isOpen ) {\n\t\t\t\t\t\tthis._selectFocusedItem( event );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._toggle( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\t\tthis._move( \"prev\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\t\tthis._move( \"next\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\t\tthis._move( \"first\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.END:\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\t\tthis._move( \"last\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.menu.trigger( event );\n\t\t\t\t\tpreventDefault = false;\n\t\t\t}\n\n\t\t\tif ( preventDefault ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t},\n\n\t_selectFocusedItem: function( event ) {\n\t\tvar item = this.menuItems.eq( this.focusIndex );\n\t\tif ( !item.hasClass( \"ui-state-disabled\" ) ) {\n\t\t\tthis._select( item.data( \"ui-selectmenu-item\" ), event );\n\t\t}\n\t},\n\n\t_select: function( item, event ) {\n\t\tvar oldIndex = this.element[ 0 ].selectedIndex;\n\n\t\t// Change native select element\n\t\tthis.element[ 0 ].selectedIndex = item.index;\n\t\tthis._setText( this.buttonText, item.label );\n\t\tthis._setAria( item );\n\t\tthis._trigger( \"select\", event, { item: item } );\n\n\t\tif ( item.index !== oldIndex ) {\n\t\t\tthis._trigger( \"change\", event, { item: item } );\n\t\t}\n\n\t\tthis.close( event );\n\t},\n\n\t_setAria: function( item ) {\n\t\tvar id = this.menuItems.eq( item.index ).attr( \"id\" );\n\n\t\tthis.button.attr({\n\t\t\t\"aria-labelledby\": id,\n\t\t\t\"aria-activedescendant\": id\n\t\t});\n\t\tthis.menu.attr( \"aria-activedescendant\", id );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icons\" ) {\n\t\t\tthis.button.find( \"span.ui-icon\" )\n\t\t\t\t.removeClass( this.options.icons.button )\n\t\t\t\t.addClass( value.button );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.menuWrap.appendTo( this._appendTo() );\n\t\t}\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.menuInstance.option( \"disabled\", value );\n\t\t\tthis.button\n\t\t\t\t.toggleClass( \"ui-state-disabled\", value )\n\t\t\t\t.attr( \"aria-disabled\", value );\n\n\t\t\tthis.element.prop( \"disabled\", value );\n\t\t\tif ( value ) {\n\t\t\t\tthis.button.attr( \"tabindex\", -1 );\n\t\t\t\tthis.close();\n\t\t\t} else {\n\t\t\t\tthis.button.attr( \"tabindex\", 0 );\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"width\" ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\n\t\tif ( element ) {\n\t\t\telement = element.jquery || element.nodeType ?\n\t\t\t\t$( element ) :\n\t\t\t\tthis.document.find( element ).eq( 0 );\n\t\t}\n\n\t\tif ( !element || !element[ 0 ] ) {\n\t\t\telement = this.element.closest( \".ui-front\" );\n\t\t}\n\n\t\tif ( !element.length ) {\n\t\t\telement = this.document[ 0 ].body;\n\t\t}\n\n\t\treturn element;\n\t},\n\n\t_toggleAttr: function() {\n\t\tthis.button\n\t\t\t.toggleClass( \"ui-corner-top\", this.isOpen )\n\t\t\t.toggleClass( \"ui-corner-all\", !this.isOpen )\n\t\t\t.attr( \"aria-expanded\", this.isOpen );\n\t\tthis.menuWrap.toggleClass( \"ui-selectmenu-open\", this.isOpen );\n\t\tthis.menu.attr( \"aria-hidden\", !this.isOpen );\n\t},\n\n\t_resizeButton: function() {\n\t\tvar width = this.options.width;\n\n\t\tif ( !width ) {\n\t\t\twidth = this.element.show().outerWidth();\n\t\t\tthis.element.hide();\n\t\t}\n\n\t\tthis.button.outerWidth( width );\n\t},\n\n\t_resizeMenu: function() {\n\t\tthis.menu.outerWidth( Math.max(\n\t\t\tthis.button.outerWidth(),\n\n\t\t\t// support: IE10\n\t\t\t// IE10 wraps long text (possibly a rounding bug)\n\t\t\t// so we add 1px to avoid the wrapping\n\t\t\tthis.menu.width( \"\" ).outerWidth() + 1\n\t\t) );\n\t},\n\n\t_getCreateOptions: function() {\n\t\treturn { disabled: this.element.prop( \"disabled\" ) };\n\t},\n\n\t_parseOptions: function( options ) {\n\t\tvar data = [];\n\t\toptions.each(function( index, item ) {\n\t\t\tvar option = $( item ),\n\t\t\t\toptgroup = option.parent( \"optgroup\" );\n\t\t\tdata.push({\n\t\t\t\telement: option,\n\t\t\t\tindex: index,\n\t\t\t\tvalue: option.val(),\n\t\t\t\tlabel: option.text(),\n\t\t\t\toptgroup: optgroup.attr( \"label\" ) || \"\",\n\t\t\t\tdisabled: optgroup.prop( \"disabled\" ) || option.prop( \"disabled\" )\n\t\t\t});\n\t\t});\n\t\tthis.items = data;\n\t},\n\n\t_destroy: function() {\n\t\tthis.menuWrap.remove();\n\t\tthis.button.remove();\n\t\tthis.element.show();\n\t\tthis.element.removeUniqueId();\n\t\tthis.label.attr( \"for\", this.ids.element );\n\t}\n});\n\n\n/*!\n * jQuery UI Slider 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/slider/\n */\n\n\nvar slider = $.widget( \"ui.slider\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"slide\",\n\n\toptions: {\n\t\tanimate: false,\n\t\tdistance: 0,\n\t\tmax: 100,\n\t\tmin: 0,\n\t\torientation: \"horizontal\",\n\t\trange: false,\n\t\tstep: 1,\n\t\tvalue: 0,\n\t\tvalues: null,\n\n\t\t// callbacks\n\t\tchange: null,\n\t\tslide: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t// number of pages in a slider\n\t// (how many times can you page up/down to go through the whole range)\n\tnumPages: 5,\n\n\t_create: function() {\n\t\tthis._keySliding = false;\n\t\tthis._mouseSliding = false;\n\t\tthis._animateOff = true;\n\t\tthis._handleIndex = null;\n\t\tthis._detectOrientation();\n\t\tthis._mouseInit();\n\t\tthis._calculateNewMax();\n\n\t\tthis.element\n\t\t\t.addClass( \"ui-slider\" +\n\t\t\t\t\" ui-slider-\" + this.orientation +\n\t\t\t\t\" ui-widget\" +\n\t\t\t\t\" ui-widget-content\" +\n\t\t\t\t\" ui-corner-all\");\n\n\t\tthis._refresh();\n\t\tthis._setOption( \"disabled\", this.options.disabled );\n\n\t\tthis._animateOff = false;\n\t},\n\n\t_refresh: function() {\n\t\tthis._createRange();\n\t\tthis._createHandles();\n\t\tthis._setupEvents();\n\t\tthis._refreshValue();\n\t},\n\n\t_createHandles: function() {\n\t\tvar i, handleCount,\n\t\t\toptions = this.options,\n\t\t\texistingHandles = this.element.find( \".ui-slider-handle\" ).addClass( \"ui-state-default ui-corner-all\" ),\n\t\t\thandle = \"<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>\",\n\t\t\thandles = [];\n\n\t\thandleCount = ( options.values && options.values.length ) || 1;\n\n\t\tif ( existingHandles.length > handleCount ) {\n\t\t\texistingHandles.slice( handleCount ).remove();\n\t\t\texistingHandles = existingHandles.slice( 0, handleCount );\n\t\t}\n\n\t\tfor ( i = existingHandles.length; i < handleCount; i++ ) {\n\t\t\thandles.push( handle );\n\t\t}\n\n\t\tthis.handles = existingHandles.add( $( handles.join( \"\" ) ).appendTo( this.element ) );\n\n\t\tthis.handle = this.handles.eq( 0 );\n\n\t\tthis.handles.each(function( i ) {\n\t\t\t$( this ).data( \"ui-slider-handle-index\", i );\n\t\t});\n\t},\n\n\t_createRange: function() {\n\t\tvar options = this.options,\n\t\t\tclasses = \"\";\n\n\t\tif ( options.range ) {\n\t\t\tif ( options.range === true ) {\n\t\t\t\tif ( !options.values ) {\n\t\t\t\t\toptions.values = [ this._valueMin(), this._valueMin() ];\n\t\t\t\t} else if ( options.values.length && options.values.length !== 2 ) {\n\t\t\t\t\toptions.values = [ options.values[0], options.values[0] ];\n\t\t\t\t} else if ( $.isArray( options.values ) ) {\n\t\t\t\t\toptions.values = options.values.slice(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !this.range || !this.range.length ) {\n\t\t\t\tthis.range = $( \"<div></div>\" )\n\t\t\t\t\t.appendTo( this.element );\n\n\t\t\t\tclasses = \"ui-slider-range\" +\n\t\t\t\t// note: this isn't the most fittingly semantic framework class for this element,\n\t\t\t\t// but worked best visually with a variety of themes\n\t\t\t\t\" ui-widget-header ui-corner-all\";\n\t\t\t} else {\n\t\t\t\tthis.range.removeClass( \"ui-slider-range-min ui-slider-range-max\" )\n\t\t\t\t\t// Handle range switching from true to min/max\n\t\t\t\t\t.css({\n\t\t\t\t\t\t\"left\": \"\",\n\t\t\t\t\t\t\"bottom\": \"\"\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.range.addClass( classes +\n\t\t\t\t( ( options.range === \"min\" || options.range === \"max\" ) ? \" ui-slider-range-\" + options.range : \"\" ) );\n\t\t} else {\n\t\t\tif ( this.range ) {\n\t\t\t\tthis.range.remove();\n\t\t\t}\n\t\t\tthis.range = null;\n\t\t}\n\t},\n\n\t_setupEvents: function() {\n\t\tthis._off( this.handles );\n\t\tthis._on( this.handles, this._handleEvents );\n\t\tthis._hoverable( this.handles );\n\t\tthis._focusable( this.handles );\n\t},\n\n\t_destroy: function() {\n\t\tthis.handles.remove();\n\t\tif ( this.range ) {\n\t\t\tthis.range.remove();\n\t\t}\n\n\t\tthis.element\n\t\t\t.removeClass( \"ui-slider\" +\n\t\t\t\t\" ui-slider-horizontal\" +\n\t\t\t\t\" ui-slider-vertical\" +\n\t\t\t\t\" ui-widget\" +\n\t\t\t\t\" ui-widget-content\" +\n\t\t\t\t\" ui-corner-all\" );\n\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseCapture: function( event ) {\n\t\tvar position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,\n\t\t\tthat = this,\n\t\t\to = this.options;\n\n\t\tif ( o.disabled ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.elementSize = {\n\t\t\twidth: this.element.outerWidth(),\n\t\t\theight: this.element.outerHeight()\n\t\t};\n\t\tthis.elementOffset = this.element.offset();\n\n\t\tposition = { x: event.pageX, y: event.pageY };\n\t\tnormValue = this._normValueFromMouse( position );\n\t\tdistance = this._valueMax() - this._valueMin() + 1;\n\t\tthis.handles.each(function( i ) {\n\t\t\tvar thisDistance = Math.abs( normValue - that.values(i) );\n\t\t\tif (( distance > thisDistance ) ||\n\t\t\t\t( distance === thisDistance &&\n\t\t\t\t\t(i === that._lastChangedValue || that.values(i) === o.min ))) {\n\t\t\t\tdistance = thisDistance;\n\t\t\t\tclosestHandle = $( this );\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tallowed = this._start( event, index );\n\t\tif ( allowed === false ) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._mouseSliding = true;\n\n\t\tthis._handleIndex = index;\n\n\t\tclosestHandle\n\t\t\t.addClass( \"ui-state-active\" )\n\t\t\t.focus();\n\n\t\toffset = closestHandle.offset();\n\t\tmouseOverHandle = !$( event.target ).parents().addBack().is( \".ui-slider-handle\" );\n\t\tthis._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {\n\t\t\tleft: event.pageX - offset.left - ( closestHandle.width() / 2 ),\n\t\t\ttop: event.pageY - offset.top -\n\t\t\t\t( closestHandle.height() / 2 ) -\n\t\t\t\t( parseInt( closestHandle.css(\"borderTopWidth\"), 10 ) || 0 ) -\n\t\t\t\t( parseInt( closestHandle.css(\"borderBottomWidth\"), 10 ) || 0) +\n\t\t\t\t( parseInt( closestHandle.css(\"marginTop\"), 10 ) || 0)\n\t\t};\n\n\t\tif ( !this.handles.hasClass( \"ui-state-hover\" ) ) {\n\t\t\tthis._slide( event, index, normValue );\n\t\t}\n\t\tthis._animateOff = true;\n\t\treturn true;\n\t},\n\n\t_mouseStart: function() {\n\t\treturn true;\n\t},\n\n\t_mouseDrag: function( event ) {\n\t\tvar position = { x: event.pageX, y: event.pageY },\n\t\t\tnormValue = this._normValueFromMouse( position );\n\n\t\tthis._slide( event, this._handleIndex, normValue );\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function( event ) {\n\t\tthis.handles.removeClass( \"ui-state-active\" );\n\t\tthis._mouseSliding = false;\n\n\t\tthis._stop( event, this._handleIndex );\n\t\tthis._change( event, this._handleIndex );\n\n\t\tthis._handleIndex = null;\n\t\tthis._clickOffset = null;\n\t\tthis._animateOff = false;\n\n\t\treturn false;\n\t},\n\n\t_detectOrientation: function() {\n\t\tthis.orientation = ( this.options.orientation === \"vertical\" ) ? \"vertical\" : \"horizontal\";\n\t},\n\n\t_normValueFromMouse: function( position ) {\n\t\tvar pixelTotal,\n\t\t\tpixelMouse,\n\t\t\tpercentMouse,\n\t\t\tvalueTotal,\n\t\t\tvalueMouse;\n\n\t\tif ( this.orientation === \"horizontal\" ) {\n\t\t\tpixelTotal = this.elementSize.width;\n\t\t\tpixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );\n\t\t} else {\n\t\t\tpixelTotal = this.elementSize.height;\n\t\t\tpixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );\n\t\t}\n\n\t\tpercentMouse = ( pixelMouse / pixelTotal );\n\t\tif ( percentMouse > 1 ) {\n\t\t\tpercentMouse = 1;\n\t\t}\n\t\tif ( percentMouse < 0 ) {\n\t\t\tpercentMouse = 0;\n\t\t}\n\t\tif ( this.orientation === \"vertical\" ) {\n\t\t\tpercentMouse = 1 - percentMouse;\n\t\t}\n\n\t\tvalueTotal = this._valueMax() - this._valueMin();\n\t\tvalueMouse = this._valueMin() + percentMouse * valueTotal;\n\n\t\treturn this._trimAlignValue( valueMouse );\n\t},\n\n\t_start: function( event, index ) {\n\t\tvar uiHash = {\n\t\t\thandle: this.handles[ index ],\n\t\t\tvalue: this.value()\n\t\t};\n\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\tuiHash.value = this.values( index );\n\t\t\tuiHash.values = this.values();\n\t\t}\n\t\treturn this._trigger( \"start\", event, uiHash );\n\t},\n\n\t_slide: function( event, index, newVal ) {\n\t\tvar otherVal,\n\t\t\tnewValues,\n\t\t\tallowed;\n\n\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\totherVal = this.values( index ? 0 : 1 );\n\n\t\t\tif ( ( this.options.values.length === 2 && this.options.range === true ) &&\n\t\t\t\t\t( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )\n\t\t\t\t) {\n\t\t\t\tnewVal = otherVal;\n\t\t\t}\n\n\t\t\tif ( newVal !== this.values( index ) ) {\n\t\t\t\tnewValues = this.values();\n\t\t\t\tnewValues[ index ] = newVal;\n\t\t\t\t// A slide can be canceled by returning false from the slide callback\n\t\t\t\tallowed = this._trigger( \"slide\", event, {\n\t\t\t\t\thandle: this.handles[ index ],\n\t\t\t\t\tvalue: newVal,\n\t\t\t\t\tvalues: newValues\n\t\t\t\t} );\n\t\t\t\totherVal = this.values( index ? 0 : 1 );\n\t\t\t\tif ( allowed !== false ) {\n\t\t\t\t\tthis.values( index, newVal );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif ( newVal !== this.value() ) {\n\t\t\t\t// A slide can be canceled by returning false from the slide callback\n\t\t\t\tallowed = this._trigger( \"slide\", event, {\n\t\t\t\t\thandle: this.handles[ index ],\n\t\t\t\t\tvalue: newVal\n\t\t\t\t} );\n\t\t\t\tif ( allowed !== false ) {\n\t\t\t\t\tthis.value( newVal );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_stop: function( event, index ) {\n\t\tvar uiHash = {\n\t\t\thandle: this.handles[ index ],\n\t\t\tvalue: this.value()\n\t\t};\n\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\tuiHash.value = this.values( index );\n\t\t\tuiHash.values = this.values();\n\t\t}\n\n\t\tthis._trigger( \"stop\", event, uiHash );\n\t},\n\n\t_change: function( event, index ) {\n\t\tif ( !this._keySliding && !this._mouseSliding ) {\n\t\t\tvar uiHash = {\n\t\t\t\thandle: this.handles[ index ],\n\t\t\t\tvalue: this.value()\n\t\t\t};\n\t\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\t\tuiHash.value = this.values( index );\n\t\t\t\tuiHash.values = this.values();\n\t\t\t}\n\n\t\t\t//store the last changed value index for reference when handles overlap\n\t\t\tthis._lastChangedValue = index;\n\n\t\t\tthis._trigger( \"change\", event, uiHash );\n\t\t}\n\t},\n\n\tvalue: function( newValue ) {\n\t\tif ( arguments.length ) {\n\t\t\tthis.options.value = this._trimAlignValue( newValue );\n\t\t\tthis._refreshValue();\n\t\t\tthis._change( null, 0 );\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._value();\n\t},\n\n\tvalues: function( index, newValue ) {\n\t\tvar vals,\n\t\t\tnewValues,\n\t\t\ti;\n\n\t\tif ( arguments.length > 1 ) {\n\t\t\tthis.options.values[ index ] = this._trimAlignValue( newValue );\n\t\t\tthis._refreshValue();\n\t\t\tthis._change( null, index );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( arguments.length ) {\n\t\t\tif ( $.isArray( arguments[ 0 ] ) ) {\n\t\t\t\tvals = this.options.values;\n\t\t\t\tnewValues = arguments[ 0 ];\n\t\t\t\tfor ( i = 0; i < vals.length; i += 1 ) {\n\t\t\t\t\tvals[ i ] = this._trimAlignValue( newValues[ i ] );\n\t\t\t\t\tthis._change( null, i );\n\t\t\t\t}\n\t\t\t\tthis._refreshValue();\n\t\t\t} else {\n\t\t\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\t\t\treturn this._values( index );\n\t\t\t\t} else {\n\t\t\t\t\treturn this.value();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn this._values();\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar i,\n\t\t\tvalsLength = 0;\n\n\t\tif ( key === \"range\" && this.options.range === true ) {\n\t\t\tif ( value === \"min\" ) {\n\t\t\t\tthis.options.value = this._values( 0 );\n\t\t\t\tthis.options.values = null;\n\t\t\t} else if ( value === \"max\" ) {\n\t\t\t\tthis.options.value = this._values( this.options.values.length - 1 );\n\t\t\t\tthis.options.values = null;\n\t\t\t}\n\t\t}\n\n\t\tif ( $.isArray( this.options.values ) ) {\n\t\t\tvalsLength = this.options.values.length;\n\t\t}\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.element.toggleClass( \"ui-state-disabled\", !!value );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tswitch ( key ) {\n\t\t\tcase \"orientation\":\n\t\t\t\tthis._detectOrientation();\n\t\t\t\tthis.element\n\t\t\t\t\t.removeClass( \"ui-slider-horizontal ui-slider-vertical\" )\n\t\t\t\t\t.addClass( \"ui-slider-\" + this.orientation );\n\t\t\t\tthis._refreshValue();\n\n\t\t\t\t// Reset positioning from previous orientation\n\t\t\t\tthis.handles.css( value === \"horizontal\" ? \"bottom\" : \"left\", \"\" );\n\t\t\t\tbreak;\n\t\t\tcase \"value\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._refreshValue();\n\t\t\t\tthis._change( null, 0 );\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t\tcase \"values\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._refreshValue();\n\t\t\t\tfor ( i = 0; i < valsLength; i += 1 ) {\n\t\t\t\t\tthis._change( null, i );\n\t\t\t\t}\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t\tcase \"step\":\n\t\t\tcase \"min\":\n\t\t\tcase \"max\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._calculateNewMax();\n\t\t\t\tthis._refreshValue();\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t\tcase \"range\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._refresh();\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\t//internal value getter\n\t// _value() returns value trimmed by min and max, aligned by step\n\t_value: function() {\n\t\tvar val = this.options.value;\n\t\tval = this._trimAlignValue( val );\n\n\t\treturn val;\n\t},\n\n\t//internal values getter\n\t// _values() returns array of values trimmed by min and max, aligned by step\n\t// _values( index ) returns single value trimmed by min and max, aligned by step\n\t_values: function( index ) {\n\t\tvar val,\n\t\t\tvals,\n\t\t\ti;\n\n\t\tif ( arguments.length ) {\n\t\t\tval = this.options.values[ index ];\n\t\t\tval = this._trimAlignValue( val );\n\n\t\t\treturn val;\n\t\t} else if ( this.options.values && this.options.values.length ) {\n\t\t\t// .slice() creates a copy of the array\n\t\t\t// this copy gets trimmed by min and max and then returned\n\t\t\tvals = this.options.values.slice();\n\t\t\tfor ( i = 0; i < vals.length; i += 1) {\n\t\t\t\tvals[ i ] = this._trimAlignValue( vals[ i ] );\n\t\t\t}\n\n\t\t\treturn vals;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t},\n\n\t// returns the step-aligned value that val is closest to, between (inclusive) min and max\n\t_trimAlignValue: function( val ) {\n\t\tif ( val <= this._valueMin() ) {\n\t\t\treturn this._valueMin();\n\t\t}\n\t\tif ( val >= this._valueMax() ) {\n\t\t\treturn this._valueMax();\n\t\t}\n\t\tvar step = ( this.options.step > 0 ) ? this.options.step : 1,\n\t\t\tvalModStep = (val - this._valueMin()) % step,\n\t\t\talignValue = val - valModStep;\n\n\t\tif ( Math.abs(valModStep) * 2 >= step ) {\n\t\t\talignValue += ( valModStep > 0 ) ? step : ( -step );\n\t\t}\n\n\t\t// Since JavaScript has problems with large floats, round\n\t\t// the final value to 5 digits after the decimal point (see #4124)\n\t\treturn parseFloat( alignValue.toFixed(5) );\n\t},\n\n\t_calculateNewMax: function() {\n\t\tvar max = this.options.max,\n\t\t\tmin = this._valueMin(),\n\t\t\tstep = this.options.step,\n\t\t\taboveMin = Math.floor( ( +( max - min ).toFixed( this._precision() ) ) / step ) * step;\n\t\tmax = aboveMin + min;\n\t\tthis.max = parseFloat( max.toFixed( this._precision() ) );\n\t},\n\n\t_precision: function() {\n\t\tvar precision = this._precisionOf( this.options.step );\n\t\tif ( this.options.min !== null ) {\n\t\t\tprecision = Math.max( precision, this._precisionOf( this.options.min ) );\n\t\t}\n\t\treturn precision;\n\t},\n\n\t_precisionOf: function( num ) {\n\t\tvar str = num.toString(),\n\t\t\tdecimal = str.indexOf( \".\" );\n\t\treturn decimal === -1 ? 0 : str.length - decimal - 1;\n\t},\n\n\t_valueMin: function() {\n\t\treturn this.options.min;\n\t},\n\n\t_valueMax: function() {\n\t\treturn this.max;\n\t},\n\n\t_refreshValue: function() {\n\t\tvar lastValPercent, valPercent, value, valueMin, valueMax,\n\t\t\toRange = this.options.range,\n\t\t\to = this.options,\n\t\t\tthat = this,\n\t\t\tanimate = ( !this._animateOff ) ? o.animate : false,\n\t\t\t_set = {};\n\n\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\tthis.handles.each(function( i ) {\n\t\t\t\tvalPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;\n\t\t\t\t_set[ that.orientation === \"horizontal\" ? \"left\" : \"bottom\" ] = valPercent + \"%\";\n\t\t\t\t$( this ).stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( _set, o.animate );\n\t\t\t\tif ( that.options.range === true ) {\n\t\t\t\t\tif ( that.orientation === \"horizontal\" ) {\n\t\t\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t\t\tthat.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { left: valPercent + \"%\" }, o.animate );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( i === 1 ) {\n\t\t\t\t\t\t\tthat.range[ animate ? \"animate\" : \"css\" ]( { width: ( valPercent - lastValPercent ) + \"%\" }, { queue: false, duration: o.animate } );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t\t\tthat.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { bottom: ( valPercent ) + \"%\" }, o.animate );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( i === 1 ) {\n\t\t\t\t\t\t\tthat.range[ animate ? \"animate\" : \"css\" ]( { height: ( valPercent - lastValPercent ) + \"%\" }, { queue: false, duration: o.animate } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlastValPercent = valPercent;\n\t\t\t});\n\t\t} else {\n\t\t\tvalue = this.value();\n\t\t\tvalueMin = this._valueMin();\n\t\t\tvalueMax = this._valueMax();\n\t\t\tvalPercent = ( valueMax !== valueMin ) ?\n\t\t\t\t\t( value - valueMin ) / ( valueMax - valueMin ) * 100 :\n\t\t\t\t\t0;\n\t\t\t_set[ this.orientation === \"horizontal\" ? \"left\" : \"bottom\" ] = valPercent + \"%\";\n\t\t\tthis.handle.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( _set, o.animate );\n\n\t\t\tif ( oRange === \"min\" && this.orientation === \"horizontal\" ) {\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { width: valPercent + \"%\" }, o.animate );\n\t\t\t}\n\t\t\tif ( oRange === \"max\" && this.orientation === \"horizontal\" ) {\n\t\t\t\tthis.range[ animate ? \"animate\" : \"css\" ]( { width: ( 100 - valPercent ) + \"%\" }, { queue: false, duration: o.animate } );\n\t\t\t}\n\t\t\tif ( oRange === \"min\" && this.orientation === \"vertical\" ) {\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { height: valPercent + \"%\" }, o.animate );\n\t\t\t}\n\t\t\tif ( oRange === \"max\" && this.orientation === \"vertical\" ) {\n\t\t\t\tthis.range[ animate ? \"animate\" : \"css\" ]( { height: ( 100 - valPercent ) + \"%\" }, { queue: false, duration: o.animate } );\n\t\t\t}\n\t\t}\n\t},\n\n\t_handleEvents: {\n\t\tkeydown: function( event ) {\n\t\t\tvar allowed, curVal, newVal, step,\n\t\t\t\tindex = $( event.target ).data( \"ui-slider-handle-index\" );\n\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\tcase $.ui.keyCode.END:\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif ( !this._keySliding ) {\n\t\t\t\t\t\tthis._keySliding = true;\n\t\t\t\t\t\t$( event.target ).addClass( \"ui-state-active\" );\n\t\t\t\t\t\tallowed = this._start( event, index );\n\t\t\t\t\t\tif ( allowed === false ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tstep = this.options.step;\n\t\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\t\tcurVal = newVal = this.values( index );\n\t\t\t} else {\n\t\t\t\tcurVal = newVal = this.value();\n\t\t\t}\n\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\t\tnewVal = this._valueMin();\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.END:\n\t\t\t\t\tnewVal = this._valueMax();\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\t\tnewVal = this._trimAlignValue(\n\t\t\t\t\t\tcurVal + ( ( this._valueMax() - this._valueMin() ) / this.numPages )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\t\tnewVal = this._trimAlignValue(\n\t\t\t\t\t\tcurVal - ( (this._valueMax() - this._valueMin()) / this.numPages ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\t\tif ( curVal === this._valueMax() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal + step );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\t\tif ( curVal === this._valueMin() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal - step );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis._slide( event, index, newVal );\n\t\t},\n\t\tkeyup: function( event ) {\n\t\t\tvar index = $( event.target ).data( \"ui-slider-handle-index\" );\n\n\t\t\tif ( this._keySliding ) {\n\t\t\t\tthis._keySliding = false;\n\t\t\t\tthis._stop( event, index );\n\t\t\t\tthis._change( event, index );\n\t\t\t\t$( event.target ).removeClass( \"ui-state-active\" );\n\t\t\t}\n\t\t}\n\t}\n});\n\n\n/*!\n * jQuery UI Sortable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/sortable/\n */\n\n\nvar sortable = $.widget(\"ui.sortable\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"sort\",\n\tready: false,\n\toptions: {\n\t\tappendTo: \"parent\",\n\t\taxis: false,\n\t\tconnectWith: false,\n\t\tcontainment: false,\n\t\tcursor: \"auto\",\n\t\tcursorAt: false,\n\t\tdropOnEmpty: true,\n\t\tforcePlaceholderSize: false,\n\t\tforceHelperSize: false,\n\t\tgrid: false,\n\t\thandle: false,\n\t\thelper: \"original\",\n\t\titems: \"> *\",\n\t\topacity: false,\n\t\tplaceholder: false,\n\t\trevert: false,\n\t\tscroll: true,\n\t\tscrollSensitivity: 20,\n\t\tscrollSpeed: 20,\n\t\tscope: \"default\",\n\t\ttolerance: \"intersect\",\n\t\tzIndex: 1000,\n\n\t\t// callbacks\n\t\tactivate: null,\n\t\tbeforeStop: null,\n\t\tchange: null,\n\t\tdeactivate: null,\n\t\tout: null,\n\t\tover: null,\n\t\treceive: null,\n\t\tremove: null,\n\t\tsort: null,\n\t\tstart: null,\n\t\tstop: null,\n\t\tupdate: null\n\t},\n\n\t_isOverAxis: function( x, reference, size ) {\n\t\treturn ( x >= reference ) && ( x < ( reference + size ) );\n\t},\n\n\t_isFloating: function( item ) {\n\t\treturn (/left|right/).test(item.css(\"float\")) || (/inline|table-cell/).test(item.css(\"display\"));\n\t},\n\n\t_create: function() {\n\t\tthis.containerCache = {};\n\t\tthis.element.addClass(\"ui-sortable\");\n\n\t\t//Get the items\n\t\tthis.refresh();\n\n\t\t//Let's determine the parent's offset\n\t\tthis.offset = this.element.offset();\n\n\t\t//Initialize mouse events for interaction\n\t\tthis._mouseInit();\n\n\t\tthis._setHandleClassName();\n\n\t\t//We're ready to go\n\t\tthis.ready = true;\n\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"handle\" ) {\n\t\t\tthis._setHandleClassName();\n\t\t}\n\t},\n\n\t_setHandleClassName: function() {\n\t\tthis.element.find( \".ui-sortable-handle\" ).removeClass( \"ui-sortable-handle\" );\n\t\t$.each( this.items, function() {\n\t\t\t( this.instance.options.handle ?\n\t\t\t\tthis.item.find( this.instance.options.handle ) : this.item )\n\t\t\t\t.addClass( \"ui-sortable-handle\" );\n\t\t});\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass( \"ui-sortable ui-sortable-disabled\" )\n\t\t\t.find( \".ui-sortable-handle\" )\n\t\t\t\t.removeClass( \"ui-sortable-handle\" );\n\t\tthis._mouseDestroy();\n\n\t\tfor ( var i = this.items.length - 1; i >= 0; i-- ) {\n\t\t\tthis.items[i].item.removeData(this.widgetName + \"-item\");\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_mouseCapture: function(event, overrideHandle) {\n\t\tvar currentItem = null,\n\t\t\tvalidHandle = false,\n\t\t\tthat = this;\n\n\t\tif (this.reverting) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.options.disabled || this.options.type === \"static\") {\n\t\t\treturn false;\n\t\t}\n\n\t\t//We have to refresh the items data once first\n\t\tthis._refreshItems(event);\n\n\t\t//Find out if the clicked node (or one of its parents) is a actual item in this.items\n\t\t$(event.target).parents().each(function() {\n\t\t\tif($.data(this, that.widgetName + \"-item\") === that) {\n\t\t\t\tcurrentItem = $(this);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tif($.data(event.target, that.widgetName + \"-item\") === that) {\n\t\t\tcurrentItem = $(event.target);\n\t\t}\n\n\t\tif(!currentItem) {\n\t\t\treturn false;\n\t\t}\n\t\tif(this.options.handle && !overrideHandle) {\n\t\t\t$(this.options.handle, currentItem).find(\"*\").addBack().each(function() {\n\t\t\t\tif(this === event.target) {\n\t\t\t\t\tvalidHandle = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(!validHandle) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis.currentItem = currentItem;\n\t\tthis._removeCurrentsFromItems();\n\t\treturn true;\n\n\t},\n\n\t_mouseStart: function(event, overrideHandle, noActivation) {\n\n\t\tvar i, body,\n\t\t\to = this.options;\n\n\t\tthis.currentContainer = this;\n\n\t\t//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture\n\t\tthis.refreshPositions();\n\n\t\t//Create and append the visible helper\n\t\tthis.helper = this._createHelper(event);\n\n\t\t//Cache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t/*\n\t\t * - Position generation -\n\t\t * This block generates everything position related - it's the core of draggables.\n\t\t */\n\n\t\t//Cache the margins of the original element\n\t\tthis._cacheMargins();\n\n\t\t//Get the next scrolling parent\n\t\tthis.scrollParent = this.helper.scrollParent();\n\n\t\t//The element's absolute position on the page minus margins\n\t\tthis.offset = this.currentItem.offset();\n\t\tthis.offset = {\n\t\t\ttop: this.offset.top - this.margins.top,\n\t\t\tleft: this.offset.left - this.margins.left\n\t\t};\n\n\t\t$.extend(this.offset, {\n\t\t\tclick: { //Where the click happened, relative to the element\n\t\t\t\tleft: event.pageX - this.offset.left,\n\t\t\t\ttop: event.pageY - this.offset.top\n\t\t\t},\n\t\t\tparent: this._getParentOffset(),\n\t\t\trelative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper\n\t\t});\n\n\t\t// Only after we got the offset, we can change the helper's position to absolute\n\t\t// TODO: Still need to figure out a way to make relative sorting possible\n\t\tthis.helper.css(\"position\", \"absolute\");\n\t\tthis.cssPosition = this.helper.css(\"position\");\n\n\t\t//Generate the original position\n\t\tthis.originalPosition = this._generatePosition(event);\n\t\tthis.originalPageX = event.pageX;\n\t\tthis.originalPageY = event.pageY;\n\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\n\t\t(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\n\n\t\t//Cache the former DOM position\n\t\tthis.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };\n\n\t\t//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way\n\t\tif(this.helper[0] !== this.currentItem[0]) {\n\t\t\tthis.currentItem.hide();\n\t\t}\n\n\t\t//Create the placeholder\n\t\tthis._createPlaceholder();\n\n\t\t//Set a containment if given in the options\n\t\tif(o.containment) {\n\t\t\tthis._setContainment();\n\t\t}\n\n\t\tif( o.cursor && o.cursor !== \"auto\" ) { // cursor option\n\t\t\tbody = this.document.find( \"body\" );\n\n\t\t\t// support: IE\n\t\t\tthis.storedCursor = body.css( \"cursor\" );\n\t\t\tbody.css( \"cursor\", o.cursor );\n\n\t\t\tthis.storedStylesheet = $( \"<style>*{ cursor: \"+o.cursor+\" !important; }</style>\" ).appendTo( body );\n\t\t}\n\n\t\tif(o.opacity) { // opacity option\n\t\t\tif (this.helper.css(\"opacity\")) {\n\t\t\t\tthis._storedOpacity = this.helper.css(\"opacity\");\n\t\t\t}\n\t\t\tthis.helper.css(\"opacity\", o.opacity);\n\t\t}\n\n\t\tif(o.zIndex) { // zIndex option\n\t\t\tif (this.helper.css(\"zIndex\")) {\n\t\t\t\tthis._storedZIndex = this.helper.css(\"zIndex\");\n\t\t\t}\n\t\t\tthis.helper.css(\"zIndex\", o.zIndex);\n\t\t}\n\n\t\t//Prepare scrolling\n\t\tif(this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== \"HTML\") {\n\t\t\tthis.overflowOffset = this.scrollParent.offset();\n\t\t}\n\n\t\t//Call callbacks\n\t\tthis._trigger(\"start\", event, this._uiHash());\n\n\t\t//Recache the helper size\n\t\tif(!this._preserveHelperProportions) {\n\t\t\tthis._cacheHelperProportions();\n\t\t}\n\n\n\t\t//Post \"activate\" events to possible containers\n\t\tif( !noActivation ) {\n\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\n\t\t\t\tthis.containers[ i ]._trigger( \"activate\", event, this._uiHash( this ) );\n\t\t\t}\n\t\t}\n\n\t\t//Prepare possible droppables\n\t\tif($.ui.ddmanager) {\n\t\t\t$.ui.ddmanager.current = this;\n\t\t}\n\n\t\tif ($.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\t\t}\n\n\t\tthis.dragging = true;\n\n\t\tthis.helper.addClass(\"ui-sortable-helper\");\n\t\tthis._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position\n\t\treturn true;\n\n\t},\n\n\t_mouseDrag: function(event) {\n\t\tvar i, item, itemElement, intersection,\n\t\t\to = this.options,\n\t\t\tscrolled = false;\n\n\t\t//Compute the helpers position\n\t\tthis.position = this._generatePosition(event);\n\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\n\n\t\tif (!this.lastPositionAbs) {\n\t\t\tthis.lastPositionAbs = this.positionAbs;\n\t\t}\n\n\t\t//Do scrolling\n\t\tif(this.options.scroll) {\n\t\t\tif(this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== \"HTML\") {\n\n\t\t\t\tif((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {\n\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;\n\t\t\t\t} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {\n\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;\n\t\t\t\t}\n\n\t\t\t\tif((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {\n\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;\n\t\t\t\t} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {\n\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif(event.pageY - this.document.scrollTop() < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = this.document.scrollTop(this.document.scrollTop() - o.scrollSpeed);\n\t\t\t\t} else if(this.window.height() - (event.pageY - this.document.scrollTop()) < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = this.document.scrollTop(this.document.scrollTop() + o.scrollSpeed);\n\t\t\t\t}\n\n\t\t\t\tif(event.pageX - this.document.scrollLeft() < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = this.document.scrollLeft(this.document.scrollLeft() - o.scrollSpeed);\n\t\t\t\t} else if(this.window.width() - (event.pageX - this.document.scrollLeft()) < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = this.document.scrollLeft(this.document.scrollLeft() + o.scrollSpeed);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\t\t\t}\n\t\t}\n\n\t\t//Regenerate the absolute position used for position checks\n\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\n\n\t\t//Set the helper position\n\t\tif(!this.options.axis || this.options.axis !== \"y\") {\n\t\t\tthis.helper[0].style.left = this.position.left+\"px\";\n\t\t}\n\t\tif(!this.options.axis || this.options.axis !== \"x\") {\n\t\t\tthis.helper[0].style.top = this.position.top+\"px\";\n\t\t}\n\n\t\t//Rearrange\n\t\tfor (i = this.items.length - 1; i >= 0; i--) {\n\n\t\t\t//Cache variables and intersection, continue if no intersection\n\t\t\titem = this.items[i];\n\t\t\titemElement = item.item[0];\n\t\t\tintersection = this._intersectsWithPointer(item);\n\t\t\tif (!intersection) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Only put the placeholder inside the current Container, skip all\n\t\t\t// items from other containers. This works because when moving\n\t\t\t// an item from one container to another the\n\t\t\t// currentContainer is switched before the placeholder is moved.\n\t\t\t//\n\t\t\t// Without this, moving items in \"sub-sortables\" can cause\n\t\t\t// the placeholder to jitter between the outer and inner container.\n\t\t\tif (item.instance !== this.currentContainer) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// cannot intersect with itself\n\t\t\t// no useless actions that have been done before\n\t\t\t// no action if the item moved is the parent of the item checked\n\t\t\tif (itemElement !== this.currentItem[0] &&\n\t\t\t\tthis.placeholder[intersection === 1 ? \"next\" : \"prev\"]()[0] !== itemElement &&\n\t\t\t\t!$.contains(this.placeholder[0], itemElement) &&\n\t\t\t\t(this.options.type === \"semi-dynamic\" ? !$.contains(this.element[0], itemElement) : true)\n\t\t\t) {\n\n\t\t\t\tthis.direction = intersection === 1 ? \"down\" : \"up\";\n\n\t\t\t\tif (this.options.tolerance === \"pointer\" || this._intersectsWithSides(item)) {\n\t\t\t\t\tthis._rearrange(event, item);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tthis._trigger(\"change\", event, this._uiHash());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t//Post events to containers\n\t\tthis._contactContainers(event);\n\n\t\t//Interconnect with droppables\n\t\tif($.ui.ddmanager) {\n\t\t\t$.ui.ddmanager.drag(this, event);\n\t\t}\n\n\t\t//Call callbacks\n\t\tthis._trigger(\"sort\", event, this._uiHash());\n\n\t\tthis.lastPositionAbs = this.positionAbs;\n\t\treturn false;\n\n\t},\n\n\t_mouseStop: function(event, noPropagation) {\n\n\t\tif(!event) {\n\t\t\treturn;\n\t\t}\n\n\t\t//If we are using droppables, inform the manager about the drop\n\t\tif ($.ui.ddmanager && !this.options.dropBehaviour) {\n\t\t\t$.ui.ddmanager.drop(this, event);\n\t\t}\n\n\t\tif(this.options.revert) {\n\t\t\tvar that = this,\n\t\t\t\tcur = this.placeholder.offset(),\n\t\t\t\taxis = this.options.axis,\n\t\t\t\tanimation = {};\n\n\t\t\tif ( !axis || axis === \"x\" ) {\n\t\t\t\tanimation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft);\n\t\t\t}\n\t\t\tif ( !axis || axis === \"y\" ) {\n\t\t\t\tanimation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop);\n\t\t\t}\n\t\t\tthis.reverting = true;\n\t\t\t$(this.helper).animate( animation, parseInt(this.options.revert, 10) || 500, function() {\n\t\t\t\tthat._clear(event);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._clear(event, noPropagation);\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tcancel: function() {\n\n\t\tif(this.dragging) {\n\n\t\t\tthis._mouseUp({ target: null });\n\n\t\t\tif(this.options.helper === \"original\") {\n\t\t\t\tthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\n\t\t\t} else {\n\t\t\t\tthis.currentItem.show();\n\t\t\t}\n\n\t\t\t//Post deactivating events to containers\n\t\t\tfor (var i = this.containers.length - 1; i >= 0; i--){\n\t\t\t\tthis.containers[i]._trigger(\"deactivate\", null, this._uiHash(this));\n\t\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\t\tthis.containers[i]._trigger(\"out\", null, this._uiHash(this));\n\t\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (this.placeholder) {\n\t\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\n\t\t\tif(this.placeholder[0].parentNode) {\n\t\t\t\tthis.placeholder[0].parentNode.removeChild(this.placeholder[0]);\n\t\t\t}\n\t\t\tif(this.options.helper !== \"original\" && this.helper && this.helper[0].parentNode) {\n\t\t\t\tthis.helper.remove();\n\t\t\t}\n\n\t\t\t$.extend(this, {\n\t\t\t\thelper: null,\n\t\t\t\tdragging: false,\n\t\t\t\treverting: false,\n\t\t\t\t_noFinalSort: null\n\t\t\t});\n\n\t\t\tif(this.domPosition.prev) {\n\t\t\t\t$(this.domPosition.prev).after(this.currentItem);\n\t\t\t} else {\n\t\t\t\t$(this.domPosition.parent).prepend(this.currentItem);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tserialize: function(o) {\n\n\t\tvar items = this._getItemsAsjQuery(o && o.connected),\n\t\t\tstr = [];\n\t\to = o || {};\n\n\t\t$(items).each(function() {\n\t\t\tvar res = ($(o.item || this).attr(o.attribute || \"id\") || \"\").match(o.expression || (/(.+)[\\-=_](.+)/));\n\t\t\tif (res) {\n\t\t\t\tstr.push((o.key || res[1]+\"[]\")+\"=\"+(o.key && o.expression ? res[1] : res[2]));\n\t\t\t}\n\t\t});\n\n\t\tif(!str.length && o.key) {\n\t\t\tstr.push(o.key + \"=\");\n\t\t}\n\n\t\treturn str.join(\"&\");\n\n\t},\n\n\ttoArray: function(o) {\n\n\t\tvar items = this._getItemsAsjQuery(o && o.connected),\n\t\t\tret = [];\n\n\t\to = o || {};\n\n\t\titems.each(function() { ret.push($(o.item || this).attr(o.attribute || \"id\") || \"\"); });\n\t\treturn ret;\n\n\t},\n\n\t/* Be careful with the following core functions */\n\t_intersectsWith: function(item) {\n\n\t\tvar x1 = this.positionAbs.left,\n\t\t\tx2 = x1 + this.helperProportions.width,\n\t\t\ty1 = this.positionAbs.top,\n\t\t\ty2 = y1 + this.helperProportions.height,\n\t\t\tl = item.left,\n\t\t\tr = l + item.width,\n\t\t\tt = item.top,\n\t\t\tb = t + item.height,\n\t\t\tdyClick = this.offset.click.top,\n\t\t\tdxClick = this.offset.click.left,\n\t\t\tisOverElementHeight = ( this.options.axis === \"x\" ) || ( ( y1 + dyClick ) > t && ( y1 + dyClick ) < b ),\n\t\t\tisOverElementWidth = ( this.options.axis === \"y\" ) || ( ( x1 + dxClick ) > l && ( x1 + dxClick ) < r ),\n\t\t\tisOverElement = isOverElementHeight && isOverElementWidth;\n\n\t\tif ( this.options.tolerance === \"pointer\" ||\n\t\t\tthis.options.forcePointerForContainers ||\n\t\t\t(this.options.tolerance !== \"pointer\" && this.helperProportions[this.floating ? \"width\" : \"height\"] > item[this.floating ? \"width\" : \"height\"])\n\t\t) {\n\t\t\treturn isOverElement;\n\t\t} else {\n\n\t\t\treturn (l < x1 + (this.helperProportions.width / 2) && // Right Half\n\t\t\t\tx2 - (this.helperProportions.width / 2) < r && // Left Half\n\t\t\t\tt < y1 + (this.helperProportions.height / 2) && // Bottom Half\n\t\t\t\ty2 - (this.helperProportions.height / 2) < b ); // Top Half\n\n\t\t}\n\t},\n\n\t_intersectsWithPointer: function(item) {\n\n\t\tvar isOverElementHeight = (this.options.axis === \"x\") || this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),\n\t\t\tisOverElementWidth = (this.options.axis === \"y\") || this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),\n\t\t\tisOverElement = isOverElementHeight && isOverElementWidth,\n\t\t\tverticalDirection = this._getDragVerticalDirection(),\n\t\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\tif (!isOverElement) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.floating ?\n\t\t\t( ((horizontalDirection && horizontalDirection === \"right\") || verticalDirection === \"down\") ? 2 : 1 )\n\t\t\t: ( verticalDirection && (verticalDirection === \"down\" ? 2 : 1) );\n\n\t},\n\n\t_intersectsWithSides: function(item) {\n\n\t\tvar isOverBottomHalf = this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),\n\t\t\tisOverRightHalf = this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),\n\t\t\tverticalDirection = this._getDragVerticalDirection(),\n\t\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\tif (this.floating && horizontalDirection) {\n\t\t\treturn ((horizontalDirection === \"right\" && isOverRightHalf) || (horizontalDirection === \"left\" && !isOverRightHalf));\n\t\t} else {\n\t\t\treturn verticalDirection && ((verticalDirection === \"down\" && isOverBottomHalf) || (verticalDirection === \"up\" && !isOverBottomHalf));\n\t\t}\n\n\t},\n\n\t_getDragVerticalDirection: function() {\n\t\tvar delta = this.positionAbs.top - this.lastPositionAbs.top;\n\t\treturn delta !== 0 && (delta > 0 ? \"down\" : \"up\");\n\t},\n\n\t_getDragHorizontalDirection: function() {\n\t\tvar delta = this.positionAbs.left - this.lastPositionAbs.left;\n\t\treturn delta !== 0 && (delta > 0 ? \"right\" : \"left\");\n\t},\n\n\trefresh: function(event) {\n\t\tthis._refreshItems(event);\n\t\tthis._setHandleClassName();\n\t\tthis.refreshPositions();\n\t\treturn this;\n\t},\n\n\t_connectWith: function() {\n\t\tvar options = this.options;\n\t\treturn options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;\n\t},\n\n\t_getItemsAsjQuery: function(connected) {\n\n\t\tvar i, j, cur, inst,\n\t\t\titems = [],\n\t\t\tqueries = [],\n\t\t\tconnectWith = this._connectWith();\n\n\t\tif(connectWith && connected) {\n\t\t\tfor (i = connectWith.length - 1; i >= 0; i--){\n\t\t\t\tcur = $(connectWith[i], this.document[0]);\n\t\t\t\tfor ( j = cur.length - 1; j >= 0; j--){\n\t\t\t\t\tinst = $.data(cur[j], this.widgetFullName);\n\t\t\t\t\tif(inst && inst !== this && !inst.options.disabled) {\n\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), inst]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tqueries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), this]);\n\n\t\tfunction addItems() {\n\t\t\titems.push( this );\n\t\t}\n\t\tfor (i = queries.length - 1; i >= 0; i--){\n\t\t\tqueries[i][0].each( addItems );\n\t\t}\n\n\t\treturn $(items);\n\n\t},\n\n\t_removeCurrentsFromItems: function() {\n\n\t\tvar list = this.currentItem.find(\":data(\" + this.widgetName + \"-item)\");\n\n\t\tthis.items = $.grep(this.items, function (item) {\n\t\t\tfor (var j=0; j < list.length; j++) {\n\t\t\t\tif(list[j] === item.item[0]) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t},\n\n\t_refreshItems: function(event) {\n\n\t\tthis.items = [];\n\t\tthis.containers = [this];\n\n\t\tvar i, j, cur, inst, targetData, _queries, item, queriesLength,\n\t\t\titems = this.items,\n\t\t\tqueries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],\n\t\t\tconnectWith = this._connectWith();\n\n\t\tif(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down\n\t\t\tfor (i = connectWith.length - 1; i >= 0; i--){\n\t\t\t\tcur = $(connectWith[i], this.document[0]);\n\t\t\t\tfor (j = cur.length - 1; j >= 0; j--){\n\t\t\t\t\tinst = $.data(cur[j], this.widgetFullName);\n\t\t\t\t\tif(inst && inst !== this && !inst.options.disabled) {\n\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);\n\t\t\t\t\t\tthis.containers.push(inst);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (i = queries.length - 1; i >= 0; i--) {\n\t\t\ttargetData = queries[i][1];\n\t\t\t_queries = queries[i][0];\n\n\t\t\tfor (j=0, queriesLength = _queries.length; j < queriesLength; j++) {\n\t\t\t\titem = $(_queries[j]);\n\n\t\t\t\titem.data(this.widgetName + \"-item\", targetData); // Data for target checking (mouse manager)\n\n\t\t\t\titems.push({\n\t\t\t\t\titem: item,\n\t\t\t\t\tinstance: targetData,\n\t\t\t\t\twidth: 0, height: 0,\n\t\t\t\t\tleft: 0, top: 0\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t},\n\n\trefreshPositions: function(fast) {\n\n\t\t// Determine whether items are being displayed horizontally\n\t\tthis.floating = this.items.length ?\n\t\t\tthis.options.axis === \"x\" || this._isFloating( this.items[ 0 ].item ) :\n\t\t\tfalse;\n\n\t\t//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change\n\t\tif(this.offsetParent && this.helper) {\n\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t}\n\n\t\tvar i, item, t, p;\n\n\t\tfor (i = this.items.length - 1; i >= 0; i--){\n\t\t\titem = this.items[i];\n\n\t\t\t//We ignore calculating positions of all connected containers when we're not over them\n\t\t\tif(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tt = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;\n\n\t\t\tif (!fast) {\n\t\t\t\titem.width = t.outerWidth();\n\t\t\t\titem.height = t.outerHeight();\n\t\t\t}\n\n\t\t\tp = t.offset();\n\t\t\titem.left = p.left;\n\t\t\titem.top = p.top;\n\t\t}\n\n\t\tif(this.options.custom && this.options.custom.refreshContainers) {\n\t\t\tthis.options.custom.refreshContainers.call(this);\n\t\t} else {\n\t\t\tfor (i = this.containers.length - 1; i >= 0; i--){\n\t\t\t\tp = this.containers[i].element.offset();\n\t\t\t\tthis.containers[i].containerCache.left = p.left;\n\t\t\t\tthis.containers[i].containerCache.top = p.top;\n\t\t\t\tthis.containers[i].containerCache.width = this.containers[i].element.outerWidth();\n\t\t\t\tthis.containers[i].containerCache.height = this.containers[i].element.outerHeight();\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_createPlaceholder: function(that) {\n\t\tthat = that || this;\n\t\tvar className,\n\t\t\to = that.options;\n\n\t\tif(!o.placeholder || o.placeholder.constructor === String) {\n\t\t\tclassName = o.placeholder;\n\t\t\to.placeholder = {\n\t\t\t\telement: function() {\n\n\t\t\t\t\tvar nodeName = that.currentItem[0].nodeName.toLowerCase(),\n\t\t\t\t\t\telement = $( \"<\" + nodeName + \">\", that.document[0] )\n\t\t\t\t\t\t\t.addClass(className || that.currentItem[0].className+\" ui-sortable-placeholder\")\n\t\t\t\t\t\t\t.removeClass(\"ui-sortable-helper\");\n\n\t\t\t\t\tif ( nodeName === \"tbody\" ) {\n\t\t\t\t\t\tthat._createTrPlaceholder(\n\t\t\t\t\t\t\tthat.currentItem.find( \"tr\" ).eq( 0 ),\n\t\t\t\t\t\t\t$( \"<tr>\", that.document[ 0 ] ).appendTo( element )\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if ( nodeName === \"tr\" ) {\n\t\t\t\t\t\tthat._createTrPlaceholder( that.currentItem, element );\n\t\t\t\t\t} else if ( nodeName === \"img\" ) {\n\t\t\t\t\t\telement.attr( \"src\", that.currentItem.attr( \"src\" ) );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !className ) {\n\t\t\t\t\t\telement.css( \"visibility\", \"hidden\" );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn element;\n\t\t\t\t},\n\t\t\t\tupdate: function(container, p) {\n\n\t\t\t\t\t// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that\n\t\t\t\t\t// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified\n\t\t\t\t\tif(className && !o.forcePlaceholderSize) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item\n\t\t\t\t\tif(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css(\"paddingTop\")||0, 10) - parseInt(that.currentItem.css(\"paddingBottom\")||0, 10)); }\n\t\t\t\t\tif(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css(\"paddingLeft\")||0, 10) - parseInt(that.currentItem.css(\"paddingRight\")||0, 10)); }\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t//Create the placeholder\n\t\tthat.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));\n\n\t\t//Append it after the actual current item\n\t\tthat.currentItem.after(that.placeholder);\n\n\t\t//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)\n\t\to.placeholder.update(that, that.placeholder);\n\n\t},\n\n\t_createTrPlaceholder: function( sourceTr, targetTr ) {\n\t\tvar that = this;\n\n\t\tsourceTr.children().each(function() {\n\t\t\t$( \"<td>&#160;</td>\", that.document[ 0 ] )\n\t\t\t\t.attr( \"colspan\", $( this ).attr( \"colspan\" ) || 1 )\n\t\t\t\t.appendTo( targetTr );\n\t\t});\n\t},\n\n\t_contactContainers: function(event) {\n\t\tvar i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom, floating, axis,\n\t\t\tinnermostContainer = null,\n\t\t\tinnermostIndex = null;\n\n\t\t// get innermost container that intersects with item\n\t\tfor (i = this.containers.length - 1; i >= 0; i--) {\n\n\t\t\t// never consider a container that's located within the item itself\n\t\t\tif($.contains(this.currentItem[0], this.containers[i].element[0])) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(this._intersectsWith(this.containers[i].containerCache)) {\n\n\t\t\t\t// if we've already found a container and it's more \"inner\" than this, then continue\n\t\t\t\tif(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tinnermostContainer = this.containers[i];\n\t\t\t\tinnermostIndex = i;\n\n\t\t\t} else {\n\t\t\t\t// container doesn't intersect. trigger \"out\" event if necessary\n\t\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\t\tthis.containers[i]._trigger(\"out\", event, this._uiHash(this));\n\t\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t// if no intersecting containers found, return\n\t\tif(!innermostContainer) {\n\t\t\treturn;\n\t\t}\n\n\t\t// move the item into the container if it's not there already\n\t\tif(this.containers.length === 1) {\n\t\t\tif (!this.containers[innermostIndex].containerCache.over) {\n\t\t\t\tthis.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\n\t\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\n\t\t\t}\n\t\t} else {\n\n\t\t\t//When entering a new container, we will find the item with the least distance and append our item near it\n\t\t\tdist = 10000;\n\t\t\titemWithLeastDistance = null;\n\t\t\tfloating = innermostContainer.floating || this._isFloating(this.currentItem);\n\t\t\tposProperty = floating ? \"left\" : \"top\";\n\t\t\tsizeProperty = floating ? \"width\" : \"height\";\n\t\t\taxis = floating ? \"clientX\" : \"clientY\";\n\n\t\t\tfor (j = this.items.length - 1; j >= 0; j--) {\n\t\t\t\tif(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(this.items[j].item[0] === this.currentItem[0]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcur = this.items[j].item.offset()[posProperty];\n\t\t\t\tnearBottom = false;\n\t\t\t\tif ( event[ axis ] - cur > this.items[ j ][ sizeProperty ] / 2 ) {\n\t\t\t\t\tnearBottom = true;\n\t\t\t\t}\n\n\t\t\t\tif ( Math.abs( event[ axis ] - cur ) < dist ) {\n\t\t\t\t\tdist = Math.abs( event[ axis ] - cur );\n\t\t\t\t\titemWithLeastDistance = this.items[ j ];\n\t\t\t\t\tthis.direction = nearBottom ? \"up\": \"down\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Check if dropOnEmpty is enabled\n\t\t\tif(!itemWithLeastDistance && !this.options.dropOnEmpty) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(this.currentContainer === this.containers[innermostIndex]) {\n\t\t\t\tif ( !this.currentContainer.containerCache.over ) {\n\t\t\t\t\tthis.containers[ innermostIndex ]._trigger( \"over\", event, this._uiHash() );\n\t\t\t\t\tthis.currentContainer.containerCache.over = 1;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\titemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);\n\t\t\tthis._trigger(\"change\", event, this._uiHash());\n\t\t\tthis.containers[innermostIndex]._trigger(\"change\", event, this._uiHash(this));\n\t\t\tthis.currentContainer = this.containers[innermostIndex];\n\n\t\t\t//Update the placeholder\n\t\t\tthis.options.placeholder.update(this.currentContainer, this.placeholder);\n\n\t\t\tthis.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\n\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\n\t\t}\n\n\n\t},\n\n\t_createHelper: function(event) {\n\n\t\tvar o = this.options,\n\t\t\thelper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === \"clone\" ? this.currentItem.clone() : this.currentItem);\n\n\t\t//Add the helper to the DOM if that didn't happen already\n\t\tif(!helper.parents(\"body\").length) {\n\t\t\t$(o.appendTo !== \"parent\" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);\n\t\t}\n\n\t\tif(helper[0] === this.currentItem[0]) {\n\t\t\tthis._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css(\"position\"), top: this.currentItem.css(\"top\"), left: this.currentItem.css(\"left\") };\n\t\t}\n\n\t\tif(!helper[0].style.width || o.forceHelperSize) {\n\t\t\thelper.width(this.currentItem.width());\n\t\t}\n\t\tif(!helper[0].style.height || o.forceHelperSize) {\n\t\t\thelper.height(this.currentItem.height());\n\t\t}\n\n\t\treturn helper;\n\n\t},\n\n\t_adjustOffsetFromHelper: function(obj) {\n\t\tif (typeof obj === \"string\") {\n\t\t\tobj = obj.split(\" \");\n\t\t}\n\t\tif ($.isArray(obj)) {\n\t\t\tobj = {left: +obj[0], top: +obj[1] || 0};\n\t\t}\n\t\tif (\"left\" in obj) {\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t}\n\t\tif (\"right\" in obj) {\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t}\n\t\tif (\"top\" in obj) {\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t}\n\t\tif (\"bottom\" in obj) {\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t}\n\t},\n\n\t_getParentOffset: function() {\n\n\n\t\t//Get the offsetParent and cache its position\n\t\tthis.offsetParent = this.helper.offsetParent();\n\t\tvar po = this.offsetParent.offset();\n\n\t\t// This is a special case where we need to modify a offset calculated on start, since the following happened:\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that\n\t\t//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\n\t\tif(this.cssPosition === \"absolute\" && this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) {\n\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t}\n\n\t\t// This needs to be actually done for all browsers, since pageX/pageY includes this information\n\t\t// with an ugly IE fix\n\t\tif( this.offsetParent[0] === this.document[0].body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === \"html\" && $.ui.ie)) {\n\t\t\tpo = { top: 0, left: 0 };\n\t\t}\n\n\t\treturn {\n\t\t\ttop: po.top + (parseInt(this.offsetParent.css(\"borderTopWidth\"),10) || 0),\n\t\t\tleft: po.left + (parseInt(this.offsetParent.css(\"borderLeftWidth\"),10) || 0)\n\t\t};\n\n\t},\n\n\t_getRelativeOffset: function() {\n\n\t\tif(this.cssPosition === \"relative\") {\n\t\t\tvar p = this.currentItem.position();\n\t\t\treturn {\n\t\t\t\ttop: p.top - (parseInt(this.helper.css(\"top\"),10) || 0) + this.scrollParent.scrollTop(),\n\t\t\t\tleft: p.left - (parseInt(this.helper.css(\"left\"),10) || 0) + this.scrollParent.scrollLeft()\n\t\t\t};\n\t\t} else {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t},\n\n\t_cacheMargins: function() {\n\t\tthis.margins = {\n\t\t\tleft: (parseInt(this.currentItem.css(\"marginLeft\"),10) || 0),\n\t\t\ttop: (parseInt(this.currentItem.css(\"marginTop\"),10) || 0)\n\t\t};\n\t},\n\n\t_cacheHelperProportions: function() {\n\t\tthis.helperProportions = {\n\t\t\twidth: this.helper.outerWidth(),\n\t\t\theight: this.helper.outerHeight()\n\t\t};\n\t},\n\n\t_setContainment: function() {\n\n\t\tvar ce, co, over,\n\t\t\to = this.options;\n\t\tif(o.containment === \"parent\") {\n\t\t\to.containment = this.helper[0].parentNode;\n\t\t}\n\t\tif(o.containment === \"document\" || o.containment === \"window\") {\n\t\t\tthis.containment = [\n\t\t\t\t0 - this.offset.relative.left - this.offset.parent.left,\n\t\t\t\t0 - this.offset.relative.top - this.offset.parent.top,\n\t\t\t\to.containment === \"document\" ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t(o.containment === \"document\" ? this.document.width() : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t}\n\n\t\tif(!(/^(document|window|parent)$/).test(o.containment)) {\n\t\t\tce = $(o.containment)[0];\n\t\t\tco = $(o.containment).offset();\n\t\t\tover = ($(ce).css(\"overflow\") !== \"hidden\");\n\n\t\t\tthis.containment = [\n\t\t\t\tco.left + (parseInt($(ce).css(\"borderLeftWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingLeft\"),10) || 0) - this.margins.left,\n\t\t\t\tco.top + (parseInt($(ce).css(\"borderTopWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingTop\"),10) || 0) - this.margins.top,\n\t\t\t\tco.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css(\"borderLeftWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingRight\"),10) || 0) - this.helperProportions.width - this.margins.left,\n\t\t\t\tco.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css(\"borderTopWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingBottom\"),10) || 0) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t}\n\n\t},\n\n\t_convertPositionTo: function(d, pos) {\n\n\t\tif(!pos) {\n\t\t\tpos = this.position;\n\t\t}\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\n\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,\n\t\t\tscrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpos.top\t+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.relative.top * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.top * mod -\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpos.left +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.relative.left * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.left * mod\t-\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_generatePosition: function(event) {\n\n\t\tvar top, left,\n\t\t\to = this.options,\n\t\t\tpageX = event.pageX,\n\t\t\tpageY = event.pageY,\n\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\n\n\t\t// This is another very weird special case that only happens for relative elements:\n\t\t// 1. If the css position is relative\n\t\t// 2. and the scroll parent is the document or similar to the offset parent\n\t\t// we have to refresh the relative offset during the scroll so there are no jumps\n\t\tif(this.cssPosition === \"relative\" && !(this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0])) {\n\t\t\tthis.offset.relative = this._getRelativeOffset();\n\t\t}\n\n\t\t/*\n\t\t * - Position constraining -\n\t\t * Constrain the position to a mix of grid, containment.\n\t\t */\n\n\t\tif(this.originalPosition) { //If we are not dragging yet, we won't check for options\n\n\t\t\tif(this.containment) {\n\t\t\t\tif(event.pageX - this.offset.click.left < this.containment[0]) {\n\t\t\t\t\tpageX = this.containment[0] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif(event.pageY - this.offset.click.top < this.containment[1]) {\n\t\t\t\t\tpageY = this.containment[1] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t\tif(event.pageX - this.offset.click.left > this.containment[2]) {\n\t\t\t\t\tpageX = this.containment[2] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif(event.pageY - this.offset.click.top > this.containment[3]) {\n\t\t\t\t\tpageY = this.containment[3] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(o.grid) {\n\t\t\t\ttop = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];\n\t\t\t\tpageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\n\n\t\t\t\tleft = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];\n\t\t\t\tpageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpageY -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.click.top -\t\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.relative.top\t-\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.top +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpageX -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.click.left -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.relative.left\t-\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.left +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_rearrange: function(event, i, a, hardRefresh) {\n\n\t\ta ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === \"down\" ? i.item[0] : i.item[0].nextSibling));\n\n\t\t//Various things done here to improve the performance:\n\t\t// 1. we create a setTimeout, that calls refreshPositions\n\t\t// 2. on the instance, we have a counter variable, that get's higher after every append\n\t\t// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same\n\t\t// 4. this lets only the last addition to the timeout stack through\n\t\tthis.counter = this.counter ? ++this.counter : 1;\n\t\tvar counter = this.counter;\n\n\t\tthis._delay(function() {\n\t\t\tif(counter === this.counter) {\n\t\t\t\tthis.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove\n\t\t\t}\n\t\t});\n\n\t},\n\n\t_clear: function(event, noPropagation) {\n\n\t\tthis.reverting = false;\n\t\t// We delay all events that have to be triggered to after the point where the placeholder has been removed and\n\t\t// everything else normalized again\n\t\tvar i,\n\t\t\tdelayedTriggers = [];\n\n\t\t// We first have to update the dom position of the actual currentItem\n\t\t// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)\n\t\tif(!this._noFinalSort && this.currentItem.parent().length) {\n\t\t\tthis.placeholder.before(this.currentItem);\n\t\t}\n\t\tthis._noFinalSort = null;\n\n\t\tif(this.helper[0] === this.currentItem[0]) {\n\t\t\tfor(i in this._storedCSS) {\n\t\t\t\tif(this._storedCSS[i] === \"auto\" || this._storedCSS[i] === \"static\") {\n\t\t\t\t\tthis._storedCSS[i] = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\n\t\t} else {\n\t\t\tthis.currentItem.show();\n\t\t}\n\n\t\tif(this.fromOutside && !noPropagation) {\n\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"receive\", event, this._uiHash(this.fromOutside)); });\n\t\t}\n\t\tif((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(\".ui-sortable-helper\")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {\n\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"update\", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed\n\t\t}\n\n\t\t// Check if the items Container has Changed and trigger appropriate\n\t\t// events.\n\t\tif (this !== this.currentContainer) {\n\t\t\tif(!noPropagation) {\n\t\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"remove\", event, this._uiHash()); });\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"receive\", event, this._uiHash(this)); };  }).call(this, this.currentContainer));\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"update\", event, this._uiHash(this));  }; }).call(this, this.currentContainer));\n\t\t\t}\n\t\t}\n\n\n\t\t//Post events to containers\n\t\tfunction delayEvent( type, instance, container ) {\n\t\t\treturn function( event ) {\n\t\t\t\tcontainer._trigger( type, event, instance._uiHash( instance ) );\n\t\t\t};\n\t\t}\n\t\tfor (i = this.containers.length - 1; i >= 0; i--){\n\t\t\tif (!noPropagation) {\n\t\t\t\tdelayedTriggers.push( delayEvent( \"deactivate\", this, this.containers[ i ] ) );\n\t\t\t}\n\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\tdelayedTriggers.push( delayEvent( \"out\", this, this.containers[ i ] ) );\n\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t}\n\t\t}\n\n\t\t//Do what was originally in plugins\n\t\tif ( this.storedCursor ) {\n\t\t\tthis.document.find( \"body\" ).css( \"cursor\", this.storedCursor );\n\t\t\tthis.storedStylesheet.remove();\n\t\t}\n\t\tif(this._storedOpacity) {\n\t\t\tthis.helper.css(\"opacity\", this._storedOpacity);\n\t\t}\n\t\tif(this._storedZIndex) {\n\t\t\tthis.helper.css(\"zIndex\", this._storedZIndex === \"auto\" ? \"\" : this._storedZIndex);\n\t\t}\n\n\t\tthis.dragging = false;\n\n\t\tif(!noPropagation) {\n\t\t\tthis._trigger(\"beforeStop\", event, this._uiHash());\n\t\t}\n\n\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\n\t\tthis.placeholder[0].parentNode.removeChild(this.placeholder[0]);\n\n\t\tif ( !this.cancelHelperRemoval ) {\n\t\t\tif ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {\n\t\t\t\tthis.helper.remove();\n\t\t\t}\n\t\t\tthis.helper = null;\n\t\t}\n\n\t\tif(!noPropagation) {\n\t\t\tfor (i=0; i < delayedTriggers.length; i++) {\n\t\t\t\tdelayedTriggers[i].call(this, event);\n\t\t\t} //Trigger all delayed events\n\t\t\tthis._trigger(\"stop\", event, this._uiHash());\n\t\t}\n\n\t\tthis.fromOutside = false;\n\t\treturn !this.cancelHelperRemoval;\n\n\t},\n\n\t_trigger: function() {\n\t\tif ($.Widget.prototype._trigger.apply(this, arguments) === false) {\n\t\t\tthis.cancel();\n\t\t}\n\t},\n\n\t_uiHash: function(_inst) {\n\t\tvar inst = _inst || this;\n\t\treturn {\n\t\t\thelper: inst.helper,\n\t\t\tplaceholder: inst.placeholder || $([]),\n\t\t\tposition: inst.position,\n\t\t\toriginalPosition: inst.originalPosition,\n\t\t\toffset: inst.positionAbs,\n\t\t\titem: inst.currentItem,\n\t\t\tsender: _inst ? _inst.element : null\n\t\t};\n\t}\n\n});\n\n\n/*!\n * jQuery UI Spinner 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/spinner/\n */\n\n\nfunction spinner_modifier( fn ) {\n\treturn function() {\n\t\tvar previous = this.element.val();\n\t\tfn.apply( this, arguments );\n\t\tthis._refresh();\n\t\tif ( previous !== this.element.val() ) {\n\t\t\tthis._trigger( \"change\" );\n\t\t}\n\t};\n}\n\nvar spinner = $.widget( \"ui.spinner\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<input>\",\n\twidgetEventPrefix: \"spin\",\n\toptions: {\n\t\tculture: null,\n\t\ticons: {\n\t\t\tdown: \"ui-icon-triangle-1-s\",\n\t\t\tup: \"ui-icon-triangle-1-n\"\n\t\t},\n\t\tincremental: true,\n\t\tmax: null,\n\t\tmin: null,\n\t\tnumberFormat: null,\n\t\tpage: 10,\n\t\tstep: 1,\n\n\t\tchange: null,\n\t\tspin: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t_create: function() {\n\t\t// handle string values that need to be parsed\n\t\tthis._setOption( \"max\", this.options.max );\n\t\tthis._setOption( \"min\", this.options.min );\n\t\tthis._setOption( \"step\", this.options.step );\n\n\t\t// Only format if there is a value, prevents the field from being marked\n\t\t// as invalid in Firefox, see #9573.\n\t\tif ( this.value() !== \"\" ) {\n\t\t\t// Format the value, but don't constrain.\n\t\t\tthis._value( this.element.val(), true );\n\t\t}\n\n\t\tthis._draw();\n\t\tthis._on( this._events );\n\t\tthis._refresh();\n\n\t\t// turning off autocomplete prevents the browser from remembering the\n\t\t// value when navigating through history, so we re-enable autocomplete\n\t\t// if the page is unloaded before the widget is destroyed. #7790\n\t\tthis._on( this.window, {\n\t\t\tbeforeunload: function() {\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar options = {},\n\t\t\telement = this.element;\n\n\t\t$.each( [ \"min\", \"max\", \"step\" ], function( i, option ) {\n\t\t\tvar value = element.attr( option );\n\t\t\tif ( value !== undefined && value.length ) {\n\t\t\t\toptions[ option ] = value;\n\t\t\t}\n\t\t});\n\n\t\treturn options;\n\t},\n\n\t_events: {\n\t\tkeydown: function( event ) {\n\t\t\tif ( this._start( event ) && this._keydown( event ) ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\tkeyup: \"_stop\",\n\t\tfocus: function() {\n\t\t\tthis.previous = this.element.val();\n\t\t},\n\t\tblur: function( event ) {\n\t\t\tif ( this.cancelBlur ) {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._stop();\n\t\t\tthis._refresh();\n\t\t\tif ( this.previous !== this.element.val() ) {\n\t\t\t\tthis._trigger( \"change\", event );\n\t\t\t}\n\t\t},\n\t\tmousewheel: function( event, delta ) {\n\t\t\tif ( !delta ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !this.spinning && !this._start( event ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis._spin( (delta > 0 ? 1 : -1) * this.options.step, event );\n\t\t\tclearTimeout( this.mousewheelTimer );\n\t\t\tthis.mousewheelTimer = this._delay(function() {\n\t\t\t\tif ( this.spinning ) {\n\t\t\t\t\tthis._stop( event );\n\t\t\t\t}\n\t\t\t}, 100 );\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t\"mousedown .ui-spinner-button\": function( event ) {\n\t\t\tvar previous;\n\n\t\t\t// We never want the buttons to have focus; whenever the user is\n\t\t\t// interacting with the spinner, the focus should be on the input.\n\t\t\t// If the input is focused then this.previous is properly set from\n\t\t\t// when the input first received focus. If the input is not focused\n\t\t\t// then we need to set this.previous based on the value before spinning.\n\t\t\tprevious = this.element[0] === this.document[0].activeElement ?\n\t\t\t\tthis.previous : this.element.val();\n\t\t\tfunction checkFocus() {\n\t\t\t\tvar isActive = this.element[0] === this.document[0].activeElement;\n\t\t\t\tif ( !isActive ) {\n\t\t\t\t\tthis.element.focus();\n\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t// support: IE\n\t\t\t\t\t// IE sets focus asynchronously, so we need to check if focus\n\t\t\t\t\t// moved off of the input because the user clicked on the button.\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// ensure focus is on (or stays on) the text field\n\t\t\tevent.preventDefault();\n\t\t\tcheckFocus.call( this );\n\n\t\t\t// support: IE\n\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\n\t\t\t// so we set a flag to know when we should ignore the blur event\n\t\t\t// and check (again) if focus moved off of the input.\n\t\t\tthis.cancelBlur = true;\n\t\t\tthis._delay(function() {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\tcheckFocus.call( this );\n\t\t\t});\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._repeat( null, $( event.currentTarget ).hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\t\t\"mouseup .ui-spinner-button\": \"_stop\",\n\t\t\"mouseenter .ui-spinner-button\": function( event ) {\n\t\t\t// button will add ui-state-active if mouse was down while mouseleave and kept down\n\t\t\tif ( !$( event.currentTarget ).hasClass( \"ui-state-active\" ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._repeat( null, $( event.currentTarget ).hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\t\t// TODO: do we really want to consider this a stop?\n\t\t// shouldn't we just stop the repeater and wait until mouseup before\n\t\t// we trigger the stop event?\n\t\t\"mouseleave .ui-spinner-button\": \"_stop\"\n\t},\n\n\t_draw: function() {\n\t\tvar uiSpinner = this.uiSpinner = this.element\n\t\t\t.addClass( \"ui-spinner-input\" )\n\t\t\t.attr( \"autocomplete\", \"off\" )\n\t\t\t.wrap( this._uiSpinnerHtml() )\n\t\t\t.parent()\n\t\t\t\t// add buttons\n\t\t\t\t.append( this._buttonHtml() );\n\n\t\tthis.element.attr( \"role\", \"spinbutton\" );\n\n\t\t// button bindings\n\t\tthis.buttons = uiSpinner.find( \".ui-spinner-button\" )\n\t\t\t.attr( \"tabIndex\", -1 )\n\t\t\t.button()\n\t\t\t.removeClass( \"ui-corner-all\" );\n\n\t\t// IE 6 doesn't understand height: 50% for the buttons\n\t\t// unless the wrapper has an explicit height\n\t\tif ( this.buttons.height() > Math.ceil( uiSpinner.height() * 0.5 ) &&\n\t\t\t\tuiSpinner.height() > 0 ) {\n\t\t\tuiSpinner.height( uiSpinner.height() );\n\t\t}\n\n\t\t// disable spinner if element was already disabled\n\t\tif ( this.options.disabled ) {\n\t\t\tthis.disable();\n\t\t}\n\t},\n\n\t_keydown: function( event ) {\n\t\tvar options = this.options,\n\t\t\tkeyCode = $.ui.keyCode;\n\n\t\tswitch ( event.keyCode ) {\n\t\tcase keyCode.UP:\n\t\t\tthis._repeat( null, 1, event );\n\t\t\treturn true;\n\t\tcase keyCode.DOWN:\n\t\t\tthis._repeat( null, -1, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_UP:\n\t\t\tthis._repeat( null, options.page, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_DOWN:\n\t\t\tthis._repeat( null, -options.page, event );\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_uiSpinnerHtml: function() {\n\t\treturn \"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>\";\n\t},\n\n\t_buttonHtml: function() {\n\t\treturn \"\" +\n\t\t\t\"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>\" +\n\t\t\t\t\"<span class='ui-icon \" + this.options.icons.up + \"'>&#9650;</span>\" +\n\t\t\t\"</a>\" +\n\t\t\t\"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>\" +\n\t\t\t\t\"<span class='ui-icon \" + this.options.icons.down + \"'>&#9660;</span>\" +\n\t\t\t\"</a>\";\n\t},\n\n\t_start: function( event ) {\n\t\tif ( !this.spinning && this._trigger( \"start\", event ) === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\t\tthis.spinning = true;\n\t\treturn true;\n\t},\n\n\t_repeat: function( i, steps, event ) {\n\t\ti = i || 500;\n\n\t\tclearTimeout( this.timer );\n\t\tthis.timer = this._delay(function() {\n\t\t\tthis._repeat( 40, steps, event );\n\t\t}, i );\n\n\t\tthis._spin( steps * this.options.step, event );\n\t},\n\n\t_spin: function( step, event ) {\n\t\tvar value = this.value() || 0;\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\n\t\tvalue = this._adjustValue( value + step * this._increment( this.counter ) );\n\n\t\tif ( !this.spinning || this._trigger( \"spin\", event, { value: value } ) !== false) {\n\t\t\tthis._value( value );\n\t\t\tthis.counter++;\n\t\t}\n\t},\n\n\t_increment: function( i ) {\n\t\tvar incremental = this.options.incremental;\n\n\t\tif ( incremental ) {\n\t\t\treturn $.isFunction( incremental ) ?\n\t\t\t\tincremental( i ) :\n\t\t\t\tMath.floor( i * i * i / 50000 - i * i / 500 + 17 * i / 200 + 1 );\n\t\t}\n\n\t\treturn 1;\n\t},\n\n\t_precision: function() {\n\t\tvar precision = this._precisionOf( this.options.step );\n\t\tif ( this.options.min !== null ) {\n\t\t\tprecision = Math.max( precision, this._precisionOf( this.options.min ) );\n\t\t}\n\t\treturn precision;\n\t},\n\n\t_precisionOf: function( num ) {\n\t\tvar str = num.toString(),\n\t\t\tdecimal = str.indexOf( \".\" );\n\t\treturn decimal === -1 ? 0 : str.length - decimal - 1;\n\t},\n\n\t_adjustValue: function( value ) {\n\t\tvar base, aboveMin,\n\t\t\toptions = this.options;\n\n\t\t// make sure we're at a valid step\n\t\t// - find out where we are relative to the base (min or 0)\n\t\tbase = options.min !== null ? options.min : 0;\n\t\taboveMin = value - base;\n\t\t// - round to the nearest step\n\t\taboveMin = Math.round(aboveMin / options.step) * options.step;\n\t\t// - rounding is based on 0, so adjust back to our base\n\t\tvalue = base + aboveMin;\n\n\t\t// fix precision from bad JS floating point math\n\t\tvalue = parseFloat( value.toFixed( this._precision() ) );\n\n\t\t// clamp the value\n\t\tif ( options.max !== null && value > options.max) {\n\t\t\treturn options.max;\n\t\t}\n\t\tif ( options.min !== null && value < options.min ) {\n\t\t\treturn options.min;\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t_stop: function( event ) {\n\t\tif ( !this.spinning ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout( this.timer );\n\t\tclearTimeout( this.mousewheelTimer );\n\t\tthis.counter = 0;\n\t\tthis.spinning = false;\n\t\tthis._trigger( \"stop\", event );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"culture\" || key === \"numberFormat\" ) {\n\t\t\tvar prevValue = this._parse( this.element.val() );\n\t\t\tthis.options[ key ] = value;\n\t\t\tthis.element.val( this._format( prevValue ) );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key === \"max\" || key === \"min\" || key === \"step\" ) {\n\t\t\tif ( typeof value === \"string\" ) {\n\t\t\t\tvalue = this._parse( value );\n\t\t\t}\n\t\t}\n\t\tif ( key === \"icons\" ) {\n\t\t\tthis.buttons.first().find( \".ui-icon\" )\n\t\t\t\t.removeClass( this.options.icons.up )\n\t\t\t\t.addClass( value.up );\n\t\t\tthis.buttons.last().find( \".ui-icon\" )\n\t\t\t\t.removeClass( this.options.icons.down )\n\t\t\t\t.addClass( value.down );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.widget().toggleClass( \"ui-state-disabled\", !!value );\n\t\t\tthis.element.prop( \"disabled\", !!value );\n\t\t\tthis.buttons.button( value ? \"disable\" : \"enable\" );\n\t\t}\n\t},\n\n\t_setOptions: spinner_modifier(function( options ) {\n\t\tthis._super( options );\n\t}),\n\n\t_parse: function( val ) {\n\t\tif ( typeof val === \"string\" && val !== \"\" ) {\n\t\t\tval = window.Globalize && this.options.numberFormat ?\n\t\t\t\tGlobalize.parseFloat( val, 10, this.options.culture ) : +val;\n\t\t}\n\t\treturn val === \"\" || isNaN( val ) ? null : val;\n\t},\n\n\t_format: function( value ) {\n\t\tif ( value === \"\" ) {\n\t\t\treturn \"\";\n\t\t}\n\t\treturn window.Globalize && this.options.numberFormat ?\n\t\t\tGlobalize.format( value, this.options.numberFormat, this.options.culture ) :\n\t\t\tvalue;\n\t},\n\n\t_refresh: function() {\n\t\tthis.element.attr({\n\t\t\t\"aria-valuemin\": this.options.min,\n\t\t\t\"aria-valuemax\": this.options.max,\n\t\t\t// TODO: what should we do with values that can't be parsed?\n\t\t\t\"aria-valuenow\": this._parse( this.element.val() )\n\t\t});\n\t},\n\n\tisValid: function() {\n\t\tvar value = this.value();\n\n\t\t// null is invalid\n\t\tif ( value === null ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// if value gets adjusted, it's invalid\n\t\treturn value === this._adjustValue( value );\n\t},\n\n\t// update the value without triggering change\n\t_value: function( value, allowAny ) {\n\t\tvar parsed;\n\t\tif ( value !== \"\" ) {\n\t\t\tparsed = this._parse( value );\n\t\t\tif ( parsed !== null ) {\n\t\t\t\tif ( !allowAny ) {\n\t\t\t\t\tparsed = this._adjustValue( parsed );\n\t\t\t\t}\n\t\t\t\tvalue = this._format( parsed );\n\t\t\t}\n\t\t}\n\t\tthis.element.val( value );\n\t\tthis._refresh();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass( \"ui-spinner-input\" )\n\t\t\t.prop( \"disabled\", false )\n\t\t\t.removeAttr( \"autocomplete\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-valuemin\" )\n\t\t\t.removeAttr( \"aria-valuemax\" )\n\t\t\t.removeAttr( \"aria-valuenow\" );\n\t\tthis.uiSpinner.replaceWith( this.element );\n\t},\n\n\tstepUp: spinner_modifier(function( steps ) {\n\t\tthis._stepUp( steps );\n\t}),\n\t_stepUp: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( (steps || 1) * this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tstepDown: spinner_modifier(function( steps ) {\n\t\tthis._stepDown( steps );\n\t}),\n\t_stepDown: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( (steps || 1) * -this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tpageUp: spinner_modifier(function( pages ) {\n\t\tthis._stepUp( (pages || 1) * this.options.page );\n\t}),\n\n\tpageDown: spinner_modifier(function( pages ) {\n\t\tthis._stepDown( (pages || 1) * this.options.page );\n\t}),\n\n\tvalue: function( newVal ) {\n\t\tif ( !arguments.length ) {\n\t\t\treturn this._parse( this.element.val() );\n\t\t}\n\t\tspinner_modifier( this._value ).call( this, newVal );\n\t},\n\n\twidget: function() {\n\t\treturn this.uiSpinner;\n\t}\n});\n\n\n/*!\n * jQuery UI Tabs 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/tabs/\n */\n\n\nvar tabs = $.widget( \"ui.tabs\", {\n\tversion: \"1.11.4\",\n\tdelay: 300,\n\toptions: {\n\t\tactive: null,\n\t\tcollapsible: false,\n\t\tevent: \"click\",\n\t\theightStyle: \"content\",\n\t\thide: null,\n\t\tshow: null,\n\n\t\t// callbacks\n\t\tactivate: null,\n\t\tbeforeActivate: null,\n\t\tbeforeLoad: null,\n\t\tload: null\n\t},\n\n\t_isLocal: (function() {\n\t\tvar rhash = /#.*$/;\n\n\t\treturn function( anchor ) {\n\t\t\tvar anchorUrl, locationUrl;\n\n\t\t\t// support: IE7\n\t\t\t// IE7 doesn't normalize the href property when set via script (#9317)\n\t\t\tanchor = anchor.cloneNode( false );\n\n\t\t\tanchorUrl = anchor.href.replace( rhash, \"\" );\n\t\t\tlocationUrl = location.href.replace( rhash, \"\" );\n\n\t\t\t// decoding may throw an error if the URL isn't UTF-8 (#9518)\n\t\t\ttry {\n\t\t\t\tanchorUrl = decodeURIComponent( anchorUrl );\n\t\t\t} catch ( error ) {}\n\t\t\ttry {\n\t\t\t\tlocationUrl = decodeURIComponent( locationUrl );\n\t\t\t} catch ( error ) {}\n\n\t\t\treturn anchor.hash.length > 1 && anchorUrl === locationUrl;\n\t\t};\n\t})(),\n\n\t_create: function() {\n\t\tvar that = this,\n\t\t\toptions = this.options;\n\n\t\tthis.running = false;\n\n\t\tthis.element\n\t\t\t.addClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all\" )\n\t\t\t.toggleClass( \"ui-tabs-collapsible\", options.collapsible );\n\n\t\tthis._processTabs();\n\t\toptions.active = this._initialActive();\n\n\t\t// Take disabling tabs via class attribute from HTML\n\t\t// into account and update option properly.\n\t\tif ( $.isArray( options.disabled ) ) {\n\t\t\toptions.disabled = $.unique( options.disabled.concat(\n\t\t\t\t$.map( this.tabs.filter( \".ui-state-disabled\" ), function( li ) {\n\t\t\t\t\treturn that.tabs.index( li );\n\t\t\t\t})\n\t\t\t) ).sort();\n\t\t}\n\n\t\t// check for length avoids error when initializing empty list\n\t\tif ( this.options.active !== false && this.anchors.length ) {\n\t\t\tthis.active = this._findActive( options.active );\n\t\t} else {\n\t\t\tthis.active = $();\n\t\t}\n\n\t\tthis._refresh();\n\n\t\tif ( this.active.length ) {\n\t\t\tthis.load( options.active );\n\t\t}\n\t},\n\n\t_initialActive: function() {\n\t\tvar active = this.options.active,\n\t\t\tcollapsible = this.options.collapsible,\n\t\t\tlocationHash = location.hash.substring( 1 );\n\n\t\tif ( active === null ) {\n\t\t\t// check the fragment identifier in the URL\n\t\t\tif ( locationHash ) {\n\t\t\t\tthis.tabs.each(function( i, tab ) {\n\t\t\t\t\tif ( $( tab ).attr( \"aria-controls\" ) === locationHash ) {\n\t\t\t\t\t\tactive = i;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// check for a tab marked active via a class\n\t\t\tif ( active === null ) {\n\t\t\t\tactive = this.tabs.index( this.tabs.filter( \".ui-tabs-active\" ) );\n\t\t\t}\n\n\t\t\t// no active tab, set to false\n\t\t\tif ( active === null || active === -1 ) {\n\t\t\t\tactive = this.tabs.length ? 0 : false;\n\t\t\t}\n\t\t}\n\n\t\t// handle numbers: negative, out of range\n\t\tif ( active !== false ) {\n\t\t\tactive = this.tabs.index( this.tabs.eq( active ) );\n\t\t\tif ( active === -1 ) {\n\t\t\t\tactive = collapsible ? false : 0;\n\t\t\t}\n\t\t}\n\n\t\t// don't allow collapsible: false and active: false\n\t\tif ( !collapsible && active === false && this.anchors.length ) {\n\t\t\tactive = 0;\n\t\t}\n\n\t\treturn active;\n\t},\n\n\t_getCreateEventData: function() {\n\t\treturn {\n\t\t\ttab: this.active,\n\t\t\tpanel: !this.active.length ? $() : this._getPanelForTab( this.active )\n\t\t};\n\t},\n\n\t_tabKeydown: function( event ) {\n\t\tvar focusedTab = $( this.document[0].activeElement ).closest( \"li\" ),\n\t\t\tselectedIndex = this.tabs.index( focusedTab ),\n\t\t\tgoingForward = true;\n\n\t\tif ( this._handlePageNav( event ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tselectedIndex++;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.UP:\n\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\tgoingForward = false;\n\t\t\t\tselectedIndex--;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.END:\n\t\t\t\tselectedIndex = this.anchors.length - 1;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\tselectedIndex = 0;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.SPACE:\n\t\t\t\t// Activate only, no collapsing\n\t\t\t\tevent.preventDefault();\n\t\t\t\tclearTimeout( this.activating );\n\t\t\t\tthis._activate( selectedIndex );\n\t\t\t\treturn;\n\t\t\tcase $.ui.keyCode.ENTER:\n\t\t\t\t// Toggle (cancel delayed activation, allow collapsing)\n\t\t\t\tevent.preventDefault();\n\t\t\t\tclearTimeout( this.activating );\n\t\t\t\t// Determine if we should collapse or activate\n\t\t\t\tthis._activate( selectedIndex === this.options.active ? false : selectedIndex );\n\t\t\t\treturn;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\t// Focus the appropriate tab, based on which key was pressed\n\t\tevent.preventDefault();\n\t\tclearTimeout( this.activating );\n\t\tselectedIndex = this._focusNextTab( selectedIndex, goingForward );\n\n\t\t// Navigating with control/command key will prevent automatic activation\n\t\tif ( !event.ctrlKey && !event.metaKey ) {\n\n\t\t\t// Update aria-selected immediately so that AT think the tab is already selected.\n\t\t\t// Otherwise AT may confuse the user by stating that they need to activate the tab,\n\t\t\t// but the tab will already be activated by the time the announcement finishes.\n\t\t\tfocusedTab.attr( \"aria-selected\", \"false\" );\n\t\t\tthis.tabs.eq( selectedIndex ).attr( \"aria-selected\", \"true\" );\n\n\t\t\tthis.activating = this._delay(function() {\n\t\t\t\tthis.option( \"active\", selectedIndex );\n\t\t\t}, this.delay );\n\t\t}\n\t},\n\n\t_panelKeydown: function( event ) {\n\t\tif ( this._handlePageNav( event ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ctrl+up moves focus to the current tab\n\t\tif ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.active.focus();\n\t\t}\n\t},\n\n\t// Alt+page up/down moves focus to the previous/next tab (and activates)\n\t_handlePageNav: function( event ) {\n\t\tif ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {\n\t\t\tthis._activate( this._focusNextTab( this.options.active - 1, false ) );\n\t\t\treturn true;\n\t\t}\n\t\tif ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {\n\t\t\tthis._activate( this._focusNextTab( this.options.active + 1, true ) );\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t_findNextTab: function( index, goingForward ) {\n\t\tvar lastTabIndex = this.tabs.length - 1;\n\n\t\tfunction constrain() {\n\t\t\tif ( index > lastTabIndex ) {\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\tif ( index < 0 ) {\n\t\t\t\tindex = lastTabIndex;\n\t\t\t}\n\t\t\treturn index;\n\t\t}\n\n\t\twhile ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {\n\t\t\tindex = goingForward ? index + 1 : index - 1;\n\t\t}\n\n\t\treturn index;\n\t},\n\n\t_focusNextTab: function( index, goingForward ) {\n\t\tindex = this._findNextTab( index, goingForward );\n\t\tthis.tabs.eq( index ).focus();\n\t\treturn index;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"active\" ) {\n\t\t\t// _activate() will handle invalid values and update this.options\n\t\t\tthis._activate( value );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\t// don't use the widget factory's disabled handling\n\t\t\tthis._setupDisabled( value );\n\t\t\treturn;\n\t\t}\n\n\t\tthis._super( key, value);\n\n\t\tif ( key === \"collapsible\" ) {\n\t\t\tthis.element.toggleClass( \"ui-tabs-collapsible\", value );\n\t\t\t// Setting collapsible: false while collapsed; open first panel\n\t\t\tif ( !value && this.options.active === false ) {\n\t\t\t\tthis._activate( 0 );\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"event\" ) {\n\t\t\tthis._setupEvents( value );\n\t\t}\n\n\t\tif ( key === \"heightStyle\" ) {\n\t\t\tthis._setupHeightStyle( value );\n\t\t}\n\t},\n\n\t_sanitizeSelector: function( hash ) {\n\t\treturn hash ? hash.replace( /[!\"$%&'()*+,.\\/:;<=>?@\\[\\]\\^`{|}~]/g, \"\\\\$&\" ) : \"\";\n\t},\n\n\trefresh: function() {\n\t\tvar options = this.options,\n\t\t\tlis = this.tablist.children( \":has(a[href])\" );\n\n\t\t// get disabled tabs from class attribute from HTML\n\t\t// this will get converted to a boolean if needed in _refresh()\n\t\toptions.disabled = $.map( lis.filter( \".ui-state-disabled\" ), function( tab ) {\n\t\t\treturn lis.index( tab );\n\t\t});\n\n\t\tthis._processTabs();\n\n\t\t// was collapsed or no tabs\n\t\tif ( options.active === false || !this.anchors.length ) {\n\t\t\toptions.active = false;\n\t\t\tthis.active = $();\n\t\t// was active, but active tab is gone\n\t\t} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {\n\t\t\t// all remaining tabs are disabled\n\t\t\tif ( this.tabs.length === options.disabled.length ) {\n\t\t\t\toptions.active = false;\n\t\t\t\tthis.active = $();\n\t\t\t// activate previous tab\n\t\t\t} else {\n\t\t\t\tthis._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );\n\t\t\t}\n\t\t// was active, active tab still exists\n\t\t} else {\n\t\t\t// make sure active index is correct\n\t\t\toptions.active = this.tabs.index( this.active );\n\t\t}\n\n\t\tthis._refresh();\n\t},\n\n\t_refresh: function() {\n\t\tthis._setupDisabled( this.options.disabled );\n\t\tthis._setupEvents( this.options.event );\n\t\tthis._setupHeightStyle( this.options.heightStyle );\n\n\t\tthis.tabs.not( this.active ).attr({\n\t\t\t\"aria-selected\": \"false\",\n\t\t\t\"aria-expanded\": \"false\",\n\t\t\ttabIndex: -1\n\t\t});\n\t\tthis.panels.not( this._getPanelForTab( this.active ) )\n\t\t\t.hide()\n\t\t\t.attr({\n\t\t\t\t\"aria-hidden\": \"true\"\n\t\t\t});\n\n\t\t// Make sure one tab is in the tab order\n\t\tif ( !this.active.length ) {\n\t\t\tthis.tabs.eq( 0 ).attr( \"tabIndex\", 0 );\n\t\t} else {\n\t\t\tthis.active\n\t\t\t\t.addClass( \"ui-tabs-active ui-state-active\" )\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-selected\": \"true\",\n\t\t\t\t\t\"aria-expanded\": \"true\",\n\t\t\t\t\ttabIndex: 0\n\t\t\t\t});\n\t\t\tthis._getPanelForTab( this.active )\n\t\t\t\t.show()\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-hidden\": \"false\"\n\t\t\t\t});\n\t\t}\n\t},\n\n\t_processTabs: function() {\n\t\tvar that = this,\n\t\t\tprevTabs = this.tabs,\n\t\t\tprevAnchors = this.anchors,\n\t\t\tprevPanels = this.panels;\n\n\t\tthis.tablist = this._getList()\n\t\t\t.addClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n\t\t\t.attr( \"role\", \"tablist\" )\n\n\t\t\t// Prevent users from focusing disabled tabs via click\n\t\t\t.delegate( \"> li\", \"mousedown\" + this.eventNamespace, function( event ) {\n\t\t\t\tif ( $( this ).is( \".ui-state-disabled\" ) ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// support: IE <9\n\t\t\t// Preventing the default action in mousedown doesn't prevent IE\n\t\t\t// from focusing the element, so if the anchor gets focused, blur.\n\t\t\t// We don't have to worry about focusing the previously focused\n\t\t\t// element since clicking on a non-focusable element should focus\n\t\t\t// the body anyway.\n\t\t\t.delegate( \".ui-tabs-anchor\", \"focus\" + this.eventNamespace, function() {\n\t\t\t\tif ( $( this ).closest( \"li\" ).is( \".ui-state-disabled\" ) ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.tabs = this.tablist.find( \"> li:has(a[href])\" )\n\t\t\t.addClass( \"ui-state-default ui-corner-top\" )\n\t\t\t.attr({\n\t\t\t\trole: \"tab\",\n\t\t\t\ttabIndex: -1\n\t\t\t});\n\n\t\tthis.anchors = this.tabs.map(function() {\n\t\t\t\treturn $( \"a\", this )[ 0 ];\n\t\t\t})\n\t\t\t.addClass( \"ui-tabs-anchor\" )\n\t\t\t.attr({\n\t\t\t\trole: \"presentation\",\n\t\t\t\ttabIndex: -1\n\t\t\t});\n\n\t\tthis.panels = $();\n\n\t\tthis.anchors.each(function( i, anchor ) {\n\t\t\tvar selector, panel, panelId,\n\t\t\t\tanchorId = $( anchor ).uniqueId().attr( \"id\" ),\n\t\t\t\ttab = $( anchor ).closest( \"li\" ),\n\t\t\t\toriginalAriaControls = tab.attr( \"aria-controls\" );\n\n\t\t\t// inline tab\n\t\t\tif ( that._isLocal( anchor ) ) {\n\t\t\t\tselector = anchor.hash;\n\t\t\t\tpanelId = selector.substring( 1 );\n\t\t\t\tpanel = that.element.find( that._sanitizeSelector( selector ) );\n\t\t\t// remote tab\n\t\t\t} else {\n\t\t\t\t// If the tab doesn't already have aria-controls,\n\t\t\t\t// generate an id by using a throw-away element\n\t\t\t\tpanelId = tab.attr( \"aria-controls\" ) || $( {} ).uniqueId()[ 0 ].id;\n\t\t\t\tselector = \"#\" + panelId;\n\t\t\t\tpanel = that.element.find( selector );\n\t\t\t\tif ( !panel.length ) {\n\t\t\t\t\tpanel = that._createPanel( panelId );\n\t\t\t\t\tpanel.insertAfter( that.panels[ i - 1 ] || that.tablist );\n\t\t\t\t}\n\t\t\t\tpanel.attr( \"aria-live\", \"polite\" );\n\t\t\t}\n\n\t\t\tif ( panel.length) {\n\t\t\t\tthat.panels = that.panels.add( panel );\n\t\t\t}\n\t\t\tif ( originalAriaControls ) {\n\t\t\t\ttab.data( \"ui-tabs-aria-controls\", originalAriaControls );\n\t\t\t}\n\t\t\ttab.attr({\n\t\t\t\t\"aria-controls\": panelId,\n\t\t\t\t\"aria-labelledby\": anchorId\n\t\t\t});\n\t\t\tpanel.attr( \"aria-labelledby\", anchorId );\n\t\t});\n\n\t\tthis.panels\n\t\t\t.addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n\t\t\t.attr( \"role\", \"tabpanel\" );\n\n\t\t// Avoid memory leaks (#10056)\n\t\tif ( prevTabs ) {\n\t\t\tthis._off( prevTabs.not( this.tabs ) );\n\t\t\tthis._off( prevAnchors.not( this.anchors ) );\n\t\t\tthis._off( prevPanels.not( this.panels ) );\n\t\t}\n\t},\n\n\t// allow overriding how to find the list for rare usage scenarios (#7715)\n\t_getList: function() {\n\t\treturn this.tablist || this.element.find( \"ol,ul\" ).eq( 0 );\n\t},\n\n\t_createPanel: function( id ) {\n\t\treturn $( \"<div>\" )\n\t\t\t.attr( \"id\", id )\n\t\t\t.addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n\t\t\t.data( \"ui-tabs-destroy\", true );\n\t},\n\n\t_setupDisabled: function( disabled ) {\n\t\tif ( $.isArray( disabled ) ) {\n\t\t\tif ( !disabled.length ) {\n\t\t\t\tdisabled = false;\n\t\t\t} else if ( disabled.length === this.anchors.length ) {\n\t\t\t\tdisabled = true;\n\t\t\t}\n\t\t}\n\n\t\t// disable tabs\n\t\tfor ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {\n\t\t\tif ( disabled === true || $.inArray( i, disabled ) !== -1 ) {\n\t\t\t\t$( li )\n\t\t\t\t\t.addClass( \"ui-state-disabled\" )\n\t\t\t\t\t.attr( \"aria-disabled\", \"true\" );\n\t\t\t} else {\n\t\t\t\t$( li )\n\t\t\t\t\t.removeClass( \"ui-state-disabled\" )\n\t\t\t\t\t.removeAttr( \"aria-disabled\" );\n\t\t\t}\n\t\t}\n\n\t\tthis.options.disabled = disabled;\n\t},\n\n\t_setupEvents: function( event ) {\n\t\tvar events = {};\n\t\tif ( event ) {\n\t\t\t$.each( event.split(\" \"), function( index, eventName ) {\n\t\t\t\tevents[ eventName ] = \"_eventHandler\";\n\t\t\t});\n\t\t}\n\n\t\tthis._off( this.anchors.add( this.tabs ).add( this.panels ) );\n\t\t// Always prevent the default action, even when disabled\n\t\tthis._on( true, this.anchors, {\n\t\t\tclick: function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t});\n\t\tthis._on( this.anchors, events );\n\t\tthis._on( this.tabs, { keydown: \"_tabKeydown\" } );\n\t\tthis._on( this.panels, { keydown: \"_panelKeydown\" } );\n\n\t\tthis._focusable( this.tabs );\n\t\tthis._hoverable( this.tabs );\n\t},\n\n\t_setupHeightStyle: function( heightStyle ) {\n\t\tvar maxHeight,\n\t\t\tparent = this.element.parent();\n\n\t\tif ( heightStyle === \"fill\" ) {\n\t\t\tmaxHeight = parent.height();\n\t\t\tmaxHeight -= this.element.outerHeight() - this.element.height();\n\n\t\t\tthis.element.siblings( \":visible\" ).each(function() {\n\t\t\t\tvar elem = $( this ),\n\t\t\t\t\tposition = elem.css( \"position\" );\n\n\t\t\t\tif ( position === \"absolute\" || position === \"fixed\" ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tmaxHeight -= elem.outerHeight( true );\n\t\t\t});\n\n\t\t\tthis.element.children().not( this.panels ).each(function() {\n\t\t\t\tmaxHeight -= $( this ).outerHeight( true );\n\t\t\t});\n\n\t\t\tthis.panels.each(function() {\n\t\t\t\t$( this ).height( Math.max( 0, maxHeight -\n\t\t\t\t\t$( this ).innerHeight() + $( this ).height() ) );\n\t\t\t})\n\t\t\t.css( \"overflow\", \"auto\" );\n\t\t} else if ( heightStyle === \"auto\" ) {\n\t\t\tmaxHeight = 0;\n\t\t\tthis.panels.each(function() {\n\t\t\t\tmaxHeight = Math.max( maxHeight, $( this ).height( \"\" ).height() );\n\t\t\t}).height( maxHeight );\n\t\t}\n\t},\n\n\t_eventHandler: function( event ) {\n\t\tvar options = this.options,\n\t\t\tactive = this.active,\n\t\t\tanchor = $( event.currentTarget ),\n\t\t\ttab = anchor.closest( \"li\" ),\n\t\t\tclickedIsActive = tab[ 0 ] === active[ 0 ],\n\t\t\tcollapsing = clickedIsActive && options.collapsible,\n\t\t\ttoShow = collapsing ? $() : this._getPanelForTab( tab ),\n\t\t\ttoHide = !active.length ? $() : this._getPanelForTab( active ),\n\t\t\teventData = {\n\t\t\t\toldTab: active,\n\t\t\t\toldPanel: toHide,\n\t\t\t\tnewTab: collapsing ? $() : tab,\n\t\t\t\tnewPanel: toShow\n\t\t\t};\n\n\t\tevent.preventDefault();\n\n\t\tif ( tab.hasClass( \"ui-state-disabled\" ) ||\n\t\t\t\t// tab is already loading\n\t\t\t\ttab.hasClass( \"ui-tabs-loading\" ) ||\n\t\t\t\t// can't switch durning an animation\n\t\t\t\tthis.running ||\n\t\t\t\t// click on active header, but not collapsible\n\t\t\t\t( clickedIsActive && !options.collapsible ) ||\n\t\t\t\t// allow canceling activation\n\t\t\t\t( this._trigger( \"beforeActivate\", event, eventData ) === false ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\toptions.active = collapsing ? false : this.tabs.index( tab );\n\n\t\tthis.active = clickedIsActive ? $() : tab;\n\t\tif ( this.xhr ) {\n\t\t\tthis.xhr.abort();\n\t\t}\n\n\t\tif ( !toHide.length && !toShow.length ) {\n\t\t\t$.error( \"jQuery UI Tabs: Mismatching fragment identifier.\" );\n\t\t}\n\n\t\tif ( toShow.length ) {\n\t\t\tthis.load( this.tabs.index( tab ), event );\n\t\t}\n\t\tthis._toggle( event, eventData );\n\t},\n\n\t// handles show/hide for selecting tabs\n\t_toggle: function( event, eventData ) {\n\t\tvar that = this,\n\t\t\ttoShow = eventData.newPanel,\n\t\t\ttoHide = eventData.oldPanel;\n\n\t\tthis.running = true;\n\n\t\tfunction complete() {\n\t\t\tthat.running = false;\n\t\t\tthat._trigger( \"activate\", event, eventData );\n\t\t}\n\n\t\tfunction show() {\n\t\t\teventData.newTab.closest( \"li\" ).addClass( \"ui-tabs-active ui-state-active\" );\n\n\t\t\tif ( toShow.length && that.options.show ) {\n\t\t\t\tthat._show( toShow, that.options.show, complete );\n\t\t\t} else {\n\t\t\t\ttoShow.show();\n\t\t\t\tcomplete();\n\t\t\t}\n\t\t}\n\n\t\t// start out by hiding, then showing, then completing\n\t\tif ( toHide.length && this.options.hide ) {\n\t\t\tthis._hide( toHide, this.options.hide, function() {\n\t\t\t\teventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n\t\t\t\tshow();\n\t\t\t});\n\t\t} else {\n\t\t\teventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n\t\t\ttoHide.hide();\n\t\t\tshow();\n\t\t}\n\n\t\ttoHide.attr( \"aria-hidden\", \"true\" );\n\t\teventData.oldTab.attr({\n\t\t\t\"aria-selected\": \"false\",\n\t\t\t\"aria-expanded\": \"false\"\n\t\t});\n\t\t// If we're switching tabs, remove the old tab from the tab order.\n\t\t// If we're opening from collapsed state, remove the previous tab from the tab order.\n\t\t// If we're collapsing, then keep the collapsing tab in the tab order.\n\t\tif ( toShow.length && toHide.length ) {\n\t\t\teventData.oldTab.attr( \"tabIndex\", -1 );\n\t\t} else if ( toShow.length ) {\n\t\t\tthis.tabs.filter(function() {\n\t\t\t\treturn $( this ).attr( \"tabIndex\" ) === 0;\n\t\t\t})\n\t\t\t.attr( \"tabIndex\", -1 );\n\t\t}\n\n\t\ttoShow.attr( \"aria-hidden\", \"false\" );\n\t\teventData.newTab.attr({\n\t\t\t\"aria-selected\": \"true\",\n\t\t\t\"aria-expanded\": \"true\",\n\t\t\ttabIndex: 0\n\t\t});\n\t},\n\n\t_activate: function( index ) {\n\t\tvar anchor,\n\t\t\tactive = this._findActive( index );\n\n\t\t// trying to activate the already active panel\n\t\tif ( active[ 0 ] === this.active[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// trying to collapse, simulate a click on the current active header\n\t\tif ( !active.length ) {\n\t\t\tactive = this.active;\n\t\t}\n\n\t\tanchor = active.find( \".ui-tabs-anchor\" )[ 0 ];\n\t\tthis._eventHandler({\n\t\t\ttarget: anchor,\n\t\t\tcurrentTarget: anchor,\n\t\t\tpreventDefault: $.noop\n\t\t});\n\t},\n\n\t_findActive: function( index ) {\n\t\treturn index === false ? $() : this.tabs.eq( index );\n\t},\n\n\t_getIndex: function( index ) {\n\t\t// meta-function to give users option to provide a href string instead of a numerical index.\n\t\tif ( typeof index === \"string\" ) {\n\t\t\tindex = this.anchors.index( this.anchors.filter( \"[href$='\" + index + \"']\" ) );\n\t\t}\n\n\t\treturn index;\n\t},\n\n\t_destroy: function() {\n\t\tif ( this.xhr ) {\n\t\t\tthis.xhr.abort();\n\t\t}\n\n\t\tthis.element.removeClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible\" );\n\n\t\tthis.tablist\n\t\t\t.removeClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n\t\t\t.removeAttr( \"role\" );\n\n\t\tthis.anchors\n\t\t\t.removeClass( \"ui-tabs-anchor\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t.removeUniqueId();\n\n\t\tthis.tablist.unbind( this.eventNamespace );\n\n\t\tthis.tabs.add( this.panels ).each(function() {\n\t\t\tif ( $.data( this, \"ui-tabs-destroy\" ) ) {\n\t\t\t\t$( this ).remove();\n\t\t\t} else {\n\t\t\t\t$( this )\n\t\t\t\t\t.removeClass( \"ui-state-default ui-state-active ui-state-disabled \" +\n\t\t\t\t\t\t\"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel\" )\n\t\t\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t\t\t.removeAttr( \"aria-live\" )\n\t\t\t\t\t.removeAttr( \"aria-busy\" )\n\t\t\t\t\t.removeAttr( \"aria-selected\" )\n\t\t\t\t\t.removeAttr( \"aria-labelledby\" )\n\t\t\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t\t\t.removeAttr( \"aria-expanded\" )\n\t\t\t\t\t.removeAttr( \"role\" );\n\t\t\t}\n\t\t});\n\n\t\tthis.tabs.each(function() {\n\t\t\tvar li = $( this ),\n\t\t\t\tprev = li.data( \"ui-tabs-aria-controls\" );\n\t\t\tif ( prev ) {\n\t\t\t\tli\n\t\t\t\t\t.attr( \"aria-controls\", prev )\n\t\t\t\t\t.removeData( \"ui-tabs-aria-controls\" );\n\t\t\t} else {\n\t\t\t\tli.removeAttr( \"aria-controls\" );\n\t\t\t}\n\t\t});\n\n\t\tthis.panels.show();\n\n\t\tif ( this.options.heightStyle !== \"content\" ) {\n\t\t\tthis.panels.css( \"height\", \"\" );\n\t\t}\n\t},\n\n\tenable: function( index ) {\n\t\tvar disabled = this.options.disabled;\n\t\tif ( disabled === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( index === undefined ) {\n\t\t\tdisabled = false;\n\t\t} else {\n\t\t\tindex = this._getIndex( index );\n\t\t\tif ( $.isArray( disabled ) ) {\n\t\t\t\tdisabled = $.map( disabled, function( num ) {\n\t\t\t\t\treturn num !== index ? num : null;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdisabled = $.map( this.tabs, function( li, num ) {\n\t\t\t\t\treturn num !== index ? num : null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tthis._setupDisabled( disabled );\n\t},\n\n\tdisable: function( index ) {\n\t\tvar disabled = this.options.disabled;\n\t\tif ( disabled === true ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( index === undefined ) {\n\t\t\tdisabled = true;\n\t\t} else {\n\t\t\tindex = this._getIndex( index );\n\t\t\tif ( $.inArray( index, disabled ) !== -1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( $.isArray( disabled ) ) {\n\t\t\t\tdisabled = $.merge( [ index ], disabled ).sort();\n\t\t\t} else {\n\t\t\t\tdisabled = [ index ];\n\t\t\t}\n\t\t}\n\t\tthis._setupDisabled( disabled );\n\t},\n\n\tload: function( index, event ) {\n\t\tindex = this._getIndex( index );\n\t\tvar that = this,\n\t\t\ttab = this.tabs.eq( index ),\n\t\t\tanchor = tab.find( \".ui-tabs-anchor\" ),\n\t\t\tpanel = this._getPanelForTab( tab ),\n\t\t\teventData = {\n\t\t\t\ttab: tab,\n\t\t\t\tpanel: panel\n\t\t\t},\n\t\t\tcomplete = function( jqXHR, status ) {\n\t\t\t\tif ( status === \"abort\" ) {\n\t\t\t\t\tthat.panels.stop( false, true );\n\t\t\t\t}\n\n\t\t\t\ttab.removeClass( \"ui-tabs-loading\" );\n\t\t\t\tpanel.removeAttr( \"aria-busy\" );\n\n\t\t\t\tif ( jqXHR === that.xhr ) {\n\t\t\t\t\tdelete that.xhr;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// not remote\n\t\tif ( this._isLocal( anchor[ 0 ] ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );\n\n\t\t// support: jQuery <1.8\n\t\t// jQuery <1.8 returns false if the request is canceled in beforeSend,\n\t\t// but as of 1.8, $.ajax() always returns a jqXHR object.\n\t\tif ( this.xhr && this.xhr.statusText !== \"canceled\" ) {\n\t\t\ttab.addClass( \"ui-tabs-loading\" );\n\t\t\tpanel.attr( \"aria-busy\", \"true\" );\n\n\t\t\tthis.xhr\n\t\t\t\t.done(function( response, status, jqXHR ) {\n\t\t\t\t\t// support: jQuery <1.8\n\t\t\t\t\t// http://bugs.jquery.com/ticket/11778\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tpanel.html( response );\n\t\t\t\t\t\tthat._trigger( \"load\", event, eventData );\n\n\t\t\t\t\t\tcomplete( jqXHR, status );\n\t\t\t\t\t}, 1 );\n\t\t\t\t})\n\t\t\t\t.fail(function( jqXHR, status ) {\n\t\t\t\t\t// support: jQuery <1.8\n\t\t\t\t\t// http://bugs.jquery.com/ticket/11778\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tcomplete( jqXHR, status );\n\t\t\t\t\t}, 1 );\n\t\t\t\t});\n\t\t}\n\t},\n\n\t_ajaxSettings: function( anchor, event, eventData ) {\n\t\tvar that = this;\n\t\treturn {\n\t\t\turl: anchor.attr( \"href\" ),\n\t\t\tbeforeSend: function( jqXHR, settings ) {\n\t\t\t\treturn that._trigger( \"beforeLoad\", event,\n\t\t\t\t\t$.extend( { jqXHR: jqXHR, ajaxSettings: settings }, eventData ) );\n\t\t\t}\n\t\t};\n\t},\n\n\t_getPanelForTab: function( tab ) {\n\t\tvar id = $( tab ).attr( \"aria-controls\" );\n\t\treturn this.element.find( this._sanitizeSelector( \"#\" + id ) );\n\t}\n});\n\n\n/*!\n * jQuery UI Tooltip 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/tooltip/\n */\n\n\nvar tooltip = $.widget( \"ui.tooltip\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tcontent: function() {\n\t\t\t// support: IE<9, Opera in jQuery <1.7\n\t\t\t// .text() can't accept undefined, so coerce to a string\n\t\t\tvar title = $( this ).attr( \"title\" ) || \"\";\n\t\t\t// Escape title, since we're going from an attribute to raw HTML\n\t\t\treturn $( \"<a>\" ).text( title ).html();\n\t\t},\n\t\thide: true,\n\t\t// Disabled elements have inconsistent behavior across browsers (#8661)\n\t\titems: \"[title]:not([disabled])\",\n\t\tposition: {\n\t\t\tmy: \"left top+15\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"flipfit flip\"\n\t\t},\n\t\tshow: true,\n\t\ttooltipClass: null,\n\t\ttrack: false,\n\n\t\t// callbacks\n\t\tclose: null,\n\t\topen: null\n\t},\n\n\t_addDescribedBy: function( elem, id ) {\n\t\tvar describedby = (elem.attr( \"aria-describedby\" ) || \"\").split( /\\s+/ );\n\t\tdescribedby.push( id );\n\t\telem\n\t\t\t.data( \"ui-tooltip-id\", id )\n\t\t\t.attr( \"aria-describedby\", $.trim( describedby.join( \" \" ) ) );\n\t},\n\n\t_removeDescribedBy: function( elem ) {\n\t\tvar id = elem.data( \"ui-tooltip-id\" ),\n\t\t\tdescribedby = (elem.attr( \"aria-describedby\" ) || \"\").split( /\\s+/ ),\n\t\t\tindex = $.inArray( id, describedby );\n\n\t\tif ( index !== -1 ) {\n\t\t\tdescribedby.splice( index, 1 );\n\t\t}\n\n\t\telem.removeData( \"ui-tooltip-id\" );\n\t\tdescribedby = $.trim( describedby.join( \" \" ) );\n\t\tif ( describedby ) {\n\t\t\telem.attr( \"aria-describedby\", describedby );\n\t\t} else {\n\t\t\telem.removeAttr( \"aria-describedby\" );\n\t\t}\n\t},\n\n\t_create: function() {\n\t\tthis._on({\n\t\t\tmouseover: \"open\",\n\t\t\tfocusin: \"open\"\n\t\t});\n\n\t\t// IDs of generated tooltips, needed for destroy\n\t\tthis.tooltips = {};\n\n\t\t// IDs of parent tooltips where we removed the title attribute\n\t\tthis.parents = {};\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis._disable();\n\t\t}\n\n\t\t// Append the aria-live region so tooltips announce correctly\n\t\tthis.liveRegion = $( \"<div>\" )\n\t\t\t.attr({\n\t\t\t\trole: \"log\",\n\t\t\t\t\"aria-live\": \"assertive\",\n\t\t\t\t\"aria-relevant\": \"additions\"\n\t\t\t})\n\t\t\t.addClass( \"ui-helper-hidden-accessible\" )\n\t\t\t.appendTo( this.document[ 0 ].body );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar that = this;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis[ value ? \"_disable\" : \"_enable\" ]();\n\t\t\tthis.options[ key ] = value;\n\t\t\t// disable element style changes\n\t\t\treturn;\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"content\" ) {\n\t\t\t$.each( this.tooltips, function( id, tooltipData ) {\n\t\t\t\tthat._updateContent( tooltipData.element );\n\t\t\t});\n\t\t}\n\t},\n\n\t_disable: function() {\n\t\tvar that = this;\n\n\t\t// close open tooltips\n\t\t$.each( this.tooltips, function( id, tooltipData ) {\n\t\t\tvar event = $.Event( \"blur\" );\n\t\t\tevent.target = event.currentTarget = tooltipData.element[ 0 ];\n\t\t\tthat.close( event, true );\n\t\t});\n\n\t\t// remove title attributes to prevent native tooltips\n\t\tthis.element.find( this.options.items ).addBack().each(function() {\n\t\t\tvar element = $( this );\n\t\t\tif ( element.is( \"[title]\" ) ) {\n\t\t\t\telement\n\t\t\t\t\t.data( \"ui-tooltip-title\", element.attr( \"title\" ) )\n\t\t\t\t\t.removeAttr( \"title\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_enable: function() {\n\t\t// restore title attributes\n\t\tthis.element.find( this.options.items ).addBack().each(function() {\n\t\t\tvar element = $( this );\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\n\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\n\t\t\t}\n\t\t});\n\t},\n\n\topen: function( event ) {\n\t\tvar that = this,\n\t\t\ttarget = $( event ? event.target : this.element )\n\t\t\t\t// we need closest here due to mouseover bubbling,\n\t\t\t\t// but always pointing at the same event target\n\t\t\t\t.closest( this.options.items );\n\n\t\t// No element to show a tooltip for or the tooltip is already open\n\t\tif ( !target.length || target.data( \"ui-tooltip-id\" ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( target.attr( \"title\" ) ) {\n\t\t\ttarget.data( \"ui-tooltip-title\", target.attr( \"title\" ) );\n\t\t}\n\n\t\ttarget.data( \"ui-tooltip-open\", true );\n\n\t\t// kill parent tooltips, custom or native, for hover\n\t\tif ( event && event.type === \"mouseover\" ) {\n\t\t\ttarget.parents().each(function() {\n\t\t\t\tvar parent = $( this ),\n\t\t\t\t\tblurEvent;\n\t\t\t\tif ( parent.data( \"ui-tooltip-open\" ) ) {\n\t\t\t\t\tblurEvent = $.Event( \"blur\" );\n\t\t\t\t\tblurEvent.target = blurEvent.currentTarget = this;\n\t\t\t\t\tthat.close( blurEvent, true );\n\t\t\t\t}\n\t\t\t\tif ( parent.attr( \"title\" ) ) {\n\t\t\t\t\tparent.uniqueId();\n\t\t\t\t\tthat.parents[ this.id ] = {\n\t\t\t\t\t\telement: this,\n\t\t\t\t\t\ttitle: parent.attr( \"title\" )\n\t\t\t\t\t};\n\t\t\t\t\tparent.attr( \"title\", \"\" );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis._registerCloseHandlers( event, target );\n\t\tthis._updateContent( target, event );\n\t},\n\n\t_updateContent: function( target, event ) {\n\t\tvar content,\n\t\t\tcontentOption = this.options.content,\n\t\t\tthat = this,\n\t\t\teventType = event ? event.type : null;\n\n\t\tif ( typeof contentOption === \"string\" ) {\n\t\t\treturn this._open( event, target, contentOption );\n\t\t}\n\n\t\tcontent = contentOption.call( target[0], function( response ) {\n\n\t\t\t// IE may instantly serve a cached response for ajax requests\n\t\t\t// delay this call to _open so the other call to _open runs first\n\t\t\tthat._delay(function() {\n\n\t\t\t\t// Ignore async response if tooltip was closed already\n\t\t\t\tif ( !target.data( \"ui-tooltip-open\" ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// jQuery creates a special event for focusin when it doesn't\n\t\t\t\t// exist natively. To improve performance, the native event\n\t\t\t\t// object is reused and the type is changed. Therefore, we can't\n\t\t\t\t// rely on the type being correct after the event finished\n\t\t\t\t// bubbling, so we set it back to the previous value. (#8740)\n\t\t\t\tif ( event ) {\n\t\t\t\t\tevent.type = eventType;\n\t\t\t\t}\n\t\t\t\tthis._open( event, target, response );\n\t\t\t});\n\t\t});\n\t\tif ( content ) {\n\t\t\tthis._open( event, target, content );\n\t\t}\n\t},\n\n\t_open: function( event, target, content ) {\n\t\tvar tooltipData, tooltip, delayedShow, a11yContent,\n\t\t\tpositionOption = $.extend( {}, this.options.position );\n\n\t\tif ( !content ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Content can be updated multiple times. If the tooltip already\n\t\t// exists, then just update the content and bail.\n\t\ttooltipData = this._find( target );\n\t\tif ( tooltipData ) {\n\t\t\ttooltipData.tooltip.find( \".ui-tooltip-content\" ).html( content );\n\t\t\treturn;\n\t\t}\n\n\t\t// if we have a title, clear it to prevent the native tooltip\n\t\t// we have to check first to avoid defining a title if none exists\n\t\t// (we don't want to cause an element to start matching [title])\n\t\t//\n\t\t// We use removeAttr only for key events, to allow IE to export the correct\n\t\t// accessible attributes. For mouse events, set to empty string to avoid\n\t\t// native tooltip showing up (happens only when removing inside mouseover).\n\t\tif ( target.is( \"[title]\" ) ) {\n\t\t\tif ( event && event.type === \"mouseover\" ) {\n\t\t\t\ttarget.attr( \"title\", \"\" );\n\t\t\t} else {\n\t\t\t\ttarget.removeAttr( \"title\" );\n\t\t\t}\n\t\t}\n\n\t\ttooltipData = this._tooltip( target );\n\t\ttooltip = tooltipData.tooltip;\n\t\tthis._addDescribedBy( target, tooltip.attr( \"id\" ) );\n\t\ttooltip.find( \".ui-tooltip-content\" ).html( content );\n\n\t\t// Support: Voiceover on OS X, JAWS on IE <= 9\n\t\t// JAWS announces deletions even when aria-relevant=\"additions\"\n\t\t// Voiceover will sometimes re-read the entire log region's contents from the beginning\n\t\tthis.liveRegion.children().hide();\n\t\tif ( content.clone ) {\n\t\t\ta11yContent = content.clone();\n\t\t\ta11yContent.removeAttr( \"id\" ).find( \"[id]\" ).removeAttr( \"id\" );\n\t\t} else {\n\t\t\ta11yContent = content;\n\t\t}\n\t\t$( \"<div>\" ).html( a11yContent ).appendTo( this.liveRegion );\n\n\t\tfunction position( event ) {\n\t\t\tpositionOption.of = event;\n\t\t\tif ( tooltip.is( \":hidden\" ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttooltip.position( positionOption );\n\t\t}\n\t\tif ( this.options.track && event && /^mouse/.test( event.type ) ) {\n\t\t\tthis._on( this.document, {\n\t\t\t\tmousemove: position\n\t\t\t});\n\t\t\t// trigger once to override element-relative positioning\n\t\t\tposition( event );\n\t\t} else {\n\t\t\ttooltip.position( $.extend({\n\t\t\t\tof: target\n\t\t\t}, this.options.position ) );\n\t\t}\n\n\t\ttooltip.hide();\n\n\t\tthis._show( tooltip, this.options.show );\n\t\t// Handle tracking tooltips that are shown with a delay (#8644). As soon\n\t\t// as the tooltip is visible, position the tooltip using the most recent\n\t\t// event.\n\t\tif ( this.options.show && this.options.show.delay ) {\n\t\t\tdelayedShow = this.delayedShow = setInterval(function() {\n\t\t\t\tif ( tooltip.is( \":visible\" ) ) {\n\t\t\t\t\tposition( positionOption.of );\n\t\t\t\t\tclearInterval( delayedShow );\n\t\t\t\t}\n\t\t\t}, $.fx.interval );\n\t\t}\n\n\t\tthis._trigger( \"open\", event, { tooltip: tooltip } );\n\t},\n\n\t_registerCloseHandlers: function( event, target ) {\n\t\tvar events = {\n\t\t\tkeyup: function( event ) {\n\t\t\t\tif ( event.keyCode === $.ui.keyCode.ESCAPE ) {\n\t\t\t\t\tvar fakeEvent = $.Event(event);\n\t\t\t\t\tfakeEvent.currentTarget = target[0];\n\t\t\t\t\tthis.close( fakeEvent, true );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Only bind remove handler for delegated targets. Non-delegated\n\t\t// tooltips will handle this in destroy.\n\t\tif ( target[ 0 ] !== this.element[ 0 ] ) {\n\t\t\tevents.remove = function() {\n\t\t\t\tthis._removeTooltip( this._find( target ).tooltip );\n\t\t\t};\n\t\t}\n\n\t\tif ( !event || event.type === \"mouseover\" ) {\n\t\t\tevents.mouseleave = \"close\";\n\t\t}\n\t\tif ( !event || event.type === \"focusin\" ) {\n\t\t\tevents.focusout = \"close\";\n\t\t}\n\t\tthis._on( true, target, events );\n\t},\n\n\tclose: function( event ) {\n\t\tvar tooltip,\n\t\t\tthat = this,\n\t\t\ttarget = $( event ? event.currentTarget : this.element ),\n\t\t\ttooltipData = this._find( target );\n\n\t\t// The tooltip may already be closed\n\t\tif ( !tooltipData ) {\n\n\t\t\t// We set ui-tooltip-open immediately upon open (in open()), but only set the\n\t\t\t// additional data once there's actually content to show (in _open()). So even if the\n\t\t\t// tooltip doesn't have full data, we always remove ui-tooltip-open in case we're in\n\t\t\t// the period between open() and _open().\n\t\t\ttarget.removeData( \"ui-tooltip-open\" );\n\t\t\treturn;\n\t\t}\n\n\t\ttooltip = tooltipData.tooltip;\n\n\t\t// disabling closes the tooltip, so we need to track when we're closing\n\t\t// to avoid an infinite loop in case the tooltip becomes disabled on close\n\t\tif ( tooltipData.closing ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Clear the interval for delayed tracking tooltips\n\t\tclearInterval( this.delayedShow );\n\n\t\t// only set title if we had one before (see comment in _open())\n\t\t// If the title attribute has changed since open(), don't restore\n\t\tif ( target.data( \"ui-tooltip-title\" ) && !target.attr( \"title\" ) ) {\n\t\t\ttarget.attr( \"title\", target.data( \"ui-tooltip-title\" ) );\n\t\t}\n\n\t\tthis._removeDescribedBy( target );\n\n\t\ttooltipData.hiding = true;\n\t\ttooltip.stop( true );\n\t\tthis._hide( tooltip, this.options.hide, function() {\n\t\t\tthat._removeTooltip( $( this ) );\n\t\t});\n\n\t\ttarget.removeData( \"ui-tooltip-open\" );\n\t\tthis._off( target, \"mouseleave focusout keyup\" );\n\n\t\t// Remove 'remove' binding only on delegated targets\n\t\tif ( target[ 0 ] !== this.element[ 0 ] ) {\n\t\t\tthis._off( target, \"remove\" );\n\t\t}\n\t\tthis._off( this.document, \"mousemove\" );\n\n\t\tif ( event && event.type === \"mouseleave\" ) {\n\t\t\t$.each( this.parents, function( id, parent ) {\n\t\t\t\t$( parent.element ).attr( \"title\", parent.title );\n\t\t\t\tdelete that.parents[ id ];\n\t\t\t});\n\t\t}\n\n\t\ttooltipData.closing = true;\n\t\tthis._trigger( \"close\", event, { tooltip: tooltip } );\n\t\tif ( !tooltipData.hiding ) {\n\t\t\ttooltipData.closing = false;\n\t\t}\n\t},\n\n\t_tooltip: function( element ) {\n\t\tvar tooltip = $( \"<div>\" )\n\t\t\t\t.attr( \"role\", \"tooltip\" )\n\t\t\t\t.addClass( \"ui-tooltip ui-widget ui-corner-all ui-widget-content \" +\n\t\t\t\t\t( this.options.tooltipClass || \"\" ) ),\n\t\t\tid = tooltip.uniqueId().attr( \"id\" );\n\n\t\t$( \"<div>\" )\n\t\t\t.addClass( \"ui-tooltip-content\" )\n\t\t\t.appendTo( tooltip );\n\n\t\ttooltip.appendTo( this.document[0].body );\n\n\t\treturn this.tooltips[ id ] = {\n\t\t\telement: element,\n\t\t\ttooltip: tooltip\n\t\t};\n\t},\n\n\t_find: function( target ) {\n\t\tvar id = target.data( \"ui-tooltip-id\" );\n\t\treturn id ? this.tooltips[ id ] : null;\n\t},\n\n\t_removeTooltip: function( tooltip ) {\n\t\ttooltip.remove();\n\t\tdelete this.tooltips[ tooltip.attr( \"id\" ) ];\n\t},\n\n\t_destroy: function() {\n\t\tvar that = this;\n\n\t\t// close open tooltips\n\t\t$.each( this.tooltips, function( id, tooltipData ) {\n\t\t\t// Delegate to close method to handle common cleanup\n\t\t\tvar event = $.Event( \"blur\" ),\n\t\t\t\telement = tooltipData.element;\n\t\t\tevent.target = event.currentTarget = element[ 0 ];\n\t\t\tthat.close( event, true );\n\n\t\t\t// Remove immediately; destroying an open tooltip doesn't use the\n\t\t\t// hide animation\n\t\t\t$( \"#\" + id ).remove();\n\n\t\t\t// Restore the title\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\n\t\t\t\t// If the title attribute has changed since open(), don't restore\n\t\t\t\tif ( !element.attr( \"title\" ) ) {\n\t\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\n\t\t\t\t}\n\t\t\t\telement.removeData( \"ui-tooltip-title\" );\n\t\t\t}\n\t\t});\n\t\tthis.liveRegion.remove();\n\t}\n});\n\n\n\n}));",
    "\n(function() {\n  var Dragster,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  Dragster = (function() {\n    function Dragster(el) {\n      this.el = el;\n      this.dragleave = __bind(this.dragleave, this);\n      this.dragenter = __bind(this.dragenter, this);\n      if (this.supportsEventConstructors()) {\n        this.first = false;\n        this.second = false;\n        this.el.addEventListener(\"dragenter\", this.dragenter, false);\n        this.el.addEventListener(\"dragleave\", this.dragleave, false);\n      }\n    }\n\n    Dragster.prototype.dragenter = function(event) {\n      if (this.first) {\n        return this.second = true;\n      } else {\n        this.first = true;\n        return this.el.dispatchEvent(new CustomEvent(\"dragster:enter\", {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            dataTransfer: event.dataTransfer\n          }\n        }));\n      }\n    };\n\n    Dragster.prototype.dragleave = function(event) {\n      if (this.second) {\n        this.second = false;\n      } else if (this.first) {\n        this.first = false;\n      }\n      if (!this.first && !this.second) {\n        return this.el.dispatchEvent(new CustomEvent(\"dragster:leave\", {\n          bubbles: true,\n          cancelable: true,\n          detail: {\n            dataTransfer: event.dataTransfer\n          }\n        }));\n      }\n    };\n\n    Dragster.prototype.removeListeners = function() {\n      this.el.removeEventListener(\"dragenter\", this.dragenter, false);\n      return this.el.removeEventListener(\"dragleave\", this.dragleave, false);\n    };\n\n    Dragster.prototype.supportsEventConstructors = function() {\n      try {\n        new CustomEvent(\"z\");\n      } catch (_error) {\n        return false;\n      }\n      return true;\n    };\n\n    Dragster.prototype.reset = function() {\n      this.first = false;\n      return this.second = false;\n    };\n\n    return Dragster;\n\n  })();\n\n  window.Dragster = Dragster;\n\n}).call(this);\n",
    "\n/*\n *\n * More info at [www.dropzonejs.com](http://www.dropzonejs.com)\n *\n * Copyright (c) 2012, Matias Meno\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n */\n\n(function() {\n  var Dropzone, Emitter, camelize, contentLoaded, detectVerticalSquash, drawImageIOSFix, noop, without,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  noop = function() {};\n\n  Emitter = (function() {\n    function Emitter() {}\n\n    Emitter.prototype.addEventListener = Emitter.prototype.on;\n\n    Emitter.prototype.on = function(event, fn) {\n      this._callbacks = this._callbacks || {};\n      if (!this._callbacks[event]) {\n        this._callbacks[event] = [];\n      }\n      this._callbacks[event].push(fn);\n      return this;\n    };\n\n    Emitter.prototype.emit = function() {\n      var args, callback, callbacks, event, _i, _len;\n      event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      this._callbacks = this._callbacks || {};\n      callbacks = this._callbacks[event];\n      if (callbacks) {\n        for (_i = 0, _len = callbacks.length; _i < _len; _i++) {\n          callback = callbacks[_i];\n          callback.apply(this, args);\n        }\n      }\n      return this;\n    };\n\n    Emitter.prototype.removeListener = Emitter.prototype.off;\n\n    Emitter.prototype.removeAllListeners = Emitter.prototype.off;\n\n    Emitter.prototype.removeEventListener = Emitter.prototype.off;\n\n    Emitter.prototype.off = function(event, fn) {\n      var callback, callbacks, i, _i, _len;\n      if (!this._callbacks || arguments.length === 0) {\n        this._callbacks = {};\n        return this;\n      }\n      callbacks = this._callbacks[event];\n      if (!callbacks) {\n        return this;\n      }\n      if (arguments.length === 1) {\n        delete this._callbacks[event];\n        return this;\n      }\n      for (i = _i = 0, _len = callbacks.length; _i < _len; i = ++_i) {\n        callback = callbacks[i];\n        if (callback === fn) {\n          callbacks.splice(i, 1);\n          break;\n        }\n      }\n      return this;\n    };\n\n    return Emitter;\n\n  })();\n\n  Dropzone = (function(_super) {\n    var extend, resolveOption;\n\n    __extends(Dropzone, _super);\n\n    Dropzone.prototype.Emitter = Emitter;\n\n\n    /*\n    This is a list of all available events you can register on a dropzone object.\n    \n    You can register an event handler like this:\n    \n        dropzone.on(\"dragEnter\", function() { });\n     */\n\n    Dropzone.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\n\n    Dropzone.prototype.defaultOptions = {\n      url: null,\n      method: \"post\",\n      withCredentials: false,\n      parallelUploads: 2,\n      uploadMultiple: false,\n      maxFilesize: 256,\n      paramName: \"file\",\n      createImageThumbnails: true,\n      maxThumbnailFilesize: 10,\n      thumbnailWidth: 120,\n      thumbnailHeight: 120,\n      filesizeBase: 1000,\n      maxFiles: null,\n      filesizeBase: 1000,\n      params: {},\n      clickable: true,\n      ignoreHiddenFiles: true,\n      acceptedFiles: null,\n      acceptedMimeTypes: null,\n      autoProcessQueue: true,\n      autoQueue: true,\n      addRemoveLinks: false,\n      previewsContainer: null,\n      capture: null,\n      dictDefaultMessage: \"Drop files here to upload\",\n      dictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\n      dictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\n      dictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\n      dictInvalidFileType: \"You can't upload files of this type.\",\n      dictResponseError: \"Server responded with {{statusCode}} code.\",\n      dictCancelUpload: \"Cancel upload\",\n      dictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\n      dictRemoveFile: \"Remove file\",\n      dictRemoveFileConfirmation: null,\n      dictMaxFilesExceeded: \"You can not upload any more files.\",\n      accept: function(file, done) {\n        return done();\n      },\n      init: function() {\n        return noop;\n      },\n      forceFallback: false,\n      fallback: function() {\n        var child, messageElement, span, _i, _len, _ref;\n        this.element.className = \"\" + this.element.className + \" dz-browser-not-supported\";\n        _ref = this.element.getElementsByTagName(\"div\");\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          child = _ref[_i];\n          if (/(^| )dz-message($| )/.test(child.className)) {\n            messageElement = child;\n            child.className = \"dz-message\";\n            continue;\n          }\n        }\n        if (!messageElement) {\n          messageElement = Dropzone.createElement(\"<div class=\\\"dz-message\\\"><span></span></div>\");\n          this.element.appendChild(messageElement);\n        }\n        span = messageElement.getElementsByTagName(\"span\")[0];\n        if (span) {\n          span.textContent = this.options.dictFallbackMessage;\n        }\n        return this.element.appendChild(this.getFallbackForm());\n      },\n      resize: function(file) {\n        var info, srcRatio, trgRatio;\n        info = {\n          srcX: 0,\n          srcY: 0,\n          srcWidth: file.width,\n          srcHeight: file.height\n        };\n        srcRatio = file.width / file.height;\n        info.optWidth = this.options.thumbnailWidth;\n        info.optHeight = this.options.thumbnailHeight;\n        if ((info.optWidth == null) && (info.optHeight == null)) {\n          info.optWidth = info.srcWidth;\n          info.optHeight = info.srcHeight;\n        } else if (info.optWidth == null) {\n          info.optWidth = srcRatio * info.optHeight;\n        } else if (info.optHeight == null) {\n          info.optHeight = (1 / srcRatio) * info.optWidth;\n        }\n        trgRatio = info.optWidth / info.optHeight;\n        if (file.height < info.optHeight || file.width < info.optWidth) {\n          info.trgHeight = info.srcHeight;\n          info.trgWidth = info.srcWidth;\n        } else {\n          if (srcRatio > trgRatio) {\n            info.srcHeight = file.height;\n            info.srcWidth = info.srcHeight * trgRatio;\n          } else {\n            info.srcWidth = file.width;\n            info.srcHeight = info.srcWidth / trgRatio;\n          }\n        }\n        info.srcX = (file.width - info.srcWidth) / 2;\n        info.srcY = (file.height - info.srcHeight) / 2;\n        return info;\n      },\n\n      /*\n      Those functions register themselves to the events on init and handle all\n      the user interface specific stuff. Overwriting them won't break the upload\n      but can break the way it's displayed.\n      You can overwrite them if you don't like the default behavior. If you just\n      want to add an additional event handler, register it on the dropzone object\n      and don't overwrite those options.\n       */\n      drop: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragstart: noop,\n      dragend: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragenter: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragover: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragleave: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      paste: noop,\n      reset: function() {\n        return this.element.classList.remove(\"dz-started\");\n      },\n      addedfile: function(file) {\n        var node, removeFileEvent, removeLink, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;\n        if (this.element === this.previewsContainer) {\n          this.element.classList.add(\"dz-started\");\n        }\n        if (this.previewsContainer) {\n          file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\n          file.previewTemplate = file.previewElement;\n          this.previewsContainer.appendChild(file.previewElement);\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-name]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            node.textContent = file.name;\n          }\n          _ref1 = file.previewElement.querySelectorAll(\"[data-dz-size]\");\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            node = _ref1[_j];\n            node.innerHTML = this.filesize(file.size);\n          }\n          if (this.options.addRemoveLinks) {\n            file._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\" + this.options.dictRemoveFile + \"</a>\");\n            file.previewElement.appendChild(file._removeLink);\n          }\n          removeFileEvent = (function(_this) {\n            return function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              if (file.status === Dropzone.UPLOADING) {\n                return Dropzone.confirm(_this.options.dictCancelUploadConfirmation, function() {\n                  return _this.removeFile(file);\n                });\n              } else {\n                if (_this.options.dictRemoveFileConfirmation) {\n                  return Dropzone.confirm(_this.options.dictRemoveFileConfirmation, function() {\n                    return _this.removeFile(file);\n                  });\n                } else {\n                  return _this.removeFile(file);\n                }\n              }\n            };\n          })(this);\n          _ref2 = file.previewElement.querySelectorAll(\"[data-dz-remove]\");\n          _results = [];\n          for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n            removeLink = _ref2[_k];\n            _results.push(removeLink.addEventListener(\"click\", removeFileEvent));\n          }\n          return _results;\n        }\n      },\n      removedfile: function(file) {\n        var _ref;\n        if (file.previewElement) {\n          if ((_ref = file.previewElement) != null) {\n            _ref.parentNode.removeChild(file.previewElement);\n          }\n        }\n        return this._updateMaxFilesReachedClass();\n      },\n      thumbnail: function(file, dataUrl) {\n        var thumbnailElement, _i, _len, _ref;\n        if (file.previewElement) {\n          file.previewElement.classList.remove(\"dz-file-preview\");\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            thumbnailElement = _ref[_i];\n            thumbnailElement.alt = file.name;\n            thumbnailElement.src = dataUrl;\n          }\n          return setTimeout(((function(_this) {\n            return function() {\n              return file.previewElement.classList.add(\"dz-image-preview\");\n            };\n          })(this)), 1);\n        }\n      },\n      error: function(file, message) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-error\");\n          if (typeof message !== \"String\" && message.error) {\n            message = message.error;\n          }\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-errormessage]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            _results.push(node.textContent = message);\n          }\n          return _results;\n        }\n      },\n      errormultiple: noop,\n      processing: function(file) {\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-processing\");\n          if (file._removeLink) {\n            return file._removeLink.textContent = this.options.dictCancelUpload;\n          }\n        }\n      },\n      processingmultiple: noop,\n      uploadprogress: function(file, progress, bytesSent) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            if (node.nodeName === 'PROGRESS') {\n              _results.push(node.value = progress);\n            } else {\n              _results.push(node.style.width = \"\" + progress + \"%\");\n            }\n          }\n          return _results;\n        }\n      },\n      totaluploadprogress: noop,\n      sending: noop,\n      sendingmultiple: noop,\n      success: function(file) {\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-success\");\n        }\n      },\n      successmultiple: noop,\n      canceled: function(file) {\n        return this.emit(\"error\", file, \"Upload canceled.\");\n      },\n      canceledmultiple: noop,\n      complete: function(file) {\n        if (file._removeLink) {\n          file._removeLink.textContent = this.options.dictRemoveFile;\n        }\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-complete\");\n        }\n      },\n      completemultiple: noop,\n      maxfilesexceeded: noop,\n      maxfilesreached: noop,\n      queuecomplete: noop,\n      previewTemplate: \"<div class=\\\"dz-preview dz-file-preview\\\">\\n  <div class=\\\"dz-image\\\"><img data-dz-thumbnail /></div>\\n  <div class=\\\"dz-details\\\">\\n    <div class=\\\"dz-size\\\"><span data-dz-size></span></div>\\n    <div class=\\\"dz-filename\\\"><span data-dz-name></span></div>\\n  </div>\\n  <div class=\\\"dz-progress\\\"><span class=\\\"dz-upload\\\" data-dz-uploadprogress></span></div>\\n  <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div>\\n  <div class=\\\"dz-success-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Check</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\\\"dz-error-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Error</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <g id=\\\"Check-+-Oval-2\\\" sketch:type=\\\"MSLayerGroup\\\" stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\">\\n          <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n        </g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\"\n    };\n\n    extend = function() {\n      var key, object, objects, target, val, _i, _len;\n      target = arguments[0], objects = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      for (_i = 0, _len = objects.length; _i < _len; _i++) {\n        object = objects[_i];\n        for (key in object) {\n          val = object[key];\n          target[key] = val;\n        }\n      }\n      return target;\n    };\n\n    function Dropzone(element, options) {\n      var elementOptions, fallback, _ref;\n      this.element = element;\n      this.version = Dropzone.version;\n      this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\n      this.clickableElements = [];\n      this.listeners = [];\n      this.files = [];\n      if (typeof this.element === \"string\") {\n        this.element = document.querySelector(this.element);\n      }\n      if (!(this.element && (this.element.nodeType != null))) {\n        throw new Error(\"Invalid dropzone element.\");\n      }\n      if (this.element.dropzone) {\n        throw new Error(\"Dropzone already attached.\");\n      }\n      Dropzone.instances.push(this);\n      this.element.dropzone = this;\n      elementOptions = (_ref = Dropzone.optionsForElement(this.element)) != null ? _ref : {};\n      this.options = extend({}, this.defaultOptions, elementOptions, options != null ? options : {});\n      if (this.options.forceFallback || !Dropzone.isBrowserSupported()) {\n        return this.options.fallback.call(this);\n      }\n      if (this.options.url == null) {\n        this.options.url = this.element.getAttribute(\"action\");\n      }\n      if (!this.options.url) {\n        throw new Error(\"No URL provided.\");\n      }\n      if (this.options.acceptedFiles && this.options.acceptedMimeTypes) {\n        throw new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\n      }\n      if (this.options.acceptedMimeTypes) {\n        this.options.acceptedFiles = this.options.acceptedMimeTypes;\n        delete this.options.acceptedMimeTypes;\n      }\n      this.options.method = this.options.method.toUpperCase();\n      if ((fallback = this.getExistingFallback()) && fallback.parentNode) {\n        fallback.parentNode.removeChild(fallback);\n      }\n      if (this.options.previewsContainer !== false) {\n        if (this.options.previewsContainer) {\n          this.previewsContainer = Dropzone.getElement(this.options.previewsContainer, \"previewsContainer\");\n        } else {\n          this.previewsContainer = this.element;\n        }\n      }\n      if (this.options.clickable) {\n        if (this.options.clickable === true) {\n          this.clickableElements = [this.element];\n        } else {\n          this.clickableElements = Dropzone.getElements(this.options.clickable, \"clickable\");\n        }\n      }\n      this.init();\n    }\n\n    Dropzone.prototype.getAcceptedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getRejectedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (!file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getFilesWithStatus = function(status) {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === status) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getQueuedFiles = function() {\n      return this.getFilesWithStatus(Dropzone.QUEUED);\n    };\n\n    Dropzone.prototype.getUploadingFiles = function() {\n      return this.getFilesWithStatus(Dropzone.UPLOADING);\n    };\n\n    Dropzone.prototype.getActiveFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.init = function() {\n      var eventName, noPropagation, setupHiddenFileInput, _i, _len, _ref, _ref1;\n      if (this.element.tagName === \"form\") {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n      }\n      if (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\n        this.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><span>\" + this.options.dictDefaultMessage + \"</span></div>\"));\n      }\n      if (this.clickableElements.length) {\n        setupHiddenFileInput = (function(_this) {\n          return function() {\n            if (_this.hiddenFileInput) {\n              document.body.removeChild(_this.hiddenFileInput);\n            }\n            _this.hiddenFileInput = document.createElement(\"input\");\n            _this.hiddenFileInput.setAttribute(\"type\", \"file\");\n            if ((_this.options.maxFiles == null) || _this.options.maxFiles > 1) {\n              _this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n            }\n            _this.hiddenFileInput.className = \"dz-hidden-input\";\n            if (_this.options.acceptedFiles != null) {\n              _this.hiddenFileInput.setAttribute(\"accept\", _this.options.acceptedFiles);\n            }\n            if (_this.options.capture != null) {\n              _this.hiddenFileInput.setAttribute(\"capture\", _this.options.capture);\n            }\n            _this.hiddenFileInput.style.visibility = \"hidden\";\n            _this.hiddenFileInput.style.position = \"absolute\";\n            _this.hiddenFileInput.style.top = \"0\";\n            _this.hiddenFileInput.style.left = \"0\";\n            _this.hiddenFileInput.style.height = \"0\";\n            _this.hiddenFileInput.style.width = \"0\";\n            document.body.appendChild(_this.hiddenFileInput);\n            return _this.hiddenFileInput.addEventListener(\"change\", function() {\n              var file, files, _i, _len;\n              files = _this.hiddenFileInput.files;\n              if (files.length) {\n                for (_i = 0, _len = files.length; _i < _len; _i++) {\n                  file = files[_i];\n                  _this.addFile(file);\n                }\n              }\n              return setupHiddenFileInput();\n            });\n          };\n        })(this);\n        setupHiddenFileInput();\n      }\n      this.URL = (_ref = window.URL) != null ? _ref : window.webkitURL;\n      _ref1 = this.events;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        eventName = _ref1[_i];\n        this.on(eventName, this.options[eventName]);\n      }\n      this.on(\"uploadprogress\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"removedfile\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"canceled\", (function(_this) {\n        return function(file) {\n          return _this.emit(\"complete\", file);\n        };\n      })(this));\n      this.on(\"complete\", (function(_this) {\n        return function(file) {\n          if (_this.getUploadingFiles().length === 0 && _this.getQueuedFiles().length === 0) {\n            return setTimeout((function() {\n              return _this.emit(\"queuecomplete\");\n            }), 0);\n          }\n        };\n      })(this));\n      noPropagation = function(e) {\n        e.stopPropagation();\n        if (e.preventDefault) {\n          return e.preventDefault();\n        } else {\n          return e.returnValue = false;\n        }\n      };\n      this.listeners = [\n        {\n          element: this.element,\n          events: {\n            \"dragstart\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragstart\", e);\n              };\n            })(this),\n            \"dragenter\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.emit(\"dragenter\", e);\n              };\n            })(this),\n            \"dragover\": (function(_this) {\n              return function(e) {\n                var efct;\n                try {\n                  efct = e.dataTransfer.effectAllowed;\n                } catch (_error) {}\n                e.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';\n                noPropagation(e);\n                return _this.emit(\"dragover\", e);\n              };\n            })(this),\n            \"dragleave\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragleave\", e);\n              };\n            })(this),\n            \"drop\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.drop(e);\n              };\n            })(this),\n            \"dragend\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragend\", e);\n              };\n            })(this)\n          }\n        }\n      ];\n      this.clickableElements.forEach((function(_this) {\n        return function(clickableElement) {\n          return _this.listeners.push({\n            element: clickableElement,\n            events: {\n              \"click\": function(evt) {\n                if ((clickableElement !== _this.element) || (evt.target === _this.element || Dropzone.elementInside(evt.target, _this.element.querySelector(\".dz-message\")))) {\n                  return _this.hiddenFileInput.click();\n                }\n              }\n            }\n          });\n        };\n      })(this));\n      this.enable();\n      return this.options.init.call(this);\n    };\n\n    Dropzone.prototype.destroy = function() {\n      var _ref;\n      this.disable();\n      this.removeAllFiles(true);\n      if ((_ref = this.hiddenFileInput) != null ? _ref.parentNode : void 0) {\n        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n      }\n      delete this.element.dropzone;\n      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\n    };\n\n    Dropzone.prototype.updateTotalUploadProgress = function() {\n      var activeFiles, file, totalBytes, totalBytesSent, totalUploadProgress, _i, _len, _ref;\n      totalBytesSent = 0;\n      totalBytes = 0;\n      activeFiles = this.getActiveFiles();\n      if (activeFiles.length) {\n        _ref = this.getActiveFiles();\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          totalBytesSent += file.upload.bytesSent;\n          totalBytes += file.upload.total;\n        }\n        totalUploadProgress = 100 * totalBytesSent / totalBytes;\n      } else {\n        totalUploadProgress = 100;\n      }\n      return this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\n    };\n\n    Dropzone.prototype._getParamName = function(n) {\n      if (typeof this.options.paramName === \"function\") {\n        return this.options.paramName(n);\n      } else {\n        return \"\" + this.options.paramName + (this.options.uploadMultiple ? \"[\" + n + \"]\" : \"\");\n      }\n    };\n\n    Dropzone.prototype.getFallbackForm = function() {\n      var existingFallback, fields, fieldsString, form;\n      if (existingFallback = this.getExistingFallback()) {\n        return existingFallback;\n      }\n      fieldsString = \"<div class=\\\"dz-fallback\\\">\";\n      if (this.options.dictFallbackText) {\n        fieldsString += \"<p>\" + this.options.dictFallbackText + \"</p>\";\n      }\n      fieldsString += \"<input type=\\\"file\\\" name=\\\"\" + (this._getParamName(0)) + \"\\\" \" + (this.options.uploadMultiple ? 'multiple=\"multiple\"' : void 0) + \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\";\n      fields = Dropzone.createElement(fieldsString);\n      if (this.element.tagName !== \"FORM\") {\n        form = Dropzone.createElement(\"<form action=\\\"\" + this.options.url + \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\" + this.options.method + \"\\\"></form>\");\n        form.appendChild(fields);\n      } else {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n        this.element.setAttribute(\"method\", this.options.method);\n      }\n      return form != null ? form : fields;\n    };\n\n    Dropzone.prototype.getExistingFallback = function() {\n      var fallback, getFallback, tagName, _i, _len, _ref;\n      getFallback = function(elements) {\n        var el, _i, _len;\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )fallback($| )/.test(el.className)) {\n            return el;\n          }\n        }\n      };\n      _ref = [\"div\", \"form\"];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        tagName = _ref[_i];\n        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\n          return fallback;\n        }\n      }\n    };\n\n    Dropzone.prototype.setupEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.addEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.removeEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.removeEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.disable = function() {\n      var file, _i, _len, _ref, _results;\n      this.clickableElements.forEach(function(element) {\n        return element.classList.remove(\"dz-clickable\");\n      });\n      this.removeEventListeners();\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        _results.push(this.cancelUpload(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.enable = function() {\n      this.clickableElements.forEach(function(element) {\n        return element.classList.add(\"dz-clickable\");\n      });\n      return this.setupEventListeners();\n    };\n\n    Dropzone.prototype.filesize = function(size) {\n      var cutoff, i, selectedSize, selectedUnit, unit, units, _i, _len;\n      units = ['TB', 'GB', 'MB', 'KB', 'b'];\n      selectedSize = selectedUnit = null;\n      for (i = _i = 0, _len = units.length; _i < _len; i = ++_i) {\n        unit = units[i];\n        cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\n        if (size >= cutoff) {\n          selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\n          selectedUnit = unit;\n          break;\n        }\n      }\n      selectedSize = Math.round(10 * selectedSize) / 10;\n      return \"<strong>\" + selectedSize + \"</strong> \" + selectedUnit;\n    };\n\n    Dropzone.prototype._updateMaxFilesReachedClass = function() {\n      if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        if (this.getAcceptedFiles().length === this.options.maxFiles) {\n          this.emit('maxfilesreached', this.files);\n        }\n        return this.element.classList.add(\"dz-max-files-reached\");\n      } else {\n        return this.element.classList.remove(\"dz-max-files-reached\");\n      }\n    };\n\n    Dropzone.prototype.drop = function(e) {\n      var files, items;\n      if (!e.dataTransfer) {\n        return;\n      }\n      this.emit(\"drop\", e);\n      files = e.dataTransfer.files;\n      if (files.length) {\n        items = e.dataTransfer.items;\n        if (items && items.length && (items[0].webkitGetAsEntry != null)) {\n          this._addFilesFromItems(items);\n        } else {\n          this.handleFiles(files);\n        }\n      }\n    };\n\n    Dropzone.prototype.paste = function(e) {\n      var items, _ref;\n      if ((e != null ? (_ref = e.clipboardData) != null ? _ref.items : void 0 : void 0) == null) {\n        return;\n      }\n      this.emit(\"paste\", e);\n      items = e.clipboardData.items;\n      if (items.length) {\n        return this._addFilesFromItems(items);\n      }\n    };\n\n    Dropzone.prototype.handleFiles = function(files) {\n      var file, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        _results.push(this.addFile(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromItems = function(items) {\n      var entry, item, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = items.length; _i < _len; _i++) {\n        item = items[_i];\n        if ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {\n          if (entry.isFile) {\n            _results.push(this.addFile(item.getAsFile()));\n          } else if (entry.isDirectory) {\n            _results.push(this._addFilesFromDirectory(entry, entry.name));\n          } else {\n            _results.push(void 0);\n          }\n        } else if (item.getAsFile != null) {\n          if ((item.kind == null) || item.kind === \"file\") {\n            _results.push(this.addFile(item.getAsFile()));\n          } else {\n            _results.push(void 0);\n          }\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromDirectory = function(directory, path) {\n      var dirReader, entriesReader;\n      dirReader = directory.createReader();\n      entriesReader = (function(_this) {\n        return function(entries) {\n          var entry, _i, _len;\n          for (_i = 0, _len = entries.length; _i < _len; _i++) {\n            entry = entries[_i];\n            if (entry.isFile) {\n              entry.file(function(file) {\n                if (_this.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {\n                  return;\n                }\n                file.fullPath = \"\" + path + \"/\" + file.name;\n                return _this.addFile(file);\n              });\n            } else if (entry.isDirectory) {\n              _this._addFilesFromDirectory(entry, \"\" + path + \"/\" + entry.name);\n            }\n          }\n        };\n      })(this);\n      return dirReader.readEntries(entriesReader, function(error) {\n        return typeof console !== \"undefined\" && console !== null ? typeof console.log === \"function\" ? console.log(error) : void 0 : void 0;\n      });\n    };\n\n    Dropzone.prototype.accept = function(file, done) {\n      if (file.size > this.options.maxFilesize * 1024 * 1024) {\n        return done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\n      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\n        return done(this.options.dictInvalidFileType);\n      } else if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        done(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\n        return this.emit(\"maxfilesexceeded\", file);\n      } else {\n        return this.options.accept.call(this, file, done);\n      }\n    };\n\n    Dropzone.prototype.addFile = function(file) {\n      file.upload = {\n        progress: 0,\n        total: file.size,\n        bytesSent: 0\n      };\n      this.files.push(file);\n      file.status = Dropzone.ADDED;\n      this.emit(\"addedfile\", file);\n      this._enqueueThumbnail(file);\n      return this.accept(file, (function(_this) {\n        return function(error) {\n          if (error) {\n            file.accepted = false;\n            _this._errorProcessing([file], error);\n          } else {\n            file.accepted = true;\n            if (_this.options.autoQueue) {\n              _this.enqueueFile(file);\n            }\n          }\n          return _this._updateMaxFilesReachedClass();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.enqueueFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        this.enqueueFile(file);\n      }\n      return null;\n    };\n\n    Dropzone.prototype.enqueueFile = function(file) {\n      if (file.status === Dropzone.ADDED && file.accepted === true) {\n        file.status = Dropzone.QUEUED;\n        if (this.options.autoProcessQueue) {\n          return setTimeout(((function(_this) {\n            return function() {\n              return _this.processQueue();\n            };\n          })(this)), 0);\n        }\n      } else {\n        throw new Error(\"This file can't be queued because it has already been processed or was rejected.\");\n      }\n    };\n\n    Dropzone.prototype._thumbnailQueue = [];\n\n    Dropzone.prototype._processingThumbnail = false;\n\n    Dropzone.prototype._enqueueThumbnail = function(file) {\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\n        this._thumbnailQueue.push(file);\n        return setTimeout(((function(_this) {\n          return function() {\n            return _this._processThumbnailQueue();\n          };\n        })(this)), 0);\n      }\n    };\n\n    Dropzone.prototype._processThumbnailQueue = function() {\n      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {\n        return;\n      }\n      this._processingThumbnail = true;\n      return this.createThumbnail(this._thumbnailQueue.shift(), (function(_this) {\n        return function() {\n          _this._processingThumbnail = false;\n          return _this._processThumbnailQueue();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.removeFile = function(file) {\n      if (file.status === Dropzone.UPLOADING) {\n        this.cancelUpload(file);\n      }\n      this.files = without(this.files, file);\n      this.emit(\"removedfile\", file);\n      if (this.files.length === 0) {\n        return this.emit(\"reset\");\n      }\n    };\n\n    Dropzone.prototype.removeAllFiles = function(cancelIfNecessary) {\n      var file, _i, _len, _ref;\n      if (cancelIfNecessary == null) {\n        cancelIfNecessary = false;\n      }\n      _ref = this.files.slice();\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\n          this.removeFile(file);\n        }\n      }\n      return null;\n    };\n\n    Dropzone.prototype.createThumbnail = function(file, callback) {\n      var fileReader;\n      fileReader = new FileReader;\n      fileReader.onload = (function(_this) {\n        return function() {\n          if (file.type === \"image/svg+xml\") {\n            _this.emit(\"thumbnail\", file, fileReader.result);\n            if (callback != null) {\n              callback();\n            }\n            return;\n          }\n          return _this.createThumbnailFromUrl(file, fileReader.result, callback);\n        };\n      })(this);\n      return fileReader.readAsDataURL(file);\n    };\n\n    Dropzone.prototype.createThumbnailFromUrl = function(file, imageUrl, callback) {\n      var img;\n      img = document.createElement(\"img\");\n      img.onload = (function(_this) {\n        return function() {\n          var canvas, ctx, resizeInfo, thumbnail, _ref, _ref1, _ref2, _ref3;\n          file.width = img.width;\n          file.height = img.height;\n          resizeInfo = _this.options.resize.call(_this, file);\n          if (resizeInfo.trgWidth == null) {\n            resizeInfo.trgWidth = resizeInfo.optWidth;\n          }\n          if (resizeInfo.trgHeight == null) {\n            resizeInfo.trgHeight = resizeInfo.optHeight;\n          }\n          canvas = document.createElement(\"canvas\");\n          ctx = canvas.getContext(\"2d\");\n          canvas.width = resizeInfo.trgWidth;\n          canvas.height = resizeInfo.trgHeight;\n          drawImageIOSFix(ctx, img, (_ref = resizeInfo.srcX) != null ? _ref : 0, (_ref1 = resizeInfo.srcY) != null ? _ref1 : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, (_ref2 = resizeInfo.trgX) != null ? _ref2 : 0, (_ref3 = resizeInfo.trgY) != null ? _ref3 : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\n          thumbnail = canvas.toDataURL(\"image/png\");\n          _this.emit(\"thumbnail\", file, thumbnail);\n          if (callback != null) {\n            return callback();\n          }\n        };\n      })(this);\n      if (callback != null) {\n        img.onerror = callback;\n      }\n      return img.src = imageUrl;\n    };\n\n    Dropzone.prototype.processQueue = function() {\n      var i, parallelUploads, processingLength, queuedFiles;\n      parallelUploads = this.options.parallelUploads;\n      processingLength = this.getUploadingFiles().length;\n      i = processingLength;\n      if (processingLength >= parallelUploads) {\n        return;\n      }\n      queuedFiles = this.getQueuedFiles();\n      if (!(queuedFiles.length > 0)) {\n        return;\n      }\n      if (this.options.uploadMultiple) {\n        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\n      } else {\n        while (i < parallelUploads) {\n          if (!queuedFiles.length) {\n            return;\n          }\n          this.processFile(queuedFiles.shift());\n          i++;\n        }\n      }\n    };\n\n    Dropzone.prototype.processFile = function(file) {\n      return this.processFiles([file]);\n    };\n\n    Dropzone.prototype.processFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.processing = true;\n        file.status = Dropzone.UPLOADING;\n        this.emit(\"processing\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"processingmultiple\", files);\n      }\n      return this.uploadFiles(files);\n    };\n\n    Dropzone.prototype._getFilesWithXhr = function(xhr) {\n      var file, files;\n      return files = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.files;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          if (file.xhr === xhr) {\n            _results.push(file);\n          }\n        }\n        return _results;\n      }).call(this);\n    };\n\n    Dropzone.prototype.cancelUpload = function(file) {\n      var groupedFile, groupedFiles, _i, _j, _len, _len1, _ref;\n      if (file.status === Dropzone.UPLOADING) {\n        groupedFiles = this._getFilesWithXhr(file.xhr);\n        for (_i = 0, _len = groupedFiles.length; _i < _len; _i++) {\n          groupedFile = groupedFiles[_i];\n          groupedFile.status = Dropzone.CANCELED;\n        }\n        file.xhr.abort();\n        for (_j = 0, _len1 = groupedFiles.length; _j < _len1; _j++) {\n          groupedFile = groupedFiles[_j];\n          this.emit(\"canceled\", groupedFile);\n        }\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", groupedFiles);\n        }\n      } else if ((_ref = file.status) === Dropzone.ADDED || _ref === Dropzone.QUEUED) {\n        file.status = Dropzone.CANCELED;\n        this.emit(\"canceled\", file);\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", [file]);\n        }\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    resolveOption = function() {\n      var args, option;\n      option = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if (typeof option === 'function') {\n        return option.apply(this, args);\n      }\n      return option;\n    };\n\n    Dropzone.prototype.uploadFile = function(file) {\n      return this.uploadFiles([file]);\n    };\n\n    Dropzone.prototype.uploadFiles = function(files) {\n      var file, formData, handleError, headerName, headerValue, headers, i, input, inputName, inputType, key, method, option, progressObj, response, updateProgress, url, value, xhr, _i, _j, _k, _l, _len, _len1, _len2, _len3, _m, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;\n      xhr = new XMLHttpRequest();\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.xhr = xhr;\n      }\n      method = resolveOption(this.options.method, files);\n      url = resolveOption(this.options.url, files);\n      xhr.open(method, url, true);\n      xhr.withCredentials = !!this.options.withCredentials;\n      response = null;\n      handleError = (function(_this) {\n        return function() {\n          var _j, _len1, _results;\n          _results = [];\n          for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n            file = files[_j];\n            _results.push(_this._errorProcessing(files, response || _this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr));\n          }\n          return _results;\n        };\n      })(this);\n      updateProgress = (function(_this) {\n        return function(e) {\n          var allFilesFinished, progress, _j, _k, _l, _len1, _len2, _len3, _results;\n          if (e != null) {\n            progress = 100 * e.loaded / e.total;\n            for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n              file = files[_j];\n              file.upload = {\n                progress: progress,\n                total: e.total,\n                bytesSent: e.loaded\n              };\n            }\n          } else {\n            allFilesFinished = true;\n            progress = 100;\n            for (_k = 0, _len2 = files.length; _k < _len2; _k++) {\n              file = files[_k];\n              if (!(file.upload.progress === 100 && file.upload.bytesSent === file.upload.total)) {\n                allFilesFinished = false;\n              }\n              file.upload.progress = progress;\n              file.upload.bytesSent = file.upload.total;\n            }\n            if (allFilesFinished) {\n              return;\n            }\n          }\n          _results = [];\n          for (_l = 0, _len3 = files.length; _l < _len3; _l++) {\n            file = files[_l];\n            _results.push(_this.emit(\"uploadprogress\", file, progress, file.upload.bytesSent));\n          }\n          return _results;\n        };\n      })(this);\n      xhr.onload = (function(_this) {\n        return function(e) {\n          var _ref;\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          if (xhr.readyState !== 4) {\n            return;\n          }\n          response = xhr.responseText;\n          if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\n            try {\n              response = JSON.parse(response);\n            } catch (_error) {\n              e = _error;\n              response = \"Invalid JSON response from server.\";\n            }\n          }\n          updateProgress();\n          if (!((200 <= (_ref = xhr.status) && _ref < 300))) {\n            return handleError();\n          } else {\n            return _this._finished(files, response, e);\n          }\n        };\n      })(this);\n      xhr.onerror = (function(_this) {\n        return function() {\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          return handleError();\n        };\n      })(this);\n      progressObj = (_ref = xhr.upload) != null ? _ref : xhr;\n      progressObj.onprogress = updateProgress;\n      headers = {\n        \"Accept\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        \"X-Requested-With\": \"XMLHttpRequest\"\n      };\n      if (this.options.headers) {\n        extend(headers, this.options.headers);\n      }\n      for (headerName in headers) {\n        headerValue = headers[headerName];\n        xhr.setRequestHeader(headerName, headerValue);\n      }\n      formData = new FormData();\n      if (this.options.params) {\n        _ref1 = this.options.params;\n        for (key in _ref1) {\n          value = _ref1[key];\n          formData.append(key, value);\n        }\n      }\n      for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n        file = files[_j];\n        this.emit(\"sending\", file, xhr, formData);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"sendingmultiple\", files, xhr, formData);\n      }\n      if (this.element.tagName === \"FORM\") {\n        _ref2 = this.element.querySelectorAll(\"input, textarea, select, button\");\n        for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n          input = _ref2[_k];\n          inputName = input.getAttribute(\"name\");\n          inputType = input.getAttribute(\"type\");\n          if (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\n            _ref3 = input.options;\n            for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {\n              option = _ref3[_l];\n              if (option.selected) {\n                formData.append(inputName, option.value);\n              }\n            }\n          } else if (!inputType || ((_ref4 = inputType.toLowerCase()) !== \"checkbox\" && _ref4 !== \"radio\") || input.checked) {\n            formData.append(inputName, input.value);\n          }\n        }\n      }\n      for (i = _m = 0, _ref5 = files.length - 1; 0 <= _ref5 ? _m <= _ref5 : _m >= _ref5; i = 0 <= _ref5 ? ++_m : --_m) {\n        formData.append(this._getParamName(i), files[i], files[i].name);\n      }\n      return xhr.send(formData);\n    };\n\n    Dropzone.prototype._finished = function(files, responseText, e) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.SUCCESS;\n        this.emit(\"success\", file, responseText, e);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"successmultiple\", files, responseText, e);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    Dropzone.prototype._errorProcessing = function(files, message, xhr) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.ERROR;\n        this.emit(\"error\", file, message, xhr);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"errormultiple\", files, message, xhr);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    return Dropzone;\n\n  })(Emitter);\n\n  Dropzone.version = \"4.0.1\";\n\n  Dropzone.options = {};\n\n  Dropzone.optionsForElement = function(element) {\n    if (element.getAttribute(\"id\")) {\n      return Dropzone.options[camelize(element.getAttribute(\"id\"))];\n    } else {\n      return void 0;\n    }\n  };\n\n  Dropzone.instances = [];\n\n  Dropzone.forElement = function(element) {\n    if (typeof element === \"string\") {\n      element = document.querySelector(element);\n    }\n    if ((element != null ? element.dropzone : void 0) == null) {\n      throw new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\n    }\n    return element.dropzone;\n  };\n\n  Dropzone.autoDiscover = true;\n\n  Dropzone.discover = function() {\n    var checkElements, dropzone, dropzones, _i, _len, _results;\n    if (document.querySelectorAll) {\n      dropzones = document.querySelectorAll(\".dropzone\");\n    } else {\n      dropzones = [];\n      checkElements = function(elements) {\n        var el, _i, _len, _results;\n        _results = [];\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )dropzone($| )/.test(el.className)) {\n            _results.push(dropzones.push(el));\n          } else {\n            _results.push(void 0);\n          }\n        }\n        return _results;\n      };\n      checkElements(document.getElementsByTagName(\"div\"));\n      checkElements(document.getElementsByTagName(\"form\"));\n    }\n    _results = [];\n    for (_i = 0, _len = dropzones.length; _i < _len; _i++) {\n      dropzone = dropzones[_i];\n      if (Dropzone.optionsForElement(dropzone) !== false) {\n        _results.push(new Dropzone(dropzone));\n      } else {\n        _results.push(void 0);\n      }\n    }\n    return _results;\n  };\n\n  Dropzone.blacklistedBrowsers = [/opera.*Macintosh.*version\\/12/i];\n\n  Dropzone.isBrowserSupported = function() {\n    var capableBrowser, regex, _i, _len, _ref;\n    capableBrowser = true;\n    if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\n      if (!(\"classList\" in document.createElement(\"a\"))) {\n        capableBrowser = false;\n      } else {\n        _ref = Dropzone.blacklistedBrowsers;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          regex = _ref[_i];\n          if (regex.test(navigator.userAgent)) {\n            capableBrowser = false;\n            continue;\n          }\n        }\n      }\n    } else {\n      capableBrowser = false;\n    }\n    return capableBrowser;\n  };\n\n  without = function(list, rejectedItem) {\n    var item, _i, _len, _results;\n    _results = [];\n    for (_i = 0, _len = list.length; _i < _len; _i++) {\n      item = list[_i];\n      if (item !== rejectedItem) {\n        _results.push(item);\n      }\n    }\n    return _results;\n  };\n\n  camelize = function(str) {\n    return str.replace(/[\\-_](\\w)/g, function(match) {\n      return match.charAt(1).toUpperCase();\n    });\n  };\n\n  Dropzone.createElement = function(string) {\n    var div;\n    div = document.createElement(\"div\");\n    div.innerHTML = string;\n    return div.childNodes[0];\n  };\n\n  Dropzone.elementInside = function(element, container) {\n    if (element === container) {\n      return true;\n    }\n    while (element = element.parentNode) {\n      if (element === container) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  Dropzone.getElement = function(el, name) {\n    var element;\n    if (typeof el === \"string\") {\n      element = document.querySelector(el);\n    } else if (el.nodeType != null) {\n      element = el;\n    }\n    if (element == null) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector or a plain HTML element.\");\n    }\n    return element;\n  };\n\n  Dropzone.getElements = function(els, name) {\n    var e, el, elements, _i, _j, _len, _len1, _ref;\n    if (els instanceof Array) {\n      elements = [];\n      try {\n        for (_i = 0, _len = els.length; _i < _len; _i++) {\n          el = els[_i];\n          elements.push(this.getElement(el, name));\n        }\n      } catch (_error) {\n        e = _error;\n        elements = null;\n      }\n    } else if (typeof els === \"string\") {\n      elements = [];\n      _ref = document.querySelectorAll(els);\n      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n        el = _ref[_j];\n        elements.push(el);\n      }\n    } else if (els.nodeType != null) {\n      elements = [els];\n    }\n    if (!((elements != null) && elements.length)) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\");\n    }\n    return elements;\n  };\n\n  Dropzone.confirm = function(question, accepted, rejected) {\n    if (window.confirm(question)) {\n      return accepted();\n    } else if (rejected != null) {\n      return rejected();\n    }\n  };\n\n  Dropzone.isValidFile = function(file, acceptedFiles) {\n    var baseMimeType, mimeType, validType, _i, _len;\n    if (!acceptedFiles) {\n      return true;\n    }\n    acceptedFiles = acceptedFiles.split(\",\");\n    mimeType = file.type;\n    baseMimeType = mimeType.replace(/\\/.*$/, \"\");\n    for (_i = 0, _len = acceptedFiles.length; _i < _len; _i++) {\n      validType = acceptedFiles[_i];\n      validType = validType.trim();\n      if (validType.charAt(0) === \".\") {\n        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n          return true;\n        }\n      } else if (/\\/\\*$/.test(validType)) {\n        if (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\n          return true;\n        }\n      } else {\n        if (mimeType === validType) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  if (typeof jQuery !== \"undefined\" && jQuery !== null) {\n    jQuery.fn.dropzone = function(options) {\n      return this.each(function() {\n        return new Dropzone(this, options);\n      });\n    };\n  }\n\n  if (typeof module !== \"undefined\" && module !== null) {\n    module.exports = Dropzone;\n  } else {\n    window.Dropzone = Dropzone;\n  }\n\n  Dropzone.ADDED = \"added\";\n\n  Dropzone.QUEUED = \"queued\";\n\n  Dropzone.ACCEPTED = Dropzone.QUEUED;\n\n  Dropzone.UPLOADING = \"uploading\";\n\n  Dropzone.PROCESSING = Dropzone.UPLOADING;\n\n  Dropzone.CANCELED = \"canceled\";\n\n  Dropzone.ERROR = \"error\";\n\n  Dropzone.SUCCESS = \"success\";\n\n\n  /*\n  \n  Bugfix for iOS 6 and 7\n  Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n  based on the work of https://github.com/stomita/ios-imagefile-megapixel\n   */\n\n  detectVerticalSquash = function(img) {\n    var alpha, canvas, ctx, data, ey, ih, iw, py, ratio, sy;\n    iw = img.naturalWidth;\n    ih = img.naturalHeight;\n    canvas = document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = ih;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0, 0);\n    data = ctx.getImageData(0, 0, 1, ih).data;\n    sy = 0;\n    ey = ih;\n    py = ih;\n    while (py > sy) {\n      alpha = data[(py - 1) * 4 + 3];\n      if (alpha === 0) {\n        ey = py;\n      } else {\n        sy = py;\n      }\n      py = (ey + sy) >> 1;\n    }\n    ratio = py / ih;\n    if (ratio === 0) {\n      return 1;\n    } else {\n      return ratio;\n    }\n  };\n\n  drawImageIOSFix = function(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\n    var vertSquashRatio;\n    vertSquashRatio = detectVerticalSquash(img);\n    return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n  };\n\n\n  /*\n   * contentloaded.js\n   *\n   * Author: Diego Perini (diego.perini at gmail.com)\n   * Summary: cross-browser wrapper for DOMContentLoaded\n   * Updated: 20101020\n   * License: MIT\n   * Version: 1.2\n   *\n   * URL:\n   * http://javascript.nwbox.com/ContentLoaded/\n   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\n   */\n\n  contentLoaded = function(win, fn) {\n    var add, doc, done, init, poll, pre, rem, root, top;\n    done = false;\n    top = true;\n    doc = win.document;\n    root = doc.documentElement;\n    add = (doc.addEventListener ? \"addEventListener\" : \"attachEvent\");\n    rem = (doc.addEventListener ? \"removeEventListener\" : \"detachEvent\");\n    pre = (doc.addEventListener ? \"\" : \"on\");\n    init = function(e) {\n      if (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\n        return;\n      }\n      (e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\n      if (!done && (done = true)) {\n        return fn.call(win, e.type || e);\n      }\n    };\n    poll = function() {\n      var e;\n      try {\n        root.doScroll(\"left\");\n      } catch (_error) {\n        e = _error;\n        setTimeout(poll, 50);\n        return;\n      }\n      return init(\"poll\");\n    };\n    if (doc.readyState !== \"complete\") {\n      if (doc.createEventObject && root.doScroll) {\n        try {\n          top = !win.frameElement;\n        } catch (_error) {}\n        if (top) {\n          poll();\n        }\n      }\n      doc[add](pre + \"DOMContentLoaded\", init, false);\n      doc[add](pre + \"readystatechange\", init, false);\n      return win[add](pre + \"load\", init, false);\n    }\n  };\n\n  Dropzone._autoDiscoverFunction = function() {\n    if (Dropzone.autoDiscover) {\n      return Dropzone.discover();\n    }\n  };\n\n  contentLoaded(window, Dropzone._autoDiscoverFunction);\n\n}).call(this);",
    "// tipsy, facebook style tooltips for jquery with fancy fading\n// version 1.0.0a\n// (c) 2008-2010 jason frame [jason@onehackoranother.com] and modificated by Sergio Alvarez @saleiva\n// released under the MIT license\n//\n//  Changes:\n//  April 27 2016: fixed problem with element size.\n//  June 3 2013: Added the custom class before the calc of the position.\n\n(function($) {\n\n  var MOVE_OFFSET = 6;\n\n  function maybeCall(thing, ctx) {\n    return (typeof thing == 'function') ? (thing.call(ctx)) : thing;\n  };\n\n  function isElementInDOM(ele) {\n    while (ele = ele.parentNode) {\n      if (ele == document) return true;\n    }\n    return false;\n  };\n\n  function Tipsy(element, options) {\n    this.$element = $(element);\n    this.options = options;\n    this.enabled = true;\n    this.fixTitle();\n  };\n\n  Tipsy.prototype = {\n    show: function() {\n      var title = this.getTitle();\n      if (title && this.enabled) {\n        var $tip = this.tip();\n\n        $tip.find('.tipsy-inner')[this.options.html ? 'html' : 'text'](title);\n            $tip[0].className = 'tipsy'; // reset classname in case of dynamic gravity\n            $tip.remove().css({top: 0, left: 0, visibility: 'hidden', display: 'block'}).prependTo(document.body);\n\n            // Modified so we can use custom class names\n            if (this.options.className) {\n              $tip.addClass(maybeCall(this.options.className, this.$element[0]));\n            }\n\n            // Modified\n            var pos = $.extend({}, this.$element.offset(), {\n              width: this.$element[0].getBoundingClientRect().width,\n              height: this.$element[0].getBoundingClientRect().height\n            });\n\n            var actualWidth = $tip[0].offsetWidth,\n            actualHeight = $tip[0].offsetHeight,\n            gravity = maybeCall(this.options.gravity, this.$element[0]);\n\n            var tp;\n            switch (gravity.charAt(0)) {\n              case 'n':\n              tp = {top: pos.top + pos.height + this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n              mo = {top: parseInt(pos.top + pos.height + this.options.offset + MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n              case 's':\n              tp = {top: pos.top - actualHeight - this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n              mo = {top: parseInt(pos.top - actualHeight - this.options.offset - MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n              case 'e':\n              tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth - this.options.offset};\n              mo = {left: parseInt(pos.left - actualWidth - this.options.offset - MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n              case 'w':\n              tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width + this.options.offset};\n              mo = {left: parseInt(pos.left + pos.width + this.options.offset + MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n            }\n\n            if (gravity.length == 2) {\n              if (gravity.charAt(1) == 'w') {\n                tp.left = pos.left + pos.width / 2 - 15;\n              } else {\n                tp.left = pos.left + pos.width / 2 - actualWidth + 15;\n              }\n            }\n\n            $tip.css(tp).addClass('tipsy-' + gravity);\n            $tip.find('.tipsy-arrow')[0].className = 'tipsy-arrow tipsy-arrow-' + gravity.charAt(0);\n\n            if (this.options.fade) {\n              $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate(mo, 200);\n            } else {\n              $tip.css({visibility: 'visible', opacity: this.options.opacity});\n            }\n          }\n        },\n\n        hide: function() {\n\n          gravity = maybeCall(this.options.gravity, this.$element[0]);\n\n          switch (gravity.charAt(0)) {\n            case 'n':\n            mo = {top: parseInt(this.tip().css(\"top\")) + MOVE_OFFSET, opacity: 0};\n            break;\n            case 's':\n            mo = {top: parseInt(this.tip().css(\"top\")) - MOVE_OFFSET, opacity: 0};\n            break;\n            case 'e':\n            mo = {left: parseInt(this.tip().css(\"left\")) - MOVE_OFFSET, opacity: 0};\n            break;\n            case 'w':\n            mo = {left: parseInt(this.tip().css(\"left\")) + MOVE_OFFSET, opacity: 0};\n            break;\n          }\n\n          if (this.options.fade) {\n            this.tip().stop().animate(mo, 200, function(){$(this).remove();});\n          } else {\n            this.tip().remove();\n          }\n        },\n\n        fixTitle: function() {\n          var $e = this.$element;\n          if ($e.attr('title') || typeof($e.attr('original-title')) != 'string') {\n            $e.attr('original-title', $e.attr('title') || '').removeAttr('title');\n          }\n        },\n\n        getTitle: function() {\n          var title, $e = this.$element, o = this.options;\n          this.fixTitle();\n          var title, o = this.options;\n          if (typeof o.title == 'string') {\n            title = $e.attr(o.title == 'title' ? 'original-title' : o.title);\n          } else if (typeof o.title == 'function') {\n            title = o.title.call($e[0]);\n          }\n          title = ('' + title).replace(/(^\\s*|\\s*$)/, \"\");\n          return title || o.fallback;\n        },\n\n        tip: function() {\n          if (!this.$tip) {\n            this.$tip = $('<div class=\"tipsy\"></div>').html('<div class=\"tipsy-arrow\"></div><div class=\"tipsy-inner\"></div>');\n            this.$tip.data('tipsy-pointee', this.$element[0]);\n          }\n          return this.$tip;\n        },\n\n        validate: function() {\n          if (!this.$element[0].parentNode) {\n            this.hide();\n            this.$element = null;\n            this.options = null;\n          }\n        },\n\n        remove: function() { this.enabled = false; this.$tip && this.$tip.remove(); },\n        enable: function() { this.enabled = true; },\n        disable: function() { this.enabled = false; },\n        toggleEnabled: function() { this.enabled = !this.enabled; }\n      };\n\n      $.fn.tipsy = function(options) {\n\n        if (options === true) {\n          return this.data('tipsy');\n        } else if (typeof options == 'string') {\n          var tipsy = this.data('tipsy');\n          if (tipsy) tipsy[options]();\n          return this;\n        }\n\n        options = $.extend({}, $.fn.tipsy.defaults, options);\n\n        function get(ele) {\n          var tipsy = $.data(ele, 'tipsy');\n          if (!tipsy) {\n            tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));\n            $.data(ele, 'tipsy', tipsy);\n          }\n          return tipsy;\n        }\n\n        function enter() {\n          var tipsy = get(this);\n          tipsy.hoverState = 'in';\n          if (options.delayIn == 0) {\n            tipsy.show();\n          } else {\n            tipsy.fixTitle();\n            setTimeout(function() { if (tipsy.hoverState == 'in') tipsy.show(); }, options.delayIn);\n          }\n        };\n\n        function leave() {\n          var tipsy = get(this);\n          tipsy.hoverState = 'out';\n          if (options.delayOut == 0) {\n            tipsy.hide();\n          } else {\n            setTimeout(function() { if (tipsy.hoverState == 'out') tipsy.hide(); }, options.delayOut);\n          }\n        };\n\n        if (!options.live) this.each(function() { get(this); });\n\n        if (options.trigger != 'manual') {\n          var binder   = options.live ? 'live' : 'bind',\n          eventIn  = options.trigger == 'hover' ? 'mouseenter' : 'focus',\n          eventOut = options.trigger == 'hover' ? 'mouseleave' : 'blur';\n          this[binder](eventIn, enter)[binder](eventOut, leave);\n        }\n\n        return this;\n\n      };\n\n      $.fn.tipsy.defaults = {\n        className: null,\n        delayIn: 0,\n        delayOut: 0,\n        fade: false,\n        fallback: '',\n        gravity: 'n',\n        html: false,\n        live: false,\n        offset: 0,\n        opacity: 0.8,\n        title: 'title',\n        trigger: 'hover'\n      };\n\n      $.fn.tipsy.revalidate = function() {\n        $('.tipsy').each(function() {\n          var pointee = $.data(this, 'tipsy-pointee');\n          if (!pointee || !isElementInDOM(pointee)) {\n            $(this).remove();\n          }\n        });\n      };\n\n    // Overwrite this method to provide options on a per-element basis.\n    // For example, you could store the gravity in a 'tipsy-gravity' attribute:\n    // return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });\n    // (remember - do not modify 'options' in place!)\n    $.fn.tipsy.elementOptions = function(ele, options) {\n      return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;\n    };\n\n    $.fn.tipsy.autoNS = function() {\n      return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? 's' : 'n';\n    };\n\n    $.fn.tipsy.autoWE = function() {\n      return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'e' : 'w';\n    };\n\n    /**\n     * yields a closure of the supplied parameters, producing a function that takes\n     * no arguments and is suitable for use as an autogravity function like so:\n     *\n     * @param margin (int) - distance from the viewable region edge that an\n     *        element should be before setting its tooltip's gravity to be away\n     *        from that edge.\n     * @param prefer (string, e.g. 'n', 'sw', 'w') - the direction to prefer\n     *        if there are no viewable region edges effecting the tooltip's\n     *        gravity. It will try to vary from this minimally, for example,\n     *        if 'sw' is preferred and an element is near the right viewable\n     *        region edge, but not the top edge, it will set the gravity for\n     *        that element's tooltip to be 'se', preserving the southern\n     *        component.\n     */\n     $.fn.tipsy.autoBounds = function(margin, prefer) {\n      return function() {\n       var dir = {ns: prefer[0], ew: (prefer.length > 1 ? prefer[1] : false)},\n       boundTop = $(document).scrollTop() + margin,\n       boundLeft = $(document).scrollLeft() + margin,\n       $this = $(this);\n\n       if ($this.offset().top < boundTop) dir.ns = 'n';\n       if ($this.offset().left < boundLeft) dir.ew = 'w';\n       if ($(window).width() + $(document).scrollLeft() - $this.offset().left < margin) dir.ew = 'e';\n       if ($(window).height() + $(document).scrollTop() - $this.offset().top < margin) dir.ns = 's';\n\n       return dir.ns + (dir.ew ? dir.ew : '');\n     }\n   };\n\n })(jQuery);\n",
    "/*\n* jQuery UI Tag-it!\n*\n* @version v2.0 (06/2011)\n*\n* Copyright 2011, Levy Carneiro Jr.\n* Released under the MIT license.\n* http://aehlke.github.com/tag-it/LICENSE\n*\n* Homepage:\n*   http://aehlke.github.com/tag-it/\n*\n* Authors:\n*   Levy Carneiro Jr.\n*   Martin Rehfeld\n*   Tobias Schmidt\n*   Skylar Challand\n*   Alex Ehlke\n*\n* Maintainer:\n*   Alex Ehlke - Twitter: @aehlke\n*\n* Dependencies:\n*   jQuery v1.4+\n*   jQuery UI v1.8+\n*/\n(function($) {\n\n    $.widget('ui.tagit', {\n        options: {\n            allowDuplicates   : false,\n            caseSensitive     : true,\n            fieldName         : 'tags',\n            placeholderText   : null,   // Sets `placeholder` attr on input field.\n            readOnly          : false,  // Disables editing.\n            removeConfirmation: false,  // Require confirmation to remove tags.\n            tagLimit          : null,   // Max number of tags allowed (null for unlimited).\n\n            // Used for autocomplete, unless you override `autocomplete.source`.\n            availableTags     : [],\n\n            // Use to override or add any options to the autocomplete widget.\n            //\n            // By default, autocomplete.source will map to availableTags,\n            // unless overridden.\n            autocomplete: {},\n\n            // Shows autocomplete before the user even types anything.\n            showAutocompleteOnFocus: false,\n\n            // When enabled, quotes are unneccesary for inputting multi-word tags.\n            allowSpaces: false,\n\n            // The below options are for using a single field instead of several\n            // for our form values.\n            //\n            // When enabled, will use a single hidden field for the form,\n            // rather than one per tag. It will delimit tags in the field\n            // with singleFieldDelimiter.\n            //\n            // The easiest way to use singleField is to just instantiate tag-it\n            // on an INPUT element, in which case singleField is automatically\n            // set to true, and singleFieldNode is set to that element. This\n            // way, you don't need to fiddle with these options.\n            singleField: false,\n\n            // This is just used when preloading data from the field, and for\n            // populating the field with delimited tags as the user adds them.\n            singleFieldDelimiter: ',',\n\n            // Set this to an input DOM node to use an existing form field.\n            // Any text in it will be erased on init. But it will be\n            // populated with the text of tags as they are created,\n            // delimited by singleFieldDelimiter.\n            //\n            // If this is not set, we create an input node for it,\n            // with the name given in settings.fieldName.\n            singleFieldNode: null,\n\n            // Whether to animate tag removals or not.\n            animate: true,\n\n            // Optionally set a tabindex attribute on the input that gets\n            // created for tag-it.\n            tabIndex: null,\n\n            // Event callbacks.\n            beforeTagAdded      : null,\n            afterTagAdded       : null,\n\n            beforeTagRemoved    : null,\n            afterTagRemoved     : null,\n\n            onTagClicked        : null,\n            onTagLimitExceeded  : null,\n\n\n            // DEPRECATED:\n            //\n            // /!\\ These event callbacks are deprecated and WILL BE REMOVED at some\n            // point in the future. They're here for backwards-compatibility.\n            // Use the above before/after event callbacks instead.\n            onTagAdded  : null,\n            onTagRemoved: null,\n            // `autocomplete.source` is the replacement for tagSource.\n            tagSource: null,\n            onSubmitTags: null,\n            onFocus: null,\n            onBlur: null\n            // Do not use the above deprecated options.\n        },\n\n        _create: function() {\n            // for handling static scoping inside callbacks\n            var that = this;\n\n            // There are 2 kinds of DOM nodes this widget can be instantiated on:\n            //     1. UL, OL, or some element containing either of these.\n            //     2. INPUT, in which case 'singleField' is overridden to true,\n            //        a UL is created and the INPUT is hidden.\n            if (this.element.is('input')) {\n                this.tagList = $('<ul></ul>').insertAfter(this.element);\n                this.options.singleField = true;\n                this.options.singleFieldNode = this.element;\n                this.element.addClass('tagit-hidden-field');\n            } else {\n                this.tagList = this.element.find('ul, ol').andSelf().last();\n            }\n\n            this.tagInput = $('<input type=\"text\" />').addClass('ui-widget-content');\n\n            if (this.options.readOnly) this.tagInput.attr('disabled', 'disabled');\n\n            if (this.options.tabIndex) {\n                this.tagInput.attr('tabindex', this.options.tabIndex);\n            }\n\n            if (this.options.placeholderText) {\n                this.tagInput.attr('placeholder', this.options.placeholderText);\n            }\n\n            if (!this.options.autocomplete.source) {\n                this.options.autocomplete.source = function(search, showChoices) {\n                    var filter = search.term.toLowerCase();\n                    var choices = $.grep(this.options.availableTags, function(element) {\n                        // Only match autocomplete options that begin with the search term.\n                        // (Case insensitive.)\n                        return (element.toLowerCase().indexOf(filter) === 0);\n                    });\n                    if (!this.options.allowDuplicates) {\n                        choices = this._subtractArray(choices, this.assignedTags());\n                    }\n                    showChoices(choices);\n                };\n            }\n\n            if (this.options.showAutocompleteOnFocus) {\n                this.tagInput.focus(function(event, ui) {\n                    that._showAutocomplete();\n                });\n\n                if (typeof this.options.autocomplete.minLength === 'undefined') {\n                    this.options.autocomplete.minLength = 0;\n                }\n            }\n\n            // Bind autocomplete.source callback functions to this context.\n            if ($.isFunction(this.options.autocomplete.source)) {\n                this.options.autocomplete.source = $.proxy(this.options.autocomplete.source, this);\n            }\n\n            // DEPRECATED.\n            if ($.isFunction(this.options.tagSource)) {\n                this.options.tagSource = $.proxy(this.options.tagSource, this);\n            }\n\n            this.tagList\n                .addClass('tagit')\n                .addClass('ui-widget ui-widget-content ui-corner-all')\n                // Create the input field.\n                .append($('<li class=\"tagit-new\"></li>').append(this.tagInput))\n                .click(function(e) {\n                    var target = $(e.target);\n                    if (target.hasClass('tagit-label')) {\n                        var tag = target.closest('.tagit-choice');\n                        if (!tag.hasClass('removed')) {\n                            that._trigger('onTagClicked', e, {tag: tag, tagLabel: that.tagLabel(tag)});\n                        }\n                    } else {\n                        // Sets the focus() to the input field, if the user\n                        // clicks anywhere inside the UL. This is needed\n                        // because the input field needs to be of a small size.\n                        that.tagInput.focus();\n                    }\n                });\n\n            // Single field support.\n            var addedExistingFromSingleFieldNode = false;\n            if (this.options.singleField) {\n                if (this.options.singleFieldNode) {\n                    // Add existing tags from the input field.\n                    var node = $(this.options.singleFieldNode);\n                    var tags = node.val().split(this.options.singleFieldDelimiter);\n                    node.val('');\n                    $.each(tags, function(index, tag) {\n                        that.createTag(tag, null, true);\n                        addedExistingFromSingleFieldNode = true;\n                    });\n                } else {\n                    // Create our single field input after our list.\n                    this.options.singleFieldNode = $('<input type=\"hidden\" style=\"display:none;\" value=\"\" name=\"' + this.options.fieldName + '\" />');\n                    this.tagList.after(this.options.singleFieldNode);\n                }\n            }\n\n            // Add existing tags from the list, if any.\n            if (!addedExistingFromSingleFieldNode) {\n                this.tagList.children('li').each(function() {\n                    if (!$(this).hasClass('tagit-new')) {\n                        that.createTag($(this).text(), $(this).attr('class'), true);\n                        $(this).remove();\n                    }\n                });\n            }\n\n            // Events.\n            this.tagInput\n                .keydown(function(event) {\n                    // Backspace is not detected within a keypress, so it must use keydown.\n                    if (event.which == $.ui.keyCode.BACKSPACE && that.tagInput.val() === '') {\n                        var tag = that._lastTag();\n                        if (!that.options.removeConfirmation || tag.hasClass('remove')) {\n                            // When backspace is pressed, the last tag is deleted.\n                            that.removeTag(tag);\n                        } else if (that.options.removeConfirmation) {\n                            tag.addClass('remove ui-state-highlight');\n                        }\n                    } else if (that.options.removeConfirmation) {\n                        that._lastTag().removeClass('remove ui-state-highlight');\n                    } else if (event.which == $.ui.keyCode.ENTER && that.tagInput.val() === \"\") {\n                        that._trigger('onSubmitTags', null, that.tagList);\n                    }\n\n                    // Comma/Space/Enter are all valid delimiters for new tags,\n                    // except when there is an open quote or if setting allowSpaces = true.\n                    // Tab will also create a tag, unless the tag input is empty,\n                    // in which case it isn't caught.\n                    if (\n                        (event.which === $.ui.keyCode.COMMA && event.shiftKey === false) ||\n                        event.which === $.ui.keyCode.ENTER ||\n                        (\n                            event.which == $.ui.keyCode.TAB &&\n                            that.tagInput.val() !== ''\n                        ) ||\n                        (\n                            event.which == $.ui.keyCode.SPACE &&\n                            that.options.allowSpaces !== true &&\n                            (\n                                $.trim(that.tagInput.val()).replace( /^s*/, '' ).charAt(0) != '\"' ||\n                                (\n                                    $.trim(that.tagInput.val()).charAt(0) == '\"' &&\n                                    $.trim(that.tagInput.val()).charAt($.trim(that.tagInput.val()).length - 1) == '\"' &&\n                                    $.trim(that.tagInput.val()).length - 1 !== 0\n                                )\n                            )\n                        )\n                    ) {\n                        // Enter submits the form if there's no text in the input.\n                        if (!(event.which === $.ui.keyCode.ENTER && that.tagInput.val() === '')) {\n                            event.preventDefault();\n                        }\n\n                        // Autocomplete will create its own tag from a selection and close automatically.\n                        if (!(that.options.autocomplete.autoFocus && that.tagInput.data('autocomplete-open'))) {\n                            that.tagInput.autocomplete('close');\n                            that.createTag(that._cleanedInput());\n                        }\n                    }\n                }).blur(function(e){\n                    that._trigger('onBlur', null, null);\n                    // Create a tag when the element loses focus.\n                    // If autocomplete is enabled and suggestion was clicked, don't add it.\n                    if (!that.tagInput.data('autocomplete-open')) {\n                        that.createTag(that._cleanedInput());\n                    }\n                }).focus(function(e) {\n                    that._trigger('onFocus', null, null);\n                })\n\n            // Autocomplete.\n            if (this.options.availableTags || this.options.tagSource || this.options.autocomplete.source) {\n                var autocompleteOptions = {\n                    select: function(event, ui) {\n                        that.createTag(ui.item.value);\n                        // Preventing the tag input to be updated with the chosen value.\n                        return false;\n                    }\n                };\n                $.extend(autocompleteOptions, this.options.autocomplete);\n\n                // tagSource is deprecated, but takes precedence here since autocomplete.source is set by default,\n                // while tagSource is left null by default.\n                autocompleteOptions.source = this.options.tagSource || autocompleteOptions.source;\n\n                this.tagInput.autocomplete(autocompleteOptions).bind('autocompleteopen.tagit', function(event, ui) {\n                    that.tagInput.data('autocomplete-open', true);\n                }).bind('autocompleteclose.tagit', function(event, ui) {\n                    that.tagInput.data('autocomplete-open', false);\n                });\n\n                this.tagInput.autocomplete('widget').addClass('tagit-autocomplete');\n            }\n        },\n\n        destroy: function() {\n            $.Widget.prototype.destroy.call(this);\n\n            this.element.unbind('.tagit');\n            this.tagList.unbind('.tagit');\n\n            this.tagInput.removeData('autocomplete-open');\n\n            this.tagList.removeClass([\n                'tagit',\n                'ui-widget',\n                'ui-widget-content',\n                'ui-corner-all',\n                'tagit-hidden-field'\n            ].join(' '));\n\n            if (this.element.is('input')) {\n                this.element.removeClass('tagit-hidden-field');\n                this.tagList.remove();\n            } else {\n                this.element.children('li').each(function() {\n                    if ($(this).hasClass('tagit-new')) {\n                        $(this).remove();\n                    } else {\n                        $(this).removeClass([\n                            'tagit-choice',\n                            'ui-widget-content',\n                            'ui-state-default',\n                            'ui-state-highlight',\n                            'ui-corner-all',\n                            'remove',\n                            'tagit-choice-editable',\n                            'tagit-choice-read-only'\n                        ].join(' '));\n\n                        $(this).text($(this).children('.tagit-label').text());\n                    }\n                });\n\n                if (this.singleFieldNode) {\n                    this.singleFieldNode.remove();\n                }\n            }\n\n            return this;\n        },\n\n        _cleanedInput: function() {\n            // Returns the contents of the tag input, cleaned and ready to be passed to createTag\n            return $.trim(this.tagInput.val().replace(/^\"(.*)\"$/, '$1'));\n        },\n\n        _lastTag: function() {\n            return this.tagList.find('.tagit-choice:last:not(.removed)');\n        },\n\n        _tags: function() {\n            return this.tagList.find('.tagit-choice:not(.removed)');\n        },\n\n        assignedTags: function() {\n            // Returns an array of tag string values\n            var that = this;\n            var tags = [];\n            if (this.options.singleField) {\n                tags = $(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter);\n                if (tags[0] === '') {\n                    tags = [];\n                }\n            } else {\n                this._tags().each(function() {\n                    tags.push(that.tagLabel(this));\n                });\n            }\n            return tags;\n        },\n\n        _updateSingleTagsField: function(tags) {\n            // Takes a list of tag string values, updates this.options.singleFieldNode.val to the tags delimited by this.options.singleFieldDelimiter\n            $(this.options.singleFieldNode).val(tags.join(this.options.singleFieldDelimiter)).trigger('change');\n        },\n\n        _subtractArray: function(a1, a2) {\n            var result = [];\n            for (var i = 0; i < a1.length; i++) {\n                if ($.inArray(a1[i], a2) == -1) {\n                    result.push(a1[i]);\n                }\n            }\n            return result;\n        },\n\n        tagLabel: function(tag) {\n            // Returns the tag's string label.\n            if (this.options.singleField) {\n                return $(tag).find('.tagit-label:first').text();\n            } else {\n                return $(tag).find('input:first').val();\n            }\n        },\n\n        _showAutocomplete: function() {\n            this.tagInput.autocomplete('search', '');\n        },\n\n        _findTagByLabel: function(name) {\n            var that = this;\n            var tag = null;\n            this._tags().each(function(i) {\n                if (that._formatStr(name) == that._formatStr(that.tagLabel(this))) {\n                    tag = $(this);\n                    return false;\n                }\n            });\n            return tag;\n        },\n\n        _isNew: function(name) {\n            return !this._findTagByLabel(name);\n        },\n\n        _formatStr: function(str) {\n            if (this.options.caseSensitive) {\n                return str;\n            }\n            return $.trim(str.toLowerCase());\n        },\n\n        _effectExists: function(name) {\n            return Boolean($.effects && ($.effects[name] || ($.effects.effect && $.effects.effect[name])));\n        },\n\n        createTag: function(value, additionalClass, duringInitialization) {\n            var that = this;\n\n            value = $.trim(value);\n\n            if(this.options.preprocessTag) {\n                value = this.options.preprocessTag(value);\n            }\n\n            if (value === '') {\n                return false;\n            }\n\n            if (!this.options.allowDuplicates && !this._isNew(value)) {\n                var existingTag = this._findTagByLabel(value);\n                if (this._trigger('onTagExists', null, {\n                    existingTag: existingTag,\n                    duringInitialization: duringInitialization\n                }) !== false) {\n                    if (this._effectExists('highlight')) {\n                        existingTag.effect('highlight');\n                    }\n                }\n                return false;\n            }\n\n            if (this.options.tagLimit && this._tags().length >= this.options.tagLimit) {\n                this._trigger('onTagLimitExceeded', null, {duringInitialization: duringInitialization});\n                return false;\n            }\n\n            var label = $(this.options.onTagClicked ? '<a class=\"tagit-label\"></a>' : '<span class=\"tagit-label\"></span>').text(value);\n\n            // Create tag.\n            var tag = $('<li></li>')\n                .addClass('tagit-choice ui-widget-content ui-state-default ui-corner-all')\n                .addClass(additionalClass)\n                .append(label);\n\n            if (this.options.readOnly){\n                tag.addClass('tagit-choice-read-only');\n            } else {\n                tag.addClass('tagit-choice-editable');\n                // Button for removing the tag.\n                var removeTagIcon = $('<span></span>')\n                    .addClass('ui-icon ui-icon-close');\n                var removeTag = $('<a><span class=\"text-icon\">\\xd7</span></a>') // \\xd7 is an X\n                    .addClass('tagit-close')\n                    .append(removeTagIcon)\n                    .click(function(e) {\n                        // Removes a tag when the little 'x' is clicked.\n                        that.removeTag(tag);\n                    });\n                tag.append(removeTag);\n            }\n\n            // Unless options.singleField is set, each tag has a hidden input field inline.\n            if (!this.options.singleField) {\n                var escapedValue = label.html();\n                tag.append('<input type=\"hidden\" value=\"' + escapedValue + '\" name=\"' + this.options.fieldName + '\" class=\"tagit-hidden-field\" />');\n            }\n\n            if (this._trigger('beforeTagAdded', null, {\n                tag: tag,\n                tagLabel: this.tagLabel(tag),\n                duringInitialization: duringInitialization\n            }) === false) {\n                return;\n            }\n\n            if (this.options.singleField) {\n                var tags = this.assignedTags();\n                tags.push(value);\n                this._updateSingleTagsField(tags);\n            }\n\n            // DEPRECATED.\n            this._trigger('onTagAdded', null, tag);\n\n            this.tagInput.val('');\n\n            // Insert tag.\n            this.tagInput.parent().before(tag);\n\n            this._trigger('afterTagAdded', null, {\n                tag: tag,\n                tagLabel: this.tagLabel(tag),\n                duringInitialization: duringInitialization\n            });\n\n            if (this.options.showAutocompleteOnFocus && !duringInitialization) {\n                setTimeout(function () { that._showAutocomplete(); }, 0);\n            }\n        },\n\n        removeTag: function(tag, animate) {\n            animate = typeof animate === 'undefined' ? this.options.animate : animate;\n\n            tag = $(tag);\n\n            // DEPRECATED.\n            this._trigger('onTagRemoved', null, tag);\n\n            if (this._trigger('beforeTagRemoved', null, {tag: tag, tagLabel: this.tagLabel(tag)}) === false) {\n                return;\n            }\n\n            if (this.options.singleField) {\n                var tags = this.assignedTags();\n                var removedTagLabel = this.tagLabel(tag);\n                tags = $.grep(tags, function(el){\n                    return el != removedTagLabel;\n                });\n                this._updateSingleTagsField(tags);\n            }\n\n            if (animate) {\n                tag.addClass('removed'); // Excludes this tag from _tags.\n                var hide_args = this._effectExists('blind') ? ['blind', {direction: 'horizontal'}, 'fast'] : ['fast'];\n\n                var thisTag = this;\n                hide_args.push(function() {\n                    tag.remove();\n                    thisTag._trigger('afterTagRemoved', null, {tag: tag, tagLabel: thisTag.tagLabel(tag)});\n                });\n\n                tag.fadeOut('fast').hide.apply(tag, hide_args).dequeue();\n            } else {\n                tag.remove();\n                this._trigger('afterTagRemoved', null, {tag: tag, tagLabel: this.tagLabel(tag)});\n            }\n\n        },\n\n        removeTagByLabel: function(tagLabel, animate) {\n            var toRemove = this._findTagByLabel(tagLabel);\n            if (!toRemove) {\n                throw \"No such tag exists with the name '\" + tagLabel + \"'\";\n            }\n            this.removeTag(toRemove, animate);\n        },\n\n        removeAll: function() {\n            // Removes all tags.\n            var that = this;\n            this._tags().each(function(index, tag) {\n                that.removeTag(tag, false);\n            });\n        }\n\n    });\n})(jQuery);\n"
  ]
}