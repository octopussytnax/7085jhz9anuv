/*! v4.7.15 - 2017-05-30 */
require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(d,e){"use strict";function f(a,b){return"string"==typeof a?b==a:a&&"function"==typeof a.exec?a.exec(b):"boolean"==typeof a||"object"==typeof a?a:"function"==typeof a&&a(b)}var g=a("jsonparse"),h=a("through");c.parse=function(a,b){function c(a,b){d!==!1&&(d=d||{},d[a]=b),i!==!1&&d===!1&&(i=i||{},i[a]=b)}var d,i,j=new g,k=h(function(a){"string"==typeof a&&(a=new e(a)),j.write(a)},function(a){a&&k.write(a),d&&k.emit("header",d),i&&k.emit("footer",i),k.queue(null)});"string"==typeof a&&(a=a.split(".").map(function(a){return"$*"===a?{emitKey:!0}:"*"===a||(""===a?{recurse:!0}:a)}));var l=0;return a&&a.length||(a=null),j.onValue=function(e){if(this.root||(k.root=e),a){for(var g=0,h=0,i=!1,j=!1;g<a.length;){var m,n=a[g];if(h++,n&&!n.recurse){if(m=h===this.stack.length?this:this.stack[h],!m)return;if(!f(n,m.key))return void c(m.key,e);i=!!n.emitKey,j=!!n.emitPath,g++}else{g++;var o=a[g];if(!o)return;for(;;){if(m=h===this.stack.length?this:this.stack[h],!m)return;if(f(o,m.key)){g++,Object.isFrozen(this.stack[h])||(this.stack[h].value=null);break}c(m.key,e),h++}}}if(d&&(k.emit("header",d),d=!1),h===this.stack.length){l++;var p=this.stack.slice(1).map(function(a){return a.key}).concat([this.key]),q=this.value[this.key];null!=q&&null!=(q=b?b(q,p):q)&&((i||j)&&(q={value:q},i&&(q.key=this.key),j&&(q.path=p)),k.queue(q)),delete this.value[this.key];for(var r in this.stack)Object.isFrozen(this.stack[r])||(this.stack[r].value=null)}}},j._onToken=j.onToken,j.onToken=function(b,c){j._onToken(b,c),0===this.stack.length&&k.root&&(a||k.queue(k.root),l=0,k.root=null)},j.onError=function(a){a.message.indexOf("at position")>-1&&(a.message="Invalid JSON ("+a.message+")"),k.emit("error",a)},k},c.stringify=function(a,b,c,d){d=d||0,a===!1?(a="",b="\n",c=""):null==a&&(a="[\n",b="\n,\n",c="\n]\n");var e,f=!0,g=!1;return e=h(function(c){g=!0;try{var h=JSON.stringify(c,null,d)}catch(a){return e.emit("error",a)}f?(f=!1,e.queue(a+h)):e.queue(b+h)},function(b){g||e.queue(a),e.queue(c),e.queue(null)})},c.stringifyObject=function(a,b,c,d){d=d||0,a===!1?(a="",b="\n",c=""):null==a&&(a="{\n",b="\n,\n",c="\n}\n");var e=!0,f=!1,g=h(function(c){f=!0;var g=JSON.stringify(c[0])+":"+JSON.stringify(c[1],null,d);e?(e=!1,this.queue(a+g)):this.queue(b+g)},function(b){f||this.queue(a),this.queue(c),this.queue(null)});return g},b.parent||"browser"===d.title||d.stdin.pipe(c.parse(d.argv[2])).pipe(c.stringify("[",",\n","]\n",2)).pipe(d.stdout)}).call(this,a("_process"),a("buffer").Buffer)},{_process:256,buffer:34,jsonparse:184,through:309}],2:[function(a,b,c){"use strict";function d(a,b){return a+"['"+b+"']"}var e=a("dot-parts");b.exports=function(a,b){return e(b).reduce(d,a)}},{"dot-parts":133}],3:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?d(c):"function"==typeof define&&define.amd?define(["exports"],d):d(a.acorn=a.acorn||{})}(this,function(a){"use strict";function b(a,b){for(var c=65536,d=0;d<b.length;d+=2){if(c+=b[d],c>a)return!1;if(c+=b[d+1],c>=a)return!0}}function c(a,c){return a<65?36===a:a<91||(a<97?95===a:a<123||(a<=65535?a>=170&&z.test(String.fromCharCode(a)):c!==!1&&b(a,B)))}function d(a,c){return a<48?36===a:a<58||!(a<65)&&(a<91||(a<97?95===a:a<123||(a<=65535?a>=170&&A.test(String.fromCharCode(a)):c!==!1&&(b(a,B)||b(a,C)))))}function e(a,b){return new D(a,{beforeExpr:!0,binop:b})}function f(a,b){return void 0===b&&(b={}),b.keyword=a,G[a]=new D(a,b)}function g(a){return 10===a||13===a||8232===a||8233===a}function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function i(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function j(a,b){for(var c=1,d=0;;){J.lastIndex=d;var e=J.exec(a);if(!(e&&e.index<b))return new M(c,b-d);++c,d=e.index+e[0].length}}function k(a){var b={};for(var c in O)b[c]=a&&i(a,c)?a[c]:O[c];if(b.ecmaVersion>=2015&&(b.ecmaVersion-=2009),null==b.allowReserved&&(b.allowReserved=b.ecmaVersion<5),h(b.onToken)){var d=b.onToken;b.onToken=function(a){return d.push(a)}}return h(b.onComment)&&(b.onComment=l(b,b.onComment)),b}function l(a,b){return function(c,d,e,f,g,h){var i={type:c?"Block":"Line",value:d,start:e,end:f};a.locations&&(i.loc=new N(this,g,h)),a.ranges&&(i.range=[e,f]),b.push(i)}}function m(a){return new RegExp("^("+a.replace(/ /g,"|")+")$")}function n(a,b,c,d){return a.type=b,a.end=c,this.options.locations&&(a.loc.end=d),this.options.ranges&&(a.range[1]=c),a}function o(a,b,c,d){try{return new RegExp(a,b)}catch(a){if(void 0!==c)throw a instanceof SyntaxError&&d.raise(c,"Error parsing regular expression: "+a.message),a}}function p(a){return a<=65535?String.fromCharCode(a):(a-=65536,String.fromCharCode((a>>10)+55296,(1023&a)+56320))}function q(a,b){return new Q(b,a).parse()}function r(a,b,c){var d=new Q(c,a,b);return d.nextToken(),d.parseExpression()}function s(a,b){return new Q(b,a)}function t(b,c,d){a.parse_dammit=b,a.LooseParser=c,a.pluginsLoose=d}var u={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},v="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",w={5:v,6:v+" const class extends export import super"},x="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",y="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣔ-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",z=new RegExp("["+x+"]"),A=new RegExp("["+x+y+"]");x=y=null;var B=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,264,8,2,36,18,0,50,29,881,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,65,0,32,6124,20,754,9486,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],C=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,7,0,161,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,87,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,838,7,2,7,17,9,57,21,2,13,19882,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239],D=function(a,b){void 0===b&&(b={}),this.label=a,this.keyword=b.keyword,this.beforeExpr=!!b.beforeExpr,this.startsExpr=!!b.startsExpr,this.isLoop=!!b.isLoop,this.isAssign=!!b.isAssign,this.prefix=!!b.prefix,this.postfix=!!b.postfix,this.binop=b.binop||null,this.updateContext=null},E={beforeExpr:!0},F={startsExpr:!0},G={},H={num:new D("num",F),regexp:new D("regexp",F),string:new D("string",F),name:new D("name",F),eof:new D("eof"),bracketL:new D("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new D("]"),braceL:new D("{",{beforeExpr:!0,startsExpr:!0}),braceR:new D("}"),parenL:new D("(",{beforeExpr:!0,startsExpr:!0}),parenR:new D(")"),comma:new D(",",E),semi:new D(";",E),colon:new D(":",E),dot:new D("."),question:new D("?",E),arrow:new D("=>",E),template:new D("template"),ellipsis:new D("...",E),backQuote:new D("`",F),dollarBraceL:new D("${",{beforeExpr:!0,startsExpr:!0}),eq:new D("=",{beforeExpr:!0,isAssign:!0}),assign:new D("_=",{beforeExpr:!0,isAssign:!0}),incDec:new D("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new D("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:e("||",1),logicalAND:e("&&",2),bitwiseOR:e("|",3),bitwiseXOR:e("^",4),bitwiseAND:e("&",5),equality:e("==/!=",6),relational:e("</>",7),bitShift:e("<</>>",8),plusMin:new D("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:e("%",10),star:e("*",10),slash:e("/",10),starstar:new D("**",{beforeExpr:!0}),_break:f("break"),_case:f("case",E),_catch:f("catch"),_continue:f("continue"),_debugger:f("debugger"),_default:f("default",E),_do:f("do",{isLoop:!0,beforeExpr:!0}),_else:f("else",E),_finally:f("finally"),_for:f("for",{isLoop:!0}),_function:f("function",F),_if:f("if"),_return:f("return",E),_switch:f("switch"),_throw:f("throw",E),_try:f("try"),_var:f("var"),_const:f("const"),_while:f("while",{isLoop:!0}),_with:f("with"),_new:f("new",{beforeExpr:!0,startsExpr:!0}),_this:f("this",F),_super:f("super",F),_class:f("class"),_extends:f("extends",E),_export:f("export"),_import:f("import"),_null:f("null",F),_true:f("true",F),_false:f("false",F),_in:f("in",{beforeExpr:!0,binop:7}),_instanceof:f("instanceof",{beforeExpr:!0,binop:7}),_typeof:f("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:f("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:f("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},I=/\r\n?|\n|\u2028|\u2029/,J=new RegExp(I.source,"g"),K=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,L=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,M=function(a,b){this.line=a,this.column=b};M.prototype.offset=function(a){return new M(this.line,this.column+a)};var N=function(a,b,c){this.start=b,this.end=c,null!==a.sourceFile&&(this.source=a.sourceFile)},O={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}},P={},Q=function(a,b,c){this.options=a=k(a),this.sourceFile=a.sourceFile,this.keywords=m(w[a.ecmaVersion>=6?6:5]);var d="";if(!a.allowReserved){for(var e=a.ecmaVersion;!(d=u[e]);e--);"module"==a.sourceType&&(d+=" await")}this.reservedWords=m(d);var f=(d?d+" ":"")+u.strict;this.reservedWordsStrict=m(f),this.reservedWordsStrictBind=m(f+" "+u.strictBind),this.input=String(b),this.containsEsc=!1,this.loadPlugins(a.plugins),c?(this.pos=c,this.lineStart=this.input.lastIndexOf("\n",c-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(I).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=H.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===a.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&a.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)};Q.prototype.isKeyword=function(a){return this.keywords.test(a)},Q.prototype.isReservedWord=function(a){return this.reservedWords.test(a)},Q.prototype.extend=function(a,b){this[a]=b(this[a])},Q.prototype.loadPlugins=function(a){var b=this;for(var c in a){var d=P[c];if(!d)throw new Error("Plugin '"+c+"' not found");d(b,a[c])}},Q.prototype.parse=function(){var a=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(a)};var R=Q.prototype,S=/^(?:'((?:[^\']|\.)*)'|"((?:[^\"]|\.)*)"|;)/;R.strictDirective=function(a){for(var b=this;;){L.lastIndex=a,a+=L.exec(b.input)[0].length;var c=S.exec(b.input.slice(a));if(!c)return!1;if("use strict"==(c[1]||c[2]))return!0;a+=c[0].length}},R.eat=function(a){return this.type===a&&(this.next(),!0)},R.isContextual=function(a){return this.type===H.name&&this.value===a},R.eatContextual=function(a){return this.value===a&&this.eat(H.name)},R.expectContextual=function(a){this.eatContextual(a)||this.unexpected()},R.canInsertSemicolon=function(){return this.type===H.eof||this.type===H.braceR||I.test(this.input.slice(this.lastTokEnd,this.start))},R.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},R.semicolon=function(){this.eat(H.semi)||this.insertSemicolon()||this.unexpected()},R.afterTrailingComma=function(a,b){if(this.type==a)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),b||this.next(),!0},R.expect=function(a){this.eat(a)||this.unexpected()},R.unexpected=function(a){this.raise(null!=a?a:this.start,"Unexpected token")};var T=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=-1};R.checkPatternErrors=function(a,b){if(a){a.trailingComma>-1&&this.raiseRecoverable(a.trailingComma,"Comma is not permitted after the rest element");var c=b?a.parenthesizedAssign:a.parenthesizedBind;c>-1&&this.raiseRecoverable(c,"Parenthesized pattern")}},R.checkExpressionErrors=function(a,b){var c=a?a.shorthandAssign:-1;return b?void(c>-1&&this.raise(c,"Shorthand property assignments are valid only in destructuring patterns")):c>=0},R.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},R.isSimpleAssignTarget=function(a){return"ParenthesizedExpression"===a.type?this.isSimpleAssignTarget(a.expression):"Identifier"===a.type||"MemberExpression"===a.type};var U=Q.prototype;U.parseTopLevel=function(a){var b=this,c={};for(a.body||(a.body=[]);this.type!==H.eof;){var d=b.parseStatement(!0,!0,c);a.body.push(d)}return this.next(),this.options.ecmaVersion>=6&&(a.sourceType=this.options.sourceType),this.finishNode(a,"Program")};var V={kind:"loop"},W={kind:"switch"};U.isLet=function(){if(this.type!==H.name||this.options.ecmaVersion<6||"let"!=this.value)return!1;L.lastIndex=this.pos;var a=L.exec(this.input),b=this.pos+a[0].length,e=this.input.charCodeAt(b);if(91===e||123==e)return!0;if(c(e,!0)){for(var f=b+1;d(this.input.charCodeAt(f),!0);++f);var g=this.input.slice(b,f);if(!this.isKeyword(g))return!0}return!1},U.isAsyncFunction=function(){if(this.type!==H.name||this.options.ecmaVersion<8||"async"!=this.value)return!1;L.lastIndex=this.pos;var a=L.exec(this.input),b=this.pos+a[0].length;return!(I.test(this.input.slice(this.pos,b))||"function"!==this.input.slice(b,b+8)||b+8!=this.input.length&&d(this.input.charAt(b+8)))},U.parseStatement=function(a,b,c){var d,e=this.type,f=this.startNode();switch(this.isLet()&&(e=H._var,d="let"),e){case H._break:case H._continue:return this.parseBreakContinueStatement(f,e.keyword);case H._debugger:return this.parseDebuggerStatement(f);case H._do:return this.parseDoStatement(f);case H._for:return this.parseForStatement(f);case H._function:return!a&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(f,!1);case H._class:return a||this.unexpected(),this.parseClass(f,!0);case H._if:return this.parseIfStatement(f);case H._return:return this.parseReturnStatement(f);case H._switch:return this.parseSwitchStatement(f);case H._throw:return this.parseThrowStatement(f);case H._try:return this.parseTryStatement(f);case H._const:case H._var:return d=d||this.value,a||"var"==d||this.unexpected(),this.parseVarStatement(f,d);case H._while:return this.parseWhileStatement(f);case H._with:return this.parseWithStatement(f);case H.braceL:return this.parseBlock();case H.semi:return this.parseEmptyStatement(f);case H._export:case H._import:return this.options.allowImportExportEverywhere||(b||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),e===H._import?this.parseImport(f):this.parseExport(f,c);default:if(this.isAsyncFunction()&&a)return this.next(),this.parseFunctionStatement(f,!0);var g=this.value,h=this.parseExpression();return e===H.name&&"Identifier"===h.type&&this.eat(H.colon)?this.parseLabeledStatement(f,g,h):this.parseExpressionStatement(f,h)}},U.parseBreakContinueStatement=function(a,b){var c=this,d="break"==b;this.next(),this.eat(H.semi)||this.insertSemicolon()?a.label=null:this.type!==H.name?this.unexpected():(a.label=this.parseIdent(),this.semicolon());for(var e=0;e<this.labels.length;++e){var f=c.labels[e];if(null==a.label||f.name===a.label.name){if(null!=f.kind&&(d||"loop"===f.kind))break;if(a.label&&d)break}}return e===this.labels.length&&this.raise(a.start,"Unsyntactic "+b),this.finishNode(a,d?"BreakStatement":"ContinueStatement")},U.parseDebuggerStatement=function(a){return this.next(),this.semicolon(),this.finishNode(a,"DebuggerStatement")},U.parseDoStatement=function(a){return this.next(),this.labels.push(V),a.body=this.parseStatement(!1),this.labels.pop(),this.expect(H._while),a.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(H.semi):this.semicolon(),this.finishNode(a,"DoWhileStatement")},U.parseForStatement=function(a){if(this.next(),this.labels.push(V),this.expect(H.parenL),this.type===H.semi)return this.parseFor(a,null);var b=this.isLet();if(this.type===H._var||this.type===H._const||b){var c=this.startNode(),d=b?"let":this.value;return this.next(),this.parseVar(c,!0,d),this.finishNode(c,"VariableDeclaration"),!(this.type===H._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==c.declarations.length||"var"!==d&&c.declarations[0].init?this.parseFor(a,c):this.parseForIn(a,c)}var e=new T,f=this.parseExpression(!0,e);return this.type===H._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.toAssignable(f),this.checkLVal(f),this.checkPatternErrors(e,!0),this.parseForIn(a,f)):(this.checkExpressionErrors(e,!0),this.parseFor(a,f))},U.parseFunctionStatement=function(a,b){return this.next(),this.parseFunction(a,!0,!1,b)},U.isFunction=function(){return this.type===H._function||this.isAsyncFunction()},U.parseIfStatement=function(a){return this.next(),a.test=this.parseParenExpression(),a.consequent=this.parseStatement(!this.strict&&this.isFunction()),a.alternate=this.eat(H._else)?this.parseStatement(!this.strict&&this.isFunction()):null,this.finishNode(a,"IfStatement")},U.parseReturnStatement=function(a){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(H.semi)||this.insertSemicolon()?a.argument=null:(a.argument=this.parseExpression(),this.semicolon()),this.finishNode(a,"ReturnStatement")},U.parseSwitchStatement=function(a){var b=this;this.next(),a.discriminant=this.parseParenExpression(),a.cases=[],this.expect(H.braceL),this.labels.push(W);for(var c,d=!1;this.type!=H.braceR;)if(b.type===H._case||b.type===H._default){var e=b.type===H._case;c&&b.finishNode(c,"SwitchCase"),a.cases.push(c=b.startNode()),c.consequent=[],b.next(),e?c.test=b.parseExpression():(d&&b.raiseRecoverable(b.lastTokStart,"Multiple default clauses"),d=!0,c.test=null),b.expect(H.colon)}else c||b.unexpected(),c.consequent.push(b.parseStatement(!0));return c&&this.finishNode(c,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(a,"SwitchStatement")},U.parseThrowStatement=function(a){return this.next(),I.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),a.argument=this.parseExpression(),this.semicolon(),this.finishNode(a,"ThrowStatement")};var X=[];U.parseTryStatement=function(a){if(this.next(),a.block=this.parseBlock(),a.handler=null,this.type===H._catch){var b=this.startNode();this.next(),this.expect(H.parenL),b.param=this.parseBindingAtom(),this.checkLVal(b.param,!0),this.expect(H.parenR),b.body=this.parseBlock(),a.handler=this.finishNode(b,"CatchClause")}return a.finalizer=this.eat(H._finally)?this.parseBlock():null,a.handler||a.finalizer||this.raise(a.start,"Missing catch or finally clause"),this.finishNode(a,"TryStatement")},U.parseVarStatement=function(a,b){return this.next(),this.parseVar(a,!1,b),this.semicolon(),this.finishNode(a,"VariableDeclaration")},U.parseWhileStatement=function(a){return this.next(),a.test=this.parseParenExpression(),this.labels.push(V),a.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(a,"WhileStatement")},U.parseWithStatement=function(a){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),a.object=this.parseParenExpression(),a.body=this.parseStatement(!1),this.finishNode(a,"WithStatement")},U.parseEmptyStatement=function(a){return this.next(),this.finishNode(a,"EmptyStatement")},U.parseLabeledStatement=function(a,b,c){for(var d=this,e=0;e<this.labels.length;++e)d.labels[e].name===b&&d.raise(c.start,"Label '"+b+"' is already declared");for(var f=this.type.isLoop?"loop":this.type===H._switch?"switch":null,g=this.labels.length-1;g>=0;g--){var h=d.labels[g];if(h.statementStart!=a.start)break;h.statementStart=d.start,h.kind=f}return this.labels.push({name:b,kind:f,statementStart:this.start}),a.body=this.parseStatement(!0),("ClassDeclaration"==a.body.type||"VariableDeclaration"==a.body.type&&(this.strict||"var"!=a.body.kind)||"FunctionDeclaration"==a.body.type&&(this.strict||a.body.generator))&&this.raiseRecoverable(a.body.start,"Invalid labeled declaration"),this.labels.pop(),a.label=c,this.finishNode(a,"LabeledStatement")},U.parseExpressionStatement=function(a,b){return a.expression=b,this.semicolon(),this.finishNode(a,"ExpressionStatement")},U.parseBlock=function(){var a=this,b=this.startNode();for(b.body=[],this.expect(H.braceL);!this.eat(H.braceR);){var c=a.parseStatement(!0);b.body.push(c)}return this.finishNode(b,"BlockStatement")},U.parseFor=function(a,b){return a.init=b,this.expect(H.semi),a.test=this.type===H.semi?null:this.parseExpression(),this.expect(H.semi),a.update=this.type===H.parenR?null:this.parseExpression(),this.expect(H.parenR),a.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(a,"ForStatement")},U.parseForIn=function(a,b){var c=this.type===H._in?"ForInStatement":"ForOfStatement";return this.next(),a.left=b,a.right=this.parseExpression(),this.expect(H.parenR),a.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(a,c)},U.parseVar=function(a,b,c){var d=this;for(a.declarations=[],a.kind=c;;){var e=d.startNode();if(d.parseVarId(e),d.eat(H.eq)?e.init=d.parseMaybeAssign(b):"const"!==c||d.type===H._in||d.options.ecmaVersion>=6&&d.isContextual("of")?"Identifier"==e.id.type||b&&(d.type===H._in||d.isContextual("of"))?e.init=null:d.raise(d.lastTokEnd,"Complex binding patterns require an initialization value"):d.unexpected(),a.declarations.push(d.finishNode(e,"VariableDeclarator")),!d.eat(H.comma))break}return a},U.parseVarId=function(a){a.id=this.parseBindingAtom(),this.checkLVal(a.id,!0)},U.parseFunction=function(a,b,c,d){this.initFunction(a),this.options.ecmaVersion>=6&&!d&&(a.generator=this.eat(H.star)),this.options.ecmaVersion>=8&&(a.async=!!d),null==b&&(b=this.type==H.name),b&&(a.id=this.parseIdent());var e=this.inGenerator,f=this.inAsync,g=this.yieldPos,h=this.awaitPos,i=this.inFunction;return this.inGenerator=a.generator,this.inAsync=a.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,b||this.type!==H.name||(a.id=this.parseIdent()),this.parseFunctionParams(a),this.parseFunctionBody(a,c),this.inGenerator=e,this.inAsync=f,this.yieldPos=g,this.awaitPos=h,this.inFunction=i,this.finishNode(a,b?"FunctionDeclaration":"FunctionExpression")},U.parseFunctionParams=function(a){this.expect(H.parenL),a.params=this.parseBindingList(H.parenR,!1,this.options.ecmaVersion>=8,!0),this.checkYieldAwaitInDefaultParams()},U.parseClass=function(a,b){var c=this;this.next(),null==b&&(b=this.type===H.name),this.parseClassId(a,b),this.parseClassSuper(a);var d=this.startNode(),e=!1;for(d.body=[],this.expect(H.braceL);!this.eat(H.braceR);)if(!c.eat(H.semi)){var f=c.startNode(),g=c.eat(H.star),h=!1,i=c.type===H.name&&"static"===c.value;c.parsePropertyName(f),f.static=i&&c.type!==H.parenL,f.static&&(g&&c.unexpected(),g=c.eat(H.star),c.parsePropertyName(f)),c.options.ecmaVersion>=8&&!g&&!f.computed&&"Identifier"===f.key.type&&"async"===f.key.name&&c.type!==H.parenL&&!c.canInsertSemicolon()&&(h=!0,c.parsePropertyName(f)),f.kind="method";var j=!1;if(!f.computed){var k=f.key;g||h||"Identifier"!==k.type||c.type===H.parenL||"get"!==k.name&&"set"!==k.name||(j=!0,f.kind=k.name,k=c.parsePropertyName(f)),!f.static&&("Identifier"===k.type&&"constructor"===k.name||"Literal"===k.type&&"constructor"===k.value)&&(e&&c.raise(k.start,"Duplicate constructor in the same class"),j&&c.raise(k.start,"Constructor can't have get/set modifier"),g&&c.raise(k.start,"Constructor can't be a generator"),h&&c.raise(k.start,"Constructor can't be an async method"),f.kind="constructor",e=!0)}if(c.parseClassMethod(d,f,g,h),j){var l="get"===f.kind?0:1;if(f.value.params.length!==l){var m=f.value.start;"get"===f.kind?c.raiseRecoverable(m,"getter should have no params"):c.raiseRecoverable(m,"setter should have exactly one param")}else"set"===f.kind&&"RestElement"===f.value.params[0].type&&c.raiseRecoverable(f.value.params[0].start,"Setter cannot use rest params")}}return a.body=this.finishNode(d,"ClassBody"),this.finishNode(a,b?"ClassDeclaration":"ClassExpression")},U.parseClassMethod=function(a,b,c,d){b.value=this.parseMethod(c,d),a.body.push(this.finishNode(b,"MethodDefinition"))},U.parseClassId=function(a,b){a.id=this.type===H.name?this.parseIdent():b?this.unexpected():null},U.parseClassSuper=function(a){a.superClass=this.eat(H._extends)?this.parseExprSubscripts():null},U.parseExport=function(a,b){var c=this;if(this.next(),this.eat(H.star))return this.expectContextual("from"),a.source=this.type===H.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(a,"ExportAllDeclaration");if(this.eat(H._default)){this.checkExport(b,"default",this.lastTokStart);var d;if(this.type===H._function||(d=this.isAsyncFunction())){var e=this.startNode();this.next(),d&&this.next(),a.declaration=this.parseFunction(e,null,!1,d)}else if(this.type===H._class){var f=this.startNode();a.declaration=this.parseClass(f,null)}else a.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(a,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())a.declaration=this.parseStatement(!0),"VariableDeclaration"===a.declaration.type?this.checkVariableExport(b,a.declaration.declarations):this.checkExport(b,a.declaration.id.name,a.declaration.id.start),a.specifiers=[],a.source=null;else{if(a.declaration=null,a.specifiers=this.parseExportSpecifiers(b),this.eatContextual("from"))a.source=this.type===H.string?this.parseExprAtom():this.unexpected();else{for(var g=0;g<a.specifiers.length;g++)(c.keywords.test(a.specifiers[g].local.name)||c.reservedWords.test(a.specifiers[g].local.name))&&c.unexpected(a.specifiers[g].local.start);a.source=null}this.semicolon()}return this.finishNode(a,"ExportNamedDeclaration")},U.checkExport=function(a,b,c){a&&(Object.prototype.hasOwnProperty.call(a,b)&&this.raiseRecoverable(c,"Duplicate export '"+b+"'"),a[b]=!0)},U.checkPatternExport=function(a,b){var c=this,d=b.type;if("Identifier"==d)this.checkExport(a,b.name,b.start);else if("ObjectPattern"==d)for(var e=0;e<b.properties.length;++e)c.checkPatternExport(a,b.properties[e].value);else if("ArrayPattern"==d)for(var f=0;f<b.elements.length;++f){var g=b.elements[f];g&&c.checkPatternExport(a,g)}else"AssignmentPattern"==d?this.checkPatternExport(a,b.left):"ParenthesizedExpression"==d&&this.checkPatternExport(a,b.expression)},U.checkVariableExport=function(a,b){var c=this;if(a)for(var d=0;d<b.length;d++)c.checkPatternExport(a,b[d].id)},U.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},U.parseExportSpecifiers=function(a){var b=this,c=[],d=!0;for(this.expect(H.braceL);!this.eat(H.braceR);){if(d)d=!1;else if(b.expect(H.comma),b.afterTrailingComma(H.braceR))break;var e=b.startNode();e.local=b.parseIdent(!0),e.exported=b.eatContextual("as")?b.parseIdent(!0):e.local,b.checkExport(a,e.exported.name,e.exported.start),c.push(b.finishNode(e,"ExportSpecifier"))}return c},U.parseImport=function(a){return this.next(),this.type===H.string?(a.specifiers=X,a.source=this.parseExprAtom()):(a.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),a.source=this.type===H.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(a,"ImportDeclaration")},U.parseImportSpecifiers=function(){var a=this,b=[],c=!0;if(this.type===H.name){var d=this.startNode();if(d.local=this.parseIdent(),this.checkLVal(d.local,!0),b.push(this.finishNode(d,"ImportDefaultSpecifier")),!this.eat(H.comma))return b}if(this.type===H.star){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLVal(e.local,!0),b.push(this.finishNode(e,"ImportNamespaceSpecifier")),b}for(this.expect(H.braceL);!this.eat(H.braceR);){if(c)c=!1;else if(a.expect(H.comma),a.afterTrailingComma(H.braceR))break;var f=a.startNode();f.imported=a.parseIdent(!0),a.eatContextual("as")?f.local=a.parseIdent():(f.local=f.imported,a.isKeyword(f.local.name)&&a.unexpected(f.local.start),a.reservedWordsStrict.test(f.local.name)&&a.raiseRecoverable(f.local.start,"The keyword '"+f.local.name+"' is reserved")),a.checkLVal(f.local,!0),b.push(a.finishNode(f,"ImportSpecifier"))}return b};var Y=Q.prototype;Y.toAssignable=function(a,b){var c=this;if(this.options.ecmaVersion>=6&&a)switch(a.type){case"Identifier":this.inAsync&&"await"===a.name&&this.raise(a.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":
a.type="ObjectPattern";for(var d=0;d<a.properties.length;d++){var e=a.properties[d];"init"!==e.kind&&c.raise(e.key.start,"Object pattern can't contain getter or setter"),c.toAssignable(e.value,b)}break;case"ArrayExpression":a.type="ArrayPattern",this.toAssignableList(a.elements,b);break;case"AssignmentExpression":if("="!==a.operator){this.raise(a.left.end,"Only '=' operator can be used for specifying default value.");break}a.type="AssignmentPattern",delete a.operator,this.toAssignable(a.left,b);case"AssignmentPattern":break;case"ParenthesizedExpression":a.expression=this.toAssignable(a.expression,b);break;case"MemberExpression":if(!b)break;default:this.raise(a.start,"Assigning to rvalue")}return a},Y.toAssignableList=function(a,b){var c=this,d=a.length;if(d){var e=a[d-1];if(e&&"RestElement"==e.type)--d;else if(e&&"SpreadElement"==e.type){e.type="RestElement";var f=e.argument;this.toAssignable(f,b),"Identifier"!==f.type&&"MemberExpression"!==f.type&&"ArrayPattern"!==f.type&&this.unexpected(f.start),--d}b&&e&&"RestElement"===e.type&&"Identifier"!==e.argument.type&&this.unexpected(e.argument.start)}for(var g=0;g<d;g++){var h=a[g];h&&c.toAssignable(h,b)}return a},Y.parseSpread=function(a){var b=this.startNode();return this.next(),b.argument=this.parseMaybeAssign(!1,a),this.finishNode(b,"SpreadElement")},Y.parseRest=function(a){var b=this.startNode();return this.next(),a?b.argument=this.type===H.name?this.parseIdent():this.unexpected():b.argument=this.type===H.name||this.type===H.bracketL?this.parseBindingAtom():this.unexpected(),this.finishNode(b,"RestElement")},Y.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case H.name:return this.parseIdent();case H.bracketL:var a=this.startNode();return this.next(),a.elements=this.parseBindingList(H.bracketR,!0,!0),this.finishNode(a,"ArrayPattern");case H.braceL:return this.parseObj(!0);default:this.unexpected()}},Y.parseBindingList=function(a,b,c,d){for(var e=this,f=[],g=!0;!this.eat(a);)if(g?g=!1:e.expect(H.comma),b&&e.type===H.comma)f.push(null);else{if(c&&e.afterTrailingComma(a))break;if(e.type===H.ellipsis){var h=e.parseRest(d);e.parseBindingListItem(h),f.push(h),e.type===H.comma&&e.raise(e.start,"Comma is not permitted after the rest element"),e.expect(a);break}var i=e.parseMaybeDefault(e.start,e.startLoc);e.parseBindingListItem(i),f.push(i)}return f},Y.parseBindingListItem=function(a){return a},Y.parseMaybeDefault=function(a,b,c){if(c=c||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(H.eq))return c;var d=this.startNodeAt(a,b);return d.left=c,d.right=this.parseMaybeAssign(),this.finishNode(d,"AssignmentPattern")},Y.checkLVal=function(a,b,c){var d=this;switch(a.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(a.name)&&this.raiseRecoverable(a.start,(b?"Binding ":"Assigning to ")+a.name+" in strict mode"),c&&(i(c,a.name)&&this.raiseRecoverable(a.start,"Argument name clash"),c[a.name]=!0);break;case"MemberExpression":b&&this.raiseRecoverable(a.start,(b?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var e=0;e<a.properties.length;e++)d.checkLVal(a.properties[e].value,b,c);break;case"ArrayPattern":for(var f=0;f<a.elements.length;f++){var g=a.elements[f];g&&d.checkLVal(g,b,c)}break;case"AssignmentPattern":this.checkLVal(a.left,b,c);break;case"RestElement":this.checkLVal(a.argument,b,c);break;case"ParenthesizedExpression":this.checkLVal(a.expression,b,c);break;default:this.raise(a.start,(b?"Binding":"Assigning to")+" rvalue")}};var Z=Q.prototype;Z.checkPropClash=function(a,b){if(!(this.options.ecmaVersion>=6&&(a.computed||a.method||a.shorthand))){var c,d=a.key;switch(d.type){case"Identifier":c=d.name;break;case"Literal":c=String(d.value);break;default:return}var e=a.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===c&&"init"===e&&(b.proto&&this.raiseRecoverable(d.start,"Redefinition of __proto__ property"),b.proto=!0));c="$"+c;var f=b[c];if(f){var g="init"!==e;(!this.strict&&!g||!f[e])&&g^f.init||this.raiseRecoverable(d.start,"Redefinition of property")}else f=b[c]={init:!1,get:!1,set:!1};f[e]=!0}},Z.parseExpression=function(a,b){var c=this,d=this.start,e=this.startLoc,f=this.parseMaybeAssign(a,b);if(this.type===H.comma){var g=this.startNodeAt(d,e);for(g.expressions=[f];this.eat(H.comma);)g.expressions.push(c.parseMaybeAssign(a,b));return this.finishNode(g,"SequenceExpression")}return f},Z.parseMaybeAssign=function(a,b,c){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var d=!1,e=-1;b?(e=b.parenthesizedAssign,b.parenthesizedAssign=-1):(b=new T,d=!0);var f=this.start,g=this.startLoc;this.type!=H.parenL&&this.type!=H.name||(this.potentialArrowAt=this.start);var h=this.parseMaybeConditional(a,b);if(c&&(h=c.call(this,h,f,g)),this.type.isAssign){this.checkPatternErrors(b,!0),d||T.call(b);var i=this.startNodeAt(f,g);return i.operator=this.value,i.left=this.type===H.eq?this.toAssignable(h):h,b.shorthandAssign=-1,this.checkLVal(h),this.next(),i.right=this.parseMaybeAssign(a),this.finishNode(i,"AssignmentExpression")}return d&&this.checkExpressionErrors(b,!0),e>-1&&(b.parenthesizedAssign=e),h},Z.parseMaybeConditional=function(a,b){var c=this.start,d=this.startLoc,e=this.parseExprOps(a,b);if(this.checkExpressionErrors(b))return e;if(this.eat(H.question)){var f=this.startNodeAt(c,d);return f.test=e,f.consequent=this.parseMaybeAssign(),this.expect(H.colon),f.alternate=this.parseMaybeAssign(a),this.finishNode(f,"ConditionalExpression")}return e},Z.parseExprOps=function(a,b){var c=this.start,d=this.startLoc,e=this.parseMaybeUnary(b,!1);return this.checkExpressionErrors(b)?e:this.parseExprOp(e,c,d,-1,a)},Z.parseExprOp=function(a,b,c,d,e){var f=this.type.binop;if(null!=f&&(!e||this.type!==H._in)&&f>d){var g=this.type===H.logicalOR||this.type===H.logicalAND,h=this.value;this.next();var i=this.start,j=this.startLoc,k=this.parseExprOp(this.parseMaybeUnary(null,!1),i,j,f,e),l=this.buildBinary(b,c,a,k,h,g);return this.parseExprOp(l,b,c,d,e)}return a},Z.buildBinary=function(a,b,c,d,e,f){var g=this.startNodeAt(a,b);return g.left=c,g.operator=e,g.right=d,this.finishNode(g,f?"LogicalExpression":"BinaryExpression")},Z.parseMaybeUnary=function(a,b){var c,d=this,e=this.start,f=this.startLoc;if(this.inAsync&&this.isContextual("await"))c=this.parseAwait(a),b=!0;else if(this.type.prefix){var g=this.startNode(),h=this.type===H.incDec;g.operator=this.value,g.prefix=!0,this.next(),g.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(a,!0),h?this.checkLVal(g.argument):this.strict&&"delete"===g.operator&&"Identifier"===g.argument.type?this.raiseRecoverable(g.start,"Deleting local variable in strict mode"):b=!0,c=this.finishNode(g,h?"UpdateExpression":"UnaryExpression")}else{if(c=this.parseExprSubscripts(a),this.checkExpressionErrors(a))return c;for(;this.type.postfix&&!this.canInsertSemicolon();){var i=d.startNodeAt(e,f);i.operator=d.value,i.prefix=!1,i.argument=c,d.checkLVal(c),d.next(),c=d.finishNode(i,"UpdateExpression")}}return!b&&this.eat(H.starstar)?this.buildBinary(e,f,c,this.parseMaybeUnary(null,!1),"**",!1):c},Z.parseExprSubscripts=function(a){var b=this.start,c=this.startLoc,d=this.parseExprAtom(a),e="ArrowFunctionExpression"===d.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(a)||e)return d;var f=this.parseSubscripts(d,b,c);return a&&"MemberExpression"===f.type&&(a.parenthesizedAssign>=f.start&&(a.parenthesizedAssign=-1),a.parenthesizedBind>=f.start&&(a.parenthesizedBind=-1)),f},Z.parseSubscripts=function(a,b,c,d){for(var e,f=this,g=this.options.ecmaVersion>=8&&"Identifier"===a.type&&"async"===a.name&&this.lastTokEnd==a.end&&!this.canInsertSemicolon();;)if((e=f.eat(H.bracketL))||f.eat(H.dot)){var h=f.startNodeAt(b,c);h.object=a,h.property=e?f.parseExpression():f.parseIdent(!0),h.computed=!!e,e&&f.expect(H.bracketR),a=f.finishNode(h,"MemberExpression")}else if(!d&&f.eat(H.parenL)){var i=new T,j=f.yieldPos,k=f.awaitPos;f.yieldPos=0,f.awaitPos=0;var l=f.parseExprList(H.parenR,f.options.ecmaVersion>=8,!1,i);if(g&&!f.canInsertSemicolon()&&f.eat(H.arrow))return f.checkPatternErrors(i,!1),f.checkYieldAwaitInDefaultParams(),f.yieldPos=j,f.awaitPos=k,f.parseArrowExpression(f.startNodeAt(b,c),l,!0);f.checkExpressionErrors(i,!0),f.yieldPos=j||f.yieldPos,f.awaitPos=k||f.awaitPos;var m=f.startNodeAt(b,c);m.callee=a,m.arguments=l,a=f.finishNode(m,"CallExpression")}else{if(f.type!==H.backQuote)return a;var n=f.startNodeAt(b,c);n.tag=a,n.quasi=f.parseTemplate(),a=f.finishNode(n,"TaggedTemplateExpression")}},Z.parseExprAtom=function(a){var b,c=this.potentialArrowAt==this.start;switch(this.type){case H._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case H._this:var d=this.type===H._this?"ThisExpression":"Super";return b=this.startNode(),this.next(),this.finishNode(b,d);case H.name:var e=this.start,f=this.startLoc,g=this.parseIdent(this.type!==H.name);if(this.options.ecmaVersion>=8&&"async"===g.name&&!this.canInsertSemicolon()&&this.eat(H._function))return this.parseFunction(this.startNodeAt(e,f),!1,!1,!0);if(c&&!this.canInsertSemicolon()){if(this.eat(H.arrow))return this.parseArrowExpression(this.startNodeAt(e,f),[g],!1);if(this.options.ecmaVersion>=8&&"async"===g.name&&this.type===H.name)return g=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(H.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(e,f),[g],!0)}return g;case H.regexp:var h=this.value;return b=this.parseLiteral(h.value),b.regex={pattern:h.pattern,flags:h.flags},b;case H.num:case H.string:return this.parseLiteral(this.value);case H._null:case H._true:case H._false:return b=this.startNode(),b.value=this.type===H._null?null:this.type===H._true,b.raw=this.type.keyword,this.next(),this.finishNode(b,"Literal");case H.parenL:var i=this.start,j=this.parseParenAndDistinguishExpression(c);return a&&(a.parenthesizedAssign<0&&!this.isSimpleAssignTarget(j)&&(a.parenthesizedAssign=i),a.parenthesizedBind<0&&(a.parenthesizedBind=i)),j;case H.bracketL:return b=this.startNode(),this.next(),b.elements=this.parseExprList(H.bracketR,!0,!0,a),this.finishNode(b,"ArrayExpression");case H.braceL:return this.parseObj(!1,a);case H._function:return b=this.startNode(),this.next(),this.parseFunction(b,!1);case H._class:return this.parseClass(this.startNode(),!1);case H._new:return this.parseNew();case H.backQuote:return this.parseTemplate();default:this.unexpected()}},Z.parseLiteral=function(a){var b=this.startNode();return b.value=a,b.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(b,"Literal")},Z.parseParenExpression=function(){this.expect(H.parenL);var a=this.parseExpression();return this.expect(H.parenR),a},Z.parseParenAndDistinguishExpression=function(a){var b,c=this,d=this.start,e=this.startLoc,f=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var g,h,i=this.start,j=this.startLoc,k=[],l=!0,m=!1,n=new T,o=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==H.parenR;){if(l?l=!1:c.expect(H.comma),f&&c.afterTrailingComma(H.parenR,!0)){m=!0;break}if(c.type===H.ellipsis){g=c.start,k.push(c.parseParenItem(c.parseRest())),c.type===H.comma&&c.raise(c.start,"Comma is not permitted after the rest element");break}c.type!==H.parenL||h||(h=c.start),k.push(c.parseMaybeAssign(!1,n,c.parseParenItem))}var q=this.start,r=this.startLoc;if(this.expect(H.parenR),a&&!this.canInsertSemicolon()&&this.eat(H.arrow))return this.checkPatternErrors(n,!1),this.checkYieldAwaitInDefaultParams(),h&&this.unexpected(h),this.yieldPos=o,this.awaitPos=p,this.parseParenArrowList(d,e,k);k.length&&!m||this.unexpected(this.lastTokStart),g&&this.unexpected(g),this.checkExpressionErrors(n,!0),this.yieldPos=o||this.yieldPos,this.awaitPos=p||this.awaitPos,k.length>1?(b=this.startNodeAt(i,j),b.expressions=k,this.finishNodeAt(b,"SequenceExpression",q,r)):b=k[0]}else b=this.parseParenExpression();if(this.options.preserveParens){var s=this.startNodeAt(d,e);return s.expression=b,this.finishNode(s,"ParenthesizedExpression")}return b},Z.parseParenItem=function(a){return a},Z.parseParenArrowList=function(a,b,c){return this.parseArrowExpression(this.startNodeAt(a,b),c)};var $=[];Z.parseNew=function(){var a=this.startNode(),b=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(H.dot))return a.meta=b,a.property=this.parseIdent(!0),"target"!==a.property.name&&this.raiseRecoverable(a.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(a.start,"new.target can only be used in functions"),this.finishNode(a,"MetaProperty");var c=this.start,d=this.startLoc;return a.callee=this.parseSubscripts(this.parseExprAtom(),c,d,!0),this.eat(H.parenL)?a.arguments=this.parseExprList(H.parenR,this.options.ecmaVersion>=8,!1):a.arguments=$,this.finishNode(a,"NewExpression")},Z.parseTemplateElement=function(){var a=this.startNode();return a.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),a.tail=this.type===H.backQuote,this.finishNode(a,"TemplateElement")},Z.parseTemplate=function(){var a=this,b=this.startNode();this.next(),b.expressions=[];var c=this.parseTemplateElement();for(b.quasis=[c];!c.tail;)a.expect(H.dollarBraceL),b.expressions.push(a.parseExpression()),a.expect(H.braceR),b.quasis.push(c=a.parseTemplateElement());return this.next(),this.finishNode(b,"TemplateLiteral")},Z.parseObj=function(a,b){var c=this,d=this.startNode(),e=!0,f={};for(d.properties=[],this.next();!this.eat(H.braceR);){if(e)e=!1;else if(c.expect(H.comma),c.afterTrailingComma(H.braceR))break;var g,h,i,j,k=c.startNode();c.options.ecmaVersion>=6&&(k.method=!1,k.shorthand=!1,(a||b)&&(i=c.start,j=c.startLoc),a||(g=c.eat(H.star))),c.parsePropertyName(k),a||!(c.options.ecmaVersion>=8)||g||k.computed||"Identifier"!==k.key.type||"async"!==k.key.name||c.type===H.parenL||c.type===H.colon||c.canInsertSemicolon()?h=!1:(h=!0,c.parsePropertyName(k,b)),c.parsePropertyValue(k,a,g,h,i,j,b),c.checkPropClash(k,f),d.properties.push(c.finishNode(k,"Property"))}return this.finishNode(d,a?"ObjectPattern":"ObjectExpression")},Z.parsePropertyValue=function(a,b,c,d,e,f,g){if((c||d)&&this.type===H.colon&&this.unexpected(),this.eat(H.colon))a.value=b?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,g),a.kind="init";else if(this.options.ecmaVersion>=6&&this.type===H.parenL)b&&this.unexpected(),a.kind="init",a.method=!0,a.value=this.parseMethod(c,d);else if(this.options.ecmaVersion>=5&&!a.computed&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)&&this.type!=H.comma&&this.type!=H.braceR){(c||d||b)&&this.unexpected(),a.kind=a.key.name,this.parsePropertyName(a),a.value=this.parseMethod(!1);var h="get"===a.kind?0:1;if(a.value.params.length!==h){var i=a.value.start;"get"===a.kind?this.raiseRecoverable(i,"getter should have no params"):this.raiseRecoverable(i,"setter should have exactly one param")}else"set"===a.kind&&"RestElement"===a.value.params[0].type&&this.raiseRecoverable(a.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!a.computed&&"Identifier"===a.key.type?((this.keywords.test(a.key.name)||(this.strict?this.reservedWordsStrict:this.reservedWords).test(a.key.name)||this.inGenerator&&"yield"==a.key.name||this.inAsync&&"await"==a.key.name)&&this.raiseRecoverable(a.key.start,"'"+a.key.name+"' can not be used as shorthand property"),a.kind="init",b?a.value=this.parseMaybeDefault(e,f,a.key):this.type===H.eq&&g?(g.shorthandAssign<0&&(g.shorthandAssign=this.start),a.value=this.parseMaybeDefault(e,f,a.key)):a.value=a.key,a.shorthand=!0):this.unexpected()},Z.parsePropertyName=function(a){if(this.options.ecmaVersion>=6){if(this.eat(H.bracketL))return a.computed=!0,a.key=this.parseMaybeAssign(),this.expect(H.bracketR),a.key;a.computed=!1}return a.key=this.type===H.num||this.type===H.string?this.parseExprAtom():this.parseIdent(!0)},Z.initFunction=function(a){a.id=null,this.options.ecmaVersion>=6&&(a.generator=!1,a.expression=!1),this.options.ecmaVersion>=8&&(a.async=!1)},Z.parseMethod=function(a,b){var c=this.startNode(),d=this.inGenerator,e=this.inAsync,f=this.yieldPos,g=this.awaitPos,h=this.inFunction;return this.initFunction(c),this.options.ecmaVersion>=6&&(c.generator=a),this.options.ecmaVersion>=8&&(c.async=!!b),this.inGenerator=c.generator,this.inAsync=c.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.expect(H.parenL),c.params=this.parseBindingList(H.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(c,!1),this.inGenerator=d,this.inAsync=e,this.yieldPos=f,this.awaitPos=g,this.inFunction=h,this.finishNode(c,"FunctionExpression")},Z.parseArrowExpression=function(a,b,c){var d=this.inGenerator,e=this.inAsync,f=this.yieldPos,g=this.awaitPos,h=this.inFunction;return this.initFunction(a),this.options.ecmaVersion>=8&&(a.async=!!c),this.inGenerator=!1,this.inAsync=a.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,a.params=this.toAssignableList(b,!0),this.parseFunctionBody(a,!0),this.inGenerator=d,this.inAsync=e,this.yieldPos=f,this.awaitPos=g,this.inFunction=h,this.finishNode(a,"ArrowFunctionExpression")},Z.parseFunctionBody=function(a,b){var c=b&&this.type!==H.braceL,d=this.strict,e=!1;if(c)a.body=this.parseMaybeAssign(),a.expression=!0;else{var f=this.options.ecmaVersion>=7&&!this.isSimpleParamList(a.params);d&&!f||(e=this.strictDirective(this.end),e&&f&&this.raiseRecoverable(a.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var g=this.labels;this.labels=[],e&&(this.strict=!0),a.body=this.parseBlock(!0),a.expression=!1,this.labels=g}d||e?(this.strict=!0,a.id&&this.checkLVal(a.id,!0),this.checkParams(a),this.strict=d):!b&&this.isSimpleParamList(a.params)||this.checkParams(a)},Z.isSimpleParamList=function(a){for(var b=0;b<a.length;b++)if("Identifier"!==a[b].type)return!1;return!0},Z.checkParams=function(a){for(var b=this,c={},d=0;d<a.params.length;d++)b.checkLVal(a.params[d],!0,c)},Z.parseExprList=function(a,b,c,d){for(var e=this,f=[],g=!0;!this.eat(a);){if(g)g=!1;else if(e.expect(H.comma),b&&e.afterTrailingComma(a))break;var h;c&&e.type===H.comma?h=null:e.type===H.ellipsis?(h=e.parseSpread(d),d&&e.type===H.comma&&d.trailingComma<0&&(d.trailingComma=e.start)):h=e.parseMaybeAssign(!1,d),f.push(h)}return f},Z.parseIdent=function(a){var b=this.startNode();return a&&"never"==this.options.allowReserved&&(a=!1),this.type===H.name?(!a&&(this.strict?this.reservedWordsStrict:this.reservedWords).test(this.value)&&(this.options.ecmaVersion>=6||this.input.slice(this.start,this.end).indexOf("\\")==-1)&&this.raiseRecoverable(this.start,"The keyword '"+this.value+"' is reserved"),this.inGenerator&&"yield"===this.value&&this.raiseRecoverable(this.start,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===this.value&&this.raiseRecoverable(this.start,"Can not use 'await' as identifier inside an async function"),b.name=this.value):a&&this.type.keyword?b.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(b,"Identifier")},Z.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var a=this.startNode();return this.next(),this.type==H.semi||this.canInsertSemicolon()||this.type!=H.star&&!this.type.startsExpr?(a.delegate=!1,a.argument=null):(a.delegate=this.eat(H.star),a.argument=this.parseMaybeAssign()),this.finishNode(a,"YieldExpression")},Z.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var a=this.startNode();return this.next(),a.argument=this.parseMaybeUnary(null,!0),this.finishNode(a,"AwaitExpression")};var _=Q.prototype;_.raise=function(a,b){var c=j(this.input,a);b+=" ("+c.line+":"+c.column+")";var d=new SyntaxError(b);throw d.pos=a,d.loc=c,d.raisedAt=this.pos,d},_.raiseRecoverable=_.raise,_.curPosition=function(){if(this.options.locations)return new M(this.curLine,this.pos-this.lineStart)};var aa=function(a,b,c){this.type="",this.start=b,this.end=0,a.options.locations&&(this.loc=new N(a,c)),a.options.directSourceFile&&(this.sourceFile=a.options.directSourceFile),a.options.ranges&&(this.range=[b,0])},ba=Q.prototype;ba.startNode=function(){return new aa(this,this.start,this.startLoc)},ba.startNodeAt=function(a,b){return new aa(this,a,b)},ba.finishNode=function(a,b){return n.call(this,a,b,this.lastTokEnd,this.lastTokEndLoc)},ba.finishNodeAt=function(a,b,c,d){return n.call(this,a,b,c,d)};var ca=function(a,b,c,d){this.token=a,this.isExpr=!!b,this.preserveSpace=!!c,this.override=d},da={b_stat:new ca("{",!1),b_expr:new ca("{",!0),b_tmpl:new ca("${",!0),p_stat:new ca("(",!1),p_expr:new ca("(",!0),q_tmpl:new ca("`",!0,!0,function(a){return a.readTmplToken()}),f_expr:new ca("function",!0)},ea=Q.prototype;ea.initialContext=function(){return[da.b_stat]},ea.braceIsBlock=function(a){if(a===H.colon){var b=this.curContext();if(b===da.b_stat||b===da.b_expr)return!b.isExpr}return a===H._return?I.test(this.input.slice(this.lastTokEnd,this.start)):a===H._else||a===H.semi||a===H.eof||a===H.parenR||(a==H.braceL?this.curContext()===da.b_stat:!this.exprAllowed)},ea.updateContext=function(a){var b,c=this.type;c.keyword&&a==H.dot?this.exprAllowed=!1:(b=c.updateContext)?b.call(this,a):this.exprAllowed=c.beforeExpr},H.parenR.updateContext=H.braceR.updateContext=function(){if(1==this.context.length)return void(this.exprAllowed=!0);var a=this.context.pop();a===da.b_stat&&this.curContext()===da.f_expr?(this.context.pop(),this.exprAllowed=!1):a===da.b_tmpl?this.exprAllowed=!0:this.exprAllowed=!a.isExpr},H.braceL.updateContext=function(a){this.context.push(this.braceIsBlock(a)?da.b_stat:da.b_expr),this.exprAllowed=!0},H.dollarBraceL.updateContext=function(){this.context.push(da.b_tmpl),this.exprAllowed=!0},H.parenL.updateContext=function(a){var b=a===H._if||a===H._for||a===H._with||a===H._while;this.context.push(b?da.p_stat:da.p_expr),this.exprAllowed=!0},H.incDec.updateContext=function(){},H._function.updateContext=function(a){a.beforeExpr&&a!==H.semi&&a!==H._else&&(a!==H.colon&&a!==H.braceL||this.curContext()!==da.b_stat)&&this.context.push(da.f_expr),this.exprAllowed=!1},H.backQuote.updateContext=function(){this.curContext()===da.q_tmpl?this.context.pop():this.context.push(da.q_tmpl),this.exprAllowed=!1};var fa=function(a){this.type=a.type,this.value=a.value,this.start=a.start,this.end=a.end,a.options.locations&&(this.loc=new N(a,a.startLoc,a.endLoc)),a.options.ranges&&(this.range=[a.start,a.end])},ga=Q.prototype,ha="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);ga.next=function(){this.options.onToken&&this.options.onToken(new fa(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ga.getToken=function(){return this.next(),new fa(this)},"undefined"!=typeof Symbol&&(ga[Symbol.iterator]=function(){var a=this;return{next:function(){var b=a.getToken();return{done:b.type===H.eof,value:b}}}}),ga.curContext=function(){return this.context[this.context.length-1]},ga.nextToken=function(){var a=this.curContext();return a&&a.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(H.eof):a.override?a.override(this):void this.readToken(this.fullCharCodeAtPos())},ga.readToken=function(a){return c(a,this.options.ecmaVersion>=6)||92===a?this.readWord():this.getTokenFromCode(a)},ga.fullCharCodeAtPos=function(){var a=this.input.charCodeAt(this.pos);if(a<=55295||a>=57344)return a;var b=this.input.charCodeAt(this.pos+1);return(a<<10)+b-56613888},ga.skipBlockComment=function(){var a=this,b=this.options.onComment&&this.curPosition(),c=this.pos,d=this.input.indexOf("*/",this.pos+=2);if(d===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=d+2,this.options.locations){J.lastIndex=c;for(var e;(e=J.exec(this.input))&&e.index<this.pos;)++a.curLine,a.lineStart=e.index+e[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(c+2,d),c,this.pos,b,this.curPosition())},ga.skipLineComment=function(a){for(var b=this,c=this.pos,d=this.options.onComment&&this.curPosition(),e=this.input.charCodeAt(this.pos+=a);this.pos<this.input.length&&10!==e&&13!==e&&8232!==e&&8233!==e;)++b.pos,e=b.input.charCodeAt(b.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(c+a,this.pos),c,this.pos,d,this.curPosition())},ga.skipSpace=function(){var a=this;a:for(;this.pos<this.input.length;){var b=a.input.charCodeAt(a.pos);switch(b){case 32:case 160:++a.pos;break;case 13:10===a.input.charCodeAt(a.pos+1)&&++a.pos;case 10:case 8232:case 8233:++a.pos,a.options.locations&&(++a.curLine,a.lineStart=a.pos);break;case 47:switch(a.input.charCodeAt(a.pos+1)){case 42:a.skipBlockComment();break;case 47:a.skipLineComment(2);break;default:break a}break;default:if(!(b>8&&b<14||b>=5760&&K.test(String.fromCharCode(b))))break a;++a.pos}}},ga.finishToken=function(a,b){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var c=this.type;this.type=a,this.value=b,this.updateContext(c)},ga.readToken_dot=function(){var a=this.input.charCodeAt(this.pos+1);if(a>=48&&a<=57)return this.readNumber(!0);var b=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===a&&46===b?(this.pos+=3,this.finishToken(H.ellipsis)):(++this.pos,this.finishToken(H.dot))},ga.readToken_slash=function(){var a=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===a?this.finishOp(H.assign,2):this.finishOp(H.slash,1)},ga.readToken_mult_modulo_exp=function(a){var b=this.input.charCodeAt(this.pos+1),c=1,d=42===a?H.star:H.modulo;return this.options.ecmaVersion>=7&&42===b&&(++c,d=H.starstar,b=this.input.charCodeAt(this.pos+2)),61===b?this.finishOp(H.assign,c+1):this.finishOp(d,c)},ga.readToken_pipe_amp=function(a){var b=this.input.charCodeAt(this.pos+1);return b===a?this.finishOp(124===a?H.logicalOR:H.logicalAND,2):61===b?this.finishOp(H.assign,2):this.finishOp(124===a?H.bitwiseOR:H.bitwiseAND,1)},ga.readToken_caret=function(){var a=this.input.charCodeAt(this.pos+1);return 61===a?this.finishOp(H.assign,2):this.finishOp(H.bitwiseXOR,1)},ga.readToken_plus_min=function(a){var b=this.input.charCodeAt(this.pos+1);return b===a?45==b&&62==this.input.charCodeAt(this.pos+2)&&I.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(H.incDec,2):61===b?this.finishOp(H.assign,2):this.finishOp(H.plusMin,1)},ga.readToken_lt_gt=function(a){var b=this.input.charCodeAt(this.pos+1),c=1;return b===a?(c=62===a&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+c)?this.finishOp(H.assign,c+1):this.finishOp(H.bitShift,c)):33==b&&60==a&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3)?(this.inModule&&this.unexpected(),this.skipLineComment(4),this.skipSpace(),this.nextToken()):(61===b&&(c=2),this.finishOp(H.relational,c))},ga.readToken_eq_excl=function(a){var b=this.input.charCodeAt(this.pos+1);return 61===b?this.finishOp(H.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===a&&62===b&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(H.arrow)):this.finishOp(61===a?H.eq:H.prefix,1)},ga.getTokenFromCode=function(a){switch(a){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(H.parenL);case 41:return++this.pos,this.finishToken(H.parenR);case 59:return++this.pos,this.finishToken(H.semi);case 44:return++this.pos,this.finishToken(H.comma);case 91:return++this.pos,this.finishToken(H.bracketL);case 93:return++this.pos,this.finishToken(H.bracketR);case 123:return++this.pos,this.finishToken(H.braceL);case 125:return++this.pos,this.finishToken(H.braceR);case 58:return++this.pos,this.finishToken(H.colon);case 63:return++this.pos,this.finishToken(H.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(H.backQuote);case 48:var b=this.input.charCodeAt(this.pos+1);if(120===b||88===b)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===b||79===b)return this.readRadixNumber(8);if(98===b||66===b)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(a);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(a);case 124:case 38:return this.readToken_pipe_amp(a);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(a);case 60:case 62:return this.readToken_lt_gt(a);case 61:case 33:return this.readToken_eq_excl(a);case 126:return this.finishOp(H.prefix,1)}this.raise(this.pos,"Unexpected character '"+p(a)+"'")},ga.finishOp=function(a,b){var c=this.input.slice(this.pos,this.pos+b);return this.pos+=b,this.finishToken(a,c)};var ia=!!o("￿","u");ga.readRegexp=function(){for(var a,b,c=this,d=this.pos;;){c.pos>=c.input.length&&c.raise(d,"Unterminated regular expression");var e=c.input.charAt(c.pos);if(I.test(e)&&c.raise(d,"Unterminated regular expression"),a)a=!1;else{if("["===e)b=!0;else if("]"===e&&b)b=!1;else if("/"===e&&!b)break;a="\\"===e}++c.pos}var f=this.input.slice(d,this.pos);++this.pos;var g=this.readWord1(),h=f,i="";if(g){var j=/^[gim]*$/;this.options.ecmaVersion>=6&&(j=/^[gimuy]*$/),j.test(g)||this.raise(d,"Invalid regular expression flag"),g.indexOf("u")>=0&&(ia?i="u":(h=h.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(a,b,e){return b=Number("0x"+b),b>1114111&&c.raise(d+e+3,"Code point out of bounds"),"x"}),h=h.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"),i=i.replace("u","")))}var k=null;return ha||(o(h,i,d,this),k=o(f,g)),this.finishToken(H.regexp,{pattern:f,flags:g,value:k})},ga.readInt=function(a,b){for(var c=this,d=this.pos,e=0,f=0,g=null==b?1/0:b;f<g;++f){var h,i=c.input.charCodeAt(c.pos);if(h=i>=97?i-97+10:i>=65?i-65+10:i>=48&&i<=57?i-48:1/0,h>=a)break;++c.pos,e=e*a+h}return this.pos===d||null!=b&&this.pos-d!==b?null:e},ga.readRadixNumber=function(a){this.pos+=2;var b=this.readInt(a);return null==b&&this.raise(this.start+2,"Expected number in radix "+a),c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(H.num,b)},ga.readNumber=function(a){var b=this.pos,d=!1,e=48===this.input.charCodeAt(this.pos);a||null!==this.readInt(10)||this.raise(b,"Invalid number"),e&&this.pos==b+1&&(e=!1);var f=this.input.charCodeAt(this.pos);46!==f||e||(++this.pos,this.readInt(10),d=!0,f=this.input.charCodeAt(this.pos)),69!==f&&101!==f||e||(f=this.input.charCodeAt(++this.pos),43!==f&&45!==f||++this.pos,null===this.readInt(10)&&this.raise(b,"Invalid number"),d=!0),c(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var g,h=this.input.slice(b,this.pos);return d?g=parseFloat(h):e&&1!==h.length?/[89]/.test(h)||this.strict?this.raise(b,"Invalid number"):g=parseInt(h,8):g=parseInt(h,10),this.finishToken(H.num,g)},ga.readCodePoint=function(){var a,b=this.input.charCodeAt(this.pos);if(123===b){this.options.ecmaVersion<6&&this.unexpected();var c=++this.pos;a=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,a>1114111&&this.raise(c,"Code point out of bounds")}else a=this.readHexChar(4);return a},ga.readString=function(a){for(var b=this,c="",d=++this.pos;;){b.pos>=b.input.length&&b.raise(b.start,"Unterminated string constant");var e=b.input.charCodeAt(b.pos);if(e===a)break;92===e?(c+=b.input.slice(d,b.pos),c+=b.readEscapedChar(!1),d=b.pos):(g(e)&&b.raise(b.start,"Unterminated string constant"),++b.pos)}return c+=this.input.slice(d,this.pos++),this.finishToken(H.string,c)},ga.readTmplToken=function(){for(var a=this,b="",c=this.pos;;){a.pos>=a.input.length&&a.raise(a.start,"Unterminated template");var d=a.input.charCodeAt(a.pos);if(96===d||36===d&&123===a.input.charCodeAt(a.pos+1))return a.pos===a.start&&a.type===H.template?36===d?(a.pos+=2,
a.finishToken(H.dollarBraceL)):(++a.pos,a.finishToken(H.backQuote)):(b+=a.input.slice(c,a.pos),a.finishToken(H.template,b));if(92===d)b+=a.input.slice(c,a.pos),b+=a.readEscapedChar(!0),c=a.pos;else if(g(d)){switch(b+=a.input.slice(c,a.pos),++a.pos,d){case 13:10===a.input.charCodeAt(a.pos)&&++a.pos;case 10:b+="\n";break;default:b+=String.fromCharCode(d)}a.options.locations&&(++a.curLine,a.lineStart=a.pos),c=a.pos}else++a.pos}},ga.readEscapedChar=function(a){var b=this.input.charCodeAt(++this.pos);switch(++this.pos,b){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return p(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(b>=48&&b<=55){var c=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],d=parseInt(c,8);return d>255&&(c=c.slice(0,-1),d=parseInt(c,8)),"0"!==c&&(this.strict||a)&&this.raise(this.pos-2,"Octal literal in strict mode"),this.pos+=c.length-1,String.fromCharCode(d)}return String.fromCharCode(b)}},ga.readHexChar=function(a){var b=this.pos,c=this.readInt(16,a);return null===c&&this.raise(b,"Bad character escape sequence"),c},ga.readWord1=function(){var a=this;this.containsEsc=!1;for(var b="",e=!0,f=this.pos,g=this.options.ecmaVersion>=6;this.pos<this.input.length;){var h=a.fullCharCodeAtPos();if(d(h,g))a.pos+=h<=65535?1:2;else{if(92!==h)break;a.containsEsc=!0,b+=a.input.slice(f,a.pos);var i=a.pos;117!=a.input.charCodeAt(++a.pos)&&a.raise(a.pos,"Expecting Unicode escape sequence \\uXXXX"),++a.pos;var j=a.readCodePoint();(e?c:d)(j,g)||a.raise(i,"Invalid Unicode escape"),b+=p(j),f=a.pos}e=!1}return b+this.input.slice(f,this.pos)},ga.readWord=function(){var a=this.readWord1(),b=H.name;return this.keywords.test(a)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+a),b=G[a]),this.finishToken(b,a)};var ja="4.0.11";a.version=ja,a.parse=q,a.parseExpressionAt=r,a.tokenizer=s,a.addLooseExports=t,a.Parser=Q,a.plugins=P,a.defaultOptions=O,a.Position=M,a.SourceLocation=N,a.getLineInfo=j,a.Node=aa,a.TokenType=D,a.tokTypes=H,a.keywordTypes=G,a.TokContext=ca,a.tokContexts=da,a.isIdentifierChar=d,a.isIdentifierStart=c,a.Token=fa,a.isNewLine=g,a.lineBreak=I,a.lineBreakG=J,Object.defineProperty(a,"__esModule",{value:!0})})},{}],4:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?d(c):"function"==typeof define&&define.amd?define(["exports"],d):d((a.acorn=a.acorn||{},a.acorn.walk=a.acorn.walk||{}))}(this,function(a){"use strict";function b(b,c,d,e,f){d||(d=a.base),function a(b,e,f){var g=f||b.type,h=c[g];d[g](b,e,a),h&&h(b,e)}(b,e,f)}function c(b,c,d,e){d||(d=a.base);var f=[];!function a(b,e,g){var h=g||b.type,i=c[h],j=b!=f[f.length-1];j&&f.push(b),d[h](b,e,a),i&&i(b,e||f,f),j&&f.pop()}(b,e)}function d(b,c,d,e,f){var g=d?a.make(d,e):e;!function a(b,c,d){g[d||b.type](b,c,a)}(b,c,f)}function e(a){return"string"==typeof a?function(b){return b==a}:a?a:function(){return!0}}function f(b,c,d,f,g,h){f=e(f),g||(g=a.base);try{!function a(b,e,h){var i=h||b.type;if((null==c||b.start<=c)&&(null==d||b.end>=d)&&g[i](b,e,a),(null==c||b.start==c)&&(null==d||b.end==d)&&f(i,b))throw new m(b,e)}(b,h)}catch(a){if(a instanceof m)return a;throw a}}function g(b,c,d,f,g){d=e(d),f||(f=a.base);try{!function a(b,e,g){var h=g||b.type;if(!(b.start>c||b.end<c)&&(f[h](b,e,a),d(h,b)))throw new m(b,e)}(b,g)}catch(a){if(a instanceof m)return a;throw a}}function h(b,c,d,f,g){d=e(d),f||(f=a.base);try{!function a(b,e,g){if(!(b.end<c)){var h=g||b.type;if(b.start>=c&&d(h,b))throw new m(b,e);f[h](b,e,a)}}(b,g)}catch(a){if(a instanceof m)return a;throw a}}function i(b,c,d,f,g){d=e(d),f||(f=a.base);var h;return function a(b,e,g){if(!(b.start>c)){var i=g||b.type;b.end<=c&&(!h||h.node.end<b.end)&&d(i,b)&&(h=new m(b,e)),f[i](b,e,a)}}(b,g),h}function j(b,c){c||(c=a.base);var d=n(c);for(var e in b)d[e]=b[e];return d}function k(a,b,c){c(a,b)}function l(a,b,c){}var m=function(a,b){this.node=a,this.state=b},n=Object.create||function(a){function b(){}return b.prototype=a,new b},o={};o.Program=o.BlockStatement=function(a,b,c){for(var d=0;d<a.body.length;++d)c(a.body[d],b,"Statement")},o.Statement=k,o.EmptyStatement=l,o.ExpressionStatement=o.ParenthesizedExpression=function(a,b,c){return c(a.expression,b,"Expression")},o.IfStatement=function(a,b,c){c(a.test,b,"Expression"),c(a.consequent,b,"Statement"),a.alternate&&c(a.alternate,b,"Statement")},o.LabeledStatement=function(a,b,c){return c(a.body,b,"Statement")},o.BreakStatement=o.ContinueStatement=l,o.WithStatement=function(a,b,c){c(a.object,b,"Expression"),c(a.body,b,"Statement")},o.SwitchStatement=function(a,b,c){c(a.discriminant,b,"Expression");for(var d=0;d<a.cases.length;++d){var e=a.cases[d];e.test&&c(e.test,b,"Expression");for(var f=0;f<e.consequent.length;++f)c(e.consequent[f],b,"Statement")}},o.ReturnStatement=o.YieldExpression=o.AwaitExpression=function(a,b,c){a.argument&&c(a.argument,b,"Expression")},o.ThrowStatement=o.SpreadElement=function(a,b,c){return c(a.argument,b,"Expression")},o.TryStatement=function(a,b,c){c(a.block,b,"Statement"),a.handler&&c(a.handler,b),a.finalizer&&c(a.finalizer,b,"Statement")},o.CatchClause=function(a,b,c){c(a.param,b,"Pattern"),c(a.body,b,"ScopeBody")},o.WhileStatement=o.DoWhileStatement=function(a,b,c){c(a.test,b,"Expression"),c(a.body,b,"Statement")},o.ForStatement=function(a,b,c){a.init&&c(a.init,b,"ForInit"),a.test&&c(a.test,b,"Expression"),a.update&&c(a.update,b,"Expression"),c(a.body,b,"Statement")},o.ForInStatement=o.ForOfStatement=function(a,b,c){c(a.left,b,"ForInit"),c(a.right,b,"Expression"),c(a.body,b,"Statement")},o.ForInit=function(a,b,c){"VariableDeclaration"==a.type?c(a,b):c(a,b,"Expression")},o.DebuggerStatement=l,o.FunctionDeclaration=function(a,b,c){return c(a,b,"Function")},o.VariableDeclaration=function(a,b,c){for(var d=0;d<a.declarations.length;++d)c(a.declarations[d],b)},o.VariableDeclarator=function(a,b,c){c(a.id,b,"Pattern"),a.init&&c(a.init,b,"Expression")},o.Function=function(a,b,c){a.id&&c(a.id,b,"Pattern");for(var d=0;d<a.params.length;d++)c(a.params[d],b,"Pattern");c(a.body,b,a.expression?"ScopeExpression":"ScopeBody")},o.ScopeBody=function(a,b,c){return c(a,b,"Statement")},o.ScopeExpression=function(a,b,c){return c(a,b,"Expression")},o.Pattern=function(a,b,c){"Identifier"==a.type?c(a,b,"VariablePattern"):"MemberExpression"==a.type?c(a,b,"MemberPattern"):c(a,b)},o.VariablePattern=l,o.MemberPattern=k,o.RestElement=function(a,b,c){return c(a.argument,b,"Pattern")},o.ArrayPattern=function(a,b,c){for(var d=0;d<a.elements.length;++d){var e=a.elements[d];e&&c(e,b,"Pattern")}},o.ObjectPattern=function(a,b,c){for(var d=0;d<a.properties.length;++d)c(a.properties[d].value,b,"Pattern")},o.Expression=k,o.ThisExpression=o.Super=o.MetaProperty=l,o.ArrayExpression=function(a,b,c){for(var d=0;d<a.elements.length;++d){var e=a.elements[d];e&&c(e,b,"Expression")}},o.ObjectExpression=function(a,b,c){for(var d=0;d<a.properties.length;++d)c(a.properties[d],b)},o.FunctionExpression=o.ArrowFunctionExpression=o.FunctionDeclaration,o.SequenceExpression=o.TemplateLiteral=function(a,b,c){for(var d=0;d<a.expressions.length;++d)c(a.expressions[d],b,"Expression")},o.UnaryExpression=o.UpdateExpression=function(a,b,c){c(a.argument,b,"Expression")},o.BinaryExpression=o.LogicalExpression=function(a,b,c){c(a.left,b,"Expression"),c(a.right,b,"Expression")},o.AssignmentExpression=o.AssignmentPattern=function(a,b,c){c(a.left,b,"Pattern"),c(a.right,b,"Expression")},o.ConditionalExpression=function(a,b,c){c(a.test,b,"Expression"),c(a.consequent,b,"Expression"),c(a.alternate,b,"Expression")},o.NewExpression=o.CallExpression=function(a,b,c){if(c(a.callee,b,"Expression"),a.arguments)for(var d=0;d<a.arguments.length;++d)c(a.arguments[d],b,"Expression")},o.MemberExpression=function(a,b,c){c(a.object,b,"Expression"),a.computed&&c(a.property,b,"Expression")},o.ExportNamedDeclaration=o.ExportDefaultDeclaration=function(a,b,c){a.declaration&&c(a.declaration,b,"ExportNamedDeclaration"==a.type||a.declaration.id?"Statement":"Expression"),a.source&&c(a.source,b,"Expression")},o.ExportAllDeclaration=function(a,b,c){c(a.source,b,"Expression")},o.ImportDeclaration=function(a,b,c){for(var d=0;d<a.specifiers.length;d++)c(a.specifiers[d],b);c(a.source,b,"Expression")},o.ImportSpecifier=o.ImportDefaultSpecifier=o.ImportNamespaceSpecifier=o.Identifier=o.Literal=l,o.TaggedTemplateExpression=function(a,b,c){c(a.tag,b,"Expression"),c(a.quasi,b)},o.ClassDeclaration=o.ClassExpression=function(a,b,c){return c(a,b,"Class")},o.Class=function(a,b,c){a.id&&c(a.id,b,"Pattern"),a.superClass&&c(a.superClass,b,"Expression");for(var d=0;d<a.body.body.length;d++)c(a.body.body[d],b)},o.MethodDefinition=o.Property=function(a,b,c){a.computed&&c(a.key,b,"Expression"),c(a.value,b,"Expression")},a.simple=b,a.ancestor=c,a.recursive=d,a.findNodeAt=f,a.findNodeAround=g,a.findNodeAfter=h,a.findNodeBefore=i,a.make=j,a.base=o,Object.defineProperty(a,"__esModule",{value:!0})})},{}],5:[function(a,b,c){(function(c,d){"use strict";function e(b,e){function f(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function g(a,b){var c;return a&&"."===a.charAt(0)&&b&&(c=b.split("/"),c=c.slice(0,c.length-1),c=c.concat(a.split("/")),f(c),a=c.join("/")),a}function h(a){return function(b){return g(b,a)}}function i(a){function b(b){o[a]=b}return b.fromText=function(a,b){throw new Error("amdefine does not implement load.fromText")},b}function j(a,c,f){var g,h,i,j;if(a)h=o[a]={},i={id:a,uri:d,exports:h},g=l(e,h,i,a);else{if(p)throw new Error("amdefine with no module ID cannot be called more than once per file.");p=!0,h=b.exports,i=b,g=l(e,h,i,b.id)}c&&(c=c.map(function(a){return g(a)})),j="function"==typeof f?f.apply(i.exports,c):f,void 0!==j&&(i.exports=j,a&&(o[a]=i.exports))}function k(a,b,c){Array.isArray(a)?(c=b,b=a,a=void 0):"string"!=typeof a&&(c=a,a=b=void 0),b&&!Array.isArray(b)&&(c=b,b=void 0),b||(b=["require","exports","module"]),a?n[a]=[a,b,c]:j(a,b,c)}var l,m,n={},o={},p=!1,q=a("path");return l=function(a,b,d,e){function f(f,g){return"string"==typeof f?m(a,b,d,f,e):(f=f.map(function(c){return m(a,b,d,c,e)}),void(g&&c.nextTick(function(){g.apply(null,f)})))}return f.toUrl=function(a){return 0===a.indexOf(".")?g(a,q.dirname(d.filename)):a},f},e=e||function(){return b.require.apply(b,arguments)},m=function(a,b,c,d,e){var f,k,p=d.indexOf("!"),q=d;if(p===-1){if(d=g(d,e),"require"===d)return l(a,b,c,e);if("exports"===d)return b;if("module"===d)return c;if(o.hasOwnProperty(d))return o[d];if(n[d])return j.apply(null,n[d]),o[d];if(a)return a(q);throw new Error("No module with ID: "+d)}return f=d.substring(0,p),d=d.substring(p+1,d.length),k=m(a,b,c,f,e),d=k.normalize?k.normalize(d,h(e)):g(d,e),o[d]?o[d]:(k.load(d,l(a,b,c,e),i(d),{}),o[d])},k.require=function(a){return o[a]?o[a]:n[a]?(j.apply(null,n[a]),o[a]):void 0},k.amd={},k}b.exports=e}).call(this,a("_process"),"/node_modules/amdefine/amdefine.js")},{_process:256,path:200}],6:[function(a,b,c){function d(a,b){return n.isUndefined(b)?""+b:n.isNumber(b)&&!isFinite(b)?b.toString():n.isFunction(b)||n.isRegExp(b)?b.toString():b}function e(a,b){return n.isString(a)?a.length<b?a:a.slice(0,b):a}function f(a){return e(JSON.stringify(a.actual,d),128)+" "+a.operator+" "+e(JSON.stringify(a.expected,d),128)}function g(a,b,c,d,e){throw new q.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function h(a,b){a||g(a,!0,b,"==",q.ok)}function i(a,b){if(a===b)return!0;if(n.isBuffer(a)&&n.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return n.isDate(a)&&n.isDate(b)?a.getTime()===b.getTime():n.isRegExp(a)&&n.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:n.isObject(a)||n.isObject(b)?k(a,b):a==b}function j(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function k(a,b){if(n.isNullOrUndefined(a)||n.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(n.isPrimitive(a)||n.isPrimitive(b))return a===b;var c=j(a),d=j(b);if(c&&!d||!c&&d)return!1;if(c)return a=o.call(a),b=o.call(b),i(a,b);var e,f,g=r(a),h=r(b);if(g.length!=h.length)return!1;for(g.sort(),h.sort(),f=g.length-1;f>=0;f--)if(g[f]!=h[f])return!1;for(f=g.length-1;f>=0;f--)if(e=g[f],!i(a[e],b[e]))return!1;return!0}function l(a,b){return!(!a||!b)&&("[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b||b.call({},a)===!0)}function m(a,b,c,d){var e;n.isString(c)&&(d=c,c=null);try{b()}catch(a){e=a}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&g(e,c,"Missing expected exception"+d),!a&&l(e,c)&&g(e,c,"Got unwanted exception"+d),a&&e&&c&&!l(e,c)||!a&&e)throw e}var n=a("util/"),o=Array.prototype.slice,p=Object.prototype.hasOwnProperty,q=b.exports=h;q.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var b=a.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,e=b.name,h=d.indexOf("\n"+e);if(h>=0){var i=d.indexOf("\n",h+1);d=d.substring(i+1)}this.stack=d}}},n.inherits(q.AssertionError,Error),q.fail=g,q.ok=h,q.equal=function(a,b,c){a!=b&&g(a,b,c,"==",q.equal)},q.notEqual=function(a,b,c){a==b&&g(a,b,c,"!=",q.notEqual)},q.deepEqual=function(a,b,c){i(a,b)||g(a,b,c,"deepEqual",q.deepEqual)},q.notDeepEqual=function(a,b,c){i(a,b)&&g(a,b,c,"notDeepEqual",q.notDeepEqual)},q.strictEqual=function(a,b,c){a!==b&&g(a,b,c,"===",q.strictEqual)},q.notStrictEqual=function(a,b,c){a===b&&g(a,b,c,"!==",q.notStrictEqual)},q.throws=function(a,b,c){m.apply(this,[!0].concat(o.call(arguments)))},q.doesNotThrow=function(a,b){m.apply(this,[!1].concat(o.call(arguments)))},q.ifError=function(a){if(a)throw a};var r=Object.keys||function(a){var b=[];for(var c in a)p.call(a,c)&&b.push(c);return b}},{"util/":403}],7:[function(a,b,c){function d(a,b,c){for(var e=g(a),h=0;h<e.length;h++){var i=e[h];if("parent"!==i){var j=a[i];if(f(j))for(var k=0;k<j.length;k++){var l=j[k];l&&"string"==typeof l.type&&(l.parent=a,d(l,a,c))}else j&&"string"==typeof j.type&&(j.parent=a,d(j,a,c))}}c(a)}var e=a("acorn").parse;b.exports=function(a,b){b||(b={});var c=a;if("string"==typeof a)try{c=e(a,{ecmaVersion:b.ecmaVersion||8,allowReturnOutsideFunction:!0})}catch(b){c=e("("+a+")")}return function(a){d(c,void 0,a)}};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b}},{acorn:3}],8:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function e(a){return 3*a.length/4-d(a)}function f(a){var b,c,e,f,g,h,i=a.length;g=d(a),h=new l(3*i/4-g),e=g>0?i-4:i;var j=0;for(b=0,c=0;b<e;b+=4,c+=3)f=k[a.charCodeAt(b)]<<18|k[a.charCodeAt(b+1)]<<12|k[a.charCodeAt(b+2)]<<6|k[a.charCodeAt(b+3)],h[j++]=f>>16&255,h[j++]=f>>8&255,h[j++]=255&f;return 2===g?(f=k[a.charCodeAt(b)]<<2|k[a.charCodeAt(b+1)]>>4,h[j++]=255&f):1===g&&(f=k[a.charCodeAt(b)]<<10|k[a.charCodeAt(b+1)]<<4|k[a.charCodeAt(b+2)]>>2,h[j++]=f>>8&255,h[j++]=255&f),h}function g(a){return j[a>>18&63]+j[a>>12&63]+j[a>>6&63]+j[63&a]}function h(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(g(d));return e.join("")}function i(a){for(var b,c=a.length,d=c%3,e="",f=[],g=16383,i=0,k=c-d;i<k;i+=g)f.push(h(a,i,i+g>k?k:i+g));return 1===d?(b=a[c-1],e+=j[b>>2],e+=j[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=j[b>>10],e+=j[b>>4&63],e+=j[b<<2&63],e+="="),f.push(e),f.join("")}c.byteLength=e,c.toByteArray=f,c.fromByteArray=i;for(var j=[],k=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=m.length;n<o;++n)j[n]=m[n],k[m.charCodeAt(n)]=n;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],9:[function(a,b,c){(function(c,d,e){function f(a){if(!a)return 0;var b=a.match(/\n/g);return b?b.length:0}var g=a("JSONStream"),h=a("defined"),i=a("through2"),j=a("umd"),k=a("fs"),l=a("path"),m=a("combine-source-map"),n=l.join(e,"_prelude.js"),o=k.readFileSync(n,"utf8");b.exports=function(a){function b(b,c,e){if(r&&a.standalone){var g=j.prelude(a.standalone).trim();p.push(new d(g+"return "))}else if(r&&p.hasExports){var g=a.externalRequireName||"require";p.push(new d(g+"="))}r&&p.push(new d(u+"({")),b.sourceFile&&!b.nomap&&(q||(q=m.create(),q.addFile({sourceFile:v,source:u},{line:0})),q.addFile({sourceFile:b.sourceFile,source:b.source},{line:w}));var h=[r?"":",",JSON.stringify(b.id),":[","function(require,module,exports){\n",m.removeComments(b.source),"\n},","{"+Object.keys(b.deps||{}).sort().map(function(a){return JSON.stringify(a)+":"+JSON.stringify(b.deps[a])}).join(",")+"}","]"].join("");p.push(new d(h)),w+=f(h),r=!1,b.entry&&void 0!==b.order?s[b.order]=b.id:b.entry&&s.push(b.id),e()}function e(){if(r&&p.push(new d(u+"({")),s=s.filter(function(a){return void 0!==a}),p.push(new d("},{},"+JSON.stringify(s)+")")),a.standalone&&!r&&p.push(new d("("+JSON.stringify(p.standaloneModule)+")"+j.postlude(a.standalone))),q){var b=q.comment();a.sourceMapPrefix&&(b=b.replace(/^\/\/#/,function(){return a.sourceMapPrefix})),p.push(new d("\n"+b+"\n"))}q||a.standalone||p.push(new d(";\n")),p.push(null)}a||(a={});var k=a.raw?i.obj():g.parse([!0]),p=i.obj(function(a,b,c){k.write(a),c()},function(){k.end()});k.pipe(i.obj(b,e)),p.standaloneModule=a.standaloneModule,p.hasExports=a.hasExports;var q,r=!0,s=[],t=h(a.basedir,c.cwd()),u=a.prelude||o,v=a.preludePath||l.relative(t,n).replace(/\\/g,"/"),w=1+f(u);return p}}).call(this,a("_process"),a("buffer").Buffer,"/node_modules/browser-pack")},{JSONStream:1,_process:256,buffer:34,"combine-source-map":121,defined:128,fs:29,path:200,through2:320,umd:399}],10:[function(a,b,c){},{}],11:[function(a,b,c){(function(c,d){function e(a,b){for(var d="win32"===c.platform?/[\/\\]/:/\/+/,e=a.split(d),f=[],g=e.length-1;g>=0;g--)if("node_modules"!==e[g]){var h=n.join.apply(n,e.slice(0,g+1).concat(["node_modules"]));e[0].match(/([A-Za-z]:)/)||(h="/"+h),f.push(h)}return f}function f(a,b,c,e){try{var f=JSON.parse(a)}catch(b){throw b.message=a+" : "+b.message,b}var g=l(f,e);if(g){if("string"==typeof g){var h=n.resolve(b,f.main||"index.js");return void(c[h]=n.resolve(b,g))}Object.keys(g).forEach(function(a){var e;g[a]===!1?e=d+"/empty.js":(e=g[a],"."===e[0]&&(e=n.resolve(b,e))),"/"!==a[0]&&"."!==a[0]||(a=n.resolve(b,a)),c[a]=e}),[".js",".json"].forEach(function(a){Object.keys(c).forEach(function(b){c[b+a]||(c[b+a]=c[b])})})}}function g(a,b,c){var d=Object.create(null);!function e(){var g=a.shift();if(!g)return c(null,d);var h=n.join(g,"package.json");m.readFile(h,"utf8",function(a,h){if(a)return"ENOENT"===a.code?e():c(a);try{return f(h,g,d,b),c(null,d)}catch(a){return c(a)}})}()}function h(a,b){for(var c,d=Object.create(null);c=a.shift();){var e=n.join(c,"package.json");try{var g=m.readFileSync(e,"utf8");return f(g,c,d,b),d}catch(a){if("ENOENT"===a.code)continue;throw a}}return d}function i(a,b){var c=a.packageFilter,d=k(a.browser);a.basedir=b,a.packageFilter=function(a,b){c&&(a=c(a,b));var e=l(a,d);if(!e)return a;if(a[d]=e,"string"==typeof e)return a.main=e,a;var f=e[a.main||"./index.js"]||e["./"+a.main||"./index.js"];return a.main=f||a.main,a};var e=a.pathFilter;return a.pathFilter=function(a,b,c){"."!=c[0]&&(c="./"+c);var f;if(e&&(f=e.apply(this,arguments)),f)return f;var g=a[d];return g?(f=g[c],f||""!==n.extname(c)||(f=g[c+".js"],f||(f=g[c+".json"])),f):void 0},a}function j(a,b,c){b=b||{},b.filename=b.filename||"";var d=n.dirname(b.filename);b.basedir&&(d=b.basedir);var f=e(d);b.paths&&f.push.apply(f,b.paths),f=f.map(function(a){return n.dirname(a)}),g(f,b.browser,function(e,f){if(e)return c(e);var g=n.resolve(b.basedir||n.dirname(b.filename),a);if(f[a]||f[g]){var h=f[a]?a:g;if("/"===f[h][0])return o(f[h],i(b,d),function(a,b,d){c(null,b,d)});a=f[h]}var j=b.modules||Object.create(null),k=j[a];if(k)return c(null,k);o(a,i(b,d),function(a,b,d){if(a)return c(a);var e=f?f[b]||b:b;c(null,e,d)})})}function k(a){return a||"browser"}function l(a,b){b=k(b);var c=a[b]||a.browser;return"string"!=typeof a.browserify||c||(c=a.browserify),c}var m=a("fs"),n=a("path"),o=a("resolve");j.sync=function(a,b){b=b||{},b.filename=b.filename||"";var c=n.dirname(b.filename);b.basedir&&(c=b.basedir);var d=e(c);b.paths&&d.push.apply(d,b.paths),d=d.map(function(a){return n.dirname(a)});var f=h(d,b.browser);if(f[a]){if("/"===f[a][0])return f[a];a=f[a]}var g=b.modules||Object.create(null),j=g[a];if(j)return j;var k=o.sync(a,i(b,c));return f?f[k]||k:k},b.exports=j}).call(this,a("_process"),"/node_modules/browser-resolve")},{_process:256,fs:29,path:200,resolve:12}],12:[function(a,b,c){var d=a("./lib/core");c=b.exports=a("./lib/async"),c.core=d,c.isCore=function(a){return d[a]},c.sync=a("./lib/sync")},{"./lib/async":13,"./lib/core":16,"./lib/sync":18}],13:[function(a,b,c){(function(c){var d=a("./core"),e=a("fs"),f=a("path"),g=a("./caller.js"),h=a("./node-modules-paths.js");"win32"===c.platform?/[\/\\]/:/\//;b.exports=function(a,b,i){function j(b,c,d){b?i(b):c?i(null,c,d):m(s,function(b,c,d){b?i(b):c?i(null,c,d):i(new Error("Cannot find module '"+a+"' from '"+r+"'"))})}function k(a,c,d){function e(a,c,g){function h(h,k,l){if(g=k,h)return d(h);if(l&&g&&b.pathFilter){var m=f.relative(l,j),n=m.slice(0,m.length-a[0].length),p=b.pathFilter(g,c,n);if(p)return e([""].concat(q.slice()),f.resolve(l,p),g)}o(j,i)}function i(b,f){b?d(b):f?d(null,j,g):e(a.slice(1),c,g)}if(0===a.length)return d(null,void 0,g);var j=c+a[0];g?h(null,g):l(f.dirname(j),h)}"function"==typeof c&&(d=c,c=void 0);var g=[""].concat(q);e(g,a,c)}function l(a,d){if(""===a||"/"===a)return d(null);if("win32"===c.platform&&/^\w:[\\\/]*$/.test(a))return d(null);if(/[\\\/]node_modules[\\\/]*$/.test(a))return d(null);var e=f.join(a,"package.json");o(e,function(c,g){return g?void p(e,function(c,f){c&&d(c);try{var g=JSON.parse(f)}catch(a){}g&&b.packageFilter&&(g=b.packageFilter(g,e)),d(null,g,a)}):l(f.dirname(a),d)})}function m(a,c,d){"function"==typeof c&&(d=c,c=b.package);var e=f.join(a,"/package.json");o(e,function(g,h){return g?d(g):h?void p(e,function(c,g){if(c)return d(c);try{var h=JSON.parse(g)}catch(a){}return b.packageFilter&&(h=b.packageFilter(h,e)),h.main?("."!==h.main&&"./"!==h.main||(h.main="index"),void k(f.resolve(a,h.main),h,function(b,c,e){if(b)return d(b);if(c)return d(null,c,e);if(!e)return k(f.join(a,"/index"),e,d);var g=f.resolve(a,e.main);m(g,e,function(b,c,e){return b?d(b):c?d(null,c,e):void k(f.join(a,"/index"),e,d)})})):void k(f.join(a,"/index"),h,d)}):k(f.join(a,"/index"),c,d)})}function n(a,c,d){!function b(c){function e(b,c,e){return b?d(b):c?d(null,c,e):void m(f.join(h,"/",a),void 0,g)}function g(a,e,f){return a?d(a):e?d(null,e,f):void b(c.slice(1))}if(0===c.length)return d(null,void 0);var h=c[0],i=f.join(h,"/",a);k(i,void 0,e)}(h(c,b))}if("function"==typeof b&&(i=b,b={}),b||(b={}),"string"!=typeof a)return c.nextTick(function(){i(new Error("path must be a string"))});var o=b.isFile||function(a,b){e.stat(a,function(a,c){a&&"ENOENT"===a.code?b(null,!1):a?b(a):b(null,c.isFile()||c.isFIFO())})},p=b.readFile||e.readFile,q=b.extensions||[".js"],r=b.basedir||f.dirname(g());if(b.paths=b.paths||[],/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[\\\/])/.test(a)){var s=f.resolve(r,a);".."===a&&(s+="/"),/\/$/.test(a)&&s===r?m(s,b.package,j):k(s,b.package,j)}else n(a,r,function(b,c,e){if(b)i(b);else if(c)i(null,c,e);else{if(d[a])return i(null,a);i(new Error("Cannot find module '"+a+"' from '"+r+"'"))}})}}).call(this,a("_process"))},{"./caller.js":14,"./core":16,"./node-modules-paths.js":17,_process:256,fs:29,path:200}],14:[function(a,b,c){b.exports=function(){var a=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){return b};var b=(new Error).stack;return Error.prepareStackTrace=a,b[2].getFileName()}},{}],15:[function(a,b,c){b.exports=["assert","buffer_ieee754","buffer","child_process","cluster","console","constants","crypto","_debugger","dgram","dns","domain","events","freelist","fs","http","https","_linklist","module","net","os","path","punycode","querystring","readline","repl","stream","string_decoder","sys","timers","tls","tty","url","util","vm","zlib"]},{}],16:[function(a,b,c){b.exports=a("./core.json").reduce(function(a,b){return a[b]=!0,a},{})},{"./core.json":15}],17:[function(a,b,c){(function(c){var d=a("path");b.exports=function(a,b){var e=b.moduleDirectory?[].concat(b.moduleDirectory):["node_modules"];a=d.resolve(a);var f="/";/^([A-Za-z]:)/.test(a)?f="":/^\\\\/.test(a)&&(f="\\\\");for(var g="win32"===c.platform?/[\/\\]/:/\/+/,h=a.split(g),i=[],j=h.length-1;j>=0;j--)e.indexOf(h[j])===-1&&(i=i.concat(e.map(function(a){return f+d.join(d.join.apply(d,h.slice(0,j+1)),a)})));return"win32"===c.platform&&(i[i.length-1]=i[i.length-1].replace(":",":\\")),i.concat(b.paths)}}).call(this,a("_process"))},{_process:256,path:200}],18:[function(a,b,c){var d=a("./core"),e=a("fs"),f=a("path"),g=a("./caller.js"),h=a("./node-modules-paths.js");b.exports=function(a,b){function c(a){if(k(a))return a;for(var b=0;b<m.length;b++){var c=a+m[b];if(k(c))return c}}function i(a){var d=f.join(a,"/package.json");if(k(d)){var e=l(d,"utf8");try{var g=JSON.parse(e);if(b.packageFilter&&(g=b.packageFilter(g,a)),g.main){var h=c(f.resolve(a,g.main));if(h)return h;var j=i(f.resolve(a,g.main));if(j)return j}}catch(a){}}return c(f.join(a,"/index"))}function j(a,d){for(var e=h(d,b),g=0;g<e.length;g++){var j=e[g],k=c(f.join(j,"/",a));if(k)return k;var l=i(f.join(j,"/",a));if(l)return l}}b||(b={});var k=b.isFile||function(a){try{var b=e.statSync(a)}catch(a){if(a&&"ENOENT"===a.code)return!1}return b.isFile()||b.isFIFO()},l=b.readFileSync||e.readFileSync,m=b.extensions||[".js"],n=b.basedir||f.dirname(g());if(b.paths=b.paths||[],/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[\\\/])/.test(a)){var o=f.resolve(n,a);".."===a&&(o+="/");var p=c(o)||i(o);if(p)return p}else{var q=j(a,n);if(q)return q}if(d[a])return a;throw new Error("Cannot find module '"+a+"' from '"+n+"'")}},{"./caller.js":14,"./core":16,"./node-modules-paths.js":17,fs:29,path:200}],19:[function(a,b,c){(function(d){"use strict";function e(b,c){return a("util").inspect(b,!1,c||5,!0)}var f=d.env.BROWSERIFYSHIM_DIAGNOSTICS;c=b.exports=function(){f&&console.error.apply(console,arguments)},c.inspect=function(a,b){f&&console.error(e(a,b))}}).call(this,a("_process"))},{_process:256,util:403}],20:[function(a,b,c){"use strict";function d(a){if(a)return a=Array.isArray(a)?a:[a],a.reduce(function(a,b){var c=b.split(":");if(!c||c.length>2||c.length<1||!c[0])throw new Error('Invalid depends specification: "'+b+'". Needs to have format: "nameORpath:export"');return c=c.map(function(a){return"string"==typeof a?a.trim():a}),a[c[0]]=c[1]||null,a},{})}b.exports=function(a){return Object.keys(a).reduce(function(b,c){var e=a[c];"string"==typeof e&&(e={exports:e});var f=e.exports&&e.exports.length?e.exports.trim():null;return b[c.trim()]={exports:f,depends:d(e.depends)},b},{})}},{}],21:[function(a,b,c){"use strict";function d(a,b){return o.inspect(a,!1,b||5,!0)}function e(a){return/^[.]{0,2}[\/\\]/.test(a)}function f(a,b,c){var e,f='When evaluating shim "'+a+'": '+d(b)+"\ninside "+c+"\n";if(!b.hasOwnProperty("exports"))throw e="browserify-shim needs at least a path and exports to do its job, you are missing the exports. \nIf this module has no exports, specify exports as null.",new Error(f+e)}function g(a,b,c,d){s[a]={pack:b,shims:c,exposeGlobals:d},Object.keys(c).forEach(function(b){var d=c[b];f(b,d,a),t[b]=d})}function h(a,b,c,d,f){var g;if(c)return Object.keys(c).reduce(function(h,i){return b[i]?(h[i]=c[i],f.push(r('Found depends "%s" exposed in browser field',i))):e(i)?(g=n.resolve(a,i),h[g]=c[i],f.push(r('Depends "%s" was resolved to be at [%s]',i,g))):(h[i]=c[i],d[i]?f.push(r('Found depends "%s" as an installed dependency of the package',i)):f.push(r('WARNING, depends "%s" is not a path, nor is it exposed in the browser field, nor was it found in package dependencies.',i))),h},{})}function i(a,b,c,d,e,f){return Object.keys(d).reduce(function(g,i){var j,k=d[i],l=c[i];l?(j=n.resolve(a,l),f.push(r('Found "%s" in browser field referencing "%s" and resolved it to "%s"',i,l,j))):b?(j=n.resolve(b,i),f.push(r('Resolved "%s" found in shim file to "%s"',i,j))):(j=n.resolve(a,i),f.push(r('Resolved "%s" found in package.json to "%s"',i,j)));var m=h(b||a,c,k.depends,e,f);return g[j]={exports:k.exports,depends:m},g},{})}function j(a){return Object.keys(a).reduce(function(b,c){var e=a[c],f=e.split(":");if(f.length<2||!f[1].length)throw new Error('Expose Globals need to have the format "global:expression.\n"'+d({key:c,value:e})+"does not.");return f.shift(),b[c]=f.join(":"),b},{})}function k(a){var b={},c={};return Object.keys(a).forEach(function(d){var e=a[d],f=e&&e.exports;f&&/^global\:/.test(f)?c[d]=f:b[d]=e}),{shims:b,exposeGlobals:j(c)}}function l(b,c,d,e){var f=n.join(b,d),g=n.dirname(f),h=a(f),j=k(h),l=i(b,g,c.browser||{},j.shims,c.dependencies||{},e);return{shims:l,exposeGlobals:j.exposeGlobals}}function m(a,b,c,d){var e=p(c),f=k(e),g=i(a,null,b.browser||{},f.shims,b.dependencies||{},d);return{shims:g,exposeGlobals:f.exposeGlobals}}var n=a("path"),o=(a("fs"),a("util")),p=a("./parse-inline-shims"),q=a("mothership"),r=a("util").format,s={},t={};b.exports=function(b,c,d){q(b,function(a){return!!a["browserify-shim"]},function(e,f){if(e)return d(e);if(!f||!f.pack)return d(new Error("Unable to find a browserify-shim config section in the package.json for "+b));var h=f.pack,i=f.path,j=n.dirname(i),k=s[j];if(k)return d(null,{package_json:i,packageDir:j,resolvedPreviously:!0,shim:t[b],exposeGlobals:k.exposeGlobals,browser:h.browser,"browserify-shim":h["browserify-shim"],dependencies:h.dependencies});try{h=a(i);var o=h["browserify-shim"];if(!o)return d(null,{package_json:i,shim:void 0});var p="string"==typeof o?l(j,h,o,c):m(j,h,o,c);c.push({resolved:p.shims}),g(j,h,p.shims,p.exposeGlobals),d(null,{package_json:i,packageDir:j,shim:t[b],exposeGlobals:p.exposeGlobals,browser:h.browser,"browserify-shim":h["browserify-shim"],dependencies:h.dependencies})}catch(a){return console.trace(),d(a)}})}},{"./parse-inline-shims":20,fs:29,mothership:192,path:200,util:403}],22:[function(a,b,c){arguments[4][12][0].apply(c,arguments)},{"./lib/async":23,"./lib/core":26,"./lib/sync":28,dup:12}],23:[function(a,b,c){var d=a("./core"),e=a("fs"),f=a("path"),g=a("./caller.js"),h=a("./node-modules-paths.js");b.exports=function(a,b,c){function i(a,c,d){"function"==typeof c&&(d=c,c=b.package),function b(e){if(0===e.length)return d(null,void 0,c);var f=a+e[0];l(f,function(a,g){a?d(a):g?d(null,f,c):b(e.slice(1))})}([""].concat(n))}function j(a,c,d){"function"==typeof c&&(d=c,c=b.package);var e=f.join(a,"/package.json");l(e,function(g,h){return g?d(g):h?void m(e,function(c,e){if(c)return d(c);try{var g=JSON.parse(e)}catch(a){}return b.packageFilter&&(g=b.packageFilter(g,a)),g.main?("."!==g.main&&"./"!==g.main||(g.main="index"),void i(f.resolve(a,g.main),g,function(b,c,e){if(b)return d(b);if(c)return d(null,c,e);if(!e)return i(f.join(a,"/index"),e,d);var g=f.resolve(a,e.main);j(g,e,function(b,c,e){return b?d(b):c?d(null,c,e):void i(f.join(a,"/index"),e,d)})})):void i(f.join(a,"/index"),g,d)}):i(f.join(a,"/index"),c,d)})}function k(a,c,d){!function b(c){if(0===c.length)return d(null,void 0);var e=c[0];i(f.join(e,"/",a),void 0,function(g,h,i){return g?d(g):h?d(null,h,i):void j(f.join(e,"/",a),void 0,function(a,e,f){return a?d(a):e?d(null,e,f):void b(c.slice(1))})})}(h(c,b))}"function"==typeof b&&(c=b,
b={}),b||(b={});var l=b.isFile||function(a,b){e.stat(a,function(a,c){a&&"ENOENT"===a.code?b(null,!1):a?b(a):b(null,c.isFile()||c.isFIFO())})},m=b.readFile||e.readFile,n=b.extensions||[".js"],o=b.basedir||f.dirname(g());b.moduleDirectory||"node_modules";b.paths=b.paths||[],a.match(/^(?:\.\.?\/|\/|([A-Za-z]:)?\\)/)?i(f.resolve(o,a),function(b,d,e){b?c(b):d?c(null,d,e):j(f.resolve(o,a),function(b,d,e){b?c(b):d?c(null,d,e):c(new Error("Cannot find module '"+a+"' from '"+o+"'"))})}):k(a,o,function(b,e,f){if(b)c(b);else if(e)c(null,e,f);else{if(d[a])return c(null,a);c(new Error("Cannot find module '"+a+"' from '"+o+"'"))}})}},{"./caller.js":24,"./core":26,"./node-modules-paths.js":27,fs:29,path:200}],24:[function(a,b,c){arguments[4][14][0].apply(c,arguments)},{dup:14}],25:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15}],26:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./core.json":25,dup:16}],27:[function(a,b,c){(function(c){var d=a("path");b.exports=function(a,b){var e=b.moduleDirectory||"node_modules",f="/";/^([A-Za-z]:)/.test(a)?f="":/^\\\\/.test(a)&&(f="\\\\");for(var g="win32"===c.platform?/[\/\\]/:/\/+/,h=a.split(g),i=[],j=h.length-1;j>=0;j--)if(h[j]!==e){var k=d.join(d.join.apply(d,h.slice(0,j+1)),e);i.push(f+k)}return"win32"===c.platform&&(i[i.length-1]=i[i.length-1].replace(":",":\\")),i.concat(b.paths)}}).call(this,a("_process"))},{_process:256,path:200}],28:[function(a,b,c){var d=a("./core"),e=a("fs"),f=a("path"),g=a("./caller.js"),h=a("./node-modules-paths.js");b.exports=function(a,b){function c(a){if(k(a))return a;for(var b=0;b<m.length;b++){var c=a+m[b];if(k(c))return c}}function i(a){var d=f.join(a,"/package.json");if(k(d)){var e=l(d,"utf8");try{var g=JSON.parse(e);if(b.packageFilter&&(g=b.packageFilter(g,a)),g.main){var h=c(f.resolve(a,g.main));if(h)return h;var j=i(f.resolve(a,g.main));if(j)return j}}catch(a){}}return c(f.join(a,"/index"))}function j(a,d){for(var e=h(d,b),g=0;g<e.length;g++){var j=e[g],k=c(f.join(j,"/",a));if(k)return k;var l=i(f.join(j,"/",a));if(l)return l}}b||(b={});var k=b.isFile||function(a){try{var b=e.statSync(a)}catch(a){if(a&&"ENOENT"===a.code)return!1}return b.isFile()||b.isFIFO()},l=b.readFileSync||e.readFileSync,m=b.extensions||[".js"],n=b.basedir||f.dirname(g());if(b.paths=b.paths||[],a.match(/^(?:\.\.?\/|\/|([A-Za-z]:)?\\)/)){var o=c(f.resolve(n,a))||i(f.resolve(n,a));if(o)return o}else{var p=j(a,n);if(p)return p}if(d[a])return a;throw new Error("Cannot find module '"+a+"' from '"+n+"'")}},{"./caller.js":24,"./core":26,"./node-modules-paths.js":27,fs:29,path:200}],29:[function(a,b,c){arguments[4][10][0].apply(c,arguments)},{dup:10}],30:[function(a,b,c){c.assert=a.resolve("assert/"),c.buffer=a.resolve("buffer/"),c.child_process=a.resolve("./_empty.js"),c.cluster=a.resolve("./_empty.js"),c.console=a.resolve("console-browserify"),c.constants=a.resolve("constants-browserify"),c.crypto=a.resolve("crypto-browserify"),c.dgram=a.resolve("./_empty.js"),c.dns=a.resolve("./_empty.js"),c.domain=a.resolve("domain-browser"),c.events=a.resolve("events/"),c.fs=a.resolve("./_empty.js"),c.http=a.resolve("stream-http"),c.https=a.resolve("https-browserify"),c.module=a.resolve("./_empty.js"),c.net=a.resolve("./_empty.js"),c.os=a.resolve("os-browserify/browser.js"),c.path=a.resolve("path-browserify"),c.punycode=a.resolve("punycode/"),c.querystring=a.resolve("querystring-es3/"),c.readline=a.resolve("./_empty.js"),c.repl=a.resolve("./_empty.js"),c.stream=a.resolve("stream-browserify"),c._stream_duplex=a.resolve("readable-stream/duplex.js"),c._stream_passthrough=a.resolve("readable-stream/passthrough.js"),c._stream_readable=a.resolve("readable-stream/readable.js"),c._stream_transform=a.resolve("readable-stream/transform.js"),c._stream_writable=a.resolve("readable-stream/writable.js"),c.string_decoder=a.resolve("string_decoder/"),c.sys=a.resolve("util/util.js"),c.timers=a.resolve("timers-browserify"),c.tls=a.resolve("./_empty.js"),c.tty=a.resolve("tty-browserify"),c.url=a.resolve("url/"),c.util=a.resolve("util/util.js"),c.vm=a.resolve("vm-browserify"),c.zlib=a.resolve("browserify-zlib"),c._process=a.resolve("process/browser")},{}],31:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);"function"==typeof a&&(b=a,a={}),a||(a={});var c=a.encoding,e=!1;c?(c=String(c).toLowerCase(),"u8"!==c&&"uint8"!==c||(c="uint8array")):e=!0,k.call(this,{objectMode:!0}),this.encoding=c,this.shouldInferEncoding=e,b&&this.on("finish",function(){b(this.getBody())}),this.body=[]}function e(a){return/Array\]$/.test(Object.prototype.toString.call(a))}function f(a){return"string"==typeof a||e(a)||a&&"function"==typeof a.subarray}function g(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];"string"==typeof e?b.push(e):c.isBuffer(e)?b.push(e):f(e)?b.push(new c(e)):b.push(new c(String(e)))}return c.isBuffer(a[0])?(b=c.concat(b),b=b.toString("utf8")):b=b.join(""),b}function h(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];c.isBuffer(e)?b.push(e):f(e)?b.push(new c(e)):b.push(new c(String(e)))}return c.concat(b)}function i(a){for(var b=[],c=0;c<a.length;c++)b.push.apply(b,a[c]);return b}function j(a){for(var b=0,d=0;d<a.length;d++)"string"==typeof a[d]&&(a[d]=new c(a[d])),b+=a[d].length;for(var e=new m(b),d=0,f=0;d<a.length;d++)for(var g=a[d],h=0;h<g.length;h++)e[f++]=g[h];return e}var k=a("readable-stream").Writable,l=a("inherits");if("undefined"==typeof Uint8Array)var m=a("typedarray").Uint8Array;else var m=Uint8Array;b.exports=d,l(d,k),d.prototype._write=function(a,b,c){this.body.push(a),c()},d.prototype.inferEncoding=function(a){var b=void 0===a?this.body[0]:a;return c.isBuffer(b)?"buffer":"undefined"!=typeof Uint8Array&&b instanceof Uint8Array?"uint8array":Array.isArray(b)?"array":"string"==typeof b?"string":"[object Object]"===Object.prototype.toString.call(b)?"object":"buffer"},d.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?i(this.body):"string"===this.encoding?g(this.body):"buffer"===this.encoding?h(this.body):"uint8array"===this.encoding?j(this.body):this.body):[]};Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}}).call(this,a("buffer").Buffer)},{buffer:34,inherits:173,"readable-stream":265,typedarray:398}],32:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],33:[function(a,b,c){(function(b){"use strict";var d=a("buffer"),e=d.Buffer,f=d.SlowBuffer,g=d.kMaxLength||2147483647;c.alloc=function(a,b,c){if("function"==typeof e.alloc)return e.alloc(a,b,c);if("number"==typeof c)throw new TypeError("encoding must not be number");if("number"!=typeof a)throw new TypeError("size must be a number");if(a>g)throw new RangeError("size is too large");var d=c,f=b;void 0===f&&(d=void 0,f=0);var h=new e(a);if("string"==typeof f)for(var i=new e(f,d),j=i.length,k=-1;++k<a;)h[k]=i[k%j];else h.fill(f);return h},c.allocUnsafe=function(a){if("function"==typeof e.allocUnsafe)return e.allocUnsafe(a);if("number"!=typeof a)throw new TypeError("size must be a number");if(a>g)throw new RangeError("size is too large");return new e(a)},c.from=function(a,c,d){if("function"==typeof e.from&&(!b.Uint8Array||Uint8Array.from!==e.from))return e.from(a,c,d);if("number"==typeof a)throw new TypeError('"value" argument must not be a number');if("string"==typeof a)return new e(a,c);if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer){var f=c;if(1===arguments.length)return new e(a);"undefined"==typeof f&&(f=0);var g=d;if("undefined"==typeof g&&(g=a.byteLength-f),f>=a.byteLength)throw new RangeError("'offset' is out of bounds");if(g>a.byteLength-f)throw new RangeError("'length' is out of bounds");return new e(a.slice(f,f+g))}if(e.isBuffer(a)){var h=new e(a.length);return a.copy(h,0,0,a.length),h}if(a){if(Array.isArray(a)||"undefined"!=typeof ArrayBuffer&&a.buffer instanceof ArrayBuffer||"length"in a)return new e(a);if("Buffer"===a.type&&Array.isArray(a.data))return new e(a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},c.allocUnsafeSlow=function(a){if("function"==typeof e.allocUnsafeSlow)return e.allocUnsafeSlow(a);if("number"!=typeof a)throw new TypeError("size must be a number");if(a>=g)throw new RangeError("size is too large");return new f(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:34}],34:[function(a,b,c){(function(b){"use strict";function d(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(a){return!1}}function e(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a,b){if(e()<b)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=g.prototype):(null===a&&(a=new g(b)),a.length=b),a}function g(a,b,c){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(a,b,c);if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return k(this,a)}return h(this,a,b,c)}function h(a,b,c,d){if("number"==typeof b)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer?n(a,b,c,d):"string"==typeof b?l(a,b,c):o(a,b)}function i(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function j(a,b,c,d){return i(b),b<=0?f(a,b):void 0!==c?"string"==typeof d?f(a,b).fill(c,d):f(a,b).fill(c):f(a,b)}function k(a,b){if(i(b),a=f(a,b<0?0:0|p(b)),!g.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function l(a,b,c){if("string"==typeof c&&""!==c||(c="utf8"),!g.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var d=0|r(b,c);a=f(a,d);var e=a.write(b,c);return e!==d&&(a=a.slice(0,e)),a}function m(a,b){var c=b.length<0?0:0|p(b.length);a=f(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function n(a,b,c,d){if(b.byteLength,c<0||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");return b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d),g.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=g.prototype):a=m(a,b),a}function o(a,b){if(g.isBuffer(b)){var c=0|p(b.length);return a=f(a,c),0===a.length?a:(b.copy(a,0,0,c),a)}if(b){if("undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return"number"!=typeof b.length||Y(b.length)?f(a,0):m(a,b);if("Buffer"===b.type&&_(b.data))return m(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function q(a){return+a!=a&&(a=0),g.alloc(+a)}function r(a,b){if(g.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return T(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return W(a).length;default:if(d)return T(a).length;b=(""+b).toLowerCase(),d=!0}}function s(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"latin1":case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,isNaN(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=g.from(b,d)),g.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return b&=255,g.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<h;j++)if(f(a,j)===f(b,k===-1?0:j-k)){if(k===-1&&(k=j),j-k+1===i)return k*g}else k!==-1&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;m<i;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function w(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))return g;a[c+g]=h}return g}function x(a,b,c,d){return X(T(b,a.length-c),a,c,d)}function y(a,b,c,d){return X(U(b),a,c,d)}function z(a,b,c,d){return y(a,b,c,d)}function A(a,b,c,d){return X(W(b),a,c,d)}function B(a,b,c,d){return X(V(b,a.length-c),a,c,d)}function C(a,b,c){return 0===b&&c===a.length?Z.fromByteArray(a):Z.fromByteArray(a.slice(b,c))}function D(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return E(d)}function E(a){var b=a.length;if(b<=aa)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=aa));return c}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=S(a[f]);return e}function I(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function J(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function K(a,b,c,d,e,f){if(!g.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function L(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function M(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function N(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function O(a,b,c,d,e){return e||N(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(a,b,c,d,23,4),c+4}function P(a,b,c,d,e){return e||N(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(a,b,c,d,52,8),c+8}function Q(a){if(a=R(a).replace(ba,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function R(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function S(a){return a<16?"0"+a.toString(16):a.toString(16)}function T(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function U(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function V(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function W(a){return Z.toByteArray(Q(a))}function X(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Y(a){return a!==a}var Z=a("base64-js"),$=a("ieee754"),_=a("isarray");c.Buffer=g,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50,g.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:d(),c.kMaxLength=e(),g.poolSize=8192,g._augment=function(a){return a.__proto__=g.prototype,a},g.from=function(a,b,c){return h(null,a,b,c)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&g[Symbol.species]===g&&Object.defineProperty(g,Symbol.species,{value:null,configurable:!0})),g.alloc=function(a,b,c){return j(null,a,b,c)},g.allocUnsafe=function(a){return k(null,a)},g.allocUnsafeSlow=function(a){return k(null,a)},g.isBuffer=function(a){return!(null==a||!a._isBuffer)},g.compare=function(a,b){if(!g.isBuffer(a)||!g.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},g.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(a,b){if(!_(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return g.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=g.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var f=a[c];if(!g.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(d,e),e+=f.length}return d},g.byteLength=r,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)t(this,b,b+1);return this},g.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},g.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},g.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?D(this,0,a):s.apply(this,arguments)},g.prototype.equals=function(a){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===g.compare(this,a)},g.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},g.prototype.compare=function(a,b,c,d,e){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var f=e-d,h=c-b,i=Math.min(f,h),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){f=j[l],h=k[l];break}return f<h?-1:h<f?1:0},g.prototype.includes=function(a,b,c){return this.indexOf(a,b,c)!==-1},g.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},g.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},g.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":return y(this,a,b,c);case"latin1":case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var aa=4096;g.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d;if(g.TYPED_ARRAY_SUPPORT)d=this.subarray(a,b),d.__proto__=g.prototype;else{var e=b-a;d=new g(e,void 0);for(var f=0;f<e;++f)d[f]=this[f+a]}return d},g.prototype.readUIntLE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},g.prototype.readUIntBE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},g.prototype.readUInt8=function(a,b){return b||J(a,1,this.length),this[a]},g.prototype.readUInt16LE=function(a,b){return b||J(a,2,this.length),this[a]|this[a+1]<<8},g.prototype.readUInt16BE=function(a,b){return b||J(a,2,this.length),this[a]<<8|this[a+1]},g.prototype.readUInt32LE=function(a,b){return b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},g.prototype.readUInt32BE=function(a,b){return b||J(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},g.prototype.readIntLE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},g.prototype.readIntBE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},g.prototype.readInt8=function(a,b){return b||J(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},g.prototype.readInt16LE=function(a,b){b||J(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt16BE=function(a,b){b||J(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt32LE=function(a,b){return b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},g.prototype.readInt32BE=function(a,b){return b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},g.prototype.readFloatLE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!0,23,4)},g.prototype.readFloatBE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!1,23,4)},g.prototype.readDoubleLE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!0,52,8)},g.prototype.readDoubleBE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!1,52,8)},g.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b|=0,c|=0,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},g.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b|=0,c|=0,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},g.prototype.writeUInt8=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,1,255,0),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},g.prototype.writeUInt16LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeUInt16BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeUInt32LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):M(this,a,b,!0),b+4},g.prototype.writeUInt32BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b|=0,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b|=0,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeInt8=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,1,127,-128),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),a<0&&(a=255+a+1),this[b]=255&a,b+1},g.prototype.writeInt16LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeInt16BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeInt32LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):M(this,a,b,!0),b+4},g.prototype.writeInt32BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeFloatLE=function(a,b,c){return O(this,a,b,!0,c)},g.prototype.writeFloatBE=function(a,b,c){return O(this,a,b,!1,c)},g.prototype.writeDoubleLE=function(a,b,c){return P(this,a,b,!0,c)},g.prototype.writeDoubleBE=function(a,b,c){return P(this,a,b,!1,c)},g.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&c<b&&b<d)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(f<1e3||!g.TYPED_ARRAY_SUPPORT)for(e=0;e<f;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},g.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);e<256&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!g.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a&=255);if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var f;if("number"==typeof a)for(f=b;f<c;++f)this[f]=a;else{var h=g.isBuffer(a)?a:T(new g(a,d).toString()),i=h.length;for(f=0;f<c-b;++f)this[f+b]=h[f%i]}return this};var ba=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":8,ieee754:172,isarray:178}],35:[function(a,b,c){(function(c){function d(a,b){var d=c.cwd();if(d!==g&&(h={},g=d),h[a]&&h[a][b])return h[a][b];var i=f.call(e,a,b);return h[a]=h[a]||{},h[a][b]=i,i}var e=a("path"),f=e.relative,g=c.cwd(),h={};b.exports=d}).call(this,a("_process"))},{_process:256,path:200}],36:[function(a,b,c){"use strict";function d(a,b){b=b||"latest",this.definition=a,this.reference=i.getVersion(b)}function e(a,b,c,d){return a.id&&a.id===c&&Object.keys(d).forEach(function(b){a.params.hasOwnProperty(b)||(a.params[b]={});var c=d[b];Object.keys(c).forEach(function(d){a.params[b][d]=c[d]})}),h(a.type,b).forEach(function(f){e(a.params[f],b,c,d)}),a}function f(a,b,c){return a.push(b),h(b.type,c).forEach(function(d){f(a,b.params[d],c)}),a}function g(a,b,c){return b.id&&(a[b.id]=b),h(b.type,c).forEach(function(d){g(a,b.params[d],c)}),a}function h(a,b){var c=b.analyses[a];return Object.keys(c.params).reduce(function(a,b){return"node"===c.params[b].type&&a.push(b),a},[])}var i=a("./version");b.exports=d,d.prototype.getNodesWithId=function(){return g({},this.definition,this.reference)},d.prototype.getChildNodesNames=function(){return h(this.definition.type,this.reference)},d.prototype.getNodesList=function(){return f([],this.definition,this.reference)},d.prototype.getDefinitionWith=function(a,b){return e(this.definition,this.reference,a,b)}},{"./version":37}],37:[function(a,b,c){"use strict";var d=a("./versions"),e=Object.keys(d).filter(function(a){return"latest"!==a});b.exports.getVersion=function(a){if(!d.hasOwnProperty(a))throw new Error('Invalid camshaft-reference version: "'+a+'". Valid versions are: '+e.join(", ")+".");return d[a]},b.exports.versions=e},{"./versions":72}],38:[function(a,b,c){b.exports={version:"0.1.0",analyses:{buffer:{params:{source:{type:"node"},radio:{type:"number"}}},moran:{params:{numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node"},polygons_source:{type:"node"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node"},kind:{type:"enum",values:["walk","drive","bike"]},time:{type:"number"}}}}}},{}],39:[function(a,b,c){b.exports={version:"0.10.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},moran:{params:{source:{type:"node",geometry:["polygon"]},numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node",
geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}}}}},{}],40:[function(a,b,c){b.exports={version:"0.14.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},moran:{params:{source:{type:"node",geometry:["polygon"]},numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["point"]},weight_column:{type:"string"},category_column:{type:"string"}}}}}},{}],41:[function(a,b,c){b.exports={version:"0.15.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},moran:{params:{source:{type:"node",geometry:["polygon"]},numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["point"]},weight_column:{type:"string"},category_column:{type:"string"}}}}}},{}],42:[function(a,b,c){b.exports={version:"0.16.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},moran:{params:{source:{type:"node",geometry:["polygon"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["point"]},weight_column:{type:"string"},category_column:{type:"string"}}}}}},{}],43:[function(a,b,c){b.exports={version:"0.17.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},moran:{params:{source:{type:"node",geometry:["polygon"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["point"]},weight_column:{type:"string"},category_column:{type:"string"},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],44:[function(a,b,c){b.exports={version:"0.18.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["point"]},weight_column:{type:"string"},category_column:{type:"string"},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],45:[function(a,b,c){b.exports={version:"0.19.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["point"]},weight_column:{type:"string"},category_column:{type:"string"},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],46:[function(a,b,c){b.exports={version:"0.2.0",analyses:{buffer:{params:{source:{type:"node"},radio:{type:"number"}}},moran:{params:{source:{type:"node"},numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node"},polygons_source:{type:"node"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node"},kind:{type:"enum",values:["walk","drive","bike"]},time:{type:"number"}}}}}},{}],47:[function(a,b,c){b.exports={version:"0.20.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["point"]},weight_column:{type:"string"},category_column:{type:"string"},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],48:[function(a,b,c){b.exports={version:"0.21.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["point"]},weight_column:{type:"string"},category_column:{type:"string"},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],49:[function(a,b,c){b.exports={version:"0.22.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["point"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],50:[function(a,b,c){b.exports={version:"0.23.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],51:[function(a,b,c){b.exports={version:"0.26.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{
params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],52:[function(a,b,c){b.exports={version:"0.27.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],53:[function(a,b,c){b.exports={version:"0.29.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],54:[function(a,b,c){b.exports={version:"0.3.0",analyses:{buffer:{params:{source:{type:"node"},radio:{type:"number"}}},moran:{params:{source:{type:"node"},numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node"},polygons_source:{type:"node"}}},"population-in-area":{params:{source:{type:"node"},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node"},kind:{type:"enum",values:["walk","drive","bike"]},time:{type:"number"}}}}}},{}],55:[function(a,b,c){b.exports={version:"0.33.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0},provider:{type:"enum",values:["heremaps","google","mapzen","user_default"],optional:!0,"default-value":"mapzen"}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],56:[function(a,b,c){b.exports={version:"0.34.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region:{type:"string"},country:{type:"string"}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city:{type:"string"},admin_region:{type:"string"},country:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},postal_code:{type:"string"},country:{type:"string"}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address:{type:"string"},city:{type:"string",optional:!0},state:{type:"string",optional:!0},country:{type:"string",optional:!0},provider:{type:"enum",values:["heremaps","google","mapzen","user_default"],optional:!0,"default-value":"mapzen"}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"},provider:{type:"enum",values:["heremaps","mapzen"],optional:!0,"default-value":"mapzen"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],57:[function(a,b,c){b.exports={version:"0.37.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string"},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0},provider:{type:"enum",values:["heremaps","google","mapzen","user_default"],optional:!0,"default-value":"mapzen"}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",
geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"},provider:{type:"enum",values:["heremaps","mapzen"],optional:!0,"default-value":"mapzen"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],58:[function(a,b,c){b.exports={version:"0.37.1",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string"},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0},provider:{type:"enum",values:["heremaps","google","mapzen","user_default"],optional:!0,"default-value":"mapzen"}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"},provider:{type:"enum",values:["heremaps","mapzen"],optional:!0,"default-value":"heremaps"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],59:[function(a,b,c){b.exports={version:"0.38.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string"},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0},provider:{type:"enum",values:["heremaps","google","mapzen","user_default"],optional:!0,"default-value":"mapzen"}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"},provider:{type:"enum",values:["heremaps","mapzen"],optional:!0,"default-value":"heremaps"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],60:[function(a,b,c){b.exports={version:"0.4.0",analyses:{buffer:{params:{source:{type:"node"},radius:{type:"number"}}},moran:{params:{source:{type:"node"},numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node"},polygons_source:{type:"node"}}},"population-in-area":{params:{source:{type:"node"},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node"},kind:{type:"enum",values:["walk","drive","bike"]},time:{type:"number"}}}}}},{}],61:[function(a,b,c){b.exports={version:"0.40.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string"},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],62:[function(a,b,c){b.exports={version:"0.41.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},"bounding-box":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"bounding-circle":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},"concave-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},target_percent:{type:"number",optional:!0,"default-value":.7},allow_holes:{type:"boolean",optional:!0,"default-value":!1},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string"},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"line-sequential":{params:{source:{type:"node",geometry:["point"]},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"line-source-to-target":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string",optional:!0},target:{type:"node",geometry:["point"]},target_column:{type:"string",optional:!0},closest:{type:"boolean"}}},"line-to-column":{params:{source:{type:"node",geometry:["point"]},target_column:{type:"string"}}},"line-to-single-point":{params:{source:{type:"node",geometry:["point"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0,"default-value":!1}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]
},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0,"default-value":0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],63:[function(a,b,c){b.exports={version:"0.43.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},"bounding-box":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"bounding-circle":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},"concave-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},target_percent:{type:"number",optional:!0,"default-value":.7},allow_holes:{type:"boolean",optional:!0,"default-value":!1},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string"},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"line-sequential":{params:{source:{type:"node",geometry:["point"]},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"},category_column:{type:"string",optional:!0}}},"line-source-to-target":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string",optional:!0},target:{type:"node",geometry:["point"]},target_column:{type:"string",optional:!0},closest:{type:"boolean"}}},"line-to-column":{params:{source:{type:"node",geometry:["point"]},target_column:{type:"string"}}},"line-to-single-point":{params:{source:{type:"node",geometry:["point"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0,"default-value":!1}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0,"default-value":0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],64:[function(a,b,c){b.exports={version:"0.44.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},"bounding-box":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"bounding-circle":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},"concave-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},target_percent:{type:"number",optional:!0,"default-value":.7},allow_holes:{type:"boolean",optional:!0,"default-value":!1},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},contour:{params:{source:{type:"node",geometry:["point"]},column:{type:"string"},buffer:{type:"number",optional:!0,"default-value":.2},method:{type:"enum",values:["nearest_neighbor","barymetric","IDW"],optional:!0,"default-value":"barymetric"},class_method:{type:"enum",values:["equals","headstails","jenks","quantiles"],optional:!0,"default-value":"quantiles"},steps:{type:"number",optional:!0,"default-value":7},resolution:{type:"number",optional:!0,"default-value":-90}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string"},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},gravity:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},weight_column:{type:"string"},weight_threshold:{type:"number",optional:!0,"default-value":-1e308},pop_column:{type:"string"},max_distance:{type:"number"},target_id:{type:"number"}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"line-sequential":{params:{source:{type:"node",geometry:["point"]},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"},category_column:{type:"string",optional:!0}}},"line-source-to-target":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string",optional:!0},target:{type:"node",geometry:["point"]},target_column:{type:"string",optional:!0},closest:{type:"boolean"}}},"line-to-column":{params:{source:{type:"node",geometry:["point"]},target_column:{type:"string"}}},"line-to-single-point":{params:{source:{type:"node",geometry:["point"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0,"default-value":!1}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0,"default-value":0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],65:[function(a,b,c){b.exports={version:"0.47.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},"bounding-box":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"bounding-circle":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},"concave-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},target_percent:{type:"number",optional:!0,"default-value":.7},allow_holes:{type:"boolean",optional:!0,"default-value":!1},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},contour:{params:{source:{type:"node",geometry:["point"]},column:{type:"string"},buffer:{type:"number",optional:!0,"default-value":.2},method:{type:"enum",values:["nearest_neighbor","barymetric","IDW"],optional:!0,"default-value":"barymetric"},class_method:{type:"enum",values:["equals","headstails","jenks","quantiles"],optional:!0,"default-value":"quantiles"},steps:{type:"number",optional:!0,"default-value":7},resolution:{type:"number",optional:!0,"default-value":-90}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string"},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},gravity:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},weight_column:{type:"string"},weight_threshold:{type:"number",optional:!0,"default-value":-1e308},pop_column:{type:"string"},max_distance:{type:"number"},target_id:{type:"number"}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"line-sequential":{params:{source:{type:"node",geometry:["point"]},order_column:{type:"string"},order_type:{type:"enum",values:["asc","desc"]},category_column:{type:"string",optional:!0}}},"line-source-to-target":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string",optional:!0},target:{type:"node",geometry:["point"]},target_column:{type:"string",optional:!0},closest:{type:"boolean"}}},"line-to-column":{params:{source:{type:"node",geometry:["point"]},target_column:{type:"string"}}},"line-to-single-point":{params:{source:{type:"node",geometry:["point"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0,"default-value":!1}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0,"default-value":0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],66:[function(a,b,c){b.exports={version:"0.51.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},"bounding-box":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"bounding-circle":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},"concave-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},target_percent:{type:"number",optional:!0,"default-value":.7},allow_holes:{type:"boolean",optional:!0,"default-value":!1},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},contour:{params:{source:{type:"node",geometry:["point"]},column:{type:"string"},buffer:{type:"number",optional:!0,"default-value":.2},method:{type:"enum",values:["nearest_neighbor","barymetric","IDW"],optional:!0,"default-value":"barymetric"},class_method:{type:"enum",values:["equals","headstails","jenks","quantiles"],optional:!0,"default-value":"quantiles"},steps:{type:"number",optional:!0,
"default-value":7},resolution:{type:"number",optional:!0,"default-value":-90}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string",optional:!0},street_address_template:{type:"string",optional:!0},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},gravity:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},weight_column:{type:"string"},weight_threshold:{type:"number",optional:!0,"default-value":-1e308},pop_column:{type:"string"},max_distance:{type:"number"},target_id:{type:"number"}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"line-sequential":{params:{source:{type:"node",geometry:["point"]},order_column:{type:"string"},order_type:{type:"enum",values:["asc","desc"]},category_column:{type:"string",optional:!0}}},"line-source-to-target":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string",optional:!0},target:{type:"node",geometry:["point"]},target_column:{type:"string",optional:!0},closest:{type:"boolean"}}},"line-to-column":{params:{source:{type:"node",geometry:["point"]},target_column:{type:"string"}}},"line-to-single-point":{params:{source:{type:"node",geometry:["point"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0,"default-value":!1}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0,"default-value":0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],67:[function(a,b,c){b.exports={version:"0.52.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},"bounding-box":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"bounding-circle":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},responses:{type:"number",optional:!0,"default-value":1},category:{type:"string",optional:!0}}},"concave-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},target_percent:{type:"number",optional:!0,"default-value":.7},allow_holes:{type:"boolean",optional:!0,"default-value":!1},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},contour:{params:{source:{type:"node",geometry:["point"]},column:{type:"string"},buffer:{type:"number",optional:!0,"default-value":.2},method:{type:"enum",values:["nearest_neighbor","barymetric","IDW"],optional:!0,"default-value":"barymetric"},class_method:{type:"enum",values:["equals","headstails","jenks","quantiles"],optional:!0,"default-value":"quantiles"},steps:{type:"number",optional:!0,"default-value":7},resolution:{type:"number",optional:!0,"default-value":-90}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string",optional:!0},street_address_template:{type:"string",optional:!0},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},gravity:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},weight_column:{type:"string"},weight_threshold:{type:"number",optional:!0,"default-value":-1e308},pop_column:{type:"string"},max_distance:{type:"number"},target_id:{type:"number"}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"line-sequential":{params:{source:{type:"node",geometry:["point"]},order_column:{type:"string"},order_type:{type:"enum",values:["asc","desc"]},category_column:{type:"string",optional:!0}}},"line-source-to-target":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string",optional:!0},target:{type:"node",geometry:["point"]},target_column:{type:"string",optional:!0},closest:{type:"boolean"}}},"line-to-column":{params:{source:{type:"node",geometry:["point"]},target_column:{type:"string"}}},"line-to-single-point":{params:{source:{type:"node",geometry:["point"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0,"default-value":!1}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0,"default-value":0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],68:[function(a,b,c){b.exports={version:"0.54.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},"bounding-box":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"bounding-circle":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},responses:{type:"number",optional:!0,"default-value":1},category:{type:"string",optional:!0}}},"concave-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},target_percent:{type:"number",optional:!0,"default-value":.7},allow_holes:{type:"boolean",optional:!0,"default-value":!1},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},contour:{params:{source:{type:"node",geometry:["point"]},column:{type:"string"},buffer:{type:"number",optional:!0,"default-value":.2},method:{type:"enum",values:["nearest_neighbor","barymetric","IDW"],optional:!0,"default-value":"barymetric"},class_method:{type:"enum",values:["equals","headstails","jenks","quantiles"],optional:!0,"default-value":"quantiles"},steps:{type:"number",optional:!0,"default-value":7},resolution:{type:"number",optional:!0,"default-value":-90}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"deprecated-sql-function":{params:{function_name:{type:"string"},primary_source:{type:"node",geometry:["*"]},secondary_source:{type:"node",geometry:["*"],optional:!0},function_args:{type:"array",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"polygon"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string",optional:!0},street_address_template:{type:"string",optional:!0},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},gravity:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},weight_column:{type:"string"},weight_threshold:{type:"number",optional:!0,"default-value":-1e308},pop_column:{type:"string"},max_distance:{type:"number"},target_id:{type:"number"}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"line-sequential":{params:{source:{type:"node",geometry:["point"]},order_column:{type:"string"},order_type:{type:"enum",values:["asc","desc"]},category_column:{type:"string",optional:!0}}},"line-source-to-target":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string",optional:!0},target:{type:"node",geometry:["point"]},target_column:{type:"string",optional:!0},closest:{type:"boolean"}}},"line-to-column":{params:{source:{type:"node",geometry:["point"]},target_column:{type:"string"}}},"line-to-single-point":{params:{source:{type:"node",geometry:["point"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0,"default-value":!1}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},column_target:{type:"string"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0,"default-value":0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},{}],69:[function(a,b,c){b.exports={version:"0.6.0",analyses:{"aggregate-intersection":{params:{source:{type:"node"},target:{type:"node"},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node"},radius:{type:"number"}}},intersection:{params:{source:{type:"node"},target:{type:"node"}}},moran:{params:{source:{type:"node"},numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node"},polygons_source:{type:"node"}}},"population-in-area":{params:{source:{type:"node"},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node"},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}}}}},{}],70:[function(a,b,c){b.exports={version:"0.7.0",analyses:{"aggregate-intersection":{params:{source:{type:"node"},target:{type:"node"},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node"},radius:{type:"number"}}},"filter-category":{params:{source:{type:"node"},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node"},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},intersection:{params:{source:{type:"node"},target:{type:"node"}}},moran:{params:{source:{type:"node"},numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node"},polygons_source:{type:"node"}}},"population-in-area":{params:{source:{type:"node"},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node"},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}}}}},{}],71:[function(a,b,c){b.exports={version:"0.9.0",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string"}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},intersection:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]}}},moran:{params:{source:{type:"node",geometry:["polygon"]},numerator_column:{type:"string"},denominator_column:{type:"string"},significance:{type:"number"},neighbours:{type:"number"},permutations:{type:"number"},w_type:{type:"enum",values:["knn","queen"]}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},source:{params:{query:{type:"string"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}}}}},{}],72:[function(a,b,c){var d={"0.1.0":a("./0.1.0/reference.json"),"0.2.0":a("./0.2.0/reference.json"),"0.3.0":a("./0.3.0/reference.json"),"0.4.0":a("./0.4.0/reference.json"),"0.6.0":a("./0.6.0/reference.json"),"0.7.0":a("./0.7.0/reference.json"),"0.9.0":a("./0.9.0/reference.json"),"0.10.0":a("./0.10.0/reference.json"),"0.14.0":a("./0.14.0/reference.json"),"0.15.0":a("./0.15.0/reference.json"),"0.16.0":a("./0.16.0/reference.json"),"0.17.0":a("./0.17.0/reference.json"),"0.18.0":a("./0.18.0/reference.json"),"0.19.0":a("./0.19.0/reference.json"),"0.20.0":a("./0.20.0/reference.json"),"0.21.0":a("./0.21.0/reference.json"),"0.22.0":a("./0.22.0/reference.json"),"0.23.0":a("./0.23.0/reference.json"),"0.26.0":a("./0.26.0/reference.json"),"0.27.0":a("./0.27.0/reference.json"),"0.29.0":a("./0.29.0/reference.json"),"0.33.0":a("./0.33.0/reference.json"),"0.34.0":a("./0.34.0/reference.json"),"0.37.0":a("./0.37.0/reference.json"),"0.37.1":a("./0.37.1/reference.json"),"0.38.0":a("./0.38.0/reference.json"),"0.40.0":a("./0.40.0/reference.json"),"0.41.0":a("./0.41.0/reference.json"),"0.43.0":a("./0.43.0/reference.json"),"0.44.0":a("./0.44.0/reference.json"),"0.47.0":a("./0.47.0/reference.json"),"0.51.0":a("./0.51.0/reference.json"),"0.52.0":a("./0.52.0/reference.json"),
"0.54.0":a("./0.54.0/reference.json")};d.latest=d["0.54.0"],b.exports=d},{"./0.1.0/reference.json":38,"./0.10.0/reference.json":39,"./0.14.0/reference.json":40,"./0.15.0/reference.json":41,"./0.16.0/reference.json":42,"./0.17.0/reference.json":43,"./0.18.0/reference.json":44,"./0.19.0/reference.json":45,"./0.2.0/reference.json":46,"./0.20.0/reference.json":47,"./0.21.0/reference.json":48,"./0.22.0/reference.json":49,"./0.23.0/reference.json":50,"./0.26.0/reference.json":51,"./0.27.0/reference.json":52,"./0.29.0/reference.json":53,"./0.3.0/reference.json":54,"./0.33.0/reference.json":55,"./0.34.0/reference.json":56,"./0.37.0/reference.json":57,"./0.37.1/reference.json":58,"./0.38.0/reference.json":59,"./0.4.0/reference.json":60,"./0.40.0/reference.json":61,"./0.41.0/reference.json":62,"./0.43.0/reference.json":63,"./0.44.0/reference.json":64,"./0.47.0/reference.json":65,"./0.51.0/reference.json":66,"./0.52.0/reference.json":67,"./0.54.0/reference.json":68,"./0.6.0/reference.json":69,"./0.7.0/reference.json":70,"./0.9.0/reference.json":71}],73:[function(a,b,c){!function(a){function b(b){return a.functions.hsla(b.h,b.s,b.l,b.a)}function c(b){return b instanceof a.Dimension?parseFloat("%"==b.unit?b.value/100:b.value):"number"==typeof b?b:NaN}function d(a){return Math.min(1,Math.max(0,a))}a.functions={rgb:function(a,b,c){return this.rgba(a,b,c,1)},rgba:function(b,d,e,f){var g=[b,d,e].map(function(a){return c(a)});return f=c(f),g.some(isNaN)||isNaN(f)?null:new a.Color(g,f)},stop:function(a){var b,c;return arguments.length>1&&(b=arguments[1]),arguments.length>2&&(c=arguments[2]),{is:"tag",val:a,color:b,mode:c,toString:function(d){return'\n\t<stop value="'+a.ev(d)+'"'+(b?' color="'+b.ev(d)+'" ':"")+(c?' mode="'+c.ev(d)+'" ':"")+"/>"}}},hsl:function(a,b,c){return this.hsla(a,b,c,1)},hsla:function(a,b,d,e){function f(a){return a=a<0?a+1:a>1?a-1:a,6*a<1?h+(g-h)*a*6:2*a<1?g:3*a<2?h+(g-h)*(2/3-a)*6:h}if(a=c(a)%360/360,b=c(b),d=c(d),e=c(e),[a,b,d,e].some(isNaN))return null;var g=d<=.5?d*(b+1):d+b-d*b,h=2*d-g;return this.rgba(255*f(a+1/3),255*f(a),255*f(a-1/3),e)},hue:function(b){return"toHSL"in b?new a.Dimension(Math.round(b.toHSL().h)):null},saturation:function(b){return"toHSL"in b?new a.Dimension(Math.round(100*b.toHSL().s),"%"):null},lightness:function(b){return"toHSL"in b?new a.Dimension(Math.round(100*b.toHSL().l),"%"):null},alpha:function(b){return"toHSL"in b?new a.Dimension(b.toHSL().a):null},saturate:function(a,c){if(!("toHSL"in a))return null;var e=a.toHSL();return e.s+=c.value/100,e.s=d(e.s),b(e)},desaturate:function(a,c){if(!("toHSL"in a))return null;var e=a.toHSL();return e.s-=c.value/100,e.s=d(e.s),b(e)},lighten:function(a,c){if(!("toHSL"in a))return null;var e=a.toHSL();return e.l+=c.value/100,e.l=d(e.l),b(e)},darken:function(a,c){if(!("toHSL"in a))return null;var e=a.toHSL();return e.l-=c.value/100,e.l=d(e.l),b(e)},fadein:function(a,c){if(!("toHSL"in a))return null;var e=a.toHSL();return e.a+=c.value/100,e.a=d(e.a),b(e)},fadeout:function(a,c){if(!("toHSL"in a))return null;var e=a.toHSL();return e.a-=c.value/100,e.a=d(e.a),b(e)},spin:function(a,c){if(!("toHSL"in a))return null;var d=a.toHSL(),e=(d.h+c.value)%360;return d.h=e<0?360+e:e,b(d)},replace:function(a,b,c){return"field"===a.is?a.toString+".replace("+b.toString()+", "+c.toString()+")":a.replace(b,c)},mix:function(b,c,d){var e=d.value/100,f=2*e-1,g=b.toHSL().a-c.toHSL().a,h=((f*g==-1?f:(f+g)/(1+f*g))+1)/2,i=1-h,j=[b.rgb[0]*h+c.rgb[0]*i,b.rgb[1]*h+c.rgb[1]*i,b.rgb[2]*h+c.rgb[2]*i],k=b.alpha*e+c.alpha*(1-e);return new a.Color(j,k)},greyscale:function(b){return this.desaturate(b,new a.Dimension(100))},"%":function(b){for(var c=Array.prototype.slice.call(arguments,1),d=b.value,e=0;e<c.length;e++)d=d.replace(/%s/,c[e].value).replace(/%[da]/,c[e].toString());return d=d.replace(/%%/g,"%"),new a.Quoted(d)}};for(var e=["emboss","blur","gray","sobel","edge-detect","x-gradient","y-gradient","sharpen"],f=0;f<e.length;f++){var g=e[f];a.functions[g]=function(b){return function(){return new a.ImageFilter(b)}}(g)}a.functions["agg-stack-blur"]=function(b,c){return new a.ImageFilter("agg-stack-blur",[b,c])},a.functions["scale-hsla"]=function(b,c,d,e,f,g,h,i){return new a.ImageFilter("scale-hsla",[b,c,d,e,f,g,h,i])}}(a("./tree"))},{"./tree":78}],74:[function(a,b,c){(function(b){var d=c,e=a("./tree"),f=b._||a("underscore");d.Parser=function(a){function b(){n=q[m],o=l,r=l}function c(){q[m]=n,l=o,r=l}function d(){l>r&&(q[m]=q[m].slice(l-r),r=l)}function g(a){var b,c,e,f;if(a instanceof Function)return a.call(s.parsers);if("string"==typeof a)b=k.charAt(l)===a?a:null,c=1,d();else{if(d(),b=a.exec(q[m]),!b)return null;c=b[0].length}if(b){var g=l+=c;for(f=l+q[m].length-c;l<f&&(e=k.charCodeAt(l),32===e||10===e||9===e);)l++;return q[m]=q[m].slice(c+(l-g)),r=l,0===q[m].length&&m<q.length-1&&m++,"string"==typeof b?b:1===b.length?b[0]:b}}function h(a){return"string"==typeof a?k.charAt(l)===a:!!a.test(q[m])}function i(a,b){return(a.slice(0,b).match(/\n/g)||"").length+1}function j(b){var c,d;f.defaults(b,{index:p,filename:a.filename,message:"Parse error.",line:0,column:-1}),c=b.filename&&t.env.inputs&&t.env.inputs[b.filename]?t.env.inputs[b.filename]:k,b.line=i(c,b.index);for(var e=b.index;e>=0&&"\n"!==c.charAt(e);e--)b.column++;return d=f.template("<%=filename%>:<%=line%>:<%=column%> <%=message%>"),new Error(d(b))}var k,l,m,n,o,p,q,r,s,t=this;return this.env=a=a||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},s={extractErrorLine:i,parse:function(b){var c,d=null;l=m=r=p=0,q=[],k=b.replace(/\r\n/g,"\n"),a.filename&&(t.env.inputs[a.filename]=k);if(q=function(a){for(var b,c,e,f,g=0,h=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,i=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,j=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,l=0,m=a[0],n=0;n<k.length;)if(h.lastIndex=n,(b=h.exec(k))&&b.index===n&&(n+=b[0].length,m.push(b[0])),e=k.charAt(n),i.lastIndex=j.lastIndex=n,(b=j.exec(k))&&b.index===n)n+=b[0].length,m.push(b[0]);else if(c||"/"!==e||(f=k.charAt(n+1),"/"!==f&&"*"!==f||!(b=i.exec(k))||b.index!==n)){switch(e){case"{":if(!c){l++,m.push(e);break}case"}":if(!c){l--,m.push(e),a[++g]=m=[];break}case"(":if(!c){c=!0,m.push(e);break}case")":if(c){c=!1,m.push(e);break}default:m.push(e)}n++}else n+=b[0].length,m.push(b[0]);return 0!==l&&(d={index:n-1,type:"Parse",message:l>0?"missing closing `}`":"missing opening `{`"}),a.map(function(a){return a.join("")})}([[]]),d)throw j(d);c=new e.Ruleset([],g(this.parsers.primary)),c.root=!0,c.toList=function(){return function(a){a.error=function(b){a.errors||(a.errors=new Error("")),a.errors.message?a.errors.message+="\n"+j(b).message:a.errors.message=j(b).message},a.frames=a.frames||[];var b=this.flatten([],[],a);return b.sort(f),b}}();var f=function(a,b){var c=a.specificity,d=b.specificity;return c[0]!=d[0]?d[0]-c[0]:c[1]!=d[1]?d[1]-c[1]:c[2]!=d[2]?d[2]-c[2]:d[3]-c[3]};return c},parsers:{primary:function(){for(var a,b=[];(a=g(this.rule)||g(this.ruleset)||g(this.comment))||g(/^[\s\n]+/)||(a=g(this.invalid));)a&&b.push(a);return b},invalid:function(){var a=g(/^[^;\n]*[;\n]/);if(a)return new e.Invalid(a,o)},comment:function(){var a;if("/"===k.charAt(l))return"/"===k.charAt(l+1)?new e.Comment(g(/^\/\/.*/),!0):(a=g(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new e.Comment(a):void 0},entities:{quoted:function(){if('"'===k.charAt(l)||"'"===k.charAt(l)){var a=g(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return a?new e.Quoted(a[1]||a[2]):void 0}},field:function(){if(g("[")){var a=g(/(^[^\]]+)/);if(g("]"))return a?new e.Field(a[1]):void 0}},comparison:function(){var a=g(/^=~|=|!=|<=|>=|<|>/);if(a)return a},keyword:function(){var a=g(/^[A-Za-z-]+[A-Za-z-0-9_]*/);if(a)return new e.Keyword(a)},call:function(){var a,b;if(a=/^([\w\-]+|%)\(/.exec(q[m])){if(a=a[1],"url"===a)return null;if(l+=a.length,g("("),b=g(this.entities.arguments),g(")"))return a?new e.Call(a,b,l):void 0}},arguments:function(){for(var a,b=[];(a=g(this.expression))&&(b.push(a),g(",")););return b},literal:function(){return g(this.entities.dimension)||g(this.entities.keywordcolor)||g(this.entities.hexcolor)||g(this.entities.quoted)},url:function(){var a;if("u"===k.charAt(l)&&g(/^url\(/))return a=g(this.entities.quoted)||g(this.entities.variable)||g(/^[\-\w%@$\/.&=:;#+?~]+/)||"",g(")")?new e.URL("undefined"!=typeof a.value||a instanceof e.Variable?a:new e.Quoted(a)):new e.Invalid(a,o,"Missing closing ) in URL.")},variable:function(){var b,c=l;if("@"===k.charAt(l)&&(b=g(/^@[\w-]+/)))return new e.Variable(b,c,a.filename)},hexcolor:function(){var a;if("#"===k.charAt(l)&&(a=g(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new e.Color(a[1])},keywordcolor:function(){var a=q[m].match(/^[a-z]+/);if(a&&a[0]in e.Reference.data.colors)return new e.Color(e.Reference.data.colors[g(/^[a-z]+/)])},dimension:function(){var a=k.charCodeAt(l);if(!(a>57||a<45||47===a)){var b=g(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return b?new e.Dimension(b[1],b[2],o):void 0}}},variable:function(){var a;if("@"===k.charAt(l)&&(a=g(/^(@[\w-]+)\s*:/)))return a[1]},entity:function(){return g(this.entities.call)||g(this.entities.literal)||g(this.entities.field)||g(this.entities.variable)||g(this.entities.url)||g(this.entities.keyword)},end:function(){return g(";")||h("}")},element:function(){var a=g(/^(?:[.#][\w\-]+|\*|Map)/);if(a)return new e.Element(a)},attachment:function(){var a=g(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(a)return a[1]},selector:function(){var a,b,c,d,f,h=[],i=new e.Filterset,m=[],n=e.FrameOffset.none;for(segments=0,conditions=0;(c=g(this.element))||(f=g(this.zoom))||(fo=g(this.frame_offset))||(d=g(this.filter))||(a=g(this.attachment));){if(segments++,c)h.push(c);else if(f)m.push(f),conditions++;else if(fo)n=fo,conditions++;else if(d){var p=i.add(d);if(p)throw j({message:p,index:l-1});conditions++}else{if(b)throw j({message:"Encountered second attachment name.",index:l-1});b=a}var q=k.charAt(l);if("{"===q||"}"===q||";"===q||","===q)break}if(segments)return new e.Selector(i,m,n,h,b,conditions,o)},filter:function(){b();var c,d,f;if(g("[")&&(c=g(/^[a-zA-Z0-9\-_]+/)||g(this.entities.quoted)||g(this.entities.variable)||g(this.entities.keyword)||g(this.entities.field))&&(c instanceof e.Quoted&&(c=new e.Field(c.toString())),(d=g(this.entities.comparison))&&(f=g(this.entities.quoted)||g(this.entities.variable)||g(this.entities.dimension)||g(this.entities.keyword)||g(this.entities.field)))){if(!g("]"))throw j({message:"Missing closing ] of filter.",index:o-1});return c.is||(c=new e.Field(c)),new e.Filter(c,d,f,o,a.filename)}},frame_offset:function(){b();var a,c;if(g(/^\[\s*frame-offset/g)&&(a=g(this.entities.comparison))&&(c=g(/^\d+/))&&g("]"))return e.FrameOffset(a,c,o)},zoom:function(){b();var a,d;return g(/^\[\s*zoom/g)&&(a=g(this.entities.comparison))&&(d=g(this.entities.variable)||g(this.entities.dimension))&&g("]")?new e.Zoom(a,d,o):void c()},block:function(){var a;if(g("{")&&(a=g(this.primary))&&g("}"))return a},ruleset:function(){var a,d,f=[];for(b();a=g(this.selector);){for(f.push(a);g(this.comment););if(!g(","))break;for(;g(this.comment););}if(a)for(;g(this.comment););if(f.length>0&&(d=g(this.block))){if(1===f.length&&f[0].elements.length&&"Map"===f[0].elements[0].value){var h=new e.Ruleset(f,d);return h.isMap=!0,h}return new e.Ruleset(f,d)}c()},rule:function(){var d,f,h=k.charAt(l);if(b(),"."!==h&&"#"!==h&&(d=g(this.variable)||g(this.property))){if(f=g(this.value),f&&g(this.end))return new e.Rule(d,f,o,a.filename);p=l,c()}},font:function(){for(var a,b=[],c=[];a=g(this.entity);)c.push(a);if(b.push(new e.Expression(c)),g(","))for(;(a=g(this.expression))&&(b.push(a),g(",")););return new e.Value(b)},value:function(){for(var a,b=[];(a=g(this.expression))&&(b.push(a),g(",")););return b.length>1?new e.Value(b.map(function(a){return a.value[0]})):1===b.length?new e.Value(b):void 0},sub:function(){var a,b=[];if(g("(")){for(;(a=g(this.expression))&&(b.push(a),g(",")););g(")")}return b.length>1?new e.Value(b.map(function(a){return a.value[0]})):1===b.length?new e.Value(b):void 0},multiplication:function(){var a,b,c,d;if(a=g(this.operand)){for(;(c=g("/")||g("*")||g("%"))&&(b=g(this.operand));)d=new e.Operation(c,[d||a,b],o);return d||a}},addition:function(){var a,b,c,d;if(a=g(this.multiplication)){for(;(c=g(/^[-+]\s+/)||" "!=k.charAt(l-1)&&(g("+")||g("-")))&&(b=g(this.multiplication));)d=new e.Operation(c,[d||a,b],o);return d||a}},operand:function(){return g(this.sub)||g(this.entity)},expression:function(){for(var a,b=[];a=g(this.addition)||g(this.entity);)b.push(a);if(b.length>0)return new e.Expression(b)},property:function(){var a=g(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(a)return a[1]}}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./tree":78,underscore:"underscore"}],75:[function(a,b,c){(function(c){function d(a,b,c,d){for(var e,f,g,h=b.filters,i=b.rules,j=0;j<a.length;j++)e=a[j].filters.cloneWith(h),e?(g=c[e],g?g.addRules(i):(f=a[j].clone(e),f.addRules(i)&&(c[e]=f,a.splice(j,0,f),j++))):null===e&&(a[j]=a[j].clone(),a[j].addRules(i));return a}function e(a,b){var c,e,f=+new Date,g={},h={},i=[];a.forEach(function(a){a.filters.ev(b)});for(var j=0;j<a.length;j++){e=a[j].attachment,c=[a[j]],g[e]||(g[e]=[],g[e].attachment=e,h[e]={},i.push(g[e]));for(var k=j+1;k<a.length;k++)a[k].attachment===e&&(c=d(c,a[k],h[e],b));for(var l=0;l<c.length;l++)h[e][c[l].filters]=c[l],g[e].push(c[l])}return b.benchmark&&console.warn("Inheritance time: "+(new Date-f)+"ms"),i}function f(a,b){return b.index-a.index}function g(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.index=1/0;for(var e=0;e<d.length;e++)for(var g=d[e].rules,h=0;h<g.length;h++){var i=g[h];i.index<d.index&&(d.index=i.index)}}var j=a.slice();return j.sort(f),j}function h(a,b,c){var d={},e=j.tree.Reference.data.symbolizers.map;return i(a).each(function(a,b){b in e&&(d[b]=b+'="'+a+'"')}),b.filter(function(a){return"Map"===a.elements.join("")}).forEach(function(a){for(var b=0;b<a.rules.length;b++){var f=a.rules[b].name;f in e||c.error({message:"Rule "+f+" not allowed for Map.",index:a.rules[b].index}),d[f]=a.rules[b].ev(c).toXML(c)}}),d}var i=c._||a("underscore"),j=a("./index");j.Renderer=function(a,b){this.env=a||{},this.options=b||{},this.options.mapnik_version=this.options.mapnik_version||"3.0.0"},j.Renderer.prototype.renderMSS=function(a){var b=i.defaults(this.env,{benchmark:!1,validation_data:!1,effects:[]});if(!j.tree.Reference.setVersion(this.options.mapnik_version))throw new Error("Could not set mapnik version to "+this.options.mapnik_version);var c=[],d=[];b.benchmark&&console.time("Parsing MSS");var f=j.Parser(b).parse(a);b.benchmark&&console.timeEnd("Parsing MSS"),b.benchmark&&console.time("Rule generation");var h=f.toList(b);b.benchmark&&console.timeEnd("Rule generation"),b.benchmark&&console.time("Rule inheritance");var k=e(h,b);b.benchmark&&console.timeEnd("Rule inheritance"),b.benchmark&&console.time("Style sort");var l=g(k,b);b.benchmark&&console.timeEnd("Style sort"),b.benchmark&&console.time("Total Style generation");for(var m,n,o=0;o<l.length;o++){m=l[o],n="style"+("__default__"!==m.attachment?"-"+m.attachment:""),d.push(n);var p='\tStyle "'+n+'" (#'+o+") toXML";b.benchmark&&console.time(p),c.push(j.tree.StyleXML(n,m.attachment,m,b)),b.benchmark&&console.timeEnd(p)}if(b.benchmark&&console.timeEnd("Total Style generation"),b.errors)throw b.errors;return c.join("\n")},j.Renderer.prototype.render=function(a){function b(a,b){return function(a){return a.appliesTo(f.name,b)}}var c=i.defaults(this.env,{benchmark:!1,validation_data:!1,effects:[],ppi:90.714});if(!j.tree.Reference.setVersion(this.options.mapnik_version))throw new Error("Could not set mapnik version to "+this.options.mapnik_version);for(var d,f,k,l,m,n,o=[],p=i.chain(a.Stylesheet).map(function(a){if("string"==typeof a)throw new Error("Stylesheet object is expected not a string: '"+a+"'");c=i.extend(c,{filename:a.id});var b=+new Date,d=j.Parser(c).parse(a.data);return c.benchmark&&console.warn("Parsing time: "+(new Date-b)+"ms"),d.toList(c)}).flatten().value(),q=0;q<a.Layer.length;q++){f=a.Layer[q],d=[],k={},c.benchmark&&console.warn("processing layer: "+f.id);for(var r=(f.class||"").split(/\s+/g),s=0;s<r.length;s++)k[r[s]]=!0;n=p.filter(b(f.name,k)),l=e(n,c),m=g(l,c);for(var t,u,v=0;v<m.length;v++){t=m[v],u=f.name+("__default__"!==t.attachment?"-"+t.attachment:"");var w=j.tree.StyleXML(u,t.attachment,t,c);w&&(o.push(w),d.push(u))}o.push(j.tree.LayerXML(f,d))}o.unshift(c.effects.map(function(a){return a.toXML(c)}).join("\n"));var x=h(a,p,c);if(c.errors)throw c.errors;var y=i.reduce(a,function(a,b,c){if(!b&&0!==b)return a;switch(c){case"srs":case"Layer":case"Stylesheet":break;case"bounds":case"center":case"minzoom":case"maxzoom":case"version":a.push('  <Parameter name="'+c+'">'+b+"</Parameter>");break;case"name":case"description":case"legend":case"attribution":case"template":a.push('  <Parameter name="'+c+'"><![CDATA['+b+"]]></Parameter>");break;case"format":a.push('  <Parameter name="'+c+'">'+b+"</Parameter>");break;case"interactivity":a.push('  <Parameter name="interactivity_layer">'+b.layer+"</Parameter>"),a.push('  <Parameter name="interactivity_fields">'+b.fields+"</Parameter>");break;default:"string"==typeof b?a.push('  <Parameter name="'+c+'"><![CDATA['+b+"]]></Parameter>"):"number"==typeof b?a.push('  <Parameter name="'+c+'">'+b+"</Parameter>"):"boolean"==typeof b&&a.push('  <Parameter name="'+c+'">'+b+"</Parameter>")}return a},[]);y.length&&o.unshift("<Parameters>\n"+y.join("\n")+"\n</Parameters>\n");var z=i.map(x,function(a){return" "+a}).join("");return o.unshift('<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE Map[]>\n<Map'+z+">\n"),o.push("</Map>"),o.join("\n")},b.exports=j,b.exports.addRules=d,b.exports.inheritDefinitions=e,b.exports.sortStyles=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./index":"carto",underscore:"underscore"}],76:[function(require,module,exports){(function(global){!function(carto){function CartoCSS(a,b){this.options=b||{},this.imageURLs=[],a&&this.setStyle(a)}var tree=require("./tree"),_=global._||require("underscore");CartoCSS.Layer=function(a,b){this.options=b,this.shader=a},CartoCSS.Layer.prototype={fullName:function(){return this.shader.attachment},name:function(){return this.fullName().split("::")[0]},frames:function(){return this.shader.frames},attachment:function(){return this.fullName().split("::")[1]},eval:function(a){var b=this.shader[a];if(b&&b.style)return b.style({},{zoom:0,"frame-offset":0})},getStyle:function(a,b){var c={};for(var d in this.shader)"attachment"!==d&&"zoom"!==d&&"frames"!==d&&"symbolizers"!==d&&(c[d]=this.shader[d].style(a,b));return c},getSymbolizers:function(){return this.shader.symbolizers},isVariable:function(){for(var a in this.shader)if("attachment"!==a&&"zoom"!==a&&"frames"!==a&&"symbolizers"!==a&&!this.shader[a].constant)return!0;return!1},getShader:function(){return this.shader},filter:function(a,b,c){for(var d in this.shader){var e=this.shader[d](b,c);if(e)return!0}return!1},transformGeometry:function(a){return a},transformGeometries:function(a){return a}},CartoCSS.prototype={setStyle:function(a){var b=this.parse(a);if(!b)throw new Error(this.parse_env.errors);this.layers=b.map(function(a){return new CartoCSS.Layer(a)})},getLayers:function(){return this.layers},getDefault:function(){return this.findLayer({attachment:"__default__"})},findLayer:function(a){return _.find(this.layers,function(b){for(var c in a){var d=b[c];if("function"==typeof d&&(d=d.call(b)),a[c]!==d)return!1}return!0})},_createFn:function(a){var b=a.join("\n");return this.options.debug&&console.log(b),Function("data","ctx","var _value = null; "+b+"; return _value; ")},_compile:function(shader){"string"==typeof shader&&(shader=eval("(function() { return "+shader+"; })()")),this.shader_src=shader;for(var attr in shader){var c=mapper[attr];c&&(this.compiled[c]=eval("(function() { return shader[attr]; })();"))}},getImageURLs:function(){return this.imageURLs},parse:function(a){function b(a){return a.elements[0]+"::"+a.attachment}var c={frames:[],errors:[],error:function(a){this.errors.push(a)}};this.parse_env=c;var d=null;try{d=new carto.Parser(c).parse(a)}catch(a){return void c.errors.push(a.message)}if(d){var e=d.toList(c);e.reverse();for(var f={},g=0;g<e.length;++g){for(var h=e[g],i=b(h),j=f[i]=f[i]||{symbolizers:[]},k=0;k<h.rules.length;k++){var l=h.rules[k];if("marker-file"===l.name||"point-file"===l.name){var m=l.value.value[0].value[0].value.value;this.imageURLs.push(m)}}j.frames=[],j.zoom=tree.Zoom.all;var n=h.toJS(c);this.options.debug&&console.log("props",n);for(var o in n){var p=j[o]=j[o]||{constant:!1,symbolizer:null,js:[],index:0};p.js.push(n[o].map(function(a){return a.js}).join("\n")),p.symbolizer=_.first(n[o].map(function(a){return a.symbolizer})),p.index=_.max(n[o].map(function(a){return a.index}).concat(p.index)),p.constant=!_.any(n[o].map(function(a){return!a.constant}))}}var q=[];this.options.debug&&console.log(f);for(var r={},g=0;g<e.length;++g){var h=e[g];if(this.options.strict&&(h.toXML(c,{}),c.errors.message))throw new Error(c.errors.message);var s=b(h),j=f[s];if(!r[s]){this.options.debug&&console.log("**",s);for(var t in j)"zoom"!==t&&"frames"!==t&&"symbolizers"!==t&&(this.options.debug&&console.log("*",t),j[t].style=this._createFn(j[t].js),j.symbolizers.push(j[t].symbolizer),j.symbolizers=_.uniq(j.symbolizers));j.attachment=s,q.push(j),r[s]=!0}j.zoom|=h.zoom,j.frames.push(h.frame_offset)}for(g=0;g<q.length;++g)q[g].frames=_.uniq(q[g].frames);return q}return null}},carto.RendererJS=function(a){this.options=a||{},this.options.mapnik_version=this.options.mapnik_version||"latest",this.reference=this.options.reference||require("./torque-reference").version.latest,this.options.strict=!!this.options.hasOwnProperty("strict")&&this.options.strict},carto.RendererJS.prototype.render=function(a,b){return tree.Reference.setData(this.reference),new CartoCSS(a,this.options)},"undefined"!=typeof module&&(module.exports=carto.RendererJS)}(require("../carto"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../carto":"carto","./torque-reference":77,"./tree":78,underscore:"underscore"}],77:[function(a,b,c){var d={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0],["colorize-alpha",-1],["color-to-alpha",1],["scale-hsla",8]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","source-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","lighter","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0],["colorize-alpha",-1],["color-to-alpha",1],["scale-hsla",8],["buckets",-1],["category",-1],["equal",-1],["headtails",-1],["jenks",-1],["quantiles",-1],["cartocolor",-1],["colorbrewer",-1],["range",-1],["ramp",-1]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","source-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","lighter","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color",
"default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon",expression:!0},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque",expression:!0},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line",expression:!0},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels",expression:!0},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri",expression:!0},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse","rectangle"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"float",expression:!0},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"float",expression:!0},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color",expression:!0},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"string",expression:!0,serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line",expression:!0},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon",expression:!0},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"string",expression:!0,required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"float",expression:!0,doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",
doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"float",expression:!0,"default-value":"0"}},torque:{"-torque-clear-color":{css:"-torque-clear-color",type:"color","default-value":"rgba(255, 255, 255, 0)","default-meaning":"full clear",doc:"color used to clear canvas on each frame"},"-torque-frame-count":{css:"-torque-frame-count","default-value":"128",type:"float","default-meaning":"the data is broken into 128 time frames",doc:"Number of animation steps/frames used in the animation. If the data contains a fewere number of total frames, the lesser value will be used."},"-torque-resolution":{css:"-torque-resolution","default-value":"2",type:"float","default-meaning":"",doc:"Spatial resolution in pixels. A resolution of 1 means no spatial aggregation of the data. Any other resolution of N results in spatial aggregation into cells of NxN pixels. The value N must be power of 2"},"-torque-animation-duration":{css:"-torque-animation-duration","default-value":"30",type:"float","default-meaning":"the animation lasts 30 seconds",doc:"Animation duration in seconds"},"-torque-aggregation-function":{css:"-torque-aggregation-function","default-value":"count(cartodb_id)",type:"string","default-meaning":"the value for each cell is the count of points in that cell",doc:"A function used to calculate a value from the aggregate data for each cell. See -torque-resolution"},"-torque-time-attribute":{css:"-torque-time-attribute","default-value":"time",type:"string","default-meaning":"the data column in your table that is of a time based type",doc:"The table column that contains the time information used create the animation"},"-torque-data-aggregation":{css:"-torque-data-aggregation","default-value":"linear",type:["linear","cumulative"],"default-meaning":"previous values are discarded",doc:"A linear animation will discard previous values while a cumulative animation will accumulate them until it restarts"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};b.exports={version:{latest:d,"2.1.1":d}}},{}],78:[function(a,b,c){"undefined"!=typeof b&&(b.exports.find=function(a,b){for(var c,d=0;d<a.length;d++)if(c=b.call(a,a[d]))return c;return null})},{}],79:[function(a,b,c){(function(b){!function(c){var d=b._||a("underscore");c.Call=function(a,b,c){this.name=a,this.args=b,this.index=c},c.Call.prototype={is:"call",ev:function(a){for(var b=this.args.map(function(b){return b.ev(a)}),e=0;e<b.length;e++)if("undefined"===b[e].is)return{is:"undefined",value:"undefined"};if(this.name in c.functions){if(c.functions[this.name].length<=b.length){var f=c.functions[this.name].apply(c.functions,b);return null===f?(a.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):f}return a.error({message:"incorrect number of arguments for "+this.name+"(). "+c.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var g=c.Reference.mapnikFunctions[this.name];if(void 0===g){var h=d.pairs(c.Reference.mapnikFunctions),i=this.name,j=h.map(function(a){return[a[0],c.Reference.editDistance(i,a[0]),a[1]]}).sort(function(a,b){return a[1]-b[1]});return a.error({message:"unknown function "+this.name+"(), did you mean "+j[0][0]+"("+j[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return g===b.length||Array.isArray(g)&&d.include(g,b.length)||g===-1?(this.args=b,this):(a.error({message:"function "+this.name+"() takes "+g+" arguments and was given "+b.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})},toString:function(a,b){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}}(a("../tree"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../tree":78,underscore:"underscore"}],80:[function(a,b,c){!function(a){a.Color=function(a,b){Array.isArray(a)?this.rgb=a.slice(0,3):6==a.length?this.rgb=a.match(/.{2}/g).map(function(a){return parseInt(a,16)}):this.rgb=a.split("").map(function(a){return parseInt(a+a,16)}),"number"==typeof b?this.alpha=b:4===a.length?this.alpha=a[3]:this.alpha=1},a.Color.prototype={is:"color",ev:function(){return this},toString:function(){return this.alpha<1?"rgba("+this.rgb.map(function(a){return Math.round(a)}).concat(this.alpha).join(", ")+")":"#"+this.rgb.map(function(a){return a=Math.round(a),a=(a>255?255:a<0?0:a).toString(16),1===a.length?"0"+a:a}).join("")},operate:function(b,c,d){var e=[];d instanceof a.Color||(d=d.toColor());for(var f=0;f<3;f++)e[f]=a.operate(c,this.rgb[f],d.rgb[f]);return new a.Color(e)},toHSL:function(){var a,b,c=this.rgb[0]/255,d=this.rgb[1]/255,e=this.rgb[2]/255,f=this.alpha,g=Math.max(c,d,e),h=Math.min(c,d,e),i=(g+h)/2,j=g-h;if(g===h)a=b=0;else{switch(b=i>.5?j/(2-g-h):j/(g+h),g){case c:a=(d-e)/j+(d<e?6:0);break;case d:a=(e-c)/j+2;break;case e:a=(c-d)/j+4}a/=6}return{h:360*a,s:b,l:i,a:f}}}}(a("../tree"))},{"../tree":78}],81:[function(a,b,c){!function(a){a.Comment=function(a,b){this.value=a,this.silent=!!b},a.Comment.prototype={toString:function(a){return"<!--"+this.value+"-->"},ev:function(){return this}}}(a("../tree"))},{"../tree":78}],82:[function(a,b,c){(function(b){!function(c){function d(a){function b(a){return a[1].toUpperCase()}return a.charAt(0).toUpperCase()+a.slice(1).replace(/\-./,b)+"Symbolizer"}function e(a){return a.sort(function(a,b){return a[1]-b[1]}).map(function(a){return a[0]})}var f=a("assert"),g=b._||a("underscore");c.Definition=function(a,b){this.elements=a.elements,f.ok(a.filters instanceof c.Filterset),this.rules=b,this.ruleIndex={};for(var d=0;d<this.rules.length;d++)"zoom"in this.rules[d]&&(this.rules[d]=this.rules[d].clone()),this.rules[d].zoom=a.zoom,this.ruleIndex[this.rules[d].updateID()]=!0;this.filters=a.filters,this.zoom=a.zoom,this.frame_offset=a.frame_offset,this.attachment=a.attachment||"__default__",this.specificity=a.specificity()},c.Definition.prototype.toString=function(){for(var a=this.filters.toString(),b=0;b<this.rules.length;b++)a+="\n    "+this.rules[b];return a},c.Definition.prototype.clone=function(a){a&&f.ok(a instanceof c.Filterset);var b=Object.create(c.Definition.prototype);return b.rules=this.rules.slice(),b.ruleIndex=g.clone(this.ruleIndex),b.filters=a?a:this.filters.clone(),b.attachment=this.attachment,b},c.Definition.prototype.addRules=function(a){for(var b=0,c=0;c<a.length;c++)this.ruleIndex[a[c].id]||(this.rules.push(a[c]),this.ruleIndex[a[c].id]=!0,b++);return b},c.Definition.prototype.appliesTo=function(a,b){for(var c=0,d=this.elements.length;c<d;c++){var e=this.elements[c];if(!(e.wildcard||"class"===e.type&&b[e.clean]||"id"===e.type&&a===e.clean))return!1}return!0},c.Definition.prototype.symbolizersToXML=function(a,b,f){var g=f.toXML(a).join("")+this.filters.toXML(a),h=[],i=[];for(var j in b){i=[];for(var k in b[j])i.push(b[j][k].index);var l=Math.min.apply(Math,i);h.push([j,l])}h=e(h);for(var m=0,n=0;n<h.length;n++){var o=b[h[n]],p=h[n].split("/").pop();if("*"!==p){m++;var q=c.Reference.requiredProperties(p,o);if(q){var r=o[Object.keys(o).shift()];a.error({message:q,index:r.index,filename:r.filename})}var s,t=d(p),u=!0;g+="    <"+t+" ";for(var v in o){"map"===p&&a.error({message:"Map properties are not permitted in other rules",index:o[v].index,filename:o[v].filename});var w=c.Reference.selector(o[v].name);w&&w.serialization&&"content"===w.serialization?(u=!1,s=o[v].ev(a).toXML(a,!0)):w&&w.serialization&&"tag"===w.serialization?(u=!1,s=o[v].ev(a).toXML(a,!0)):g+=o[v].ev(a).toXML(a)+" "}u?g+="/>\n":"undefined"!=typeof s&&(g+=s.indexOf("<")!=-1?">"+s+"</"+t+">\n":"><![CDATA["+s+"]]></"+t+">\n")}}return m&&g?"  <Rule>\n"+g+"  </Rule>\n":""},c.Definition.prototype.collectSymbolizers=function(a,b){for(var c,d={},e=b;e<this.rules.length;e++){c=this.rules[e];var f=c.instance+"/"+c.symbolizer;!(a.current&c.zoom)||f in d&&c.name in d[f]||(a.current&=c.zoom,f in d||(d[f]={}),d[f][c.name]=c)}if(Object.keys(d).length)return a.rule&=a.available&=~a.current,d},c.Definition.prototype.toXML=function(a,b){var d=this.filters.toString();d in b||(b[d]=c.Zoom.all);for(var e,f=c.Zoom.all,g="",h={available:c.Zoom.all},i=0;i<this.rules.length&&f;i++)if(h.rule=this.rules[i].zoom,b[d]&h.rule)for(;h.current=h.rule&f;)if(e=this.collectSymbolizers(h,i)){if(!(b[d]&h.current))continue;g+=this.symbolizersToXML(a,e,(new c.Zoom).setZoom(b[d]&h.current)),b[d]&=~h.current}return g},c.Definition.prototype.toJS=function(a){var b={},d="("+this.zoom+" & (1 << ctx.zoom))",e=this.frame_offset,f=this.filters.toJS(a),h=[d];return f&&h.push(f),e&&h.push('ctx["frame-offset"] === '+e),f=h.join(" && "),g.each(this.rules,function(d){if(!(d instanceof c.Rule))throw new Error("Ruleset not supported");b[d.name]=b[d.name]||[];var e={index:d.index,symbolizer:d.symbolizer};f?e.js="if("+f+"){"+d.value.toJS(a)+"}":e.js=d.value.toJS(a),e.constant="field"!==d.value.ev(a).is,e.filtered=!!f,b[d.name].push(e)}),b}}(a("../tree"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../tree":78,assert:6,underscore:"underscore"}],83:[function(a,b,c){(function(b){!function(c){var d=b._||a("underscore");c.Dimension=function(a,b,c){this.value=parseFloat(a),this.unit=b||null,this.index=c},c.Dimension.prototype={is:"float",physical_units:["m","cm","in","mm","pt","pc"],screen_units:["px","%"],all_units:["m","cm","in","mm","pt","pc","px","%"],densities:{m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},ev:function(a){if(this.unit&&!d.contains(this.all_units,this.unit))return a.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&d.contains(this.physical_units,this.unit)){if(!a.ppi)return a.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*a.ppi,this.unit="px"}return this},round:function(){return this.value=Math.round(this.value),this},toColor:function(){return new c.Color([this.value,this.value,this.value])},round:function(){return this.value=Math.round(this.value),this},toString:function(){return this.value.toString()},operate:function(a,b,d){return"%"===this.unit&&"%"!==d.unit?(a.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===d.unit?"*"===b||"/"===b||"%"===b?(a.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new c.Dimension(c.operate(b,this.value,this.value*d.value*.01),this.unit):new c.Dimension(c.operate(b,this.value,d.value),this.unit||d.unit)}}}(a("../tree"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../tree":78,underscore:"underscore"}],84:[function(a,b,c){!function(a){a.Element=function(a){this.value=a.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),this.value.indexOf("*")!==-1&&(this.type="wildcard")},a.Element.prototype.specificity=function(){return["id"===this.type?1:0,"class"===this.type?1:0]},a.Element.prototype.toString=function(){return this.value}}(a("../tree"))},{"../tree":78}],85:[function(a,b,c){!function(a){a.Expression=function(a){this.value=a},a.Expression.prototype={is:"expression",ev:function(b){return this.value.length>1?new a.Expression(this.value.map(function(a){return a.ev(b)})):this.value[0].ev(b)},toString:function(a){return this.value.map(function(b){return b.toString(a)}).join(" ")}}}(a("../tree"))},{"../tree":78}],86:[function(a,b,c){!function(a){a.Field=function(a){this.value=a||""},a.Field.prototype={is:"field",toString:function(){return"["+this.value+"]"},ev:function(){return this}}}(a("../tree"))},{"../tree":78}],87:[function(a,b,c){!function(a){a.Filter=function(a,b,c,d,e){this.key=a,this.op=b,this.val=c,this.index=d,this.filename=e,this.id=this.key+this.op+this.val};var b={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]};a.Filter.prototype.ev=function(a){return this.key=this.key.ev(a),this.val=this.val.ev(a),this},a.Filter.prototype.toXML=function(c){a.Reference.data.filter&&("keyword"===this.key.is&&-1===a.Reference.data.filter.value.indexOf(this.key.toString())&&c.error({message:this.key.toString()+" is not a valid keyword in a filter expression",index:this.index,filename:this.filename}),"keyword"===this.val.is&&-1===a.Reference.data.filter.value.indexOf(this.val.toString())&&c.error({message:this.val.toString()+" is not a valid keyword in a filter expression",index:this.index,filename:this.filename}));var d=this.key.toString(!1),e=this.val.toString("string"==this.val.is);return("numeric"==b[this.op][1]&&isNaN(e)&&"field"!==this.val.is||"string"==b[this.op][1]&&"'"!=e[0])&&c.error({message:'Cannot use operator "'+this.op+'" with value '+this.val,index:this.index,filename:this.filename}),d+b[this.op][0]+e+(b[this.op][2]||"")},a.Filter.prototype.toString=function(){return"["+this.id+"]"}}(a("../tree"))},{"../tree":78}],88:[function(a,b,c){(function(b){var c=a("../tree"),d=b._||a("underscore");c.Filterset=function(){this.filters={}},c.Filterset.prototype.toXML=function(a){var b=[];for(var c in this.filters)b.push("("+this.filters[c].toXML(a).trim()+")");return b.length?"    <Filter>"+b.join(" and ")+"</Filter>\n":""},c.Filterset.prototype.toString=function(){var a=[];for(var b in this.filters)a.push(this.filters[b].id);return a.sort().join("\t")},c.Filterset.prototype.ev=function(a){for(var b in this.filters)this.filters[b].ev(a);return this},c.Filterset.prototype.clone=function(){var a=new c.Filterset;for(var b in this.filters)a.filters[b]=this.filters[b];return a},c.Filterset.prototype.cloneWith=function(a){var b=[];for(var d in a.filters){var e=this.addable(a.filters[d]);if(e===!1)return!1;e===!0&&b.push(a.filters[d])}if(!b.length)return null;var f=new c.Filterset;for(d in this.filters)f.filters[d]=this.filters[d];for(;d=b.shift();)f.add(d);return f},c.Filterset.prototype.toJS=function(a){var b={"=":"==="};return d.map(this.filters,function(a){var c=a.op;c in b&&(c=b[c]);var d=a.val;void 0!==a._val&&(d=a._val.toString(!0));var e="data";return"=~"===c?"("+e+"['"+a.key.value+"'] + '').match("+("string"===d.is?"'"+d.toString().replace(/'/g,"\\'")+"'":d)+")":e+"['"+a.key.value+"'] "+c+" "+("string"===d.is?"'"+d.toString().replace(/'/g,"\\'")+"'":d)}).join(" && ")},c.Filterset.prototype.addable=function(a){var b=a.key.toString(),c=a.val.toString();switch(c.match(/^[0-9]+(\.[0-9]*)?$/)&&(c=parseFloat(c)),a.op){case"=":return void 0!==this.filters[b+"="]?this.filters[b+"="].val.toString()==c&&null:void 0===this.filters[b+"!="+c]&&(!(void 0!==this.filters[b+">"]&&this.filters[b+">"].val>=c)&&(!(void 0!==this.filters[b+"<"]&&this.filters[b+"<"].val<=c)&&(!(void 0!==this.filters[b+">="]&&this.filters[b+">="].val>c)&&!(void 0!==this.filters[b+"<="]&&this.filters[b+"<="].val<c))));case"=~":return!0;case"!=":return void 0!==this.filters[b+"="]?this.filters[b+"="].val!=c&&null:void 0!==this.filters[b+"!="+c]?null:void 0!==this.filters[b+">"]&&this.filters[b+">"].val>=c?null:void 0!==this.filters[b+"<"]&&this.filters[b+"<"].val<=c?null:void 0!==this.filters[b+">="]&&this.filters[b+">="].val>c?null:!(void 0!==this.filters[b+"<="]&&this.filters[b+"<="].val<c)||null;case">":return b+"="in this.filters?!(this.filters[b+"="].val<=c)&&null:!(void 0!==this.filters[b+"<"]&&this.filters[b+"<"].val<=c)&&(!(void 0!==this.filters[b+"<="]&&this.filters[b+"<="].val<=c)&&(void 0!==this.filters[b+">"]&&this.filters[b+">"].val>=c?null:!(void 0!==this.filters[b+">="]&&this.filters[b+">="].val>c)||null));case">=":return void 0!==this.filters[b+"="]?!(this.filters[b+"="].val<c)&&null:!(void 0!==this.filters[b+"<"]&&this.filters[b+"<"].val<=c)&&(!(void 0!==this.filters[b+"<="]&&this.filters[b+"<="].val<c)&&(void 0!==this.filters[b+">"]&&this.filters[b+">"].val>=c?null:!(void 0!==this.filters[b+">="]&&this.filters[b+">="].val>=c)||null));case"<":return void 0!==this.filters[b+"="]?!(this.filters[b+"="].val>=c)&&null:!(void 0!==this.filters[b+">"]&&this.filters[b+">"].val>=c)&&(!(void 0!==this.filters[b+">="]&&this.filters[b+">="].val>=c)&&(void 0!==this.filters[b+"<"]&&this.filters[b+"<"].val<=c?null:!(void 0!==this.filters[b+"<="]&&this.filters[b+"<="].val<c)||null));case"<=":return void 0!==this.filters[b+"="]?!(this.filters[b+"="].val>c)&&null:!(void 0!==this.filters[b+">"]&&this.filters[b+">"].val>=c)&&(!(void 0!==this.filters[b+">="]&&this.filters[b+">="].val>c)&&(void 0!==this.filters[b+"<"]&&this.filters[b+"<"].val<=c?null:!(void 0!==this.filters[b+"<="]&&this.filters[b+"<="].val<=c)||null))}},c.Filterset.prototype.conflict=function(a){var b=a.key.toString(),c=a.val.toString();return isNaN(parseFloat(c))||(c=parseFloat(c)),("="===a.op&&void 0!==this.filters[b+"="]&&c!=this.filters[b+"="].val.toString()||"!="===a.op&&void 0!==this.filters[b+"="]&&c==this.filters[b+"="].val.toString()||"="===a.op&&void 0!==this.filters[b+"!="]&&c==this.filters[b+"!="].val.toString())&&a.toString()+" added to "+this.toString()+" produces an invalid filter"},c.Filterset.prototype.add=function(a,b){var c,d=a.key.toString(),e=a.op,f=this.conflict(a);if(f)return f;if("="===e){for(var g in this.filters)this.filters[g].key==d&&delete this.filters[g];this.filters[d+"="]=a}else if("!="===e)this.filters[d+"!="+a.val]=a;else if("=~"===e)this.filters[d+"=~"+a.val]=a;else if(">"===e){for(var h in this.filters)this.filters[h].key==d&&this.filters[h].val<=a.val&&delete this.filters[h];this.filters[d+">"]=a}else if(">="===e){for(var i in this.filters)c=+this.filters[i].val.toString(),this.filters[i].key==d&&c<a.val&&delete this.filters[i];void 0!==this.filters[d+"!="+a.val]?(delete this.filters[d+"!="+a.val],a.op=">",this.filters[d+">"]=a):this.filters[d+">="]=a}else if("<"===e){for(var j in this.filters)c=+this.filters[j].val.toString(),this.filters[j].key==d&&c>=a.val&&delete this.filters[j];this.filters[d+"<"]=a}else if("<="===e){for(var k in this.filters)c=+this.filters[k].val.toString(),this.filters[k].key==d&&c>a.val&&delete this.filters[k];void 0!==this.filters[d+"!="+a.val]?(delete this.filters[d+"!="+a.val],a.op="<",this.filters[d+"<"]=a):this.filters[d+"<="]=a}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../tree":78,underscore:"underscore"}],89:[function(a,b,c){!function(a){a._getFontSet=function(b,c){var d=c.join("");if(b._fontMap&&b._fontMap[d])return b._fontMap[d];var e=new a.FontSet(b,c);return b.effects.push(e),b._fontMap||(b._fontMap={}),b._fontMap[d]=e,e},a.FontSet=function(a,b){this.fonts=b,this.name="fontset-"+a.effects.length},a.FontSet.prototype.toXML=function(a){return'<FontSet name="'+this.name+'">\n'+this.fonts.map(function(a){return'  <Font face-name="'+a+'"/>'}).join("\n")+"\n</FontSet>"}}(a("../tree"))},{"../tree":78}],90:[function(a,b,c){var d=a("../tree");d.FrameOffset=function(a,b,c){if(b=parseInt(b,10),b>d.FrameOffset.max||b<=0)throw{message:"Only frame-offset levels between 1 and "+d.FrameOffset.max+" supported.",index:c};if("="!==a)throw{message:"only = operator is supported for frame-offset",index:c};return b},d.FrameOffset.max=32,d.FrameOffset.none=0},{"../tree":78}],91:[function(a,b,c){!function(a){a.ImageFilter=function(a,b){this.filter=a,this.args=b||null},a.ImageFilter.prototype={is:"imagefilter",ev:function(){return this},toString:function(){return this.args?this.filter+"("+this.args.join(",")+")":this.filter}}}(a("../tree"))},{"../tree":78}],92:[function(a,b,c){!function(a){a.Invalid=function(a,b,c){this.chunk=a,this.index=b,this.type="syntax",this.message=c||"Invalid code: "+this.chunk},a.Invalid.prototype.is="invalid",a.Invalid.prototype.ev=function(a){return a.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}(a("../tree"))},{"../tree":78}],93:[function(a,b,c){!function(a){a.Keyword=function(a){this.value=a;var b={transparent:"color",true:"boolean",false:"boolean"};this.is=b[a]?b[a]:"keyword"},a.Keyword.prototype={ev:function(){return this},toString:function(){return this.value}}}(a("../tree"))},{"../tree":78}],94:[function(a,b,c){!function(a){a.LayerXML=function(b,c){var d=[];for(var e in b.Datasource)d.push('<Parameter name="'+e+'"><![CDATA['+b.Datasource[e]+"]]></Parameter>");var f="";for(var g in b.properties)f+="minzoom"===g?'  maxzoom="'+a.Zoom.ranges[b.properties[g]]+'"\n':"maxzoom"===g?'  minzoom="'+a.Zoom.ranges[b.properties[g]+1]+'"\n':"  "+g+'="'+b.properties[g]+'"\n';return'<Layer name="'+b.name+'"\n'+f+("undefined"==typeof b.status?"":'  status="'+b.status+'"\n')+("undefined"==typeof b.srs?"":'  srs="'+b.srs+'"')+">\n    "+c.reverse().map(function(a){return"<StyleName>"+a+"</StyleName>"}).join("\n    ")+(d.length?"\n    <Datasource>\n       "+d.join("\n       ")+"\n    </Datasource>\n":"")+"  </Layer>\n"}}(a("../tree"))},{"../tree":78}],95:[function(a,b,c){!function(a){a.Literal=function(a){this.value=a||"",this.is="field"},a.Literal.prototype={toString:function(){return this.value},ev:function(){return this}}}(a("../tree"))},{"../tree":78}],96:[function(a,b,c){!function(a){a.Operation=function(a,b,c){this.op=a.trim(),this.operands=b,this.index=c},a.Operation.prototype.is="operation",a.Operation.prototype.ev=function(b){var c,d=this.operands[0].ev(b),e=this.operands[1].ev(b);return"undefined"===d.is||"undefined"===e.is?{is:"undefined",value:"undefined"}:(d instanceof a.Dimension&&e instanceof a.Color&&("*"===this.op||"+"===this.op?(c=e,e=d,d=c):b.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),d instanceof a.Quoted&&e instanceof a.Quoted&&"+"!==this.op?(b.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):d instanceof a.Field||e instanceof a.Field||d instanceof a.Literal||e instanceof a.Literal?"color"===d.is||"color"===e.is?(b.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new a.Literal(d.ev(b).toString(!0)+this.op+e.ev(b).toString(!0)):void 0===d.operate?(b.error({message:"Cannot do math with type "+d.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):d.operate(b,this.op,e))},a.operate=function(a,b,c){switch(a){case"+":return b+c;case"-":return b-c;case"*":return b*c;case"%":return b%c;case"/":return b/c}}}(a("../tree"))},{"../tree":78}],97:[function(a,b,c){!function(a){a.Quoted=function(a){this.value=a||""},a.Quoted.prototype={is:"string",toString:function(a){var b=this.value.replace(/&/g,"&amp;"),c=b.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return a===!0?"'"+c+"'":b},ev:function(){return this},operate:function(b,c,d){return new a.Quoted(a.operate(c,this.toString(),d.toString(this.contains_field)))}}}(a("../tree"))},{"../tree":78}],98:[function(a,b,c){(function(b){!function(c){function d(a){var b={};for(var c in a.symbolizers)for(var d in a.symbolizers[c])a.symbolizers[c][d].hasOwnProperty("css")&&(b[a.symbolizers[c][d].css]=[a.symbolizers[c][d],c,d]);return b}function e(a){var b={};for(var c in a.symbolizers)for(var d in a.symbolizers[c])if("functions"===a.symbolizers[c][d].type)for(var e=0;e<a.symbolizers[c][d].functions.length;e++){var f=a.symbolizers[c][d].functions[e];b[f[0]]=f[1]}return b}function f(a){var b={};for(var c in a.symbolizers){b[c]=[];for(var d in a.symbolizers[c])a.symbolizers[c][d].required&&b[c].push(a.symbolizers[c][d].css)}return b}function g(a,b){if("string"===a.value[0].is)return!0;for(var c in a.value)for(var d in a.value[c].value){if("call"!==a.value[c].value[d].is)return!1;var e=i.find(j.selector(b).functions,function(b){return b[0]==a.value[c].value[d].name});if(!(e&&e[1]==-1||e&&e[1]===a.value[c].value[d].args.length))return!1}return!0}function h(a,b){return"object"==typeof j.selector(b).type?j.selector(b).type.indexOf(a.value[0].value)!==-1:"string"===j.selector(b).type}var i=b._||a("underscore"),j={};j.setData=function(a){j.data=a,j.selector_cache=d(a),j.mapnikFunctions=e(a),j.mapnikFunctions.matrix=[6],j.mapnikFunctions.translate=[1,2],j.mapnikFunctions.scale=[1,2],j.mapnikFunctions.rotate=[1,3],j.mapnikFunctions.skewX=[1],j.mapnikFunctions.skewY=[1],j.required_cache=f(a)},j.setVersion=function(b){var c=a("mapnik-reference");return!!c.version.hasOwnProperty(b)&&(j.setData(c.version[b]),!0)},j.selectorData=function(a,b){if(j.selector_cache[a])return j.selector_cache[a][b]},j.validSelector=function(a){return!!j.selector_cache[a]},j.selectorName=function(a){return j.selectorData(a,2)},j.selector=function(a){return j.selectorData(a,0)},j.symbolizer=function(a){return j.selectorData(a,1)},j.requiredProperties=function(a,b){var c=j.required_cache[a];for(var d in c)if(!(c[d]in b))return"Property "+c[d]+" required for defining "+a+" styles."},j._validateValue={font:function(a,b){return!a.validation_data||!a.validation_data.fonts||a.validation_data.fonts.indexOf(b)!=-1}},j.isFont=function(a){return"font"==j.selector(a).validate},j.editDistance=function(a,b){if(0===a.length)return b.length;if(0===b.length)return a.length;for(var c=[],d=0;d<=b.length;d++)c[d]=[d];for(var e=0;e<=a.length;e++)c[0][e]=e;for(d=1;d<=b.length;d++)for(e=1;e<=a.length;e++)b.charAt(d-1)==a.charAt(e-1)?c[d][e]=c[d-1][e-1]:c[d][e]=Math.min(c[d-1][e-1]+1,Math.min(c[d][e-1]+1,c[d-1][e]+1));return c[b.length][a.length]},j.validValue=function(a,b,c){var d;if(j.selector(b)){if("keyword"==c.value[0].is)return h(c,b);if("undefined"==c.value[0].is)return!0;if("numbers"==j.selector(b).type){for(d in c.value)if("float"!==c.value[d].is)return!1;return!0}if("tags"==j.selector(b).type){if(!c.value)return!1;if(!c.value[0].value)return"tag"===c.value[0].is;for(d=0;d<c.value[0].value.length;d++)if("tag"!==c.value[0].value[d].is)return!1;return!0}if("functions"==j.selector(b).type)return g(c,b);if("unsigned"===j.selector(b).type)return"float"===c.value[0].is&&(c.value[0].round(),!0);if(j.selector(b).expression)return!0;if(j.selector(b).validate){var e=!1;for(d=0;d<c.value.length;d++)if(j.selector(b).type==c.value[d].is&&j._validateValue[j.selector(b).validate](a,c.value[d].value))return!0;return e}return j.selector(b).type==c.value[0].is}return!1},c.Reference=j}(a("../tree"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../tree":78,"mapnik-reference":190,underscore:"underscore"}],99:[function(a,b,c){!function(a){function b(b){return Object.keys(a.Reference.selector_cache).map(function(c){return[c,a.Reference.editDistance(b,c)]}).sort(function(a,b){return a[1]-b[1]})}a.Rule=function(b,c,d,e){var f=b.split("/");this.name=f.pop(),this.instance=f.length?f[0]:"__default__",this.value=c instanceof a.Value?c:new a.Value([c]),this.index=d,this.symbolizer=a.Reference.symbolizer(this.name),this.filename=e,this.variable="@"===b.charAt(0)},a.Rule.prototype.is="rule",a.Rule.prototype.clone=function(){var b=Object.create(a.Rule.prototype);return b.name=this.name,b.value=this.value,b.index=this.index,b.instance=this.instance,b.symbolizer=this.symbolizer,b.filename=this.filename,b.variable=this.variable,b},a.Rule.prototype.updateID=function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name},a.Rule.prototype.toString=function(){return"["+a.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value;
},a.Rule.prototype.toXML=function(c,d,e,f){if(!a.Reference.validSelector(this.name)){var g=b(this.name),h="";return g[0][1]<3&&(h=". Did you mean "+g[0][0]+"?"),c.error({message:"Unrecognized rule: "+this.name+h,index:this.index,type:"syntax",filename:this.filename})}if(this.value instanceof a.Value&&!a.Reference.validValue(c,this.name,this.value)){if(a.Reference.selector(this.name)){var i;return i=a.Reference.selector(this.name).validate?a.Reference.selector(this.name).validate:"object"==typeof a.Reference.selector(this.name).type?"keyword (options: "+a.Reference.selector(this.name).type.join(", ")+")":a.Reference.selector(this.name).type,c.error({message:"Invalid value for "+this.name+", the type "+i+" is expected. "+this.value+" (of type "+this.value.value[0].is+")  was given.",index:this.index,type:"syntax",filename:this.filename})}return c.error({message:"Unrecognized property: "+this.name,index:this.index,type:"syntax",filename:this.filename})}if(this.variable)return"";if(a.Reference.isFont(this.name)&&this.value.value.length>1){var j=a._getFontSet(c,this.value.value);return'fontset-name="'+j.name+'"'}return d?this.value.toString(c,this.name,e):a.Reference.selectorName(this.name)+'="'+this.value.toString(c,this.name)+'"'},a.Rule.prototype.ev=function(b){return new a.Rule(this.name,this.value.ev(b),this.index,this.filename)}}(a("../tree"))},{"../tree":78}],100:[function(a,b,c){!function(a){a.Ruleset=function(a,b){this.selectors=a,this.rules=b,this._lookups={}},a.Ruleset.prototype={is:"ruleset",ev:function(b){var c,d=new a.Ruleset(this.selectors,this.rules.slice(0));for(d.root=this.root,b.frames.unshift(d),c=0,rule;c<d.rules.length;c++)rule=d.rules[c],d.rules[c]=rule.ev?rule.ev(b):rule;return b.frames.shift(),d},match:function(a){return!a||0===a.length},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(b,c){return c instanceof a.Rule&&c.variable===!0&&(b[c.name]=c),b},{})},variable:function(a){return this.variables()[a]},rulesets:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(b){return b instanceof a.Ruleset})},find:function(b,c){c=c||this;var d,e=[],f=b.toString();return f in this._lookups?this._lookups[f]:(this.rulesets().forEach(function(f){if(f!==c)for(var g=0;g<f.selectors.length;g++)if(d=b.match(f.selectors[g])){b.elements.length>1?Array.prototype.push.apply(e,f.find(new a.Selector(null,null,null,b.elements.slice(1)),c)):e.push(f);break}}),this._lookups[f]=e)},evZooms:function(b){for(var c=0;c<this.selectors.length;c++){for(var d=a.Zoom.all,e=0;e<this.selectors[c].zoom.length;e++)d&=this.selectors[c].zoom[e].ev(b).zoom;this.selectors[c].zoom=d}},flatten:function(b,c,d){var e,f,g=[];for(0===this.selectors.length&&(d.frames=d.frames.concat(this.rules)),this.evZooms(d),e=0;e<this.selectors.length;e++){var h=this.selectors[e];if(h.filters)if(c.length)for(f=0;f<c.length;f++){var i=c[f],j=i.filters.cloneWith(h.filters);if(null===j){if(i.zoom===(i.zoom&h.zoom)&&i.frame_offset===h.frame_offset&&i.attachment===h.attachment&&i.elements.join()===h.elements.join()){g.push(i);continue}j=i.filters}else if(!j)continue;var k=Object.create(a.Selector.prototype);k.filters=j,k.zoom=i.zoom&h.zoom,k.frame_offset=h.frame_offset,k.elements=i.elements.concat(h.elements),i.attachment&&h.attachment?k.attachment=i.attachment+"/"+h.attachment:k.attachment=h.attachment||i.attachment,k.conditions=i.conditions+h.conditions,k.index=h.index,g.push(k)}else g.push(h)}var l=[];for(e=0;e<this.rules.length;e++){var m=this.rules[e];m instanceof a.Ruleset?m.flatten(b,g,d):m instanceof a.Rule?l.push(m):m instanceof a.Invalid&&d.error(m)}var n=!!l.length&&l[0].index;for(e=0;e<g.length;e++)n!==!1&&(g[e].index=n),b.push(new a.Definition(g[e],l.slice()));return b}}}(a("../tree"))},{"../tree":78}],101:[function(a,b,c){!function(a){a.Selector=function(b,c,d,e,f,g,h){this.elements=e||[],this.attachment=f,this.filters=b||{},this.frame_offset=d,this.zoom="undefined"!=typeof c?c:a.Zoom.all,this.conditions=g,this.index=h},a.Selector.prototype.specificity=function(){return this.elements.reduce(function(a,b){var c=b.specificity();return a[0]+=c[0],a[1]+=c[1],a},[0,0,this.conditions,this.index])}}(a("../tree"))},{"../tree":78}],102:[function(a,b,c){(function(b){!function(c){var d=b._||a("underscore");c.StyleXML=function(a,b,c,e){for(var f={},g=[],h=[],i=[],j=[],k=[],l=0;l<c.length;l++)for(var m=0;m<c[l].rules.length;m++)"image-filters"===c[l].rules[m].name&&g.push(c[l].rules[m]),"image-filters-inflate"===c[l].rules[m].name&&h.push(c[l].rules[m]),"direct-image-filters"===c[l].rules[m].name&&i.push(c[l].rules[m]),"comp-op"===c[l].rules[m].name&&j.push(c[l].rules[m]),"opacity"===c[l].rules[m].name&&k.push(c[l].rules[m]);var n=c.map(function(a){return a.toXML(e,f)}),o="";g.length&&(o+=' image-filters="'+d.chain(g).uniq(function(a){return a.id}).map(function(a){return a.ev(e).toXML(e,!0,",","image-filter")}).value().join(",")+'"'),h.length&&(o+=' image-filters-inflate="'+h[0].value.ev(e).toString()+'"'),i.length&&(o+=' direct-image-filters="'+d.chain(i).uniq(function(a){return a.id}).map(function(a){return a.ev(e).toXML(e,!0,",","direct-image-filter")}).value().join(",")+'"'),j.length&&"src-over"!=j[0].value.ev(e).value&&(o+=' comp-op="'+j[0].value.ev(e).toString()+'"'),k.length&&1!=k[0].value.ev(e).value&&(o+=' opacity="'+k[0].value.ev(e).toString()+'"');var p=n.join("");return o||p?'<Style name="'+a+'" filter-mode="first"'+o+">\n"+p+"</Style>":""}}(a("../tree"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../tree":78,underscore:"underscore"}],103:[function(a,b,c){!function(a){a.URL=function(a,b){this.value=a,this.paths=b},a.URL.prototype={is:"uri",toString:function(){return this.value.toString()},ev:function(b){return new a.URL(this.value.ev(b),this.paths)}}}(a("../tree"))},{"../tree":78}],104:[function(a,b,c){!function(a){a.Value=function(a){this.value=a},a.Value.prototype={is:"value",ev:function(b){return 1===this.value.length?this.value[0].ev(b):new a.Value(this.value.map(function(a){return a.ev(b)}))},toString:function(a,b,c,d){return this.value.map(function(b){return b.toString(a,d)}).join(c||", ")},clone:function(){var b=Object.create(a.Value.prototype);return Array.isArray(b)?b.value=this.value.slice():b.value=this.value,b.is=this.is,b},toJS:function(a){var b=this.ev(a),c=b.toString();return"color"===b.is||"uri"===b.is||"string"===b.is||"keyword"===b.is?c="'"+c+"'":"field"===b.is?c=c.replace(/\[([^\]]*)\]/g,function(a){return a.replace(/\[(.*)\]/g,"data['$1']")}):"call"===b.is&&(c=JSON.stringify({name:b.name,args:b.args})),"_value = "+c+";"}}}(a("../tree"))},{"../tree":78}],105:[function(a,b,c){!function(a){a.Variable=function(a,b,c){this.name=a,this.index=b,this.filename=c},a.Variable.prototype={is:"variable",toString:function(){return this.name},ev:function(a){this.name;if(this._css)return this._css;var b=a.frames.filter(function(a){return a.name==this.name}.bind(this));return b.length?b[0].value.ev(a):(a.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}}(a("../tree"))},{"../tree":78}],106:[function(a,b,c){var d=a("../tree");d.Zoom=function(a,b,c){this.op=a,this.value=b,this.index=c},d.Zoom.prototype.setZoom=function(a){return this.zoom=a,this},d.Zoom.prototype.ev=function(a){var b=0,c=1/0,e=parseInt(this.value.ev(a).toString(),10),f=0;switch((e>d.Zoom.maxZoom||e<0)&&a.error({message:"Only zoom levels between 0 and "+d.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom=1<<e,this;case">":b=e+1;break;case">=":b=e;break;case"<":c=e-1;break;case"<=":c=e}for(var g=0;g<=d.Zoom.maxZoom;g++)g>=b&&g<=c&&(f|=1<<g);return this.zoom=f,this},d.Zoom.prototype.toString=function(){return this.zoom},d.Zoom.all=8388607,d.Zoom.maxZoom=22,d.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100},d.Zoom.prototype.toXML=function(){var a=[];if(this.zoom!=d.Zoom.all){for(var b=null,c=null,e=0;e<=d.Zoom.maxZoom;e++)this.zoom&1<<e&&(null===b&&(b=e),c=e);b>0&&a.push("    <MaxScaleDenominator>"+d.Zoom.ranges[b]+"</MaxScaleDenominator>\n"),c<22&&a.push("    <MinScaleDenominator>"+d.Zoom.ranges[c+1]+"</MinScaleDenominator>\n")}return a},d.Zoom.prototype.toString=function(){for(var a="",b=0;b<=d.Zoom.maxZoom;b++)a+=this.zoom&1<<b?"X":".";return a}},{"../tree":78}],107:[function(a,b,c){b.exports={_args:[[{raw:"carto@git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",scope:null,escapedName:"carto",name:"carto",rawSpec:"git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",spec:"git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",type:"hosted",hosted:{type:"github",ssh:"git@github.com:cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",sshUrl:"git+ssh://git@github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",httpsUrl:"git+https://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",gitUrl:"git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",shortcut:"github:cartodb/carto#f4a2605a231ef96046075a396670a6fdf89fc756",directUrl:"https://raw.githubusercontent.com/cartodb/carto/f4a2605a231ef96046075a396670a6fdf89fc756/package.json"}},"/opt/carto/builder/embedded/cartodb-4.1.0.1"]],_from:"cartodb/carto#master",_id:"carto@0.15.1-cdb3",_inCache:!0,_location:"/carto",_phantomChildren:{},_requested:{raw:"carto@git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",scope:null,escapedName:"carto",name:"carto",rawSpec:"git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",spec:"git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",type:"hosted",hosted:{type:"github",ssh:"git@github.com:cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",sshUrl:"git+ssh://git@github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",httpsUrl:"git+https://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",gitUrl:"git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",shortcut:"github:cartodb/carto#f4a2605a231ef96046075a396670a6fdf89fc756",directUrl:"https://raw.githubusercontent.com/cartodb/carto/f4a2605a231ef96046075a396670a6fdf89fc756/package.json"}},_requiredBy:["/","/cartodb.js","/tangram-cartocss","/torque.js"],_resolved:"git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",_shasum:"03c1f549cd65a7f0322d3fc941f00675026ab48a",_shrinkwrap:null,_spec:"carto@git://github.com/cartodb/carto.git#f4a2605a231ef96046075a396670a6fdf89fc756",_where:"/opt/carto/builder/embedded/cartodb-4.1.0.1",author:{name:"CartoDB",url:"http://cartodb.com/"},bin:{carto:"./bin/carto"},bugs:{url:"https://github.com/cartodb/carto/issues"},contributors:[{name:"Tom MacWright",email:"macwright@gmail.com"},{name:"Konstantin Käfer"},{name:"Alexis Sellier",email:"self@cloudhead.net"},{name:"Raul Ochoa",email:"rochoa@cartodb.com"},{name:"Javi Santana",email:"jsantana@cartodb.com"}],dependencies:{"mapnik-reference":"~6.0.2",optimist:"~0.6.0",underscore:"1.8.3"},description:"CartoCSS Stylesheet Compiler",devDependencies:{browserify:"~7.0.0",coveralls:"~2.10.1",istanbul:"~0.2.14",jshint:"0.2.x",mocha:"1.12.x",sax:"0.1.x","uglify-js":"1.3.3"},engines:{node:">=0.4.x"},gitHead:"f4a2605a231ef96046075a396670a6fdf89fc756",homepage:"https://github.com/cartodb/carto#readme",keywords:["maps","css","stylesheets"],licenses:[{type:"Apache"}],main:"./lib/carto/index",man:["./man/carto.1"],name:"carto",optionalDependencies:{},readme:"# CartoCSS\n\n[![Build Status](https://travis-ci.org/CartoDB/carto.png?branch=master)](https://travis-ci.org/CartoDB/carto)\n\nIs as stylesheet renderer for javascript, It's an evolution of the Mapnik renderer from Mapbox.\nPlease, see original [Mapbox repo](http://github.com/mapbox/carto) for more information and credits\n\n## Quick Start\n\n```javascript\n// shader is a CartoCSS object\n\nvar cartocss = [\n    '#layer {',\n    ' marker-width: [property]',\n    ' marker-fill: red',\n    '}'\n].join('')\nvar shader = new carto.RendererJS().render(cartocss);\nvar layers = shader.getLayers()\nfor (var i = 0; i < layers.length; ++i) {\n    var layer = layers[i];\n    console.log(\"layer name: \", layer.fullName())\n    console.log(\"- frames: \", layer.frames())\n    console.log(\"- attachment: \", layer.attachment())\n\n    var layerShader = layer.getStyle({ property: 1 }, { zoom: 10 })\n    console.log(layerShader['marker-width']) // 1\n    console.log(layerShader['marker-fill']) // #FF0000\n}\n\n```\n\n# API\n\n## RendererJS\n\n### render(cartocss)\n\n## CartoCSS\n\ncompiled cartocss object\n\n### getLayers\n\nreturn the layers, an array of ``CartoCSS.Layer`` object\n\n### getDefault\n\nreturn the default layer (``CartoCSS.Layer``), usually the Map layer\n\n\n### findLayer(where)\n\nfind a layer using where object.\n\n```\nshader.findLayer({ name: 'test' })\n```\n\n## CartoCSS.Layer\n\n### getStyle(props, context)\n\nreturn the evaluated style:\n    - props: object containing properties needed to render the style. If the cartocss style uses\n      some variables they should be passed in this object\n    - context: rendering context variables like ``zoom`` or animation ``frame``\n\n\n\n\n\n\n\n\n\n\n## Reference Documentation\n\n* [mapbox.com/carto](http://mapbox.com/carto/)\n\n\n",readmeFilename:"README.md",repository:{type:"git",url:"git+ssh://git@github.com/cartodb/carto.git"},scripts:{coverage:"istanbul cover ./node_modules/.bin/_mocha && coveralls < ./coverage/lcov.info",pretest:"npm install",test:"mocha -R spec"},url:"https://github.com/cartodb/carto",version:"0.15.1-cdb3"}},{}],108:[function(a,b,c){!function(){var c={Burg:{2:["#ffc6c4","#672044"],3:["#ffc6c4","#cc607d","#672044"],4:["#ffc6c4","#e38191","#ad466c","#672044"],5:["#ffc6c4","#ee919b","#cc607d","#9e3963","#672044"],6:["#ffc6c4","#f29ca3","#da7489","#b95073","#93345d","#672044"],7:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],tags:["quantitative"]},BurgYl:{2:["#fbe6c5","#70284a"],3:["#fbe6c5","#dc7176","#70284a"],4:["#fbe6c5","#ee8a82","#c8586c","#70284a"],5:["#fbe6c5","#f2a28a","#dc7176","#b24b65","#70284a"],6:["#fbe6c5","#f4b191","#e7807d","#d06270","#a44360","#70284a"],7:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],tags:["quantitative"]},RedOr:{2:["#f6d2a9","#b13f64"],3:["#f6d2a9","#ea8171","#b13f64"],4:["#f6d2a9","#f19c7c","#dd686c","#b13f64"],5:["#f6d2a9","#f3aa84","#ea8171","#d55d6a","#b13f64"],6:["#f6d2a9","#f4b28a","#ef9177","#e3726d","#cf5669","#b13f64"],7:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],tags:["quantitative"]},OrYel:{2:["#ecda9a","#ee4d5a"],3:["#ecda9a","#f7945d","#ee4d5a"],4:["#ecda9a","#f3ad6a","#f97b57","#ee4d5a"],5:["#ecda9a","#f1b973","#f7945d","#f86f56","#ee4d5a"],6:["#ecda9a","#f0c079","#f5a363","#f98558","#f76856","#ee4d5a"],7:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],tags:["quantitative"]},Peach:{2:["#fde0c5","#eb4a40"],3:["#fde0c5","#f59e72","#eb4a40"],4:["#fde0c5","#f8b58b","#f2855d","#eb4a40"],5:["#fde0c5","#f9c098","#f59e72","#f17854","#eb4a40"],6:["#fde0c5","#fac7a1","#f7ac80","#f38f65","#f0704f","#eb4a40"],7:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],tags:["quantitative"]},PinkYl:{2:["#fef6b5","#e15383"],3:["#fef6b5","#ffa679","#e15383"],4:["#fef6b5","#ffc285","#fa8a76","#e15383"],5:["#fef6b5","#ffd08e","#ffa679","#f67b77","#e15383"],6:["#fef6b5","#ffd795","#ffb77f","#fd9576","#f37378","#e15383"],7:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],tags:["quantitative"]},Mint:{2:["#e4f1e1","#0d585f"],3:["#e4f1e1","#63a6a0","#0d585f"],4:["#e4f1e1","#89c0b6","#448c8a","#0d585f"],5:["#E4F1E1","#9CCDC1","#63A6A0","#337F7F","#0D585F"],6:["#e4f1e1","#abd4c7","#7ab5ad","#509693","#2c7778","#0d585f"],7:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],tags:["quantitative"]},BluGrn:{2:["#c4e6c3","#1d4f60"],3:["#c4e6c3","#4da284","#1d4f60"],4:["#c4e6c3","#6dbc90","#36877a","#1d4f60"],5:["#c4e6c3","#80c799","#4da284","#2d7974","#1d4f60"],6:["#c4e6c3","#8dce9f","#5fb28b","#3e927e","#297071","#1d4f60"],7:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],tags:["quantitative"]},DarkMint:{2:["#d2fbd4","#123f5a"],3:["#d2fbd4","#559c9e","#123f5a"],4:["#d2fbd4","#7bbcb0","#3a7c89","#123f5a"],5:["#d2fbd4","#8eccb9","#559c9e","#2b6c7f","#123f5a"],6:["#d2fbd4","#9cd5be","#6cafa9","#458892","#266377","#123f5a"],7:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],tags:["quantitative"]},Emrld:{2:["#d3f2a3","#074050"],3:["#d3f2a3","#4c9b82","#074050"],4:["#d3f2a3","#6cc08b","#217a79","#074050"],5:["#d3f2a3","#82d091","#4c9b82","#19696f","#074050"],6:["#d3f2a3","#8fda94","#60b187","#35877d","#145f69","#074050"],7:["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],tags:["quantitative"]},ag_GrnYl:{2:["#245668","#EDEF5D"],3:["#245668","#39AB7E","#EDEF5D"],4:["#245668","#0D8F81","#6EC574","#EDEF5D"],5:["#245668","#04817E","#39AB7E","#8BD16D","#EDEF5D"],6:["#245668","#09787C","#1D9A81","#58BB79","#9DD869","#EDEF5D"],7:["#245668","#0F7279","#0D8F81","#39AB7E","#6EC574","#A9DC67","#EDEF5D"],tags:["aggregation"]},BluYl:{2:["#f7feae","#045275"],3:["#f7feae","#46aea0","#045275"],4:["#f7feae","#7ccba2","#089099","#045275"],5:["#f7feae","#9bd8a4","#46aea0","#058092","#045275"],6:["#f7feae","#ace1a4","#68bfa1","#2a9c9c","#02778e","#045275"],7:["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],tags:["quantitative"]},Teal:{2:["#d1eeea","#2a5674"],3:["#d1eeea","#68abb8","#2a5674"],4:["#d1eeea","#85c4c9","#4f90a6","#2a5674"],5:["#d1eeea","#96d0d1","#68abb8","#45829b","#2a5674"],6:["#d1eeea","#a1d7d6","#79bbc3","#599bae","#3f7994","#2a5674"],7:["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],tags:["quantitative"]},TealGrn:{2:["#b0f2bc","#257d98"],3:["#b0f2bc","#4cc8a3","#257d98"],4:["#b0f2bc","#67dba5","#38b2a3","#257d98"],5:["#b0f2bc","#77e2a8","#4cc8a3","#31a6a2","#257d98"],6:["#b0f2bc","#82e6aa","#5bd4a4","#3fbba3","#2e9ea1","#257d98"],7:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],tags:["quantitative"]},Purp:{2:["#f3e0f7","#63589f"],3:["#f3e0f7","#b998dd","#63589f"],4:["#f3e0f7","#d1afe8","#9f82ce","#63589f"],5:["#f3e0f7","#dbbaed","#b998dd","#9178c4","#63589f"],6:["#f3e0f7","#e0c2ef","#c8a5e4","#aa8bd4","#8871be","#63589f"],7:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],tags:["quantitative"]},PurpOr:{3:["#f9ddda","#ce78b3","#573b88"],4:["#f9ddda","#e597b9","#ad5fad","#573b88"],5:["#f9ddda","#eda8bd","#ce78b3","#9955a8","#573b88"],6:["#f9ddda","#f0b2c1","#dd8ab6","#bb69b0","#8c4fa4","#573b88"],7:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],tags:["quantitative"]},Sunset:{2:["#f3e79b","#5c53a5"],3:["#f3e79b","#eb7f86","#5c53a5"],4:["#f3e79b","#f8a07e","#ce6693","#5c53a5"],5:["#f3e79b","#fab27f","#eb7f86","#b95e9a","#5c53a5"],6:["#f3e79b","#fabc82","#f59280","#dc6f8e","#ab5b9e","#5c53a5"],7:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],tags:["quantitative"]},Magenta:{2:["#f3cbd3","#6c2167"],3:["#f3cbd3","#ca699d","#6c2167"],4:["#f3cbd3","#dd88ac","#b14d8e","#6c2167"],5:["#f3cbd3","#e498b4","#ca699d","#a24186","#6c2167"],6:["#f3cbd3","#e7a2b9","#d67ba5","#bc5894","#983a81","#6c2167"],7:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],tags:["quantitative"]},SunsetDark:{2:["#fcde9c","#7c1d6f"],3:["#fcde9c","#e34f6f","#7c1d6f"],4:["#fcde9c","#f0746e","#dc3977","#7c1d6f"],5:["#fcde9c","#f58670","#e34f6f","#d72d7c","#7c1d6f"],6:["#fcde9c","#f89872","#ec666d","#df4273","#c5287b","#7c1d6f"],7:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],tags:["quantitative"]},ag_Sunset:{2:["#4b2991","#edd9a3"],3:["#4b2991","#ea4f88","#edd9a3"],4:["#4b2991","#c0369d","#fa7876","#edd9a3"],5:["#4b2991","#a52fa2","#ea4f88","#fa9074","#edd9a3"],6:["#4b2991","#932da3","#d43f96","#f7667c","#f89f77","#edd9a3"],7:["#4b2991","#872ca2","#c0369d","#ea4f88","#fa7876","#f6a97a","#edd9a3"],tags:["aggregation"]},BrwnYl:{2:["#ede5cf","#541f3f"],3:["#ede5cf","#c1766f","#541f3f"],4:["#ede5cf","#d39c83","#a65461","#541f3f"],5:["#ede5cf","#daaf91","#c1766f","#95455a","#541f3f"],6:["#ede5cf","#ddba9b","#cd8c7a","#b26166","#8a3c56","#541f3f"],7:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],tags:["quantitative"]},ArmyRose:{2:["#929b4f","#db8195"],3:["#a3ad62","#fdfbe4","#df91a3"],4:["#929b4f","#d9dbaf","#f3d1ca","#db8195"],5:["#879043","#c1c68c","#fdfbe4","#ebb4b8","#d8758b"],6:["#7f883b","#b0b874","#e3e4be","#f6ddd1","#e4a0ac","#d66d85"],7:["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],tags:["diverging"]},Fall:{2:["#3d5941","#ca562c"],3:["#3d5941","#f6edbd","#ca562c"],4:["#3d5941","#b5b991","#edbb8a","#ca562c"],5:["#3d5941","#96a07c","#f6edbd","#e6a272","#ca562c"],6:["#3d5941","#839170","#cecea2","#f1cf9e","#e19464","#ca562c"],7:["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],tags:["diverging"]},Geyser:{2:["#008080","#ca562c"],3:["#008080","#f6edbd","#ca562c"],4:["#008080","#b4c8a8","#edbb8a","#ca562c"],5:["#008080","#92b69e","#f6edbd","#e6a272","#ca562c"],6:["#008080","#7eab98","#ced7b1","#f1cf9e","#e19464","#ca562c"],7:["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],tags:["diverging"]},Temps:{2:["#009392","#cf597e"],3:["#009392","#e9e29c","#cf597e"],4:["#009392","#9ccb86","#eeb479","#cf597e"],5:["#009392","#71be83","#e9e29c","#ed9c72","#cf597e"],6:["#009392","#52b684","#bcd48c","#edc783","#eb8d71","#cf597e"],7:["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],tags:["diverging"]},TealRose:{2:["#009392","#d0587e"],3:["#009392","#f1eac8","#d0587e"],4:["#009392","#91b8aa","#f1eac8","#dfa0a0","#d0587e"],5:["#009392","#91b8aa","#f1eac8","#dfa0a0","#d0587e"],6:["#009392","#72aaa1","#b1c7b3","#e5b9ad","#d98994","#d0587e"],7:["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],tags:["diverging"]},Tropic:{2:["#009B9E","#C75DAB"],3:["#009B9E","#F1F1F1","#C75DAB"],4:["#009B9E","#A7D3D4","#E4C1D9","#C75DAB"],5:["#009B9E","#7CC5C6","#F1F1F1","#DDA9CD","#C75DAB"],6:["#009B9E","#5DBCBE","#C6DFDF","#E9D4E2","#D99BC6","#C75DAB"],7:["#009B9E","#42B7B9","#A7D3D4","#F1F1F1","#E4C1D9","#D691C1","#C75DAB"],tags:["diverging"]},Earth:{2:["#A16928","#2887a1"],3:["#A16928","#edeac2","#2887a1"],4:["#A16928","#d6bd8d","#b5c8b8","#2887a1"],5:["#A16928","#caa873","#edeac2","#98b7b2","#2887a1"],6:["#A16928","#c29b64","#e0cfa2","#cbd5bc","#85adaf","#2887a1"],7:["#A16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"],tags:["diverging"]},Antique:{2:["#855C75","#D9AF6B","#7C7C7C"],3:["#855C75","#D9AF6B","#AF6458","#7C7C7C"],4:["#855C75","#D9AF6B","#AF6458","#736F4C","#7C7C7C"],5:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#7C7C7C"],6:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#7C7C7C"],7:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#7C7C7C"],8:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#7C7C7C"],9:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#7C7C7C"],10:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#8C785D","#7C7C7C"],11:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#8C785D","#467378","#7C7C7C"],tags:["qualitative"]},Bold:{2:["#7F3C8D","#11A579","#A5AA99"],3:["#7F3C8D","#11A579","#3969AC","#A5AA99"],4:["#7F3C8D","#11A579","#3969AC","#F2B701","#A5AA99"],5:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#A5AA99"],6:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#A5AA99"],7:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#A5AA99"],8:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#A5AA99"],9:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#A5AA99"],10:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#A5AA99"],11:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#4b4b8f","#A5AA99"],tags:["qualitative"]},Pastel:{2:["#66C5CC","#F6CF71","#B3B3B3"],3:["#66C5CC","#F6CF71","#F89C74","#B3B3B3"],4:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#B3B3B3"],5:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#B3B3B3"],6:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#B3B3B3"],7:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#B3B3B3"],8:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#B3B3B3"],9:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B3B3B3"],10:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#B3B3B3"],11:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"],tags:["qualitative"]},Prism:{2:["#5F4690","#1D6996","#666666"],3:["#5F4690","#1D6996","#38A6A5","#666666"],4:["#5F4690","#1D6996","#38A6A5","#0F8554","#666666"],5:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#666666"],6:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#666666"],7:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#666666"],8:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#666666"],9:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#666666"],10:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#666666"],11:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#994E95","#666666"],tags:["qualitative"]},Safe:{2:["#88CCEE","#CC6677","#888888"],3:["#88CCEE","#CC6677","#DDCC77","#888888"],4:["#88CCEE","#CC6677","#DDCC77","#117733","#888888"],5:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#888888"],6:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#888888"],7:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#888888"],8:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#888888"],9:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#888888"],10:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#661100","#888888"],11:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#661100","#6699CC","#888888"],tags:["qualitative","colorblind"]},Vivid:{2:["#E58606","#5D69B1","#A5AA99"],3:["#E58606","#5D69B1","#52BCA3","#A5AA99"],4:["#E58606","#5D69B1","#52BCA3","#99C945","#A5AA99"],5:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#A5AA99"],6:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#A5AA99"],7:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#A5AA99"],8:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#A5AA99"],9:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#A5AA99"],10:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#ED645A","#A5AA99"],11:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#ED645A","#CC3A8E","#A5AA99"],tags:["qualitative"]}},d={Blues:{tags:["quantitative"]},BrBG:{tags:["diverging"]},Greys:{tags:["quantitative"]},PiYG:{tags:["diverging"]},PRGn:{tags:["diverging"]},Purples:{tags:["quantitative"]},RdYlGn:{tags:["diverging"]},Spectral:{tags:["diverging"]},YlOrBr:{tags:["quantitative"]},YlGn:{tags:["quantitative"]},YlGnBu:{tags:["quantitative"]},YlOrRd:{tags:["quantitative"]}},e=a("colorbrewer");for(var f in e){var g=e[f],h={};for(var i in g)h[i]=g[i];f in d&&(h.tags=d[f].tags),c["cb_"+f]=h}"function"==typeof define&&define.amd?define(c):"object"==typeof b&&b.exports?b.exports=c:this.colorbrewer=c}()},{colorbrewer:120}],109:[function(a,b,c){var d=a("./cartocss/get-geo-attr"),e=a("./cartocss/get-default-css-for-geometry-type"),f=a("./cartocss/color-ramps");b.exports={choropleth:function(a,b,c,f,g){for(var h=d(f),i="#"+b,j=e(f),k="/** choropleth visualization */\n\n"+i+" {\n  "+h+": "+g[0]+";\n"+j.join("\n")+"\n}\n",l=a.length-1;l>=0;--l)void 0!==a[l]&&null!=a[l]&&(k+="\n"+i+"["+c+" <= "+a[l]+"] {\n",k+="  "+h+":"+g[l]+";\n}");return k},categoryMetadata:function(a,b){for(var c=[],d=b&&b.ramp?b.ramp:f.category,e=b&&b.type?b.type:"string",g=0;g<a.length;g++){var h=a[g];g<10&&void 0!==h&&("string"===e&&null!=h||"string"!==e)&&c.push({title:h,title_type:e,value_type:"color",color:d[g]})}return a.length>10&&c.push({title:"Others",value_type:"color",default:!0,color:d[d.length-1]}),c},category:function(a,b,c,g,h){for(var i,j,k=d(g),l="#"+b,m=f.category,n=h&&h.type?h.type:"string",m=h&&h.ramp?h.ramp:f.category,o=e(g),p="/** category visualization */\n\n"+l+" {\n  "+k+": "+m[0]+";\n"+o.join("\n")+"\n}\n",q=0;q<a.length;q++){var r=a[q];"string"===n?(i=r.replace(/\n/g,"\\n").replace(/\"/g,'\\"'),j='"'+i+'"'):j=r,q<10&&void 0!==r&&("string"===n&&null!=r||"string"!==n)&&(p+="\n"+l+"["+c+"="+j+"] {\n",p+="  "+k+":"+m[q]+";\n}")}return a.length>10&&(p+="\n"+l+"{\n",p+="  "+k+": "+m[m.length-1]+";\n}"),p},torque:function(a,b,c){var d="#"+b,e=["/** torque visualization */","Map {","  -torque-time-attribute: "+a.column+";",'  -torque-aggregation-function: "count(cartodb_id)";',"  -torque-frame-count: "+a.steps+";","  -torque-animation-duration: 10;","  -torque-resolution: 2;","}",d+" {","  marker-width: 3;","  marker-fill-opacity: 0.8;","  marker-fill: #0F3B82; ",'  comp-op: "lighten"; ',"  [frame-offset = 1] { marker-width: 10; marker-fill-opacity: 0.05;}","  [frame-offset = 2] { marker-width: 15; marker-fill-opacity: 0.02;}","}"];return e=e.join("\n")},bubble:function(a,b,c){var d="#"+b,f="/** bubble visualization */\n\n"+d+" {\n";f+=e("point").join("\n"),f+="\nmarker-fill: #FF5C00;",f+="\n}\n\n";for(var g=10,h=30,i=[],j=10,k=0;k<j;++k){var l=k/(j-1);i.push(g+l*(h-g))}for(var k=j-1;k>=0;--k)void 0!==a[k]&&null!=a[k]&&(f+="\n#"+b+" [ "+c+" <= "+a[k]+"] {\n",f+="   marker-width: "+i[k].toFixed(1)+";\n}");return f},heatmap:function(a,b,c){var d="#"+b,e=["/** heatmap visualization */","Map {",'  -torque-time-attribute: "cartodb_id";','  -torque-aggregation-function: "count(cartodb_id)";',"  -torque-frame-count: 1;","  -torque-animation-duration: 10;","  -torque-resolution: 2;","}",d+" {","  marker-width: 10;","  marker-fill-opacity: 0.4;","  marker-fill: #0F3B82; ",'  comp-op: "lighten"; ',"  image-filters: colorize-alpha(blue, cyan, lightgreen, yellow , orange, red);","  marker-file: url(http://s3.amazonaws.com/com.cartodb.assets.static/alphamarker.png);","}"];return e=e.join("\n")}}},{"./cartocss/color-ramps":110,"./cartocss/get-default-css-for-geometry-type":111,"./cartocss/get-geo-attr":112}],110:[function(a,b,c){b.exports={bool:["#229A00","#F84F40","#DDDDDD"],green:["#EDF8FB","#D7FAF4","#CCECE6","#66C2A4","#41AE76","#238B45","#005824"],blue:["#FFFFCC","#C7E9B4","#7FCDBB","#41B6C4","#1D91C0","#225EA8","#0C2C84"],pink:["#F1EEF6","#D4B9DA","#C994C7","#DF65B0","#E7298A","#CE1256","#91003F"],black:["#F7F7F7","#D9D9D9","#BDBDBD","#969696","#737373","#525252","#252525"],red:["#FFFFB2","#FED976","#FEB24C","#FD8D3C","#FC4E2A","#E31A1C","#B10026"],category:["#A6CEE3","#1F78B4","#B2DF8A","#33A02C","#FB9A99","#E31A1C","#FDBF6F","#FF7F00","#CAB2D6","#6A3D9A","#DDDDDD"],
divergent:["#0080FF","#40A0FF","#7FBFFF","#FFF2CC","#FFA6A6","#FF7A7A","#FF4D4D"]}},{}],111:[function(a,b,c){b.exports=function(a){return"polygon"===a?["polygon-opacity: 0.7;","line-color: #FFF;","line-width: 0.5;","line-opacity: 1;"]:"line"===a?["line-width: 2;","line-opacity: 0.7;"]:["marker-fill-opacity: 0.9;","marker-line-color: #FFF;","marker-line-width: 1;","marker-line-opacity: 1;","marker-placement: point;","marker-type: ellipse;","marker-width: 10;","marker-allow-overlap: true;"]}},{}],112:[function(a,b,c){b.exports=function(a){return{line:"line-color",polygon:"polygon-fill",point:"marker-fill"}[a]}},{}],113:[function(a,b,c){var d=function(a,b){var c={};for(var e in b)if(b.hasOwnProperty(e)){var f,g=b[e];"object"==typeof a&&(f=a[e]),"object"==typeof g&&"object"==typeof f?c[e]=d(f,g):"object"!=typeof g&&void 0!==f?c[e]=f:c[e]=g}return c||{}};b.exports=d},{}],114:[function(a,b,c){var d=a("./cartocss/color-ramps.js");b.exports=function(a){var b,c=d.blue,e="blue";return["A","U"].indexOf(a.dist_type)!=-1?(b=a.jenks,a.min<0&&a.max>0&&(c=d.divergent,e="spectrum2")):"F"===a.dist_type?(b=a.equalint,c=d.red,e="red"):"J"===a.dist_type?(b=a.headtails,c=d.blue,e="blue"):(b=a.headtails,c=d.red,e="red"),{name:e,ramp:c,method:b}}},{"./cartocss/color-ramps.js":110}],115:[function(a,b,c){b.exports=function(a){return{U:.9,A:.9,L:.7,J:.7,S:.5,F:.3}[a]}},{}],116:[function(a,b,c){var d=a("./cartocss/color-ramps"),e=a("./get-weight-from-shape"),f=a("./get-method-properties"),g=a("./deep-defaults"),h=a("./cartocss");b.exports=function(a){var b=a.dependencies.underscore,c=a.tableName,i=g(a.thresholds,{number:{forBubbleMap:{minCalcWeight:.5,maxStatsCount:200},forCategoryOrBubbleMap:{minStatsWeight:.5,distinctPercentage:25,forCategory:{maxDistinctPercentage:1},forBubble:{minDistinctPercentage:1}}}}),j=a.column,k=j.geometryType,l=j.stats,m=l.column,n="choropleth",o=null,p=l.type,q=[],r=l.distinct/l.count*100;if("number"===p){var s=(l.weight+e(l.dist_type))/2;if(s>=i.number.forBubbleMap.minCalcWeight){var t=h.choropleth,u=f(l);l.count<i.number.forBubbleMap.maxStatsCount&&"point"===k&&(n="bubble",t=h.bubble),o=t(u.method,c,m,k,u.ramp)}else if(l.weight>i.number.forCategoryOrBubbleMap.minStatsWeight||r<i.number.forCategoryOrBubbleMap.maxDistinctPercentage)if(r<i.number.forCategoryOrBubbleMap.forCategory.maxDistinctPercentage){n="category";var v=l.cat_hist;v=b.sortBy(v,function(a){return a[1]}).reverse().slice(0,d.category.length),v=b.sortBy(v,function(a){return a[0]}),v=v.map(function(a){return a[0]}),o=h.category(v,c,m,k,{type:p}),q=h.categoryMetadata(v,{type:p})}else if(r>=i.number.forCategoryOrBubbleMap.forBubble.minDistinctPercentage){var t=h.choropleth;"point"===k&&(n="bubble",t=h.bubble);var u=f(l);o=t(u.method,c,m,k,u.ramp)}}else if("string"===p){n="category";var v=l.hist;v=b.sortBy(v,function(a){return a[1]}).reverse().slice(0,d.category.length),v=b.sortBy(v,function(a){return a[0]}),v=v.map(function(a){return a[0]}),o=h.category(v,c,m,k),q=h.categoryMetadata(v)}else if("date"===p)n="torque",o=h.torque(l,c);else if("boolean"===p){n="category";var w=d.bool,v=["true","false",null],x={type:p,ramp:w};o=h.category(v,c,m,k,x),q=h.categoryMetadata(v,x)}else"geom"===l.type&&(n="heatmap",o=h.heatmap(l,c,x));var u={geometryType:k,column:m,bbox:j.bbox,type:p,visualizationType:n};return o?u.css=o:(u.css=null,u.weight=-100),l&&(u.stats=l),q&&(u.metadata=q),u}},{"./cartocss":109,"./cartocss/color-ramps":110,"./deep-defaults":113,"./get-method-properties":114,"./get-weight-from-shape":115}],117:[function(a,b,c){var d=a("./get-weight-from-shape"),e=a("./deep-defaults"),f={geom:function(a){var b=a.stats;return a.isPointGeometryType&&b.cluster_rate*b.density>=a.thresholds.geom.minStatsDensity},string:function(a){return a.stats.weight>=a.thresholds.string.minWeight},number:function(a){var b=a.stats,c=b.distinct/b.count*100,e=(b.weight+d(b.dist_type))/2;return b.weight>=a.thresholds.number.minWeight&&(e>=a.thresholds.number.minCalcWeight||b.weight>a.thresholds.number.minWeightIfNoOtherApplies||c<a.thresholds.number.maxDistinctPercentage)},boolean:function(a){return a.stats.null_ratio<=a.thresholds.boolean.maxNullRatio},date:function(a){return a.isPointGeometryType&&a.stats.null_ratio<=a.thresholds.date.maxNullRatio}};b.exports=function(a){var b=!1,a=a||{};if(a.thresholds=e(a.thresholds,{geom:{minStatsDensity:.1},string:{minWeight:.8},number:{minWeight:.1,minCalcWeight:.5,maxDistinctPercentage:25,minWeightIfNoOtherApplies:.5},boolean:{maxNullRatio:.75},date:{maxNullRatio:.75}}),a&&a.stats){var c=f[a.stats.type];"function"==typeof c&&(b=c.call(this,a))}return b}},{"./deep-defaults":113,"./get-weight-from-shape":115}],118:[function(a,b,c){!function(d,e){if("function"==typeof define&&define.amd)define(["module","select"],e);else if("undefined"!=typeof c)e(b,a("select"));else{var f={exports:{}};e(f,d.select),d.clipboardAction=f.exports}}(this,function(a,b){"use strict";function c(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=c(b),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b){d(this,a),this.resolveOptions(b),this.initSelection()}return g(a,[{key:"resolveOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=a.action,this.emitter=a.emitter,this.target=a.target,this.text=a.text,this.trigger=a.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var a=this,b="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return a.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[b?"right":"left"]="-9999px";var c=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=c+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,e.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,e.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var a=void 0;try{a=document.execCommand(this.action)}catch(b){a=!1}this.handleResult(a)}},{key:"handleResult",value:function(a){this.emitter.emit(a?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=a,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(a){if(void 0!==a){if(!a||"object"!==("undefined"==typeof a?"undefined":f(a))||1!==a.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&a.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=a}},get:function(){return this._target}}]),a}();a.exports=h})},{select:281}],119:[function(a,b,c){!function(){var a={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};"function"==typeof define&&define.amd?define(a):"object"==typeof b&&b.exports?b.exports=a:this.colorbrewer=a}()},{}],120:[function(a,b,c){b.exports=a("./colorbrewer.js")},{"./colorbrewer.js":119}],121:[function(a,b,c){"use strict";function d(a){var b=h.fromSource(a);return b?b.toObject():null}function e(a){return a.sourcesContent&&!!a.sourcesContent[0]}function f(a,b){this.generator=j({file:a||"generated.js",sourceRoot:b})}var g=a("path"),h=a("convert-source-map"),i=a("lodash.memoize"),j=a("inline-source-map"),k=a("./lib/path-is-absolute"),l=a("./lib/mappings-from-map"),m=/^[a-z]+:\/\//,n=i(function(a,b,c){if(!c)return c;var d=b?g.join(b,c):c;return a===d||k(d)||m.test(d)?d:g.join(g.dirname(a),d)},function(a,b,c){return a+"::"+b+"::"+c});f.prototype._addGeneratedMap=function(a,b,c){return this.generator.addGeneratedMappings(a,b,c),this.generator.addSourceContent(a,b),this},f.prototype._addExistingMap=function(a,b,c,d){for(var e=l(c),f=0,g=c.sources.length;f<g;f++)c.sourcesContent&&this.generator.addSourceContent(n(a,c.sourceRoot,c.sources[f]),c.sourcesContent[f]);return e.forEach(function(b){this.generator.addMappings(n(a,null,b.source),[b],d)},this),this},f.prototype.addFile=function(a,b){b=b||{},b.hasOwnProperty("line")||(b.line=0),b.hasOwnProperty("column")||(b.column=0);var c=d(a.source);return c&&e(c)?this._addExistingMap(a.sourceFile,a.source,c,b):this._addGeneratedMap(a.sourceFile,a.source,b)},f.prototype.base64=function(){return this.generator.base64Encode()},f.prototype.comment=function(){return this.generator.inlineMappingUrl()},c.create=function(a,b){return new f(a,b)},c.removeComments=function(a){return a.replace?a.replace(h.commentRegex,"").replace(h.mapFileCommentRegex,""):a}},{"./lib/mappings-from-map":122,"./lib/path-is-absolute":123,"convert-source-map":125,"inline-source-map":174,"lodash.memoize":188,path:200}],122:[function(a,b,c){var d=a("source-map").SourceMapConsumer;b.exports=function(a){var b=new d(a),c=[];return b.eachMapping(function(a){c.push({original:null!=a.originalColumn?{column:a.originalColumn,line:a.originalLine}:void 0,generated:{column:a.generatedColumn,line:a.generatedLine},source:null!=a.originalColumn?a.source:void 0,name:a.name})}),c}},{"source-map":302}],123:[function(a,b,c){(function(a){"use strict";function c(a){return"/"===a.charAt(0)}function d(a){var b=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,c=b.exec(a),d=c[1]||"",e=!!d&&":"!==d.charAt(1);return!!c[2]||e}b.exports="win32"===a.platform?d:c,b.exports.posix=c,b.exports.win32=d}).call(this,a("_process"))},{_process:256}],124:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);"function"==typeof a&&(b=a,a={}),a||(a={});var c=a.encoding,e=!1;c?(c=String(c).toLowerCase(),"u8"!==c&&"uint8"!==c||(c="uint8array")):e=!0,j.call(this,{objectMode:!0}),this.encoding=c,this.shouldInferEncoding=e,b&&this.on("finish",function(){b(this.getBody())}),this.body=[]}function e(a){return/Array\]$/.test(Object.prototype.toString.call(a))}function f(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];"string"==typeof e?b.push(e):c.isBuffer(e)?b.push(e):b.push(c(e))}return c.isBuffer(a[0])?(b=c.concat(b),b=b.toString("utf8")):b=b.join(""),b}function g(a){for(var b=[],d=0;d<a.length;d++){var f=a[d];c.isBuffer(f)?b.push(f):"string"==typeof f||e(f)||f&&"function"==typeof f.subarray?b.push(c(f)):b.push(c(String(f)))}return c.concat(b)}function h(a){for(var b=[],c=0;c<a.length;c++)b.push.apply(b,a[c]);return b}function i(a){for(var b=0,d=0;d<a.length;d++)"string"==typeof a[d]&&(a[d]=c(a[d])),b+=a[d].length;for(var e=new l(b),d=0,f=0;d<a.length;d++)for(var g=a[d],h=0;h<g.length;h++)e[f++]=g[h];return e}var j=a("readable-stream").Writable,k=a("inherits");if("undefined"==typeof Uint8Array)var l=a("typedarray").Uint8Array;else var l=Uint8Array;b.exports=d,k(d,j),d.prototype._write=function(a,b,c){this.body.push(a),c()},d.prototype.inferEncoding=function(a){var b=void 0===a?this.body[0]:a;return c.isBuffer(b)?"buffer":"undefined"!=typeof Uint8Array&&b instanceof Uint8Array?"uint8array":Array.isArray(b)?"array":"string"==typeof b?"string":"[object Object]"===Object.prototype.toString.call(b)?"object":"buffer"},d.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?h(this.body):"string"===this.encoding?f(this.body):"buffer"===this.encoding?g(this.body):"uint8array"===this.encoding?i(this.body):this.body):[]};Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}}).call(this,a("buffer").Buffer)},{buffer:34,inherits:173,"readable-stream":265,typedarray:398}],125:[function(a,b,c){(function(b){"use strict";function d(a){return new b(a,"base64").toString()}function e(a){return a.split(",").pop()}function f(a,b){var c=l.exec(a);l.lastIndex=0;var d=c[1]||c[2],e=j.join(b,d);try{return i.readFileSync(e,"utf8")}catch(a){throw new Error("An error occurred while trying to read the map file at "+e+"\n"+a)}}function g(a,b){b=b||{},b.isFileComment&&(a=f(a,b.commentFileDir)),b.hasComment&&(a=e(a)),b.isEncoded&&(a=d(a)),(b.isJSON||b.isEncoded)&&(a=JSON.parse(a)),this.sourcemap=a}function h(a){
for(var b,d=a.split("\n"),e=d.length-1;e>0;e--)if(b=d[e],~b.indexOf("sourceMappingURL=data:"))return c.fromComment(b)}var i=a("fs"),j=a("path"),k=/^\s*\/(?:\/|\*)[@#]\s+sourceMappingURL=data:(?:application|text)\/json;(?:charset[:=]\S+;)?base64,(.*)$/gm,l=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^\*]+?)[ \t]*(?:\*\/){1}[ \t]*$)/gm;g.prototype.toJSON=function(a){return JSON.stringify(this.sourcemap,null,a)},g.prototype.toBase64=function(){var a=this.toJSON();return new b(a).toString("base64")},g.prototype.toComment=function(a){var b=this.toBase64(),c="sourceMappingURL=data:application/json;base64,"+b;return a&&a.multiline?"/*# "+c+" */":"//# "+c},g.prototype.toObject=function(){return JSON.parse(this.toJSON())},g.prototype.addProperty=function(a,b){if(this.sourcemap.hasOwnProperty(a))throw new Error("property %s already exists on the sourcemap, use set property instead");return this.setProperty(a,b)},g.prototype.setProperty=function(a,b){return this.sourcemap[a]=b,this},g.prototype.getProperty=function(a){return this.sourcemap[a]},c.fromObject=function(a){return new g(a)},c.fromJSON=function(a){return new g(a,{isJSON:!0})},c.fromBase64=function(a){return new g(a,{isEncoded:!0})},c.fromComment=function(a){return a=a.replace(/^\/\*/g,"//").replace(/\*\/$/g,""),new g(a,{isEncoded:!0,hasComment:!0})},c.fromMapFileComment=function(a,b){return new g(a,{commentFileDir:b,isFileComment:!0,isJSON:!0})},c.fromSource=function(a,b){if(b){var d=h(a);return d?d:null}var e=a.match(k);return k.lastIndex=0,e?c.fromComment(e.pop()):null},c.fromMapFileSource=function(a,b){var d=a.match(l);return l.lastIndex=0,d?c.fromMapFileComment(d.pop(),b):null},c.removeComments=function(a){return k.lastIndex=0,a.replace(k,"")},c.removeMapFileComments=function(a){return l.lastIndex=0,a.replace(l,"")},Object.defineProperty(c,"commentRegex",{get:function(){return k.lastIndex=0,k}}),Object.defineProperty(c,"mapFileCommentRegex",{get:function(){return l.lastIndex=0,l}})}).call(this,a("buffer").Buffer)},{buffer:34,fs:29,path:200}],126:[function(a,b,c){(function(a){function b(a){return Array.isArray?Array.isArray(a):"[object Array]"===q(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return"[object RegExp]"===q(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return"[object Date]"===q(a)}function n(a){return"[object Error]"===q(a)||a instanceof Error}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=a.isBuffer}).call(this,{isBuffer:a("../../is-buffer/index.js")})},{"../../is-buffer/index.js":176}],127:[function(a,b,c){!function(){function a(a){return a&&(a.ownerDocument||a.document||a).documentElement}function c(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function d(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function e(a){return null===a?NaN:+a}function f(a){return!isNaN(a)}function g(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function h(a){return a.length}function i(a){for(var b=1;a*b%1;)b*=10;return b}function j(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function k(){this._=Object.create(null)}function l(a){return(a+="")===tg||a[0]===ug?ug+a:a}function m(a){return(a+="")[0]===ug?a.slice(1):a}function n(a){return l(a)in this._}function o(a){return(a=l(a))in this._&&delete this._[a]}function p(){var a=[];for(var b in this._)a.push(m(b));return a}function q(){var a=0;for(var b in this._)++a;return a}function r(){for(var a in this._)return!1;return!0}function s(){this._=Object.create(null)}function t(a){return a}function u(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function v(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=vg.length;c<d;++c){var e=vg[c]+b;if(e in a)return e}}function w(){}function x(){}function y(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new k;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function z(){ig.event.preventDefault()}function A(){for(var a,b=ig.event;a=b.sourceEvent;)b=a;return b}function B(a){for(var b=new x,c=0,d=arguments.length;++c<d;)b[arguments[c]]=y(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=ig.event;e.target=a,ig.event=e,b[e.type].apply(c,d)}finally{ig.event=f}}},b}function C(a){return xg(a,Bg),a}function D(a){return"function"==typeof a?a:function(){return yg(a,this)}}function E(a){return"function"==typeof a?a:function(){return zg(a,this)}}function F(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=ig.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function G(a){return a.trim().replace(/\s+/g," ")}function H(a){return new RegExp("(?:^|\\s+)"+ig.requote(a)+"(?:\\s+|$)","g")}function I(a){return(a+"").trim().split(/^|\s+/)}function J(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=I(a).map(K);var e=a.length;return"function"==typeof b?d:c}function K(a){var b=H(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",G(e+" "+a))):c.setAttribute("class",G(e.replace(b," ")))}}function L(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function M(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function N(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c===Cg&&b.documentElement.namespaceURI===Cg?b.createElement(a):b.createElementNS(c,a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=ig.ns.qualify(a)).local?c:b}function O(){var a=this.parentNode;a&&a.removeChild(this)}function P(a){return{__data__:a}}function Q(a){return function(){return Ag(this,a)}}function R(a){return arguments.length||(a=d),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function S(a,b){for(var c=0,d=a.length;c<d;c++)for(var e,f=a[c],g=0,h=f.length;g<h;g++)(e=f[g])&&b(e,g,c);return a}function T(a){return xg(a,Eg),a}function U(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function V(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,kg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+ig.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=W;h>0&&(a=a.slice(0,h));var j=Fg.get(a);return j&&(a=j,i=X),h?b?e:d:b?w:f}function W(a,b){return function(c){var d=ig.event;ig.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{ig.event=d}}}function X(a,b){var c=W(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function Y(b){var d=".dragsuppress-"+ ++Hg,e="click"+d,f=ig.select(c(b)).on("touchmove"+d,z).on("dragstart"+d,z).on("selectstart"+d,z);if(null==Gg&&(Gg=!("onselectstart"in b)&&v(b.style,"userSelect")),Gg){var g=a(b).style,h=g[Gg];g[Gg]="none"}return function(a){if(f.on(d,null),Gg&&(g[Gg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){z(),b()},!0),setTimeout(b,0)}}}function Z(a,b){b.changedTouches&&(b=b.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var e=d.createSVGPoint();if(Ig<0){var f=c(a);if(f.scrollX||f.scrollY){d=ig.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=d[0][0].getScreenCTM();Ig=!(g.f||g.e),d.remove()}}return Ig?(e.x=b.pageX,e.y=b.pageY):(e.x=b.clientX,e.y=b.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[b.clientX-h.left-a.clientLeft,b.clientY-h.top-a.clientTop]}function $(){return ig.event.changedTouches[0].identifier}function _(a){return a>0?1:a<0?-1:0}function aa(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ba(a){return a>1?0:a<-1?Lg:Math.acos(a)}function ca(a){return a>1?Og:a<-1?-Og:Math.asin(a)}function da(a){return((a=Math.exp(a))-1/a)/2}function ea(a){return((a=Math.exp(a))+1/a)/2}function fa(a){return((a=Math.exp(2*a))-1)/(a+1)}function ga(a){return(a=Math.sin(a/2))*a}function ha(){}function ia(a,b,c){return this instanceof ia?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ia?new ia(a.h,a.s,a.l):wa(""+a,xa,ia):new ia(a,b,c)}function ja(a,b,c){function d(a){return a>360?a-=360:a<0&&(a+=360),a<60?f+(g-f)*a/60:a<180?g:a<240?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,g=c<=.5?c*(1+b):c+b-c*b,f=2*c-g,new sa(e(a+120),e(a),e(a-120))}function ka(a,b,c){return this instanceof ka?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ka?new ka(a.h,a.c,a.l):a instanceof ma?oa(a.l,a.a,a.b):oa((a=ya((a=ig.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ka(a,b,c)}function la(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new ma(c,Math.cos(a*=Pg)*b,Math.sin(a)*b)}function ma(a,b,c){return this instanceof ma?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof ma?new ma(a.l,a.a,a.b):a instanceof ka?la(a.h,a.c,a.l):ya((a=sa(a)).r,a.g,a.b):new ma(a,b,c)}function na(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=pa(e)*$g,d=pa(d)*_g,f=pa(f)*ah,new sa(ra(3.2404542*e-1.5371385*d-.4985314*f),ra(-.969266*e+1.8760108*d+.041556*f),ra(.0556434*e-.2040259*d+1.0572252*f))}function oa(a,b,c){return a>0?new ka(Math.atan2(c,b)*Qg,Math.sqrt(b*b+c*c),a):new ka(NaN,NaN,a)}function pa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function qa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function ra(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function sa(a,b,c){return this instanceof sa?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof sa?new sa(a.r,a.g,a.b):wa(""+a,sa,ja):new sa(a,b,c)}function ta(a){return new sa(a>>16,a>>8&255,255&a)}function ua(a){return ta(a)+""}function va(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function wa(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(Aa(e[0]),Aa(e[1]),Aa(e[2]))}return(f=dh.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g|=g>>4,h=240&f,h|=h>>4,i=15&f,i|=i<<4):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function xa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=i<.5?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(b<c?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&i<1?0:d),new ia(d,e,i)}function ya(a,b,c){a=za(a),b=za(b),c=za(c);var d=qa((.4124564*a+.3575761*b+.1804375*c)/$g),e=qa((.2126729*a+.7151522*b+.072175*c)/_g),f=qa((.0193339*a+.119192*b+.9503041*c)/ah);return ma(116*e-16,500*(d-e),200*(e-f))}function za(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Aa(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ba(a){return"function"==typeof a?a:function(){return a}}function Ca(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Da(b,c,a,d)}}function Da(a,b,c,d){function e(){var a,b=i.status;if(!b&&Fa(i)||b>=200&&b<300||304===b){try{a=c.call(f,i)}catch(a){return void g.error.call(f,a)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=ig.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=ig.event;ig.event=a;try{g.progress.call(f,i)}finally{ig.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(kg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},ig.rebind(f,g,"on"),null==d?f:f.get(Ea(d))}function Ea(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Fa(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Ga(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={c:a,t:e,n:null};return fh?fh.n=f:eh=f,fh=f,gh||(hh=clearTimeout(hh),gh=1,ih(Ha)),f}function Ha(){var a=Ia(),b=Ja()-a;b>24?(isFinite(b)&&(clearTimeout(hh),hh=setTimeout(Ha,b)),gh=0):(gh=1,ih(Ha))}function Ia(){for(var a=Date.now(),b=eh;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function Ja(){for(var a,b=eh,c=1/0;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:eh=b.n;return fh=a,c}function Ka(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function La(a,b){var c=Math.pow(10,3*sg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Ma(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:t;return function(a){var c=kh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):"e"!=n&&"f"!=n||(m=Math.max(0,Math.min(20,m)))),n=lh.get(n)||Na;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=a<0||0===a&&1/a<0?(a=-a,"-"):"-"===h?"":h;if(o<0){var i=ig.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(w<0){var x=s?a.lastIndexOf("e"):-1;x<0?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=y<k?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Na(a){return a+""}function Oa(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Pa(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new nh(c-1)),1),c}function f(a,c){return b(a=new nh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;g<d;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{nh=Oa;var d=new Oa;return d._=a,g(d,b,c)}finally{nh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Qa(a);return i.floor=i,i.round=Qa(d),i.ceil=Qa(e),i.offset=Qa(f),i.range=h,a}function Qa(a){return function(b,c){try{nh=Oa;var d=new Oa;return d._=b,a(d,c)._}finally{nh=Date}}}function Ra(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=ph[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&nh!==Oa,g=new(f?Oa:nh);return"j"in d?g.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;h<i;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in ph?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{nh=Oa;var b=new nh;return b._=a,d(b)}finally{nh=Date}}var d=b(a);return c.parse=function(a){try{nh=Oa;var b=d.parse(a);return b&&b._}finally{nh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=jb;var t=ig.map(),u=Ta(p),v=Ua(p),w=Ta(q),x=Ua(q),y=Ta(r),z=Ua(r),A=Ta(s),B=Ua(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Sa(a.getDate(),b,2)},e:function(a,b){return Sa(a.getDate(),b,2)},H:function(a,b){return Sa(a.getHours(),b,2)},I:function(a,b){return Sa(a.getHours()%12||12,b,2)},j:function(a,b){return Sa(1+mh.dayOfYear(a),b,3)},L:function(a,b){return Sa(a.getMilliseconds(),b,3)},m:function(a,b){return Sa(a.getMonth()+1,b,2)},M:function(a,b){return Sa(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Sa(a.getSeconds(),b,2)},U:function(a,b){return Sa(mh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Sa(mh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Sa(a.getFullYear()%100,b,2)},Y:function(a,b){return Sa(a.getFullYear()%1e4,b,4)},Z:hb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:bb,e:bb,H:db,I:db,j:cb,L:gb,m:ab,M:eb,p:k,S:fb,U:Wa,w:Va,W:Xa,x:i,X:j,y:Za,Y:Ya,Z:$a,"%":ib};return b}function Sa(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Ta(a){return new RegExp("^(?:"+a.map(ig.requote).join("|")+")","i")}function Ua(a){for(var b=new k,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Va(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Wa(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Xa(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Ya(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Za(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.y=_a(+d[0]),c+d[0].length):-1}function $a(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function _a(a){return a+(a>68?1900:2e3)}function ab(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function bb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function cb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function db(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function eb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function fb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function gb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function hb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=sg(b)/60|0,e=sg(b)%60;return c+Sa(d,"0",2)+Sa(e,"0",2)}function ib(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function jb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function kb(){}function lb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function mb(a,b){a&&vh.hasOwnProperty(a.type)&&vh[a.type](a,b)}function nb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function ob(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)nb(a[c],b,1);b.polygonEnd()}function pb(){function a(a,b){a*=Pg,b=b*Pg/2+Lg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);xh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;yh.point=function(g,h){yh.point=a,d=(b=g)*Pg,e=Math.cos(h=(c=h)*Pg/2+Lg/4),f=Math.sin(h)},yh.lineEnd=function(){a(b,c)}}function qb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function rb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function sb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function tb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function ub(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function vb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function wb(a){return[Math.atan2(a[1],a[0]),ca(a[2])]}function xb(a,b){return sg(a[0]-b[0])<Jg&&sg(a[1]-b[1])<Jg}function yb(a,b){a*=Pg;var c=Math.cos(b*=Pg);zb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function zb(a,b,c){++zh,Bh+=(a-Bh)/zh,Ch+=(b-Ch)/zh,Dh+=(c-Dh)/zh}function Ab(){function a(a,e){a*=Pg;var f=Math.cos(e*=Pg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);Ah+=j,Eh+=j*(b+(b=g)),Fh+=j*(c+(c=h)),Gh+=j*(d+(d=i)),zb(b,c,d)}var b,c,d;Kh.point=function(e,f){e*=Pg;var g=Math.cos(f*=Pg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Kh.point=a,zb(b,c,d)}}function Bb(){Kh.point=yb}function Cb(){function a(a,b){a*=Pg;var c=Math.cos(b*=Pg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ba(n)/m,p=Math.atan2(m,n);Hh+=o*j,Ih+=o*k,Jh+=o*l,Ah+=p,Eh+=p*(d+(d=g)),Fh+=p*(e+(e=h)),Gh+=p*(f+(f=i)),zb(d,e,f)}var b,c,d,e,f;Kh.point=function(g,h){b=g,c=h,Kh.point=a,g*=Pg;var i=Math.cos(h*=Pg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),zb(d,e,f)},Kh.lineEnd=function(){a(b,c),Kh.lineEnd=Bb,Kh.point=yb}}function Db(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Eb(){return!0}function Fb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(xb(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Hb(c,a,null,!0),j=new Hb(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Hb(d,a,null,!1),j=new Hb(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Gb(f),Gb(g),f.length){for(var h=0,i=c,j=g.length;h<j;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;h<j;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Gb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Hb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Ib(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Jb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=ig.merge(n);var a=Pb(r,o);n.length?(v||(f.polygonStart(),v=!0),Fb(n,Lb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Kb(),u=b(t),v=!1;return s}}function Jb(a){return a.length>1}function Kb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:w,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Lb(a,b){return((a=a.x)[0]<0?a[1]-Og-Jg:Og-a[1])-((b=b.x)[0]<0?b[1]-Og-Jg:Og-b[1])}function Mb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Lg:-Lg,i=sg(f-c);sg(i-Lg)<Jg?(a.point(c,d=(d+g)/2>0?Og:-Og),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Lg&&(sg(c-e)<Jg&&(c-=e*Jg),sg(f-h)<Jg&&(f-=h*Jg),d=Nb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Nb(a,b,c,d){var e,f,g=Math.sin(a-c);return sg(g)>Jg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Ob(a,b,c,d){var e;if(null==a)e=c*Og,d.point(-Lg,e),d.point(0,e),d.point(Lg,e),d.point(Lg,0),d.point(Lg,-e),d.point(0,-e),d.point(-Lg,-e),d.point(-Lg,0),d.point(-Lg,e);else if(sg(a[0]-b[0])>Jg){var f=a[0]<b[0]?Lg:-Lg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Pb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;xh.reset();for(var h=0,i=b.length;h<i;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Lg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Lg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Lg,z=o*t;if(xh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Mg:v,y^m>=c^r>=c){var A=sb(qb(l),qb(a));vb(A);var B=sb(e,A);vb(B);var C=(y^v>=0?-1:1)*ca(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(f<-Jg||f<Jg&&xh<-Jg)^1&g}function Qb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(l<0?Lg:-Lg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(xb(c,n)||xb(o,n))&&(o[0]+=Jg,o[1]+=Jg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&xb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=qb(a),e=qb(b),g=[1,0,0],h=sb(d,e),i=rb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=sb(g,h),o=ub(g,l),p=ub(h,m);tb(o,p);var q=n,r=rb(o,q),s=rb(q,q),t=r*r-s*(rb(o,o)-1);if(!(t<0)){var u=Math.sqrt(t),v=ub(q,(-r-u)/s);if(tb(v,o),v=wb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];y<x&&(w=x,x=y,y=w);var B=y-x,C=sg(B-Lg)<Jg,D=C||B<Jg;if(!C&&A<z&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(sg(v[0]-x)<Jg?z:A):z<=v[1]&&v[1]<=A:B>Lg^(x<=v[0]&&v[0]<=y)){var E=ub(q,(-r+u)/s);return tb(E,o),[v,wb(E)]}}}function e(b,c){var d=g?a:Lg-a,e=0;return b<-d?e|=1:b>d&&(e|=2),c<-d?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=sg(f)>Jg,i=pc(a,6*Pg);return Ib(b,c,i,g?[0,-a]:[-Lg,a-Lg])}function Rb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,o<0){if(f<m)return;f<n&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(f<0)){if(f/=o,o<0){if(f>n)return;f>m&&(m=f)}else if(o>0){if(f<m)return;f<n&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,p<0){if(f<m)return;f<n&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(f<0)){if(f/=p,p<0){if(f>n)return;f>m&&(m=f)}else if(p>0){if(f<m)return;f<n&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),n<1&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Sb(a,b,c,d){function e(d,e){return sg(d[0]-a)<Jg?e>0?0:3:sg(d[0]-c)<Jg?e>0?2:1:sg(d[1]-b)<Jg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;e<c;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];g<i;++g)f=h[g],j[1]<=d?f[1]>d&&aa(j,f,a)>0&&++b:f[1]<=d&&aa(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return a<=e&&e<=c&&b<=f&&f<=d}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN;
}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Mh,Math.min(Mh,a)),b=Math.max(-Mh,Math.min(Mh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Kb(),C=Rb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=ig.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Fb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Tb(a){var b=0,c=Lg/3,d=hc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Lg/180,c=a[1]*Lg/180):[b/Lg*180,c/Lg*180]},e}function Ub(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ca((f-(a*a+c*c)*e*e)/(2*e))]},c}function Vb(){function a(a,b){Oh+=e*a-d*b,d=a,e=b}var b,c,d,e;Th.point=function(f,g){Th.point=a,b=d=f,c=e=g},Th.lineEnd=function(){a(b,c)}}function Wb(a,b){a<Ph&&(Ph=a),a>Rh&&(Rh=a),b<Qh&&(Qh=b),b>Sh&&(Sh=b)}function Xb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Yb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Yb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Yb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Zb(a,b){Bh+=a,Ch+=b,++Dh}function $b(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Eh+=g*(b+a)/2,Fh+=g*(c+d)/2,Gh+=g,Zb(b=a,c=d)}var b,c;Vh.point=function(d,e){Vh.point=a,Zb(b=d,c=e)}}function _b(){Vh.point=Zb}function ac(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Eh+=g*(d+a)/2,Fh+=g*(e+b)/2,Gh+=g,g=e*a-d*b,Hh+=g*(d+a),Ih+=g*(e+b),Jh+=3*g,Zb(d=a,e=b)}var b,c,d,e;Vh.point=function(f,g){Vh.point=a,Zb(b=d=f,c=e=g)},Vh.lineEnd=function(){a(b,c)}}function bc(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Mg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:w};return h}function cc(a){function b(a){return(h?d:c)(a)}function c(b){return fc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=qb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=sg(sg(x)-1)<Jg||sg(d-m)<Jg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||sg((s*E+t*F)/u-.5)>.3||h*n+i*o+j*p<g)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Pg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function dc(a){var b=cc(function(b,c){return a([b*Qg,c*Qg])});return function(a){return ic(b(a))}}function ec(a){this.stream=a}function fc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function gc(a){return hc(function(){return a})()}function hc(a){function b(a){return a=h(a[0]*Pg,a[1]*Pg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Qg,a[1]*Qg]}function d(){h=Db(g=lc(r,s,u),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=cc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,u=0,v=Lh,w=t,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=ic(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Lh):Qb((x=+a)*Pg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Sb(a[0][0],a[0][1],a[1][0],a[1][1]):t,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Pg,q=a[1]%360*Pg,d()):[p*Qg,q*Qg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Pg,s=a[1]%360*Pg,u=a.length>2?a[2]%360*Pg:0,d()):[r*Qg,s*Qg,u*Qg]},ig.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function ic(a){return fc(a,function(b,c){a.point(b*Pg,c*Pg)})}function jc(a,b){return[a,b]}function kc(a,b){return[a>Lg?a-Mg:a<-Lg?a+Mg:a,b]}function lc(a,b,c){return a?b||c?Db(nc(a),oc(b,c)):nc(a):b||c?oc(b,c):kc}function mc(a){return function(b,c){return b+=a,[b>Lg?b-Mg:b<-Lg?b+Mg:b,c]}}function nc(a){var b=mc(a);return b.invert=mc(-a),b}function oc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),ca(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),ca(k*d-h*e)]},c}function pc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=qc(c,e),f=qc(c,f),(g>0?e<f:e>f)&&(e+=g*Mg)):(e=a+g*Mg,f=a-.5*i);for(var j,k=e;g>0?k>f:k<f;k-=i)h.point((j=wb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function qc(a,b){var c=qb(b);c[0]-=a,vb(c);var d=ba(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Jg)%(2*Math.PI)}function rc(a,b,c){var d=ig.range(a,b-Jg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function sc(a,b,c){var d=ig.range(a,b-Jg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function tc(a){return a.source}function uc(a){return a.target}function vc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ga(d-b)+e*g*ga(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Qg,Math.atan2(g,Math.sqrt(d*d+e*e))*Qg]}:function(){return[a*Qg,b*Qg]};return o.distance=m,o}function wc(){function a(a,e){var f=Math.sin(e*=Pg),g=Math.cos(e),h=sg((a*=Pg)-b),i=Math.cos(h);Wh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Xh.point=function(e,f){b=e*Pg,c=Math.sin(f*=Pg),d=Math.cos(f),Xh.point=a},Xh.lineEnd=function(){Xh.point=Xh.lineEnd=w}}function xc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function yc(a,b){function c(a,b){g>0?b<-Og+Jg&&(b=-Og+Jg):b>Og-Jg&&(b=Og-Jg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Lg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=_(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Og]},c):Ac}function zc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return sg(e)<Jg?jc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-_(e)*Math.sqrt(a*a+c*c)]},c)}function Ac(a,b){return[a,Math.log(Math.tan(Lg/4+b/2))]}function Bc(a){var b,c=gc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Lg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Cc(a,b){return[Math.log(Math.tan(Lg/4+b/2)),-a]}function Dc(a){return a[0]}function Ec(a){return a[1]}function Fc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;d>1&&aa(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Gc(a,b){return a[0]-b[0]||a[1]-b[1]}function Hc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ic(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Jc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Kc(){dd(this),this.edge=this.site=this.circle=null}function Lc(a){var b=hi.pop()||new Kc;return b.site=a,b}function Mc(a){Wc(a),ei.remove(a),hi.push(a),dd(a)}function Nc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Mc(a);for(var i=f;i.circle&&sg(c-i.circle.x)<Jg&&sg(d-i.circle.cy)<Jg;)f=i.P,h.unshift(i),Mc(i),i=f;h.unshift(i),Wc(i);for(var j=g;j.circle&&sg(c-j.circle.x)<Jg&&sg(d-j.circle.cy)<Jg;)g=j.N,h.push(j),Mc(j),j=g;h.push(j),Wc(j);var k,l=h.length;for(k=1;k<l;++k)j=h[k],i=h[k-1],ad(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=$c(i.site,j.site,null,e),Vc(i),Vc(j)}function Oc(a){for(var b,c,d,e,f=a.x,g=a.y,h=ei._;h;)if(d=Pc(h,g)-f,d>Jg)h=h.L;else{if(e=f-Qc(h,g),!(e>Jg)){d>-Jg?(b=h.P,c=h):e>-Jg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Lc(a);if(ei.insert(b,i),b||c){if(b===c)return Wc(b),c=Lc(b.site),ei.insert(i,c),i.edge=c.edge=$c(b.site,i.site),Vc(b),void Vc(c);if(!c)return void(i.edge=$c(b.site,i.site));Wc(b),Wc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};ad(c.edge,j,o,u),i.edge=$c(j,a,null,u),c.edge=$c(a,o,null,u),Vc(b),Vc(c)}}function Pc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Qc(a,b){var c=a.N;if(c)return Pc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Rc(a){this.site=a,this.edges=[]}function Sc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=di,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;g<i;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(sg(d-b)>Jg||sg(e-c)>Jg)&&(h.splice(g,0,new bd(_c(f.site,k,sg(d-l)<Jg&&o-e>Jg?{x:l,y:sg(b-l)<Jg?c:o}:sg(e-o)<Jg&&m-d>Jg?{x:sg(c-o)<Jg?b:m,y:o}:sg(d-m)<Jg&&e-n>Jg?{x:m,y:sg(b-m)<Jg?c:n}:sg(e-n)<Jg&&d-l>Jg?{x:sg(c-n)<Jg?b:l,y:n}:null),f.site,null)),++i)}function Tc(a,b){return b.angle-a.angle}function Uc(){dd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Kg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=ii.pop()||new Uc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=gi._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}gi.insert(s,r),s||(fi=r)}}}}function Wc(a){var b=a.circle;b&&(b.P||(fi=b.N),gi.remove(b),ii.push(b),dd(b),a.circle=null)}function Xc(a){for(var b,c=ci,d=Rb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Yc(b,a)||!d(b)||sg(b.a.x-b.b.x)<Jg&&sg(b.a.y-b.b.y)<Jg)&&(b.a=b.b=null,c.splice(e,1))}function Yc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(q<g||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,d<-1||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(n<p){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Zc(a,b){this.l=a,this.r=b,this.a=this.b=null}function $c(a,b,c,d){var e=new Zc(a,b);return ci.push(e),c&&ad(e,a,b,c),d&&ad(e,b,a,d),di[a.i].edges.push(new bd(e,a,b)),di[b.i].edges.push(new bd(e,b,a)),e}function _c(a,b,c){var d=new Zc(a,null);return d.a=b,d.b=c,ci.push(d),d}function ad(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function bd(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function cd(){this._=null}function dd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function ed(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function fd(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function gd(a){for(;a.L;)a=a.L;return a}function hd(a,b){var c,d,e,f=a.sort(id).pop();for(ci=[],di=new Array(a.length),ei=new cd,gi=new cd;;)if(e=fi,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))f.x===c&&f.y===d||(di[f.i]=new Rc(f),Oc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Nc(e.arc)}b&&(Xc(b),Sc(b));var g={cells:di,edges:ci};return ei=gi=ci=di=null,g}function id(a,b){return b.y-a.y||b.x-a.x}function jd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function kd(a){return a.x}function ld(a){return a.y}function md(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function nd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&nd(a,i[0],c,d,g,h),i[1]&&nd(a,i[1],g,d,e,h),i[2]&&nd(a,i[2],c,h,g,f),i[3]&&nd(a,i[3],g,h,e,f)}}function od(a,b,c,d,e,f,g){var h,i=1/0;return function a(j,k,l,m,n){if(!(k>f||l>g||m<d||n<e)){if(o=j.point){var o,p=b-j.x,q=c-j.y,r=p*p+q*q;if(r<i){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=j.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;y<z;++y)if(j=t[3&y])switch(3&y){case 0:a(j,k,l,u,v);break;case 1:a(j,u,l,m,v);break;case 2:a(j,k,v,u,n);break;case 3:a(j,u,v,m,n)}}}(a,d,e,f,g),h}function pd(a,b){a=ig.rgb(a),b=ig.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+va(Math.round(c+f*a))+va(Math.round(d+g*a))+va(Math.round(e+h*a))}}function qd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=td(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function rd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function sd(a,b){var c,d,e,f=ki.lastIndex=li.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=ki.exec(a))&&(d=li.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:rd(c,d)})),f=li.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function td(a,b){for(var c,d=ig.interpolators.length;--d>=0&&!(c=ig.interpolators[d](a,b)););return c}function ud(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;c<h;++c)d.push(td(a[c],b[c]));for(;c<f;++c)e[c]=a[c];for(;c<g;++c)e[c]=b[c];return function(a){for(c=0;c<h;++c)e[c]=d[c](a);return e}}function vd(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function wd(a){return function(b){return 1-a(1-b)}}function xd(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function yd(a){return a*a}function zd(a){return a*a*a}function Ad(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function Bd(a){return function(b){return Math.pow(b,a)}}function Cd(a){return 1-Math.cos(a*Og)}function Dd(a){return Math.pow(2,10*(a-1))}function Ed(a){return 1-Math.sqrt(1-a*a)}function Fd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Mg*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Mg/b)}}function Gd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Hd(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Id(a,b){a=ig.hcl(a),b=ig.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return la(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){a=ig.hsl(a),b=ig.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ja(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){a=ig.lab(a),b=ig.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return na(c+f*a,d+g*a,e+h*a)+""}}function Ld(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Md(a){var b=[a.a,a.b],c=[a.c,a.d],d=Od(b),e=Nd(b,c),f=Od(Pd(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Qg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Qg:0}function Nd(a,b){return a[0]*b[0]+a[1]*b[1]}function Od(a){var b=Math.sqrt(Nd(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Pd(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Qd(a){return a.length?a.pop()+",":""}function Rd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push("translate(",null,",",null,")");d.push({i:e-4,x:rd(a[0],b[0])},{i:e-2,x:rd(a[1],b[1])})}else(b[0]||b[1])&&c.push("translate("+b+")")}function Sd(a,b,c,d){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),d.push({i:c.push(Qd(c)+"rotate(",null,")")-2,x:rd(a,b)})):b&&c.push(Qd(c)+"rotate("+b+")")}function Td(a,b,c,d){a!==b?d.push({i:c.push(Qd(c)+"skewX(",null,")")-2,x:rd(a,b)}):b&&c.push(Qd(c)+"skewX("+b+")")}function Ud(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push(Qd(c)+"scale(",null,",",null,")");d.push({i:e-4,x:rd(a[0],b[0])},{i:e-2,x:rd(a[1],b[1])})}else 1===b[0]&&1===b[1]||c.push(Qd(c)+"scale("+b+")")}function Vd(a,b){var c=[],d=[];return a=ig.transform(a),b=ig.transform(b),Rd(a.translate,b.translate,c,d),Sd(a.rotate,b.rotate,c,d),Td(a.skew,b.skew,c,d),Ud(a.scale,b.scale,c,d),a=b=null,function(a){for(var b,e=-1,f=d.length;++e<f;)c[(b=d[e]).i]=b.x(a);return c.join("")}}function Wd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Xd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Yd(a){for(var b=a.source,c=a.target,d=$d(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Zd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function $d(a,b){if(a===b)return a;for(var c=Zd(a),d=Zd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function _d(a){a.fixed|=2}function ae(a){a.fixed&=-7}function be(a){a.fixed|=4,a.px=a.x,a.py=a.y}function ce(a){a.fixed&=-5}function de(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(de(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function ee(a,b){return ig.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=ke,a}function fe(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function ge(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function he(a){return a.children}function ie(a){return a.value}function je(a,b){return b.value-a.value}function ke(a){return ig.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function le(a){return a.x}function me(a){return a.y}function ne(a,b,c){a.y0=b,a.y=c}function oe(a){return ig.range(a.length)}function pe(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function qe(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;c<f;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function re(a){return a.reduce(se,0)}function se(a,b){return a+b[1]}function te(a,b){return ue(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ue(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function ve(a){return[ig.min(a),ig.max(a)]}function we(a,b){return a.value-b.value}function xe(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function ye(a,b){a._pack_next=b,b._pack_prev=a}function ze(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Ae(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(Be),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],Ee(d,e,f),b(f),xe(d,f),d._pack_prev=f,xe(f,e),e=d._pack_next,g=3;g<j;g++){Ee(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(ze(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!ze(i,f);i=i._pack_prev,q++);o?(p<q||p==q&&e.r<d.r?ye(d,e=h):ye(d=i,e),g--):(xe(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;g<j;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(Ce)}}function Be(a){a._pack_next=a._pack_prev=a}function Ce(a){delete a._pack_next,delete a._pack_prev}function De(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)De(e[f],b,c,d)}function Ee(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Fe(a,b){return a.parent==b.parent?1:2}function Ge(a){var b=a.children;return b.length?b[0]:a.t}function He(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Ie(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Je(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Ke(a,b,c){return a.a.parent===b.parent?a.a:c}function Le(a){return 1+ig.max(a,function(a){return a.y})}function Me(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Ne(a){var b=a.children;return b&&b.length?Ne(b[0]):a}function Oe(a){var b,c=a.children;return c&&(b=c.length)?Oe(c[b-1]):a}function Pe(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Qe(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Re(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function Se(a){return a.rangeExtent?a.rangeExtent():Re(a.range())}function Te(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ue(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Ve(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:wi}function We(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=ig.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Xe(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?We:Te,i=d?Xd:Wd;return g=e(a,b,i,c),h=e(b,a,i,td),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ld)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return _e(a,b)},f.tickFormat=function(b,c){return af(a,b,c)},f.nice=function(b){return Ze(a,b),e()},f.copy=function(){return Xe(a,b,c,d)},e()}function Ye(a,b){return ig.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ze(a,b){return Ue(a,Ve($e(a,b)[2])),Ue(a,Ve($e(a,b)[2])),a}function $e(a,b){null==b&&(b=10);var c=Re(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function _e(a,b){return ig.range.apply(ig,$e(a,b))}function af(a,b,c){var d=$e(a,b);if(c){var e=kh.exec(c);if(e.shift(),"s"===e[8]){var f=ig.formatPrefix(Math.max(sg(d[0]),sg(d[1])));return e[7]||(e[7]="."+bf(f.scale(d[2]))),e[8]="f",c=ig.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+cf(e[8],d)),c=e.join("")}else c=",."+bf(d[2])+"f";return ig.format(c)}function bf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function cf(a,b){var c=bf(b[2]);return a in xi?Math.abs(c-bf(Math.max(sg(b[0]),sg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function df(a,b,c,d){function e(a){return(c?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ue(d.map(e),c?Math:zi);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Re(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;j<k;j++)for(var m=1;m<l;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,c){if(!arguments.length)return yi;arguments.length<2?c=yi:"function"!=typeof c&&(c=ig.format(c));var d=Math.max(1,b*a/g.ticks().length);return function(a){var g=a/f(Math.round(e(a)));return g*b<b-.5&&(g*=b),g<=d?c(a):""}},g.copy=function(){return df(a.copy(),b,c,d)},Ye(g,a)}function ef(a,b,c){function d(b){return a(e(b))}var e=ff(b),f=ff(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return _e(c,a)},d.tickFormat=function(a,b){return af(c,a,b)},d.nice=function(a){return d.domain(Ze(c,a))},d.exponent=function(g){return arguments.length?(e=ff(b=g),f=ff(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return ef(a.copy(),b,c)},Ye(d,a)}function ff(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function gf(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return ig.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new k;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Re(b.a[0])},c.copy=function(){return gf(a,b)},c.domain(a)}function hf(a,b){function c(){var c=0,d=b.length;for(h=[];++c<d;)h[c-1]=ig.quantile(a,c/d);return g}function g(a){if(!isNaN(a=+a))return b[ig.bisect(h,a)]}var h;return g.domain=function(b){return arguments.length?(a=b.map(e).filter(f).sort(d),c()):a},g.range=function(a){return arguments.length?(b=a,c()):b},g.quantiles=function(){return h},g.invertExtent=function(c){return c=b.indexOf(c),c<0?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},g.copy=function(){return hf(a,b)},c()}function jf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return jf(a,b,c)},e()}function kf(a,b){function c(c){if(c<=c)return b[ig.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return kf(a,b)},c}function lf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return _e(a,b)},b.tickFormat=function(b,c){return af(a,b,c)},b.copy=function(){return lf(a)},b}function mf(){return 0}function nf(a){return a.innerRadius}function of(a){return a.outerRadius}function pf(a){return a.startAngle}function qf(a){return a.endAngle}function rf(a){return a&&a.padAngle}function sf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function tf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(r<0?-1:1)*Math.sqrt(Math.max(0,t*t*s-u*u)),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function uf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ba(c),o=Ba(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Dc,d=Ec,e=Eb,f=vf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Fi.get(a)||vf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function vf(a){return a.length>1?a.join("L"):a+"Z"}function wf(a){return a.join("L")+"Z"}function xf(a){
for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function zf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Af(a,b){return a.length<4?vf(a):a[1]+Df(a.slice(1,-1),Ef(a,b))}function Bf(a,b){return a.length<3?wf(a):a[0]+Df((a.push(a[0]),a),Ef([a[a.length-2]].concat(a,[a[1]]),b))}function Cf(a,b){return a.length<3?vf(a):a[0]+Df(a,Ef(a,b))}function Df(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return vf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Ef(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Ff(a){if(a.length<3)return vf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Jf(Ii,g),",",Jf(Ii,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Kf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Gf(a){if(a.length<4)return vf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Jf(Ii,f)+","+Jf(Ii,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Kf(c,f,g);return c.join("")}function Hf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Jf(Ii,g),",",Jf(Ii,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Kf(b,g,h);return b.join("")}function If(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Ff(a)}function Jf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Kf(a,b,c){a.push("C",Jf(Gi,b),",",Jf(Gi,c),",",Jf(Hi,b),",",Jf(Hi,c),",",Jf(Ii,b),",",Jf(Ii,c))}function Lf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Mf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Lf(e,f);++b<c;)d[b]=(g+(g=Lf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Nf(a){for(var b,c,d,e,f=[],g=Mf(a),h=-1,i=a.length-1;++h<i;)b=Lf(a[h],a[h+1]),sg(b)<Jg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Of(a){return a.length<3?vf(a):a[0]+Df(a,Nf(a))}function Pf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Og,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Qf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ba(c),v=Ba(e),w=c===d?function(){return n}:Ba(d),x=e===f?function(){return o}:Ba(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Dc,d=Dc,e=0,f=Ec,g=Eb,h=vf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Fi.get(a)||vf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Rf(a){return a.radius}function Sf(a){return[a.x,a.y]}function Tf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Og;return[c*Math.cos(d),c*Math.sin(d)]}}function Uf(){return 64}function Vf(){return"circle"}function Wf(a){var b=Math.sqrt(a/Lg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Xf(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Yf(a,b,c){return xg(a,Pi),a.namespace=b,a.id=c,a}function Zf(a,b,c,d){var e=a.id,f=a.namespace;return S(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function $f(a){return null==a&&(a=""),function(){this.textContent=a}}function _f(a){return null==a?"__transition__":"__transition_"+a+"__"}function ag(a,b,c,d,e){function f(a){var b=p.delay;return j.t=b+i,b<=a?g(a-b):void(j.c=g)}function g(c){var e=o.active,f=o[e];f&&(f.timer.c=null,f.timer.t=NaN,--o.count,delete o[e],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var g in o)if(+g<d){var k=o[g];k.timer.c=null,k.timer.t=NaN,--o.count,delete o[g]}j.c=h,Ga(function(){return j.c&&h(c||1)&&(j.c=null,j.t=NaN),1},0,i),o.active=d,p.event&&p.event.start.call(a,a.__data__,b),n=[],p.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&n.push(d)}),m=p.ease,l=p.duration}function h(e){for(var f=e/l,g=m(f),h=n.length;h>0;)n[--h].call(a,g);if(f>=1)return p.event&&p.event.end.call(a,a.__data__,b),--o.count?delete o[d]:delete a[c],1}var i,j,l,m,n,o=a[c]||(a[c]={active:0,count:0}),p=o[d];p||(i=e.time,j=Ga(f,0,i),p=o[d]={tween:new k,time:i,timer:j,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++o.count)}function bg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function cg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function dg(a){return a.toISOString()}function eg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=ig.bisect(Yi,e);return f==Yi.length?[b.year,$e(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Yi[f-1]<Yi[f]/e?f-1:f]:[_i,$e(a,c)[2]]}return d.invert=function(b){return fg(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(fg)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,fg(+c+1),b).length}var f=d.domain(),g=Re(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ue(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=fg(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=fg(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Re(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],fg(+c[1]+1),b<1?1:b)},d.tickFormat=function(){return c},d.copy=function(){return eg(a.copy(),b,c)},Ye(d,a)}function fg(a){return new Date(a)}function gg(a){return JSON.parse(a.responseText)}function hg(a){var b=lg.createRange();return b.selectNode(lg.body),b.createContextualFragment(a.responseText)}var ig={version:"3.5.17"},jg=[].slice,kg=function(a){return jg.call(a)},lg=this.document;if(lg)try{kg(lg.documentElement.childNodes)[0].nodeType}catch(a){kg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),lg)try{lg.createElement("DIV").style.setProperty("opacity",0,"")}catch(a){var mg=this.Element.prototype,ng=mg.setAttribute,og=mg.setAttributeNS,pg=this.CSSStyleDeclaration.prototype,qg=pg.setProperty;mg.setAttribute=function(a,b){ng.call(this,a,b+"")},mg.setAttributeNS=function(a,b,c){og.call(this,a,b,c+"")},pg.setProperty=function(a,b,c){qg.call(this,a,b+"",c)}}ig.ascending=d,ig.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},ig.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},ig.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},ig.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),e<d&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),e<d&&(e=d))}return[c,e]},ig.sum=function(a,b){var c,d=0,e=a.length,g=-1;if(1===arguments.length)for(;++g<e;)f(c=+a[g])&&(d+=c);else for(;++g<e;)f(c=+b.call(a,a[g],g))&&(d+=c);return d},ig.mean=function(a,b){var c,d=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)f(c=e(a[h]))?d+=c:--i;else for(;++h<g;)f(c=e(b.call(a,a[h],h)))?d+=c:--i;if(i)return d/i},ig.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},ig.median=function(a,b){var c,g=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)f(c=e(a[i]))&&g.push(c);else for(;++i<h;)f(c=e(b.call(a,a[i],i)))&&g.push(c);if(g.length)return ig.quantile(g.sort(d),.5)},ig.variance=function(a,b){var c,d,g=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<g;)f(c=e(a[j]))&&(d=c-h,h+=d/++k,i+=d*(c-h));else for(;++j<g;)f(c=e(b.call(a,a[j],j)))&&(d=c-h,h+=d/++k,i+=d*(c-h));if(k>1)return i/(k-1)},ig.deviation=function(){var a=ig.variance.apply(this,arguments);return a?Math.sqrt(a):a};var rg=g(d);ig.bisectLeft=rg.left,ig.bisect=ig.bisectRight=rg.right,ig.bisector=function(a){return g(1===a.length?function(b,c){return d(a(b),c)}:a)},ig.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,f<2&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},ig.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},ig.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(d<0?0:d);c<d;)f[c]=[b=e,e=a[++c]];return f},ig.transpose=function(a){if(!(e=a.length))return[];for(var b=-1,c=ig.min(a,h),d=new Array(c);++b<c;)for(var e,f=-1,g=d[b]=new Array(e);++f<e;)g[f]=a[f][b];return d},ig.zip=function(){return ig.transpose(arguments)},ig.keys=function(a){var b=[];for(var c in a)b.push(c);return b},ig.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},ig.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},ig.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var sg=Math.abs;ig.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=i(sg(c)),g=-1;if(a*=f,b*=f,c*=f,c<0)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},ig.map=function(a,b){var c=new k;if(a instanceof k)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var tg="__proto__",ug="\0";j(k,{has:n,get:function(a){return this._[l(a)]},set:function(a,b){return this._[l(a)]=b},remove:o,keys:p,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:m(b),value:this._[b]});return a},size:q,empty:r,forEach:function(a){for(var b in this._)a.call(this,m(b),this._[b])}}),ig.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,j,l,m,n=-1,o=g.length,p=f[h++],q=new k;++n<o;)(m=q.get(i=p(j=g[n])))?m.push(j):q.set(i,[j]);return b?(j=b(),l=function(c,d){j.set(c,a(b,d,h))}):(j={},l=function(c,d){j[c]=a(b,d,h)}),q.forEach(l),j}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(ig.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},ig.set=function(a){var b=new s;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},j(s,{has:n,add:function(a){return this._[l(a+="")]=!0,a},remove:o,values:p,size:q,empty:r,forEach:function(a){for(var b in this._)a.call(this,m(b))}}),ig.behavior={},ig.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=u(a,b,b[c]);return a};var vg=["webkit","ms","moz","Moz","o","O"];ig.dispatch=function(){for(var a=new x,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=y(a);return a},x.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},ig.event=null,ig.requote=function(a){return a.replace(wg,"\\$&")};var wg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},yg=function(a,b){return b.querySelector(a)},zg=function(a,b){return b.querySelectorAll(a)},Ag=function(a,b){var c=a.matches||a[v(a,"matchesSelector")];return(Ag=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(yg=function(a,b){return Sizzle(a,b)[0]||null},zg=Sizzle,Ag=Sizzle.matchesSelector),ig.selection=function(){return ig.select(lg.documentElement)};var Bg=ig.selection.prototype=[];Bg.select=function(a){var b,c,d,e,f=[];a=D(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return C(f)},Bg.selectAll=function(a){var b,c,d=[];a=E(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=kg(a.call(c,c.__data__,h,e))),b.parentNode=c);return C(d)};var Cg="http://www.w3.org/1999/xhtml",Dg={svg:"http://www.w3.org/2000/svg",xhtml:Cg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ig.ns={prefix:Dg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1)),Dg.hasOwnProperty(c)?{space:Dg[c],local:a}:a}},Bg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=ig.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(F(b,a[b]));return this}return this.each(F(a,b))},Bg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=I(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!H(a[e]).test(b))return!1;return!0}for(b in a)this.each(J(b,a[b]));return this}return this.each(J(a,b))},Bg.style=function(a,b,d){var e=arguments.length;if(e<3){if("string"!=typeof a){e<2&&(b="");for(d in a)this.each(L(d,a[d],b));return this}if(e<2){var f=this.node();return c(f).getComputedStyle(f,null).getPropertyValue(a)}d=""}return this.each(L(a,b,d))},Bg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(M(b,a[b]));return this}return this.each(M(a,b))},Bg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Bg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Bg.append=function(a){return a=N(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},Bg.insert=function(a,b){return a=N(a),b=D(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},Bg.remove=function(){return this.each(O)},Bg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new k,s=new Array(g);for(d=-1;++d<g;)(e=a[d])&&(r.has(q=b.call(e,e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q);for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=P(f),r.set(q,!0);for(d=-1;++d<g;)d in s&&r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=P(f);for(;d<l;++d)o[d]=P(c[d]);for(;d<g;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),j.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=T([]),i=C([]),j=C([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return j},i},Bg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Bg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Q(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return C(e)},Bg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Bg.sort=function(a){a=R.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Bg.each=function(a){return S(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Bg.call=function(a){var b=kg(arguments);return a.apply(b[0]=this,b),this},Bg.empty=function(){return!this.node()},Bg.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},Bg.size=function(){var a=0;return S(this,function(){++a}),a};var Eg=[];ig.selection.enter=T,ig.selection.enter.prototype=Eg,Eg.append=Bg.append,Eg.empty=Bg.empty,Eg.node=Bg.node,Eg.call=Bg.call,Eg.size=Bg.size,Eg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return C(g)},Eg.insert=function(a,b){return arguments.length<2&&(b=U(this)),Bg.insert.call(this,a,b)},ig.select=function(b){var c;return"string"==typeof b?(c=[yg(b,lg)],c.parentNode=lg.documentElement):(c=[b],c.parentNode=a(b)),C([c])},ig.selectAll=function(a){var b;return"string"==typeof a?(b=kg(zg(a,lg)),b.parentNode=lg.documentElement):(b=kg(a),b.parentNode=null),C([b])},Bg.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(V(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(V(a,b,c))};var Fg=ig.map({mouseenter:"mouseover",mouseleave:"mouseout"});lg&&Fg.forEach(function(a){"on"+a in lg&&Fg.remove(a)});var Gg,Hg=0;ig.mouse=function(a){return Z(a,A())};var Ig=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ig.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=A().changedTouches),b)for(var d,e=0,f=b.length;e<f;++e)if((d=b[e]).identifier===c)return Z(a,d)},ig.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function b(a,b,c,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o),n({type:"dragend"}))}var j,k=this,l=ig.event.target.correspondingElement||ig.event.target,m=k.parentNode,n=d.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=ig.select(c(l)).on(f+q,h).on(g+q,i),s=Y(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var d=B(a,"drag","dragstart","dragend"),e=null,f=b(w,ig.mouse,c,"mousemove","mouseup"),g=b($,ig.touch,t,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},ig.rebind(a,d,"on")},ig.touches=function(a,b){return arguments.length<2&&(b=A().touches),b?kg(b).map(function(b){var c=Z(a,b);return c.identifier=b.identifier,c}):[]};var Jg=1e-6,Kg=Jg*Jg,Lg=Math.PI,Mg=2*Lg,Ng=Mg-Jg,Og=Lg/2,Pg=Lg/180,Qg=180/Lg,Rg=Math.SQRT2,Sg=2,Tg=4;ig.interpolateZoom=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(m<Kg)d=Math.log(j/g)/Rg,c=function(a){return[e+a*k,f+a*l,g*Math.exp(Rg*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+Tg*m)/(2*g*Sg*n),p=(j*j-g*g-Tg*m)/(2*j*Sg*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/Rg,c=function(a){var b=a*d,c=ea(q),h=g/(Sg*n)*(c*fa(Rg*b+q)-da(q));return[e+h*k,f+h*l,g*c/ea(Rg*b+q)]}}return c.duration=1e3*d,c},ig.behavior.zoom=function(){function a(a){a.on(F,l).on(Vg+".zoom",n).on("dblclick.zoom",o).on(I,m)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function d(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function e(a){y.k=Math.max(C[0],Math.min(C[1],a))}function f(a,b){b=d(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:y.x,y:y.y,k:y.k},e(Math.pow(2,g)),f(q=c,d),b=ig.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-y.x)/y.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function k(a){--E||(a({type:"zoomend"}),q=null)}function l(){function a(){h=1,f(ig.mouse(e),m),j(g)}function d(){l.on(G,null).on(H,null),n(h),k(g)}var e=this,g=J.of(e,arguments),h=0,l=ig.select(c(e)).on(G,a).on(H,d),m=b(ig.mouse(e)),n=Y(e);Oi.call(e),i(g)}function m(){function a(){var a=ig.touches(o);return n=y.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),a}function c(){var b=ig.event.target;ig.select(b).on(u,d).on(v,h),w.push(b);for(var c=ig.event.changedTouches,e=0,f=c.length;e<f;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(j-t<500){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),z()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=ig.touches(o);Oi.call(o);for(var h=0,i=g.length;h<i;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(ig.event.touches.length){for(var b=ig.event.changedTouches,c=0,d=b.length;c<d;++c)delete q[b[c].identifier];for(var e in q)return void a()}ig.selectAll(w).on(s,null),x.on(F,l).on(I,m),A(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+ig.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=ig.select(o),A=Y(o);c(),i(p),x.on(F,null).on(I,c)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(Oi.call(this),p=b(q=r||ig.mouse(this)),i(a)),s=setTimeout(function(){s=null,k(a)},50),z(),e(Math.pow(2,.002*Ug())*y.k),f(q,p),j(a)}function o(){var a=ig.mouse(this),c=Math.log(y.k)/Math.LN2;g(this,a,b(a),ig.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var p,q,r,s,t,u,v,w,x,y={x:0,y:0,k:1},A=[960,500],C=Wg,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=B(a,"zoomstart","zoom","zoomend");return Vg||(Vg="onwheel"in lg?(Ug=function(){return-ig.event.deltaY*(ig.event.deltaMode?120:1)},"wheel"):"onmousewheel"in lg?(Ug=function(){return ig.event.wheelDelta},"mousewheel"):(Ug=function(){return-ig.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=y;Mi?ig.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=A[0],d=A[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=ig.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=y={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=y,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},h(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:null},e(+b),h(),a):y.k},a.scaleExtent=function(b){return arguments.length?(C=null==b?Wg:[+b[0],+b[1]],a):C},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(A=b&&[+b[0],+b[1]],a):A},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},ig.rebind(a,J,"on")};var Ug,Vg,Wg=[0,1/0];ig.color=ha,ha.prototype.toString=function(){return this.rgb()+""},ig.hsl=ia;var Xg=ia.prototype=new ha;Xg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ia(this.h,this.s,this.l/a)},Xg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ia(this.h,this.s,a*this.l)},Xg.rgb=function(){return ja(this.h,this.s,this.l)},ig.hcl=ka;var Yg=ka.prototype=new ha;Yg.brighter=function(a){return new ka(this.h,this.c,Math.min(100,this.l+Zg*(arguments.length?a:1)))},Yg.darker=function(a){return new ka(this.h,this.c,Math.max(0,this.l-Zg*(arguments.length?a:1)))},Yg.rgb=function(){return la(this.h,this.c,this.l).rgb()},ig.lab=ma;var Zg=18,$g=.95047,_g=1,ah=1.08883,bh=ma.prototype=new ha;bh.brighter=function(a){return new ma(Math.min(100,this.l+Zg*(arguments.length?a:1)),this.a,this.b)},bh.darker=function(a){return new ma(Math.max(0,this.l-Zg*(arguments.length?a:1)),this.a,this.b)},bh.rgb=function(){return na(this.l,this.a,this.b)},ig.rgb=sa;var ch=sa.prototype=new ha;ch.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),new sa(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new sa(e,e,e)},ch.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(a*this.r,a*this.g,a*this.b)},ch.hsl=function(){return xa(this.r,this.g,this.b)},ch.toString=function(){return"#"+va(this.r)+va(this.g)+va(this.b)};var dh=ig.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});dh.forEach(function(a,b){dh.set(a,ta(b))}),ig.functor=Ba,ig.xhr=Ca(t),ig.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Da(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;k<j;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new s,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},ig.csv=ig.dsv(",","text/csv"),ig.tsv=ig.dsv("\t","text/tab-separated-values");var eh,fh,gh,hh,ih=this[v(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};ig.timer=function(){Ga.apply(this,arguments)},ig.timer.flush=function(){Ia(),Ja()},ig.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var jh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(La);ig.formatPrefix=function(a,b){var c=0;return(a=+a)&&(a<0&&(a*=-1),b&&(a=ig.round(a,Ka(a,b))),
c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),jh[8+c/3]};var kh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,lh=ig.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=ig.round(a,Ka(a,b))).toFixed(Math.max(0,Math.min(20,Ka(a*(1+1e-15),b))))}}),mh=ig.time={},nh=Date;Oa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){oh.setUTCDate.apply(this._,arguments)},setDay:function(){oh.setUTCDay.apply(this._,arguments)},setFullYear:function(){oh.setUTCFullYear.apply(this._,arguments)},setHours:function(){oh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){oh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){oh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){oh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){oh.setUTCSeconds.apply(this._,arguments)},setTime:function(){oh.setTime.apply(this._,arguments)}};var oh=Date.prototype;mh.year=Pa(function(a){return a=mh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),mh.years=mh.year.range,mh.years.utc=mh.year.utc.range,mh.day=Pa(function(a){var b=new nh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),mh.days=mh.day.range,mh.days.utc=mh.day.utc.range,mh.dayOfYear=function(a){var b=mh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=mh[a]=Pa(function(a){return(a=mh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=mh.year(a).getDay();return Math.floor((mh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});mh[a+"s"]=c.range,mh[a+"s"].utc=c.utc.range,mh[a+"OfYear"]=function(a){var c=mh.year(a).getDay();return Math.floor((mh.dayOfYear(a)+(c+b)%7)/7)}}),mh.week=mh.sunday,mh.weeks=mh.sunday.range,mh.weeks.utc=mh.sunday.utc.range,mh.weekOfYear=mh.sundayOfYear;var ph={"-":"",_:" ",0:"0"},qh=/^\s*\d+/,rh=/^%/;ig.locale=function(a){return{numberFormat:Ma(a),timeFormat:Ra(a)}};var sh=ig.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ig.format=sh.numberFormat,ig.geo={},kb.prototype={s:0,t:0,add:function(a){lb(a,this.t,th),lb(th.s,this.s,this),this.s?this.t+=th.t:this.s=th.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var th=new kb;ig.geo.stream=function(a,b){a&&uh.hasOwnProperty(a.type)?uh[a.type](a,b):mb(a,b)};var uh={Feature:function(a,b){mb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)mb(c[d].geometry,b)}},vh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){nb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nb(c[d],b,0)},Polygon:function(a,b){ob(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ob(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)mb(c[d],b)}};ig.geo.area=function(a){return wh=0,ig.geo.stream(a,yh),wh};var wh,xh=new kb,yh={sphere:function(){wh+=4*Lg},point:w,lineStart:w,lineEnd:w,polygonStart:function(){xh.reset(),yh.lineStart=pb},polygonEnd:function(){var a=2*xh;wh+=a<0?4*Lg+a:a,yh.lineStart=yh.lineEnd=yh.point=w}};ig.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),b<l&&(l=b),b>n&&(n=b)}function b(b,c){var d=qb([b*Pg,c*Pg]);if(r){var e=sb(r,d),f=[e[1],-e[0],0],g=sb(f,e);vb(g),g=wb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Qg*j,q=sg(i)>180;if(q^(j*o<p&&p<j*b)){var s=g[1]*Qg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(j*o<p&&p<j*b)){var s=-g[1]*Qg;s<l&&(l=s)}else c<l&&(l=c),c>n&&(n=c);q?b<o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(b<k&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=sg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;yh.point(a,c),b(a,c)}function f(){yh.lineStart()}function g(){e(p,q),yh.lineEnd(),sg(s)>Jg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,yh.polygonStart()},polygonEnd:function(){yh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,xh<0?(k=-(m=180),l=-(n=90)):s>Jg?n=90:s<-Jg&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],ig.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];d<b;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];d<=b;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),ig.geo.centroid=function(a){zh=Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=0,ig.geo.stream(a,Kh);var b=Hh,c=Ih,d=Jh,e=b*b+c*c+d*d;return e<Kg&&(b=Eh,c=Fh,d=Gh,Ah<Jg&&(b=Bh,c=Ch,d=Dh),e=b*b+c*c+d*d,e<Kg)?[NaN,NaN]:[Math.atan2(c,b)*Qg,ca(d/Math.sqrt(e))*Qg]};var zh,Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh,Kh={sphere:w,point:yb,lineStart:Ab,lineEnd:Bb,polygonStart:function(){Kh.lineStart=Cb},polygonEnd:function(){Kh.lineStart=Ab}},Lh=Ib(Eb,Mb,Ob,[-Lg,-Lg/2]),Mh=1e9;ig.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Sb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(ig.geo.conicEqualArea=function(){return Tb(Ub)}).raw=Ub,ig.geo.albers=function(){return ig.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ig.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=ig.geo.albers(),g=ig.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=ig.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?g:e>=.166&&e<.234&&d>=-.214&&d<-.115?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Jg,l+.12*j+Jg],[k-.214*j-Jg,l+.234*j-Jg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Jg,l+.166*j+Jg],[k-.115*j-Jg,l+.234*j-Jg]]).stream(i).point,a},a.scale(1070)};var Nh,Oh,Ph,Qh,Rh,Sh,Th={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Oh=0,Th.lineStart=Vb},polygonEnd:function(){Th.lineStart=Th.lineEnd=Th.point=w,Nh+=sg(Oh/2)}},Uh={point:Wb,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Vh={point:Zb,lineStart:$b,lineEnd:_b,polygonStart:function(){Vh.lineStart=ac},polygonEnd:function(){Vh.point=Zb,Vh.lineStart=$b,Vh.lineEnd=_b}};ig.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),ig.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Nh=0,ig.geo.stream(a,e(Th)),Nh},a.centroid=function(a){return Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=0,ig.geo.stream(a,e(Vh)),Jh?[Hh/Jh,Ih/Jh]:Gh?[Eh/Gh,Fh/Gh]:Dh?[Bh/Dh,Ch/Dh]:[NaN,NaN]},a.bounds=function(a){return Rh=Sh=-(Ph=Qh=1/0),ig.geo.stream(a,e(Uh)),[[Ph,Qh],[Rh,Sh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||dc(a):t,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Xb:new bc(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(ig.geo.albersUsa()).context(null)},ig.geo.transform=function(a){return{stream:function(b){var c=new ec(b);for(var d in a)c[d]=a[d];return c}}},ec.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ig.geo.projection=gc,ig.geo.projectionMutator=hc,(ig.geo.equirectangular=function(){return gc(jc)}).raw=jc.invert=jc,ig.geo.rotation=function(a){function b(b){return b=a(b[0]*Pg,b[1]*Pg),b[0]*=Qg,b[1]*=Qg,b}return a=lc(a[0]%360*Pg,a[1]*Pg,a.length>2?a[2]*Pg:0),b.invert=function(b){return b=a.invert(b[0]*Pg,b[1]*Pg),b[0]*=Qg,b[1]*=Qg,b},b},kc.invert=jc,ig.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=lc(-a[0]*Pg,-a[1]*Pg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Qg,a[1]*=Qg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=pc((b=+d)*Pg,e*Pg),a):b},a.precision=function(d){return arguments.length?(c=pc(b*Pg,(e=+d)*Pg),a):e},a.angle(90)},ig.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Pg,e=a[1]*Pg,f=b[1]*Pg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},ig.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return ig.range(Math.ceil(f/q)*q,e,q).map(m).concat(ig.range(Math.ceil(j/r)*r,i,r).map(n)).concat(ig.range(Math.ceil(d/o)*o,c,o).filter(function(a){return sg(a%q)>Jg}).map(k)).concat(ig.range(Math.ceil(h/p)*p,g,p).filter(function(a){return sg(a%r)>Jg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=rc(h,g,90),l=sc(d,c,s),m=rc(j,i,90),n=sc(f,e,s),a):s},a.majorExtent([[-180,-90+Jg],[180,90-Jg]]).minorExtent([[-180,-80-Jg],[180,80+Jg]])},ig.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=tc,e=uc;return a.distance=function(){return ig.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},ig.geo.interpolate=function(a,b){return vc(a[0]*Pg,a[1]*Pg,b[0]*Pg,b[1]*Pg)},ig.geo.length=function(a){return Wh=0,ig.geo.stream(a,Xh),Wh};var Wh,Xh={sphere:w,point:w,lineStart:wc,lineEnd:w,polygonStart:w,polygonEnd:w},Yh=xc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(ig.geo.azimuthalEqualArea=function(){return gc(Yh)}).raw=Yh;var Zh=xc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},t);(ig.geo.azimuthalEquidistant=function(){return gc(Zh)}).raw=Zh,(ig.geo.conicConformal=function(){return Tb(yc)}).raw=yc,(ig.geo.conicEquidistant=function(){return Tb(zc)}).raw=zc;var $h=xc(function(a){return 1/a},Math.atan);(ig.geo.gnomonic=function(){return gc($h)}).raw=$h,Ac.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Og]},(ig.geo.mercator=function(){return Bc(Ac)}).raw=Ac;var _h=xc(function(){return 1},Math.asin);(ig.geo.orthographic=function(){return gc(_h)}).raw=_h;var ai=xc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(ig.geo.stereographic=function(){return gc(ai)}).raw=ai,Cc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Og]},(ig.geo.transverseMercator=function(){var a=Bc(Cc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Cc,ig.geom={},ig.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ba(c),f=Ba(d),g=a.length,h=[],i=[];for(b=0;b<g;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Gc),b=0;b<g;b++)i.push([h[b][0],-h[b][1]]);var j=Fc(h),k=Fc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Dc,d=Ec;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},ig.geom.polygon=function(a){return xg(a,bi),a};var bi=ig.geom.polygon.prototype=[];bi.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},bi.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},bi.clip=function(a){for(var b,c,d,e,f,g,h=Jc(a),i=-1,j=this.length-Jc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Hc(g,k,e)?(Hc(f,k,e)||a.push(Ic(f,g,k,e)),a.push(g)):Hc(f,k,e)&&a.push(Ic(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var ci,di,ei,fi,gi,hi=[],ii=[];Rc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Tc),b.length},bd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},cd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=gd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(ed(this,c),a=c,c=a.U),c.C=!1,d.C=!0,fd(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(fd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ed(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?gd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,ed(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,fd(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,ed(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,fd(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,ed(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,fd(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},ig.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return hd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Jg)*Jg,y:Math.round(g(a,b)/Jg)*Jg,i:b}})}var d=Dc,e=Ec,f=d,g=e,h=ji;return a?b(a):(b.links=function(a){return hd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return hd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Tc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&jd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Ba(d=a),b):d},b.y=function(a){return arguments.length?(g=Ba(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ji:a,b):h===ji?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ji?null:h&&h[1]},b)};var ji=[[-1e6,-1e6],[1e6,1e6]];ig.geom.delaunay=function(a){return ig.geom.voronoi().triangles(a)},ig.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(sg(i-c)+sg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=md()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ba(h),u=Ba(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;n<o;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;n<o;++n){var v=+t(k=a[n],n),w=+u(k,n);v<p&&(p=v),w<q&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=md();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){nd(a,z,p,q,r,s)},z.find=function(a){return od(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Dc,i=Ec;return(g=arguments.length)?(h=kd,i=ld,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},ig.interpolateRgb=pd,ig.interpolateObject=qd,ig.interpolateNumber=rd,ig.interpolateString=sd;var ki=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,li=new RegExp(ki.source,"g");ig.interpolate=td,ig.interpolators=[function(a,b){var c=typeof b;return("string"===c?dh.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?pd:sd:b instanceof ha?pd:Array.isArray(b)?ud:"object"===c&&isNaN(b)?qd:rd)(a,b)}],ig.interpolateArray=ud;var mi=function(){return t},ni=ig.map({linear:mi,poly:Bd,quad:function(){return yd},cubic:function(){return zd},sin:function(){return Cd},exp:function(){return Dd},circle:function(){return Ed},elastic:Fd,back:Gd,bounce:function(){return Hd}}),oi=ig.map({in:t,out:wd,"in-out":xd,"out-in":function(a){return xd(wd(a))}});ig.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=ni.get(c)||mi,d=oi.get(d)||t,vd(d(c.apply(null,jg.call(arguments,1))))},ig.interpolateHcl=Id,ig.interpolateHsl=Jd,ig.interpolateLab=Kd,ig.interpolateRound=Ld,ig.transform=function(a){var b=lg.createElementNS(ig.ns.prefix.svg,"g");return(ig.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Md(c?c.matrix:pi)})(a)},Md.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pi={a:1,b:0,c:0,d:1,e:0,f:0};ig.interpolateTransform=Vd,ig.layout={},ig.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Yd(a[c]));return b}},ig.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=ig.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(ig.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Mg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:p[s]},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},ig.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(h*h/r<i){if(i<p){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&i<p){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=ig.event.x,a.py=ig.event.y,i.resume()}var c,d,e,f,g,h,i={},j=ig.dispatch("start","tick","end"),k=[1,1],l=.9,m=qi,n=ri,o=-30,p=si,q=.1,r=.64,s=[],u=[];return i.tick=function(){if((e*=.99)<.005)return c=null,j.end({type:"end",alpha:e=0}),!0;var b,d,i,m,n,p,r,t,v,w=s.length,x=u.length;for(d=0;d<x;++d)i=u[d],m=i.source,n=i.target,t=n.x-m.x,v=n.y-m.y,(p=t*t+v*v)&&(p=e*g[d]*((p=Math.sqrt(p))-f[d])/p,t*=p,v*=p,n.x-=t*(r=m.weight+n.weight?m.weight/(m.weight+n.weight):.5),n.y-=v*r,m.x+=t*(r=1-r),m.y+=v*r);if((r=e*q)&&(t=k[0]/2,v=k[1]/2,d=-1,r))for(;++d<w;)i=s[d],i.x+=(t-i.x)*r,i.y+=(v-i.y)*r;if(o)for(de(b=ig.geom.quadtree(s),e,h),d=-1;++d<w;)(i=s[d]).fixed||b.visit(a(i));for(d=-1;++d<w;)i=s[d],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*l,i.y-=(i.py-(i.py=i.y))*l);j.tick({type:"tick",alpha:e})},i.nodes=function(a){return arguments.length?(s=a,i):s},i.links=function(a){return arguments.length?(u=a,i):u},i.size=function(a){return arguments.length?(k=a,i):k},i.linkDistance=function(a){return arguments.length?(m="function"==typeof a?a:+a,i):m},i.distance=i.linkDistance,i.linkStrength=function(a){return arguments.length?(n="function"==typeof a?a:+a,i):n},i.friction=function(a){return arguments.length?(l=+a,i):l},i.charge=function(a){return arguments.length?(o="function"==typeof a?a:+a,i):o},i.chargeDistance=function(a){return arguments.length?(p=a*a,i):Math.sqrt(p)},i.gravity=function(a){return arguments.length?(q=+a,i):q},i.theta=function(a){return arguments.length?(r=a*a,i):Math.sqrt(r)},i.alpha=function(a){return arguments.length?(a=+a,e?a>0?e=a:(c.c=null,c.t=NaN,c=null,j.end({type:"end",alpha:e=0})):a>0&&(j.start({type:"start",alpha:e=a}),c=Ga(i.tick)),i):e},i.start=function(){function a(a,d){if(!c){for(c=new Array(e),i=0;i<e;++i)c[i]=[];for(i=0;i<j;++i){var f=u[i];c[f.source.index].push(f.target),c[f.target.index].push(f.source)}}for(var g,h=c[b],i=-1,k=h.length;++i<k;)if(!isNaN(g=h[i][a]))return g;return Math.random()*d}var b,c,d,e=s.length,j=u.length,l=k[0],p=k[1];for(b=0;b<e;++b)(d=s[b]).index=b,d.weight=0;for(b=0;b<j;++b)d=u[b],"number"==typeof d.source&&(d.source=s[d.source]),"number"==typeof d.target&&(d.target=s[d.target]),++d.source.weight,++d.target.weight;for(b=0;b<e;++b)d=s[b],isNaN(d.x)&&(d.x=a("x",l)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(f=[],"function"==typeof m)for(b=0;b<j;++b)f[b]=+m.call(this,u[b],b);else for(b=0;b<j;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;b<j;++b)g[b]=+n.call(this,u[b],b);else for(b=0;b<j;++b)g[b]=n;if(h=[],"function"==typeof o)for(b=0;b<e;++b)h[b]=+o.call(this,s[b],b);else for(b=0;b<e;++b)h[b]=o;return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){return d||(d=ig.behavior.drag().origin(t).on("dragstart.force",_d).on("drag.force",b).on("dragend.force",ae)),arguments.length?void this.on("mouseover.force",be).on("mouseout.force",ce).call(d):d},ig.rebind(i,j,"on")};var qi=20,ri=1,si=1/0;ig.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return ge(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=je,c=he,d=ie;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(fe(b,function(a){a.children&&(a.value=0)}),ge(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},ig.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=ig.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},ee(c,d)},ig.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(l<0?-1:1),o=ig.sum(j),p=o?(l-i*n)/o:0,q=ig.range(i),r=[];return null!=c&&q.sort(c===ti?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),q.forEach(function(a){r[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*p+n,padAngle:m}}),r}var b=Number,c=ti,d=0,e=Mg,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var ti={};ig.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=ig.permute(j,l),k=ig.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;o<r;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;n<m;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=t,c=oe,d=pe,e=ne,f=le,g=me;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:ui.get(b)||oe,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:vi.get(b)||pe,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var ui=ig.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(qe),f=a.map(re),g=ig.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;b<d;++b)c=g[b],h<i?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return ig.range(a.length).reverse()},default:oe}),vi=ig.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;c<f;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;c<m;++c){for(b=0,e=0;b<k;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];b<k;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);d<b;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,i<j&&(j=i)}for(c=0;c<m;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];if(d)for(b=0;b<e;b++)a[b][c][1]/=d;else for(b=0;b<e;b++)a[b][c][1]=g}for(c=0;c<f;++c)h[c]=0;return h},zero:pe});ig.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[ig.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=ve,e=te;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ba(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ue(a,b)}:Ba(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},ig.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,ge(h,function(a){a.r=+k(a.value)}),ge(h,Ae),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;ge(h,function(a){a.r+=l}),ge(h,Ae),ge(h,function(a){a.r-=l})}return De(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=ig.layout.hierarchy().sort(we),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,
a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},ee(a,c)},ig.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(ge(m,c),m.parent.m=-m.z,fe(m,d),j)fe(l,f);else{var n=l,o=l,p=l;fe(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);fe(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;g<h;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Je(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=He(g),e=Ge(e),g&&e;)i=Ge(i),f=He(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Ie(Ke(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!He(f)&&(f.t=g,f.m+=l-k),e&&!Ge(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=ig.layout.hierarchy().sort(null).value(null),h=Fe,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},ee(a,g)},ig.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;ge(i,function(a){var b=a.children;b&&b.length?(a.x=Me(b),a.y=Le(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Ne(i),l=Oe(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return ge(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=ig.layout.hierarchy().sort(null).value(null),c=Fe,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},ee(a,b)},ig.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(b<0?0:b),c.area=isNaN(d)||d<=0?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(c<f&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=f.y=0,f.value?(f.dx=j[0],f.dy=j[1]):f.dx=f.dy=0,g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=ig.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Pe,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Pe(b):Qe(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Qe(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Pe:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},ee(f,h)},ig.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=ig.random.normal.apply(ig,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=ig.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}},ig.scale={};var wi={floor:t,ceil:t};ig.scale.linear=function(){return Xe([0,1],[0,1],td,!1)};var xi={s:1,g:1,p:1,r:1,e:1};ig.scale.log=function(){return df(ig.scale.linear().domain([0,1]),10,!0,[1,10])};var yi=ig.format(".0e"),zi={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};ig.scale.pow=function(){return ef(ig.scale.linear(),1,[0,1])},ig.scale.sqrt=function(){return ig.scale.pow().exponent(.5)},ig.scale.ordinal=function(){return gf([],{t:"range",a:[[]]})},ig.scale.category10=function(){return ig.scale.ordinal().range(Ai)},ig.scale.category20=function(){return ig.scale.ordinal().range(Bi)},ig.scale.category20b=function(){return ig.scale.ordinal().range(Ci)},ig.scale.category20c=function(){return ig.scale.ordinal().range(Di)};var Ai=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ua),Bi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ua),Ci=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ua),Di=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ua);ig.scale.quantile=function(){return hf([],[])},ig.scale.quantize=function(){return jf(0,1,[0,1])},ig.scale.threshold=function(){return kf([.5],[0,1])},ig.scale.identity=function(){return lf([0,1])},ig.svg={},ig.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Og,l=h.apply(this,arguments)-Og,m=Math.abs(l-k),n=k>l?0:1;if(j<a&&(o=j,j=a,a=o),m>=Ng)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Ei?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=ca(q/j*Math.sin(r))),a&&(A=ca(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Lg?0:1;if(B&&sf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Lg?0:1;if(A&&sf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if(m>Jg&&(o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=a<j^n?0:1;var H=o,I=o;if(m<Lg){var J=null==y?[w,x]:null==u?[s,t]:Ic([s,t],[y,z],[u,v],[w,x]),K=s-J[0],L=t-J[1],M=u-J[0],N=v-J[1],O=1/Math.sin(Math.acos((K*M+L*N)/(Math.sqrt(K*K+L*L)*Math.sqrt(M*M+N*N)))/2),P=Math.sqrt(J[0]*J[0]+J[1]*J[1]);I=Math.min(o,(a-P)/(O-1)),H=Math.min(o,(j-P)/(O+1))}if(null!=u){var Q=tf(null==y?[w,x]:[y,z],[s,t],j,H,n),R=tf([u,v],[w,x],j,H,n);o===H?C.push("M",Q[0],"A",H,",",H," 0 0,",p," ",Q[1],"A",j,",",j," 0 ",1-n^sf(Q[1][0],Q[1][1],R[1][0],R[1][1]),",",n," ",R[1],"A",H,",",H," 0 0,",p," ",R[0]):C.push("M",Q[0],"A",H,",",H," 0 1,",p," ",R[0])}else C.push("M",s,",",t);if(null!=y){var S=tf([s,t],[y,z],a,-I,n),T=tf([w,x],null==u?[s,t]:[u,v],a,-I,n);o===I?C.push("L",T[0],"A",I,",",I," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^sf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",I,",",I," 0 0,",p," ",S[0]):C.push("L",T[0],"A",I,",",I," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=nf,d=of,e=mf,f=Ei,g=pf,h=qf,i=rf;return a.innerRadius=function(b){return arguments.length?(c=Ba(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Ba(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Ba(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Ei?Ei:Ba(b),a):f},a.startAngle=function(b){return arguments.length?(g=Ba(b),a):g},a.endAngle=function(b){return arguments.length?(h=Ba(b),a):h},a.padAngle=function(b){return arguments.length?(i=Ba(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Og;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Ei="auto";ig.svg.line=function(){return uf(t)};var Fi=ig.map({linear:vf,"linear-closed":wf,step:xf,"step-before":yf,"step-after":zf,basis:Ff,"basis-open":Gf,"basis-closed":Hf,bundle:If,cardinal:Cf,"cardinal-open":Af,"cardinal-closed":Bf,monotone:Of});Fi.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Gi=[0,2/3,1/3,0],Hi=[0,1/3,2/3,0],Ii=[0,1/6,2/3,1/6];ig.svg.line.radial=function(){var a=uf(Pf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},yf.reverse=zf,zf.reverse=yf,ig.svg.area=function(){return Qf(t)},ig.svg.area.radial=function(){var a=Qf(Pf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},ig.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Og,k=j.call(a,e,d)-Og;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Lg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=tc,g=uc,h=Rf,i=pf,j=qf;return a.radius=function(b){return arguments.length?(h=Ba(b),a):h},a.source=function(b){return arguments.length?(f=Ba(b),a):f},a.target=function(b){return arguments.length?(g=Ba(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ba(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ba(b),a):j},a},ig.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=tc,c=uc,d=Sf;return a.source=function(c){return arguments.length?(b=Ba(c),a):b},a.target=function(b){return arguments.length?(c=Ba(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},ig.svg.diagonal.radial=function(){var a=ig.svg.diagonal(),b=Sf,c=a.projection;return a.projection=function(a){return arguments.length?c(Tf(b=a)):b},a},ig.svg.symbol=function(){function a(a,d){return(Ji.get(b.call(this,a,d))||Wf)(c.call(this,a,d))}var b=Vf,c=Uf;return a.type=function(c){return arguments.length?(b=Ba(c),a):b},a.size=function(b){return arguments.length?(c=Ba(b),a):c},a};var Ji=ig.map({circle:Wf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Li)),c=b*Li;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Ki),c=b*Ki/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Ki),c=b*Ki/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});ig.svg.symbolTypes=Ji.keys();var Ki=Math.sqrt(3),Li=Math.tan(30*Pg);Bg.transition=function(a){for(var b,c,d=Mi||++Qi,e=_f(a),f=[],g=Ni||{time:Date.now(),ease:Ad,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&ag(c,k,e,d,g),b.push(c)}return Yf(f,e,d)},Bg.interrupt=function(a){return this.each(null==a?Oi:Xf(_f(a)))};var Mi,Ni,Oi=Xf(_f()),Pi=[],Qi=0;Pi.call=Bg.call,Pi.empty=Bg.empty,Pi.node=Bg.node,Pi.size=Bg.size,ig.transition=function(a,b){return a&&a.transition?Mi?a.transition(b):a:ig.selection().transition(a)},ig.transition.prototype=Pi,Pi.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=D(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),ag(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Yf(g,f,e)},Pi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=E(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&ag(e,o,h,g,f),b.push(e)}return Yf(i,h,g)},Pi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Q(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Yf(e,this.namespace,this.id)},Pi.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):S(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Pi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Vd:td,h=ig.ns.qualify(a);return Zf(this,"attr."+a,b,h.local?f:e)},Pi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=ig.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Pi.style=function(a,b,d){function e(){this.style.removeProperty(a)}function f(b){return null==b?e:(b+="",function(){var e,f=c(this).getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=td(f,b),function(b){this.style.setProperty(a,e(b),d)})})}var g=arguments.length;if(g<3){if("string"!=typeof a){g<2&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return Zf(this,"style."+a,b,f)},Pi.styleTween=function(a,b,d){function e(e,f){var g=b.call(this,e,f,c(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),d)}}return arguments.length<3&&(d=""),this.tween("style."+a,e)},Pi.text=function(a){return Zf(this,"text",a,$f)},Pi.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Pi.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=ig.ease.apply(ig,arguments)),S(this,function(d){d[c][b].ease=a}))},Pi.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:S(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Pi.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:S(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Pi.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Ni,f=Mi;try{Mi=c,S(this,function(b,e,f){Ni=b[d][c],a.call(b,b.__data__,e,f)})}finally{Ni=e,Mi=f}}else S(this,function(e){var f=e[d][c];(f.event||(f.event=ig.dispatch("start","end","interrupt"))).on(a,b)});return this},Pi.transition=function(){for(var a,b,c,d,e=this.id,f=++Qi,g=this.namespace,h=[],i=0,j=this.length;i<j;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;k<l;k++)(c=b[k])&&(d=c[g][e],ag(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Yf(h,g,f)},ig.svg.axis=function(){function a(a){a.each(function(){var a,j=ig.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):t:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Jg),q=ig.transition(o.exit()).style("opacity",Jg).remove(),r=ig.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,u=Se(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),ig.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=bg,x="x",z="y",y="x2",A="y2",D.attr("dy",G<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+u[0]+","+G*f+"V0H"+u[1]+"V"+G*f)):(a=cg,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",G<0?"end":"start"),w.attr("d","M"+G*f+","+u[0]+"H0V"+u[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*s),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*s),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=ig.scale.linear(),d=Ri,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Si?b+"":Ri,a):d},a.ticks=function(){return arguments.length?(h=kg(arguments),a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Ri="bottom",Si={top:1,right:1,bottom:1,left:1};ig.svg.brush=function(){function a(c){c.each(function(){var c=ig.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=c.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),c.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=c.selectAll(".resize").data(p,t);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ti[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=ig.transition(c),m=ig.transition(g);j&&(i=Se(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),d(l)),k&&(i=Se(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==ig.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),z())}function p(){32==ig.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,z())}function q(){var a=ig.mouse(v),c=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(ig.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(d(y),c=!0),C&&r(a,k,1)&&(e(y),c=!0),c&&(b(y),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Se(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];if(D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),k<d?(e=d,d=k):e=k),p[0]!=d||p[1]!=e)return c?h=null:g=null,p[0]=d,p[1]=e,!0}function s(){q(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),ig.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=ig.select(ig.event.target),x=i.of(v,arguments),y=ig.select(v),A=w.datum(),B=!/^(n|s)$/.test(A)&&j,C=!/^(e|w)$/.test(A)&&k,D=w.classed("extent"),E=Y(v),F=ig.mouse(v),G=ig.select(c(v)).on("keydown.brush",f).on("keyup.brush",p);if(ig.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),y.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(A){var H=+/w$/.test(A),I=+/^n/.test(A);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else ig.event.altKey&&(t=F.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),ig.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=B(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Ui[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Mi?ig.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=ud(l,b.x),d=ud(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Ui[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Ui[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),d<c&&(i=c,c=d,d=i),c==l[0]&&d==l[1]||(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),f<e&&(i=e,e=f,f=i),e==m[0]&&f==m[1]||(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),d<c&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),f<e&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},ig.rebind(a,i,"on")};var Ti={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ui=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Vi=mh.format=sh.timeFormat,Wi=Vi.utc,Xi=Wi("%Y-%m-%dT%H:%M:%S.%LZ");Vi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dg:Xi,dg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},dg.toString=Xi.toString,mh.second=Pa(function(a){return new nh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),mh.seconds=mh.second.range,mh.seconds.utc=mh.second.utc.range,mh.minute=Pa(function(a){return new nh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),mh.minutes=mh.minute.range,mh.minutes.utc=mh.minute.utc.range,mh.hour=Pa(function(a){var b=a.getTimezoneOffset()/60;return new nh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),mh.hours=mh.hour.range,mh.hours.utc=mh.hour.utc.range,mh.month=Pa(function(a){return a=mh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),mh.months=mh.month.range,mh.months.utc=mh.month.utc.range;var Yi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Zi=[[mh.second,1],[mh.second,5],[mh.second,15],[mh.second,30],[mh.minute,1],[mh.minute,5],[mh.minute,15],[mh.minute,30],[mh.hour,1],[mh.hour,3],[mh.hour,6],[mh.hour,12],[mh.day,1],[mh.day,2],[mh.week,1],[mh.month,1],[mh.month,3],[mh.year,1]],$i=Vi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Eb]]),_i={range:function(a,b,c){return ig.range(Math.ceil(a/c)*c,+b,c).map(fg)},floor:t,ceil:t};Zi.year=mh.year,mh.scale=function(){return eg(ig.scale.linear(),Zi,$i)};var aj=Zi.map(function(a){return[a[0].utc,a[1]]}),bj=Wi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Eb]]);aj.year=mh.year.utc,mh.scale.utc=function(){return eg(ig.scale.linear(),aj,bj)},ig.text=Ca(function(a){return a.responseText}),ig.json=function(a,b){return Da(a,"application/json",gg,b)},ig.html=function(a,b){return Da(a,"text/html",hg,b)},ig.xml=Ca(function(a){return a.responseXML}),"function"==typeof define&&define.amd?(this.d3=ig,define(ig)):"object"==typeof b&&b.exports?b.exports=ig:this.d3=ig}()},{}],128:[function(a,b,c){b.exports=function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}},{}],129:[function(a,b,c){function d(a,b){for(;a&&a.nodeType!==e;){if(a.matches(b))return a;a=a.parentNode}}var e=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var f=Element.prototype;f.matches=f.matchesSelector||f.mozMatchesSelector||f.msMatchesSelector||f.oMatchesSelector||f.webkitMatchesSelector}b.exports=d},{}],130:[function(a,b,c){function d(a,b,c,d,f){var g=e.apply(this,arguments);return a.addEventListener(c,g,f),{destroy:function(){a.removeEventListener(c,g,f)}}}function e(a,b,c,d){return function(c){c.delegateTarget=f(c.target,b),c.delegateTarget&&d.call(a,c)}}var f=a("./closest");b.exports=d},{"./closest":129}],131:[function(a,b,c){function d(a,b,c){var d=c.expose||{};Array.isArray(d)&&(d=d.reduce(function(a,b){return a[b]=!0,a},{}));var e={},h={},j=g();if(c.dedupe&&(a.forEach(function(a){var b=i(a.source);j.add(a,b),e[b]?e[b].push(a):e[b]=[a]}),Object.keys(e).forEach(function(a){for(var b=e[a];b.length>1;){var c=b.pop();c.dedupe=b[0].id,c.sameDeps=j.cmp(b[0].deps,c.deps),h[c.id]=b[0].id}})),c.index){var k={},l=0;a.forEach(function(a,b){f(d,a.id)?(a.index=a.id,l++,d[a.id]!==!0&&(k[d[a.id]]=a.index)):a.index=b+1-l,k[a.id]=a.index}),a.forEach(function(a){a.indexDeps={},Object.keys(a.deps).forEach(function(b){var c=a.deps[b];a.indexDeps[b]=k[c]}),a.dedupe&&(a.dedupeIndex=k[a.dedupe]),b.push(a)})}else a.forEach(function(a){b.push(a)});b.push(null)}function e(a,b){return a.id+a.hash<b.id+b.hash?-1:1}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(){function a(a,b){c[a.id]=a.deps,d[a.id]=b}function b(a,e,f){if(!a&&!e)return!0;if(!a||!e)return!1;var g=Object.keys(a);if(g.length!==Object.keys(e).length)return!1;for(var h=0;h<g.length;h++){var i=g[h],j=a[i],k=e[i],l=d[j],m=d[k],n=c[j],o=c[k];if(j!==k&&(l!==m||!f&&!b(n,o,1)))return!1}return!0}var c={},d={};return{add:a,cmp:b}}var h=a("through2"),i=a("shasum");b.exports=function(a){function b(a,b,c){f.push(a),c()}function c(){var b=this;f.sort(e),d(f,b,a)}a||(a={});var f=[];return h.obj(b,c)}},{shasum:290,through2:320}],132:[function(a,b,c){function d(a,b){return b||(b={}),e.parse(a,{ecmaVersion:g(b.ecmaVersion,8),sourceType:b.sourceType,ranges:g(b.ranges,b.range),locations:g(b.locations,b.loc),allowReserved:g(b.allowReserved,!0),allowReturnOutsideFunction:g(b.allowReturnOutsideFunction,!0),allowHashBang:g(b.allowHashBang,!0)})}var e=a("acorn"),f=a("acorn/dist/walk"),g=a("defined"),h=/\brequire\b/,c=b.exports=function(a,b){return c.find(a,b).strings};c.find=function(a,b){function c(c,d,e){var h=j.test(a.slice(c.start,c.end));if(h&&(f.base[c.type](c,d,e),"CallExpression"===c.type&&g(c))){if(c.arguments.length){var k=c.arguments[0];"Literal"===k.type?i.strings.push(k.value):i.expressions.push(a.slice(k.start,k.end))}b.nodes&&i.nodes.push(c)}}b||(b={});var e=void 0===b.word?"require":b.word;"string"!=typeof a&&(a=String(a));var g=b.isRequire||function(a){return"Identifier"===a.callee.type&&a.callee.name===e},i={strings:[],expressions:[]};b.nodes&&(i.nodes=[]);var j="require"===e?h:RegExp("\\b"+e+"\\b");if(!j.test(a))return i;var k=d(a,b.parse);return f.recursive(k,null,{Statement:c,Expression:c}),i}},{acorn:3,"acorn/dist/walk":4,defined:128}],133:[function(a,b,c){"use strict";b.exports=function(a){for(var b=[],c=a.split("."),d=0;d<c.length;d++){for(var e=c[d];"\\"===e[e.length-1];)e=e.slice(0,-1)+".",e+=c[++d];b.push(e)}return b}},{}],134:[function(a,b,c){"use strict";function d(a,b,c){"undefined"==typeof c&&(c=b,b=a,a=null),e.Duplex.call(this,a),"function"!=typeof c.read&&(c=new e.Readable(a).wrap(c)),this._writable=b,this._readable=c,this._waiting=!1;var d=this;b.once("finish",function(){d.end()}),this.once("finish",function(){b.end()}),c.on("readable",function(){d._waiting&&(d._waiting=!1,d._read())}),c.once("end",function(){d.push(null)}),a&&"undefined"!=typeof a.bubbleErrors&&!a.bubbleErrors||(b.on("error",function(a){d.emit("error",a)}),c.on("error",function(a){d.emit("error",a)}))}var e=a("readable-stream");d.prototype=Object.create(e.Duplex.prototype,{constructor:{value:d}}),d.prototype._write=function(a,b,c){this._writable.write(a,b,c)},d.prototype._read=function(){for(var a,b=0;null!==(a=this._readable.read());)this.push(a),b++;0===b&&(this._waiting=!0)},b.exports=function(a,b,c){return new d(a,b,c)},b.exports.DuplexWrapper=d},{"readable-stream":265}],135:[function(a,b,c){"use strict";var d=/[|\\{}()[\]^$+*?.]/g;b.exports=function(a){if("string"!=typeof a)throw new TypeError("Expected a string");return a.replace(d,"\\$&")}},{}],136:[function(a,b,c){(function(b){!function(){"use strict";function d(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1,parenthesizedComprehensionBlock:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,verbatim:null}}function e(a,b){var c="";for(b|=0;b>0;b>>>=1,
a+=a)1&b&&(c+=a);return c}function f(a){return/[\r\n]/g.test(a)}function g(a){var b=a.length;return b&&O.code.isLineTerminator(a.charCodeAt(b-1))}function h(a,b){function c(a){return"object"==typeof a&&a instanceof Object&&!(a instanceof RegExp)}var d,e;for(d in b)b.hasOwnProperty(d)&&(e=b[d],c(e)?c(a[d])?h(a[d],e):a[d]=h({},e):a[d]=e);return a}function i(a){var b,c,d,e,f;if(a!==a)throw new Error("Numeric literal whose value is NaN");if(a<0||0===a&&1/a<0)throw new Error("Numeric literal whose value is negative");if(a===1/0)return S?"null":T?"1e400":"1e+400";if(b=""+a,!T||b.length<3)return b;for(c=b.indexOf("."),S||48!==b.charCodeAt(0)||1!==c||(c=0,b=b.slice(1)),d=b,b=b.replace("e+","e"),e=0,(f=d.indexOf("e"))>0&&(e=+d.slice(f+1),d=d.slice(0,f)),c>=0&&(e-=d.length-c-1,d=+(d.slice(0,c)+d.slice(c+1))+""),f=0;48===d.charCodeAt(d.length+f-1);)--f;return 0!==f&&(e-=f,d=d.slice(0,f)),0!==e&&(d+="e"+e),(d.length<b.length||U&&a>1e12&&Math.floor(a)===a&&(d="0x"+a.toString(16)).length<b.length)&&+d===a&&(b=d),b}function j(a,b){return 8232===(a&-2)?(b?"u":"\\u")+(8232===a?"2028":"2029"):10===a||13===a?(b?"":"\\")+(10===a?"n":"r"):String.fromCharCode(a)}function k(a){var b,c,d,e,f,g,h,i;if(c=a.toString(),a.source){if(b=c.match(/\/([^\/]*)$/),!b)return c;for(d=b[1],c="",h=!1,i=!1,e=0,f=a.source.length;e<f;++e)g=a.source.charCodeAt(e),i?(c+=j(g,i),i=!1):(h?93===g&&(h=!1):47===g?c+="\\":91===g&&(h=!0),c+=j(g,i),i=92===g);return"/"+c+"/"+d}return c}function l(a,b){var c,d="\\";switch(a){case 8:d+="b";break;case 12:d+="f";break;case 9:d+="t";break;default:c=a.toString(16).toUpperCase(),d+=S||a>255?"u"+"0000".slice(c.length)+c:0!==a||O.code.isDecimalDigit(b)?11===a?"x0B":"x"+"00".slice(c.length)+c:"0"}return d}function m(a){var b="\\";switch(a){case 92:b+="\\";break;case 10:b+="n";break;case 13:b+="r";break;case 8232:b+="u2028";break;case 8233:b+="u2029";break;default:throw new Error("Incorrectly classified character")}return b}function n(a){var b,c,d,e;for(e="double"===V?'"':"'",b=0,c=a.length;b<c;++b){if(d=a.charCodeAt(b),39===d){e='"';break}if(34===d){e="'";break}92===d&&++b}return e+a+e}function o(a){var b,c,d,e,f,g="",h=0,i=0;for(b=0,c=a.length;b<c;++b){if(d=a.charCodeAt(b),39===d)++h;else if(34===d)++i;else if(47===d&&S)g+="\\";else{if(O.code.isLineTerminator(d)||92===d){g+=m(d);continue}if(S&&d<32||!(S||W||d>=32&&d<=126)){g+=l(d,a.charCodeAt(b+1));continue}}g+=String.fromCharCode(d)}if(e=!("double"===V||"auto"===V&&i<h),f=e?"'":'"',!(e?h:i))return f+g+f;for(a=g,g=f,b=0,c=a.length;b<c;++b)d=a.charCodeAt(b),(39===d&&e||34===d&&!e)&&(g+="\\"),g+=String.fromCharCode(d);return g+f}function p(a){var b,c,d,e="";for(b=0,c=a.length;b<c;++b)d=a[b],e+=P(d)?p(d):d;return e}function q(a,b){if(!da)return P(a)?p(a):a;if(null==b){if(a instanceof M)return a;b={}}return null==b.loc?new M(null,null,da,a,b.name||null):new M(b.loc.start.line,b.loc.start.column,da===!0?b.loc.source||null:da,a,b.name||null)}function r(){return Y?Y:" "}function s(a,b){var c=q(a).toString(),d=q(b).toString(),e=c.charCodeAt(c.length-1),f=d.charCodeAt(0);return(43===e||45===e)&&e===f||O.code.isIdentifierPart(e)&&O.code.isIdentifierPart(f)||47===e&&105===f?[a,r(),b]:O.code.isWhiteSpace(e)||O.code.isLineTerminator(e)||O.code.isWhiteSpace(f)||O.code.isLineTerminator(f)?[a,b]:[a,Y,b]}function t(a){return[Q,a]}function u(a){var b,c;return b=Q,Q+=R,c=a.call(this,Q),Q=b,c}function v(a){var b;for(b=a.length-1;b>=0&&!O.code.isLineTerminator(a.charCodeAt(b));--b);return a.length-1-b}function w(a,b){var c,d,e,f,g,h,i,j;for(c=a.split(/\r\n|[\r\n]/),h=Number.MAX_VALUE,d=1,e=c.length;d<e;++d){for(f=c[d],g=0;g<f.length&&O.code.isWhiteSpace(f.charCodeAt(g));)++g;h>g&&(h=g)}for("undefined"!=typeof b?(i=Q,"*"===c[1][h]&&(b+=" "),Q=b):(1&h&&--h,i=Q),d=1,e=c.length;d<e;++d)j=q(t(c[d].slice(h))),c[d]=da?j.join(""):j;return Q=i,c.join("\n")}function x(a,b){return"Line"===a.type?g(a.value)?"//"+a.value:"//"+a.value+"\n":ba.format.indent.adjustMultilineComment&&/[\n\r]/.test(a.value)?w("/*"+a.value+"*/",b):"/*"+a.value+"*/"}function y(a,b){var c,d,f,h,i,j,k;if(a.leadingComments&&a.leadingComments.length>0){for(h=b,f=a.leadingComments[0],b=[],_&&a.type===J.Program&&0===a.body.length&&b.push("\n"),b.push(x(f)),g(q(b).toString())||b.push("\n"),c=1,d=a.leadingComments.length;c<d;++c)f=a.leadingComments[c],k=[x(f)],g(q(k).toString())||k.push("\n"),b.push(t(k));b.push(t(h))}if(a.trailingComments)for(i=!g(q(b).toString()),j=e(" ",v(q([Q,b,R]).toString())),c=0,d=a.trailingComments.length;c<d;++c)f=a.trailingComments[c],i?(b=0===c?[b,R]:[b,j],b.push(x(f,j))):b=[b,t(x(f))],c===d-1||g(q(b).toString())||(b=[b,"\n"]);return b}function z(a,b,c){return b<c?["(",a,")"]:a}function A(a,b,c){var d,e;return e=!ba.comment||!a.leadingComments,a.type===J.BlockStatement&&e?[Y,H(a,{functionBody:c})]:a.type===J.EmptyStatement&&e?";":(u(function(){d=[X,t(H(a,{semicolonOptional:b,functionBody:c}))]}),d)}function B(a,b){var c=g(q(b).toString());return a.type!==J.BlockStatement||ba.comment&&a.leadingComments||c?c?[b,Q]:[b,X,Q]:[b,Y]}function C(a,b){var c,d;for(d=a[ba.verbatim].split(/\r\n|\n/),c=1;c<d.length;c++)d[c]=X+Q+d[c];return d=z(d,K.Sequence,b.precedence),q(d,a)}function D(a){return q(a.name,a)}function E(a,b){var c;return c=a.type===J.Identifier?D(a):G(a,{precedence:b.precedence,allowIn:b.allowIn,allowCall:!0})}function F(a){var b,c,d,e,f;if(f=a.type===J.ArrowFunctionExpression,f&&1===a.params.length&&a.params[0].type===J.Identifier)b=[D(a.params[0])];else{for(b=["("],c=0,d=a.params.length;c<d;++c)b.push(E(a.params[c],{precedence:K.Assignment,allowIn:!0})),c+1<d&&b.push(","+Y);b.push(")")}return f&&b.push(Y,"=>"),a.expression?(b.push(Y),e=G(a.body,{precedence:K.Assignment,allowIn:!0,allowCall:!0}),"{"===e.toString().charAt(0)&&(e=["(",e,")"]),b.push(e)):b.push(A(a.body,!1,!0)),b}function G(a,b){var c,d,e,h,j,l,m,n,p,t,v,w,x,y,A,B,E;if(d=b.precedence,x=b.allowIn,y=b.allowCall,e=a.type||b.type,ba.verbatim&&a.hasOwnProperty(ba.verbatim))return C(a,b);switch(e){case J.SequenceExpression:for(c=[],x|=K.Sequence<d,j=0,l=a.expressions.length;j<l;++j)c.push(G(a.expressions[j],{precedence:K.Assignment,allowIn:x,allowCall:!0})),j+1<l&&c.push(","+Y);c=z(c,K.Sequence,d);break;case J.AssignmentExpression:x|=K.Assignment<d,c=z([G(a.left,{precedence:K.Call,allowIn:x,allowCall:!0}),Y+a.operator+Y,G(a.right,{precedence:K.Assignment,allowIn:x,allowCall:!0})],K.Assignment,d);break;case J.ArrowFunctionExpression:x|=K.ArrowFunction<d,c=z(F(a),K.ArrowFunction,d);break;case J.ConditionalExpression:x|=K.Conditional<d,c=z([G(a.test,{precedence:K.LogicalOR,allowIn:x,allowCall:!0}),Y+"?"+Y,G(a.consequent,{precedence:K.Assignment,allowIn:x,allowCall:!0}),Y+":"+Y,G(a.alternate,{precedence:K.Assignment,allowIn:x,allowCall:!0})],K.Conditional,d);break;case J.LogicalExpression:case J.BinaryExpression:h=L[a.operator],x|=h<d,n=G(a.left,{precedence:h,allowIn:x,allowCall:!0}),v=n.toString(),c=47===v.charCodeAt(v.length-1)&&O.code.isIdentifierPart(a.operator.charCodeAt(0))?[n,r(),a.operator]:s(n,a.operator),n=G(a.right,{precedence:h+1,allowIn:x,allowCall:!0}),"/"===a.operator&&"/"===n.toString().charAt(0)||"<"===a.operator.slice(-1)&&"!--"===n.toString().slice(0,3)?c.push(r(),n):c=s(c,n),c="in"!==a.operator||x?z(c,h,d):["(",c,")"];break;case J.CallExpression:for(c=[G(a.callee,{precedence:K.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!1})],c.push("("),j=0,l=a.arguments.length;j<l;++j)c.push(G(a.arguments[j],{precedence:K.Assignment,allowIn:!0,allowCall:!0})),j+1<l&&c.push(","+Y);c.push(")"),c=y?z(c,K.Call,d):["(",c,")"];break;case J.NewExpression:if(l=a.arguments.length,A=void 0===b.allowUnparenthesizedNew||b.allowUnparenthesizedNew,c=s("new",G(a.callee,{precedence:K.New,allowIn:!0,allowCall:!1,allowUnparenthesizedNew:A&&!Z&&0===l})),!A||Z||l>0){for(c.push("("),j=0;j<l;++j)c.push(G(a.arguments[j],{precedence:K.Assignment,allowIn:!0,allowCall:!0})),j+1<l&&c.push(","+Y);c.push(")")}c=z(c,K.New,d);break;case J.MemberExpression:c=[G(a.object,{precedence:K.Call,allowIn:!0,allowCall:y,allowUnparenthesizedNew:!1})],a.computed?c.push("[",G(a.property,{precedence:K.Sequence,allowIn:!0,allowCall:y}),"]"):(a.object.type===J.Literal&&"number"==typeof a.object.value&&(n=q(c).toString(),n.indexOf(".")<0&&!/[eExX]/.test(n)&&O.code.isDecimalDigit(n.charCodeAt(n.length-1))&&!(n.length>=2&&48===n.charCodeAt(0))&&c.push(".")),c.push(".",D(a.property))),c=z(c,K.Member,d);break;case J.UnaryExpression:n=G(a.argument,{precedence:K.Unary,allowIn:!0,allowCall:!0}),""===Y?c=s(a.operator,n):(c=[a.operator],a.operator.length>2?c=s(c,n):(v=q(c).toString(),t=v.charCodeAt(v.length-1),w=n.toString().charCodeAt(0),(43===t||45===t)&&t===w||O.code.isIdentifierPart(t)&&O.code.isIdentifierPart(w)?c.push(r(),n):c.push(n))),c=z(c,K.Unary,d);break;case J.YieldExpression:c=a.delegate?"yield*":"yield",a.argument&&(c=s(c,G(a.argument,{precedence:K.Yield,allowIn:!0,allowCall:!0}))),c=z(c,K.Yield,d);break;case J.UpdateExpression:c=a.prefix?z([a.operator,G(a.argument,{precedence:K.Unary,allowIn:!0,allowCall:!0})],K.Unary,d):z([G(a.argument,{precedence:K.Postfix,allowIn:!0,allowCall:!0}),a.operator],K.Postfix,d);break;case J.FunctionExpression:E=a.generator&&!ba.moz.starlessGenerator,c=E?"function*":"function",c=a.id?[c,E?Y:r(),D(a.id),F(a)]:[c+Y,F(a)];break;case J.ArrayPattern:case J.ArrayExpression:if(!a.elements.length){c="[]";break}p=a.elements.length>1,c=["[",p?X:""],u(function(b){for(j=0,l=a.elements.length;j<l;++j)a.elements[j]?c.push(p?b:"",G(a.elements[j],{precedence:K.Assignment,allowIn:!0,allowCall:!0})):(p&&c.push(b),j+1===l&&c.push(",")),j+1<l&&c.push(","+(p?X:Y))}),p&&!g(q(c).toString())&&c.push(X),c.push(p?Q:"","]");break;case J.Property:"get"===a.kind||"set"===a.kind?c=[a.kind,r(),G(a.key,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),F(a.value)]:a.shorthand?c=G(a.key,{precedence:K.Sequence,allowIn:!0,allowCall:!0}):a.method?(c=[],a.value.generator&&c.push("*"),c.push(G(a.key,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),F(a.value))):c=[G(a.key,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),":"+Y,G(a.value,{precedence:K.Assignment,allowIn:!0,allowCall:!0})];break;case J.ObjectExpression:if(!a.properties.length){c="{}";break}if(p=a.properties.length>1,u(function(){n=G(a.properties[0],{precedence:K.Sequence,allowIn:!0,allowCall:!0,type:J.Property})}),!p&&!f(q(n).toString())){c=["{",Y,n,Y,"}"];break}u(function(b){if(c=["{",X,b,n],p)for(c.push(","+X),j=1,l=a.properties.length;j<l;++j)c.push(b,G(a.properties[j],{precedence:K.Sequence,allowIn:!0,allowCall:!0,type:J.Property})),j+1<l&&c.push(","+X)}),g(q(c).toString())||c.push(X),c.push(Q,"}");break;case J.ObjectPattern:if(!a.properties.length){c="{}";break}if(p=!1,1===a.properties.length)B=a.properties[0],B.value.type!==J.Identifier&&(p=!0);else for(j=0,l=a.properties.length;j<l;++j)if(B=a.properties[j],!B.shorthand){p=!0;break}c=["{",p?X:""],u(function(b){for(j=0,l=a.properties.length;j<l;++j)c.push(p?b:"",G(a.properties[j],{precedence:K.Sequence,allowIn:!0,allowCall:!0})),j+1<l&&c.push(","+(p?X:Y))}),p&&!g(q(c).toString())&&c.push(X),c.push(p?Q:"","}");break;case J.ThisExpression:c="this";break;case J.Identifier:c=D(a);break;case J.Literal:if(a.hasOwnProperty("raw")&&ca)try{if(m=ca(a.raw).body[0].expression,m.type===J.Literal&&m.value===a.value){c=a.raw;break}}catch(a){}if(null===a.value){c="null";break}if("string"==typeof a.value){c=o(a.value);break}if("number"==typeof a.value){c=i(a.value);break}if("boolean"==typeof a.value){c=a.value?"true":"false";break}c=k(a.value);break;case J.GeneratorExpression:case J.ComprehensionExpression:c=e===J.GeneratorExpression?["("]:["["],ba.moz.comprehensionExpressionStartsWithAssignment&&(n=G(a.body,{precedence:K.Assignment,allowIn:!0,allowCall:!0}),c.push(n)),a.blocks&&u(function(){for(j=0,l=a.blocks.length;j<l;++j)n=G(a.blocks[j],{precedence:K.Sequence,allowIn:!0,allowCall:!0}),j>0||ba.moz.comprehensionExpressionStartsWithAssignment?c=s(c,n):c.push(n)}),a.filter&&(c=s(c,"if"+Y),n=G(a.filter,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),c=ba.moz.parenthesizedComprehensionBlock?s(c,["(",n,")"]):s(c,n)),ba.moz.comprehensionExpressionStartsWithAssignment||(n=G(a.body,{precedence:K.Assignment,allowIn:!0,allowCall:!0}),c=s(c,n)),c.push(e===J.GeneratorExpression?")":"]");break;case J.ComprehensionBlock:n=a.left.type===J.VariableDeclaration?[a.left.kind,r(),H(a.left.declarations[0],{allowIn:!1})]:G(a.left,{precedence:K.Call,allowIn:!0,allowCall:!0}),n=s(n,a.of?"of":"in"),n=s(n,G(a.right,{precedence:K.Sequence,allowIn:!0,allowCall:!0})),c=ba.moz.parenthesizedComprehensionBlock?["for"+Y+"(",n,")"]:s("for"+Y,n);break;default:throw new Error("Unknown expression type: "+a.type)}return q(c,a)}function H(a,b){var c,d,e,f,h,i,j,k,l,m;switch(h=!0,l=";",i=!1,j=!1,b&&(h=void 0===b.allowIn||b.allowIn,$||b.semicolonOptional!==!0||(l=""),i=b.functionBody,j=b.directiveContext),a.type){case J.BlockStatement:e=["{",X],u(function(){for(c=0,d=a.body.length;c<d;++c)k=t(H(a.body[c],{semicolonOptional:c===d-1,directiveContext:i})),e.push(k),g(q(k).toString())||e.push(X)}),e.push(t("}"));break;case J.BreakStatement:e=a.label?"break "+a.label.name+l:"break"+l;break;case J.ContinueStatement:e=a.label?"continue "+a.label.name+l:"continue"+l;break;case J.DirectiveStatement:e=a.raw?a.raw+l:n(a.directive)+l;break;case J.DoWhileStatement:e=s("do",A(a.body)),e=B(a.body,e),e=s(e,["while"+Y+"(",G(a.test,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),")"+l]);break;case J.CatchClause:u(function(){var b;e=["catch"+Y+"(",G(a.param,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),")"],a.guard&&(b=G(a.guard,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),e.splice(2,0," if ",b))}),e.push(A(a.body));break;case J.DebuggerStatement:e="debugger"+l;break;case J.EmptyStatement:e=";";break;case J.ExportDeclaration:if(e="export ",a.declaration){e=[e,H(a.declaration,{semicolonOptional:""===l})];break}break;case J.ExpressionStatement:e=[G(a.expression,{precedence:K.Sequence,allowIn:!0,allowCall:!0})],k=q(e).toString(),"{"===k.charAt(0)||"function"===k.slice(0,8)&&"* (".indexOf(k.charAt(8))>=0||aa&&j&&a.expression.type===J.Literal&&"string"==typeof a.expression.value?e=["(",e,")"+l]:e.push(l);break;case J.VariableDeclarator:e=a.init?[G(a.id,{precedence:K.Assignment,allowIn:h,allowCall:!0}),Y,"=",Y,G(a.init,{precedence:K.Assignment,allowIn:h,allowCall:!0})]:E(a.id,{precedence:K.Assignment,allowIn:h});break;case J.VariableDeclaration:e=[a.kind],1===a.declarations.length&&a.declarations[0].init&&a.declarations[0].init.type===J.FunctionExpression?e.push(r(),H(a.declarations[0],{allowIn:h})):u(function(){for(f=a.declarations[0],ba.comment&&f.leadingComments?e.push("\n",t(H(f,{allowIn:h}))):e.push(r(),H(f,{allowIn:h})),c=1,d=a.declarations.length;c<d;++c)f=a.declarations[c],ba.comment&&f.leadingComments?e.push(","+X,t(H(f,{allowIn:h}))):e.push(","+Y,H(f,{allowIn:h}))}),e.push(l);break;case J.ThrowStatement:e=[s("throw",G(a.argument,{precedence:K.Sequence,allowIn:!0,allowCall:!0})),l];break;case J.TryStatement:if(e=["try",A(a.block)],e=B(a.block,e),a.handlers)for(c=0,d=a.handlers.length;c<d;++c)e=s(e,H(a.handlers[c])),(a.finalizer||c+1!==d)&&(e=B(a.handlers[c].body,e));else{for(a.guardedHandlers=a.guardedHandlers||[],c=0,d=a.guardedHandlers.length;c<d;++c)e=s(e,H(a.guardedHandlers[c])),(a.finalizer||c+1!==d)&&(e=B(a.guardedHandlers[c].body,e));if(a.handler)if(P(a.handler))for(c=0,d=a.handler.length;c<d;++c)e=s(e,H(a.handler[c])),(a.finalizer||c+1!==d)&&(e=B(a.handler[c].body,e));else e=s(e,H(a.handler)),a.finalizer&&(e=B(a.handler.body,e))}a.finalizer&&(e=s(e,["finally",A(a.finalizer)]));break;case J.SwitchStatement:if(u(function(){e=["switch"+Y+"(",G(a.discriminant,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),")"+Y+"{"+X]}),a.cases)for(c=0,d=a.cases.length;c<d;++c)k=t(H(a.cases[c],{semicolonOptional:c===d-1})),e.push(k),g(q(k).toString())||e.push(X);e.push(t("}"));break;case J.SwitchCase:u(function(){for(e=a.test?[s("case",G(a.test,{precedence:K.Sequence,allowIn:!0,allowCall:!0})),":"]:["default:"],c=0,d=a.consequent.length,d&&a.consequent[0].type===J.BlockStatement&&(k=A(a.consequent[0]),e.push(k),c=1),c===d||g(q(e).toString())||e.push(X);c<d;++c)k=t(H(a.consequent[c],{semicolonOptional:c===d-1&&""===l})),e.push(k),c+1===d||g(q(k).toString())||e.push(X)});break;case J.IfStatement:u(function(){e=["if"+Y+"(",G(a.test,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),")"]}),a.alternate?(e.push(A(a.consequent)),e=B(a.consequent,e),e=a.alternate.type===J.IfStatement?s(e,["else ",H(a.alternate,{semicolonOptional:""===l})]):s(e,s("else",A(a.alternate,""===l)))):e.push(A(a.consequent,""===l));break;case J.ForStatement:u(function(){e=["for"+Y+"("],a.init?a.init.type===J.VariableDeclaration?e.push(H(a.init,{allowIn:!1})):e.push(G(a.init,{precedence:K.Sequence,allowIn:!1,allowCall:!0}),";"):e.push(";"),a.test?e.push(Y,G(a.test,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),";"):e.push(";"),a.update?e.push(Y,G(a.update,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),")"):e.push(")")}),e.push(A(a.body,""===l));break;case J.ForInStatement:e=["for"+Y+"("],u(function(){a.left.type===J.VariableDeclaration?u(function(){e.push(a.left.kind+r(),H(a.left.declarations[0],{allowIn:!1}))}):e.push(G(a.left,{precedence:K.Call,allowIn:!0,allowCall:!0})),e=s(e,"in"),e=[s(e,G(a.right,{precedence:K.Sequence,allowIn:!0,allowCall:!0})),")"]}),e.push(A(a.body,""===l));break;case J.LabeledStatement:e=[a.label.name+":",A(a.body,""===l)];break;case J.Program:for(d=a.body.length,e=[_&&d>0?"\n":""],c=0;c<d;++c)k=t(H(a.body[c],{semicolonOptional:!_&&c===d-1,directiveContext:!0})),e.push(k),c+1<d&&!g(q(k).toString())&&e.push(X);break;case J.FunctionDeclaration:m=a.generator&&!ba.moz.starlessGenerator,e=[m?"function*":"function",m?Y:r(),D(a.id),F(a)];break;case J.ReturnStatement:e=a.argument?[s("return",G(a.argument,{precedence:K.Sequence,allowIn:!0,allowCall:!0})),l]:["return"+l];break;case J.WhileStatement:u(function(){e=["while"+Y+"(",G(a.test,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),")"]}),e.push(A(a.body,""===l));break;case J.WithStatement:u(function(){e=["with"+Y+"(",G(a.object,{precedence:K.Sequence,allowIn:!0,allowCall:!0}),")"]}),e.push(A(a.body,""===l));break;default:throw new Error("Unknown statement type: "+a.type)}return ba.comment&&(e=y(a,e)),k=q(e).toString(),a.type!==J.Program||_||""!==X||"\n"!==k.charAt(k.length-1)||(e=da?q(e).replaceRight(/\s+$/,""):k.replace(/\s+$/,"")),q(e,a)}function I(f,g){var i,j,k=d();switch(null!=g?("string"==typeof g.indent&&(k.format.indent.style=g.indent),"number"==typeof g.base&&(k.format.indent.base=g.base),g=h(k,g),R=g.format.indent.style,Q="string"==typeof g.base?g.base:e(R,g.format.indent.base)):(g=k,R=g.format.indent.style,Q=e(R,g.format.indent.base)),S=g.format.json,T=g.format.renumber,U=!S&&g.format.hexadecimal,V=S?"double":g.format.quotes,W=g.format.escapeless,X=g.format.newline,Y=g.format.space,g.format.compact&&(X=Y=R=Q=""),Z=g.format.parentheses,$=g.format.semicolons,_=g.format.safeConcatenation,aa=g.directive,ca=S?null:g.parse,da=g.sourceMap,ba=g,da&&(M=c.browser?b.sourceMap.SourceNode:a("source-map").SourceNode),f.type){case J.BlockStatement:case J.BreakStatement:case J.CatchClause:case J.ContinueStatement:case J.DirectiveStatement:case J.DoWhileStatement:case J.DebuggerStatement:case J.EmptyStatement:case J.ExpressionStatement:case J.ForStatement:case J.ForInStatement:case J.FunctionDeclaration:case J.IfStatement:case J.LabeledStatement:case J.Program:case J.ReturnStatement:case J.SwitchStatement:case J.SwitchCase:case J.ThrowStatement:case J.TryStatement:case J.VariableDeclaration:case J.VariableDeclarator:case J.WhileStatement:case J.WithStatement:i=H(f);break;case J.AssignmentExpression:case J.ArrayExpression:case J.ArrayPattern:case J.BinaryExpression:case J.CallExpression:case J.ConditionalExpression:case J.FunctionExpression:case J.Identifier:case J.Literal:case J.LogicalExpression:case J.MemberExpression:case J.NewExpression:case J.ObjectExpression:case J.ObjectPattern:case J.Property:case J.SequenceExpression:case J.ThisExpression:case J.UnaryExpression:case J.UpdateExpression:case J.YieldExpression:i=G(f,{precedence:K.Sequence,allowIn:!0,allowCall:!0});break;default:throw new Error("Unknown node type: "+f.type)}return da?(j=i.toStringWithSourceMap({file:g.file,sourceRoot:g.sourceMapRoot}),g.sourceContent&&j.map.setSourceContent(g.sourceMap,g.sourceContent),g.sourceMapWithCode?j:j.map.toString()):i.toString()}var J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa;N=a("estraverse"),O=a("esutils"),J={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportDeclaration:"ExportDeclaration",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},K={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,Member:17,Primary:18},L={"||":K.LogicalOR,"&&":K.LogicalAND,"|":K.BitwiseOR,"^":K.BitwiseXOR,"&":K.BitwiseAND,"==":K.Equality,"!=":K.Equality,"===":K.Equality,"!==":K.Equality,is:K.Equality,isnt:K.Equality,"<":K.Relational,">":K.Relational,"<=":K.Relational,">=":K.Relational,in:K.Relational,instanceof:K.Relational,"<<":K.BitwiseSHIFT,">>":K.BitwiseSHIFT,">>>":K.BitwiseSHIFT,"+":K.Additive,"-":K.Additive,"*":K.Multiplicative,"%":K.Multiplicative,"/":K.Multiplicative},P=Array.isArray,P||(P=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),ea={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},fa=d().format,c.version=a("./package.json").version,c.generate=I,c.attachComments=N.attachComments,c.browser=!1,c.FORMAT_MINIFY=ea,c.FORMAT_DEFAULTS=fa}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./package.json":147,estraverse:148,esutils:151,"source-map":137}],137:[function(a,b,c){c.SourceMapGenerator=a("./source-map/source-map-generator").SourceMapGenerator,c.SourceMapConsumer=a("./source-map/source-map-consumer").SourceMapConsumer,c.SourceNode=a("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":143,"./source-map/source-map-generator":144,"./source-map/source-node":145}],138:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(){this._array=[],this._set={}}var e=a("./util");d.fromArray=function(a,b){for(var c=new d,e=0,f=a.length;e<f;e++)c.add(a[e],b);return c},d.prototype.add=function(a,b){var c=this.has(a),d=this._array.length;c&&!b||this._array.push(a),c||(this._set[e.toSetString(a)]=d)},d.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this._set,e.toSetString(a))},d.prototype.indexOf=function(a){if(this.has(a))return this._set[e.toSetString(a)];throw new Error('"'+a+'" is not in the set.')},d.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},d.prototype.toArray=function(){return this._array.slice()},b.ArraySet=d})},{"./util":146,amdefine:5}],139:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){return a<0?(-a<<1)+1:(a<<1)+0}function e(a){var b=1===(1&a),c=a>>1;return b?-c:c}var f=a("./base64"),g=5,h=1<<g,i=h-1,j=h;b.encode=function(a){var b,c="",e=d(a);do b=e&i,e>>>=g,e>0&&(b|=j),c+=f.encode(b);while(e>0);return c},b.decode=function(a,b){var c,d,h=0,k=a.length,l=0,m=0;do{if(h>=k)throw new Error("Expected more digits in base 64 VLQ value.");d=f.decode(a.charAt(h++)),c=!!(d&j),d&=i,l+=d<<m,m+=g}while(c);b.value=e(l),b.rest=a.slice(h)}})},{"./base64":140,amdefine:5}],140:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){var d={},e={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(a,b){d[a]=b,e[b]=a}),b.encode=function(a){if(a in e)return e[a];throw new TypeError("Must be between 0 and 63: "+a)},b.decode=function(a){if(a in d)return d[a];throw new TypeError("Not a valid base 64 digit: "+a)}})},{amdefine:5}],141:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c,e,f){var g=Math.floor((b-a)/2)+a,h=f(c,e[g],!0);return 0===h?g:h>0?b-g>1?d(g,b,c,e,f):g:g-a>1?d(a,g,c,e,f):a<0?-1:a}b.search=function(a,b,c){return 0===b.length?-1:d(-1,b.length,a,b,c)}})},{amdefine:5}],142:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b){var c=a.generatedLine,d=b.generatedLine,e=a.generatedColumn,g=b.generatedColumn;return d>c||d==c&&g>=e||f.compareByGeneratedPositions(a,b)<=0}function e(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var f=a("./util");e.prototype.unsortedForEach=function(a,b){this._array.forEach(a,b)},e.prototype.add=function(a){d(this._last,a)?(this._last=a,this._array.push(a)):(this._sorted=!1,this._array.push(a))},e.prototype.toArray=function(){return this._sorted||(this._array.sort(f.compareByGeneratedPositions),this._sorted=!0),this._array},b.MappingList=e})},{"./util":146,amdefine:5}],143:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=e.getArg(b,"version"),d=e.getArg(b,"sources"),f=e.getArg(b,"names",[]),h=e.getArg(b,"sourceRoot",null),i=e.getArg(b,"sourcesContent",null),j=e.getArg(b,"mappings"),k=e.getArg(b,"file",null);if(c!=this._version)throw new Error("Unsupported version: "+c);d=d.map(e.normalize),this._names=g.fromArray(f,!0),this._sources=g.fromArray(d,!0),this.sourceRoot=h,this.sourcesContent=i,this._mappings=j,this.file=k}var e=a("./util"),f=a("./binary-search"),g=a("./array-set").ArraySet,h=a("./base64-vlq");d.fromSourceMap=function(a){var b=Object.create(d.prototype);return b._names=g.fromArray(a._names.toArray(),!0),b._sources=g.fromArray(a._sources.toArray(),!0),b.sourceRoot=a._sourceRoot,b.sourcesContent=a._generateSourcesContent(b._sources.toArray(),b.sourceRoot),b.file=a._file,b.__generatedMappings=a._mappings.toArray().slice(),b.__originalMappings=a._mappings.toArray().slice().sort(e.compareByOriginalPositions),b},d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){return this._sources.toArray().map(function(a){return null!=this.sourceRoot?e.join(this.sourceRoot,a):a},this)}}),d.prototype.__generatedMappings=null,Object.defineProperty(d.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),d.prototype.__originalMappings=null,Object.defineProperty(d.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),d.prototype._nextCharIsMappingSeparator=function(a){var b=a.charAt(0);return";"===b||","===b},d.prototype._parseMappings=function(a,b){for(var c,d=1,f=0,g=0,i=0,j=0,k=0,l=a,m={};l.length>0;)if(";"===l.charAt(0))d++,l=l.slice(1),f=0;else if(","===l.charAt(0))l=l.slice(1);else{if(c={},c.generatedLine=d,h.decode(l,m),c.generatedColumn=f+m.value,f=c.generatedColumn,l=m.rest,l.length>0&&!this._nextCharIsMappingSeparator(l)){if(h.decode(l,m),c.source=this._sources.at(j+m.value),j+=m.value,l=m.rest,0===l.length||this._nextCharIsMappingSeparator(l))throw new Error("Found a source, but no line and column");if(h.decode(l,m),c.originalLine=g+m.value,g=c.originalLine,c.originalLine+=1,l=m.rest,0===l.length||this._nextCharIsMappingSeparator(l))throw new Error("Found a source and line, but no column");h.decode(l,m),c.originalColumn=i+m.value,i=c.originalColumn,l=m.rest,l.length>0&&!this._nextCharIsMappingSeparator(l)&&(h.decode(l,m),c.name=this._names.at(k+m.value),k+=m.value,l=m.rest)}this.__generatedMappings.push(c),"number"==typeof c.originalLine&&this.__originalMappings.push(c)}this.__generatedMappings.sort(e.compareByGeneratedPositions),this.__originalMappings.sort(e.compareByOriginalPositions)},d.prototype._findMapping=function(a,b,c,d,e){if(a[c]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+a[c]);if(a[d]<0)throw new TypeError("Column must be greater than or equal to 0, got "+a[d]);return f.search(a,b,e)},d.prototype.computeColumnSpans=function(){for(var a=0;a<this._generatedMappings.length;++a){var b=this._generatedMappings[a];if(a+1<this._generatedMappings.length){var c=this._generatedMappings[a+1];if(b.generatedLine===c.generatedLine){b.lastGeneratedColumn=c.generatedColumn-1;continue}}b.lastGeneratedColumn=1/0}},d.prototype.originalPositionFor=function(a){var b={generatedLine:e.getArg(a,"line"),generatedColumn:e.getArg(a,"column")},c=this._findMapping(b,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositions);if(c>=0){var d=this._generatedMappings[c];if(d.generatedLine===b.generatedLine){var f=e.getArg(d,"source",null);return null!=f&&null!=this.sourceRoot&&(f=e.join(this.sourceRoot,f)),{source:f,line:e.getArg(d,"originalLine",null),column:e.getArg(d,"originalColumn",null),name:e.getArg(d,"name",null)}}}return{source:null,line:null,column:null,name:null}},d.prototype.sourceContentFor=function(a){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(a=e.relative(this.sourceRoot,a)),this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];var b;if(null!=this.sourceRoot&&(b=e.urlParse(this.sourceRoot))){var c=a.replace(/^file:\/\//,"");if("file"==b.scheme&&this._sources.has(c))return this.sourcesContent[this._sources.indexOf(c)];if((!b.path||"/"==b.path)&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}throw new Error('"'+a+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(a){var b={source:e.getArg(a,"source"),originalLine:e.getArg(a,"line"),originalColumn:e.getArg(a,"column")};null!=this.sourceRoot&&(b.source=e.relative(this.sourceRoot,b.source));var c=this._findMapping(b,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions);if(c>=0){var d=this._originalMappings[c];return{line:e.getArg(d,"generatedLine",null),column:e.getArg(d,"generatedColumn",null),lastColumn:e.getArg(d,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},d.prototype.allGeneratedPositionsFor=function(a){
var b={source:e.getArg(a,"source"),originalLine:e.getArg(a,"line"),originalColumn:1/0};null!=this.sourceRoot&&(b.source=e.relative(this.sourceRoot,b.source));var c=[],d=this._findMapping(b,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions);if(d>=0)for(var f=this._originalMappings[d];f&&f.originalLine===b.originalLine;)c.push({line:e.getArg(f,"generatedLine",null),column:e.getArg(f,"generatedColumn",null),lastColumn:e.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[--d];return c.reverse()},d.GENERATED_ORDER=1,d.ORIGINAL_ORDER=2,d.prototype.eachMapping=function(a,b,c){var f,g=b||null,h=c||d.GENERATED_ORDER;switch(h){case d.GENERATED_ORDER:f=this._generatedMappings;break;case d.ORIGINAL_ORDER:f=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;f.map(function(a){var b=a.source;return null!=b&&null!=i&&(b=e.join(i,b)),{source:b,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:a.name}}).forEach(a,g)},b.SourceMapConsumer=d})},{"./array-set":138,"./base64-vlq":139,"./binary-search":141,"./util":146,amdefine:5}],144:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a){a||(a={}),this._file=f.getArg(a,"file",null),this._sourceRoot=f.getArg(a,"sourceRoot",null),this._skipValidation=f.getArg(a,"skipValidation",!1),this._sources=new g,this._names=new g,this._mappings=new h,this._sourcesContents=null}var e=a("./base64-vlq"),f=a("./util"),g=a("./array-set").ArraySet,h=a("./mapping-list").MappingList;d.prototype._version=3,d.fromSourceMap=function(a){var b=a.sourceRoot,c=new d({file:a.file,sourceRoot:b});return a.eachMapping(function(a){var d={generated:{line:a.generatedLine,column:a.generatedColumn}};null!=a.source&&(d.source=a.source,null!=b&&(d.source=f.relative(b,d.source)),d.original={line:a.originalLine,column:a.originalColumn},null!=a.name&&(d.name=a.name)),c.addMapping(d)}),a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&c.setSourceContent(b,d)}),c},d.prototype.addMapping=function(a){var b=f.getArg(a,"generated"),c=f.getArg(a,"original",null),d=f.getArg(a,"source",null),e=f.getArg(a,"name",null);this._skipValidation||this._validateMapping(b,c,d,e),null==d||this._sources.has(d)||this._sources.add(d),null==e||this._names.has(e)||this._names.add(e),this._mappings.add({generatedLine:b.line,generatedColumn:b.column,originalLine:null!=c&&c.line,originalColumn:null!=c&&c.column,source:d,name:e})},d.prototype.setSourceContent=function(a,b){var c=a;null!=this._sourceRoot&&(c=f.relative(this._sourceRoot,c)),null!=b?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[f.toSetString(c)]=b):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(c)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},d.prototype.applySourceMap=function(a,b,c){var d=b;if(null==b){if(null==a.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');d=a.file}var e=this._sourceRoot;null!=e&&(d=f.relative(e,d));var h=new g,i=new g;this._mappings.unsortedForEach(function(b){if(b.source===d&&null!=b.originalLine){var g=a.originalPositionFor({line:b.originalLine,column:b.originalColumn});null!=g.source&&(b.source=g.source,null!=c&&(b.source=f.join(c,b.source)),null!=e&&(b.source=f.relative(e,b.source)),b.originalLine=g.line,b.originalColumn=g.column,null!=g.name&&(b.name=g.name))}var j=b.source;null==j||h.has(j)||h.add(j);var k=b.name;null==k||i.has(k)||i.add(k)},this),this._sources=h,this._names=i,a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&(null!=c&&(b=f.join(c,b)),null!=e&&(b=f.relative(e,b)),this.setSourceContent(b,d))},this)},d.prototype._validateMapping=function(a,b,c,d){if((!(a&&"line"in a&&"column"in a&&a.line>0&&a.column>=0)||b||c||d)&&!(a&&"line"in a&&"column"in a&&b&&"line"in b&&"column"in b&&a.line>0&&a.column>=0&&b.line>0&&b.column>=0&&c))throw new Error("Invalid mapping: "+JSON.stringify({generated:a,source:c,original:b,name:d}))},d.prototype._serializeMappings=function(){for(var a,b=0,c=1,d=0,g=0,h=0,i=0,j="",k=this._mappings.toArray(),l=0,m=k.length;l<m;l++){if(a=k[l],a.generatedLine!==c)for(b=0;a.generatedLine!==c;)j+=";",c++;else if(l>0){if(!f.compareByGeneratedPositions(a,k[l-1]))continue;j+=","}j+=e.encode(a.generatedColumn-b),b=a.generatedColumn,null!=a.source&&(j+=e.encode(this._sources.indexOf(a.source)-i),i=this._sources.indexOf(a.source),j+=e.encode(a.originalLine-1-g),g=a.originalLine-1,j+=e.encode(a.originalColumn-d),d=a.originalColumn,null!=a.name&&(j+=e.encode(this._names.indexOf(a.name)-h),h=this._names.indexOf(a.name)))}return j},d.prototype._generateSourcesContent=function(a,b){return a.map(function(a){if(!this._sourcesContents)return null;null!=b&&(a=f.relative(b,a));var c=f.toSetString(a);return Object.prototype.hasOwnProperty.call(this._sourcesContents,c)?this._sourcesContents[c]:null},this)},d.prototype.toJSON=function(){var a={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(a.file=this._file),null!=this._sourceRoot&&(a.sourceRoot=this._sourceRoot),this._sourcesContents&&(a.sourcesContent=this._generateSourcesContent(a.sources,a.sourceRoot)),a},d.prototype.toString=function(){return JSON.stringify(this)},b.SourceMapGenerator=d})},{"./array-set":138,"./base64-vlq":139,"./mapping-list":142,"./util":146,amdefine:5}],145:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c,d,e){this.children=[],this.sourceContents={},this.line=null==a?null:a,this.column=null==b?null:b,this.source=null==c?null:c,this.name=null==e?null:e,this[i]=!0,null!=d&&this.add(d)}var e=a("./source-map-generator").SourceMapGenerator,f=a("./util"),g=/(\r?\n)/,h=10,i="$$$isSourceNode$$$";d.fromStringWithSourceMap=function(a,b,c){function e(a,b){if(null===a||void 0===a.source)h.add(b);else{var e=c?f.join(c,a.source):a.source;h.add(new d(a.originalLine,a.originalColumn,e,b,a.name))}}var h=new d,i=a.split(g),j=function(){var a=i.shift(),b=i.shift()||"";return a+b},k=1,l=0,m=null;return b.eachMapping(function(a){if(null!==m){if(!(k<a.generatedLine)){var b=i[0],c=b.substr(0,a.generatedColumn-l);return i[0]=b.substr(a.generatedColumn-l),l=a.generatedColumn,e(m,c),void(m=a)}var c="";e(m,j()),k++,l=0}for(;k<a.generatedLine;)h.add(j()),k++;if(l<a.generatedColumn){var b=i[0];h.add(b.substr(0,a.generatedColumn)),i[0]=b.substr(a.generatedColumn),l=a.generatedColumn}m=a},this),i.length>0&&(m&&e(m,j()),h.add(i.join(""))),b.sources.forEach(function(a){var d=b.sourceContentFor(a);null!=d&&(null!=c&&(a=f.join(c,a)),h.setSourceContent(a,d))}),h},d.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(a){this.add(a)},this);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);a&&this.children.push(a)}return this},d.prototype.prepend=function(a){if(Array.isArray(a))for(var b=a.length-1;b>=0;b--)this.prepend(a[b]);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);this.children.unshift(a)}return this},d.prototype.walk=function(a){for(var b,c=0,d=this.children.length;c<d;c++)b=this.children[c],b[i]?b.walk(a):""!==b&&a(b,{source:this.source,line:this.line,column:this.column,name:this.name})},d.prototype.join=function(a){var b,c,d=this.children.length;if(d>0){for(b=[],c=0;c<d-1;c++)b.push(this.children[c]),b.push(a);b.push(this.children[c]),this.children=b}return this},d.prototype.replaceRight=function(a,b){var c=this.children[this.children.length-1];return c[i]?c.replaceRight(a,b):"string"==typeof c?this.children[this.children.length-1]=c.replace(a,b):this.children.push("".replace(a,b)),this},d.prototype.setSourceContent=function(a,b){this.sourceContents[f.toSetString(a)]=b},d.prototype.walkSourceContents=function(a){for(var b=0,c=this.children.length;b<c;b++)this.children[b][i]&&this.children[b].walkSourceContents(a);for(var d=Object.keys(this.sourceContents),b=0,c=d.length;b<c;b++)a(f.fromSetString(d[b]),this.sourceContents[d[b]])},d.prototype.toString=function(){var a="";return this.walk(function(b){a+=b}),a},d.prototype.toStringWithSourceMap=function(a){var b={code:"",line:1,column:0},c=new e(a),d=!1,f=null,g=null,i=null,j=null;return this.walk(function(a,e){b.code+=a,null!==e.source&&null!==e.line&&null!==e.column?(f===e.source&&g===e.line&&i===e.column&&j===e.name||c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name}),f=e.source,g=e.line,i=e.column,j=e.name,d=!0):d&&(c.addMapping({generated:{line:b.line,column:b.column}}),f=null,d=!1);for(var k=0,l=a.length;k<l;k++)a.charCodeAt(k)===h?(b.line++,b.column=0,k+1===l?(f=null,d=!1):d&&c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name})):b.column++}),this.walkSourceContents(function(a,b){c.setSourceContent(a,b)}),{code:b.code,map:c}},b.SourceNode=d})},{"./source-map-generator":144,"./util":146,amdefine:5}],146:[function(a,b,c){if("function"!=typeof d)var d=a("amdefine")(b,a);d(function(a,b,c){function d(a,b,c){if(b in a)return a[b];if(3===arguments.length)return c;throw new Error('"'+b+'" is a required argument.')}function e(a){var b=a.match(o);return b?{scheme:b[1],auth:b[2],host:b[3],port:b[4],path:b[5]}:null}function f(a){var b="";return a.scheme&&(b+=a.scheme+":"),b+="//",a.auth&&(b+=a.auth+"@"),a.host&&(b+=a.host),a.port&&(b+=":"+a.port),a.path&&(b+=a.path),b}function g(a){var b=a,c=e(a);if(c){if(!c.path)return a;b=c.path}for(var d,g="/"===b.charAt(0),h=b.split(/\/+/),i=0,j=h.length-1;j>=0;j--)d=h[j],"."===d?h.splice(j,1):".."===d?i++:i>0&&(""===d?(h.splice(j+1,i),i=0):(h.splice(j,2),i--));return b=h.join("/"),""===b&&(b=g?"/":"."),c?(c.path=b,f(c)):b}function h(a,b){""===a&&(a="."),""===b&&(b=".");var c=e(b),d=e(a);if(d&&(a=d.path||"/"),c&&!c.scheme)return d&&(c.scheme=d.scheme),f(c);if(c||b.match(p))return b;if(d&&!d.host&&!d.path)return d.host=b,f(d);var h="/"===b.charAt(0)?b:g(a.replace(/\/+$/,"")+"/"+b);return d?(d.path=h,f(d)):h}function i(a,b){""===a&&(a="."),a=a.replace(/\/$/,"");var c=e(a);return"/"==b.charAt(0)&&c&&"/"==c.path?b.slice(1):0===b.indexOf(a+"/")?b.substr(a.length+1):b}function j(a){return"$"+a}function k(a){return a.substr(1)}function l(a,b){var c=a||"",d=b||"";return(c>d)-(c<d)}function m(a,b,c){var d;return(d=l(a.source,b.source))?d:(d=a.originalLine-b.originalLine)?d:(d=a.originalColumn-b.originalColumn,d||c?d:(d=l(a.name,b.name))?d:(d=a.generatedLine-b.generatedLine,d?d:a.generatedColumn-b.generatedColumn))}function n(a,b,c){var d;return(d=a.generatedLine-b.generatedLine)?d:(d=a.generatedColumn-b.generatedColumn,d||c?d:(d=l(a.source,b.source))?d:(d=a.originalLine-b.originalLine)?d:(d=a.originalColumn-b.originalColumn,d?d:l(a.name,b.name)))}b.getArg=d;var o=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,p=/^data:.+\,.+$/;b.urlParse=e,b.urlGenerate=f,b.normalize=g,b.join=h,b.relative=i,b.toSetString=j,b.fromSetString=k,b.compareByOriginalPositions=m,b.compareByGeneratedPositions=n})},{amdefine:5}],147:[function(a,b,c){b.exports={_args:[[{raw:"escodegen@https://registry.npmjs.org/escodegen/-/escodegen-1.1.0.tgz",scope:null,escapedName:"escodegen",name:"escodegen",rawSpec:"https://registry.npmjs.org/escodegen/-/escodegen-1.1.0.tgz",spec:"https://registry.npmjs.org/escodegen/-/escodegen-1.1.0.tgz",type:"remote"},"/opt/carto/builder/embedded/cartodb-4.1.0.1"]],_from:"escodegen@>=1.1.0 <1.2.0",_id:"escodegen@1.1.0",_inCache:!0,_location:"/escodegen",_phantomChildren:{amdefine:"1.0.1"},_requested:{raw:"escodegen@https://registry.npmjs.org/escodegen/-/escodegen-1.1.0.tgz",scope:null,escapedName:"escodegen",name:"escodegen",rawSpec:"https://registry.npmjs.org/escodegen/-/escodegen-1.1.0.tgz",spec:"https://registry.npmjs.org/escodegen/-/escodegen-1.1.0.tgz",type:"remote"},_requiredBy:["/","/rename-function-calls/detective"],_resolved:"https://registry.npmjs.org/escodegen/-/escodegen-1.1.0.tgz",_shasum:"c663923f6e20aad48d0c0fa49f31c6d4f49360cf",_shrinkwrap:null,_spec:"escodegen@https://registry.npmjs.org/escodegen/-/escodegen-1.1.0.tgz",_where:"/opt/carto/builder/embedded/cartodb-4.1.0.1",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},bugs:{url:"https://github.com/Constellation/escodegen/issues"},dependencies:{esprima:"~1.0.4",estraverse:"~1.5.0",esutils:"~1.0.0","source-map":"~0.1.30"},description:"ECMAScript code generator",devDependencies:{bower:"*",chai:"~1.7.2","commonjs-everywhere":"~0.8.0","esprima-moz":"*",grunt:"~0.4.1","grunt-cli":"~0.1.9","grunt-contrib-jshint":"~0.5.0","grunt-mocha-test":"~0.6.2",q:"*",semver:"*"},engines:{node:">=0.4.0"},homepage:"http://github.com/Constellation/escodegen",licenses:[{type:"BSD",url:"http://github.com/Constellation/escodegen/raw/master/LICENSE.BSD"}],main:"escodegen.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"escodegen",optionalDependencies:{"source-map":"~0.1.30"},readme:"\n### Escodegen [![Build Status](https://secure.travis-ci.org/Constellation/escodegen.png)](http://travis-ci.org/Constellation/escodegen) [![Build Status](https://drone.io/github.com/Constellation/escodegen/status.png)](https://drone.io/github.com/Constellation/escodegen/latest)\n\nEscodegen ([escodegen](http://github.com/Constellation/escodegen)) is\n[ECMAScript](http://www.ecma-international.org/publications/standards/Ecma-262.htm)\n(also popularly known as [JavaScript](http://en.wikipedia.org/wiki/JavaScript>JavaScript))\ncode generator from [Parser API](https://developer.mozilla.org/en/SpiderMonkey/Parser_API) AST.\nSee [online generator demo](http://constellation.github.com/escodegen/demo/index.html).\n\n\n### Install\n\nEscodegen can be used in a web browser:\n\n    <script src=\"escodegen.browser.js\"></script>\n\nescodegen.browser.js is found in tagged-revision. See Tags on GitHub.\n\nOr in a Node.js application via the package manager:\n\n    npm install escodegen\n\n### Usage\n\nA simple example: the program\n\n    escodegen.generate({\n        type: 'BinaryExpression',\n        operator: '+',\n        left: { type: 'Literal', value: 40 },\n        right: { type: 'Literal', value: 2 }\n    });\n\nproduces the string `'40 + 2'`\n\nSee the [API page](https://github.com/Constellation/escodegen/wiki/API) for\noptions. To run the tests, execute `npm test` in the root directory.\n\n### License\n\n#### Escodegen\n\nCopyright (C) 2012 [Yusuke Suzuki](http://github.com/Constellation)\n (twitter: [@Constellation](http://twitter.com/Constellation)) and other contributors.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright\n    notice, this list of conditions and the following disclaimer.\n\n  * Redistributions in binary form must reproduce the above copyright\n    notice, this list of conditions and the following disclaimer in the\n    documentation and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\nARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY\nDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\nON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\nTHIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n#### source-map\n\nSourceNodeMocks has a limited interface of mozilla/source-map SourceNode implementations.\n\nCopyright (c) 2009-2011, Mozilla Foundation and contributors\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the names of the Mozilla Foundation nor the names of project\n  contributors may be used to endorse or promote products derived from this\n  software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n",readmeFilename:"README.md",repository:{type:"git",url:"git+ssh://git@github.com/Constellation/escodegen.git"},scripts:{build:"cjsify -a path: tools/entry-point.js > escodegen.browser.js","build-min":"cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",lint:"grunt lint",release:"node tools/release.js",test:"grunt travis","unit-test":"grunt test"},version:"1.1.0"}},{}],148:[function(a,b,c){!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["exports"],b):b("undefined"!=typeof c?c:a.estraverse={})}(this,function(a){"use strict";function b(){}function c(a){var b,d,e={};for(b in a)a.hasOwnProperty(b)&&(d=a[b],"object"==typeof d&&null!==d?e[b]=c(d):e[b]=d);return e}function d(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}function e(a,b){var c,d,e,f;for(d=a.length,e=0;d;)c=d>>>1,f=e+c,b(a[f])?d=c:(e=f+1,d-=c+1);return e}function f(a,b){var c,d,e,f;for(d=a.length,e=0;d;)c=d>>>1,f=e+c,b(a[f])?(e=f+1,d-=c+1):d=c;return e}function g(a,b){this.parent=a,this.key=b}function h(a,b,c,d){this.node=a,this.path=b,this.wrap=c,this.ref=d}function i(){}function j(a,b){var c=new i;return c.traverse(a,b)}function k(a,b){var c=new i;return c.replace(a,b)}function l(a,b){var c;return c=e(b,function(b){return b.range[0]>a.range[0]}),a.extendedRange=[a.range[0],a.range[1]],c!==b.length&&(a.extendedRange[1]=b[c].range[0]),c-=1,c>=0&&(a.extendedRange[0]=b[c].range[1]),a}function m(a,b,d){var e,f,g,h,i=[];if(!a.range)throw new Error("attachComments needs range information");if(!d.length){if(b.length){for(g=0,f=b.length;g<f;g+=1)e=c(b[g]),e.extendedRange=[0,a.range[0]],i.push(e);a.leadingComments=i}return a}for(g=0,f=b.length;g<f;g+=1)i.push(l(c(b[g]),d));return h=0,j(a,{enter:function(a){for(var b;h<i.length&&(b=i[h],!(b.extendedRange[1]>a.range[0]));)b.extendedRange[1]===a.range[0]?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.push(b),i.splice(h,1)):h+=1;return h===i.length?p.Break:i[h].extendedRange[0]>a.range[1]?p.Skip:void 0}}),h=0,j(a,{leave:function(a){for(var b;h<i.length&&(b=i[h],!(a.range[1]<b.extendedRange[0]));)a.range[1]===b.extendedRange[0]?(a.trailingComments||(a.trailingComments=[]),a.trailingComments.push(b),i.splice(h,1)):h+=1;return h===i.length?p.Break:i[h].extendedRange[0]>a.range[1]?p.Skip:void 0}}),a}var n,o,p,q,r,s;n={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},o=Array.isArray,o||(o=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),b(d),b(f),q={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},r={},s={},p={Break:r,Skip:s},g.prototype.replace=function(a){this.parent[this.key]=a},i.prototype.path=function(){function a(a,b){if(o(b))for(d=0,e=b.length;d<e;++d)a.push(b[d]);else a.push(b)}var b,c,d,e,f,g;if(!this.__current.path)return null;for(f=[],b=2,c=this.__leavelist.length;b<c;++b)g=this.__leavelist[b],a(f,g.path);return a(f,this.__current.path),f},i.prototype.parents=function(){var a,b,c;for(c=[],a=1,b=this.__leavelist.length;a<b;++a)c.push(this.__leavelist[a].node);return c},i.prototype.current=function(){return this.__current.node},i.prototype.__execute=function(a,b){var c,d;return d=void 0,c=this.__current,this.__current=b,this.__state=null,a&&(d=a.call(this,b.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=c,d},i.prototype.notify=function(a){this.__state=a},i.prototype.skip=function(){this.notify(s)},i.prototype.break=function(){this.notify(r)},i.prototype.__initialize=function(a,b){this.visitor=b,this.root=a,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null},i.prototype.traverse=function(a,b){var c,d,e,f,g,i,j,k,l,m,p,t;for(this.__initialize(a,b),t={},c=this.__worklist,d=this.__leavelist,c.push(new h(a,null,null,null)),d.push(new h(null,null,null,null));c.length;)if(e=c.pop(),e!==t){if(e.node){if(i=this.__execute(b.enter,e),this.__state===r||i===r)return;if(c.push(t),d.push(e),this.__state===s||i===s)continue;for(f=e.node,g=e.wrap||f.type,m=q[g],k=m.length;(k-=1)>=0;)if(j=m[k],p=f[j])if(o(p))for(l=p.length;(l-=1)>=0;)p[l]&&(e=g!==n.ObjectExpression&&g!==n.ObjectPattern||"properties"!==m[k]?new h(p[l],[j,l],null,null):new h(p[l],[j,l],"Property",null),c.push(e));else c.push(new h(p,j,null,null))}}else if(e=d.pop(),i=this.__execute(b.leave,e),this.__state===r||i===r)return},i.prototype.replace=function(a,b){var c,d,e,f,i,j,k,l,m,p,t,u,v;for(this.__initialize(a,b),t={},c=this.__worklist,d=this.__leavelist,u={root:a},j=new h(a,null,null,new g(u,"root")),c.push(j),d.push(j);c.length;)if(j=c.pop(),j!==t){if(i=this.__execute(b.enter,j),void 0!==i&&i!==r&&i!==s&&(j.ref.replace(i),j.node=i),this.__state===r||i===r)return u.root;if(e=j.node,e&&(c.push(t),d.push(j),this.__state!==s&&i!==s))for(f=j.wrap||e.type,m=q[f],k=m.length;(k-=1)>=0;)if(v=m[k],p=e[v])if(o(p))for(l=p.length;(l-=1)>=0;)p[l]&&(j=f===n.ObjectExpression&&"properties"===m[k]?new h(p[l],[v,l],"Property",new g(p,l)):new h(p[l],[v,l],null,new g(p,l)),c.push(j));else c.push(new h(p,v,null,new g(e,v)))}else if(j=d.pop(),i=this.__execute(b.leave,j),void 0!==i&&i!==r&&i!==s&&j.ref.replace(i),this.__state===r||i===r)return u.root;return u.root},a.version="1.5.1-dev",a.Syntax=n,a.traverse=j,a.replace=k,a.attachComments=m,a.VisitorKeys=q,a.VisitorOption=p,a.Controller=i})},{}],149:[function(a,b,c){!function(){"use strict";function a(a){return a>=48&&a<=57}function c(b){return a(b)||97<=b&&b<=102||65<=b&&b<=70}function d(a){return a>=48&&a<=55}function e(a){return 32===a||9===a||11===a||12===a||160===a||a>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a)>=0}function f(a){return 10===a||13===a||8232===a||8233===a}function g(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||92===a||a>=128&&i.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function h(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||a>=48&&a<=57||92===a||a>=128&&i.NonAsciiIdentifierPart.test(String.fromCharCode(a))}var i;i={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},b.exports={isDecimalDigit:a,isHexDigit:c,isOctalDigit:d,isWhiteSpace:e,isLineTerminator:f,isIdentifierStart:g,isIdentifierPart:h}}()},{}],150:[function(a,b,c){!function(){"use strict";function c(a){switch(a){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function d(a,b){return!(!b&&"yield"===a)&&e(a,b)}function e(a,b){if(b&&c(a))return!0;switch(a.length){case 2:return"if"===a||"in"===a||"do"===a;case 3:return"var"===a||"for"===a||"new"===a||"try"===a;case 4:return"this"===a||"else"===a||"case"===a||"void"===a||"with"===a||"enum"===a;case 5:return"while"===a||"break"===a||"catch"===a||"throw"===a||"const"===a||"yield"===a||"class"===a||"super"===a;case 6:return"return"===a||"typeof"===a||"delete"===a||"switch"===a||"export"===a||"import"===a;case 7:return"default"===a||"finally"===a||"extends"===a;case 8:return"function"===a||"continue"===a||"debugger"===a;case 10:return"instanceof"===a;default:return!1}}function f(a){return"eval"===a||"arguments"===a}function g(a){var b,c,d;if(0===a.length)return!1;if(d=a.charCodeAt(0),!h.isIdentifierStart(d)||92===d)return!1;for(b=1,c=a.length;b<c;++b)if(d=a.charCodeAt(b),!h.isIdentifierPart(d)||92===d)return!1;return!0}var h=a("./code");b.exports={isKeywordES5:d,isKeywordES6:e,isRestrictedWord:f,isIdentifierName:g}}()},{"./code":149}],151:[function(a,b,c){!function(){"use strict";c.code=a("./code"),c.keyword=a("./keyword")}()},{"./code":149,"./keyword":150}],152:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),
this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],153:[function(a,b,c){"use strict";var d=a("map-obj"),e=a("replace-requires"),f=a("globo");b.exports=function(a,b){return a=d(a,function(a,b){return[a,f(b)]}),e(b,a)}},{globo:167,"map-obj":189,"replace-requires":271}],154:[function(a,b,c){(function(d){"use strict";var e=a("transformify"),f=a("through2"),g=a("./expose");c=b.exports=function(a,b){if(b=b||{},b.filePattern=b.filePattern||c.filePattern,b.expose=b.expose||c.config,b.filePattern&&!b.filePattern.test(a))return f();if("object"!=typeof b.expose)throw new Error("Please pass { expose: { ... } } to transform, set exposify.config or $EXPOSIFY_CONFIG so exposify knows what to expose");var d=e(g.bind(null,b.expose));return d(a)},c.config=function(){if(d.env.EXPOSIFY_CONFIG)try{return JSON.parse(d.env.EXPOSIFY_CONFIG)}catch(a){console.error("Invalid exposify config!"),console.error(a.stack)}}(),c.filePattern=/\.js$/,c.expose=g}).call(this,a("_process"))},{"./expose":153,_process:256,through2:161,transformify:355}],155:[function(a,b,c){arguments[4][32][0].apply(c,arguments)},{dup:32}],156:[function(a,b,c){(function(c){function d(a){return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||c.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}b.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");h.inherits(d,i),f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":157,"./_stream_writable":159,_process:256,"core-util-is":126,inherits:173}],157:[function(a,b,c){(function(c){function d(b,c){b=b||{};var d=b.highWaterMark;this.highWaterMark=d||0===d?d:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(C||(C=a("string_decoder/").StringDecoder),this.decoder=new C(b.encoding),this.encoding=b.encoding)}function e(a){return this instanceof e?(this._readableState=new d(a,this),this.readable=!0,void A.call(this)):new e(a)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(null===c||void 0===c)b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):(b.reading=!1,b.buffer.push(c)),b.needReadable&&l(a),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=D)a=D;else{a--;for(var b=1;b<32;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:null===a||isNaN(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:a<=0?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return y.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.length>0?l(a):u(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,b.sync?c.nextTick(function(){m(a)}):m(a))}function m(a){a.emit("readable")}function n(a,b){b.readingMore||(b.readingMore=!0,c.nextTick(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;b.awaitDrain--,0===b.awaitDrain&&q(a)}}function q(a){function b(a,b,e){var f=a.write(c);!1===f&&d.awaitDrain++}var c,d=a._readableState;for(d.awaitDrain=0;d.pipesCount&&null!==(c=a.read());)if(1===d.pipesCount?b(d.pipes,0,null):v(d.pipes,b),a.emit("data",c),d.awaitDrain>0)return;return 0===d.pipesCount?(d.flowing=!1,void(z.listenerCount(a,"data")>0&&s(a))):void(d.ranOut=!0)}function r(){this._readableState.ranOut&&(this._readableState.ranOut=!1,q(this))}function s(a,b){var d=a._readableState;if(d.flowing)throw new Error("Cannot switch to old mode now.");var e=b||!1,f=!1;a.readable=!0,a.pipe=A.prototype.pipe,a.on=a.addListener=A.prototype.on,a.on("readable",function(){f=!0;for(var b;!e&&null!==(b=a.read());)a.emit("data",b);null===b&&(f=!1,a._readableState.needReadable=!0)}),a.pause=function(){e=!0,this.emit("pause")},a.resume=function(){e=!1,f?c.nextTick(function(){a.emit("readable")}):this.read(0),this.emit("resume")},a.emit("readable")}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):y.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new y(a);for(var i=0,j=0,k=d.length;j<k&&i<a;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");!b.endEmitted&&b.calledRead&&(b.ended=!0,c.nextTick(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}b.exports=e;var x=a("isarray"),y=a("buffer").Buffer;e.ReadableState=d;var z=a("events").EventEmitter;z.listenerCount||(z.listenerCount=function(a,b){return a.listeners(b).length});var A=a("stream"),B=a("core-util-is");B.inherits=a("inherits");var C;B.inherits(e,A),e.prototype.push=function(a,b){var c=this._readableState;return"string"!=typeof a||c.objectMode||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new y(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){C||(C=a("string_decoder/").StringDecoder),this._readableState.decoder=new C(b),this._readableState.encoding=b};var D=8388608;e.prototype.read=function(a){var b=this._readableState;b.calledRead=!0;var c,d=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return l(this),null;if(a=i(a,b),0===a&&b.ended)return c=null,b.length>0&&b.decoder&&(c=t(a,b),b.length-=c.length),0===b.length&&u(this),c;var e=b.needReadable;return b.length-a<=b.highWaterMark&&(e=!0),(b.ended||b.reading)&&(e=!1),e&&(b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),e&&!b.reading&&(a=i(d,b)),c=a>0?t(a,b):null,null===c&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),b.ended&&!b.endEmitted&&0===b.length&&u(this),c},e.prototype._read=function(a){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){a===k&&f()}function e(){a.end()}function f(){a.removeListener("close",h),a.removeListener("finish",i),a.removeListener("drain",o),a.removeListener("error",g),a.removeListener("unpipe",d),k.removeListener("end",e),k.removeListener("end",f),a._writableState&&!a._writableState.needDrain||o()}function g(b){j(),a.removeListener("error",g),0===z.listenerCount(a,"error")&&a.emit("error",b)}function h(){a.removeListener("finish",i),j()}function i(){a.removeListener("close",h),j()}function j(){k.unpipe(a)}var k=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=a;break;case 1:l.pipes=[l.pipes,a];break;default:l.pipes.push(a)}l.pipesCount+=1;var m=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,n=m?e:f;l.endEmitted?c.nextTick(n):k.once("end",n),a.on("unpipe",d);var o=p(k);return a.on("drain",o),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(g):a._events.error=[g,a._events.error]:a.on("error",g),a.once("close",h),a.once("finish",i),a.emit("pipe",k),l.flowing||(this.on("readable",r),l.flowing=!0,c.nextTick(function(){q(k)})),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1;for(var e=0;e<d;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return e===-1?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var c=A.prototype.on.call(this,a,b);if("data"!==a||this._readableState.flowing||s(this),"readable"===a&&this.readable){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&l(this,d):this.read(0))}return c},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){s(this),this.read(0),this.emit("resume")},e.prototype.pause=function(){s(this,!0),this.emit("pause")},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)"function"==typeof a[e]&&"undefined"==typeof this[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("_process"))},{_process:256,buffer:34,"core-util-is":126,events:152,inherits:173,isarray:155,stream:303,"string_decoder/":306}],158:[function(a,b,c){function d(a,b){this.afterTransform=function(a,c){return e(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a);var b=(this._transformState=new d(a,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(a){g(b,a)}):g(b)})}function g(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=(a._readableState,a._transformState);if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":156,"core-util-is":126,inherits:173}],159:[function(a,b,c){(function(c){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(a,b){a=a||{};var c=a.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.objectMode=!!a.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var d=a.decodeStrings===!1;this.decodeStrings=!d,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(b,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function f(b){var c=a("./_stream_duplex");return this instanceof f||this instanceof c?(this._writableState=new e(b,this),this.writable=!0,void w.call(this)):new f(b)}function g(a,b,d){var e=new Error("write after end");a.emit("error",e),c.nextTick(function(){d(e)})}function h(a,b,d,e){var f=!0;if(!u.isBuffer(d)&&"string"!=typeof d&&null!==d&&void 0!==d&&!b.objectMode){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),c.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=new u(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),u.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing?b.buffer.push(new d(c,e,f)):k(a,b,g,c,e,f),h}function k(a,b,c,d,e,f){b.writelen=c,b.writecb=f,b.writing=!0,b.sync=!0,a._write(d,e,b.onwrite),b.sync=!1}function l(a,b,d,e,f){d?c.nextTick(function(){f(e)}):f(e),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,b){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),b)l(a,d,e,b,f);else{var g=r(a,d);g||d.bufferProcessing||!d.buffer.length||q(a,d),e?c.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),d(),c&&s(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){b.bufferProcessing=!0;for(var c=0;c<b.buffer.length;c++){var d=b.buffer[c],e=d.chunk,f=d.encoding,g=d.callback,h=b.objectMode?1:e.length;if(k(a,b,h,e,f,g),b.writing){c++;break}}b.bufferProcessing=!1,c<b.buffer.length?b.buffer=b.buffer.slice(c):b.buffer.length=0}function r(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function s(a,b){var c=r(a,b);return c&&(b.finished=!0,a.emit("finish")),c}function t(a,b,d){b.ending=!0,s(a,b),d&&(b.finished?c.nextTick(d):a.once("finish",d)),b.ended=!0}b.exports=f;var u=a("buffer").Buffer;f.WritableState=e;var v=a("core-util-is");v.inherits=a("inherits");var w=a("stream");v.inherits(f,w),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return"function"==typeof b&&(c=b,b=null),u.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(e=j(this,d,a,b,c)),e},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),"undefined"!=typeof a&&null!==a&&this.write(a,b),d.ending||d.finished||t(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":156,_process:256,buffer:34,"core-util-is":126,inherits:173,stream:303}],160:[function(a,b,c){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":158}],161:[function(a,b,c){function d(a,b,c){c(null,a)}function e(a){return function(b,c,e){return"function"==typeof b&&(e=c,c=b,b={}),"function"!=typeof c&&(c=d),"function"!=typeof e&&(e=null),a(b,c,e)}}var f=a("readable-stream/transform"),g=a("util").inherits,h=a("xtend");b.exports=e(function(a,b,c){var d=new f(a);return d._transform=b,c&&(d._flush=c),d}),b.exports.ctor=e(function(a,b,c){function d(b){return this instanceof d?(this.options=h(a,b),void f.call(this,this.options)):new d(b)}return g(d,f),d.prototype._transform=b,c&&(d.prototype._flush=c),d}),b.exports.obj=e(function(a,b,c){var d=new f(h({objectMode:!0},a));return d._transform=b,c&&(d._flush=c),d})},{"readable-stream/transform":160,util:403,xtend:163}],162:[function(a,b,c){function d(a){return null!==a&&("object"==typeof a||"function"==typeof a)}b.exports=d},{}],163:[function(a,b,c){function d(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];if(f(c))for(var d=e(c),g=0;g<d.length;g++){var h=d[g];a[h]=c[h]}}return a}var e=a("object-keys"),f=a("./has-keys");b.exports=d},{"./has-keys":162,"object-keys":195}],164:[function(a,b,c){"use strict";function d(a){var b=a.split(/(\/|\\)/);return b.length?b[0].length?b:b.slice(1):b}var e=a("path"),f=a("fs"),g=f.exists||e.exists,h=f.existsSync||e.existsSync;c=b.exports=function(a,b,c){function f(a){if(0===a.length)return c(null,null);var d=a.join("");g(e.join(d,b),function(b){return b?c(null,d):void f(a.slice(0,-1))})}f(d(a))},c.sync=function(a,b){function c(a){if(0===a.length)return null;var d=a.join(""),f=h(e.join(d,b));return f?d:c(a.slice(0,-1))}return c(d(a))}},{fs:29,path:200}],165:[function(a,b,c){var d="Function.prototype.bind called on incompatible ",e=Array.prototype.slice,f=Object.prototype.toString,g="[object Function]";b.exports=function(a){var b=this;if("function"!=typeof b||f.call(b)!==g)throw new TypeError(d+b);for(var c,h=e.call(arguments,1),i=function(){if(this instanceof c){var d=b.apply(this,h.concat(e.call(arguments)));return Object(d)===d?d:this}return b.apply(a,h.concat(e.call(arguments)))},j=Math.max(0,b.length-h.length),k=[],l=0;l<j;l++)k.push("$"+l);if(c=Function("binder","return function ("+k.join(",")+"){ return binder.apply(this,arguments); }")(i),b.prototype){var m=function(){};m.prototype=b.prototype,c.prototype=new m,m.prototype=null}return c}},{}],166:[function(a,b,c){var d=a("./implementation");b.exports=Function.prototype.bind||d},{"./implementation":165}],167:[function(a,b,c){"use strict";function d(a){return"("+a+")"}var e=a("ternary"),f=a("is-defined"),g=a("accessory");b.exports=function(a){return d(e(f("window"),g("window",a),e(f("global"),g("global",a),null)))}},{accessory:2,"is-defined":177,ternary:308}],168:[function(a,b,c){c.node=function(a){return void 0!==a&&a instanceof HTMLElement&&1===a.nodeType},c.nodeList=function(a){var b=Object.prototype.toString.call(a);return void 0!==a&&("[object NodeList]"===b||"[object HTMLCollection]"===b)&&"length"in a&&(0===a.length||c.node(a[0]))},c.string=function(a){return"string"==typeof a||a instanceof String},c.fn=function(a){var b=Object.prototype.toString.call(a);return"[object Function]"===b}},{}],169:[function(a,b,c){function d(a,b,c){if(!a&&!b&&!c)throw new Error("Missing required arguments");if(!h.string(b))throw new TypeError("Second argument must be a String");if(!h.fn(c))throw new TypeError("Third argument must be a Function");if(h.node(a))return e(a,b,c);if(h.nodeList(a))return f(a,b,c);if(h.string(a))return g(a,b,c);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function e(a,b,c){return a.addEventListener(b,c),{destroy:function(){a.removeEventListener(b,c)}}}function f(a,b,c){return Array.prototype.forEach.call(a,function(a){a.addEventListener(b,c)}),{destroy:function(){Array.prototype.forEach.call(a,function(a){a.removeEventListener(b,c)})}}}function g(a,b,c){return i(document.body,a,b,c)}var h=a("./is"),i=a("delegate");b.exports=d},{"./is":168,delegate:130}],170:[function(a,b,c){var d=a("function-bind");b.exports=d.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":166}],171:[function(a,b,c){"use strict";function d(a){return f[a]}function e(a){return h[a]}var f={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},g=/[&><\u2028\u2029]/g;b.exports=function(a){return JSON.stringify(a).replace(g,d)};var h={"\u2028":"\\u2028","\u2029":"\\u2029"},i=/[\u2028\u2029]/g;b.exports.sanitize=function(a){return a.replace(i,e)}},{}],172:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],173:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],174:[function(a,b,c){(function(c){"use strict";function d(a,b){return{line:b.line+a.line,column:b.column+a.column}}function e(a){if(!a)return 0;var b=a.match(/\n/g);return b?b.length:0}function f(a){a=a||{},this.generator=new g({file:a.file||"",sourceRoot:a.sourceRoot||""}),this.sourcesContent=void 0,this.opts=a}var g=a("source-map").SourceMapGenerator;f.prototype.addMappings=function(a,b,c){var e=this.generator;return c=c||{},c.line=c.hasOwnProperty("line")?c.line:0,c.column=c.hasOwnProperty("column")?c.column:0,b.forEach(function(b){e.addMapping({source:b.original?a:void 0,original:b.original,generated:d(b.generated,c)})}),this},f.prototype.addGeneratedMappings=function(a,b,c){for(var d=[],f=e(b)+1,g=1;g<=f;g++){var h={line:g,column:0};d.push({original:h,generated:h})}return this.addMappings(a,d,c)},f.prototype.addSourceContent=function(a,b){return this.sourcesContent=this.sourcesContent||{},this.sourcesContent[a]=b,this},f.prototype.base64Encode=function(){var a=this.toString();return new c(a).toString("base64")},f.prototype.inlineMappingUrl=function(){var a=this.opts.charset||"utf-8";return"//# sourceMappingURL=data:application/json;charset="+a+";base64,"+this.base64Encode()},f.prototype.toJSON=function(){var a=this.generator.toJSON();if(!this.sourcesContent)return a;var b=function(a){return"string"==typeof this.sourcesContent[a]?this.sourcesContent[a]:null}.bind(this);return a.sourcesContent=a.sources.map(b),a},f.prototype.toString=function(){return JSON.stringify(this)},f.prototype._mappings=function(){return this.generator._mappings._array},f.prototype.gen=function(){return this.generator},b.exports=function(a){return new f(a)},b.exports.Generator=f}).call(this,a("buffer").Buffer)},{buffer:34,"source-map":302}],175:[function(a,b,c){(function(c){function d(a,b){var c=i.relative(i.dirname(b),a);return"."===i.dirname(c)&&(c="./"+c),"\\"===i.sep&&(c=c.replace(/\\/g,"/")),c}function e(a,b,c,d){var e=Object.keys(a);if(0===e.length)return b;var f,g=e.map(function(b){return a[b]});if(e.length<=3)f="(function ("+e.join(",")+"){\n"+b+"\n}).call(this,"+g.join(",")+")";else{var h=["__argument0","__argument1","__argument2","__argument3"],j=e.slice(0,3).concat(h).concat(e.slice(3));g.splice(3,0,"arguments[3]","arguments[4]","arguments[5]","arguments[6]"),f="(function ("+j.join(",")+"){\n"+b+"\n}).call(this,"+g.join(",")+")"}if(!d.debug)return f;var k=i.relative(d.basedir,c).replace(/\\/g,"/"),m=l.create().addFile({sourceFile:k,source:b},{line:1});return l.removeComments(f)+"\n"+m.comment()}var f=a("lexical-scope"),g=a("through2"),h=a("xtend"),i=a("path"),j=a.resolve("process/browser.js"),k=a.resolve("is-buffer"),l=a("combine-source-map"),m={process:function(a){var b=d(j,a);return"require("+JSON.stringify(b)+")"},global:function(){return'typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {}'},"Buffer.isBuffer":function(a){var b=d(k,a);return"require("+JSON.stringify(b)+")"},Buffer:function(){return'require("buffer").Buffer'},__filename:function(a,b){var c="/"+i.relative(b,a);return JSON.stringify(c)},__dirname:function(a,b){var c=i.dirname("/"+i.relative(b,a));return JSON.stringify(c)}};b.exports=function(a,b){function d(a,b,c){o.push(a),c()}function i(){var d=this,g=c.isBuffer(o[0])?c.concat(o).toString("utf8"):o.join("");if(g=g.replace(/^\ufeff/,"").replace(/^#![^\n]*\n/,"\n"),b.always!==!0&&!n.test(g))return this.push(g),void this.push(null);try{var h=b.always?{globals:{implicit:l}}:f("(function(){\n"+g+"\n})()")}catch(b){var i=new SyntaxError((b.message||b)+" while parsing "+a);return i.type="syntax",i.filename=a,this.emit("error",i)}var m={};l.forEach(function(b){if(/\./.test(b)){var c=b.split("."),e=(h.globals.implicitProperties||{})[c[0]];if(e&&1===e.length&&e[0]===c[1]){var f=k[b](a,j);f&&(m[c[0]]="{"+JSON.stringify(c[1])+":"+f+"}",d.emit("global",b))}}}),l.forEach(function(b){if(!/\./.test(b)&&!(m[b]||h.globals.implicit.indexOf(b)<0)){var c=k[b](a,j);c&&(m[b]=c,d.emit("global",b))}}),this.push(e(m,g,a,b)),this.push(null)}if(/\.json$/i.test(a))return g();b||(b={});var j=b.basedir||"/",k=h(m,b.vars),l=Object.keys(k).filter(function(a){return"function"==typeof k[a]}),n=RegExp(l.map(function(a){return"\\b"+a+"\\b"}).join("|")),o=[];return g(d,i)},b.exports.vars=m}).call(this,a("buffer").Buffer)},{buffer:34,"combine-source-map":121,"lexical-scope":187,path:200,through2:320,xtend:404}],176:[function(a,b,c){function d(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function e(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&d(a.slice(0,0))}b.exports=function(a){return null!=a&&(d(a)||e(a)||!!a._isBuffer)}},{}],177:[function(a,b,c){"use strict";b.exports=function(a){return"typeof "+a+' !== "undefined"'}},{}],178:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],179:[function(a,b,c){!function(c){"use strict";var d,e=c.Base64,f="2.1.9";if("undefined"!=typeof b&&b.exports)try{d=a("buffer").Buffer}catch(a){}var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=function(a){for(var b={},c=0,d=a.length;c<d;c++)b[a.charAt(c)]=c;return b}(g),i=String.fromCharCode,j=function(a){if(a.length<2){var b=a.charCodeAt(0);return b<128?a:b<2048?i(192|b>>>6)+i(128|63&b):i(224|b>>>12&15)+i(128|b>>>6&63)+i(128|63&b)}var b=65536+1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320);return i(240|b>>>18&7)+i(128|b>>>12&63)+i(128|b>>>6&63)+i(128|63&b)},k=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,l=function(a){return a.replace(k,j)},m=function(a){var b=[0,2,1][a.length%3],c=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),d=[g.charAt(c>>>18),g.charAt(c>>>12&63),b>=2?"=":g.charAt(c>>>6&63),b>=1?"=":g.charAt(63&c)];return d.join("")},n=c.btoa?function(a){return c.btoa(a)}:function(a){return a.replace(/[\s\S]{1,3}/g,m)},o=d?function(a){return(a.constructor===d.constructor?a:new d(a)).toString("base64")}:function(a){return n(l(a))},p=function(a,b){return b?o(String(a)).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}).replace(/=/g,""):o(String(a))},q=function(a){return p(a,!0)},r=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),s=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),c=b-65536;return i((c>>>10)+55296)+i((1023&c)+56320);case 3:return i((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return i((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},t=function(a){return a.replace(r,s)},u=function(a){var b=a.length,c=b%4,d=(b>0?h[a.charAt(0)]<<18:0)|(b>1?h[a.charAt(1)]<<12:0)|(b>2?h[a.charAt(2)]<<6:0)|(b>3?h[a.charAt(3)]:0),e=[i(d>>>16),i(d>>>8&255),i(255&d)];return e.length-=[0,0,2,1][c],e.join("")},v=c.atob?function(a){return c.atob(a)}:function(a){return a.replace(/[\s\S]{1,4}/g,u)},w=d?function(a){return(a.constructor===d.constructor?a:new d(a,"base64")).toString()}:function(a){return t(v(a))},x=function(a){return w(String(a).replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},y=function(){var a=c.Base64;return c.Base64=e,a};if(c.Base64={VERSION:f,atob:v,btoa:n,fromBase64:x,toBase64:p,utob:l,encode:p,encodeURI:q,btou:t,decode:x,noConflict:y},"function"==typeof Object.defineProperty){var z=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};c.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",z(function(){return x(this)})),Object.defineProperty(String.prototype,"toBase64",z(function(a){return p(this,a)})),Object.defineProperty(String.prototype,"toBase64URI",z(function(){return p(this,!0)}))}}c.Meteor&&(Base64=c.Base64)}(this)},{buffer:34}],180:[function(a,b,c){var d="undefined"!=typeof JSON?JSON:a("jsonify");b.exports=function(a,b){b||(b={}),"function"==typeof b&&(b={cmp:b});var c=b.cmp&&function(a){return function(b){return function(c,d){var e={key:c,value:b[c]},f={key:d,
value:b[d]};return a(e,f)}}}(b.cmp);return function a(b){if("object"!=typeof b||null===b)return d.stringify(b);if(e(b)){for(var g=[],h=0;h<b.length;h++)g.push(a(b[h]));return"["+g.join(",")+"]"}for(var i=f(b).sort(c&&c(b)),g=[],h=0;h<i.length;h++){var j=i[h];g.push(a(j)+":"+a(b[j]))}return"{"+g.join(",")+"}"}(a)};var e=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},f=Object.keys||function(a){var b=Object.prototype.hasOwnProperty||function(){return!0},c=[];for(var d in a)b.call(a,d)&&c.push(d);return c}},{jsonify:181}],181:[function(a,b,c){c.parse=a("./lib/parse"),c.stringify=a("./lib/stringify")},{"./lib/parse":182,"./lib/stringify":183}],182:[function(a,b,c){var d,e,f,g,h={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},i=function(a){throw{name:"SyntaxError",message:a,at:d,text:f}},j=function(a){return a&&a!==e&&i("Expected '"+a+"' instead of '"+e+"'"),e=f.charAt(d),d+=1,e},k=function(){var a,b="";for("-"===e&&(b="-",j("-"));e>="0"&&e<="9";)b+=e,j();if("."===e)for(b+=".";j()&&e>="0"&&e<="9";)b+=e;if("e"===e||"E"===e)for(b+=e,j(),"-"!==e&&"+"!==e||(b+=e,j());e>="0"&&e<="9";)b+=e,j();return a=+b,isFinite(a)?a:void i("Bad number")},l=function(){var a,b,c,d="";if('"'===e)for(;j();){if('"'===e)return j(),d;if("\\"===e)if(j(),"u"===e){for(c=0,b=0;b<4&&(a=parseInt(j(),16),isFinite(a));b+=1)c=16*c+a;d+=String.fromCharCode(c)}else{if("string"!=typeof h[e])break;d+=h[e]}else d+=e}i("Bad string")},m=function(){for(;e&&e<=" ";)j()},n=function(){switch(e){case"t":return j("t"),j("r"),j("u"),j("e"),!0;case"f":return j("f"),j("a"),j("l"),j("s"),j("e"),!1;case"n":return j("n"),j("u"),j("l"),j("l"),null}i("Unexpected '"+e+"'")},o=function(){var a=[];if("["===e){if(j("["),m(),"]"===e)return j("]"),a;for(;e;){if(a.push(g()),m(),"]"===e)return j("]"),a;j(","),m()}}i("Bad array")},p=function(){var a,b={};if("{"===e){if(j("{"),m(),"}"===e)return j("}"),b;for(;e;){if(a=l(),m(),j(":"),Object.hasOwnProperty.call(b,a)&&i('Duplicate key "'+a+'"'),b[a]=g(),m(),"}"===e)return j("}"),b;j(","),m()}}i("Bad object")};g=function(){switch(m(),e){case"{":return p();case"[":return o();case'"':return l();case"-":return k();default:return e>="0"&&e<="9"?k():n()}},b.exports=function(a,b){var c;return f=a,d=0,e=" ",c=g(),m(),e&&i("Syntax error"),"function"==typeof b?function a(c,d){var e,f,g=c[d];if(g&&"object"==typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=a(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(c,d,g)}({"":c},""):c}},{}],183:[function(a,b,c){function d(a){return i.lastIndex=0,i.test(a)?'"'+a.replace(i,function(a){var b=j[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,b){var c,i,j,k,l,m=f,n=b[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof h&&(n=h.call(b,a,n)),typeof n){case"string":return d(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(f+=g,l=[],"[object Array]"===Object.prototype.toString.apply(n)){for(k=n.length,c=0;c<k;c+=1)l[c]=e(c,n)||"null";return j=0===l.length?"[]":f?"[\n"+f+l.join(",\n"+f)+"\n"+m+"]":"["+l.join(",")+"]",f=m,j}if(h&&"object"==typeof h)for(k=h.length,c=0;c<k;c+=1)i=h[c],"string"==typeof i&&(j=e(i,n),j&&l.push(d(i)+(f?": ":":")+j));else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(j=e(i,n),j&&l.push(d(i)+(f?": ":":")+j));return j=0===l.length?"{}":f?"{\n"+f+l.join(",\n"+f)+"\n"+m+"}":"{"+l.join(",")+"}",f=m,j}}var f,g,h,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.exports=function(a,b,c){var d;if(f="",g="","number"==typeof c)for(d=0;d<c;d+=1)g+=" ";else"string"==typeof c&&(g=c);if(h=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return e("",{"":a})}},{}],184:[function(a,b,c){(function(a){function c(){this.tState=p,this.value=void 0,this.string=void 0,this.stringBuffer=a.alloc?a.alloc(U):new a(U),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=J,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new a(2),3:new a(3),4:new a(4)},this.offset=-1}var d={},e=d.LEFT_BRACE=1,f=d.RIGHT_BRACE=2,g=d.LEFT_BRACKET=3,h=d.RIGHT_BRACKET=4,i=d.COLON=5,j=d.COMMA=6,k=d.TRUE=7,l=d.FALSE=8,m=d.NULL=9,n=d.STRING=10,o=d.NUMBER=11,p=d.START=17,q=d.STOP=18,r=d.TRUE1=33,s=d.TRUE2=34,t=d.TRUE3=35,u=d.FALSE1=49,v=d.FALSE2=50,w=d.FALSE3=51,x=d.FALSE4=52,y=d.NULL1=65,z=d.NULL2=66,A=d.NULL3=67,B=d.NUMBER1=81,C=d.NUMBER3=83,D=d.STRING1=97,E=d.STRING2=98,F=d.STRING3=99,G=d.STRING4=100,H=d.STRING5=101,I=d.STRING6=102,J=d.VALUE=113,K=d.KEY=114,L=d.OBJECT=129,M=d.ARRAY=130,N="\\".charCodeAt(0),O="/".charCodeAt(0),P="\b".charCodeAt(0),Q="\f".charCodeAt(0),R="\n".charCodeAt(0),S="\r".charCodeAt(0),T="\t".charCodeAt(0),U=65536;c.toknam=function(a){for(var b=Object.keys(d),c=0,e=b.length;c<e;c++){var f=b[c];if(d[f]===a)return f}return a&&"0x"+a.toString(16)};var V=c.prototype;V.onError=function(a){throw a},V.charError=function(a,b){this.tState=q,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(a[b]))+" at position "+b+" in state "+c.toknam(this.tState)))},V.appendStringChar=function(a){this.stringBufferOffset>=U&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=a},V.appendStringBuf=function(a,b,c){var d=a.length;"number"==typeof b&&(d="number"==typeof c?c<0?a.length-b+c:c-b:a.length-b),d<0&&(d=0),this.stringBufferOffset+d>U&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),a.copy(this.stringBuffer,this.stringBufferOffset,b,c),this.stringBufferOffset+=d},V.write=function(b){"string"==typeof b&&(b=new a(b));for(var d,q=0,J=b.length;q<J;q++)if(this.tState===p){if(d=b[q],this.offset++,123===d)this.onToken(e,"{");else if(125===d)this.onToken(f,"}");else if(91===d)this.onToken(g,"[");else if(93===d)this.onToken(h,"]");else if(58===d)this.onToken(i,":");else if(44===d)this.onToken(j,",");else if(116===d)this.tState=r;else if(102===d)this.tState=u;else if(110===d)this.tState=y;else if(34===d)this.string="",this.stringBufferOffset=0,this.tState=D;else if(45===d)this.string="-",this.tState=B;else if(d>=48&&d<64)this.string=String.fromCharCode(d),this.tState=C;else if(32!==d&&9!==d&&10!==d&&13!==d)return this.charError(b,q)}else if(this.tState===D)if(d=b[q],this.bytes_remaining>0){for(var K=0;K<this.bytes_remaining;K++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+K]=b[K];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,q=q+K-1}else if(0===this.bytes_remaining&&d>=128){if(d<=193||d>244)return this.onError(new Error("Invalid UTF-8 character at position "+q+" in state "+c.toknam(this.tState)));if(d>=194&&d<=223&&(this.bytes_in_sequence=2),d>=224&&d<=239&&(this.bytes_in_sequence=3),d>=240&&d<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+q>b.length){for(var L=0;L<=b.length-1-q;L++)this.temp_buffs[this.bytes_in_sequence][L]=b[q+L];this.bytes_remaining=q+this.bytes_in_sequence-b.length,q=b.length-1}else this.appendStringBuf(b,q,q+this.bytes_in_sequence),q=q+this.bytes_in_sequence-1}else if(34===d)this.tState=p,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(n,this.string),this.offset+=a.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===d)this.tState=E;else{if(!(d>=32))return this.charError(b,q);this.appendStringChar(d)}else if(this.tState===E)if(d=b[q],34===d)this.appendStringChar(d),this.tState=D;else if(92===d)this.appendStringChar(N),this.tState=D;else if(47===d)this.appendStringChar(O),this.tState=D;else if(98===d)this.appendStringChar(P),this.tState=D;else if(102===d)this.appendStringChar(Q),this.tState=D;else if(110===d)this.appendStringChar(R),this.tState=D;else if(114===d)this.appendStringChar(S),this.tState=D;else if(116===d)this.appendStringChar(T),this.tState=D;else{if(117!==d)return this.charError(b,q);this.unicode="",this.tState=F}else if(this.tState===F||this.tState===G||this.tState===H||this.tState===I){if(d=b[q],!(d>=48&&d<64||d>64&&d<=70||d>96&&d<=102))return this.charError(b,q);if(this.unicode+=String.fromCharCode(d),this.tState++===I){var M=parseInt(this.unicode,16);this.unicode=void 0,void 0!==this.highSurrogate&&M>=56320&&M<57344?(this.appendStringBuf(new a(String.fromCharCode(this.highSurrogate,M))),this.highSurrogate=void 0):void 0===this.highSurrogate&&M>=55296&&M<56320?this.highSurrogate=M:(void 0!==this.highSurrogate&&(this.appendStringBuf(new a(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new a(String.fromCharCode(M)))),this.tState=D}}else if(this.tState===B||this.tState===C)switch(d=b[q]){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(d),this.tState=C;break;default:this.tState=p;var U=Number(this.string);if(isNaN(U))return this.charError(b,q);this.string.match(/[0-9]+/)==this.string&&U.toString()!=this.string?this.onToken(n,this.string):this.onToken(o,U),this.offset+=this.string.length-1,this.string=void 0,q--}else if(this.tState===r){if(114!==b[q])return this.charError(b,q);this.tState=s}else if(this.tState===s){if(117!==b[q])return this.charError(b,q);this.tState=t}else if(this.tState===t){if(101!==b[q])return this.charError(b,q);this.tState=p,this.onToken(k,!0),this.offset+=3}else if(this.tState===u){if(97!==b[q])return this.charError(b,q);this.tState=v}else if(this.tState===v){if(108!==b[q])return this.charError(b,q);this.tState=w}else if(this.tState===w){if(115!==b[q])return this.charError(b,q);this.tState=x}else if(this.tState===x){if(101!==b[q])return this.charError(b,q);this.tState=p,this.onToken(l,!1),this.offset+=4}else if(this.tState===y){if(117!==b[q])return this.charError(b,q);this.tState=z}else if(this.tState===z){if(108!==b[q])return this.charError(b,q);this.tState=A}else if(this.tState===A){if(108!==b[q])return this.charError(b,q);this.tState=p,this.onToken(m,null),this.offset+=3}},V.onToken=function(a,b){},V.parseError=function(a,b){this.tState=q,this.onError(new Error("Unexpected "+c.toknam(a)+(b?"("+JSON.stringify(b)+")":"")+" in state "+c.toknam(this.state)))},V.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},V.pop=function(){var a=this.value,b=this.stack.pop();this.value=b.value,this.key=b.key,this.mode=b.mode,this.emit(a),this.mode||(this.state=J)},V.emit=function(a){this.mode&&(this.state=j),this.onValue(a)},V.onValue=function(a){},V.onToken=function(a,b){if(this.state===J)if(a===n||a===o||a===k||a===l||a===m)this.value&&(this.value[this.key]=b),this.emit(b);else if(a===e)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=K,this.mode=L;else if(a===g)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=M,this.state=J;else if(a===f){if(this.mode!==L)return this.parseError(a,b);this.pop()}else{if(a!==h)return this.parseError(a,b);if(this.mode!==M)return this.parseError(a,b);this.pop()}else if(this.state===K)if(a===n)this.key=b,this.state=i;else{if(a!==f)return this.parseError(a,b);this.pop()}else if(this.state===i){if(a!==i)return this.parseError(a,b);this.state=J}else{if(this.state!==j)return this.parseError(a,b);if(a===j)this.mode===M?(this.key++,this.state=J):this.mode===L&&(this.state=K);else{if(!(a===h&&this.mode===M||a===f&&this.mode===L))return this.parseError(a,b);this.pop()}}},c.C=d,b.exports=c}).call(this,a("buffer").Buffer)},{buffer:34}],185:[function(a,b,c){function d(a,b){if(!(this instanceof d))return new d(a,b);e.call(this,[],b);for(var c=[],f=0;f<a.length;f++){var h=a[f];"string"!=typeof h&&(g(h)&&(h=new d(h,b)),f>=0&&"string"==typeof a[f-1]&&(h.label=a[f-1]),c.push(h))}"string"==typeof a[f-1]&&c.push(new d([],b)),this.splice.apply(this,[0,0].concat(c))}var e=a("stream-splicer"),f=a("inherits"),g=a("isarray");b.exports=d,f(d,e),b.exports.obj=function(a,b){return b||(b={}),b.objectMode=!0,new d(a,b)},d.prototype.indexOf=function(a){if("string"==typeof a){for(var b=0;b<this._streams.length;b++)if(this._streams[b].label===a)return b;return-1}return e.prototype.indexOf.call(this,a)},d.prototype.get=function(a){if("string"==typeof a){var b=this.indexOf(a);if(b<0)return;return this._streams[b]}return e.prototype.get.call(this,a)},d.prototype.splice=function(a){var b;b="string"==typeof a?this.indexOf(a):a;var c=[b].concat([].slice.call(arguments,1));return e.prototype.splice.apply(this,c)}},{inherits:173,isarray:186,"stream-splicer":305}],186:[function(a,b,c){arguments[4][32][0].apply(c,arguments)},{dup:32}],187:[function(a,b,c){function d(a){return"FunctionDeclaration"===a.type||"FunctionExpression"===a.type}function e(a){for(var b=[],c=a;"Program"!==c.type;c=c.parent){var d=f(c).join(".");b.unshift(d)}return b.join(".")}function f(a){if(a.lexicalScopeKey)return a.lexicalScopeKey;for(var b=a.parent,c=j(b),d={keys:[],values:[],top:[]},e=0;e<c.length;e++){var h=c[e];if(d.keys.push(h),d.values.push(b[h]),d.top.push(void 0),i(b[h])){var k=j(b[h]);d.keys.push.apply(d.keys,k),d.values.push.apply(d.values,b[h]);for(var l=[],m=0;m<k.length;m++)l.push(h);d.top.push.apply(d.top,l)}}var n=g(d.values,a),o=[];return d.top[n]&&o.push(d.top[n]),d.keys[n]&&o.push(d.keys[n]),"CallExpression"===a.parent.type&&o.unshift.apply(o,f(a.parent.parent)),a.lexicalScopeKey=o}function g(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}var h=a("astw");b.exports=function(a){function b(a){for(var b=a;b;b=b.parent)if(d(b)||"Program"===b.type){var e=c(b);if(g[e][a.name])return e}}function c(a){for(var b=a;!d(b)&&"Program"!==b.type;b=b.parent);var c=e(b);return g[c]||(g[c]={}),c}var g={},i={},k={},l={};"string"==typeof a&&(a=String(a).replace(/^#![^\n]*\n/,"")),a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.toString&&(a=a.toString("utf8"));var m=h(a);m(function(a){if("VariableDeclaration"===a.type)for(var b=c(a),e=0;e<a.declarations.length;e++){var f=a.declarations[e];g[b][f.id.name]=f}else if("CatchClause"===a.type){var b=c(a);g[b][a.param.name]=a.param}else if(d(a)){var b=c(a.parent);a.id&&(g[b][a.id.name]=a);var h=a.params.length&&c(a);h&&!g[h]&&(g[h]={});for(var e=0;e<a.params.length;e++){var i=a.params[e];g[h][i.name]=i}}}),m(function(a){if("Identifier"===a.type&&void 0===b(a)){if("Property"===a.parent.type&&a.parent.key===a)return;if("MemberExpression"===a.parent.type&&a.parent.property===a)return;if(d(a.parent))return;if("LabeledStatement"===a.parent.type)return;if("ContinueStatement"===a.parent.type)return;if("BreakStatement"===a.parent.type)return;if("AssignmentExpression"===a.parent.type){var c="MemberExpression"===a.parent.left.type&&a.parent.left.object===a.name,e="Identifier"===a.parent.left.type&&a.parent.left.name===a.name;(c||e)&&(k[a.name]=f(a).length)}(!k[a.name]||k[a.name]<f(a).length)&&(i[a.name]=f(a).length,l[a.name]||(l[a.name]={}),a.parent&&"MemberExpression"===a.parent.type&&"Identifier"===a.parent.property.type?l[a.name][a.parent.property.name]=!0:a.parent&&"CallExpression"===a.parent.type&&a.parent.callee===a?l[a.name]["()"]=!0:l[a.name]["*"]=!0)}});for(var n={},o=j(g),p=0;p<o.length;p++){var q=o[p];n[q]=j(g[q])}for(var r={},s=j(l),p=0;p<s.length;p++)r[s[p]]=j(l[s[p]]);return{locals:n,globals:{implicit:j(i),implicitProperties:r,exported:j(k)}}};var i=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},j=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b}},{astw:7}],188:[function(a,b,c){function d(){this.__data__={}}function e(a){return this.has(a)&&delete this.__data__[a]}function f(a){return"__proto__"==a?void 0:this.__data__[a]}function g(a){return"__proto__"!=a&&l.call(this.__data__,a)}function h(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function i(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new TypeError(j);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new i.Cache,c}var j="Expected a function",k=Object.prototype,l=k.hasOwnProperty;d.prototype.delete=e,d.prototype.get=f,d.prototype.has=g,d.prototype.set=h,i.Cache=d,b.exports=i},{}],189:[function(a,b,c){"use strict";b.exports=function(a,b){for(var c={},d=Object.keys(a),e=0;e<d.length;e++){var f=d[e],g=b(f,a[f],a);c[g[0]]=g[1]}return c}},{}],190:[function(a,b,c){(function(c){var d=(a("fs"),a("path")),e=a("fs").existsSync||a("path").existsSync;b.exports.version={};var f=["2.0.0","2.0.1","2.0.2","2.1.0","2.1.1","2.2.0","2.3.0","3.0.0"];f.map(function(f){b.exports.version[f]=a(d.join(c,f,"reference.json"));var g=d.join(c,f,"datasources.json");e(g)&&(b.exports.version[f].datasources=a(g).datasources)})}).call(this,"/node_modules/mapnik-reference")},{fs:29,path:200}],191:[function(a,b,c){(function(c){function d(a){var b=this;if(!(this instanceof d))return new d(a);if(y.call(this,{objectMode:!0}),a||(a={}),this.basedir=a.basedir||c.cwd(),this.persistentCache=a.persistentCache||function(a,b,d,e,f){c.nextTick(function(){e(null,f)})},this.cache=a.cache,this.fileCache=a.fileCache,this.pkgCache=a.packageCache||{},this.pkgFileCache={},this.pkgFileCachePending={},this._emittedPkg={},this.visited={},this.walking={},this.entries=[],this._input=[],this.paths=a.paths||c.env.NODE_PATH||"","string"==typeof this.paths){var e=l.delimiter||("win32"===c.platform?";":":");this.paths=this.paths.split(e)}this.paths=this.paths.filter(Boolean).map(function(a){return l.resolve(b.basedir,a)}),this.transforms=[].concat(a.transform).filter(Boolean),this.globalTransforms=[].concat(a.globalTransform).filter(Boolean),this.resolver=a.resolve||n,this.options=v(a),this.options.modules||(this.options.modules={}),this.options.expose||(this.options.expose={}),this.pending=0,this.inputPending=0;var f=l.join(this.basedir,"__fake.js");this.top={id:f,filename:f,paths:this.paths,basedir:this.basedir}}function e(a,b){var c=[];if(b.transformKey){for(var d=a,e=b.transformKey,f=0;f<e.length&&(d&&"object"==typeof d);f++)d=d[e[f]];f===e.length&&(c=[].concat(d).filter(Boolean))}return c.concat(b.globalTransform||[])}function f(a){var b=[].slice.call(arguments,1);c.nextTick(function(){a.apply(null,b)})}function g(a){if(!a)return!1;for(var b=1;b<arguments.length;b++){var c=arguments[b];if(!i(a,c))return!1;a=a[c]}return!0}function h(a){var b=q();return b.push(a),b.push(null),b}function i(a,b){return a&&Object.prototype.hasOwnProperty.call(a,b)}function j(a){if("function"==typeof a.read)return a;var b=q(),c=q();b.pipe(a).pipe(c);var d=u(b,c);return a.on("error",function(a){d.emit("error",a)}),d}var k=a("fs"),l=a("path"),m=a("cached-path-relative"),n=a("browser-resolve"),o=a("resolve"),p=a("detective"),q=a("through2"),r=a("concat-stream"),s=a("parents"),t=a("stream-combiner2"),u=a("duplexer2"),v=a("xtend"),w=a("defined"),x=a("inherits"),y=a("readable-stream").Transform;b.exports=d,x(d,y),d.prototype._isTopLevel=function(a){var b=this.entries.some(function(b){var c=m(l.dirname(b),a);return c.split(/[\\\/]/).indexOf("node_modules")<0});if(!b){var c=m(this.basedir,a);b=c.split(/[\\\/]/).indexOf("node_modules")<0}return b},d.prototype._transform=function(a,b,c){var d=this;if("string"==typeof a&&(a={file:a}),a.transform&&a.global)return this.globalTransforms.push([a.transform,a.options]),c();if(a.transform)return this.transforms.push([a.transform,a.options]),c();d.pending++;var e=w(a.basedir,d.basedir);a.entry!==!1&&d.entries.push(l.resolve(e,a.file||a.id)),d.lookupPackage(a.file,function(b,e){return b&&d.options.ignoreMissing?(d.emit("missing",a.file,d.top),d.pending--,c()):b?d.emit("error",b):(d.pending--,d._input.push({row:a,pkg:e}),void c())})},d.prototype._flush=function(){var a=this,b={};a._input.forEach(function(a){var c=a.row,d=b[c.file||c.id];if(d){d.row.entry=d.row.entry||c.entry;var e=d.row.expose||c.expose;d.row.expose=e,e&&d.row.file===d.row.id&&c.file!==c.id&&(d.row.id=c.id)}else b[c.file||c.id]=a}),Object.keys(b).forEach(function(c){var d=b[c],e=d.pkg||{},f=d.row.file?l.dirname(d.row.file):a.basedir;e.__dirname||(e.__dirname=f),a.walk(d.row,v(a.top,{filename:l.join(f,"_fake.js")}))}),0===this.pending&&this.push(null),this._ended=!0},d.prototype.resolve=function(a,b,c){var d=this,e=d.options;if(g(d.cache,b.id,"deps",a)&&d.cache[b.id].deps[a]){var f=d.cache[b.id].deps[a],h=d.pkgCache[f];return h?c(null,f,h):d.lookupPackage(f,function(a,b){c(null,f,b)})}b.packageFilter=function(a,b){var c=l.dirname(b);return e.packageFilter&&(a=e.packageFilter(a,b)),a.__dirname=c,a},e.extensions&&(b.extensions=e.extensions),e.modules&&(b.modules=e.modules),d.resolver(a,b,function f(g,h,i,j){return g?c(g):h?void(i&&i.__dirname?c(g,h,i,j):d.lookupPackage(h,function(a,b){return a?c(a):(b||(b={}),b.__dirname||(b.__dirname=l.dirname(h)),d.pkgCache[h]=b,void f(a,h,e.packageFilter?e.packageFilter(b,b.__dirname):b,j))})):c(new Error('module not found: "'+a+'" from file '+b.filename))})},d.prototype.readFile=function(a,b,c){var d=this;if(g(this.fileCache,a))return h(this.fileCache[a]);var e=k.createReadStream(a,{encoding:"utf8"});return e.on("error",function(a){d.emit("error",a)}),this.emit("file",a,b),e},d.prototype.getTransforms=function(b,c,d){function g(){var a=t.apply(null,r);a.on("error",function(a){a.message+=" while parsing file: "+b,a.filename||(a.filename=b),m.emit("error",a)}),s.pipe(a).pipe(v)}function h(a,c){var d={};if(Array.isArray(a)&&(d=a[1]||{},a=a[0]),d._flags=d.hasOwnProperty("_flags")?d._flags:m.options,"function"==typeof a){var e=a(b,d);m.emit("transform",e,b),f(c,null,j(e))}else i(a,d,function(a,b){return a?c(a):void c(null,j(b))})}function i(d,e,f){var g={basedir:l.dirname(b)};o(d,g,function h(i,j,k){if(i&&k)return f&&f(i);if(i)return g.basedir=c.__dirname,o(d,g,function(a,b){h(a,b,!0)});if(!j)return f(new Error("cannot find transform module "+tr+" while transforming "+b));var l=a(j);if("function"!=typeof l)return f(new Error("Unexpected "+typeof l+" exported by the "+JSON.stringify(j)+" package. Expected a transform function."));var n=l(b,e);m.emit("transform",n,b),f(null,n)})}d||(d={});var k,m=this;k=!d.builtin&&!d.inNodeModules&&this._isTopLevel(b);var n=[].concat(k?this.transforms:[]).concat(e(c,{globalTransform:this.globalTransforms,transformKey:this.options.transformKey}));if(0===n.length)return q();for(var p=n.length,r=[],s=q(),v=q(),w=u(s,v),x=0;x<n.length;x++)(function(a){h(n[a],function(b,c){return b?m.emit("error",b):(r[a]=c,void(0===--p&&g()))})})(x);return w},d.prototype.walk=function(a,b,c){function d(a,b){return l.noparse?[]:g.parseDeps(a,b)}function e(a,b,c,e){var g=d(a,b);g&&f(a,b,c,e,g)}function f(a,d,e,f,h){function i(){l.id||(l.id=a),l.source||(l.source=d),l.deps||(l.deps=n),l.file||(l.file=a),g.entries.indexOf(a)>=0&&(l.entry=!0),g.push(l),c&&c(null,a),0===--g.pending&&g.push(null)}var m=h.length,n={};k&&--g.inputPending,function c(){return g.inputPending>0?setTimeout(c):(h.forEach(function(c){if(j.filter&&!j.filter(c))return n[c]=!1,void(0===--m&&i());var d=g._isTopLevel(f||a),h={id:a,filename:a,paths:g.paths,package:e,inNodeModules:b.inNodeModules||!d};g.walk(c,h,function(a,b){n[c]=b,0===--m&&i()})}),void(0===h.length&&i()))}()}var g=this,j=g.options;this.pending++;var k,l={};"object"==typeof a&&(l=v(a),l.entry===!1&&delete l.entry,a=l.file||l.id,k=!0,this.inputPending++),g.resolve(a,b,function(m,n,o,p){function q(c,e){var f=c?h(c):g.readFile(n,a,o);f.pipe(g.getTransforms(p||n,o,{builtin:s,inNodeModules:b.inNodeModules})).pipe(r(function(a){var b=a.toString("utf8"),c=d(n,b);c&&e(null,{source:b,package:o,deps:c.reduce(function(a,b){return a[b]=!0,a},{})})}))}var s=i(b.modules,a);if(l.expose&&(g.options.expose[l.expose]=g.options.modules[l.expose]=n),o&&!g._emittedPkg[o.__dirname]&&(g._emittedPkg[o.__dirname]=!0,g.emit("package",o)),j.postFilter&&!j.postFilter(a,n,o))return 0===--g.pending&&g.push(null),k&&--g.inputPending,c&&c(null,void 0);if(m&&l.source){n=l.file;var t=g.getTransforms(n,o);return t.pipe(r(function(a){l.source=a.toString("utf8"),e(n,l.source,o)})),t.end(l.source)}if(m&&g.options.ignoreMissing)return 0===--g.pending&&g.push(null),k&&--g.inputPending,g.emit("missing",a,b),c&&c(null,void 0);if(m)return g.emit("error",m);if(g.visited[n])return 0===--g.pending&&g.push(null),k&&--g.inputPending,c&&c(null,n);if(g.visited[n]=!0,l.source){var t=g.getTransforms(n,o);return t.pipe(r(function(a){l.source=a.toString("utf8"),e(n,l.source,o)})),t.end(l.source)}var u=g.cache&&g.cache[n];return u?f(n,u.source,u.package,p,Object.keys(u.deps)):void g.persistentCache(n,a,o,q,function(a,b){return a?void g.emit("error",a):void f(n,b.source,b.package,p,Object.keys(b.deps))})})},d.prototype.parseDeps=function(a,b,c){if(this.options.noParse===!0)return[];if(/\.json$/.test(a))return[];if(Array.isArray(this.options.noParse)&&this.options.noParse.indexOf(a)>=0)return[];try{var d=p(b)}catch(b){var e=b&&b.message?b.message:b;return void this.emit("error",new Error("Parsing file "+a+": "+e))}return d},d.prototype.lookupPackage=function(a,b){var c=this,d=this.pkgCache[a];if(d)return f(b,null,d);if(d===!1)return f(b,null,void 0);var e=s(a?l.dirname(a):c.basedir);!function d(){function g(a,e){if(c.pkgFileCachePending[i]){var f=c.pkgFileCachePending[i];delete c.pkgFileCachePending[i],f.forEach(function(b){b(a,e)})}a?b(a):e?b(null,e):(c.pkgCache[i]=!1,d())}if(0===e.length)return c.pkgCache[a]=!1,b(null,void 0);var h=e.shift();if("node_modules"===h.split(/[\\\/]/).slice(-1)[0])return b(null,void 0);var i=l.join(h,"package.json"),j=c.pkgCache[i];if(j)return f(b,null,j);if(j===!1)return d();var m=c.pkgFileCachePending[i];return m?m.push(g):(m=c.pkgFileCachePending[i]=[],void k.readFile(i,function(b,d){if(b)return g();try{var e=JSON.parse(d)}catch(a){return g(new Error([a+" while parsing json file "+i].join("")))}e.__dirname=h,c.pkgCache[i]=e,c.pkgCache[a]=e,g(null,e)}))}()}}).call(this,a("_process"))},{_process:256,"browser-resolve":11,"cached-path-relative":35,"concat-stream":124,defined:128,detective:132,duplexer2:134,fs:29,inherits:173,parents:198,path:200,"readable-stream":265,resolve:273,"stream-combiner2":304,through2:320,xtend:404}],192:[function(a,b,c){"use strict";var d=a("find-parent-dir"),e=a("path");b.exports=function(b,c,f){!function b(g){d(g,"package.json",function(d,h){if(d)return f(d);if(!h)return f();var i;try{if(i=a(e.join(h,"package.json")),c(i))return f(null,{path:e.join(h,"package.json"),pack:i});b(e.resolve(g,".."))}catch(a){f(a)}})}(b)}},{"find-parent-dir":164,path:200}],193:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],function(){return d(a)}):"object"==typeof c?b.exports=d(a):a.Polyglot=d(a)}(this,function(a){"use strict";function b(a){a=a||{},this.phrases={},this.extend(a.phrases||{}),this.currentLocale=a.locale||"en",this.allowMissing=!!a.allowMissing,this.warn=a.warn||i}function c(a){var b,c,d,e={};for(b in a)if(a.hasOwnProperty(b)){c=a[b];for(d in c)e[c[d]]=b}return e}function d(a){return k.call(a,o,"")}function e(a,b,c){var e,f,h;return null!=c&&a?(f=a.split(l),h=f[g(b,c)]||f[0],e=d(h)):e=a,e}function f(a){var b=c(n);return b[a]||b.en}function g(a,b){return m[f(a)](b)}function h(a,b){for(var c in b)if("_"!==c&&b.hasOwnProperty(c)){var d=b[c];"string"==typeof d&&(d=k.call(b[c],p,q)),a=k.call(a,new RegExp("%\\{"+c+"\\}","g"),d)}return a}function i(b){a.console&&a.console.warn&&a.console.warn("WARNING: "+b)}function j(a){var b={};for(var c in a)b[c]=a[c];return b}var k=String.prototype.replace;b.VERSION="1.0.0",b.prototype.locale=function(a){return a&&(this.currentLocale=a),this.currentLocale},b.prototype.extend=function(a,b){var c;for(var d in a)a.hasOwnProperty(d)&&(c=a[d],b&&(d=b+"."+d),"object"==typeof c?this.extend(c,d):this.phrases[d]=c)},b.prototype.unset=function(a,b){var c;if("string"==typeof a)delete this.phrases[a];else for(var d in a)a.hasOwnProperty(d)&&(c=a[d],b&&(d=b+"."+d),"object"==typeof c?this.unset(c,d):delete this.phrases[d])},b.prototype.clear=function(){this.phrases={}},b.prototype.replace=function(a){this.clear(),this.extend(a)},b.prototype.t=function(a,b){var c,d;return b=null==b?{}:b,"number"==typeof b&&(b={smart_count:b}),"string"==typeof this.phrases[a]?c=this.phrases[a]:"string"==typeof b._?c=b._:this.allowMissing?c=a:(this.warn('Missing translation for key: "'+a+'"'),d=a),"string"==typeof c&&(b=j(b),d=e(c,this.currentLocale,b.smart_count),d=h(d,b)),d},b.prototype.has=function(a){return a in this.phrases};var l="||||",m={chinese:function(a){return 0},german:function(a){return 1!==a?1:0},french:function(a){return a>1?1:0},russian:function(a){return a%10===1&&a%100!==11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2},czech:function(a){return 1===a?0:a>=2&&a<=4?1:2},polish:function(a){return 1===a?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2},icelandic:function(a){return a%10!==1||a%100===11?1:0}},n={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]},o=/^\s+|\s+$/g,p=/\$/g,q="$$$$";return b})},{}],194:[function(a,b,c){var d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=function(a){var b="function"==typeof a&&!(a instanceof RegExp)||"[object Function]"===e.call(a);return b||"undefined"==typeof window||(b=a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt),b};b.exports=function(a,b){if(!f(b))throw new TypeError("iterator must be a function");var c,e,g="string"==typeof a,h=a.length,i=arguments.length>2?arguments[2]:null;if(h===+h)for(c=0;c<h;c++)null===i?b(g?a.charAt(c):a[c],c,a):b.call(i,g?a.charAt(c):a[c],c,a);else for(e in a)d.call(a,e)&&(null===i?b(a[e],e,a):b.call(i,a[e],e,a))}},{}],195:[function(a,b,c){b.exports=Object.keys||a("./shim")},{"./shim":197}],196:[function(a,b,c){var d=Object.prototype.toString;b.exports=function a(b){var c=d.call(b),a="[object Arguments]"===c;return a||(a="[object Array]"!==c&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&b.length>=0&&"[object Function]"===d.call(b.callee)),a}},{}],197:[function(a,b,c){!function(){"use strict";var c,d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=a("./foreach"),g=a("./isArguments"),h=!{toString:null}.propertyIsEnumerable("toString"),i=function(){}.propertyIsEnumerable("prototype"),j=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];c=function(a){var b=null!==a&&"object"==typeof a,c="[object Function]"===e.call(a),k=g(a),l=[];if(!b&&!c&&!k)throw new TypeError("Object.keys called on a non-object");if(k)f(a,function(a){l.push(a)});else{var m,n=i&&c;for(m in a)n&&"prototype"===m||!d.call(a,m)||l.push(m)}if(h){var o=a.constructor,p=o&&o.prototype===a;f(j,function(b){p&&"constructor"===b||!d.call(a,b)||l.push(b)})}return l},b.exports=c}()},{"./foreach":194,"./isArguments":196}],198:[function(a,b,c){(function(c){var d=a("path-platform");b.exports=function(a,b){function e(a){return function(b){return a(b).replace(/:\.$/,":")}}void 0===a&&(a=c.cwd()),b||(b={});var f=b.platform||c.platform,g=/^win/.test(f),h=g?d.win32:d,i=g&&"c:."===h.normalize("c:")?e(h.normalize):h.normalize,j=g?/[\\\/]/:"/",k=g?"":"/",l=function(a,b){var c=[a,b].filter(function(a){return a&&"string"==typeof a});return i(c.join(g?"\\":"/"))},m=i(a).split(j).reduce(function(a,b,c){return a.concat(l(a[c],b))},[k]).slice(1).reverse();return m[0]===m[1]?[m[0]]:g&&/^\\/.test(a)?m.slice(0,-1).map(function(a){var b=a.charAt(0);return"\\"===b?a:"."===b?"\\"+a.slice(1):"\\"+a;
}):m}}).call(this,a("_process"))},{_process:256,"path-platform":202}],199:[function(a,b,c){"use strict";b.exports=function(a,b){var c=0;return b.reduce(function(a,b){var d=b.start+c,e=b.end+c,f=b.replacement;return c+=f.length-(e-d),a.slice(0,d)+f+a.slice(e)},a)}},{}],200:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:256}],201:[function(a,b,c){(function(a){"use strict";function c(a){var b=f.exec(a),c=(b[1]||"")+(b[2]||""),d=b[3]||"",e=g.exec(d),h=e[1],i=e[2],j=e[3];return[c,h,i,j]}function d(a){return i.exec(a).slice(1)}var e="win32"===a.platform,f=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,g=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,h={};h.parse=function(a){if("string"!=typeof a)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var b=c(a);if(!b||4!==b.length)throw new TypeError("Invalid path '"+a+"'");return{root:b[0],dir:b[0]+b[1].slice(0,-1),base:b[2],ext:b[3],name:b[2].slice(0,b[2].length-b[3].length)}};var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,j={};j.parse=function(a){if("string"!=typeof a)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var b=d(a);if(!b||4!==b.length)throw new TypeError("Invalid path '"+a+"'");return b[1]=b[1]||"",b[2]=b[2]||"",b[3]=b[3]||"",{root:b[0],dir:b[0]+b[1].slice(0,-1),base:b[2],ext:b[3],name:b[2].slice(0,b[2].length-b[3].length)}},e?b.exports=h.parse:b.exports=j.parse,b.exports.posix=j.parse,b.exports.win32=h.parse}).call(this,a("_process"))},{_process:256}],202:[function(a,b,c){(function(c){function d(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];e&&"."!==e&&(".."===e?c.length&&".."!==c[c.length-1]?c.pop():b&&c.push(".."):c.push(e))}return c}function e(a){var b=j.exec(a),c=(b[1]||"")+(b[2]||""),d=b[3]||"",e=k.exec(d),f=e[1],g=e[2],h=e[3];return[c,f,g,h]}function f(a){return n.exec(a).slice(1)}var g="win32"===c.platform,h=a("util"),i=a("path");if(i.posix)return void(b.exports=i);var j=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,k=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,l={},m=function(a){return"\\\\"+a.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")};l.resolve=function(){for(var a="",b="",e=!1,f=arguments.length-1;f>=-1;f--){var g;if(f>=0?g=arguments[f]:a?(g=c.env["="+a],g&&g.substr(0,3).toLowerCase()===a.toLowerCase()+"\\"||(g=a+"\\")):g=c.cwd(),!h.isString(g))throw new TypeError("Arguments to path.resolve must be strings");if(g){var i=j.exec(g),k=i[1]||"",n=k&&":"!==k.charAt(1),o=l.isAbsolute(g),p=i[3];if((!k||!a||k.toLowerCase()===a.toLowerCase())&&(a||(a=k),e||(b=p+"\\"+b,e=o),a&&e))break}}return n&&(a=m(a)),b=d(b.split(/[\\\/]+/),!e).join("\\"),a&&":"===a.charAt(1)&&(a=a[0].toLowerCase()+a.substr(1)),a+(e?"\\":"")+b||"."},l.normalize=function(a){var b=j.exec(a),c=b[1]||"",e=c&&":"!==c.charAt(1),f=l.isAbsolute(a),g=b[3],h=/[\\\/]$/.test(g);return c&&":"===c.charAt(1)&&(c=c[0].toLowerCase()+c.substr(1)),g=d(g.split(/[\\\/]+/),!f).join("\\"),g||f||(g="."),g&&h&&(g+="\\"),e&&(c=m(c)),c+(f?"\\":"")+g},l.isAbsolute=function(a){var b=j.exec(a),c=b[1]||"",d=!!c&&":"!==c.charAt(1);return!!b[2]||d},l.join=function(){function a(a){if(!h.isString(a))throw new TypeError("Arguments to path.join must be strings");return a}var b=Array.prototype.filter.call(arguments,a),c=b.join("\\");return/^[\\\/]{2}[^\\\/]/.test(b[0])||(c=c.replace(/^[\\\/]{2,}/,"\\")),l.normalize(c)},l.relative=function(a,b){function c(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c+1)}a=l.resolve(a),b=l.resolve(b);for(var d=a.toLowerCase(),e=b.toLowerCase(),f=c(b.split("\\")),g=c(d.split("\\")),h=c(e.split("\\")),i=Math.min(g.length,h.length),j=i,k=0;k<i;k++)if(g[k]!==h[k]){j=k;break}if(0==j)return b;for(var m=[],k=j;k<g.length;k++)m.push("..");return m=m.concat(f.slice(j)),m.join("\\")},l._makeLong=function(a){if(!h.isString(a))return a;if(!a)return"";var b=l.resolve(a);return/^[a-zA-Z]\:\\/.test(b)?"\\\\?\\"+b:/^\\\\[^?.]/.test(b)?"\\\\?\\UNC\\"+b.substring(2):a},l.dirname=function(a){var b=e(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},l.basename=function(a,b){var c=e(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},l.extname=function(a){return e(a)[3]},l.format=function(a){if(!h.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var b=a.root||"";if(!h.isString(b))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);var c=a.dir,d=a.base||"";return c.slice(c.length-1,c.length)===l.sep?c+d:c?c+l.sep+d:d},l.parse=function(a){if(!h.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var b=e(a);if(!b||4!==b.length)throw new TypeError("Invalid path '"+a+"'");return{root:b[0],dir:b[0]+b[1].slice(0,b[1].length-1),base:b[2],ext:b[3],name:b[2].slice(0,b[2].length-b[3].length)}},l.sep="\\",l.delimiter=";";var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o={};o.resolve=function(){for(var a="",b=!1,e=arguments.length-1;e>=-1&&!b;e--){var f=e>=0?arguments[e]:c.cwd();if(!h.isString(f))throw new TypeError("Arguments to path.resolve must be strings");f&&(a=f+"/"+a,b="/"===f.charAt(0))}return a=d(a.split("/"),!b).join("/"),(b?"/":"")+a||"."},o.normalize=function(a){var b=o.isAbsolute(a),c="/"===a.substr(-1);return a=d(a.split("/"),!b).join("/"),a||b||(a="."),a&&c&&(a+="/"),(b?"/":"")+a},o.isAbsolute=function(a){return"/"===a.charAt(0)},o.join=function(){for(var a="",b=0;b<arguments.length;b++){var c=arguments[b];if(!h.isString(c))throw new TypeError("Arguments to path.join must be strings");c&&(a+=a?"/"+c:c)}return o.normalize(a)},o.relative=function(a,b){function c(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c+1)}a=o.resolve(a).substr(1),b=o.resolve(b).substr(1);for(var d=c(a.split("/")),e=c(b.split("/")),f=Math.min(d.length,e.length),g=f,h=0;h<f;h++)if(d[h]!==e[h]){g=h;break}for(var i=[],h=g;h<d.length;h++)i.push("..");return i=i.concat(e.slice(g)),i.join("/")},o._makeLong=function(a){return a},o.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},o.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},o.extname=function(a){return f(a)[3]},o.format=function(a){if(!h.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var b=a.root||"";if(!h.isString(b))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);var c=a.dir?a.dir+o.sep:"",d=a.base||"";return c+d},o.parse=function(a){if(!h.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var b=f(a);if(!b||4!==b.length)throw new TypeError("Invalid path '"+a+"'");return b[1]=b[1]||"",b[2]=b[2]||"",b[3]=b[3]||"",{root:b[0],dir:b[0]+b[1].slice(0,b[1].length-1),base:b[2],ext:b[3],name:b[2].slice(0,b[2].length-b[3].length)}},o.sep="/",o.delimiter=":",g?b.exports=l:b.exports=o,b.exports.posix=o,b.exports.win32=l}).call(this,a("_process"))},{_process:256,path:200,util:403}],203:[function(a,b,c){"use strict";function d(a,b){var c=a.className.split(" ");c.indexOf(b)<0&&c.push(b),a.className=c.join(" ")}function e(a,b){var c=a.className.split(" "),d=c.indexOf(b);d>=0&&c.splice(d,1),a.className=c.join(" ")}c.add=function(a,b){a.classList?a.classList.add(b):d(a,b)},c.remove=function(a,b){a.classList?a.classList.remove(b):e(a,b)},c.list=function(a){return a.classList?Array.prototype.slice.apply(a.classList):a.className.split(" ")}},{}],204:[function(a,b,c){"use strict";function d(a,b){return window.getComputedStyle(a)[b]}function e(a,b,c){return"number"==typeof c&&(c=c.toString()+"px"),a.style[b]=c,a}function f(a,b){for(var c in b){var d=b[c];"number"==typeof d&&(d=d.toString()+"px"),a.style[c]=d}return a}var g={};g.e=function(a,b){var c=document.createElement(a);return c.className=b,c},g.appendTo=function(a,b){return b.appendChild(a),a},g.css=function(a,b,c){return"object"==typeof b?f(a,b):"undefined"==typeof c?d(a,b):e(a,b,c)},g.matches=function(a,b){return"undefined"!=typeof a.matches?a.matches(b):"undefined"!=typeof a.matchesSelector?a.matchesSelector(b):"undefined"!=typeof a.webkitMatchesSelector?a.webkitMatchesSelector(b):"undefined"!=typeof a.mozMatchesSelector?a.mozMatchesSelector(b):"undefined"!=typeof a.msMatchesSelector?a.msMatchesSelector(b):void 0},g.remove=function(a){"undefined"!=typeof a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a)},g.queryChildren=function(a,b){return Array.prototype.filter.call(a.childNodes,function(a){return g.matches(a,b)})},b.exports=g},{}],205:[function(a,b,c){"use strict";var d=function(a){this.element=a,this.events={}};d.prototype.bind=function(a,b){"undefined"==typeof this.events[a]&&(this.events[a]=[]),this.events[a].push(b),this.element.addEventListener(a,b,!1)},d.prototype.unbind=function(a,b){var c="undefined"!=typeof b;this.events[a]=this.events[a].filter(function(d){return!(!c||d===b)||(this.element.removeEventListener(a,d,!1),!1)},this)},d.prototype.unbindAll=function(){for(var a in this.events)this.unbind(a)};var e=function(){this.eventElements=[]};e.prototype.eventElement=function(a){var b=this.eventElements.filter(function(b){return b.element===a})[0];return"undefined"==typeof b&&(b=new d(a),this.eventElements.push(b)),b},e.prototype.bind=function(a,b,c){this.eventElement(a).bind(b,c)},e.prototype.unbind=function(a,b,c){this.eventElement(a).unbind(b,c)},e.prototype.unbindAll=function(){for(var a=0;a<this.eventElements.length;a++)this.eventElements[a].unbindAll()},e.prototype.once=function(a,b,c){var d=this.eventElement(a),e=function(a){d.unbind(b,e),c(a)};d.bind(b,e)},b.exports=e},{}],206:[function(a,b,c){"use strict";b.exports=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}()},{}],207:[function(a,b,c){"use strict";var d=a("./class"),e=a("./dom"),f=c.toInt=function(a){return parseInt(a,10)||0},g=c.clone=function(a){if(a){if(Array.isArray(a))return a.map(g);if("object"==typeof a){var b={};for(var c in a)b[c]=g(a[c]);return b}return a}return null};c.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},c.extend=function(a,b){var c=g(a);for(var d in b)c[d]=g(b[d]);return c},c.isEditable=function(a){return e.matches(a,"input,[contenteditable]")||e.matches(a,"select,[contenteditable]")||e.matches(a,"textarea,[contenteditable]")||e.matches(a,"button,[contenteditable]")},c.removePsClasses=function(a){for(var b=d.list(a),c=0;c<b.length;c++){var e=b[c];0===e.indexOf("ps-")&&d.remove(a,e)}},c.outerWidth=function(a){return f(e.css(a,"width"))+f(e.css(a,"paddingLeft"))+f(e.css(a,"paddingRight"))+f(e.css(a,"borderLeftWidth"))+f(e.css(a,"borderRightWidth"))},c.startScrolling=function(a,b){d.add(a,"ps-in-scrolling"),"undefined"!=typeof b?d.add(a,"ps-"+b):(d.add(a,"ps-x"),d.add(a,"ps-y"))},c.stopScrolling=function(a,b){d.remove(a,"ps-in-scrolling"),"undefined"!=typeof b?d.remove(a,"ps-"+b):(d.remove(a,"ps-x"),d.remove(a,"ps-y"))},c.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":203,"./dom":204}],208:[function(a,b,c){"use strict";var d=a("./plugin/destroy"),e=a("./plugin/initialize"),f=a("./plugin/update");b.exports={initialize:e,update:f,destroy:d}},{"./plugin/destroy":211,"./plugin/initialize":219,"./plugin/update":224}],209:[function(a,b,c){"use strict";var d=a("./update"),e=window.MutationObserver,f=a("./instances"),g=function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!0),b};b.exports=function(a){if(null!==e&&void 0!==e){var b=f.get(a),c=function(){d(a),a.dispatchEvent(g("ps-dom-change"))};b.observer=new e(c),c();var h={childList:!0,subtree:!0};b.observer.observe(a,h)}}},{"./instances":220,"./update":224}],210:[function(a,b,c){"use strict";b.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default",autoupdate:!0}},{}],211:[function(a,b,c){"use strict";var d=a("../lib/helper"),e=a("../lib/dom"),f=a("./instances");b.exports=function(a){var b=f.get(a);b&&(b.observer&&b.observer.disconnect(),b.event.unbindAll(),e.remove(b.scrollbarX),e.remove(b.scrollbarY),e.remove(b.scrollbarXRail),e.remove(b.scrollbarYRail),d.removePsClasses(a),f.remove(a))}},{"../lib/dom":204,"../lib/helper":207,"./instances":220}],212:[function(a,b,c){"use strict";function d(a,b){function c(a){return a.getBoundingClientRect()}var d=function(a){a.stopPropagation()};b.event.bind(b.scrollbarY,"click",d),b.event.bind(b.scrollbarYRail,"click",function(d){var e=d.pageY-window.pageYOffset-c(b.scrollbarYRail).top,h=e>b.scrollbarYTop?1:-1;g(a,"top",a.scrollTop+h*b.containerHeight),f(a),d.stopPropagation()}),b.event.bind(b.scrollbarX,"click",d),b.event.bind(b.scrollbarXRail,"click",function(d){var e=d.pageX-window.pageXOffset-c(b.scrollbarXRail).left,h=e>b.scrollbarXLeft?1:-1;g(a,"left",a.scrollLeft+h*b.containerWidth),f(a),d.stopPropagation()})}var e=a("../instances"),f=a("../update-geometry"),g=a("../update-scroll");b.exports=function(a){var b=e.get(a);d(a,b)}},{"../instances":220,"../update-geometry":222,"../update-scroll":223}],213:[function(a,b,c){"use strict";function d(a,b){function c(c){var e=d+c*b.railXRatio,g=Math.max(0,b.scrollbarXRail.getBoundingClientRect().left)+b.railXRatio*(b.railXWidth-b.scrollbarXWidth);e<0?b.scrollbarXLeft=0:e>g?b.scrollbarXLeft=g:b.scrollbarXLeft=e;var h=f.toInt(b.scrollbarXLeft*(b.contentWidth-b.containerWidth)/(b.containerWidth-b.railXRatio*b.scrollbarXWidth))-b.negativeScrollAdjustment;j(a,"left",h)}var d=null,e=null,h=function(b){c(b.pageX-e),i(a),b.stopPropagation(),b.preventDefault()},k=function(){f.stopScrolling(a,"x"),b.event.unbind(b.ownerDocument,"mousemove",h)};b.event.bind(b.scrollbarX,"mousedown",function(c){e=c.pageX,d=f.toInt(g.css(b.scrollbarX,"left"))*b.railXRatio,f.startScrolling(a,"x"),b.event.bind(b.ownerDocument,"mousemove",h),b.event.once(b.ownerDocument,"mouseup",k),c.stopPropagation(),c.preventDefault()})}function e(a,b){function c(c){var e=d+c*b.railYRatio,g=Math.max(0,b.scrollbarYRail.getBoundingClientRect().top)+b.railYRatio*(b.railYHeight-b.scrollbarYHeight);e<0?b.scrollbarYTop=0:e>g?b.scrollbarYTop=g:b.scrollbarYTop=e;var h=f.toInt(b.scrollbarYTop*(b.contentHeight-b.containerHeight)/(b.containerHeight-b.railYRatio*b.scrollbarYHeight));j(a,"top",h)}var d=null,e=null,h=function(b){c(b.pageY-e),i(a),b.stopPropagation(),b.preventDefault()},k=function(){f.stopScrolling(a,"y"),b.event.unbind(b.ownerDocument,"mousemove",h)};b.event.bind(b.scrollbarY,"mousedown",function(c){e=c.pageY,d=f.toInt(g.css(b.scrollbarY,"top"))*b.railYRatio,f.startScrolling(a,"y"),b.event.bind(b.ownerDocument,"mousemove",h),b.event.once(b.ownerDocument,"mouseup",k),c.stopPropagation(),c.preventDefault()})}var f=a("../../lib/helper"),g=a("../../lib/dom"),h=a("../instances"),i=a("../update-geometry"),j=a("../update-scroll");b.exports=function(a){var b=h.get(a);d(a,b),e(a,b)}},{"../../lib/dom":204,"../../lib/helper":207,"../instances":220,"../update-geometry":222,"../update-scroll":223}],214:[function(a,b,c){"use strict";function d(a,b){function c(c,d){var e=a.scrollTop;if(0===c){if(!b.scrollbarYActive)return!1;if(0===e&&d>0||e>=b.contentHeight-b.containerHeight&&d<0)return!b.settings.wheelPropagation}var f=a.scrollLeft;if(0===d){if(!b.scrollbarXActive)return!1;if(0===f&&c<0||f>=b.contentWidth-b.containerWidth&&c>0)return!b.settings.wheelPropagation}return!0}var d=!1;b.event.bind(a,"mouseenter",function(){d=!0}),b.event.bind(a,"mouseleave",function(){d=!1});var g=!1;b.event.bind(b.ownerDocument,"keydown",function(j){if(!(j.isDefaultPrevented&&j.isDefaultPrevented()||j.defaultPrevented)){var k=f.matches(b.scrollbarX,":focus")||f.matches(b.scrollbarY,":focus");if(d||k){var l=document.activeElement?document.activeElement:b.ownerDocument.activeElement;if(l){if("IFRAME"===l.tagName)l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(e.isEditable(l))return}var m=0,n=0;switch(j.which){case 37:m=j.metaKey?-b.contentWidth:j.altKey?-b.containerWidth:-30;break;case 38:n=j.metaKey?b.contentHeight:j.altKey?b.containerHeight:30;break;case 39:m=j.metaKey?b.contentWidth:j.altKey?b.containerWidth:30;break;case 40:n=j.metaKey?-b.contentHeight:j.altKey?-b.containerHeight:-30;break;case 33:n=90;break;case 32:n=j.shiftKey?90:-90;break;case 34:n=-90;break;case 35:n=j.ctrlKey?-b.contentHeight:-b.containerHeight;break;case 36:n=j.ctrlKey?a.scrollTop:b.containerHeight;break;default:return}i(a,"top",a.scrollTop-n),i(a,"left",a.scrollLeft+m),h(a),g=c(m,n),g&&j.preventDefault()}}})}var e=a("../../lib/helper"),f=a("../../lib/dom"),g=a("../instances"),h=a("../update-geometry"),i=a("../update-scroll");b.exports=function(a){var b=g.get(a);d(a,b)}},{"../../lib/dom":204,"../../lib/helper":207,"../instances":220,"../update-geometry":222,"../update-scroll":223}],215:[function(a,b,c){"use strict";function d(a,b){function c(c,d){var e=a.scrollTop;if(0===c){if(!b.scrollbarYActive)return!1;if(0===e&&d>0||e>=b.contentHeight-b.containerHeight&&d<0)return!b.settings.wheelPropagation}var f=a.scrollLeft;if(0===d){if(!b.scrollbarXActive)return!1;if(0===f&&c<0||f>=b.contentWidth-b.containerWidth&&c>0)return!b.settings.wheelPropagation}return!0}function d(a){var b=a.deltaX,c=-1*a.deltaY;return"undefined"!=typeof b&&"undefined"!=typeof c||(b=-1*a.wheelDeltaX/6,c=a.wheelDeltaY/6),a.deltaMode&&1===a.deltaMode&&(b*=10,c*=10),b!==b&&c!==c&&(b=0,c=a.wheelDelta),a.shiftKey?[-c,-b]:[b,c]}function e(b,c){var d=a.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(d){if(!window.getComputedStyle(d).overflow.match(/(scroll|auto)/))return!1;var e=d.scrollHeight-d.clientHeight;if(e>0&&!(0===d.scrollTop&&c>0||d.scrollTop===e&&c<0))return!0;var f=d.scrollLeft-d.clientWidth;if(f>0&&!(0===d.scrollLeft&&b<0||d.scrollLeft===f&&b>0))return!0}return!1}function h(h){var j=d(h),k=j[0],l=j[1];e(k,l)||(i=!1,b.settings.useBothWheelAxes?b.scrollbarYActive&&!b.scrollbarXActive?(l?g(a,"top",a.scrollTop-l*b.settings.wheelSpeed):g(a,"top",a.scrollTop+k*b.settings.wheelSpeed),i=!0):b.scrollbarXActive&&!b.scrollbarYActive&&(k?g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed):g(a,"left",a.scrollLeft-l*b.settings.wheelSpeed),i=!0):(g(a,"top",a.scrollTop-l*b.settings.wheelSpeed),g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed)),f(a),i=i||c(k,l),i&&(h.stopPropagation(),h.preventDefault()))}var i=!1;"undefined"!=typeof window.onwheel?b.event.bind(a,"wheel",h):"undefined"!=typeof window.onmousewheel&&b.event.bind(a,"mousewheel",h)}var e=a("../instances"),f=a("../update-geometry"),g=a("../update-scroll");b.exports=function(a){var b=e.get(a);d(a,b)}},{"../instances":220,"../update-geometry":222,"../update-scroll":223}],216:[function(a,b,c){"use strict";function d(a,b){b.event.bind(a,"scroll",function(){f(a)})}var e=a("../instances"),f=a("../update-geometry");b.exports=function(a){var b=e.get(a);d(a,b)}},{"../instances":220,"../update-geometry":222}],217:[function(a,b,c){"use strict";function d(a,b){function c(){var a=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===a.toString().length?null:a.getRangeAt(0).commonAncestorContainer}function d(){j||(j=setInterval(function(){return f.get(a)?(h(a,"top",a.scrollTop+k.top),h(a,"left",a.scrollLeft+k.left),void g(a)):void clearInterval(j)},50))}function i(){j&&(clearInterval(j),j=null),e.stopScrolling(a)}var j=null,k={top:0,left:0},l=!1;b.event.bind(b.ownerDocument,"selectionchange",function(){a.contains(c())?l=!0:(l=!1,i())}),b.event.bind(window,"mouseup",function(){l&&(l=!1,i())}),b.event.bind(window,"keyup",function(){l&&(l=!1,i())}),b.event.bind(window,"mousemove",function(b){if(l){var c={x:b.pageX,y:b.pageY},f={left:a.offsetLeft,right:a.offsetLeft+a.offsetWidth,top:a.offsetTop,bottom:a.offsetTop+a.offsetHeight};c.x<f.left+3?(k.left=-5,e.startScrolling(a,"x")):c.x>f.right-3?(k.left=5,e.startScrolling(a,"x")):k.left=0,c.y<f.top+3?(f.top+3-c.y<5?k.top=-5:k.top=-20,e.startScrolling(a,"y")):c.y>f.bottom-3?(c.y-f.bottom+3<5?k.top=5:k.top=20,e.startScrolling(a,"y")):k.top=0,0===k.top&&0===k.left?i():d()}})}var e=a("../../lib/helper"),f=a("../instances"),g=a("../update-geometry"),h=a("../update-scroll");b.exports=function(a){var b=f.get(a);d(a,b)}},{"../../lib/helper":207,"../instances":220,"../update-geometry":222,"../update-scroll":223}],218:[function(a,b,c){"use strict";function d(a,b,c,d){function e(c,d){var e=a.scrollTop,f=a.scrollLeft,g=Math.abs(c),h=Math.abs(d);if(h>g){if(d<0&&e===b.contentHeight-b.containerHeight||d>0&&0===e)return!b.settings.swipePropagation}else if(g>h&&(c<0&&f===b.contentWidth-b.containerWidth||c>0&&0===f))return!b.settings.swipePropagation;return!0}function i(b,c){h(a,"top",a.scrollTop-c),h(a,"left",a.scrollLeft-b),g(a)}function j(){u=!0}function k(){u=!1}function l(a){return a.targetTouches?a.targetTouches[0]:a}function m(a){return!(!a.targetTouches||1!==a.targetTouches.length)||!(!a.pointerType||"mouse"===a.pointerType||a.pointerType===a.MSPOINTER_TYPE_MOUSE)}function n(a){if(m(a)){v=!0;var b=l(a);q.pageX=b.pageX,q.pageY=b.pageY,r=(new Date).getTime(),null!==t&&clearInterval(t),a.stopPropagation()}}function o(a){var c=a.target,d=c&&c.getAttribute&&c.getAttribute("class")||"";if(!d.match(/ps-prevent-touchmove/)&&(!v&&b.settings.swipePropagation&&n(a),!u&&v&&m(a))){var f=l(a),g={pageX:f.pageX,pageY:f.pageY},h=g.pageX-q.pageX,j=g.pageY-q.pageY;i(h,j),q=g;var k=(new Date).getTime(),o=k-r;o>0&&(s.x=h/o,s.y=j/o,r=k),e(h,j)&&(a.stopPropagation(),a.preventDefault())}}function p(){!u&&v&&(v=!1,clearInterval(t),t=setInterval(function(){return f.get(a)&&(s.x||s.y)?Math.abs(s.x)<.01&&Math.abs(s.y)<.01?void clearInterval(t):(i(30*s.x,30*s.y),s.x*=.8,void(s.y*=.8)):void clearInterval(t)},10))}var q={},r=0,s={},t=null,u=!1,v=!1;c?(b.event.bind(window,"touchstart",j),b.event.bind(window,"touchend",k),b.event.bind(a,"touchstart",n),b.event.bind(a,"touchmove",o),b.event.bind(a,"touchend",p)):d&&(window.PointerEvent?(b.event.bind(window,"pointerdown",j),b.event.bind(window,"pointerup",k),b.event.bind(a,"pointerdown",n),b.event.bind(a,"pointermove",o),b.event.bind(a,"pointerup",p)):window.MSPointerEvent&&(b.event.bind(window,"MSPointerDown",j),b.event.bind(window,"MSPointerUp",k),b.event.bind(a,"MSPointerDown",n),b.event.bind(a,"MSPointerMove",o),b.event.bind(a,"MSPointerUp",p)))}var e=a("../../lib/helper"),f=a("../instances"),g=a("../update-geometry"),h=a("../update-scroll");b.exports=function(a){if(e.env.supportsTouch||e.env.supportsIePointer){var b=f.get(a);d(a,b,e.env.supportsTouch,e.env.supportsIePointer)}}},{"../../lib/helper":207,"../instances":220,"../update-geometry":222,"../update-scroll":223}],219:[function(a,b,c){"use strict";var d=a("../lib/helper"),e=a("../lib/class"),f=a("./instances"),g=a("./update-geometry"),h=a("./autoupdate"),i=a("./resizer"),j={"click-rail":a("./handler/click-rail"),"drag-scrollbar":a("./handler/drag-scrollbar"),keyboard:a("./handler/keyboard"),wheel:a("./handler/mouse-wheel"),touch:a("./handler/touch"),selection:a("./handler/selection")},k=a("./handler/native-scroll");b.exports=function(a,b){b="object"==typeof b?b:{},e.add(a,"ps-container");var c=f.add(a);c.settings=d.extend(c.settings,b),e.add(a,"ps-theme-"+c.settings.theme),c.settings.handlers.forEach(function(b){j[b](a)}),k(a),g(a),c.settings.autoupdate&&(h(a),i(a))}},{"../lib/class":203,"../lib/helper":207,"./autoupdate":209,"./handler/click-rail":212,"./handler/drag-scrollbar":213,"./handler/keyboard":214,"./handler/mouse-wheel":215,"./handler/native-scroll":216,"./handler/selection":217,"./handler/touch":218,"./instances":220,"./resizer":221,"./update-geometry":222}],220:[function(a,b,c){"use strict";function d(a){function b(){i.add(a,"ps-focus")}function c(){i.remove(a,"ps-focus")}var d=this;d.settings=h.clone(j),d.containerWidth=null,d.containerHeight=null,d.contentWidth=null,d.contentHeight=null,d.isRtl="rtl"===k.css(a,"direction"),d.isNegativeScroll=function(){var b=a.scrollLeft,c=null;return a.scrollLeft=-1,c=a.scrollLeft<0,a.scrollLeft=b,c}(),d.negativeScrollAdjustment=d.isNegativeScroll?a.scrollWidth-a.clientWidth:0,d.event=new l,d.ownerDocument=a.ownerDocument||document,d.scrollbarXRail=k.appendTo(k.e("div","ps-scrollbar-x-rail"),a),d.scrollbarX=k.appendTo(k.e("div","ps-scrollbar-x"),d.scrollbarXRail),d.scrollbarX.setAttribute("tabindex",0),d.event.bind(d.scrollbarX,"focus",b),d.event.bind(d.scrollbarX,"blur",c),d.scrollbarXActive=null,d.scrollbarXWidth=null,d.scrollbarXLeft=null,d.scrollbarXBottom=h.toInt(k.css(d.scrollbarXRail,"bottom")),d.isScrollbarXUsingBottom=d.scrollbarXBottom===d.scrollbarXBottom,d.scrollbarXTop=d.isScrollbarXUsingBottom?null:h.toInt(k.css(d.scrollbarXRail,"top")),d.railBorderXWidth=h.toInt(k.css(d.scrollbarXRail,"borderLeftWidth"))+h.toInt(k.css(d.scrollbarXRail,"borderRightWidth")),k.css(d.scrollbarXRail,"display","block"),d.railXMarginWidth=h.toInt(k.css(d.scrollbarXRail,"marginLeft"))+h.toInt(k.css(d.scrollbarXRail,"marginRight")),k.css(d.scrollbarXRail,"display",""),d.railXWidth=null,d.railXRatio=null,d.scrollbarYRail=k.appendTo(k.e("div","ps-scrollbar-y-rail"),a),d.scrollbarY=k.appendTo(k.e("div","ps-scrollbar-y"),d.scrollbarYRail),d.scrollbarY.setAttribute("tabindex",0),d.event.bind(d.scrollbarY,"focus",b),d.event.bind(d.scrollbarY,"blur",c),d.scrollbarYActive=null,d.scrollbarYHeight=null,d.scrollbarYTop=null,d.scrollbarYRight=h.toInt(k.css(d.scrollbarYRail,"right")),d.isScrollbarYUsingRight=d.scrollbarYRight===d.scrollbarYRight,d.scrollbarYLeft=d.isScrollbarYUsingRight?null:h.toInt(k.css(d.scrollbarYRail,"left")),d.scrollbarYOuterWidth=d.isRtl?h.outerWidth(d.scrollbarY):null,d.railBorderYWidth=h.toInt(k.css(d.scrollbarYRail,"borderTopWidth"))+h.toInt(k.css(d.scrollbarYRail,"borderBottomWidth")),k.css(d.scrollbarYRail,"display","block"),d.railYMarginHeight=h.toInt(k.css(d.scrollbarYRail,"marginTop"))+h.toInt(k.css(d.scrollbarYRail,"marginBottom")),k.css(d.scrollbarYRail,"display",""),d.railYHeight=null,d.railYRatio=null}function e(a){return a.getAttribute("data-ps-id")}function f(a,b){a.setAttribute("data-ps-id",b)}function g(a){a.removeAttribute("data-ps-id")}var h=a("../lib/helper"),i=a("../lib/class"),j=a("./default-setting"),k=a("../lib/dom"),l=a("../lib/event-manager"),m=a("../lib/guid"),n={};c.add=function(a){var b=m();return f(a,b),n[b]=new d(a),n[b]},c.remove=function(a){delete n[e(a)],g(a)},c.get=function(a){return n[e(a)]}},{"../lib/class":203,"../lib/dom":204,"../lib/event-manager":205,"../lib/guid":206,"../lib/helper":207,"./default-setting":210}],221:[function(a,b,c){"use strict";var d=a("./update"),e=a("./instances"),f=a("../lib/helper");b.exports=function(a){var b=e.get(a),c=function(){d(a)};b.event.bind(window,"resize",f.debounce(c,60))}},{"../lib/helper":207,"./instances":220,"./update":224}],222:[function(a,b,c){"use strict";function d(a,b){return a.settings.minScrollbarLength&&(b=Math.max(b,a.settings.minScrollbarLength)),a.settings.maxScrollbarLength&&(b=Math.min(b,a.settings.maxScrollbarLength)),b}function e(a,b){var c={width:b.railXWidth};b.isRtl?c.left=b.negativeScrollAdjustment+a.scrollLeft+b.containerWidth-b.contentWidth:c.left=a.scrollLeft,b.isScrollbarXUsingBottom?c.bottom=b.scrollbarXBottom-a.scrollTop:c.top=b.scrollbarXTop+a.scrollTop,h.css(b.scrollbarXRail,c);var d={top:a.scrollTop,height:b.railYHeight};b.isScrollbarYUsingRight?b.isRtl?d.right=b.contentWidth-(b.negativeScrollAdjustment+a.scrollLeft)-b.scrollbarYRight-b.scrollbarYOuterWidth:d.right=b.scrollbarYRight-a.scrollLeft:b.isRtl?d.left=b.negativeScrollAdjustment+a.scrollLeft+2*b.containerWidth-b.contentWidth-b.scrollbarYLeft-b.scrollbarYOuterWidth:d.left=b.scrollbarYLeft+a.scrollLeft,h.css(b.scrollbarYRail,d),h.css(b.scrollbarX,{left:b.scrollbarXLeft,width:b.scrollbarXWidth-b.railBorderXWidth}),h.css(b.scrollbarY,{top:b.scrollbarYTop,height:b.scrollbarYHeight-b.railBorderYWidth})}var f=a("../lib/helper"),g=a("../lib/class"),h=a("../lib/dom"),i=a("./instances"),j=a("./update-scroll");b.exports=function(a){var b=i.get(a);b.containerWidth=a.clientWidth,b.containerHeight=a.clientHeight,b.contentWidth=a.scrollWidth,b.contentHeight=a.scrollHeight;var c;a.contains(b.scrollbarXRail)||(c=h.queryChildren(a,".ps-scrollbar-x-rail"),c.length>0&&c.forEach(function(a){h.remove(a)}),h.appendTo(b.scrollbarXRail,a)),a.contains(b.scrollbarYRail)||(c=h.queryChildren(a,".ps-scrollbar-y-rail"),c.length>0&&c.forEach(function(a){h.remove(a)}),h.appendTo(b.scrollbarYRail,a)),!b.settings.suppressScrollX&&b.containerWidth+b.settings.scrollXMarginOffset<b.contentWidth?(b.scrollbarXActive=!0,b.railXWidth=b.containerWidth-b.railXMarginWidth,b.railXRatio=b.containerWidth/b.railXWidth,b.scrollbarXWidth=d(b,f.toInt(b.railXWidth*b.containerWidth/b.contentWidth)),b.scrollbarXLeft=f.toInt((b.negativeScrollAdjustment+a.scrollLeft)*(b.railXWidth-b.scrollbarXWidth)/(b.contentWidth-b.containerWidth))):b.scrollbarXActive=!1,!b.settings.suppressScrollY&&b.containerHeight+b.settings.scrollYMarginOffset<b.contentHeight?(b.scrollbarYActive=!0,b.railYHeight=b.containerHeight-b.railYMarginHeight,b.railYRatio=b.containerHeight/b.railYHeight,b.scrollbarYHeight=d(b,f.toInt(b.railYHeight*b.containerHeight/b.contentHeight)),b.scrollbarYTop=f.toInt(a.scrollTop*(b.railYHeight-b.scrollbarYHeight)/(b.contentHeight-b.containerHeight))):b.scrollbarYActive=!1,b.scrollbarXLeft>=b.railXWidth-b.scrollbarXWidth&&(b.scrollbarXLeft=b.railXWidth-b.scrollbarXWidth),
b.scrollbarYTop>=b.railYHeight-b.scrollbarYHeight&&(b.scrollbarYTop=b.railYHeight-b.scrollbarYHeight),e(a,b),b.scrollbarXActive?g.add(a,"ps-active-x"):(g.remove(a,"ps-active-x"),b.scrollbarXWidth=0,b.scrollbarXLeft=0,j(a,"left",0)),b.scrollbarYActive?g.add(a,"ps-active-y"):(g.remove(a,"ps-active-y"),b.scrollbarYHeight=0,b.scrollbarYTop=0,j(a,"top",0))}},{"../lib/class":203,"../lib/dom":204,"../lib/helper":207,"./instances":220,"./update-scroll":223}],223:[function(a,b,c){"use strict";var d,e,f=a("./instances"),g=function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!0),b};b.exports=function(a,b,c){if("undefined"==typeof a)throw"You must provide an element to the update-scroll function";if("undefined"==typeof b)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof c)throw"You must provide a value to the update-scroll function";"top"===b&&c<=0&&(a.scrollTop=c=0,a.dispatchEvent(g("ps-y-reach-start"))),"left"===b&&c<=0&&(a.scrollLeft=c=0,a.dispatchEvent(g("ps-x-reach-start")));var h=f.get(a);"top"===b&&c>=h.contentHeight-h.containerHeight&&(c=h.contentHeight-h.containerHeight,c-a.scrollTop<=1?c=a.scrollTop:a.scrollTop=c,a.dispatchEvent(g("ps-y-reach-end"))),"left"===b&&c>=h.contentWidth-h.containerWidth&&(c=h.contentWidth-h.containerWidth,c-a.scrollLeft<=1?c=a.scrollLeft:a.scrollLeft=c,a.dispatchEvent(g("ps-x-reach-end"))),d||(d=a.scrollTop),e||(e=a.scrollLeft),"top"===b&&c<d&&a.dispatchEvent(g("ps-scroll-up")),"top"===b&&c>d&&a.dispatchEvent(g("ps-scroll-down")),"left"===b&&c<e&&a.dispatchEvent(g("ps-scroll-left")),"left"===b&&c>e&&a.dispatchEvent(g("ps-scroll-right")),"top"===b&&(a.scrollTop=d=c,a.dispatchEvent(g("ps-scroll-y"))),"left"===b&&(a.scrollLeft=e=c,a.dispatchEvent(g("ps-scroll-x")))}},{"./instances":220}],224:[function(a,b,c){"use strict";var d=a("../lib/helper"),e=a("../lib/dom"),f=a("./instances"),g=a("./update-geometry"),h=a("./update-scroll");b.exports=function(a){var b=f.get(a);b&&(b.negativeScrollAdjustment=b.isNegativeScroll?a.scrollWidth-a.clientWidth:0,e.css(b.scrollbarXRail,"display","block"),e.css(b.scrollbarYRail,"display","block"),b.railXMarginWidth=d.toInt(e.css(b.scrollbarXRail,"marginLeft"))+d.toInt(e.css(b.scrollbarXRail,"marginRight")),b.railYMarginHeight=d.toInt(e.css(b.scrollbarYRail,"marginTop"))+d.toInt(e.css(b.scrollbarYRail,"marginBottom")),e.css(b.scrollbarXRail,"display","none"),e.css(b.scrollbarYRail,"display","none"),g(a),h(a,"top",a.scrollTop),h(a,"left",a.scrollLeft),e.css(b.scrollbarXRail,"display",""),e.css(b.scrollbarYRail,"display",""))}},{"../lib/dom":204,"../lib/helper":207,"./instances":220,"./update-geometry":222,"./update-scroll":223}],225:[function(a,b,c){function d(a){return this instanceof d?(this.nodes=e(a),this):new d(a)}var e=a("./parse"),f=a("./walk"),g=a("./stringify");d.prototype.toString=function(){return Array.isArray(this.nodes)?g(this.nodes):""},d.prototype.walk=function(a,b){return f(this.nodes,a,b),this},d.unit=a("./unit"),d.walk=f,d.stringify=g,b.exports=d},{"./parse":226,"./stringify":227,"./unit":228,"./walk":229}],226:[function(a,b,c){var d="(".charCodeAt(0),e=")".charCodeAt(0),f="'".charCodeAt(0),g='"'.charCodeAt(0),h="\\".charCodeAt(0),i="/".charCodeAt(0),j=",".charCodeAt(0),k=":".charCodeAt(0),l="*".charCodeAt(0);b.exports=function(a){for(var b,c,m,n,o,p,q,r,s=[],t=a,u=0,v=t.charCodeAt(u),w=t.length,x=[{nodes:s}],y=0,z="",A="",B="";u<w;)if(v<=32){b=u;do b+=1,v=t.charCodeAt(b);while(v<=32);n=t.slice(u,b),m=s[s.length-1],v===e&&y?B=n:m&&"div"===m.type?m.after=n:v===j||v===k||v===i&&t.charCodeAt(b+1)!==l?A=n:s.push({type:"space",sourceIndex:u,value:n}),u=b}else if(v===f||v===g){b=u,c=v===f?"'":'"',n={type:"string",sourceIndex:u,quote:c};do if(o=!1,b=t.indexOf(c,b+1),~b)for(p=b;t.charCodeAt(p-1)===h;)p-=1,o=!o;else t+=c,b=t.length-1,n.unclosed=!0;while(o);n.value=t.slice(u+1,b),s.push(n),u=b+1,v=t.charCodeAt(u)}else if(v===i&&t.charCodeAt(u+1)===l)n={type:"comment",sourceIndex:u},b=t.indexOf("*/",u),b===-1&&(n.unclosed=!0,b=t.length),n.value=t.slice(u+2,b),s.push(n),u=b+2,v=t.charCodeAt(u);else if(v===i||v===j||v===k)n=t[u],s.push({type:"div",sourceIndex:u-A.length,value:n,before:A,after:""}),A="",u+=1,v=t.charCodeAt(u);else if(d===v){b=u;do b+=1,v=t.charCodeAt(b);while(v<=32);if(n={type:"function",sourceIndex:u-z.length,value:z,before:t.slice(u+1,b)},u=b,"url"===z&&v!==f&&v!==g){b-=1;do if(o=!1,b=t.indexOf(")",b+1),~b)for(p=b;t.charCodeAt(p-1)===h;)p-=1,o=!o;else t+=")",b=t.length-1,n.unclosed=!0;while(o);q=b;do q-=1,v=t.charCodeAt(q);while(v<=32);u!==q+1?n.nodes=[{type:"word",sourceIndex:u,value:t.slice(u,q+1)}]:n.nodes=[],n.unclosed&&q+1!==b?(n.after="",n.nodes.push({type:"space",sourceIndex:q+1,value:t.slice(q+1,b)})):n.after=t.slice(q+1,b),u=b+1,v=t.charCodeAt(u),s.push(n)}else y+=1,n.after="",s.push(n),x.push(n),s=n.nodes=[],r=n;z=""}else if(e===v&&y)u+=1,v=t.charCodeAt(u),r.after=B,B="",y-=1,x.pop(),r=x[y],s=r.nodes;else{b=u;do v===h&&(b+=1),b+=1,v=t.charCodeAt(b);while(b<w&&!(v<=32||v===f||v===g||v===j||v===k||v===i||v===d||v===e&&y));n=t.slice(u,b),d===v?z=n:s.push({type:"word",sourceIndex:u,value:n}),u=b}for(u=x.length-1;u;u-=1)x[u].unclosed=!0;return x[0].nodes}},{}],227:[function(a,b,c){function d(a,b){var c,d,f=a.type,g=a.value;return b&&void 0!==(d=b(a))?d:"word"===f||"space"===f?g:"string"===f?(c=a.quote||"",c+g+(a.unclosed?"":c)):"comment"===f?"/*"+g+(a.unclosed?"":"*/"):"div"===f?(a.before||"")+g+(a.after||""):Array.isArray(a.nodes)?(c=e(a.nodes),"function"!==f?c:g+"("+(a.before||"")+c+(a.after||"")+(a.unclosed?"":")")):g}function e(a,b){var c,e;if(Array.isArray(a)){for(c="",e=a.length-1;~e;e-=1)c=d(a[e],b)+c;return c}return d(a,b)}b.exports=e},{}],228:[function(a,b,c){var d="-".charCodeAt(0),e="+".charCodeAt(0),f=".".charCodeAt(0);b.exports=function(a){for(var b,c=0,g=a.length,h=!1,i=!1,j="";c<g;){if(b=a.charCodeAt(c),b>=48&&b<=57)j+=a[c],i=!0;else if(b===f){if(h)break;h=!0,j+=a[c]}else{if(b!==e&&b!==d)break;if(0!==c)break;j+=a[c]}c+=1}return!!i&&{number:j,unit:a.slice(c)}}},{}],229:[function(a,b,c){b.exports=function a(b,c,d){var e,f,g,h;for(e=0,f=b.length;e<f;e+=1)g=b[e],d||(h=c(g,e,b)),h!==!1&&"function"===g.type&&Array.isArray(g.nodes)&&a(g.nodes,c,d),d&&c(g,e,b)}},{}],230:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./container"),j=d(i),k=a("./warn-once"),l=d(k),m=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.type="atrule",d}return g(b,a),b.prototype.append=function(){var b;this.nodes||(this.nodes=[]);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.prototype.append).call.apply(b,[this].concat(d))},b.prototype.prepend=function(){var b;this.nodes||(this.nodes=[]);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.prototype.prepend).call.apply(b,[this].concat(d))},h(b,[{key:"afterName",get:function(){return(0,l.default)("AtRule#afterName was deprecated. Use AtRule#raws.afterName"),this.raws.afterName},set:function(a){(0,l.default)("AtRule#afterName was deprecated. Use AtRule#raws.afterName"),this.raws.afterName=a}},{key:"_params",get:function(){return(0,l.default)("AtRule#_params was deprecated. Use AtRule#raws.params"),this.raws.params},set:function(a){(0,l.default)("AtRule#_params was deprecated. Use AtRule#raws.params"),this.raws.params=a}}]),b}(j.default);c.default=m,b.exports=c.default},{"./container":232,"./warn-once":252}],231:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./warn-once"),j=d(i),k=a("./node"),l=d(k),m=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.type="comment",d}return g(b,a),h(b,[{key:"left",get:function(){return(0,j.default)("Comment#left was deprecated. Use Comment#raws.left"),this.raws.left},set:function(a){(0,j.default)("Comment#left was deprecated. Use Comment#raws.left"),this.raws.left=a}},{key:"right",get:function(){return(0,j.default)("Comment#right was deprecated. Use Comment#raws.right"),this.raws.right},set:function(a){(0,j.default)("Comment#right was deprecated. Use Comment#raws.right"),this.raws.right=a}}]),b}(l.default);c.default=m,b.exports=c.default},{"./node":239,"./warn-once":252}],232:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./declaration"),j=d(i),k=a("./warn-once"),l=d(k),m=a("./comment"),n=d(m),o=a("./node"),p=d(o),q=function(b){function c(){return e(this,c),f(this,b.apply(this,arguments))}return g(c,b),c.prototype.push=function(a){return a.parent=this,this.nodes.push(a),this},c.prototype.each=function(a){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var b=this.lastEach;if(this.indexes[b]=0,this.nodes){for(var c=void 0,d=void 0;this.indexes[b]<this.nodes.length&&(c=this.indexes[b],d=a(this.nodes[c],c),d!==!1);)this.indexes[b]+=1;return delete this.indexes[b],d}},c.prototype.walk=function(a){return this.each(function(b,c){var d=a(b,c);return d!==!1&&b.walk&&(d=b.walk(a)),d})},c.prototype.walkDecls=function(a,b){return b?a instanceof RegExp?this.walk(function(c,d){if("decl"===c.type&&a.test(c.prop))return b(c,d)}):this.walk(function(c,d){if("decl"===c.type&&c.prop===a)return b(c,d)}):(b=a,this.walk(function(a,c){if("decl"===a.type)return b(a,c)}))},c.prototype.walkRules=function(a,b){return b?a instanceof RegExp?this.walk(function(c,d){if("rule"===c.type&&a.test(c.selector))return b(c,d)}):this.walk(function(c,d){if("rule"===c.type&&c.selector===a)return b(c,d)}):(b=a,this.walk(function(a,c){if("rule"===a.type)return b(a,c)}))},c.prototype.walkAtRules=function(a,b){return b?a instanceof RegExp?this.walk(function(c,d){if("atrule"===c.type&&a.test(c.name))return b(c,d)}):this.walk(function(c,d){if("atrule"===c.type&&c.name===a)return b(c,d)}):(b=a,this.walk(function(a,c){if("atrule"===a.type)return b(a,c)}))},c.prototype.walkComments=function(a){return this.walk(function(b,c){if("comment"===b.type)return a(b,c)})},c.prototype.append=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=b,e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}for(var h=g,i=this.normalize(h,this.last),j=i,k=Array.isArray(j),l=0,j=k?j:j[Symbol.iterator]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{if(l=j.next(),l.done)break;m=l.value}var n=m;this.nodes.push(n)}}return this},c.prototype.prepend=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b=b.reverse();for(var d=b,e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}for(var h=g,i=this.normalize(h,this.first,"prepend").reverse(),j=i,k=Array.isArray(j),l=0,j=k?j:j[Symbol.iterator]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{if(l=j.next(),l.done)break;m=l.value}var n=m;this.nodes.unshift(n)}for(var o in this.indexes)this.indexes[o]=this.indexes[o]+i.length}return this},c.prototype.cleanRaws=function(a){if(b.prototype.cleanRaws.call(this,a),this.nodes)for(var c=this.nodes,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;g.cleanRaws(a)}},c.prototype.insertBefore=function(a,b){a=this.index(a);for(var c=0===a&&"prepend",d=this.normalize(b,this.nodes[a],c).reverse(),e=d,f=Array.isArray(e),g=0,e=f?e:e[Symbol.iterator]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{if(g=e.next(),g.done)break;h=g.value}var i=h;this.nodes.splice(a,0,i)}var j=void 0;for(var k in this.indexes)j=this.indexes[k],a<=j&&(this.indexes[k]=j+d.length);return this},c.prototype.insertAfter=function(a,b){a=this.index(a);for(var c=this.normalize(b,this.nodes[a]).reverse(),d=c,e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;this.nodes.splice(a+1,0,h)}var i=void 0;for(var j in this.indexes)i=this.indexes[j],a<i&&(this.indexes[j]=i+c.length);return this},c.prototype.remove=function(a){return"undefined"!=typeof a?((0,l.default)("Container#remove is deprecated. Use Container#removeChild"),this.removeChild(a)):b.prototype.remove.call(this),this},c.prototype.removeChild=function(a){a=this.index(a),this.nodes[a].parent=void 0,this.nodes.splice(a,1);var b=void 0;for(var c in this.indexes)b=this.indexes[c],b>=a&&(this.indexes[c]=b-1);return this},c.prototype.removeAll=function(){for(var a=this.nodes,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;e.parent=void 0}return this.nodes=[],this},c.prototype.replaceValues=function(a,b,c){return c||(c=b,b={}),this.walkDecls(function(d){b.props&&b.props.indexOf(d.prop)===-1||b.fast&&d.value.indexOf(b.fast)===-1||(d.value=d.value.replace(a,c))}),this},c.prototype.every=function(a){return this.nodes.every(a)},c.prototype.some=function(a){return this.nodes.some(a)},c.prototype.index=function(a){return"number"==typeof a?a:this.nodes.indexOf(a)},c.prototype.normalize=function(b,c){var d=this;if("string"==typeof b){var e=a("./parse");b=e(b).nodes}else if(!Array.isArray(b))if("root"===b.type)b=b.nodes;else if(b.type)b=[b];else if(b.prop){if("undefined"==typeof b.value)throw new Error("Value field is missed in node creation");b=[new j.default(b)]}else if(b.selector){var f=a("./rule");b=[new f(b)]}else if(b.name){var g=a("./at-rule");b=[new g(b)]}else{if(!b.text)throw new Error("Unknown node type in node creation");b=[new n.default(b)]}var h=b.map(function(a){return"undefined"==typeof a.raws&&(a=d.rebuild(a)),a.parent&&(a=a.clone()),"undefined"==typeof a.raws.before&&c&&"undefined"!=typeof c.raws.before&&(a.raws.before=c.raws.before.replace(/[^\s]/g,"")),a.parent=d,a});return h},c.prototype.rebuild=function(b,c){var d=this,e=void 0;if("root"===b.type){var f=a("./root");e=new f}else if("atrule"===b.type){var g=a("./at-rule");e=new g}else if("rule"===b.type){var h=a("./rule");e=new h}else"decl"===b.type?e=new j.default:"comment"===b.type&&(e=new n.default);for(var i in b)"nodes"===i?e.nodes=b.nodes.map(function(a){return d.rebuild(a,e)}):"parent"===i&&c?e.parent=c:b.hasOwnProperty(i)&&(e[i]=b[i]);return e},c.prototype.eachInside=function(a){return(0,l.default)("Container#eachInside is deprecated. Use Container#walk instead."),this.walk(a)},c.prototype.eachDecl=function(a,b){return(0,l.default)("Container#eachDecl is deprecated. Use Container#walkDecls instead."),this.walkDecls(a,b)},c.prototype.eachRule=function(a,b){return(0,l.default)("Container#eachRule is deprecated. Use Container#walkRules instead."),this.walkRules(a,b)},c.prototype.eachAtRule=function(a,b){return(0,l.default)("Container#eachAtRule is deprecated. Use Container#walkAtRules instead."),this.walkAtRules(a,b)},c.prototype.eachComment=function(a){return(0,l.default)("Container#eachComment is deprecated. Use Container#walkComments instead."),this.walkComments(a)},h(c,[{key:"first",get:function(){if(this.nodes)return this.nodes[0]}},{key:"last",get:function(){if(this.nodes)return this.nodes[this.nodes.length-1]}},{key:"semicolon",get:function(){return(0,l.default)("Node#semicolon is deprecated. Use Node#raws.semicolon"),this.raws.semicolon},set:function(a){(0,l.default)("Node#semicolon is deprecated. Use Node#raws.semicolon"),this.raws.semicolon=a}},{key:"after",get:function(){return(0,l.default)("Node#after is deprecated. Use Node#raws.after"),this.raws.after},set:function(a){(0,l.default)("Node#after is deprecated. Use Node#raws.after"),this.raws.after=a}}]),c}(p.default);c.default=q,b.exports=c.default},{"./at-rule":230,"./comment":231,"./declaration":234,"./node":239,"./parse":240,"./root":246,"./rule":247,"./warn-once":252}],233:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("supports-color"),h=d(g),i=a("./warn-once"),j=d(i),k=function(){function a(b,c,d,f,g,h){e(this,a),this.name="CssSyntaxError",this.reason=b,g&&(this.file=g),f&&(this.source=f),h&&(this.plugin=h),"undefined"!=typeof c&&"undefined"!=typeof d&&(this.line=c,this.column=d),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,a)}return a.prototype.setMessage=function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>","undefined"!=typeof this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason},a.prototype.showSourceCode=function(a){if(!this.source)return"";for(var b=this.line-1,c=this.source.split("\n"),d=b>0?c[b-1]+"\n":"",e=c[b],f=b<c.length-1?"\n"+c[b+1]:"",g="\n",i=0;i<this.column-1;i++)g+=" ";return"undefined"==typeof a&&(a=h.default),g+=a?"[1;31m^[0m":"^","\n"+d+e+g+f},a.prototype.toString=function(){return this.name+": "+this.message+this.showSourceCode()},f(a,[{key:"generated",get:function(){return(0,j.default)("CssSyntaxError#generated is depreacted. Use input instead."),this.input}}]),a}();c.default=k,b.exports=c.default},{"./warn-once":252,"supports-color":254}],234:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./warn-once"),j=d(i),k=a("./node"),l=d(k),m=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.type="decl",d}return g(b,a),h(b,[{key:"_value",get:function(){return(0,j.default)("Node#_value was deprecated. Use Node#raws.value"),this.raws.value},set:function(a){(0,j.default)("Node#_value was deprecated. Use Node#raws.value"),this.raws.value=a}},{key:"_important",get:function(){return(0,j.default)("Node#_important was deprecated. Use Node#raws.important"),this.raws.important},set:function(a){(0,j.default)("Node#_important was deprecated. Use Node#raws.important"),this.raws.important=a}}]),b}(l.default);c.default=m,b.exports=c.default},{"./node":239,"./warn-once":252}],235:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./css-syntax-error"),h=d(g),i=a("./previous-map"),j=d(i),k=a("path"),l=d(k),m=0,n=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e(this,a),this.css=b.toString(),"\ufeff"!==this.css[0]&&"￾"!==this.css[0]||(this.css=this.css.slice(1)),c.from&&(this.file=l.default.resolve(c.from));var d=new j.default(this.css,c);if(d.text){this.map=d;var f=d.consumer().file;!this.file&&f&&(this.file=this.mapResolve(f))}this.file||(m+=1,this.id="<input css "+m+">"),this.map&&(this.map.file=this.from)}return a.prototype.error=function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],e=void 0,f=this.origin(b,c);return e=f?new h.default(a,f.line,f.column,f.source,f.file,d.plugin):new h.default(a,b,c,this.css,this.file,d.plugin),e.input={line:b,column:c,source:this.css},this.file&&(e.input.file=this.file),e},a.prototype.origin=function(a,b){if(!this.map)return!1;var c=this.map.consumer(),d=c.originalPositionFor({line:a,column:b});if(!d.source)return!1;var e={file:this.mapResolve(d.source),line:d.line,column:d.column},f=c.sourceContentFor(d.source);return f&&(e.source=f),e},a.prototype.mapResolve=function(a){return l.default.resolve(this.map.consumer().sourceRoot||".",a)},f(a,[{key:"from",get:function(){return this.file||this.id}}]),a}();c.default=n,b.exports=c.default},{"./css-syntax-error":233,"./previous-map":243,path:200}],236:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a){return"object"===("undefined"==typeof a?"undefined":h(a))&&"function"==typeof a.then}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=a("./map-generator"),j=d(i),k=a("./stringify"),l=d(k),m=a("./warn-once"),n=d(m),o=a("./result"),p=d(o),q=a("./parse"),r=d(q),s=function(){function a(b,c,d){e(this,a),this.stringified=!1,this.processed=!1;var f=void 0;if("object"===("undefined"==typeof c?"undefined":h(c))&&"root"===c.type)f=c;else if(c instanceof a||c instanceof p.default)f=c.root,c.map&&("undefined"==typeof d.map&&(d.map={}),d.map.inline||(d.map.inline=!1),d.map.prev=c.map);else{var g=r.default;d.syntax&&(g=d.syntax.parse),d.parser&&(g=d.parser),g.parse&&(g=g.parse);try{f=g(c,d)}catch(a){this.error=a}}this.result=new p.default(b,f,d)}return a.prototype.warnings=function(){return this.sync().warnings()},a.prototype.toString=function(){return this.css},a.prototype.then=function(a,b){return this.async().then(a,b)},a.prototype.catch=function(a){return this.async().catch(a)},a.prototype.handleError=function(a,b){try{if(this.error=a,"CssSyntaxError"!==a.name||a.plugin){if(b.postcssVersion){var c=b.postcssPlugin,d=b.postcssVersion,e=this.result.processor.version,f=d.split("."),g=e.split(".");(f[0]!==g[0]||parseInt(f[1])>parseInt(g[1]))&&(0,n.default)("Your current PostCSS version is "+e+", but "+c+" uses "+d+". Perhaps this is the source of the error below.")}}else a.plugin=b.postcssPlugin,a.setMessage()}catch(a){console&&console.error&&console.error(a)}},a.prototype.asyncTick=function(a,b){var c=this;if(this.plugin>=this.processor.plugins.length)return this.processed=!0,a();try{!function(){var d=c.processor.plugins[c.plugin],e=c.run(d);c.plugin+=1,f(e)?e.then(function(){c.asyncTick(a,b)}).catch(function(a){c.handleError(a,d),c.processed=!0,b(a)}):c.asyncTick(a,b)}()}catch(a){this.processed=!0,b(a)}},a.prototype.async=function(){var a=this;return this.processed?new Promise(function(b,c){a.error?c(a.error):b(a.stringify())}):this.processing?this.processing:(this.processing=new Promise(function(b,c){return a.error?c(a.error):(a.plugin=0,void a.asyncTick(b,c))}).then(function(){return a.processed=!0,a.stringify()}),this.processing)},a.prototype.sync=function(){if(this.processed)return this.result;if(this.processed=!0,this.processing)throw new Error("Use process(css).then(cb) to work with async plugins");if(this.error)throw this.error;for(var a=this.result.processor.plugins,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d,g=this.run(e);if(f(g))throw new Error("Use process(css).then(cb) to work with async plugins")}return this.result},a.prototype.run=function(a){this.result.lastPlugin=a;try{return a(this.result.root,this.result)}catch(b){throw this.handleError(b,a),b}},a.prototype.stringify=function(){if(this.stringified)return this.result;this.stringified=!0,this.sync();var a=this.result.opts,b=l.default;a.syntax&&(b=a.syntax.stringify),a.stringifier&&(b=a.stringifier),b.stringify&&(b=b.stringify);var c=new j.default(b,this.result.root,this.result.opts),d=c.generate();return this.result.css=d[0],this.result.map=d[1],this.result},g(a,[{key:"processor",get:function(){return this.result.processor}},{key:"opts",get:function(){return this.result.opts}},{key:"css",get:function(){return this.stringify().css}},{key:"content",get:function(){return this.stringify().content}},{key:"map",get:function(){return this.stringify().map}},{key:"root",get:function(){return this.sync().root}},{key:"messages",get:function(){return this.sync().messages}}]),a}();c.default=s,b.exports=c.default},{"./map-generator":238,"./parse":240,"./result":245,"./stringify":249,"./warn-once":252}],237:[function(a,b,c){"use strict";c.__esModule=!0;var d={split:function a(b,c,d){for(var e=[],f="",a=!1,g=0,h=!1,i=!1,j=0;j<b.length;j++){var k=b[j];h?i?i=!1:"\\"===k?i=!0:k===h&&(h=!1):'"'===k||"'"===k?h=k:"("===k?g+=1:")"===k?g>0&&(g-=1):0===g&&c.indexOf(k)!==-1&&(a=!0),a?(""!==f&&e.push(f.trim()),f="",a=!1):f+=k}return(d||""!==f)&&e.push(f.trim()),e},space:function(a){var b=[" ","\n","\t"];return d.split(a,b)},comma:function a(b){var a=",";return d.split(b,[a],!0)}};c.default=d,b.exports=c.default},{}],238:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("js-base64"),g=a("source-map"),h=d(g),i=a("path"),j=d(i),k=function(){function a(b,c,d){e(this,a),this.stringify=b,this.mapOpts=d.map||{},this.root=c,this.opts=d}return a.prototype.isMap=function(){return"undefined"!=typeof this.opts.map?!!this.opts.map:this.previous().length>0},a.prototype.previous=function(){var a=this;return this.previousMaps||(this.previousMaps=[],this.root.walk(function(b){if(b.source&&b.source.input.map){var c=b.source.input.map;a.previousMaps.indexOf(c)===-1&&a.previousMaps.push(c)}})),this.previousMaps},a.prototype.isInline=function(){if("undefined"!=typeof this.mapOpts.inline)return this.mapOpts.inline;var a=this.mapOpts.annotation;return("undefined"==typeof a||a===!0)&&(!this.previous().length||this.previous().some(function(a){return a.inline}))},a.prototype.isSourcesContent=function(){return"undefined"!=typeof this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(a){return a.withContent()})},a.prototype.clearAnnotation=function(){if(this.mapOpts.annotation!==!1)for(var a=void 0,b=this.root.nodes.length-1;b>=0;b--)a=this.root.nodes[b],"comment"===a.type&&0===a.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(b)},a.prototype.setSourcesContent=function(){var a=this,b={};this.root.walk(function(c){if(c.source){var d=c.source.input.from;if(d&&!b[d]){b[d]=!0;var e=a.relative(d);a.map.setSourceContent(e,c.source.input.css)}}})},a.prototype.applyPrevMaps=function(){for(var a=this.previous(),b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d,f=this.relative(e.file),g=e.root||j.default.dirname(e.file),i=void 0;this.mapOpts.sourcesContent===!1?(i=new h.default.SourceMapConsumer(e.text),i.sourcesContent&&(i.sourcesContent=i.sourcesContent.map(function(){return null}))):i=e.consumer(),this.map.applySourceMap(i,f,this.relative(g))}},a.prototype.isAnnotation=function(){return!!this.isInline()||("undefined"!=typeof this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(a){return a.annotation}))},a.prototype.addAnnotation=function(){var a=void 0;a=this.isInline()?"data:application/json;base64,"+f.Base64.encode(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:this.outputFile()+".map";var b="\n";this.css.indexOf("\r\n")!==-1&&(b="\r\n"),this.css+=b+"/*# sourceMappingURL="+a+" */"},a.prototype.outputFile=function(){return this.opts.to?this.relative(this.opts.to):this.opts.from?this.relative(this.opts.from):"to.css"},a.prototype.generateMap=function(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},a.prototype.relative=function(a){var b=this.opts.to?j.default.dirname(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(b=j.default.dirname(j.default.resolve(b,this.mapOpts.annotation))),a=j.default.relative(b,a),"\\"===j.default.sep?a.replace(/\\/g,"/"):a},a.prototype.sourcePath=function(a){return this.relative(a.source.input.from)},a.prototype.generateString=function(){var a=this;this.css="",this.map=new h.default.SourceMapGenerator({file:this.outputFile()});var b=1,c=1,d=void 0,e=void 0;this.stringify(this.root,function(f,g,h){a.css+=f,g&&g.source&&g.source.start&&"end"!==h&&a.map.addMapping({source:a.sourcePath(g),original:{line:g.source.start.line,column:g.source.start.column-1},generated:{line:b,column:c-1
}}),d=f.match(/\n/g),d?(b+=d.length,e=f.lastIndexOf("\n"),c=f.length-e):c+=f.length,g&&g.source&&g.source.end&&"start"!==h&&a.map.addMapping({source:a.sourcePath(g),original:{line:g.source.end.line,column:g.source.end.column},generated:{line:b,column:c-1}})})},a.prototype.generate=function(){if(this.clearAnnotation(),this.isMap())return this.generateMap();var a="";return this.stringify(this.root,function(b){a+=b}),[a]},a}();c.default=k,b.exports=c.default},{"js-base64":179,path:200,"source-map":302}],239:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=a("./css-syntax-error"),j=d(i),k=a("./stringifier"),l=d(k),m=a("./stringify"),n=d(m),o=a("./warn-once"),p=d(o),q=function a(b,c){var d=new b.constructor;for(var e in b)if(b.hasOwnProperty(e)){var f=b[e],g="undefined"==typeof f?"undefined":h(f);"parent"===e&&"object"===g?c&&(d[e]=c):"source"===e?d[e]=f:f instanceof Array?d[e]=f.map(function(b){return a(b,d)}):"before"!==e&&"after"!==e&&"between"!==e&&"semicolon"!==e&&("object"===g&&null!==f&&(f=a(f)),d[e]=f)}return d},r=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e(this,a),this.raws={};for(var c in b)this[c]=b[c]}return a.prototype.error=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(this.source){var c=this.positionBy(b);return this.source.input.error(a,c.line,c.column,b)}return new j.default(a)},a.prototype.warn=function(a,b,c){return a.warn(b,f({node:this},c))},a.prototype.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},a.prototype.toString=function(){var a=arguments.length<=0||void 0===arguments[0]?n.default:arguments[0];a.stringify&&(a=a.stringify);var b="";return a(this,function(a){b+=a}),b},a.prototype.clone=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=q(this);for(var c in a)b[c]=a[c];return b},a.prototype.cloneBefore=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=this.clone(a);return this.parent.insertBefore(this,b),b},a.prototype.cloneAfter=function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=this.clone(a);return this.parent.insertAfter(this,b),b},a.prototype.replaceWith=function(){if(this.parent){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=b,e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;this.parent.insertBefore(this,h)}this.remove()}return this},a.prototype.moveTo=function(a){return this.cleanRaws(this.root()===a.root()),this.remove(),a.append(this),this},a.prototype.moveBefore=function(a){return this.cleanRaws(this.root()===a.root()),this.remove(),a.parent.insertBefore(a,this),this},a.prototype.moveAfter=function(a){return this.cleanRaws(this.root()===a.root()),this.remove(),a.parent.insertAfter(a,this),this},a.prototype.next=function(){var a=this.parent.index(this);return this.parent.nodes[a+1]},a.prototype.prev=function(){var a=this.parent.index(this);return this.parent.nodes[a-1]},a.prototype.toJSON=function(){var a={};for(var b in this)if(this.hasOwnProperty(b)&&"parent"!==b){var c=this[b];c instanceof Array?a[b]=c.map(function(a){return"object"===("undefined"==typeof a?"undefined":h(a))&&a.toJSON?a.toJSON():a}):"object"===("undefined"==typeof c?"undefined":h(c))&&c.toJSON?a[b]=c.toJSON():a[b]=c}return a},a.prototype.raw=function(a,b){var c=new l.default;return c.raw(this,a,b)},a.prototype.root=function(){for(var a=this;a.parent;)a=a.parent;return a},a.prototype.cleanRaws=function(a){delete this.raws.before,delete this.raws.after,a||delete this.raws.between},a.prototype.positionInside=function(a){for(var b=this.toString(),c=this.source.start.column,d=this.source.start.line,e=0;e<a;e++)"\n"===b[e]?(c=1,d+=1):c+=1;return{line:d,column:c}},a.prototype.positionBy=function(a){var b=this.source.start;if(a.index)b=this.positionInside(a.index);else if(a.word){var c=this.toString().indexOf(a.word);c!==-1&&(b=this.positionInside(c))}return b},a.prototype.removeSelf=function(){return(0,p.default)("Node#removeSelf is deprecated. Use Node#remove."),this.remove()},a.prototype.replace=function(a){return(0,p.default)("Node#replace is deprecated. Use Node#replaceWith"),this.replaceWith(a)},a.prototype.style=function(a,b){return(0,p.default)("Node#style() is deprecated. Use Node#raw()"),this.raw(a,b)},a.prototype.cleanStyles=function(a){return(0,p.default)("Node#cleanStyles() is deprecated. Use Node#cleanRaws()"),this.cleanRaws(a)},g(a,[{key:"before",get:function(){return(0,p.default)("Node#before is deprecated. Use Node#raws.before"),this.raws.before},set:function(a){(0,p.default)("Node#before is deprecated. Use Node#raws.before"),this.raws.before=a}},{key:"between",get:function(){return(0,p.default)("Node#between is deprecated. Use Node#raws.between"),this.raws.between},set:function(a){(0,p.default)("Node#between is deprecated. Use Node#raws.between"),this.raws.between=a}}]),a}();c.default=r,b.exports=c.default},{"./css-syntax-error":233,"./stringifier":248,"./stringify":249,"./warn-once":252}],240:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(b&&b.safe)throw new Error('Option safe was removed. Use parser: require("postcss-safe-parser")');var c=new i.default(a,b),d=new g.default(c);return d.tokenize(),d.loop(),d.root}c.__esModule=!0,c.default=e;var f=a("./parser"),g=d(f),h=a("./input"),i=d(h);b.exports=c.default},{"./input":235,"./parser":241}],241:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("./declaration"),g=d(f),h=a("./tokenize"),i=d(h),j=a("./comment"),k=d(j),l=a("./at-rule"),m=d(l),n=a("./root"),o=d(n),p=a("./rule"),q=d(p),r=function(){function a(b){e(this,a),this.input=b,this.pos=0,this.root=new o.default,this.current=this.root,this.spaces="",this.semicolon=!1,this.root.source={input:b,start:{line:1,column:1}}}return a.prototype.tokenize=function(){this.tokens=(0,i.default)(this.input)},a.prototype.loop=function(){for(var a=void 0;this.pos<this.tokens.length;){switch(a=this.tokens[this.pos],a[0]){case"word":case":":this.word();break;case"}":this.end(a);break;case"comment":this.comment(a);break;case"at-word":this.atrule(a);break;case"{":this.emptyRule(a);break;default:this.spaces+=a[1]}this.pos+=1}this.endFile()},a.prototype.comment=function(a){var b=new k.default;this.init(b,a[2],a[3]),b.source.end={line:a[4],column:a[5]};var c=a[1].slice(2,-2);if(/^\s*$/.test(c))b.text="",b.raws.left=c,b.raws.right="";else{var d=c.match(/^(\s*)([^]*[^\s])(\s*)$/);b.text=d[2],b.raws.left=d[1],b.raws.right=d[3]}},a.prototype.emptyRule=function(a){var b=new q.default;this.init(b,a[2],a[3]),b.selector="",b.raws.between="",this.current=b},a.prototype.word=function(){var a=void 0,b=!1,c=null,d=!1,e=null,f=0,g=this.pos;for(this.pos+=1;this.pos<this.tokens.length;){if(a=this.tokens[this.pos],c=a[0],"("===c)e||(e=a),f+=1;else if(0===f){if(";"===c){if(d)return void this.decl(this.tokens.slice(g,this.pos+1));break}if("{"===c)return void this.rule(this.tokens.slice(g,this.pos+1));if("}"===c){this.pos-=1,b=!0;break}":"===c&&(d=!0)}else")"===c&&(f-=1,0===f&&(e=null));this.pos+=1}if(this.pos===this.tokens.length&&(this.pos-=1,b=!0),f>0&&this.unclosedBracket(e),b&&d){for(;this.pos>g&&(a=this.tokens[this.pos][0],"space"===a||"comment"===a);)this.pos-=1;return void this.decl(this.tokens.slice(g,this.pos+1))}this.unknownWord(g)},a.prototype.rule=function(a){a.pop();var b=new q.default;this.init(b,a[0][2],a[0][3]),b.raws.between=this.spacesFromEnd(a),this.raw(b,"selector",a),this.current=b},a.prototype.decl=function(a){var b=new g.default;this.init(b);var c=a[a.length-1];for(";"===c[0]&&(this.semicolon=!0,a.pop()),c[4]?b.source.end={line:c[4],column:c[5]}:b.source.end={line:c[2],column:c[3]};"word"!==a[0][0];)b.raws.before+=a.shift()[1];for(b.source.start={line:a[0][2],column:a[0][3]},b.prop="";a.length;){var d=a[0][0];if(":"===d||"space"===d||"comment"===d)break;b.prop+=a.shift()[1]}b.raws.between="";for(var e=void 0;a.length;){if(e=a.shift(),":"===e[0]){b.raws.between+=e[1];break}b.raws.between+=e[1]}"_"!==b.prop[0]&&"*"!==b.prop[0]||(b.raws.before+=b.prop[0],b.prop=b.prop.slice(1)),b.raws.between+=this.spacesFromStart(a),this.precheckMissedSemicolon(a);for(var f=a.length-1;f>0;f--){if(e=a[f],"!important"===e[1]){b.important=!0;var h=this.stringFrom(a,f);h=this.spacesFromEnd(a)+h," !important"!==h&&(b.raws.important=h);break}if("important"===e[1]){for(var i=a.slice(0),j="",k=f;k>0;k--){var d=i[k][0];if(0===j.trim().indexOf("!")&&"space"!==d)break;j=i.pop()[1]+j}0===j.trim().indexOf("!")&&(b.important=!0,b.raws.important=j,a=i)}if("space"!==e[0]&&"comment"!==e[0])break}this.raw(b,"value",a),b.value.indexOf(":")!==-1&&this.checkMissedSemicolon(a)},a.prototype.atrule=function(a){var b=new m.default;b.name=a[1].slice(1),""===b.name&&this.unnamedAtrule(b,a),this.init(b,a[2],a[3]);var c=!1,d=!1,e=[];for(this.pos+=1;this.pos<this.tokens.length;){if(a=this.tokens[this.pos],";"===a[0]){b.source.end={line:a[2],column:a[3]},this.semicolon=!0;break}if("{"===a[0]){d=!0;break}if("}"===a[0]){this.end(a);break}e.push(a),this.pos+=1}this.pos===this.tokens.length&&(c=!0),b.raws.between=this.spacesFromEnd(e),e.length?(b.raws.afterName=this.spacesFromStart(e),this.raw(b,"params",e),c&&(a=e[e.length-1],b.source.end={line:a[4],column:a[5]},this.spaces=b.raws.between,b.raws.between="")):(b.raws.afterName="",b.params=""),d&&(b.nodes=[],this.current=b)},a.prototype.end=function(a){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end={line:a[2],column:a[3]},this.current=this.current.parent):this.unexpectedClose(a)},a.prototype.endFile=function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces},a.prototype.init=function(a,b,c){this.current.push(a),a.source={start:{line:b,column:c},input:this.input},a.raws.before=this.spaces,this.spaces="","comment"!==a.type&&(this.semicolon=!1)},a.prototype.raw=function a(b,c,d){for(var e=void 0,f=void 0,g=d.length,h="",i=!0,j=0;j<g;j+=1)e=d[j],f=e[0],"comment"===f||"space"===f&&j===g-1?i=!1:h+=e[1];if(!i){var a=d.reduce(function(a,b){return a+b[1]},"");b.raws[c]={value:h,raw:a}}b[c]=h},a.prototype.spacesFromEnd=function(a){for(var b=void 0,c="";a.length&&(b=a[a.length-1][0],"space"===b||"comment"===b);)c+=a.pop()[1];return c},a.prototype.spacesFromStart=function(a){for(var b=void 0,c="";a.length&&(b=a[0][0],"space"===b||"comment"===b);)c+=a.shift()[1];return c},a.prototype.stringFrom=function(a,b){for(var c="",d=b;d<a.length;d++)c+=a[d][1];return a.splice(b,a.length-b),c},a.prototype.colon=function(a){for(var b=0,c=void 0,d=void 0,e=void 0,f=0;f<a.length;f++){if(c=a[f],d=c[0],"("===d)b+=1;else if(")"===d)b-=1;else if(0===b&&":"===d){if(e){if("word"===e[0]&&"progid"===e[1])continue;return f}this.doubleColon(c)}e=c}return!1},a.prototype.unclosedBracket=function(a){throw this.input.error("Unclosed bracket",a[2],a[3])},a.prototype.unknownWord=function(a){var b=this.tokens[a];throw this.input.error("Unknown word",b[2],b[3])},a.prototype.unexpectedClose=function(a){throw this.input.error("Unexpected }",a[2],a[3])},a.prototype.unclosedBlock=function(){var a=this.current.source.start;throw this.input.error("Unclosed block",a.line,a.column)},a.prototype.doubleColon=function(a){throw this.input.error("Double colon",a[2],a[3])},a.prototype.unnamedAtrule=function(a,b){throw this.input.error("At-rule without name",b[2],b[3])},a.prototype.precheckMissedSemicolon=function(a){},a.prototype.checkMissedSemicolon=function(a){var b=this.colon(a);if(b!==!1){for(var c=0,d=void 0,e=b-1;e>=0&&(d=a[e],"space"===d[0]||(c+=1,2!==c));e--);throw this.input.error("Missed semicolon",d[2],d[3])}},a}();c.default=r,b.exports=c.default},{"./at-rule":230,"./comment":231,"./declaration":234,"./root":246,"./rule":247,"./tokenize":250}],242:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./declaration"),f=d(e),g=a("./processor"),h=d(g),i=a("./stringify"),j=d(i),k=a("./comment"),l=d(k),m=a("./at-rule"),n=d(m),o=a("./vendor"),p=d(o),q=a("./parse"),r=d(q),s=a("./list"),t=d(s),u=a("./rule"),v=d(u),w=a("./root"),x=d(w),y=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return 1===b.length&&Array.isArray(b[0])&&(b=b[0]),new h.default(b)};y.plugin=function(a,b){var c=function(){var c=b.apply(void 0,arguments);return c.postcssPlugin=a,c.postcssVersion=(new h.default).version,c};return c.postcss=c(),c.process=function(a,b){return y([c(b)]).process(a,b)},c},y.stringify=j.default,y.vendor=p.default,y.parse=r.default,y.list=t.default,y.comment=function(a){return new l.default(a)},y.atRule=function(a){return new n.default(a)},y.decl=function(a){return new f.default(a)},y.rule=function(a){return new v.default(a)},y.root=function(a){return new x.default(a)},c.default=y,b.exports=c.default},{"./at-rule":230,"./comment":231,"./declaration":234,"./list":237,"./parse":240,"./processor":244,"./root":246,"./rule":247,"./stringify":249,"./vendor":251}],243:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},g=a("js-base64"),h=a("source-map"),i=d(h),j=a("path"),k=d(j),l=a("fs"),m=d(l),n=function(){function a(b,c){e(this,a),this.loadAnnotation(b),this.inline=this.startWith(this.annotation,"data:");var d=c.map?c.map.prev:void 0,f=this.loadMap(c.from,d);f&&(this.text=f)}return a.prototype.consumer=function(){return this.consumerCache||(this.consumerCache=new i.default.SourceMapConsumer(this.text)),this.consumerCache},a.prototype.withContent=function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)},a.prototype.startWith=function(a,b){return!!a&&a.substr(0,b.length)===b},a.prototype.loadAnnotation=function(a){var b=a.match(/\/\*\s*# sourceMappingURL=(.*)\s*\*\//);b&&(this.annotation=b[1].trim())},a.prototype.decodeInline=function(a){var b="data:application/json;charset=utf-8;base64,",c="data:application/json;base64,",d="data:application/json,";if(this.startWith(a,d))return decodeURIComponent(a.substr(d.length));if(this.startWith(a,c))return g.Base64.decode(a.substr(c.length));if(this.startWith(a,b))return g.Base64.decode(a.substr(b.length));var e=a.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+e)},a.prototype.loadMap=function(a,b){if(b===!1)return!1;if(b){if("string"==typeof b)return b;if(b instanceof i.default.SourceMapConsumer)return i.default.SourceMapGenerator.fromSourceMap(b).toString();if(b instanceof i.default.SourceMapGenerator)return b.toString();if(this.isMap(b))return JSON.stringify(b);throw new Error("Unsupported previous source map format: "+b.toString())}if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var c=this.annotation;return a&&(c=k.default.join(k.default.dirname(a),c)),this.root=k.default.dirname(c),!(!m.default.existsSync||!m.default.existsSync(c))&&m.default.readFileSync(c,"utf-8").toString().trim()}},a.prototype.isMap=function(a){return"object"===("undefined"==typeof a?"undefined":f(a))&&("string"==typeof a.mappings||"string"==typeof a._mappings)},a}();c.default=n,b.exports=c.default},{fs:29,"js-base64":179,path:200,"source-map":302}],244:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},g=a("./lazy-result"),h=d(g),i=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];e(this,a),this.version="5.0.14",this.plugins=this.normalize(b)}return a.prototype.use=function(a){return this.plugins=this.plugins.concat(this.normalize([a])),this},a.prototype.process=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new h.default(this,a,b)},a.prototype.normalize=function(a){for(var b=[],c=a,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var g;if(d){if(e>=c.length)break;g=c[e++]}else{if(e=c.next(),e.done)break;g=e.value}var h=g;if(h.postcss&&(h=h.postcss),"object"===("undefined"==typeof h?"undefined":f(h))&&Array.isArray(h.plugins))b=b.concat(h.plugins);else{if("function"!=typeof h)throw new Error(h+" is not a PostCSS plugin");b.push(h)}}return b},a}();c.default=i,b.exports=c.default},{"./lazy-result":236}],245:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./warning"),h=d(g),i=function(){function a(b,c,d){e(this,a),this.processor=b,this.messages=[],this.root=c,this.opts=d,this.css=void 0,this.map=void 0}return a.prototype.toString=function(){return this.css},a.prototype.warn=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];b.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(b.plugin=this.lastPlugin.postcssPlugin),this.messages.push(new h.default(a,b))},a.prototype.warnings=function(){return this.messages.filter(function(a){return"warning"===a.type})},f(a,[{key:"content",get:function(){return this.css}}]),a}();c.default=i,b.exports=c.default},{"./warning":253}],246:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./container"),i=d(h),j=a("./warn-once"),k=d(j),l=function(b){function c(a){e(this,c);var d=f(this,b.call(this,a));return d.type="root",d.nodes||(d.nodes=[]),d}return g(c,b),c.prototype.removeChild=function(a){return a=this.index(a),0===a&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[a].raws.before),b.prototype.removeChild.call(this,a)},c.prototype.normalize=function(a,c,d){var e=b.prototype.normalize.call(this,a);if(c)if("prepend"===d)this.nodes.length>1?c.raws.before=this.nodes[1].raws.before:delete c.raws.before;else if(this.first!==c)for(var f=e,g=Array.isArray(f),h=0,f=g?f:f[Symbol.iterator]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{if(h=f.next(),h.done)break;i=h.value}var j=i;j.raws.before=c.raws.before}return e},c.prototype.toResult=function(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a("./lazy-result"),d=a("./processor"),e=new c(new d,this,b);return e.stringify()},c.prototype.remove=function(a){(0,k.default)("Root#remove is deprecated. Use Root#removeChild"),this.removeChild(a)},c.prototype.prevMap=function(){return(0,k.default)("Root#prevMap is deprecated. Use Root#source.input.map"),this.source.input.map},c}(i.default);c.default=l,b.exports=c.default},{"./container":232,"./lazy-result":236,"./processor":244,"./warn-once":252}],247:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./container"),j=d(i),k=a("./warn-once"),l=d(k),m=a("./list"),n=d(m),o=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.type="rule",d.nodes||(d.nodes=[]),d}return g(b,a),h(b,[{key:"selectors",get:function(){return n.default.comma(this.selector)},set:function(a){var b=this.selector?this.selector.match(/,\s*/):null,c=b?b[0]:","+this.raw("between","beforeOpen");this.selector=a.join(c)}},{key:"_selector",get:function(){return(0,l.default)("Rule#_selector is deprecated. Use Rule#raws.selector"),this.raws.selector},set:function(a){(0,l.default)("Rule#_selector is deprecated. Use Rule#raws.selector"),this.raws.selector=a}}]),b}(j.default);c.default=o,b.exports=c.default},{"./container":232,"./list":237,"./warn-once":252}],248:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return a[0].toUpperCase()+a.slice(1)}c.__esModule=!0;var f={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" "},g=function(){function a(b){d(this,a),this.builder=b}return a.prototype.stringify=function(a,b){this[a.type](a,b)},a.prototype.root=function(a){this.body(a),a.raws.after&&this.builder(a.raws.after)},a.prototype.comment=function(a){var b=this.raw(a,"left","commentLeft"),c=this.raw(a,"right","commentRight");this.builder("/*"+b+a.text+c+"*/",a)},a.prototype.decl=function(a,b){var c=this.raw(a,"between","colon"),d=a.prop+c+this.rawValue(a,"value");a.important&&(d+=a.raws.important||" !important"),b&&(d+=";"),this.builder(d,a)},a.prototype.rule=function(a){this.block(a,this.rawValue(a,"selector"))},a.prototype.atrule=function(a,b){var c="@"+a.name,d=a.params?this.rawValue(a,"params"):"";if("undefined"!=typeof a.raws.afterName?c+=a.raws.afterName:d&&(c+=" "),a.nodes)this.block(a,c+d);else{var e=(a.raws.between||"")+(b?";":"");this.builder(c+d+e,a)}},a.prototype.body=function(a){for(var b=a.nodes.length-1;b>0&&"comment"===a.nodes[b].type;)b-=1;for(var c=this.raw(a,"semicolon"),d=0;d<a.nodes.length;d++){var e=a.nodes[d],f=this.raw(e,"before");f&&this.builder(f),this.stringify(e,b!==d||c)}},a.prototype.block=function(a,b){var c=this.raw(a,"between","beforeOpen");this.builder(b+c+"{",a,"start");var d=void 0;a.nodes&&a.nodes.length?(this.body(a),d=this.raw(a,"after")):d=this.raw(a,"after","emptyBody"),d&&this.builder(d),this.builder("}",a,"end")},a.prototype.raw=function(a,b,c){var d=void 0;if(c||(c=b),b&&(d=a.raws[b],"undefined"!=typeof d))return d;var g=a.parent;if("before"===c&&(!g||"root"===g.type&&g.first===a))return"";if(!g)return f[c];var h=a.root();if(h.rawCache||(h.rawCache={}),"undefined"!=typeof h.rawCache[c])return h.rawCache[c];if("before"===c||"after"===c)return this.beforeAfter(a,c);var i="raw"+e(c);return this[i]?d=this[i](h,a):h.walk(function(a){if(d=a.raws[b],"undefined"!=typeof d)return!1}),"undefined"==typeof d&&(d=f[c]),h.rawCache[c]=d,d},a.prototype.rawSemicolon=function(a){var b=void 0;return a.walk(function(a){if(a.nodes&&a.nodes.length&&"decl"===a.last.type&&(b=a.raws.semicolon,"undefined"!=typeof b))return!1}),b},a.prototype.rawEmptyBody=function(a){var b=void 0;return a.walk(function(a){if(a.nodes&&0===a.nodes.length&&(b=a.raws.after,"undefined"!=typeof b))return!1}),b},a.prototype.rawIndent=function(a){if(a.raws.indent)return a.raws.indent;var b=void 0;return a.walk(function(c){var d=c.parent;if(d&&d!==a&&d.parent&&d.parent===a&&"undefined"!=typeof c.raws.before){var e=c.raws.before.split("\n");return b=e[e.length-1],b=b.replace(/[^\s]/g,""),!1}}),b},a.prototype.rawBeforeComment=function(a,b){var c=void 0;return a.walkComments(function(a){if("undefined"!=typeof a.raws.before)return c=a.raws.before,c.indexOf("\n")!==-1&&(c=c.replace(/[^\n]+$/,"")),!1}),"undefined"==typeof c&&(c=this.raw(b,null,"beforeDecl")),c},a.prototype.rawBeforeDecl=function(a,b){var c=void 0;return a.walkDecls(function(a){if("undefined"!=typeof a.raws.before)return c=a.raws.before,c.indexOf("\n")!==-1&&(c=c.replace(/[^\n]+$/,"")),!1}),"undefined"==typeof c&&(c=this.raw(b,null,"beforeRule")),c},a.prototype.rawBeforeRule=function(a){var b=void 0;return a.walk(function(c){if(c.nodes&&(c.parent!==a||a.first!==c)&&"undefined"!=typeof c.raws.before)return b=c.raws.before,b.indexOf("\n")!==-1&&(b=b.replace(/[^\n]+$/,"")),!1}),b},a.prototype.rawBeforeClose=function(a){var b=void 0;return a.walk(function(a){if(a.nodes&&a.nodes.length>0&&"undefined"!=typeof a.raws.after)return b=a.raws.after,b.indexOf("\n")!==-1&&(b=b.replace(/[^\n]+$/,"")),!1}),b},a.prototype.rawBeforeOpen=function(a){var b=void 0;return a.walk(function(a){if("decl"!==a.type&&(b=a.raws.between,"undefined"!=typeof b))return!1}),b},a.prototype.rawColon=function(a){var b=void 0;return a.walkDecls(function(a){if("undefined"!=typeof a.raws.between)return b=a.raws.between.replace(/[^\s:]/g,""),!1}),b},a.prototype.beforeAfter=function(a,b){var c=void 0;c="decl"===a.type?this.raw(a,null,"beforeDecl"):"comment"===a.type?this.raw(a,null,"beforeComment"):"before"===b?this.raw(a,null,"beforeRule"):this.raw(a,null,"beforeClose");for(var d=a.parent,e=0;d&&"root"!==d.type;)e+=1,d=d.parent;if(c.indexOf("\n")!==-1){var f=this.raw(a,null,"indent");if(f.length)for(var g=0;g<e;g++)c+=f}return c},a.prototype.rawValue=function(a,b){var c=a[b],d=a.raws[b];return d&&d.value===c?d.raw:c},a}();c.default=g,b.exports=c.default},{}],249:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c=new g.default(b);c.stringify(a)}c.__esModule=!0,c.default=e;var f=a("./stringifier"),g=d(f);b.exports=c.default},{"./stringifier":248}],250:[function(a,b,c){"use strict";function d(a){function b(b){throw a.error("Unclosed "+b,N,O-M)}for(var c=[],d=a.css.valueOf(),y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=d.length,M=-1,N=1,O=0;O<L;){switch(y=d.charCodeAt(O),(y===i||y===k||y===m&&d.charCodeAt(O+1)!==i)&&(M=O,N+=1),y){case i:case j:case l:case m:case k:z=O;do z+=1,y=d.charCodeAt(z),y===i&&(M=z,N+=1);while(y===j||y===i||y===l||y===m||y===k);c.push(["space",d.slice(O,z)]),O=z-1;break;case p:c.push(["{","{",N,O-M]);break;case q:c.push(["}","}",N,O-M]);break;case t:c.push([":",":",N,O-M]);break;case r:c.push([";",";",N,O-M]);break;case n:if(J=c.length?c[c.length-1][1]:"",K=d.charCodeAt(O+1),"url"===J&&K!==e&&K!==f&&K!==j&&K!==i&&K!==l&&K!==k&&K!==m){z=O;do for(H=!1,z=d.indexOf(")",z+1),z===-1&&b("bracket"),I=z;d.charCodeAt(I-1)===g;)I-=1,H=!H;while(H);c.push(["brackets",d.slice(O,z+1),N,O-M,N,z-M]),O=z}else z=d.indexOf(")",O+1),D=d.slice(O,z+1),z===-1||x.test(D)?c.push(["(","(",N,O-M]):(c.push(["brackets",D,N,O-M,N,z-M]),O=z);break;case o:c.push([")",")",N,O-M]);break;case e:case f:A=y===e?"'":'"',z=O;do for(H=!1,z=d.indexOf(A,z+1),z===-1&&b("quote"),I=z;d.charCodeAt(I-1)===g;)I-=1,H=!H;while(H);D=d.slice(O,z+1),B=D.split("\n"),C=B.length-1,C>0?(F=N+C,G=z-B[C].length):(F=N,G=M),c.push(["string",d.slice(O,z+1),N,O-M,F,z-G]),M=G,N=F,O=z;break;case u:v.lastIndex=O+1,v.test(d),z=0===v.lastIndex?d.length-1:v.lastIndex-2,c.push(["at-word",d.slice(O,z+1),N,O-M,N,z-M]),O=z;break;case g:for(z=O,E=!0;d.charCodeAt(z+1)===g;)z+=1,E=!E;y=d.charCodeAt(z+1),E&&y!==h&&y!==j&&y!==i&&y!==l&&y!==m&&y!==k&&(z+=1),c.push(["word",d.slice(O,z+1),N,O-M,N,z-M]),O=z;break;default:y===h&&d.charCodeAt(O+1)===s?(z=d.indexOf("*/",O+2)+1,0===z&&b("comment"),D=d.slice(O,z+1),B=D.split("\n"),C=B.length-1,C>0?(F=N+C,G=z-B[C].length):(F=N,G=M),c.push(["comment",D,N,O-M,F,z-G]),M=G,N=F,O=z):(w.lastIndex=O+1,w.test(d),z=0===w.lastIndex?d.length-1:w.lastIndex-2,c.push(["word",d.slice(O,z+1),N,O-M,N,z-M]),O=z)}O++}return c}c.__esModule=!0,c.default=d;var e=39,f=34,g=92,h=47,i=10,j=32,k=12,l=9,m=13,n=40,o=41,p=123,q=125,r=59,s=42,t=58,u=64,v=/[ \n\t\r\f\{\(\)'"\\;\/]/g,w=/[ \n\t\r\f\(\)\{\}:;@!'"\\]|\/(?=\*)/g,x=/.[\\\/\("'\n]/;b.exports=c.default},{}],251:[function(a,b,c){"use strict";c.__esModule=!0,c.default={prefix:function(a){if("-"===a[0]){var b=a.indexOf("-",1);return a.substr(0,b+1)}return""},unprefixed:function(a){if("-"===a[0]){var b=a.indexOf("-",1);return a.substr(b+1)}return a}},b.exports=c.default},{}],252:[function(a,b,c){"use strict";function d(a){e[a]||(e[a]=!0,"undefined"!=typeof console&&console.warn&&console.warn(a))}c.__esModule=!0,c.default=d;var e={};b.exports=c.default},{}],253:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(d(this,a),this.type="warning",this.text=b,c.node&&c.node.source){var e=c.node.positionBy(c);this.line=e.line,this.column=e.column}for(var f in c)this[f]=c[f]}return a.prototype.toString=function(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},a}();c.default=e,b.exports=c.default},{}],254:[function(a,b,c){"use strict";b.exports=!1},{}],255:[function(a,b,c){(function(a){"use strict";function c(b,c,d,e){if("function"!=typeof b)throw new TypeError('"callback" argument must be a function');var f,g,h=arguments.length;switch(h){case 0:case 1:return a.nextTick(b);case 2:return a.nextTick(function(){b.call(null,c)});case 3:return a.nextTick(function(){b.call(null,c,d)});case 4:return a.nextTick(function(){b.call(null,c,d,e)});default:for(f=new Array(h-1),g=0;g<f.length;)f[g++]=arguments[g];return a.nextTick(function(){b.apply(null,f)})}}!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?b.exports=c:b.exports=a.nextTick}).call(this,a("_process"))},{_process:256}],256:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);
if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],257:[function(a,b,c){var d=a("readable-stream").Readable;b.exports=function(a){var b=a._readableState;"function"!=typeof a.read&&(a=new d(b).wrap(a));var c=new d({objectMode:b&&b.objectMode}),e=!1;return a.on("readable",function(){e&&(e=!1,c._read())}),c._read=function(){for(var b,d=0;null!==(b=a.read());)c.push(b),d++;0===d&&(e=!0)},a.once("end",function(){c.push(null)}),a.on("error",function(a){c.emit("error",a)}),c}},{"readable-stream":265}],258:[function(a,b,c){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":259}],259:[function(a,b,c){"use strict";function d(a){return this instanceof d?(j.call(this,a),k.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||h(f,this)}function f(a){a.end()}var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=d;var h=a("process-nextick-args"),i=a("core-util-is");i.inherits=a("inherits");var j=a("./_stream_readable"),k=a("./_stream_writable");i.inherits(d,j);for(var l=g(k.prototype),m=0;m<l.length;m++){var n=l[m];d.prototype[n]||(d.prototype[n]=k.prototype[n])}},{"./_stream_readable":261,"./_stream_writable":263,"core-util-is":126,inherits:173,"process-nextick-args":255}],260:[function(a,b,c){"use strict";function d(a){return this instanceof d?void e.call(this,a):new d(a)}b.exports=d;var e=a("./_stream_transform"),f=a("core-util-is");f.inherits=a("inherits"),f.inherits(d,e),d.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":262,"core-util-is":126,inherits:173}],261:[function(a,b,c){(function(c){"use strict";function d(b,c){I=I||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof I&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(H||(H=a("string_decoder/").StringDecoder),this.decoder=new H(b.encoding),this.encoding=b.encoding)}function e(b){return I=I||a("./_stream_duplex"),this instanceof e?(this._readableState=new d(b,this),this.readable=!0,b&&"function"==typeof b.read&&(this._read=b.read),void C.call(this)):new e(b)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(null===c)b.reading=!1,k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else{var i;!b.decoder||e||d||(c=b.decoder.write(c),i=!b.objectMode&&0===c.length),e||(b.reading=!1),i||(b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&l(a))),n(a,b)}else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){return a>=J?a=J:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:null===a||isNaN(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:a<=0?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return B.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,l(a)}}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(G("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?z(m,a):m(a))}function m(a){G("emit readable"),a.emit("readable"),t(a)}function n(a,b){b.readingMore||(b.readingMore=!0,z(o,a,b))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(G("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;G("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&D(a,"data")&&(b.flowing=!0,t(a))}}function q(a){G("readable nexttick read 0"),a.read(0)}function r(a,b){b.resumeScheduled||(b.resumeScheduled=!0,z(s,a,b))}function s(a,b){b.reading||(G("resume read 0"),a.read(0)),b.resumeScheduled=!1,a.emit("resume"),t(a),b.flowing&&!b.reading&&a.read(0)}function t(a){var b=a._readableState;if(G("flow",b.flowing),b.flowing)do var c=a.read();while(null!==c&&b.flowing)}function u(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):1===d.length?d[0]:B.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new B(a);for(var i=0,j=0,k=d.length;j<k&&i<a;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function v(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,z(w,b,a))}function w(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function x(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function y(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}b.exports=e;var z=a("process-nextick-args"),A=a("isarray"),B=a("buffer").Buffer;e.ReadableState=d;var C,D=(a("events"),function(a,b){return a.listeners(b).length});!function(){try{C=a("stream")}catch(a){}finally{C||(C=a("events").EventEmitter)}}();var B=a("buffer").Buffer,E=a("core-util-is");E.inherits=a("inherits");var F=a("util"),G=void 0;G=F&&F.debuglog?F.debuglog("stream"):function(){};var H;E.inherits(e,C);var I,I;e.prototype.push=function(a,b){var c=this._readableState;return c.objectMode||"string"!=typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new B(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.isPaused=function(){return this._readableState.flowing===!1},e.prototype.setEncoding=function(b){return H||(H=a("string_decoder/").StringDecoder),this._readableState.decoder=new H(b),this._readableState.encoding=b,this};var J=8388608;e.prototype.read=function(a){G("read",a);var b=this._readableState,c=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return G("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?v(this):l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&v(this),null;var d=b.needReadable;G("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,G("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,G("reading or ended",d)),d&&(G("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?u(a,b):null,null===e&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&v(this),null!==e&&this.emit("data",e),e},e.prototype._read=function(a){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){G("onunpipe"),a===l&&f()}function e(){G("onend"),a.end()}function f(){G("cleanup"),a.removeListener("close",i),a.removeListener("finish",j),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",d),l.removeListener("end",e),l.removeListener("end",f),l.removeListener("data",g),r=!0,!m.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function g(b){G("ondata");var c=a.write(b);!1===c&&(1!==m.pipesCount||m.pipes[0]!==a||1!==l.listenerCount("data")||r||(G("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++),l.pause())}function h(b){G("onerror",b),k(),a.removeListener("error",h),0===D(a,"error")&&a.emit("error",b)}function i(){a.removeListener("finish",j),k()}function j(){G("onfinish"),a.removeListener("close",i),k()}function k(){G("unpipe"),l.unpipe(a)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=a;break;case 1:m.pipes=[m.pipes,a];break;default:m.pipes.push(a)}m.pipesCount+=1,G("pipe count=%d opts=%j",m.pipesCount,b);var n=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,o=n?e:f;m.endEmitted?z(o):l.once("end",o),a.on("unpipe",d);var q=p(l);a.on("drain",q);var r=!1;return l.on("data",g),a._events&&a._events.error?A(a._events.error)?a._events.error.unshift(h):a._events.error=[h,a._events.error]:a.on("error",h),a.once("close",i),a.once("finish",j),a.emit("pipe",l),m.flowing||(G("pipe resume"),l.resume()),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;e<d;e++)c[e].emit("unpipe",this);return this}var f=y(b.pipes,a);return f===-1?this:(b.pipes.splice(f,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var c=C.prototype.on.call(this,a,b);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&!this._readableState.endEmitted){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&l(this,d):z(q,this))}return c},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){var a=this._readableState;return a.flowing||(G("resume"),a.flowing=!0,r(this,a)),this},e.prototype.pause=function(){return G("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(G("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(G("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(G("wrapped data"),b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)void 0===this[e]&&"function"==typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return x(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){G("wrapped _read",b),c&&(c=!1,a.resume())},d},e._fromList=u}).call(this,a("_process"))},{"./_stream_duplex":259,_process:256,buffer:34,"core-util-is":126,events:152,inherits:173,isarray:178,"process-nextick-args":255,"string_decoder/":306,util:10}],262:[function(a,b,c){"use strict";function d(a){this.afterTransform=function(b,c){return e(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(a){g(b,a)}):g(b)})}function g(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":259,"core-util-is":126,inherits:173}],263:[function(a,b,c){(function(c){"use strict";function d(){}function e(a,b,c){this.chunk=a,this.encoding=b,this.callback=c,this.next=null}function f(b,c){D=D||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof D&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=b.decodeStrings===!1;this.decodeStrings=!f,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){o(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this),this.corkedRequestsFree.next=new w(this)}function g(b){return D=D||a("./_stream_duplex"),this instanceof g||this instanceof D?(this._writableState=new f(b,this),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev)),void B.call(this)):new g(b)}function h(a,b){var c=new Error("write after end");a.emit("error",c),x(b,c)}function i(a,b,c,d){var e=!0;if(!z.isBuffer(c)&&"string"!=typeof c&&null!==c&&void 0!==c&&!b.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");a.emit("error",f),x(d,f),e=!1}return e}function j(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=new z(b,c)),b}function k(a,b,c,d,f){c=j(b,c,d),z.isBuffer(c)&&(d="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;if(h||(b.needDrain=!0),b.writing||b.corked){var i=b.lastBufferedRequest;b.lastBufferedRequest=new e(c,d,f),i?i.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else l(a,b,!1,g,c,d,f);return h}function l(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function m(a,b,c,d,e){--b.pendingcb,c?x(e,d):e(d),a._writableState.errorEmitted=!0,a.emit("error",d)}function n(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function o(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if(n(c),b)m(a,c,d,b,e);else{var f=s(c);f||c.corked||c.bufferProcessing||!c.bufferedRequest||r(a,c),d?y(p,a,c,f,e):p(a,c,f,e)}}function p(a,b,c,d){c||q(a,b),b.pendingcb--,d(),u(a,b)}function q(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function r(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=b.bufferedRequestCount,e=new Array(d),f=b.corkedRequestsFree;f.entry=c;for(var g=0;c;)e[g]=c,c=c.next,g+=1;l(a,b,!0,b.length,e,"",f.finish),b.pendingcb++,b.lastBufferedRequest=null,b.corkedRequestsFree=f.next,f.next=null}else{for(;c;){var h=c.chunk,i=c.encoding,j=c.callback,k=b.objectMode?1:h.length;if(l(a,b,!1,k,h,i,j),c=c.next,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0,b.bufferedRequest=c,b.bufferProcessing=!1}function s(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function t(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function u(a,b){var c=s(b);return c&&(0===b.pendingcb?(t(a,b),b.finished=!0,a.emit("finish")):t(a,b)),c}function v(a,b,c){b.ending=!0,u(a,b),c&&(b.finished?x(c):a.once("finish",c)),b.ended=!0,a.writable=!1}function w(a){var b=this;this.next=null,this.entry=null,this.finish=function(c){var d=b.entry;for(b.entry=null;d;){var e=d.callback;a.pendingcb--,e(c),d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}b.exports=g;var x=a("process-nextick-args"),y=!c.browser&&["v0.10","v0.9."].indexOf(c.version.slice(0,5))>-1?setImmediate:x,z=a("buffer").Buffer;g.WritableState=f;var A=a("core-util-is");A.inherits=a("inherits");var B,C={deprecate:a("util-deprecate")};!function(){try{B=a("stream")}catch(a){}finally{B||(B=a("events").EventEmitter)}}();var z=a("buffer").Buffer;A.inherits(g,B);var D;f.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b},function(){try{Object.defineProperty(f.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(a){}}();var D;g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},g.prototype.write=function(a,b,c){var e=this._writableState,f=!1;return"function"==typeof b&&(c=b,b=null),z.isBuffer(a)?b="buffer":b||(b=e.defaultEncoding),"function"!=typeof c&&(c=d),e.ended?h(this,c):i(this,e,a,c)&&(e.pendingcb++,f=k(this,e,a,b,c)),f},g.prototype.cork=function(){var a=this._writableState;a.corked++},g.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||r(this,a))},g.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a},g.prototype._write=function(a,b,c){c(new Error("not implemented"))},g.prototype._writev=null,g.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!==a&&void 0!==a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||v(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":259,_process:256,buffer:34,"core-util-is":126,events:152,inherits:173,"process-nextick-args":255,"util-deprecate":400}],264:[function(a,b,c){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":260}],265:[function(a,b,c){var d=function(){try{return a("stream")}catch(a){}}();c=b.exports=a("./lib/_stream_readable.js"),c.Stream=d||c,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":259,"./lib/_stream_passthrough.js":260,"./lib/_stream_readable.js":261,"./lib/_stream_transform.js":262,"./lib/_stream_writable.js":263}],266:[function(a,b,c){arguments[4][160][0].apply(c,arguments)},{"./lib/_stream_transform.js":262,dup:160}],267:[function(a,b,c){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":263}],268:[function(a,b,c){"use strict";function d(a,b){return a.from>b.from?1:-1}function e(a,b,c){var d=new RegExp("^"+a),e=f.find(c,{word:a,nodes:!0,parse:g});return e.nodes.map(function(a){var e=a.callee,f=c.slice(e.range[0],e.range[1]).replace(d,b);return{from:e.range[0],to:e.range[1],code:f}})}var f=a("detective"),g={tolerant:!0,range:!0};b.exports=function(a,b,c){var f=c,g=new RegExp(a+" *\\(.*\\)");if(!g.test(f))return f;var h=f.match(/^#![^\n]*\n/),i=h?h[0]:"";h&&(f=f.slice(i.length));var j=0;return i+e(a,b,f).sort(d).reduce(function(a,b){var c=b.from+j,d=b.to+j,e=b.code,f=e.length-(d-c);return j+=f,a.slice(0,c)+e+a.slice(d)},f)}},{detective:269}],269:[function(a,b,c){var d=a("esprima-fb"),e=a("escodegen"),f=function(a,b){Array.isArray(a)?a.forEach(function(c){null!=c&&(c.parent=a,f(c,b))}):a&&"object"==typeof a&&(b(a),Object.keys(a).forEach(function(c){"parent"!==c&&a[c]&&(a[c].parent=a,f(a[c],b))}))},g=function(a,b,c){var e=d.parse(a,b);f(e,c)},c=b.exports=function(a,b){return c.find(a,b).strings};c.find=function(a,b){b||(b={}),b.parse=b.parse||{},b.parse.tolerant=!0;var c=void 0===b.word?"require":b.word;"string"!=typeof a&&(a=String(a)),a=a.replace(/^#![^\n]*\n/,"");var d=b.isRequire||function(a){var b=a.callee;return b&&"CallExpression"===a.type&&"Identifier"===b.type&&b.name===c},f={strings:[],expressions:[]};return b.nodes&&(f.nodes=[]),a.indexOf(c)==-1?f:(g(a,b.parse,function(a){d(a)&&(a.arguments.length&&("Literal"===a.arguments[0].type?f.strings.push(a.arguments[0].value):f.expressions.push(e.generate(a.arguments[0]))),b.nodes&&f.nodes.push(a))}),f)}},{escodegen:136,"esprima-fb":270}],270:[function(a,b,c){!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["exports"],b):b("undefined"!=typeof c?c:a.esprima={})}(this,function(a){"use strict";function b(a,b){if(!a)throw new Error("ASSERT: "+b)}function c(a){return a>=48&&a<=57}function d(a){return"0123456789abcdefABCDEF".indexOf(a)>=0}function e(a){return"01234567".indexOf(a)>=0}function f(a){return 32===a||9===a||11===a||12===a||160===a||a>=5760&&" ᠎             　\ufeff".indexOf(String.fromCharCode(a))>0}function g(a){return 10===a||13===a||8232===a||8233===a}function h(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||92===a||a>=128&&hc.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function i(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||a>=48&&a<=57||92===a||a>=128&&hc.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function j(a){switch(a){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function k(a){switch(a){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function l(a){return"eval"===a||"arguments"===a}function m(a){if(mc&&k(a))return!0;switch(a.length){case 2:return"if"===a||"in"===a||"do"===a;case 3:return"var"===a||"for"===a||"new"===a||"try"===a||"let"===a;case 4:return"this"===a||"else"===a||"case"===a||"void"===a||"with"===a||"enum"===a;case 5:return"while"===a||"break"===a||"catch"===a||"throw"===a||"const"===a||"yield"===a||"class"===a||"super"===a;case 6:return"return"===a||"typeof"===a||"delete"===a||"switch"===a||"export"===a||"import"===a;case 7:return"default"===a||"finally"===a||"extends"===a;case 8:return"function"===a||"continue"===a||"debugger"===a;case 10:return"instanceof"===a;default:return!1}}function n(){var a,b,c;for(b=!1,c=!1;nc<qc;)if(a=lc.charCodeAt(nc),c)++nc,g(a)&&(c=!1,13===a&&10===lc.charCodeAt(nc)&&++nc,++oc,pc=nc);else if(b)g(a)?(13===a&&10===lc.charCodeAt(nc+1)&&++nc,++oc,++nc,pc=nc,nc>=qc&&I({},gc.UnexpectedToken,"ILLEGAL")):(a=lc.charCodeAt(nc++),nc>=qc&&I({},gc.UnexpectedToken,"ILLEGAL"),42===a&&(a=lc.charCodeAt(nc),47===a&&(++nc,b=!1)));else if(47===a)if(a=lc.charCodeAt(nc+1),47===a)nc+=2,c=!0;else{if(42!==a)break;nc+=2,b=!0,nc>=qc&&I({},gc.UnexpectedToken,"ILLEGAL")}else if(f(a))++nc;else{if(!g(a))break;++nc,13===a&&10===lc.charCodeAt(nc)&&++nc,++oc,pc=nc}}function o(a){var b,c,e,f=0;for(c="u"===a?4:2,b=0;b<c;++b){if(!(nc<qc&&d(lc[nc])))return"";e=lc[nc++],f=16*f+"0123456789abcdef".indexOf(e.toLowerCase())}return String.fromCharCode(f)}function p(){var a,b,c,e;for(a=lc[nc],b=0,"}"===a&&I({},gc.UnexpectedToken,"ILLEGAL");nc<qc&&(a=lc[nc++],d(a));)b=16*b+"0123456789abcdef".indexOf(a.toLowerCase());return(b>1114111||"}"!==a)&&I({},gc.UnexpectedToken,"ILLEGAL"),b<=65535?String.fromCharCode(b):(c=(b-65536>>10)+55296,e=(b-65536&1023)+56320,String.fromCharCode(c,e))}function q(){var a,b;for(a=lc.charCodeAt(nc++),b=String.fromCharCode(a),92===a&&(117!==lc.charCodeAt(nc)&&I({},gc.UnexpectedToken,"ILLEGAL"),++nc,a=o("u"),a&&"\\"!==a&&h(a.charCodeAt(0))||I({},gc.UnexpectedToken,"ILLEGAL"),b=a);nc<qc&&(a=lc.charCodeAt(nc),i(a));)++nc,b+=String.fromCharCode(a),92===a&&(b=b.substr(0,b.length-1),117!==lc.charCodeAt(nc)&&I({},gc.UnexpectedToken,"ILLEGAL"),++nc,a=o("u"),a&&"\\"!==a&&i(a.charCodeAt(0))||I({},gc.UnexpectedToken,"ILLEGAL"),b+=a);return b}function r(){var a,b;for(a=nc++;nc<qc;){if(b=lc.charCodeAt(nc),92===b)return nc=a,q();if(!i(b))break;++nc}return lc.slice(a,nc)}function s(){var a,b,c;return a=nc,b=92===lc.charCodeAt(nc)?q():r(),c=1===b.length?bc.Identifier:m(b)?bc.Keyword:"null"===b?bc.NullLiteral:"true"===b||"false"===b?bc.BooleanLiteral:bc.Identifier,{type:c,value:b,lineNumber:oc,lineStart:pc,range:[a,nc]}}function t(){var a,b,c,d,e=nc,f=lc.charCodeAt(nc),g=lc[nc];switch(f){case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++nc,uc.tokenize&&(40===f?uc.openParenToken=uc.tokens.length:123===f&&(uc.openCurlyToken=uc.tokens.length)),{type:bc.Punctuator,value:String.fromCharCode(f),lineNumber:oc,lineStart:pc,range:[e,nc]};default:if(a=lc.charCodeAt(nc+1),61===a)switch(f){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:return nc+=2,{type:bc.Punctuator,value:String.fromCharCode(f)+String.fromCharCode(a),lineNumber:oc,lineStart:pc,range:[e,nc]};case 33:case 61:return nc+=2,61===lc.charCodeAt(nc)&&++nc,{type:bc.Punctuator,value:lc.slice(e,nc),lineNumber:oc,lineStart:pc,range:[e,nc]}}}return b=lc[nc+1],c=lc[nc+2],d=lc[nc+3],">"===g&&">"===b&&">"===c&&"="===d?(nc+=4,{type:bc.Punctuator,value:">>>=",lineNumber:oc,lineStart:pc,range:[e,nc]}):">"===g&&">"===b&&">"===c?(nc+=3,{type:bc.Punctuator,value:">>>",lineNumber:oc,lineStart:pc,range:[e,nc]}):"<"===g&&"<"===b&&"="===c?(nc+=3,{type:bc.Punctuator,value:"<<=",lineNumber:oc,lineStart:pc,range:[e,nc]}):">"===g&&">"===b&&"="===c?(nc+=3,{type:bc.Punctuator,value:">>=",lineNumber:oc,lineStart:pc,range:[e,nc]}):"."===g&&"."===b&&"."===c?(nc+=3,{type:bc.Punctuator,value:"...",lineNumber:oc,lineStart:pc,range:[e,nc]}):g===b&&"+-<>&|".indexOf(g)>=0?(nc+=2,{type:bc.Punctuator,value:g+b,lineNumber:oc,lineStart:pc,range:[e,nc]}):"="===g&&">"===b?(nc+=2,{type:bc.Punctuator,value:"=>",lineNumber:oc,lineStart:pc,range:[e,nc]}):"<>=!+-*%&|^/".indexOf(g)>=0?(++nc,{type:bc.Punctuator,value:g,lineNumber:oc,lineStart:pc,range:[e,nc]}):"."===g?(++nc,{type:bc.Punctuator,value:g,lineNumber:oc,lineStart:pc,range:[e,nc]}):void I({},gc.UnexpectedToken,"ILLEGAL")}function u(a){for(var b="";nc<qc&&d(lc[nc]);)b+=lc[nc++];return 0===b.length&&I({},gc.UnexpectedToken,"ILLEGAL"),h(lc.charCodeAt(nc))&&I({},gc.UnexpectedToken,"ILLEGAL"),{type:bc.NumericLiteral,value:parseInt("0x"+b,16),lineNumber:oc,lineStart:pc,range:[a,nc]}}function v(a,b){var d,f;for(e(a)?(f=!0,d="0"+lc[nc++]):(f=!1,++nc,d="");nc<qc&&e(lc[nc]);)d+=lc[nc++];return f||0!==d.length||I({},gc.UnexpectedToken,"ILLEGAL"),(h(lc.charCodeAt(nc))||c(lc.charCodeAt(nc)))&&I({},gc.UnexpectedToken,"ILLEGAL"),{type:bc.NumericLiteral,value:parseInt(d,8),octal:f,lineNumber:oc,lineStart:pc,range:[b,nc]}}function w(){var a,d,f;if(f=lc[nc],b(c(f.charCodeAt(0))||"."===f,"Numeric literal must start with a decimal digit or a decimal point"),d=nc,a="","."!==f){if(a=lc[nc++],f=lc[nc],"0"===a){if("x"===f||"X"===f)return++nc,u(d);if("b"===f||"B"===f){for(++nc,a="";nc<qc&&(f=lc[nc],"0"===f||"1"===f);)a+=lc[nc++];return 0===a.length&&I({},gc.UnexpectedToken,"ILLEGAL"),nc<qc&&(f=lc.charCodeAt(nc),(h(f)||c(f))&&I({},gc.UnexpectedToken,"ILLEGAL")),{type:bc.NumericLiteral,value:parseInt(a,2),lineNumber:oc,lineStart:pc,range:[d,nc]}}if("o"===f||"O"===f||e(f))return v(f,d);f&&c(f.charCodeAt(0))&&I({},gc.UnexpectedToken,"ILLEGAL")}for(;c(lc.charCodeAt(nc));)a+=lc[nc++];f=lc[nc]}if("."===f){for(a+=lc[nc++];c(lc.charCodeAt(nc));)a+=lc[nc++];f=lc[nc]}if("e"===f||"E"===f)if(a+=lc[nc++],f=lc[nc],"+"!==f&&"-"!==f||(a+=lc[nc++]),c(lc.charCodeAt(nc)))for(;c(lc.charCodeAt(nc));)a+=lc[nc++];else I({},gc.UnexpectedToken,"ILLEGAL");return h(lc.charCodeAt(nc))&&I({},gc.UnexpectedToken,"ILLEGAL"),{type:bc.NumericLiteral,value:parseFloat(a),lineNumber:oc,lineStart:pc,range:[d,nc]}}function x(){var a,c,d,f,h,i,j="",k=!1;for(a=lc[nc],b("'"===a||'"'===a,"String literal must starts with a quote"),c=nc,++nc;nc<qc;){if(d=lc[nc++],d===a){a="";break}if("\\"===d)if(d=lc[nc++],d&&g(d.charCodeAt(0)))++oc,"\r"===d&&"\n"===lc[nc]&&++nc;else switch(d){case"n":j+="\n";break;case"r":j+="\r";break;case"t":j+="\t";break;case"u":case"x":"{"===lc[nc]?(++nc,j+=p()):(i=nc,h=o(d),h?j+=h:(nc=i,j+=d));break;case"b":j+="\b";break;case"f":j+="\f";break;case"v":j+="\v";break;default:e(d)?(f="01234567".indexOf(d),0!==f&&(k=!0),nc<qc&&e(lc[nc])&&(k=!0,f=8*f+"01234567".indexOf(lc[nc++]),"0123".indexOf(d)>=0&&nc<qc&&e(lc[nc])&&(f=8*f+"01234567".indexOf(lc[nc++]))),j+=String.fromCharCode(f)):j+=d}else{if(g(d.charCodeAt(0)))break;j+=d}}return""!==a&&I({},gc.UnexpectedToken,"ILLEGAL"),{type:bc.StringLiteral,value:j,octal:k,lineNumber:oc,lineStart:pc,range:[c,nc]}}function y(){var a,b,c,d,f,h,i,j,k="";for(c=!1,d=!1,b=nc,++nc;nc<qc;){if(a=lc[nc++],"`"===a){d=!0,c=!0;break}if("$"===a){if("{"===lc[nc]){++nc,c=!0;break}k+=a}else if("\\"===a)if(a=lc[nc++],g(a.charCodeAt(0)))++oc,"\r"===a&&"\n"===lc[nc]&&++nc;else switch(a){case"n":k+="\n";break;case"r":k+="\r";break;case"t":k+="\t";break;case"u":case"x":"{"===lc[nc]?(++nc,k+=p()):(f=nc,h=o(a),h?k+=h:(nc=f,k+=a));break;case"b":k+="\b";break;case"f":k+="\f";break;case"v":k+="\v";break;default:e(a)?(i="01234567".indexOf(a),0!==i&&(j=!0),nc<qc&&e(lc[nc])&&(j=!0,i=8*i+"01234567".indexOf(lc[nc++]),"0123".indexOf(a)>=0&&nc<qc&&e(lc[nc])&&(i=8*i+"01234567".indexOf(lc[nc++]))),k+=String.fromCharCode(i)):k+=a}else g(a.charCodeAt(0))?(++oc,"\r"===a&&"\n"===lc[nc]&&++nc,k+="\n"):k+=a}return c||I({},gc.UnexpectedToken,"ILLEGAL"),{type:bc.Template,value:{cooked:k,raw:lc.slice(b+1,nc-(d?1:2))},tail:d,octal:j,lineNumber:oc,lineStart:pc,range:[b,nc]}}function z(a){
var b,c;return sc=null,n(),b=a.head?"`":"}",lc[nc]!==b&&I({},gc.UnexpectedToken,"ILLEGAL"),c=y(),F(),c}function A(){var a,c,d,e,f,h,j,k=!1,l=!1;for(sc=null,n(),d=nc,c=lc[nc],b("/"===c,"Regular expression literal must start with a slash"),a=lc[nc++];nc<qc;)if(c=lc[nc++],a+=c,k)"]"===c&&(k=!1);else if("\\"===c)c=lc[nc++],g(c.charCodeAt(0))&&I({},gc.UnterminatedRegExp),a+=c;else{if("/"===c){l=!0;break}"["===c?k=!0:g(c.charCodeAt(0))&&I({},gc.UnterminatedRegExp)}for(l||I({},gc.UnterminatedRegExp),e=a.substr(1,a.length-2),f="";nc<qc&&(c=lc[nc],i(c.charCodeAt(0)));)if(++nc,"\\"===c&&nc<qc)if(c=lc[nc],"u"===c)if(++nc,j=nc,c=o("u"))for(f+=c,a+="\\u";j<nc;++j)a+=lc[j];else nc=j,f+="u",a+="\\u";else a+="\\";else f+=c,a+=c;try{h=new RegExp(e,f)}catch(a){I({},gc.InvalidRegExp)}return F(),uc.tokenize?{type:bc.RegularExpression,value:h,lineNumber:oc,lineStart:pc,range:[d,nc]}:{literal:a,value:h,range:[d,nc]}}function B(a){return a.type===bc.Identifier||a.type===bc.Keyword||a.type===bc.BooleanLiteral||a.type===bc.NullLiteral}function C(){var a,b;if(a=uc.tokens[uc.tokens.length-1],!a)return A();if("Punctuator"===a.type){if(")"===a.value)return b=uc.tokens[uc.openParenToken-1],!b||"Keyword"!==b.type||"if"!==b.value&&"while"!==b.value&&"for"!==b.value&&"with"!==b.value?t():A();if("}"===a.value){if(uc.tokens[uc.openCurlyToken-3]&&"Keyword"===uc.tokens[uc.openCurlyToken-3].type){if(b=uc.tokens[uc.openCurlyToken-4],!b)return t()}else{if(!uc.tokens[uc.openCurlyToken-4]||"Keyword"!==uc.tokens[uc.openCurlyToken-4].type)return t();if(b=uc.tokens[uc.openCurlyToken-5],!b)return A()}return dc.indexOf(b.value)>=0?t():A()}return A()}return"Keyword"===a.type?A():t()}function D(){var a;return tc.inXJSChild||n(),nc>=qc?{type:bc.EOF,lineNumber:oc,lineStart:pc,range:[nc,nc]}:tc.inXJSChild?Eb():(a=lc.charCodeAt(nc),40===a||41===a||58===a?t():39===a||34===a?tc.inXJSTag?Db():x():tc.inXJSTag&&yb(a)?Ab():96===a?y():h(a)?s():46===a?c(lc.charCodeAt(nc+1))?w():t():c(a)?w():uc.tokenize&&47===a?C():t())}function E(){var a;return a=sc,nc=a.range[1],oc=a.lineNumber,pc=a.lineStart,sc=D(),nc=a.range[1],oc=a.lineNumber,pc=a.lineStart,a}function F(){var a,b,c;a=nc,b=oc,c=pc,sc=D(),nc=a,oc=b,pc=c}function G(){var a,b,c,d,e;return a="function"==typeof uc.advance?uc.advance:D,b=nc,c=oc,d=pc,null===sc&&(sc=a()),nc=sc.range[1],oc=sc.lineNumber,pc=sc.lineStart,e=a(),nc=b,oc=c,pc=d,e}function H(){var a,b,c,d;return a=nc,b=oc,c=pc,n(),d=oc!==b,nc=a,oc=b,pc=c,d}function I(a,c){var d,e=Array.prototype.slice.call(arguments,2),f=c.replace(/%(\d)/g,function(a,c){return b(c<e.length,"Message reference must be in range"),e[c]});throw"number"==typeof a.lineNumber?(d=new Error("Line "+a.lineNumber+": "+f),d.index=a.range[0],d.lineNumber=a.lineNumber,d.column=a.range[0]-pc+1):(d=new Error("Line "+oc+": "+f),d.index=nc,d.lineNumber=oc,d.column=nc-pc+1),d.description=f,d}function J(){try{I.apply(null,arguments)}catch(a){if(!uc.errors)throw a;uc.errors.push(a)}}function K(a){if(a.type===bc.EOF&&I(a,gc.UnexpectedEOS),a.type===bc.NumericLiteral&&I(a,gc.UnexpectedNumber),a.type!==bc.StringLiteral&&a.type!==bc.XJSText||I(a,gc.UnexpectedString),a.type===bc.Identifier&&I(a,gc.UnexpectedIdentifier),a.type===bc.Keyword){if(j(a.value))I(a,gc.UnexpectedReserved);else if(mc&&k(a.value))return void J(a,gc.StrictReservedWord);I(a,gc.UnexpectedToken,a.value)}a.type===bc.Template&&I(a,gc.UnexpectedTemplate,a.value.raw),I(a,gc.UnexpectedToken,a.value)}function L(a){var b=E();b.type===bc.Punctuator&&b.value===a||K(b)}function M(a){var b=E();b.type===bc.Keyword&&b.value===a||K(b)}function N(a){return sc.type===bc.Punctuator&&sc.value===a}function O(a){return sc.type===bc.Keyword&&sc.value===a}function P(a){return sc.type===bc.Identifier&&sc.value===a}function Q(){var a;return sc.type===bc.Punctuator&&(a=sc.value,"="===a||"*="===a||"/="===a||"%="===a||"+="===a||"-="===a||"<<="===a||">>="===a||">>>="===a||"&="===a||"^="===a||"|="===a)}function R(){var a;return 59===lc.charCodeAt(nc)?void E():(a=oc,n(),oc===a?N(";")?void E():void(sc.type===bc.EOF||N("}")||K(sc)):void 0)}function S(a){return a.type===ec.Identifier||a.type===ec.MemberExpression}function T(a){return S(a)||a.type===ec.ObjectPattern||a.type===ec.ArrayPattern}function U(){var a,b=[],c=[],d=null,e=!0;for(L("[");!N("]");)"for"===sc.value&&sc.type===bc.Keyword?(e||I({},gc.ComprehensionError),O("for"),a=Qa({ignoreBody:!0}),a.of=a.type===ec.ForOfStatement,a.type=ec.ComprehensionBlock,a.left.kind&&I({},gc.ComprehensionError),c.push(a)):"if"===sc.value&&sc.type===bc.Keyword?(e||I({},gc.ComprehensionError),M("if"),L("("),d=ua(),L(")")):","===sc.value&&sc.type===bc.Punctuator?(e=!1,E(),b.push(null)):(a=da(),b.push(a),a&&a.type===ec.SpreadElement?N("]")||I({},gc.ElementAfterSpreadElement):N("]")||O("for")||O("if")||(L(","),e=!1));return L("]"),d&&!c.length&&I({},gc.ComprehensionRequiresBlock),c.length?(1!==b.length&&I({},gc.ComprehensionError),{type:ec.ComprehensionExpression,filter:d,blocks:c,body:b[0]}):rc.createArrayExpression(b)}function V(a){var b,c,d,e,f;return b=mc,c=tc.yieldAllowed,tc.yieldAllowed=a.generator,d=a.params||[],e=a.defaults||[],f=ab(),a.name&&mc&&l(d[0].name)&&J(a.name,gc.StrictParamName),tc.yieldAllowed&&!tc.yieldFound&&J({},gc.NoYieldInGenerator),mc=b,tc.yieldAllowed=c,rc.createFunctionExpression(null,d,e,f,a.rest||null,a.generator,f.type!==ec.BlockStatement,a.returnTypeAnnotation)}function W(a){var b,c,d;return b=mc,mc=!0,c=eb(),c.stricted&&J(c.stricted,c.message),d=V({params:c.params,defaults:c.defaults,rest:c.rest,generator:a.generator,returnTypeAnnotation:c.returnTypeAnnotation}),mc=b,d}function X(){var a=E();return a.type===bc.StringLiteral||a.type===bc.NumericLiteral?(mc&&a.octal&&J(a,gc.StrictOctalLiteral),rc.createLiteral(a)):rc.createIdentifier(a.value)}function Y(){var a,b,c,d;return a=sc,a.type===bc.Identifier?(c=X(),"get"!==a.value||N(":")||N("(")?"set"!==a.value||N(":")||N("(")?N(":")?(E(),rc.createProperty("init",c,ta(),!1,!1)):N("(")?rc.createProperty("init",c,W({generator:!1}),!0,!1):rc.createProperty("init",c,c,!1,!0):(b=X(),L("("),a=sc,d=[za()],L(")"),rc.createProperty("set",b,V({params:d,generator:!1,name:a}),!1,!1)):(b=X(),L("("),L(")"),rc.createProperty("get",b,V({generator:!1}),!1,!1))):a.type===bc.EOF||a.type===bc.Punctuator?(N("*")||K(a),E(),c=X(),N("(")||K(E()),rc.createProperty("init",c,W({generator:!0}),!0,!1)):(b=X(),N(":")?(E(),rc.createProperty("init",b,ta(),!1,!1)):N("(")?rc.createProperty("init",b,W({generator:!1}),!0,!1):void K(E()))}function Z(){var a,b,c,d,e=[],f={},g=String;for(L("{");!N("}");)a=Y(),b=a.key.type===ec.Identifier?a.key.name:g(a.key.value),d="init"===a.kind?fc.Data:"get"===a.kind?fc.Get:fc.Set,c="$"+b,Object.prototype.hasOwnProperty.call(f,c)?(f[c]===fc.Data?mc&&d===fc.Data?J({},gc.StrictDuplicateProperty):d!==fc.Data&&J({},gc.AccessorDataProperty):d===fc.Data?J({},gc.AccessorDataProperty):f[c]&d&&J({},gc.AccessorGetSet),f[c]|=d):f[c]=d,e.push(a),N("}")||L(",");return L("}"),rc.createObjectExpression(e)}function $(a){var b=z(a);return mc&&b.octal&&I(b,gc.StrictOctalLiteral),rc.createTemplateElement({raw:b.value.raw,cooked:b.value.cooked},b.tail)}function _(){var a,b,c;for(a=$({head:!0}),b=[a],c=[];!a.tail;)c.push(ua()),a=$({head:!1}),b.push(a);return rc.createTemplateLiteral(b,c)}function aa(){var a;return L("("),++tc.parenthesizedCount,a=ua(),L(")"),a}function ba(){var a,b;if(b=sc,a=sc.type,a===bc.Identifier)return E(),rc.createIdentifier(b.value);if(a===bc.StringLiteral||a===bc.NumericLiteral)return mc&&sc.octal&&J(sc,gc.StrictOctalLiteral),rc.createLiteral(E());if(a===bc.Keyword){if(O("this"))return E(),rc.createThisExpression();if(O("function"))return gb();if(O("class"))return lb();if(O("super"))return E(),rc.createIdentifier("super")}return a===bc.BooleanLiteral?(b=E(),b.value="true"===b.value,rc.createLiteral(b)):a===bc.NullLiteral?(b=E(),b.value=null,rc.createLiteral(b)):N("[")?U():N("{")?Z():N("(")?aa():N("/")||N("/=")?rc.createLiteral(A()):a===bc.Template?_():N("<")?Nb():K(E())}function ca(){var a,b=[];if(L("("),!N(")"))for(;nc<qc&&(a=da(),b.push(a),!N(")"));)a.type===ec.SpreadElement&&I({},gc.ElementAfterSpreadElement),L(",");return L(")"),b}function da(){return N("...")?(E(),rc.createSpreadElement(ta())):ta()}function ea(){var a=E();return B(a)||K(a),rc.createIdentifier(a.value)}function fa(){return L("."),ea()}function ga(){var a;return L("["),a=ua(),L("]"),a}function ha(){var a,b;return M("new"),a=ja(),b=N("(")?ca():[],rc.createNewExpression(a,b)}function ia(){var a,b;for(a=O("new")?ha():ba();N(".")||N("[")||N("(")||sc.type===bc.Template;)N("(")?(b=ca(),a=rc.createCallExpression(a,b)):a=N("[")?rc.createMemberExpression("[",a,ga()):N(".")?rc.createMemberExpression(".",a,fa()):rc.createTaggedTemplateExpression(a,_());return a}function ja(){var a;for(a=O("new")?ha():ba();N(".")||N("[")||sc.type===bc.Template;)a=N("[")?rc.createMemberExpression("[",a,ga()):N(".")?rc.createMemberExpression(".",a,fa()):rc.createTaggedTemplateExpression(a,_());return a}function ka(){var a=ia(),b=sc;return sc.type!==bc.Punctuator?a:(!N("++")&&!N("--")||H()||(mc&&a.type===ec.Identifier&&l(a.name)&&J({},gc.StrictLHSPostfix),S(a)||I({},gc.InvalidLHSInAssignment),b=E(),a=rc.createPostfixExpression(b.value,a)),a)}function la(){var a,b;return sc.type!==bc.Punctuator&&sc.type!==bc.Keyword?ka():N("++")||N("--")?(a=E(),b=la(),mc&&b.type===ec.Identifier&&l(b.name)&&J({},gc.StrictLHSPrefix),S(b)||I({},gc.InvalidLHSInAssignment),rc.createUnaryExpression(a.value,b)):N("+")||N("-")||N("~")||N("!")?(a=E(),b=la(),rc.createUnaryExpression(a.value,b)):O("delete")||O("void")||O("typeof")?(a=E(),b=la(),b=rc.createUnaryExpression(a.value,b),mc&&"delete"===b.operator&&b.argument.type===ec.Identifier&&J({},gc.StrictDelete),b):ka()}function ma(a,b){var c=0;if(a.type!==bc.Punctuator&&a.type!==bc.Keyword)return 0;switch(a.value){case"||":c=1;break;case"&&":c=2;break;case"|":c=3;break;case"^":c=4;break;case"&":c=5;break;case"==":case"!=":case"===":case"!==":c=6;break;case"<":case">":case"<=":case">=":case"instanceof":c=7;break;case"in":c=b?7:0;break;case"<<":case">>":case">>>":c=8;break;case"+":case"-":c=9;break;case"*":case"/":case"%":c=11}return c}function na(){var a,b,c,d,e,f,g,h,i;if(d=tc.allowIn,tc.allowIn=!0,a=la(),b=sc,c=ma(b,d),0===c)return a;for(b.prec=c,E(),e=[a,b,la()];(c=ma(sc,d))>0;){for(;e.length>2&&c<=e[e.length-2].prec;)f=e.pop(),g=e.pop().value,h=e.pop(),e.push(rc.createBinaryExpression(g,h,f));b=E(),b.prec=c,e.push(b),e.push(la())}for(tc.allowIn=d,i=e.length-1,a=e[i];i>1;)a=rc.createBinaryExpression(e[i-1].value,e[i-2],a),i-=2;return a}function oa(){var a,b,c,d;return a=na(),N("?")&&(E(),b=tc.allowIn,tc.allowIn=!0,c=ta(),tc.allowIn=b,L(":"),d=ta(),a=rc.createConditionalExpression(a,c,d)),a}function pa(a){var b,c,d,e;if(a.type===ec.ObjectExpression)for(a.type=ec.ObjectPattern,b=0,c=a.properties.length;b<c;b+=1)d=a.properties[b],"init"!==d.kind&&I({},gc.InvalidLHSInAssignment),pa(d.value);else if(a.type===ec.ArrayExpression)for(a.type=ec.ArrayPattern,b=0,c=a.elements.length;b<c;b+=1)e=a.elements[b],e&&pa(e);else a.type===ec.Identifier?l(a.name)&&I({},gc.InvalidLHSInAssignment):a.type===ec.SpreadElement?(pa(a.argument),a.argument.type===ec.ObjectPattern&&I({},gc.ObjectPatternAsSpread)):a.type!==ec.MemberExpression&&a.type!==ec.CallExpression&&a.type!==ec.NewExpression&&I({},gc.InvalidLHSInAssignment)}function qa(a,b){var c,d,e,f;if(b.type===ec.ObjectExpression)for(b.type=ec.ObjectPattern,c=0,d=b.properties.length;c<d;c+=1)e=b.properties[c],"init"!==e.kind&&I({},gc.InvalidLHSInFormalsList),qa(a,e.value);else if(b.type===ec.ArrayExpression)for(b.type=ec.ArrayPattern,c=0,d=b.elements.length;c<d;c+=1)f=b.elements[c],f&&qa(a,f);else b.type===ec.Identifier?cb(a,b,b.name):b.type!==ec.MemberExpression&&I({},gc.InvalidLHSInFormalsList)}function ra(a){var c,d,e,f,g,h,i,j;for(f=[],g=[],h=0,j=null,i={paramSet:{}},c=0,d=a.length;c<d;c+=1)if(e=a[c],e.type===ec.Identifier)f.push(e),g.push(null),cb(i,e,e.name);else if(e.type===ec.ObjectExpression||e.type===ec.ArrayExpression)qa(i,e),f.push(e),g.push(null);else if(e.type===ec.SpreadElement)b(c===d-1,"It is guaranteed that SpreadElement is last element by parseExpression"),qa(i,e.argument),j=e.argument;else{if(e.type!==ec.AssignmentExpression)return null;f.push(e.left),g.push(e.right),++h,cb(i,e.left,e.left.name)}return i.message===gc.StrictParamDupe&&I(mc?i.stricted:i.firstRestricted,i.message),0===h&&(g=[]),{params:f,defaults:g,rest:j,stricted:i.stricted,firstRestricted:i.firstRestricted,message:i.message}}function sa(a){var b,c,d;return L("=>"),b=mc,c=tc.yieldAllowed,tc.yieldAllowed=!1,d=ab(),mc&&a.firstRestricted&&I(a.firstRestricted,a.message),mc&&a.stricted&&J(a.stricted,a.message),mc=b,tc.yieldAllowed=c,rc.createArrowFunctionExpression(a.params,a.defaults,d,a.rest,d.type!==ec.BlockStatement)}function ta(){var a,b,c,d;return O("yield")?hb():(d=tc.parenthesizedCount,N("(")&&(b=G(),b.type===bc.Punctuator&&")"===b.value||"..."===b.value)?(c=eb(),N("=>")||K(E()),sa(c)):(b=sc,a=oa(),N("=>")&&(tc.parenthesizedCount===d||tc.parenthesizedCount===d+1)&&(a.type===ec.Identifier?c=ra([a]):a.type===ec.SequenceExpression&&(c=ra(a.expressions)),c)?sa(c):(Q()&&(mc&&a.type===ec.Identifier&&l(a.name)&&J(b,gc.StrictLHSAssignment),!N("=")||a.type!==ec.ObjectExpression&&a.type!==ec.ArrayExpression?S(a)||I({},gc.InvalidLHSInAssignment):pa(a),a=rc.createAssignmentExpression(E().value,a,ta())),a)))}function ua(){var a,b,c,d,e,f;if(f=tc.parenthesizedCount,a=ta(),b=[a],N(",")){for(;nc<qc&&N(",");)if(E(),a=da(),b.push(a),a.type===ec.SpreadElement){e=!0,N(")")||I({},gc.ElementAfterSpreadElement);break}c=rc.createSequenceExpression(b)}if(N("=>")){if((tc.parenthesizedCount===f||tc.parenthesizedCount===f+1)&&(a=a.type===ec.SequenceExpression?a.expressions:b,d=ra(a)))return sa(d);K(E())}return e&&"=>"!==G().value&&I({},gc.IllegalSpread),c||a}function va(){for(var a,b=[];nc<qc&&!N("}")&&(a=ob(),"undefined"!=typeof a);)b.push(a);return b}function wa(){var a;return L("{"),a=va(),L("}"),rc.createBlockStatement(a)}function xa(a){var b=null,c=null,d=null,e=!1;if(a||L(":"),N("?")&&(E(),e=!0),sc.type===bc.Identifier&&(b=ya()),N("(")){for(E(),c=[];sc.type===bc.Identifier||N("?");)c.push(xa(!0)),N(")")||L(",");L(")"),L("=>"),O("void")?E():d=xa(!0)}return rc.createTypeAnnotation(b,c,d,e)}function ya(){var a=E();return a.type!==bc.Identifier&&K(a),rc.createIdentifier(a.value)}function za(){var a=ya();return N(":")?rc.createTypeAnnotatedIdentifier(a,xa()):a}function Aa(a){var b,c=null;return N("{")?(b=Z(),pa(b)):N("[")?(b=U(),pa(b)):(b=tc.allowKeyword?ea():za(),mc&&l(b.name)&&J({},gc.StrictVarName)),"const"===a?(N("=")||I({},gc.NoUnintializedConst),L("="),c=ta()):N("=")&&(E(),c=ta()),rc.createVariableDeclarator(b,c)}function Ba(a){var b=[];do{if(b.push(Aa(a)),!N(","))break;E()}while(nc<qc);return b}function Ca(){var a;return M("var"),a=Ba(),R(),rc.createVariableDeclaration(a,"var")}function Da(a){var b;return M(a),b=Ba(a),R(),rc.createVariableDeclaration(b,a)}function Ea(){var a,b,c;switch(E(),H()&&I({},gc.NewlineAfterModule),sc.type){case bc.StringLiteral:a=ba(),c=tb(),b=null;break;case bc.Identifier:a=ya(),c=null,P("from")||K(E()),E(),b=ba(),b.type!==ec.Literal&&I({},gc.InvalidModuleSpecifier)}return R(),rc.createModuleDeclaration(a,b,c)}function Fa(){return L("*"),rc.createExportBatchSpecifier()}function Ga(){var a,b=null;return a=ya(),P("as")&&(E(),b=ea()),rc.createExportSpecifier(a,b)}function Ha(){var a,b,c,d;if(M("export"),sc.type===bc.Keyword)switch(sc.value){case"let":case"const":case"var":case"class":case"function":return rc.createExportDeclaration(ob(),null,null)}if(B(sc))return a=tc.allowKeyword,tc.allowKeyword=!0,b=Ba("let"),tc.allowKeyword=a,rc.createExportDeclaration(b,null,null);if(d=[],c=null,N("*"))d.push(Fa());else{L("{");do d.push(Ga());while(N(",")&&E());L("}")}return P("from")&&(E(),c=ba(),c.type!==ec.Literal&&I({},gc.InvalidModuleSpecifier)),R(),rc.createExportDeclaration(null,d,c)}function Ia(){var a,b,c;if(M("import"),a=[],B(sc))b="default",a.push(Ja()),P("from")||I({},gc.NoFromAfterImport),E();else if(N("{")){b="named",E();do a.push(Ja());while(N(",")&&E());L("}"),P("from")||I({},gc.NoFromAfterImport),E()}return c=ba(),c.type!==ec.Literal&&I({},gc.InvalidModuleSpecifier),R(),rc.createImportDeclaration(a,b,c)}function Ja(){var a,b=null;return a=ea(),P("as")&&(E(),b=ya()),rc.createImportSpecifier(a,b)}function Ka(){return L(";"),rc.createEmptyStatement()}function La(){var a=ua();return R(),rc.createExpressionStatement(a)}function Ma(){var a,b,c;return M("if"),L("("),a=ua(),L(")"),b=_a(),O("else")?(E(),c=_a()):c=null,rc.createIfStatement(a,b,c)}function Na(){var a,b,c;return M("do"),c=tc.inIteration,tc.inIteration=!0,a=_a(),tc.inIteration=c,M("while"),L("("),b=ua(),L(")"),N(";")&&E(),rc.createDoWhileStatement(a,b)}function Oa(){var a,b,c;return M("while"),L("("),a=ua(),L(")"),c=tc.inIteration,tc.inIteration=!0,b=_a(),tc.inIteration=c,rc.createWhileStatement(a,b)}function Pa(){var a=E(),b=Ba();return rc.createVariableDeclaration(b,a.value)}function Qa(a){var b,c,d,e,f,g,h,i;return b=c=d=null,M("for"),P("each")&&I({},gc.EachNotAllowed),L("("),N(";")?E():(O("var")||O("let")||O("const")?(tc.allowIn=!1,b=Pa(),tc.allowIn=!0,1===b.declarations.length&&(O("in")||P("of"))&&(h=sc,("in"!==h.value&&"var"===b.kind||!b.declarations[0].init)&&(E(),e=b,f=ua(),b=null))):(tc.allowIn=!1,b=ua(),tc.allowIn=!0,P("of")?(h=E(),e=b,f=ua(),b=null):O("in")&&(T(b)||I({},gc.InvalidLHSInForIn),h=E(),e=b,f=ua(),b=null)),"undefined"==typeof e&&L(";")),"undefined"==typeof e&&(N(";")||(c=ua()),L(";"),N(")")||(d=ua())),L(")"),i=tc.inIteration,tc.inIteration=!0,void 0!==a&&a.ignoreBody||(g=_a()),tc.inIteration=i,"undefined"==typeof e?rc.createForStatement(b,c,d,g):"in"===h.value?rc.createForInStatement(e,f,g):rc.createForOfStatement(e,f,g)}function Ra(){var a,b=null;return M("continue"),59===lc.charCodeAt(nc)?(E(),tc.inIteration||I({},gc.IllegalContinue),rc.createContinueStatement(null)):H()?(tc.inIteration||I({},gc.IllegalContinue),rc.createContinueStatement(null)):(sc.type===bc.Identifier&&(b=ya(),a="$"+b.name,Object.prototype.hasOwnProperty.call(tc.labelSet,a)||I({},gc.UnknownLabel,b.name)),R(),null!==b||tc.inIteration||I({},gc.IllegalContinue),rc.createContinueStatement(b))}function Sa(){var a,b=null;return M("break"),59===lc.charCodeAt(nc)?(E(),tc.inIteration||tc.inSwitch||I({},gc.IllegalBreak),rc.createBreakStatement(null)):H()?(tc.inIteration||tc.inSwitch||I({},gc.IllegalBreak),rc.createBreakStatement(null)):(sc.type===bc.Identifier&&(b=ya(),a="$"+b.name,Object.prototype.hasOwnProperty.call(tc.labelSet,a)||I({},gc.UnknownLabel,b.name)),R(),null!==b||tc.inIteration||tc.inSwitch||I({},gc.IllegalBreak),rc.createBreakStatement(b))}function Ta(){var a=null;return M("return"),tc.inFunctionBody||J({},gc.IllegalReturn),32===lc.charCodeAt(nc)&&h(lc.charCodeAt(nc+1))?(a=ua(),R(),rc.createReturnStatement(a)):H()?rc.createReturnStatement(null):(N(";")||N("}")||sc.type===bc.EOF||(a=ua()),R(),rc.createReturnStatement(a))}function Ua(){var a,b;return mc&&J({},gc.StrictModeWith),M("with"),L("("),a=ua(),L(")"),b=_a(),rc.createWithStatement(a,b)}function Va(){var a,b,c=[];for(O("default")?(E(),a=null):(M("case"),a=ua()),L(":");nc<qc&&!(N("}")||O("default")||O("case"))&&(b=ob(),"undefined"!=typeof b);)c.push(b);return rc.createSwitchCase(a,c)}function Wa(){var a,b,c,d,e;if(M("switch"),L("("),a=ua(),L(")"),L("{"),b=[],N("}"))return E(),rc.createSwitchStatement(a,b);for(d=tc.inSwitch,tc.inSwitch=!0,e=!1;nc<qc&&!N("}");)c=Va(),null===c.test&&(e&&I({},gc.MultipleDefaultsInSwitch),e=!0),b.push(c);return tc.inSwitch=d,L("}"),rc.createSwitchStatement(a,b)}function Xa(){var a;return M("throw"),H()&&I({},gc.NewlineAfterThrow),a=ua(),R(),rc.createThrowStatement(a)}function Ya(){var a,b;return M("catch"),L("("),N(")")&&K(sc),a=ua(),mc&&a.type===ec.Identifier&&l(a.name)&&J({},gc.StrictCatchVariable),L(")"),b=wa(),rc.createCatchClause(a,b)}function Za(){var a,b=[],c=null;return M("try"),a=wa(),O("catch")&&b.push(Ya()),O("finally")&&(E(),c=wa()),0!==b.length||c||I({},gc.NoCatchOrFinally),rc.createTryStatement(a,[],b,c)}function $a(){return M("debugger"),R(),rc.createDebuggerStatement()}function _a(){var a,b,c,d=sc.type;if(d===bc.EOF&&K(sc),d===bc.Punctuator)switch(sc.value){case";":return Ka();case"{":return wa();case"(":return La()}if(d===bc.Keyword)switch(sc.value){case"break":return Sa();case"continue":return Ra();case"debugger":return $a();case"do":return Na();case"for":return Qa();case"function":return fb();case"class":return mb();case"if":return Ma();case"return":return Ta();case"switch":return Wa();case"throw":return Xa();case"try":return Za();case"var":return Ca();case"while":return Oa();case"with":return Ua()}return a=ua(),a.type===ec.Identifier&&N(":")?(E(),c="$"+a.name,Object.prototype.hasOwnProperty.call(tc.labelSet,c)&&I({},gc.Redeclaration,"Label",a.name),tc.labelSet[c]=!0,b=_a(),delete tc.labelSet[c],rc.createLabeledStatement(a,b)):(R(),rc.createExpressionStatement(a))}function ab(){return N("{")?bb():ta()}function bb(){var a,b,c,d,e,f,g,h,i,j=[];for(L("{");nc<qc&&sc.type===bc.StringLiteral&&(b=sc,a=ob(),j.push(a),a.expression.type===ec.Literal);)c=lc.slice(b.range[0]+1,b.range[1]-1),"use strict"===c?(mc=!0,d&&J(d,gc.StrictOctalLiteral)):!d&&b.octal&&(d=b);for(e=tc.labelSet,f=tc.inIteration,g=tc.inSwitch,h=tc.inFunctionBody,i=tc.parenthesizedCount,tc.labelSet={},tc.inIteration=!1,tc.inSwitch=!1,tc.inFunctionBody=!0,tc.parenthesizedCount=0;nc<qc&&!N("}")&&(a=ob(),"undefined"!=typeof a);)j.push(a);return L("}"),tc.labelSet=e,tc.inIteration=f,tc.inSwitch=g,tc.inFunctionBody=h,tc.parenthesizedCount=i,rc.createBlockStatement(j)}function cb(a,b,c){var d="$"+c;mc?(l(c)&&(a.stricted=b,a.message=gc.StrictParamName),Object.prototype.hasOwnProperty.call(a.paramSet,d)&&(a.stricted=b,a.message=gc.StrictParamDupe)):a.firstRestricted||(l(c)?(a.firstRestricted=b,a.message=gc.StrictParamName):k(c)?(a.firstRestricted=b,a.message=gc.StrictReservedWord):Object.prototype.hasOwnProperty.call(a.paramSet,d)&&(a.firstRestricted=b,a.message=gc.StrictParamDupe)),a.paramSet[d]=!0}function db(a){var b,c,d,e;return b=sc,"..."===b.value&&(b=E(),c=!0),N("[")?(d=U(),qa(a,d)):N("{")?(c&&I({},gc.ObjectPatternAsRestParameter),d=Z(),qa(a,d)):(d=c?ya():za(),cb(a,b,b.value),N("=")&&(c&&J(sc,gc.DefaultRestParameter),E(),e=ta(),++a.defaultCount)),c?(N(")")||I({},gc.ParameterAfterRestParameter),a.rest=d,!1):(a.params.push(d),a.defaults.push(e),!N(")"))}function eb(a){var b;if(b={params:[],defaultCount:0,defaults:[],rest:null,firstRestricted:a},L("("),!N(")"))for(b.paramSet={};nc<qc&&db(b);)L(",");return L(")"),0===b.defaultCount&&(b.defaults=[]),N(":")&&(b.returnTypeAnnotation=xa()),b}function fb(){var a,b,c,d,e,f,g,h,i;return M("function"),i=!1,N("*")&&(E(),i=!0),c=sc,a=ya(),mc?l(c.value)&&J(c,gc.StrictFunctionName):l(c.value)?(e=c,f=gc.StrictFunctionName):k(c.value)&&(e=c,f=gc.StrictReservedWord),d=eb(e),e=d.firstRestricted,d.message&&(f=d.message),g=mc,h=tc.yieldAllowed,tc.yieldAllowed=i,b=bb(),mc&&e&&I(e,f),mc&&d.stricted&&J(d.stricted,f),tc.yieldAllowed&&!tc.yieldFound&&J({},gc.NoYieldInGenerator),mc=g,tc.yieldAllowed=h,rc.createFunctionDeclaration(a,d.params,d.defaults,b,d.rest,i,!1,d.returnTypeAnnotation)}function gb(){var a,b,c,d,e,f,g,h,i=null;return M("function"),h=!1,N("*")&&(E(),h=!0),N("(")||(a=sc,i=ya(),mc?l(a.value)&&J(a,gc.StrictFunctionName):l(a.value)?(b=a,c=gc.StrictFunctionName):k(a.value)&&(b=a,c=gc.StrictReservedWord)),d=eb(b),b=d.firstRestricted,d.message&&(c=d.message),f=mc,g=tc.yieldAllowed,tc.yieldAllowed=h,e=bb(),mc&&b&&I(b,c),mc&&d.stricted&&J(d.stricted,c),tc.yieldAllowed&&!tc.yieldFound&&J({},gc.NoYieldInGenerator),mc=f,tc.yieldAllowed=g,rc.createFunctionExpression(i,d.params,d.defaults,e,d.rest,h,!1,d.returnTypeAnnotation)}function hb(){var a,b;return M("yield"),tc.yieldAllowed||J({},gc.IllegalYield),a=!1,N("*")&&(E(),a=!0),b=ta(),tc.yieldFound=!0,rc.createYieldExpression(b,a)}function ib(a){var b,c,d,e,f=!1;return"static"===sc.value?(e=kc.static,E()):e=kc.prototype,N("*")?(E(),rc.createMethodDefinition(e,"",X(),W({generator:!0}))):(b=sc,c=X(),"get"!==b.value||N("(")?"set"!==b.value||N("(")?(a[e].hasOwnProperty(c.name)?I(c,gc.IllegalDuplicateClassProperty):a[e][c.name]={},a[e][c.name].data=!0,rc.createMethodDefinition(e,"",c,W({generator:!1}))):(c=X(),a[e].hasOwnProperty(c.name)?(f=void 0===a[e][c.name].set&&void 0===a[e][c.name].data&&void 0!==a[e][c.name].get,f||I(c,gc.IllegalDuplicateClassProperty)):a[e][c.name]={},a[e][c.name].set=!0,L("("),b=sc,d=[za()],L(")"),rc.createMethodDefinition(e,"set",c,V({params:d,generator:!1,name:b}))):(c=X(),a[e].hasOwnProperty(c.name)?(f=void 0===a[e][c.name].get&&void 0===a[e][c.name].data&&void 0!==a[e][c.name].set,f||I(c,gc.IllegalDuplicateClassProperty)):a[e][c.name]={},a[e][c.name].get=!0,L("("),L(")"),rc.createMethodDefinition(e,"get",c,V({generator:!1}))))}function jb(a){return N(";")?void E():ib(a)}function kb(){var a,b=[],c={};for(c[kc.static]={},c[kc.prototype]={},L("{");nc<qc&&!N("}");)a=jb(c),"undefined"!=typeof a&&b.push(a);return L("}"),rc.createClassBody(b)}function lb(){var a,b,c=null;return M("class"),O("extends")||N("{")||(a=ya()),O("extends")&&(M("extends"),b=tc.yieldAllowed,tc.yieldAllowed=!1,c=ta(),tc.yieldAllowed=b),rc.createClassExpression(a,c,kb())}function mb(){var a,b,c=null;return M("class"),a=ya(),O("extends")&&(M("extends"),b=tc.yieldAllowed,tc.yieldAllowed=!1,c=ta(),tc.yieldAllowed=b),rc.createClassDeclaration(a,c,kb())}function nb(){var a;return!!P("module")&&(a=G(),a.type===bc.StringLiteral||a.type===bc.Identifier)}function ob(){if(sc.type===bc.Keyword)switch(sc.value){case"const":case"let":return Da(sc.value);case"function":return fb();case"export":return Ha();case"import":return Ia();default:return _a()}if(nb()&&I({},gc.NestedModule),sc.type!==bc.EOF)return _a()}function pb(){if(sc.type===bc.Keyword)switch(sc.value){case"export":return Ha();case"import":return Ia()}return nb()?Ea():ob()}function qb(){for(var a,b,c,d,e=[];nc<qc&&(b=sc,b.type===bc.StringLiteral)&&(a=pb(),e.push(a),a.expression.type===ec.Literal);)c=lc.slice(b.range[0]+1,b.range[1]-1),"use strict"===c?(mc=!0,d&&J(d,gc.StrictOctalLiteral)):!d&&b.octal&&(d=b);for(;nc<qc&&(a=pb(),"undefined"!=typeof a);)e.push(a);return e}function rb(){return ob()}function sb(){for(var a,b=[];nc<qc&&!N("}")&&(a=rb(),"undefined"!=typeof a);)b.push(a);return b}function tb(){var a;return L("{"),a=sb(),L("}"),rc.createBlockStatement(a)}function ub(){var a;return mc=!1,F(),a=qb(),rc.createProgram(a)}function vb(a,c,d,e,f){b("number"==typeof d,"Comment must have valid position"),uc.comments.length>0&&uc.comments[uc.comments.length-1].range[1]>d||uc.comments.push({type:a,value:c,range:[d,e],loc:f})}function wb(){var a,b,c,d,e,h;for(a="",e=!1,h=!1;nc<qc;)if(b=lc[nc],h)b=lc[nc++],g(b.charCodeAt(0))?(c.end={line:oc,column:nc-pc-1},h=!1,vb("Line",a,d,nc-1,c),"\r"===b&&"\n"===lc[nc]&&++nc,++oc,pc=nc,a=""):nc>=qc?(h=!1,a+=b,c.end={line:oc,column:qc-pc},vb("Line",a,d,qc,c)):a+=b;else if(e)g(b.charCodeAt(0))?("\r"===b&&"\n"===lc[nc+1]?(++nc,a+="\r\n"):a+=b,++oc,++nc,pc=nc,nc>=qc&&I({},gc.UnexpectedToken,"ILLEGAL")):(b=lc[nc++],nc>=qc&&I({},gc.UnexpectedToken,"ILLEGAL"),a+=b,"*"===b&&(b=lc[nc],"/"===b&&(a=a.substr(0,a.length-1),e=!1,++nc,c.end={line:oc,column:nc-pc},vb("Block",a,d,nc,c),a="")));else if("/"===b)if(b=lc[nc+1],"/"===b)c={start:{line:oc,column:nc-pc}},d=nc,nc+=2,h=!0,nc>=qc&&(c.end={line:oc,column:nc-pc},h=!1,vb("Line",a,d,nc,c));else{if("*"!==b)break;d=nc,nc+=2,e=!0,c={start:{line:oc,column:nc-pc-2}},nc>=qc&&I({},gc.UnexpectedToken,"ILLEGAL")}else if(f(b.charCodeAt(0)))++nc;else{if(!g(b.charCodeAt(0)))break;++nc,"\r"===b&&"\n"===lc[nc]&&++nc,++oc,pc=nc}}function xb(){var a,b,c,d=[];for(a=0;a<uc.comments.length;++a)b=uc.comments[a],c={type:b.type,value:b.value},uc.range&&(c.range=b.range),uc.loc&&(c.loc=b.loc),d.push(c);uc.comments=d}function yb(a){return 92!==a&&h(a)}function zb(a){return 92!==a&&(45===a||i(a))}function Ab(){var a,b,c,d="";for(b=nc;nc<qc&&(a=lc.charCodeAt(nc),zb(a));)d+=lc[nc++];if(58===a)for(++nc,c=d,d="";nc<qc&&(a=lc.charCodeAt(nc),zb(a));)d+=lc[nc++];return d||I({},gc.InvalidXJSTagName),{type:bc.XJSIdentifier,value:d,namespace:c,lineNumber:oc,lineStart:pc,range:[b,nc]}}function Bb(){var a,c,d="",e=0;for(a=lc[nc],b("&"===a,"Entity must start with an ampersand"),nc++;nc<qc&&e++<10&&(a=lc[nc++],";"!==a);)d+=a;return c="#"===d[0]&&"x"===d[1]?String.fromCharCode(parseInt(d.substr(2),16)):"#"===d[0]?String.fromCharCode(parseInt(d.substr(1),10)):jc[d]}function Cb(a){var b,c,d="";for(c=nc;nc<qc&&(b=lc[nc],a.indexOf(b)===-1);)"&"===b?d+=Bb():(b=lc[nc++],g(b.charCodeAt(0))&&(++oc,pc=nc),d+=b);return{type:bc.XJSText,value:d,lineNumber:oc,lineStart:pc,range:[c,nc]}}function Db(){var a,c,d;return c=lc[nc],b("'"===c||'"'===c,"String literal must starts with a quote"),d=nc,++nc,a=Cb([c]),c!==lc[nc]&&I({},gc.UnexpectedToken,"ILLEGAL"),++nc,a.range=[d,nc],a}function Eb(){var a=lc.charCodeAt(nc);return 123!==a&&60!==a?Cb(["<","{"]):t()}function Fb(){var a;return sc.type!==bc.XJSIdentifier&&K(sc),a=E(),rc.createXJSIdentifier(a.value,a.namespace)}function Gb(){var a;return N("{")?(a=Ib(),a.expression.type===ec.XJSEmptyExpression&&I(a,"XJS attributes must only be assigned a non-empty expression")):N("<")?a=Nb():sc.type===bc.XJSText?a=rc.createLiteral(E()):I({},gc.InvalidXJSAttributeValue),a}function Hb(){for(;"}"!==lc.charAt(nc);)nc++;return rc.createXJSEmptyExpression()}function Ib(){var a,b,c;return b=tc.inXJSChild,c=tc.inXJSTag,tc.inXJSChild=!1,tc.inXJSTag=!1,L("{"),a=N("}")?Hb():ua(),tc.inXJSChild=b,tc.inXJSTag=c,L("}"),rc.createXJSExpressionContainer(a)}function Jb(){var a;return a=Fb(),N("=")?(E(),rc.createXJSAttribute(a,Gb())):rc.createXJSAttribute(a)}function Kb(){var a;return a=N("{")?Ib():sc.type===bc.XJSText?rc.createLiteral(E()):Nb()}function Lb(){var a,b,c;return b=tc.inXJSChild,c=tc.inXJSTag,tc.inXJSChild=!1,tc.inXJSTag=!0,L("<"),L("/"),a=Fb(),tc.inXJSChild=b,tc.inXJSTag=c,L(">"),rc.createXJSClosingElement(a)}function Mb(){var a,b,c,d=[],e=!1;for(b=tc.inXJSChild,c=tc.inXJSTag,tc.inXJSChild=!1,tc.inXJSTag=!0,L("<"),a=Fb();nc<qc&&"/"!==sc.value&&">"!==sc.value;)d.push(Jb());return tc.inXJSTag=c,"/"===sc.value?(L("/"),tc.inXJSChild=b,L(">"),e=!0):(tc.inXJSChild=!0,L(">")),rc.createXJSOpeningElement(a,d,e)}function Nb(){var a,b,c,d,e=[];if(c=tc.inXJSChild,d=tc.inXJSTag,a=Mb(),!a.selfClosing){for(;nc<qc&&(tc.inXJSChild=!1,"<"!==sc.value||"/"!==G().value);)tc.inXJSChild=!0,F(),e.push(Kb());tc.inXJSChild=c,tc.inXJSTag=d,b=Lb(),b.name.namespace===a.name.namespace&&b.name.name===a.name.name||I({},gc.ExpectedXJSClosingTag,a.name.namespace?a.name.namespace+":"+a.name.name:a.name.name)}return rc.createXJSElement(a,b,e)}function Ob(){var a,b,c,d,e;return n(),a=nc,b={start:{line:oc,column:nc-pc}},c=uc.advance(),b.end={line:oc,column:nc-pc},c.type!==bc.EOF&&(d=[c.range[0],c.range[1]],e=lc.slice(c.range[0],c.range[1]),uc.tokens.push({type:cc[c.type],value:e,range:d,loc:b})),c}function Pb(){var a,b,c,d;return n(),a=nc,b={start:{line:oc,column:nc-pc}},c=uc.scanRegExp(),b.end={line:oc,column:nc-pc},uc.tokenize||(uc.tokens.length>0&&(d=uc.tokens[uc.tokens.length-1],d.range[0]===a&&"Punctuator"===d.type&&("/"!==d.value&&"/="!==d.value||uc.tokens.pop())),uc.tokens.push({type:"RegularExpression",value:c.literal,range:[a,nc],loc:b})),c}function Qb(){var a,b,c,d=[];for(a=0;a<uc.tokens.length;++a)b=uc.tokens[a],c={type:b.type,value:b.value},uc.range&&(c.range=b.range),uc.loc&&(c.loc=b.loc),d.push(c);uc.tokens=d}function Rb(){this.range=[nc,nc],this.loc={start:{line:oc,column:nc-pc},end:{line:oc,column:nc-pc}}}function Sb(){return new Rb}function Tb(){var a,b;return n(),a=Sb(),L("("),++tc.parenthesizedCount,b=ua(),L(")"),a.end(),a.applyGroup(b),b}function Ub(){var a,b;for(n(),a=Sb(),b=O("new")?ha():ba();N(".")||N("[")||sc.type===bc.Template;)N("[")?(b=rc.createMemberExpression("[",b,ga()),a.end(),a.apply(b)):N(".")?(b=rc.createMemberExpression(".",b,fa()),a.end(),a.apply(b)):(b=rc.createTaggedTemplateExpression(b,_()),
a.end(),a.apply(b));return b}function Vb(){var a,b,c;for(n(),a=Sb(),b=O("new")?ha():ba();N(".")||N("[")||N("(")||sc.type===bc.Template;)N("(")?(c=ca(),b=rc.createCallExpression(b,c),a.end(),a.apply(b)):N("[")?(b=rc.createMemberExpression("[",b,ga()),a.end(),a.apply(b)):N(".")?(b=rc.createMemberExpression(".",b,fa()),a.end(),a.apply(b)):(b=rc.createTaggedTemplateExpression(b,_()),a.end(),a.apply(b));return b}function Wb(a){var b,c,d;b="[object Array]"===Object.prototype.toString.apply(a)?[]:{};for(c in a)a.hasOwnProperty(c)&&"groupRange"!==c&&"groupLoc"!==c&&(d=a[c],null===d||"object"!=typeof d||d instanceof RegExp?b[c]=d:b[c]=Wb(d));return b}function Xb(a,b,c){return function(d){function e(a){return a.type===ec.LogicalExpression||a.type===ec.BinaryExpression}function f(c){var d,g;e(c.left)&&f(c.left),e(c.right)&&f(c.right),a&&(c.left.groupRange||c.right.groupRange?(d=c.left.groupRange?c.left.groupRange[0]:c.left.range[0],g=c.right.groupRange?c.right.groupRange[1]:c.right.range[1],c.range=[d,g]):"undefined"==typeof c.range&&(d=c.left.range[0],g=c.right.range[1],c.range=[d,g])),b&&(c.left.groupLoc||c.right.groupLoc?(d=c.left.groupLoc?c.left.groupLoc.start:c.left.loc.start,g=c.right.groupLoc?c.right.groupLoc.end:c.right.loc.end,c.loc={start:d,end:g},c=rc.postProcess(c)):"undefined"==typeof c.loc&&(c.loc={start:c.left.loc.start,end:c.right.loc.end},c=rc.postProcess(c)))}return function(){var g,h;return c||n(),g=Sb(),h=d.apply(null,arguments),g.end(),a&&"undefined"==typeof h.range&&g.apply(h),b&&"undefined"==typeof h.loc&&g.apply(h),e(h)&&f(h),h}}}function Yb(){var a,b;uc.comments&&(uc.skipComment=n,n=wb),(uc.range||uc.loc)&&(uc.parseGroupExpression=aa,uc.parseLeftHandSideExpression=ja,uc.parseLeftHandSideExpressionAllowCall=ia,aa=Tb,ja=Ub,ia=Vb,a=Xb(uc.range,uc.loc),b=Xb(uc.range,uc.loc,!0),uc.parseArrayInitialiser=U,uc.parseAssignmentExpression=ta,uc.parseBinaryExpression=na,uc.parseBlock=wa,uc.parseFunctionSourceElements=bb,uc.parseCatchClause=Ya,uc.parseComputedMember=ga,uc.parseConditionalExpression=oa,uc.parseConstLetDeclaration=Da,uc.parseExportBatchSpecifier=Fa,uc.parseExportDeclaration=Ha,uc.parseExportSpecifier=Ga,uc.parseExpression=ua,uc.parseForVariableDeclaration=Pa,uc.parseFunctionDeclaration=fb,uc.parseFunctionExpression=gb,uc.parseParams=eb,uc.parseImportDeclaration=Ia,uc.parseImportSpecifier=Ja,uc.parseModuleDeclaration=Ea,uc.parseModuleBlock=tb,uc.parseNewExpression=ha,uc.parseNonComputedProperty=ea,uc.parseObjectInitialiser=Z,uc.parseObjectProperty=Y,uc.parseObjectPropertyKey=X,uc.parsePostfixExpression=ka,uc.parsePrimaryExpression=ba,uc.parseProgram=ub,uc.parsePropertyFunction=V,uc.parseSpreadOrAssignmentExpression=da,uc.parseTemplateElement=$,uc.parseTemplateLiteral=_,uc.parseTypeAnnotatableIdentifier=za,uc.parseTypeAnnotation=xa,uc.parseStatement=_a,uc.parseSwitchCase=Va,uc.parseUnaryExpression=la,uc.parseVariableDeclaration=Aa,uc.parseVariableIdentifier=ya,uc.parseMethodDefinition=ib,uc.parseClassDeclaration=mb,uc.parseClassExpression=lb,uc.parseClassBody=kb,uc.parseXJSIdentifier=Fb,uc.parseXJSChild=Kb,uc.parseXJSAttribute=Jb,uc.parseXJSAttributeValue=Gb,uc.parseXJSExpressionContainer=Ib,uc.parseXJSEmptyExpression=Hb,uc.parseXJSElement=Nb,uc.parseXJSClosingElement=Lb,uc.parseXJSOpeningElement=Mb,U=a(uc.parseArrayInitialiser),ta=a(uc.parseAssignmentExpression),na=a(uc.parseBinaryExpression),wa=a(uc.parseBlock),bb=a(uc.parseFunctionSourceElements),Ya=a(uc.parseCatchClause),ga=a(uc.parseComputedMember),oa=a(uc.parseConditionalExpression),Da=a(uc.parseConstLetDeclaration),Fa=a(Fa),Ha=a(Ha),Ga=a(Ga),ua=a(uc.parseExpression),Pa=a(uc.parseForVariableDeclaration),fb=a(uc.parseFunctionDeclaration),gb=a(uc.parseFunctionExpression),eb=a(uc.parseParams),Ia=a(uc.parseImportDeclaration),Ja=a(uc.parseImportSpecifier),Ea=a(uc.parseModuleDeclaration),tb=a(uc.parseModuleBlock),ja=a(ja),ha=a(uc.parseNewExpression),ea=a(uc.parseNonComputedProperty),Z=a(uc.parseObjectInitialiser),Y=a(uc.parseObjectProperty),X=a(uc.parseObjectPropertyKey),ka=a(uc.parsePostfixExpression),ba=a(uc.parsePrimaryExpression),ub=a(uc.parseProgram),V=a(uc.parsePropertyFunction),$=a(uc.parseTemplateElement),_=a(uc.parseTemplateLiteral),za=a(uc.parseTypeAnnotatableIdentifier),xa=a(uc.parseTypeAnnotation),da=a(uc.parseSpreadOrAssignmentExpression),_a=a(uc.parseStatement),Va=a(uc.parseSwitchCase),la=a(uc.parseUnaryExpression),Aa=a(uc.parseVariableDeclaration),ya=a(uc.parseVariableIdentifier),ib=a(uc.parseMethodDefinition),mb=a(uc.parseClassDeclaration),lb=a(uc.parseClassExpression),kb=a(uc.parseClassBody),Fb=a(uc.parseXJSIdentifier),Kb=b(uc.parseXJSChild),Jb=a(uc.parseXJSAttribute),Gb=a(uc.parseXJSAttributeValue),Ib=a(uc.parseXJSExpressionContainer),Hb=b(uc.parseXJSEmptyExpression),Nb=a(uc.parseXJSElement),Lb=a(uc.parseXJSClosingElement),Mb=a(uc.parseXJSOpeningElement)),"undefined"!=typeof uc.tokens&&(uc.advance=D,uc.scanRegExp=A,D=Ob,A=Pb)}function Zb(){"function"==typeof uc.skipComment&&(n=uc.skipComment),(uc.range||uc.loc)&&(U=uc.parseArrayInitialiser,ta=uc.parseAssignmentExpression,na=uc.parseBinaryExpression,wa=uc.parseBlock,bb=uc.parseFunctionSourceElements,Ya=uc.parseCatchClause,ga=uc.parseComputedMember,oa=uc.parseConditionalExpression,Da=uc.parseConstLetDeclaration,Fa=uc.parseExportBatchSpecifier,Ha=uc.parseExportDeclaration,Ga=uc.parseExportSpecifier,ua=uc.parseExpression,Pa=uc.parseForVariableDeclaration,fb=uc.parseFunctionDeclaration,gb=uc.parseFunctionExpression,Ia=uc.parseImportDeclaration,Ja=uc.parseImportSpecifier,aa=uc.parseGroupExpression,ja=uc.parseLeftHandSideExpression,ia=uc.parseLeftHandSideExpressionAllowCall,Ea=uc.parseModuleDeclaration,tb=uc.parseModuleBlock,ha=uc.parseNewExpression,ea=uc.parseNonComputedProperty,Z=uc.parseObjectInitialiser,Y=uc.parseObjectProperty,X=uc.parseObjectPropertyKey,ka=uc.parsePostfixExpression,ba=uc.parsePrimaryExpression,ub=uc.parseProgram,V=uc.parsePropertyFunction,$=uc.parseTemplateElement,_=uc.parseTemplateLiteral,za=uc.parseTypeAnnotatableIdentifier,xa=uc.parseTypeAnnotation,da=uc.parseSpreadOrAssignmentExpression,_a=uc.parseStatement,Va=uc.parseSwitchCase,la=uc.parseUnaryExpression,Aa=uc.parseVariableDeclaration,ya=uc.parseVariableIdentifier,ib=uc.parseMethodDefinition,mb=uc.parseClassDeclaration,lb=uc.parseClassExpression,kb=uc.parseClassBody,Fb=uc.parseXJSIdentifier,Kb=uc.parseXJSChild,Jb=uc.parseXJSAttribute,Gb=uc.parseXJSAttributeValue,Ib=uc.parseXJSExpressionContainer,Hb=uc.parseXJSEmptyExpression,Nb=uc.parseXJSElement,Lb=uc.parseXJSClosingElement,Mb=uc.parseXJSOpeningElement),"function"==typeof uc.scanRegExp&&(D=uc.advance,A=uc.scanRegExp)}function $b(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d}function _b(a,b){var c,d,e;c=String,"string"==typeof a||a instanceof String||(a=c(a)),rc=ic,lc=a,nc=0,oc=lc.length>0?1:0,pc=0,qc=lc.length,sc=null,tc={allowKeyword:!0,allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1},uc={},b=b||{},b.tokens=!0,uc.tokens=[],uc.tokenize=!0,uc.openParenToken=-1,uc.openCurlyToken=-1,uc.range="boolean"==typeof b.range&&b.range,uc.loc="boolean"==typeof b.loc&&b.loc,"boolean"==typeof b.comment&&b.comment&&(uc.comments=[]),"boolean"==typeof b.tolerant&&b.tolerant&&(uc.errors=[]),qc>0&&"undefined"==typeof lc[0]&&a instanceof String&&(lc=a.valueOf()),Yb();try{if(F(),sc.type===bc.EOF)return uc.tokens;for(d=E();sc.type!==bc.EOF;)try{d=E()}catch(a){if(d=sc,uc.errors){uc.errors.push(a);break}throw a}Qb(),e=uc.tokens,"undefined"!=typeof uc.comments&&(xb(),e.comments=uc.comments),"undefined"!=typeof uc.errors&&(e.errors=uc.errors)}catch(a){throw a}finally{Zb(),uc={}}return e}function ac(a,b){var c,d;d=String,"string"==typeof a||a instanceof String||(a=d(a)),rc=ic,lc=a,nc=0,oc=lc.length>0?1:0,pc=0,qc=lc.length,sc=null,tc={allowKeyword:!1,allowIn:!0,labelSet:{},parenthesizedCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,inXJSChild:!1,inXJSTag:!1,yieldAllowed:!1,yieldFound:!1},uc={},"undefined"!=typeof b&&(uc.range="boolean"==typeof b.range&&b.range,uc.loc="boolean"==typeof b.loc&&b.loc,uc.loc&&null!==b.source&&void 0!==b.source&&(rc=$b(rc,{postProcess:function(a){return a.loc.source=d(b.source),a}})),"boolean"==typeof b.tokens&&b.tokens&&(uc.tokens=[]),"boolean"==typeof b.comment&&b.comment&&(uc.comments=[]),"boolean"==typeof b.tolerant&&b.tolerant&&(uc.errors=[])),qc>0&&"undefined"==typeof lc[0]&&a instanceof String&&(lc=a.valueOf()),Yb();try{c=ub(),"undefined"!=typeof uc.comments&&(xb(),c.comments=uc.comments),"undefined"!=typeof uc.tokens&&(Qb(),c.tokens=uc.tokens),"undefined"!=typeof uc.errors&&(c.errors=uc.errors),(uc.range||uc.loc)&&(c.body=Wb(c.body))}catch(a){throw a}finally{Zb(),uc={}}return c}var bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc;bc={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10,XJSIdentifier:11,XJSText:12},cc={},cc[bc.BooleanLiteral]="Boolean",cc[bc.EOF]="<end>",cc[bc.Identifier]="Identifier",cc[bc.Keyword]="Keyword",cc[bc.NullLiteral]="Null",cc[bc.NumericLiteral]="Numeric",cc[bc.Punctuator]="Punctuator",cc[bc.StringLiteral]="String",cc[bc.XJSIdentifier]="XJSIdentifier",cc[bc.XJSText]="XJSText",cc[bc.RegularExpression]="RegularExpression",dc=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],ec={ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AssignmentExpression:"AssignmentExpression",BinaryExpression:"BinaryExpression",BlockStatement:"BlockStatement",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ClassHeritage:"ClassHeritage",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportDeclaration:"ExportDeclaration",ExportBatchSpecifier:"ExportBatchSpecifier",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",ForStatement:"ForStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportSpecifier:"ImportSpecifier",LabeledStatement:"LabeledStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleDeclaration:"ModuleDeclaration",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",TypeAnnotatedIdentifier:"TypeAnnotatedIdentifier",TypeAnnotation:"TypeAnnotation",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",XJSIdentifier:"XJSIdentifier",XJSEmptyExpression:"XJSEmptyExpression",XJSExpressionContainer:"XJSExpressionContainer",XJSElement:"XJSElement",XJSClosingElement:"XJSClosingElement",XJSOpeningElement:"XJSOpeningElement",XJSAttribute:"XJSAttribute",XJSText:"XJSText",YieldExpression:"YieldExpression"},fc={Data:1,Get:2,Set:4},kc={static:"static",prototype:"prototype"},gc={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInFormalsList:"Invalid left-hand side in formals list",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalDuplicateClassProperty:"Illegal duplicate property in class definition",IllegalReturn:"Illegal return statement",IllegalYield:"Illegal yield expression",IllegalSpread:"Illegal spread element",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",ParameterAfterRestParameter:"Rest parameter must be final parameter of an argument list",DefaultRestParameter:"Rest parameter can not have a default value",ElementAfterSpreadElement:"Spread must be the final element of an element list",ObjectPatternAsRestParameter:"Invalid rest parameter",ObjectPatternAsSpread:"Invalid spread argument",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",NewlineAfterModule:"Illegal newline after module",NoFromAfterImport:"Missing from after import",InvalidModuleSpecifier:"Invalid module specifier",NestedModule:"Module declaration can not be nested",NoYieldInGenerator:"Missing yield in generator",NoUnintializedConst:"Const must be initialized",ComprehensionRequiresBlock:"Comprehension must have at least one block",ComprehensionError:"Comprehension Error",EachNotAllowed:"Each is not supported",InvalidXJSTagName:"XJS tag name can not be empty",InvalidXJSAttributeValue:"XJS value should be either an expression or a quoted XJS text",ExpectedXJSClosingTag:"Expected corresponding XJS closing tag for %0"},hc={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},ic={name:"SyntaxTree",postProcess:function(a){return a},createArrayExpression:function(a){return{type:ec.ArrayExpression,elements:a}},createAssignmentExpression:function(a,b,c){return{type:ec.AssignmentExpression,operator:a,left:b,right:c}},createBinaryExpression:function(a,b,c){var d="||"===a||"&&"===a?ec.LogicalExpression:ec.BinaryExpression;return{type:d,operator:a,left:b,right:c}},createBlockStatement:function(a){return{type:ec.BlockStatement,body:a}},createBreakStatement:function(a){return{type:ec.BreakStatement,label:a}},createCallExpression:function(a,b){return{type:ec.CallExpression,callee:a,arguments:b}},createCatchClause:function(a,b){return{type:ec.CatchClause,param:a,body:b}},createConditionalExpression:function(a,b,c){return{type:ec.ConditionalExpression,test:a,consequent:b,alternate:c}},createContinueStatement:function(a){return{type:ec.ContinueStatement,label:a}},createDebuggerStatement:function(){return{type:ec.DebuggerStatement}},createDoWhileStatement:function(a,b){return{type:ec.DoWhileStatement,body:a,test:b}},createEmptyStatement:function(){return{type:ec.EmptyStatement}},createExpressionStatement:function(a){return{type:ec.ExpressionStatement,expression:a}},createForStatement:function(a,b,c,d){return{type:ec.ForStatement,init:a,test:b,update:c,body:d}},createForInStatement:function(a,b,c){return{type:ec.ForInStatement,left:a,right:b,body:c,each:!1}},createForOfStatement:function(a,b,c){return{type:ec.ForOfStatement,left:a,right:b,body:c}},createFunctionDeclaration:function(a,b,c,d,e,f,g,h){return{type:ec.FunctionDeclaration,id:a,params:b,defaults:c,body:d,rest:e,generator:f,expression:g,returnType:h}},createFunctionExpression:function(a,b,c,d,e,f,g,h){return{type:ec.FunctionExpression,id:a,params:b,defaults:c,body:d,rest:e,generator:f,expression:g,returnType:h}},createIdentifier:function(a){return{type:ec.Identifier,name:a,typeAnnotation:void 0}},createTypeAnnotation:function(a,b,c,d){return{type:ec.TypeAnnotation,id:a,paramTypes:b,returnType:c,nullable:d}},createTypeAnnotatedIdentifier:function(a,b){return{type:ec.TypeAnnotatedIdentifier,id:a,annotation:b}},createXJSAttribute:function(a,b){return{type:ec.XJSAttribute,name:a,value:b}},createXJSIdentifier:function(a,b){return{type:ec.XJSIdentifier,name:a,namespace:b}},createXJSElement:function(a,b,c){return{type:ec.XJSElement,openingElement:a,closingElement:b,children:c}},createXJSEmptyExpression:function(){return{type:ec.XJSEmptyExpression}},createXJSExpressionContainer:function(a){return{type:ec.XJSExpressionContainer,expression:a}},createXJSOpeningElement:function(a,b,c){return{type:ec.XJSOpeningElement,name:a,selfClosing:c,attributes:b}},createXJSClosingElement:function(a){return{type:ec.XJSClosingElement,name:a}},createIfStatement:function(a,b,c){return{type:ec.IfStatement,test:a,consequent:b,alternate:c}},createLabeledStatement:function(a,b){return{type:ec.LabeledStatement,label:a,body:b}},createLiteral:function(a){return{type:ec.Literal,value:a.value,raw:lc.slice(a.range[0],a.range[1])}},createMemberExpression:function(a,b,c){return{type:ec.MemberExpression,computed:"["===a,object:b,property:c}},createNewExpression:function(a,b){return{type:ec.NewExpression,callee:a,arguments:b}},createObjectExpression:function(a){return{type:ec.ObjectExpression,properties:a}},createPostfixExpression:function(a,b){return{type:ec.UpdateExpression,operator:a,argument:b,prefix:!1}},createProgram:function(a){return{type:ec.Program,body:a}},createProperty:function(a,b,c,d,e){return{type:ec.Property,key:b,value:c,kind:a,method:d,shorthand:e}},createReturnStatement:function(a){return{type:ec.ReturnStatement,argument:a}},createSequenceExpression:function(a){return{type:ec.SequenceExpression,expressions:a}},createSwitchCase:function(a,b){return{type:ec.SwitchCase,test:a,consequent:b}},createSwitchStatement:function(a,b){return{type:ec.SwitchStatement,discriminant:a,cases:b}},createThisExpression:function(){return{type:ec.ThisExpression}},createThrowStatement:function(a){return{type:ec.ThrowStatement,argument:a}},createTryStatement:function(a,b,c,d){return{type:ec.TryStatement,block:a,guardedHandlers:b,handlers:c,finalizer:d}},createUnaryExpression:function(a,b){return"++"===a||"--"===a?{type:ec.UpdateExpression,operator:a,argument:b,prefix:!0}:{type:ec.UnaryExpression,operator:a,argument:b}},createVariableDeclaration:function(a,b){return{type:ec.VariableDeclaration,declarations:a,kind:b}},createVariableDeclarator:function(a,b){return{type:ec.VariableDeclarator,id:a,init:b}},createWhileStatement:function(a,b){return{type:ec.WhileStatement,test:a,body:b}},createWithStatement:function(a,b){return{type:ec.WithStatement,object:a,body:b}},createTemplateElement:function(a,b){return{type:ec.TemplateElement,value:a,tail:b}},createTemplateLiteral:function(a,b){return{type:ec.TemplateLiteral,quasis:a,expressions:b}},createSpreadElement:function(a){return{type:ec.SpreadElement,argument:a}},createTaggedTemplateExpression:function(a,b){return{type:ec.TaggedTemplateExpression,tag:a,quasi:b}},createArrowFunctionExpression:function(a,b,c,d,e){return{type:ec.ArrowFunctionExpression,id:null,params:a,defaults:b,body:c,rest:d,generator:!1,expression:e}},createMethodDefinition:function(a,b,c,d){return{type:ec.MethodDefinition,key:c,value:d,kind:b,static:a===kc.static}},createClassBody:function(a){return{type:ec.ClassBody,body:a}},createClassExpression:function(a,b,c){return{type:ec.ClassExpression,id:a,superClass:b,body:c}},createClassDeclaration:function(a,b,c){return{type:ec.ClassDeclaration,id:a,superClass:b,body:c}},createExportSpecifier:function(a,b){return{type:ec.ExportSpecifier,id:a,name:b}},createExportBatchSpecifier:function(){return{type:ec.ExportBatchSpecifier}},createExportDeclaration:function(a,b,c){return{type:ec.ExportDeclaration,declaration:a,specifiers:b,source:c}},createImportSpecifier:function(a,b){return{type:ec.ImportSpecifier,id:a,name:b}},createImportDeclaration:function(a,b,c){return{type:ec.ImportDeclaration,specifiers:a,kind:b,source:c}},createYieldExpression:function(a,b){return{type:ec.YieldExpression,argument:a,delegate:b}},createModuleDeclaration:function(a,b,c){return{type:ec.ModuleDeclaration,id:a,source:b,body:c}}},jc={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},Rb.prototype={constructor:Rb,end:function(){this.range[1]=nc,this.loc.end.line=oc,this.loc.end.column=nc-pc},applyGroup:function(a){uc.range&&(a.groupRange=[this.range[0],this.range[1]]),uc.loc&&(a.groupLoc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}},a=rc.postProcess(a))},apply:function(a){var c=typeof a;b("object"===c,"Applying location marker to an unexpected node type: "+c),uc.range&&(a.range=[this.range[0],this.range[1]]),uc.loc&&(a.loc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}},a=rc.postProcess(a))}},a.version="1.1.0-dev-harmony",a.tokenize=_b,a.parse=ac,a.Syntax=function(){var a,b={};"function"==typeof Object.create&&(b=Object.create(null));for(a in ec)ec.hasOwnProperty(a)&&(b[a]=ec[a]);return"function"==typeof Object.freeze&&Object.freeze(b),b}()})},{}],271:[function(a,b,c){"use strict";function d(a){var b=a.arguments[0];return b&&"Literal"===b.type}var e=a("detective"),f=a("patch-text"),g=a("has-require"),h=a("xtend");b.exports=function(a,b){var c=new g.Checker(a),i=Object.keys(b);return i.some(c.has,c)?f(a,e.find(a,{nodes:!0}).nodes.filter(d).map(function(a){return h(a,{replacement:b[a.arguments[0].value]})}).filter(function(a){return null!=a.replacement})):a}},{detective:132,"has-require":272,"patch-text":199,xtend:404}],272:[function(a,b,c){"use strict";function d(a,b){return new e(a).has(b)}function e(a){this.code=a}function f(a){return new RegExp([g("require("),"\\s*['\"]",a,"['\"]\\s*",g(")")].join(""))}var g=a("escape-string-regexp");b.exports=d,d.any=function(a){return new e(a).any()},d.Checker=e;var h=f("@?[A-Za-z0-9/_.-]+");e.prototype.any=function(){return null!=this._any?this._any:(this._any=h.test(this.code),this._any)},e.prototype.has=function(a){if(!a)throw new Error("module id is required");return this.any()&&f(g(a)).test(this.code)}},{"escape-string-regexp":135}],273:[function(a,b,c){var d=a("./lib/core"),e=a("./lib/async");e.core=d,e.isCore=function(a){return d[a]},e.sync=a("./lib/sync"),c=e,b.exports=e},{"./lib/async":274,"./lib/core":277,"./lib/sync":279}],274:[function(a,b,c){(function(c){var d=a("./core"),e=a("fs"),f=a("path"),g=a("./caller.js"),h=a("./node-modules-paths.js");b.exports=function(a,b,i){function j(b,c,d){b?p(b):c?p(null,c,d):m(w,function(b,c,d){if(b)p(b);else if(c)p(null,c,d);else{var e=new Error("Cannot find module '"+a+"' from '"+v+"'");e.code="MODULE_NOT_FOUND",p(e)}})}function k(a,b,c){function d(a,b,c){function e(c,e,k){if(j=e,c)return g(c);if(k&&j&&q.pathFilter){var l=f.relative(k,i),m=l.slice(0,l.length-a[0].length),n=q.pathFilter(j,b,m);if(n)return d([""].concat(u.slice()),f.resolve(k,n),j)}s(i,h)}function h(c,e){return c?g(c):e?g(null,i,j):void d(a.slice(1),b,j)}if(0===a.length)return g(null,void 0,c);var i=b+a[0],j=c;j?e(null,j):l(f.dirname(i),e)}var e=b,g=c;"function"==typeof e&&(g=e,e=void 0);var h=[""].concat(u);d(h,a,e)}function l(a,b){if(""===a||"/"===a)return b(null);if("win32"===c.platform&&/^\w:[\/\\]*$/.test(a))return b(null);if(/[\/\\]node_modules[\/\\]*$/.test(a))return b(null);var d=f.join(a,"package.json");s(d,function(c,e){return e?void t(d,function(c,e){c&&b(c);try{var f=JSON.parse(e)}catch(a){}f&&q.packageFilter&&(f=q.packageFilter(f,d)),b(null,f,a)}):l(f.dirname(a),b)})}function m(a,b,c){var d=c,e=b;"function"==typeof e&&(d=e,e=q.package);var g=f.join(a,"package.json");s(g,function(b,c){return b?d(b):c?void t(g,function(b,c){if(b)return d(b);try{var e=JSON.parse(c)}catch(a){}return q.packageFilter&&(e=q.packageFilter(e,g)),e.main?("."!==e.main&&"./"!==e.main||(e.main="index"),void k(f.resolve(a,e.main),e,function(b,c,e){if(b)return d(b);if(c)return d(null,c,e);if(!e)return k(f.join(a,"index"),e,d);var g=f.resolve(a,e.main);m(g,e,function(b,c,e){return b?d(b):c?d(null,c,e):void k(f.join(a,"index"),e,d)})})):void k(f.join(a,"/index"),e,d)}):k(f.join(a,"index"),e,d)})}function n(b,c){function d(c,d,h){return c?b(c):d?b(null,d,h):void m(f.join(g,a),void 0,e)}function e(a,d,e){return a?b(a):d?b(null,d,e):void n(b,c.slice(1))}if(0===c.length)return b(null,void 0);var g=c[0],h=f.join(g,a);k(h,void 0,d)}function o(a,b,c){n(c,h(b,q))}var p=i,q=b||{};if("function"==typeof q&&(p=q,q={}),"string"!=typeof a){var r=new TypeError("Path must be a string.");return c.nextTick(function(){p(r)})}var s=q.isFile||function(a,b){e.stat(a,function(a,c){return a?"ENOENT"===a.code||"ENOTDIR"===a.code?b(null,!1):b(a):b(null,c.isFile()||c.isFIFO())})},t=q.readFile||e.readFile,u=q.extensions||[".js"],v=q.basedir||f.dirname(g());if(q.paths=q.paths||[],/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[\/\\])/.test(a)){var w=f.resolve(v,a);".."!==a&&"/"!==a.slice(-1)||(w+="/"),/\/$/.test(a)&&w===v?m(w,q.package,j):k(w,q.package,j)}else o(a,v,function(b,c,e){if(b)p(b);else if(c)p(null,c,e);else{if(d[a])return p(null,a);var f=new Error("Cannot find module '"+a+"' from '"+v+"'");f.code="MODULE_NOT_FOUND",p(f)}})}}).call(this,a("_process"))},{"./caller.js":275,"./core":277,"./node-modules-paths.js":278,_process:256,fs:29,path:200}],275:[function(a,b,c){b.exports=function(){var a=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){return b};var b=(new Error).stack;return Error.prepareStackTrace=a,b[2].getFileName()}},{}],276:[function(a,b,c){b.exports={"*":["assert","buffer_ieee754","buffer","child_process","cluster","console","constants","crypto","_debugger","dgram","dns","domain","events","freelist","fs","http","https","_linklist","module","net","os","path","punycode","querystring","readline","repl","stream","string_decoder","sys","timers","tls","tty","url","util","vm","zlib"],.11:["_http_server"],"1.0":["process","v8"]}},{}],277:[function(a,b,c){(function(c){function d(a){if("*"===a)return!0;for(var b=a.split("."),c=0;c<3;++c)if((e[c]||0)>=(b[c]||0))return!0;
return!1}var e=c.versions&&c.versions.node&&c.versions.node.split(".")||[],f=a("./core.json"),g={};for(var h in f)if(Object.prototype.hasOwnProperty.call(f,h)&&d(h))for(var i=0;i<f[h].length;++i)g[f[h][i]]=!0;b.exports=g}).call(this,a("_process"))},{"./core.json":276,_process:256}],278:[function(a,b,c){var d=a("path"),e=d.parse||a("path-parse");b.exports=function(a,b){var c=b&&b.moduleDirectory?[].concat(b.moduleDirectory):["node_modules"],f=d.resolve(a),g="/";/^([A-Za-z]:)/.test(f)?g="":/^\\\\/.test(f)&&(g="\\\\");for(var h=[f],i=e(f);i.dir!==h[h.length-1];)h.push(i.dir),i=e(i.dir);var j=h.reduce(function(a,b){return a.concat(c.map(function(a){return d.join(g,b,a)}))},[]);return b&&b.paths?j.concat(b.paths):j}},{path:200,"path-parse":201}],279:[function(a,b,c){var d=a("./core"),e=a("fs"),f=a("path"),g=a("./caller.js"),h=a("./node-modules-paths.js");b.exports=function(a,b){function c(a){if(l(a))return a;for(var b=0;b<n.length;b++){var c=a+n[b];if(l(c))return c}}function i(a){var b=f.join(a,"/package.json");if(l(b)){var d=m(b,"utf8");try{var e=JSON.parse(d);if(k.packageFilter&&(e=k.packageFilter(e,a)),e.main){var g=c(f.resolve(a,e.main));if(g)return g;var h=i(f.resolve(a,e.main));if(h)return h}}catch(a){}}return c(f.join(a,"/index"))}function j(a,b){for(var d=h(b,k),e=0;e<d.length;e++){var g=d[e],j=c(f.join(g,"/",a));if(j)return j;var l=i(f.join(g,"/",a));if(l)return l}}if("string"!=typeof a)throw new TypeError("Path must be a string.");var k=b||{},l=k.isFile||function(a){try{var b=e.statSync(a)}catch(a){if(a&&("ENOENT"===a.code||"ENOTDIR"===a.code))return!1;throw a}return b.isFile()||b.isFIFO()},m=k.readFileSync||e.readFileSync,n=k.extensions||[".js"],o=k.basedir||f.dirname(g());if(k.paths=k.paths||[],/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[\/\\])/.test(a)){var p=f.resolve(o,a);".."!==a&&"/"!==a.slice(-1)||(p+="/");var q=c(p)||i(p);if(q)return q}else{var r=j(a,o);if(r)return r}if(d[a])return a;var s=new Error("Cannot find module '"+a+"' from '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}},{"./caller.js":275,"./core":277,"./node-modules-paths.js":278,fs:29,path:200}],280:[function(a,b,c){b.exports=a("buffer")},{buffer:34}],281:[function(a,b,c){function d(a){var b;if("SELECT"===a.nodeName)a.focus(),b=a.value;else if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName){var c=a.hasAttribute("readonly");c||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),c||a.removeAttribute("readonly"),b=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var d=window.getSelection(),e=document.createRange();e.selectNodeContents(a),d.removeAllRanges(),d.addRange(e),b=d.toString()}return b}b.exports=d},{}],282:[function(a,b,c){(function(a){function c(b,c){this._block=new a(b),this._finalSize=c,this._blockSize=b,this._len=0,this._s=0}c.prototype.update=function(b,c){"string"==typeof b&&(c=c||"utf8",b=new a(b,c));for(var d=this._len+=b.length,e=this._s||0,f=0,g=this._block;e<d;){for(var h=Math.min(b.length,f+this._blockSize-e%this._blockSize),i=h-f,j=0;j<i;j++)g[e%this._blockSize+j]=b[j+f];e+=i,f+=i,e%this._blockSize===0&&this._update(g)}return this._s=e,this},c.prototype.digest=function(a){var b=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),b%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(b,this._blockSize-4);var c=this._update(this._block)||this._hash();return a?c.toString(a):c},c.prototype._update=function(){throw new Error("_update must be implemented by subclass")},b.exports=c}).call(this,a("buffer").Buffer)},{buffer:34}],283:[function(a,b,c){var c=b.exports=function(a){a=a.toLowerCase();var b=c[a];if(!b)throw new Error(a+" is not supported (we accept pull requests)");return new b};c.sha=a("./sha"),c.sha1=a("./sha1"),c.sha224=a("./sha224"),c.sha256=a("./sha256"),c.sha384=a("./sha384"),c.sha512=a("./sha512")},{"./sha":284,"./sha1":285,"./sha224":286,"./sha256":287,"./sha384":288,"./sha512":289}],284:[function(a,b,c){(function(c){function d(){this.init(),this._w=k,i.call(this,64,56)}function e(a){return a<<5|a>>>27}function f(a){return a<<30|a>>>2}function g(a,b,c,d){return 0===a?b&c|~b&d:2===a?b&c|b&d|c&d:b^c^d}var h=a("inherits"),i=a("./hash"),j=[1518500249,1859775393,-1894007588,-899497514],k=new Array(80);h(d,i),d.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},d.prototype._update=function(a){for(var b=this._w,c=0|this._a,d=0|this._b,h=0|this._c,i=0|this._d,k=0|this._e,l=0;l<16;++l)b[l]=a.readInt32BE(4*l);for(;l<80;++l)b[l]=b[l-3]^b[l-8]^b[l-14]^b[l-16];for(var m=0;m<80;++m){var n=~~(m/20),o=e(c)+g(n,d,h,i)+k+b[m]+j[n]|0;k=i,i=h,h=f(d),d=c,c=o}this._a=c+this._a|0,this._b=d+this._b|0,this._c=h+this._c|0,this._d=i+this._d|0,this._e=k+this._e|0},d.prototype._hash=function(){var a=new c(20);return a.writeInt32BE(0|this._a,0),a.writeInt32BE(0|this._b,4),a.writeInt32BE(0|this._c,8),a.writeInt32BE(0|this._d,12),a.writeInt32BE(0|this._e,16),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":282,buffer:34,inherits:173}],285:[function(a,b,c){(function(c){function d(){this.init(),this._w=l,j.call(this,64,56)}function e(a){return a<<1|a>>>31}function f(a){return a<<5|a>>>27}function g(a){return a<<30|a>>>2}function h(a,b,c,d){return 0===a?b&c|~b&d:2===a?b&c|b&d|c&d:b^c^d}var i=a("inherits"),j=a("./hash"),k=[1518500249,1859775393,-1894007588,-899497514],l=new Array(80);i(d,j),d.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},d.prototype._update=function(a){for(var b=this._w,c=0|this._a,d=0|this._b,i=0|this._c,j=0|this._d,l=0|this._e,m=0;m<16;++m)b[m]=a.readInt32BE(4*m);for(;m<80;++m)b[m]=e(b[m-3]^b[m-8]^b[m-14]^b[m-16]);for(var n=0;n<80;++n){var o=~~(n/20),p=f(c)+h(o,d,i,j)+l+b[n]+k[o]|0;l=j,j=i,i=g(d),d=c,c=p}this._a=c+this._a|0,this._b=d+this._b|0,this._c=i+this._c|0,this._d=j+this._d|0,this._e=l+this._e|0},d.prototype._hash=function(){var a=new c(20);return a.writeInt32BE(0|this._a,0),a.writeInt32BE(0|this._b,4),a.writeInt32BE(0|this._c,8),a.writeInt32BE(0|this._d,12),a.writeInt32BE(0|this._e,16),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":282,buffer:34,inherits:173}],286:[function(a,b,c){(function(c){function d(){this.init(),this._w=h,g.call(this,64,56)}var e=a("inherits"),f=a("./sha256"),g=a("./hash"),h=new Array(64);e(d,f),d.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},d.prototype._hash=function(){var a=new c(28);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":282,"./sha256":287,buffer:34,inherits:173}],287:[function(a,b,c){(function(c){function d(){this.init(),this._w=n,l.call(this,64,56)}function e(a,b,c){return c^a&(b^c)}function f(a,b,c){return a&b|c&(a|b)}function g(a){return(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10)}function h(a){return(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7)}function i(a){return(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3}function j(a){return(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10}var k=a("inherits"),l=a("./hash"),m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=new Array(64);k(d,l),d.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},d.prototype._update=function(a){for(var b=this._w,c=0|this._a,d=0|this._b,k=0|this._c,l=0|this._d,n=0|this._e,o=0|this._f,p=0|this._g,q=0|this._h,r=0;r<16;++r)b[r]=a.readInt32BE(4*r);for(;r<64;++r)b[r]=j(b[r-2])+b[r-7]+i(b[r-15])+b[r-16]|0;for(var s=0;s<64;++s){var t=q+h(n)+e(n,o,p)+m[s]+b[s]|0,u=g(c)+f(c,d,k)|0;q=p,p=o,o=n,n=l+t|0,l=k,k=d,d=c,c=t+u|0}this._a=c+this._a|0,this._b=d+this._b|0,this._c=k+this._c|0,this._d=l+this._d|0,this._e=n+this._e|0,this._f=o+this._f|0,this._g=p+this._g|0,this._h=q+this._h|0},d.prototype._hash=function(){var a=new c(32);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a.writeInt32BE(this._h,28),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":282,buffer:34,inherits:173}],288:[function(a,b,c){(function(c){function d(){this.init(),this._w=h,g.call(this,128,112)}var e=a("inherits"),f=a("./sha512"),g=a("./hash"),h=new Array(160);e(d,f),d.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(48);return a(this._ah,this._al,0),a(this._bh,this._bl,8),a(this._ch,this._cl,16),a(this._dh,this._dl,24),a(this._eh,this._el,32),a(this._fh,this._fl,40),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":282,"./sha512":289,buffer:34,inherits:173}],289:[function(a,b,c){(function(c){function d(){this.init(),this._w=q,o.call(this,128,112)}function e(a,b,c){return c^a&(b^c)}function f(a,b,c){return a&b|c&(a|b)}function g(a,b){return(a>>>28|b<<4)^(b>>>2|a<<30)^(b>>>7|a<<25)}function h(a,b){return(a>>>14|b<<18)^(a>>>18|b<<14)^(b>>>9|a<<23)}function i(a,b){return(a>>>1|b<<31)^(a>>>8|b<<24)^a>>>7}function j(a,b){return(a>>>1|b<<31)^(a>>>8|b<<24)^(a>>>7|b<<25)}function k(a,b){return(a>>>19|b<<13)^(b>>>29|a<<3)^a>>>6}function l(a,b){return(a>>>19|b<<13)^(b>>>29|a<<3)^(a>>>6|b<<26)}function m(a,b){return a>>>0<b>>>0?1:0}var n=a("inherits"),o=a("./hash"),p=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],q=new Array(160);n(d,o),d.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},d.prototype._update=function(a){for(var b=this._w,c=0|this._ah,d=0|this._bh,n=0|this._ch,o=0|this._dh,q=0|this._eh,r=0|this._fh,s=0|this._gh,t=0|this._hh,u=0|this._al,v=0|this._bl,w=0|this._cl,x=0|this._dl,y=0|this._el,z=0|this._fl,A=0|this._gl,B=0|this._hl,C=0;C<32;C+=2)b[C]=a.readInt32BE(4*C),b[C+1]=a.readInt32BE(4*C+4);for(;C<160;C+=2){var D=b[C-30],E=b[C-30+1],F=i(D,E),G=j(E,D);D=b[C-4],E=b[C-4+1];var H=k(D,E),I=l(E,D),J=b[C-14],K=b[C-14+1],L=b[C-32],M=b[C-32+1],N=G+K|0,O=F+J+m(N,G)|0;N=N+I|0,O=O+H+m(N,I)|0,N=N+M|0,O=O+L+m(N,M)|0,b[C]=O,b[C+1]=N}for(var P=0;P<160;P+=2){O=b[P],N=b[P+1];var Q=f(c,d,n),R=f(u,v,w),S=g(c,u),T=g(u,c),U=h(q,y),V=h(y,q),W=p[P],X=p[P+1],Y=e(q,r,s),Z=e(y,z,A),$=B+V|0,_=t+U+m($,B)|0;$=$+Z|0,_=_+Y+m($,Z)|0,$=$+X|0,_=_+W+m($,X)|0,$=$+N|0,_=_+O+m($,N)|0;var aa=T+R|0,ba=S+Q+m(aa,T)|0;t=s,B=A,s=r,A=z,r=q,z=y,y=x+$|0,q=o+_+m(y,x)|0,o=n,x=w,n=d,w=v,d=c,v=u,u=$+aa|0,c=_+ba+m(u,$)|0}this._al=this._al+u|0,this._bl=this._bl+v|0,this._cl=this._cl+w|0,this._dl=this._dl+x|0,this._el=this._el+y|0,this._fl=this._fl+z|0,this._gl=this._gl+A|0,this._hl=this._hl+B|0,this._ah=this._ah+c+m(this._al,u)|0,this._bh=this._bh+d+m(this._bl,v)|0,this._ch=this._ch+n+m(this._cl,w)|0,this._dh=this._dh+o+m(this._dl,x)|0,this._eh=this._eh+q+m(this._el,y)|0,this._fh=this._fh+r+m(this._fl,z)|0,this._gh=this._gh+s+m(this._gl,A)|0,this._hh=this._hh+t+m(this._hl,B)|0},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(64);return a(this._ah,this._al,0),a(this._bh,this._bl,8),a(this._ch,this._cl,16),a(this._dh,this._dl,24),a(this._eh,this._el,32),a(this._fh,this._fl,40),a(this._gh,this._gl,48),a(this._hh,this._hl,56),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":282,buffer:34,inherits:173}],290:[function(a,b,c){var d=a("sha.js"),e=a("buffer").Buffer,f=a("json-stable-stringify");b.exports=function(a,b,c){return a="string"==typeof a?a:e.isBuffer(a)?a:f(a),d(b||"sha1").update(a,e.isBuffer(a)?null:"utf8").digest(c||"hex")}},{buffer:34,"json-stable-stringify":180,"sha.js":283}],291:[function(a,b,c){"use strict";!function(){function a(){var a={},b=[];return a.data=function(c){return arguments.length?(b=c.slice(),a):b},a.mb=function(){var a,c,d=b.length;if(1===d)a=0,c=b[0][1];else{for(var e,f,g,h=0,i=0,j=0,k=0,l=0;l<d;l++)e=b[l],f=e[0],g=e[1],h+=f,i+=g,j+=f*f,k+=f*g;a=(d*k-h*i)/(d*j-h*h),c=i/d-a*h/d}return{m:a,b:c}},a.m=function(){return a.mb().m},a.b=function(){return a.mb().b},a.line=function(){var b=a.mb(),c=b.m,d=b.b;return function(a){return d+c*a}},a}function c(a,b){if(a.length<2)return 1;for(var c,d=0,e=0;e<a.length;e++)d+=a[e][1];c=d/a.length;for(var f=0,g=0;g<a.length;g++)f+=Math.pow(c-a[g][1],2);for(var h=0,i=0;i<a.length;i++)h+=Math.pow(a[i][1]-b(a[i][0]),2);return 1-h/f}function d(){var a={},b=0,c={};return a.train=function(a,d){c[d]||(c[d]={});for(var e in a){var f=a[e];void 0===c[d][e]&&(c[d][e]={}),void 0===c[d][e][f]&&(c[d][e][f]=0),c[d][e][a[e]]++}b++},a.score=function(a){var d,e={};for(var f in a){var g=a[f];for(d in c)void 0===e[d]&&(e[d]={}),c[d][f]?e[d][f+"_"+g]=(c[d][f][g]||0)/b:e[d][f+"_"+g]=0}var h={};for(d in e)for(var i in e[d])void 0===h[d]&&(h[d]=0),h[d]+=e[d][i];return h},a}function e(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b}function f(a){return 0===a.length?null:e(a)/a.length}function g(a){if(0===a.length)return null;for(var b=1,c=0;c<a.length;c++){if(a[c]<=0)return null;b*=a[c]}return Math.pow(b,1/a.length)}function h(a){if(0===a.length)return null;for(var b=0,c=0;c<a.length;c++){if(a[c]<=0)return null;b+=1/a[c]}return a.length/b}function i(a){if(0===a.length)return null;for(var b=0,c=0;c<a.length;c++)b+=Math.pow(a[c],2);return Math.sqrt(b/a.length)}function j(a){for(var b,c=0;c<a.length;c++)(a[c]<b||void 0===b)&&(b=a[c]);return b}function k(a){for(var b,c=0;c<a.length;c++)(a[c]>b||void 0===b)&&(b=a[c]);return b}function l(a){if(0===a.length)return null;for(var b=f(a),c=[],d=0;d<a.length;d++)c.push(Math.pow(a[d]-b,2));return f(c)}function m(a){return 0===a.length?null:Math.sqrt(l(a))}function n(a,b){for(var c=f(a),d=0,e=0;e<a.length;e++)d+=Math.pow(a[e]-c,b);return d}function o(a){if(a.length<=1)return null;var b=n(a,2);return b/(a.length-1)}function p(a){return a.length<=1?null:Math.sqrt(o(a))}function q(a,b){if(a.length<=1||a.length!==b.length)return null;for(var c=f(a),d=f(b),e=0,g=0;g<a.length;g++)e+=(a[g]-c)*(b[g]-d);return e/(a.length-1)}function r(a,b){var c=q(a,b),d=p(a),e=p(b);return null===c||null===d||null===e?null:c/d/e}function s(a){if(0===a.length)return null;var b=a.slice().sort(function(a,b){return a-b});if(b.length%2===1)return b[(b.length-1)/2];var c=b[b.length/2-1],d=b[b.length/2];return(c+d)/2}function t(a){if(0===a.length)return null;if(1===a.length)return a[0];for(var b,c=a.slice().sort(function(a,b){return a-b}),d=c[0],e=0,f=1,g=1;g<c.length+1;g++)c[g]!==d?(f>e&&(e=f,b=d),f=1,d=c[g]):f++;return b}function u(a,b){var c=f(a),d=m(a),e=Math.sqrt(a.length);return(c-b)/(d/e)}function v(a,b,c){var d=a.length,e=b.length;if(!d||!e)return null;c||(c=0);var g=f(a),h=f(b),i=((d-1)*o(a)+(e-1)*o(b))/(d+e-2);return(g-h-c)/Math.sqrt(i*(1/d+1/e))}function w(a,b){var c=[];if(b<=0)return null;for(var d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}function x(a,b){b=b||Math.random;for(var c,d,e=a.length;e>0;)d=Math.floor(b()*e--),c=a[e],a[e]=a[d],a[d]=c;return a}function y(a,b){return a=a.slice(),x(a.slice(),b)}function z(a,b,c){var d=y(a,c);return d.slice(0,b)}function A(a,b){var c=a.length*b;return b<0||b>1?null:1===b?a[a.length-1]:0===b?a[0]:c%1!==0?a[Math.ceil(c)-1]:a.length%2===0?(a[c-1]+a[c])/2:a[c]}function B(a,b){if(0===a.length)return null;var c=a.slice().sort(function(a,b){return a-b});if(b.length){for(var d=[],e=0;e<b.length;e++)d[e]=A(c,b[e]);return d}return A(c,b)}function C(a){return 0===a.length?null:B(a,.75)-B(a,.25)}function D(a){if(!a||0===a.length)return null;for(var b=s(a),c=[],d=0;d<a.length;d++)c.push(Math.abs(a[d]-b));return s(c)}function E(a,b){var c,d,e=[],f=[],g=0;for(c=0;c<a.length+1;c++){var h=[],i=[];for(d=0;d<b+1;d++)h.push(0),i.push(0);e.push(h),f.push(i)}for(c=1;c<b+1;c++)for(e[1][c]=1,f[1][c]=0,d=2;d<a.length+1;d++)f[d][c]=1/0;for(var j=2;j<a.length+1;j++){for(var k=0,l=0,m=0,n=0,o=1;o<j+1;o++){var p=j-o+1,q=a[p-1];if(m++,k+=q,l+=q*q,g=l-k*k/m,n=p-1,0!==n)for(d=2;d<b+1;d++)f[j][d]>=g+f[n][d-1]&&(e[j][d]=p,f[j][d]=g+f[n][d-1])}e[j][1]=1,f[j][1]=g}return{lower_class_limits:e,variance_combinations:f}}function F(a,b,c){var d=a.length,e=[],f=c;for(e[c]=a[a.length-1];f>0;)e[f-1]=a[b[d][f]-1],d=b[d][f]-1,f--;return e}function G(a,b){if(b>a.length)return null;a=a.slice().sort(function(a,b){return a-b});var c=E(a,b),d=c.lower_class_limits;return F(a,d,b)}function H(a){if(a.length<3)return null;var b=a.length,c=Math.pow(p(a),3),d=n(a,3);return b*d/((b-1)*(b-2)*c)}function I(a){var b=1/(1+.5*Math.abs(a)),c=b*Math.exp(-Math.pow(a,2)-1.26551223+1.00002368*b+.37409196*Math.pow(b,2)+.09678418*Math.pow(b,3)-.18628806*Math.pow(b,4)+.27886807*Math.pow(b,5)-1.13520398*Math.pow(b,6)+1.48851587*Math.pow(b,7)-.82215223*Math.pow(b,8)+.17087277*Math.pow(b,9));return a>=0?1-c:c-1}function J(a){var b=Math.abs(a),c=Math.min(Math.round(100*b),S.length-1);return a>=0?S[c]:+(1-S[c]).toFixed(4)}function K(a,b,c){return(a-b)/c}function L(a){if(a<0)return null;for(var b=1,c=2;c<=a;c++)b*=c;return b}function M(a,b){function c(a,b,c){return L(b)/(L(a)*L(b-a))*(Math.pow(c,a)*Math.pow(1-c,b-a))}if(b<0||b>1||a<=0||a%1!==0)return null;var d=0,e=0,f={};do f[d]=c(d,a,b),e+=f[d],d++;while(e<1-T);return f}function N(a){return a<0||a>1?null:M(1,a)}function O(a){function b(a,b){return Math.pow(Math.E,-b)*Math.pow(b,a)/L(a)}if(a<=0)return null;var c=0,d=0,e={};do e[c]=b(c,a),d+=e[c],c++;while(d<1-T);return e}function P(a,b,c){for(var d,e,g=f(a),h=0,i=1,j=b(g),k=[],l=[],m=0;m<a.length;m++)void 0===k[a[m]]&&(k[a[m]]=0),k[a[m]]++;for(m=0;m<k.length;m++)void 0===k[m]&&(k[m]=0);for(e in j)e in k&&(l[e]=j[e]*a.length);for(e=l.length-1;e>=0;e--)l[e]<3&&(l[e-1]+=l[e],l.pop(),k[e-1]+=k[e],k.pop());for(e=0;e<k.length;e++)h+=Math.pow(k[e]-l[e],2)/l[e];return d=k.length-i-1,U[d][c]<h}function Q(a){function b(a){return function(){var b=Array.prototype.slice.apply(arguments);return b.unshift(this),R[a].apply(R,b)}}var c=!(!Object.defineProperty||!Object.defineProperties);if(!c)throw new Error("without defineProperty, simple-statistics cannot be mixed in");var d,e=["median","standard_deviation","sum","sample_skewness","mean","min","max","quantile","geometric_mean","harmonic_mean","root_mean_square"];d=a?a.slice():Array.prototype;for(var f=0;f<e.length;f++)Object.defineProperty(d,e[f],{value:b(e[f]),configurable:!0,enumerable:!1,writable:!0});return d}var R={};"undefined"!=typeof b?b.exports=R:this.ss=R;var S=[.5,.504,.508,.512,.516,.5199,.5239,.5279,.5319,.5359,.5398,.5438,.5478,.5517,.5557,.5596,.5636,.5675,.5714,.5753,.5793,.5832,.5871,.591,.5948,.5987,.6026,.6064,.6103,.6141,.6179,.6217,.6255,.6293,.6331,.6368,.6406,.6443,.648,.6517,.6554,.6591,.6628,.6664,.67,.6736,.6772,.6808,.6844,.6879,.6915,.695,.6985,.7019,.7054,.7088,.7123,.7157,.719,.7224,.7257,.7291,.7324,.7357,.7389,.7422,.7454,.7486,.7517,.7549,.758,.7611,.7642,.7673,.7704,.7734,.7764,.7794,.7823,.7852,.7881,.791,.7939,.7967,.7995,.8023,.8051,.8078,.8106,.8133,.8159,.8186,.8212,.8238,.8264,.8289,.8315,.834,.8365,.8389,.8413,.8438,.8461,.8485,.8508,.8531,.8554,.8577,.8599,.8621,.8643,.8665,.8686,.8708,.8729,.8749,.877,.879,.881,.883,.8849,.8869,.8888,.8907,.8925,.8944,.8962,.898,.8997,.9015,.9032,.9049,.9066,.9082,.9099,.9115,.9131,.9147,.9162,.9177,.9192,.9207,.9222,.9236,.9251,.9265,.9279,.9292,.9306,.9319,.9332,.9345,.9357,.937,.9382,.9394,.9406,.9418,.9429,.9441,.9452,.9463,.9474,.9484,.9495,.9505,.9515,.9525,.9535,.9545,.9554,.9564,.9573,.9582,.9591,.9599,.9608,.9616,.9625,.9633,.9641,.9649,.9656,.9664,.9671,.9678,.9686,.9693,.9699,.9706,.9713,.9719,.9726,.9732,.9738,.9744,.975,.9756,.9761,.9767,.9772,.9778,.9783,.9788,.9793,.9798,.9803,.9808,.9812,.9817,.9821,.9826,.983,.9834,.9838,.9842,.9846,.985,.9854,.9857,.9861,.9864,.9868,.9871,.9875,.9878,.9881,.9884,.9887,.989,.9893,.9896,.9898,.9901,.9904,.9906,.9909,.9911,.9913,.9916,.9918,.992,.9922,.9925,.9927,.9929,.9931,.9932,.9934,.9936,.9938,.994,.9941,.9943,.9945,.9946,.9948,.9949,.9951,.9952,.9953,.9955,.9956,.9957,.9959,.996,.9961,.9962,.9963,.9964,.9965,.9966,.9967,.9968,.9969,.997,.9971,.9972,.9973,.9974,.9974,.9975,.9976,.9977,.9977,.9978,.9979,.9979,.998,.9981,.9981,.9982,.9982,.9983,.9984,.9984,.9985,.9985,.9986,.9986,.9987,.9987,.9987,.9988,.9988,.9989,.9989,.9989,.999,.999],T=1e-4,U={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}};R.linear_regression=a,R.standard_deviation=m,R.r_squared=c,R.median=s,R.mean=f,R.mode=t,R.min=j,R.max=k,R.sum=e,R.quantile=B,R.quantile_sorted=A,R.iqr=C,R.mad=D,R.chunk=w,R.shuffle=y,R.shuffle_in_place=x,R.sample=z,R.sample_covariance=q,R.sample_correlation=r,R.sample_variance=o,R.sample_standard_deviation=p,R.sample_skewness=H,R.geometric_mean=g,R.harmonic_mean=h,R.root_mean_square=i,R.variance=l,R.t_test=u,R.t_test_two_sample=v,R.jenksMatrices=E,R.jenksBreaks=F,R.jenks=G,R.bayesian=d,R.epsilon=T,R.factorial=L,R.bernoulli_distribution=N,R.binomial_distribution=M,R.poisson_distribution=O,R.chi_squared_goodness_of_fit=P,R.z_score=K,R.cumulative_std_normal_probability=J,R.standard_normal_table=S,R.error_function=I,R.average=f,R.interquartile_range=C,R.mixin=Q,R.median_absolute_deviation=D,R.rms=i,R.erf=I}(this)},{}],292:[function(a,b,c){function d(){this._array=[],this._set=Object.create(null)}var e=a("./util"),f=Object.prototype.hasOwnProperty;d.fromArray=function(a,b){for(var c=new d,e=0,f=a.length;e<f;e++)c.add(a[e],b);return c},d.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},d.prototype.add=function(a,b){var c=e.toSetString(a),d=f.call(this._set,c),g=this._array.length;d&&!b||this._array.push(a),d||(this._set[c]=g)},d.prototype.has=function(a){var b=e.toSetString(a);return f.call(this._set,b)},d.prototype.indexOf=function(a){var b=e.toSetString(a);if(f.call(this._set,b))return this._set[b];throw new Error('"'+a+'" is not in the set.')},d.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},d.prototype.toArray=function(){return this._array.slice()},c.ArraySet=d},{"./util":301}],293:[function(a,b,c){function d(a){return a<0?(-a<<1)+1:(a<<1)+0}function e(a){var b=1===(1&a),c=a>>1;return b?-c:c}var f=a("./base64"),g=5,h=1<<g,i=h-1,j=h;c.encode=function(a){var b,c="",e=d(a);do b=e&i,e>>>=g,e>0&&(b|=j),c+=f.encode(b);while(e>0);return c},c.decode=function(a,b,c){var d,h,k=a.length,l=0,m=0;do{if(b>=k)throw new Error("Expected more digits in base 64 VLQ value.");if(h=f.decode(a.charCodeAt(b++)),h===-1)throw new Error("Invalid base64 digit: "+a.charAt(b-1));d=!!(h&j),h&=i,l+=h<<m,m+=g}while(d);c.value=e(l),c.rest=b}},{"./base64":294}],294:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");c.encode=function(a){if(0<=a&&a<d.length)return d[a];throw new TypeError("Must be between 0 and 63: "+a)},c.decode=function(a){var b=65,c=90,d=97,e=122,f=48,g=57,h=43,i=47,j=26,k=52;return b<=a&&a<=c?a-b:d<=a&&a<=e?a-d+j:f<=a&&a<=g?a-f+k:a==h?62:a==i?63:-1}},{}],295:[function(a,b,c){function d(a,b,e,f,g,h){var i=Math.floor((b-a)/2)+a,j=g(e,f[i],!0);return 0===j?i:j>0?b-i>1?d(i,b,e,f,g,h):h==c.LEAST_UPPER_BOUND?b<f.length?b:-1:i:i-a>1?d(a,i,e,f,g,h):h==c.LEAST_UPPER_BOUND?i:a<0?-1:a}c.GREATEST_LOWER_BOUND=1,c.LEAST_UPPER_BOUND=2,c.search=function(a,b,e,f){if(0===b.length)return-1;var g=d(-1,b.length,a,b,e,f||c.GREATEST_LOWER_BOUND);if(g<0)return-1;for(;g-1>=0&&0===e(b[g],b[g-1],!0);)--g;return g}},{}],296:[function(a,b,c){function d(a,b){var c=a.generatedLine,d=b.generatedLine,e=a.generatedColumn,g=b.generatedColumn;return d>c||d==c&&g>=e||f.compareByGeneratedPositionsInflated(a,b)<=0}function e(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var f=a("./util");e.prototype.unsortedForEach=function(a,b){this._array.forEach(a,b)},e.prototype.add=function(a){d(this._last,a)?(this._last=a,this._array.push(a)):(this._sorted=!1,this._array.push(a))},e.prototype.toArray=function(){return this._sorted||(this._array.sort(f.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},c.MappingList=e},{"./util":301}],297:[function(a,b,c){function d(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function e(a,b){return Math.round(a+Math.random()*(b-a))}function f(a,b,c,g){if(c<g){var h=e(c,g),i=c-1;d(a,h,g);for(var j=a[g],k=c;k<g;k++)b(a[k],j)<=0&&(i+=1,d(a,i,k));d(a,i+1,k);var l=i+1;f(a,b,c,l-1),f(a,b,l+1,g)}}c.quickSort=function(a,b){f(a,b,0,a.length-1)}},{}],298:[function(a,b,c){function d(a){var b=a;return"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,""))),null!=b.sections?new g(b):new e(b)}function e(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=h.getArg(b,"version"),d=h.getArg(b,"sources"),e=h.getArg(b,"names",[]),f=h.getArg(b,"sourceRoot",null),g=h.getArg(b,"sourcesContent",null),i=h.getArg(b,"mappings"),k=h.getArg(b,"file",null);if(c!=this._version)throw new Error("Unsupported version: "+c);
d=d.map(String).map(h.normalize).map(function(a){return f&&h.isAbsolute(f)&&h.isAbsolute(a)?h.relative(f,a):a}),this._names=j.fromArray(e.map(String),!0),this._sources=j.fromArray(d,!0),this.sourceRoot=f,this.sourcesContent=g,this._mappings=i,this.file=k}function f(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function g(a){var b=a;"string"==typeof a&&(b=JSON.parse(a.replace(/^\)\]\}'/,"")));var c=h.getArg(b,"version"),e=h.getArg(b,"sections");if(c!=this._version)throw new Error("Unsupported version: "+c);this._sources=new j,this._names=new j;var f={line:-1,column:0};this._sections=e.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var b=h.getArg(a,"offset"),c=h.getArg(b,"line"),e=h.getArg(b,"column");if(c<f.line||c===f.line&&e<f.column)throw new Error("Section offsets must be ordered and non-overlapping.");return f=b,{generatedOffset:{generatedLine:c+1,generatedColumn:e+1},consumer:new d(h.getArg(a,"map"))}})}var h=a("./util"),i=a("./binary-search"),j=a("./array-set").ArraySet,k=a("./base64-vlq"),l=a("./quick-sort").quickSort;d.fromSourceMap=function(a){return e.fromSourceMap(a)},d.prototype._version=3,d.prototype.__generatedMappings=null,Object.defineProperty(d.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),d.prototype.__originalMappings=null,Object.defineProperty(d.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),d.prototype._charIsMappingSeparator=function(a,b){var c=a.charAt(b);return";"===c||","===c},d.prototype._parseMappings=function(a,b){throw new Error("Subclasses must implement _parseMappings")},d.GENERATED_ORDER=1,d.ORIGINAL_ORDER=2,d.GREATEST_LOWER_BOUND=1,d.LEAST_UPPER_BOUND=2,d.prototype.eachMapping=function(a,b,c){var e,f=b||null,g=c||d.GENERATED_ORDER;switch(g){case d.GENERATED_ORDER:e=this._generatedMappings;break;case d.ORIGINAL_ORDER:e=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;e.map(function(a){var b=null===a.source?null:this._sources.at(a.source);return null!=b&&null!=i&&(b=h.join(i,b)),{source:b,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:null===a.name?null:this._names.at(a.name)}},this).forEach(a,f)},d.prototype.allGeneratedPositionsFor=function(a){var b=h.getArg(a,"line"),c={source:h.getArg(a,"source"),originalLine:b,originalColumn:h.getArg(a,"column",0)};if(null!=this.sourceRoot&&(c.source=h.relative(this.sourceRoot,c.source)),!this._sources.has(c.source))return[];c.source=this._sources.indexOf(c.source);var d=[],e=this._findMapping(c,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(e>=0){var f=this._originalMappings[e];if(void 0===a.column)for(var g=f.originalLine;f&&f.originalLine===g;)d.push({line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[++e];else for(var j=f.originalColumn;f&&f.originalLine===b&&f.originalColumn==j;)d.push({line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}),f=this._originalMappings[++e]}return d},c.SourceMapConsumer=d,e.prototype=Object.create(d.prototype),e.prototype.consumer=d,e.fromSourceMap=function(a){var b=Object.create(e.prototype),c=b._names=j.fromArray(a._names.toArray(),!0),d=b._sources=j.fromArray(a._sources.toArray(),!0);b.sourceRoot=a._sourceRoot,b.sourcesContent=a._generateSourcesContent(b._sources.toArray(),b.sourceRoot),b.file=a._file;for(var g=a._mappings.toArray().slice(),i=b.__generatedMappings=[],k=b.__originalMappings=[],m=0,n=g.length;m<n;m++){var o=g[m],p=new f;p.generatedLine=o.generatedLine,p.generatedColumn=o.generatedColumn,o.source&&(p.source=d.indexOf(o.source),p.originalLine=o.originalLine,p.originalColumn=o.originalColumn,o.name&&(p.name=c.indexOf(o.name)),k.push(p)),i.push(p)}return l(b.__originalMappings,h.compareByOriginalPositions),b},e.prototype._version=3,Object.defineProperty(e.prototype,"sources",{get:function(){return this._sources.toArray().map(function(a){return null!=this.sourceRoot?h.join(this.sourceRoot,a):a},this)}}),e.prototype._parseMappings=function(a,b){for(var c,d,e,g,i,j=1,m=0,n=0,o=0,p=0,q=0,r=a.length,s=0,t={},u={},v=[],w=[];s<r;)if(";"===a.charAt(s))j++,s++,m=0;else if(","===a.charAt(s))s++;else{for(c=new f,c.generatedLine=j,g=s;g<r&&!this._charIsMappingSeparator(a,g);g++);if(d=a.slice(s,g),e=t[d])s+=d.length;else{for(e=[];s<g;)k.decode(a,s,u),i=u.value,s=u.rest,e.push(i);if(2===e.length)throw new Error("Found a source, but no line and column");if(3===e.length)throw new Error("Found a source and line, but no column");t[d]=e}c.generatedColumn=m+e[0],m=c.generatedColumn,e.length>1&&(c.source=p+e[1],p+=e[1],c.originalLine=n+e[2],n=c.originalLine,c.originalLine+=1,c.originalColumn=o+e[3],o=c.originalColumn,e.length>4&&(c.name=q+e[4],q+=e[4])),w.push(c),"number"==typeof c.originalLine&&v.push(c)}l(w,h.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,l(v,h.compareByOriginalPositions),this.__originalMappings=v},e.prototype._findMapping=function(a,b,c,d,e,f){if(a[c]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+a[c]);if(a[d]<0)throw new TypeError("Column must be greater than or equal to 0, got "+a[d]);return i.search(a,b,e,f)},e.prototype.computeColumnSpans=function(){for(var a=0;a<this._generatedMappings.length;++a){var b=this._generatedMappings[a];if(a+1<this._generatedMappings.length){var c=this._generatedMappings[a+1];if(b.generatedLine===c.generatedLine){b.lastGeneratedColumn=c.generatedColumn-1;continue}}b.lastGeneratedColumn=1/0}},e.prototype.originalPositionFor=function(a){var b={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")},c=this._findMapping(b,this._generatedMappings,"generatedLine","generatedColumn",h.compareByGeneratedPositionsDeflated,h.getArg(a,"bias",d.GREATEST_LOWER_BOUND));if(c>=0){var e=this._generatedMappings[c];if(e.generatedLine===b.generatedLine){var f=h.getArg(e,"source",null);null!==f&&(f=this._sources.at(f),null!=this.sourceRoot&&(f=h.join(this.sourceRoot,f)));var g=h.getArg(e,"name",null);return null!==g&&(g=this._names.at(g)),{source:f,line:h.getArg(e,"originalLine",null),column:h.getArg(e,"originalColumn",null),name:g}}}return{source:null,line:null,column:null,name:null}},e.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(a){return null==a}))},e.prototype.sourceContentFor=function(a,b){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(a=h.relative(this.sourceRoot,a)),this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];var c;if(null!=this.sourceRoot&&(c=h.urlParse(this.sourceRoot))){var d=a.replace(/^file:\/\//,"");if("file"==c.scheme&&this._sources.has(d))return this.sourcesContent[this._sources.indexOf(d)];if((!c.path||"/"==c.path)&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}if(b)return null;throw new Error('"'+a+'" is not in the SourceMap.')},e.prototype.generatedPositionFor=function(a){var b=h.getArg(a,"source");if(null!=this.sourceRoot&&(b=h.relative(this.sourceRoot,b)),!this._sources.has(b))return{line:null,column:null,lastColumn:null};b=this._sources.indexOf(b);var c={source:b,originalLine:h.getArg(a,"line"),originalColumn:h.getArg(a,"column")},e=this._findMapping(c,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,h.getArg(a,"bias",d.GREATEST_LOWER_BOUND));if(e>=0){var f=this._originalMappings[e];if(f.source===c.source)return{line:h.getArg(f,"generatedLine",null),column:h.getArg(f,"generatedColumn",null),lastColumn:h.getArg(f,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},c.BasicSourceMapConsumer=e,g.prototype=Object.create(d.prototype),g.prototype.constructor=d,g.prototype._version=3,Object.defineProperty(g.prototype,"sources",{get:function(){for(var a=[],b=0;b<this._sections.length;b++)for(var c=0;c<this._sections[b].consumer.sources.length;c++)a.push(this._sections[b].consumer.sources[c]);return a}}),g.prototype.originalPositionFor=function(a){var b={generatedLine:h.getArg(a,"line"),generatedColumn:h.getArg(a,"column")},c=i.search(b,this._sections,function(a,b){var c=a.generatedLine-b.generatedOffset.generatedLine;return c?c:a.generatedColumn-b.generatedOffset.generatedColumn}),d=this._sections[c];return d?d.consumer.originalPositionFor({line:b.generatedLine-(d.generatedOffset.generatedLine-1),column:b.generatedColumn-(d.generatedOffset.generatedLine===b.generatedLine?d.generatedOffset.generatedColumn-1:0),bias:a.bias}):{source:null,line:null,column:null,name:null}},g.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(a){return a.consumer.hasContentsOfAllSources()})},g.prototype.sourceContentFor=function(a,b){for(var c=0;c<this._sections.length;c++){var d=this._sections[c],e=d.consumer.sourceContentFor(a,!0);if(e)return e}if(b)return null;throw new Error('"'+a+'" is not in the SourceMap.')},g.prototype.generatedPositionFor=function(a){for(var b=0;b<this._sections.length;b++){var c=this._sections[b];if(c.consumer.sources.indexOf(h.getArg(a,"source"))!==-1){var d=c.consumer.generatedPositionFor(a);if(d){var e={line:d.line+(c.generatedOffset.generatedLine-1),column:d.column+(c.generatedOffset.generatedLine===d.line?c.generatedOffset.generatedColumn-1:0)};return e}}}return{line:null,column:null}},g.prototype._parseMappings=function(a,b){this.__generatedMappings=[],this.__originalMappings=[];for(var c=0;c<this._sections.length;c++)for(var d=this._sections[c],e=d.consumer._generatedMappings,f=0;f<e.length;f++){var g=e[f],i=d.consumer._sources.at(g.source);null!==d.consumer.sourceRoot&&(i=h.join(d.consumer.sourceRoot,i)),this._sources.add(i),i=this._sources.indexOf(i);var j=d.consumer._names.at(g.name);this._names.add(j),j=this._names.indexOf(j);var k={source:i,generatedLine:g.generatedLine+(d.generatedOffset.generatedLine-1),generatedColumn:g.generatedColumn+(d.generatedOffset.generatedLine===g.generatedLine?d.generatedOffset.generatedColumn-1:0),originalLine:g.originalLine,originalColumn:g.originalColumn,name:j};this.__generatedMappings.push(k),"number"==typeof k.originalLine&&this.__originalMappings.push(k)}l(this.__generatedMappings,h.compareByGeneratedPositionsDeflated),l(this.__originalMappings,h.compareByOriginalPositions)},c.IndexedSourceMapConsumer=g},{"./array-set":292,"./base64-vlq":293,"./binary-search":295,"./quick-sort":297,"./util":301}],299:[function(a,b,c){function d(a){a||(a={}),this._file=f.getArg(a,"file",null),this._sourceRoot=f.getArg(a,"sourceRoot",null),this._skipValidation=f.getArg(a,"skipValidation",!1),this._sources=new g,this._names=new g,this._mappings=new h,this._sourcesContents=null}var e=a("./base64-vlq"),f=a("./util"),g=a("./array-set").ArraySet,h=a("./mapping-list").MappingList;d.prototype._version=3,d.fromSourceMap=function(a){var b=a.sourceRoot,c=new d({file:a.file,sourceRoot:b});return a.eachMapping(function(a){var d={generated:{line:a.generatedLine,column:a.generatedColumn}};null!=a.source&&(d.source=a.source,null!=b&&(d.source=f.relative(b,d.source)),d.original={line:a.originalLine,column:a.originalColumn},null!=a.name&&(d.name=a.name)),c.addMapping(d)}),a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&c.setSourceContent(b,d)}),c},d.prototype.addMapping=function(a){var b=f.getArg(a,"generated"),c=f.getArg(a,"original",null),d=f.getArg(a,"source",null),e=f.getArg(a,"name",null);this._skipValidation||this._validateMapping(b,c,d,e),null!=d&&(d=String(d),this._sources.has(d)||this._sources.add(d)),null!=e&&(e=String(e),this._names.has(e)||this._names.add(e)),this._mappings.add({generatedLine:b.line,generatedColumn:b.column,originalLine:null!=c&&c.line,originalColumn:null!=c&&c.column,source:d,name:e})},d.prototype.setSourceContent=function(a,b){var c=a;null!=this._sourceRoot&&(c=f.relative(this._sourceRoot,c)),null!=b?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[f.toSetString(c)]=b):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(c)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},d.prototype.applySourceMap=function(a,b,c){var d=b;if(null==b){if(null==a.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');d=a.file}var e=this._sourceRoot;null!=e&&(d=f.relative(e,d));var h=new g,i=new g;this._mappings.unsortedForEach(function(b){if(b.source===d&&null!=b.originalLine){var g=a.originalPositionFor({line:b.originalLine,column:b.originalColumn});null!=g.source&&(b.source=g.source,null!=c&&(b.source=f.join(c,b.source)),null!=e&&(b.source=f.relative(e,b.source)),b.originalLine=g.line,b.originalColumn=g.column,null!=g.name&&(b.name=g.name))}var j=b.source;null==j||h.has(j)||h.add(j);var k=b.name;null==k||i.has(k)||i.add(k)},this),this._sources=h,this._names=i,a.sources.forEach(function(b){var d=a.sourceContentFor(b);null!=d&&(null!=c&&(b=f.join(c,b)),null!=e&&(b=f.relative(e,b)),this.setSourceContent(b,d))},this)},d.prototype._validateMapping=function(a,b,c,d){if((!(a&&"line"in a&&"column"in a&&a.line>0&&a.column>=0)||b||c||d)&&!(a&&"line"in a&&"column"in a&&b&&"line"in b&&"column"in b&&a.line>0&&a.column>=0&&b.line>0&&b.column>=0&&c))throw new Error("Invalid mapping: "+JSON.stringify({generated:a,source:c,original:b,name:d}))},d.prototype._serializeMappings=function(){for(var a,b,c,d,g=0,h=1,i=0,j=0,k=0,l=0,m="",n=this._mappings.toArray(),o=0,p=n.length;o<p;o++){if(b=n[o],a="",b.generatedLine!==h)for(g=0;b.generatedLine!==h;)a+=";",h++;else if(o>0){if(!f.compareByGeneratedPositionsInflated(b,n[o-1]))continue;a+=","}a+=e.encode(b.generatedColumn-g),g=b.generatedColumn,null!=b.source&&(d=this._sources.indexOf(b.source),a+=e.encode(d-l),l=d,a+=e.encode(b.originalLine-1-j),j=b.originalLine-1,a+=e.encode(b.originalColumn-i),i=b.originalColumn,null!=b.name&&(c=this._names.indexOf(b.name),a+=e.encode(c-k),k=c)),m+=a}return m},d.prototype._generateSourcesContent=function(a,b){return a.map(function(a){if(!this._sourcesContents)return null;null!=b&&(a=f.relative(b,a));var c=f.toSetString(a);return Object.prototype.hasOwnProperty.call(this._sourcesContents,c)?this._sourcesContents[c]:null},this)},d.prototype.toJSON=function(){var a={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(a.file=this._file),null!=this._sourceRoot&&(a.sourceRoot=this._sourceRoot),this._sourcesContents&&(a.sourcesContent=this._generateSourcesContent(a.sources,a.sourceRoot)),a},d.prototype.toString=function(){return JSON.stringify(this.toJSON())},c.SourceMapGenerator=d},{"./array-set":292,"./base64-vlq":293,"./mapping-list":296,"./util":301}],300:[function(a,b,c){function d(a,b,c,d,e){this.children=[],this.sourceContents={},this.line=null==a?null:a,this.column=null==b?null:b,this.source=null==c?null:c,this.name=null==e?null:e,this[i]=!0,null!=d&&this.add(d)}var e=a("./source-map-generator").SourceMapGenerator,f=a("./util"),g=/(\r?\n)/,h=10,i="$$$isSourceNode$$$";d.fromStringWithSourceMap=function(a,b,c){function e(a,b){if(null===a||void 0===a.source)h.add(b);else{var e=c?f.join(c,a.source):a.source;h.add(new d(a.originalLine,a.originalColumn,e,b,a.name))}}var h=new d,i=a.split(g),j=function(){var a=i.shift(),b=i.shift()||"";return a+b},k=1,l=0,m=null;return b.eachMapping(function(a){if(null!==m){if(!(k<a.generatedLine)){var b=i[0],c=b.substr(0,a.generatedColumn-l);return i[0]=b.substr(a.generatedColumn-l),l=a.generatedColumn,e(m,c),void(m=a)}e(m,j()),k++,l=0}for(;k<a.generatedLine;)h.add(j()),k++;if(l<a.generatedColumn){var b=i[0];h.add(b.substr(0,a.generatedColumn)),i[0]=b.substr(a.generatedColumn),l=a.generatedColumn}m=a},this),i.length>0&&(m&&e(m,j()),h.add(i.join(""))),b.sources.forEach(function(a){var d=b.sourceContentFor(a);null!=d&&(null!=c&&(a=f.join(c,a)),h.setSourceContent(a,d))}),h},d.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(a){this.add(a)},this);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);a&&this.children.push(a)}return this},d.prototype.prepend=function(a){if(Array.isArray(a))for(var b=a.length-1;b>=0;b--)this.prepend(a[b]);else{if(!a[i]&&"string"!=typeof a)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);this.children.unshift(a)}return this},d.prototype.walk=function(a){for(var b,c=0,d=this.children.length;c<d;c++)b=this.children[c],b[i]?b.walk(a):""!==b&&a(b,{source:this.source,line:this.line,column:this.column,name:this.name})},d.prototype.join=function(a){var b,c,d=this.children.length;if(d>0){for(b=[],c=0;c<d-1;c++)b.push(this.children[c]),b.push(a);b.push(this.children[c]),this.children=b}return this},d.prototype.replaceRight=function(a,b){var c=this.children[this.children.length-1];return c[i]?c.replaceRight(a,b):"string"==typeof c?this.children[this.children.length-1]=c.replace(a,b):this.children.push("".replace(a,b)),this},d.prototype.setSourceContent=function(a,b){this.sourceContents[f.toSetString(a)]=b},d.prototype.walkSourceContents=function(a){for(var b=0,c=this.children.length;b<c;b++)this.children[b][i]&&this.children[b].walkSourceContents(a);for(var d=Object.keys(this.sourceContents),b=0,c=d.length;b<c;b++)a(f.fromSetString(d[b]),this.sourceContents[d[b]])},d.prototype.toString=function(){var a="";return this.walk(function(b){a+=b}),a},d.prototype.toStringWithSourceMap=function(a){var b={code:"",line:1,column:0},c=new e(a),d=!1,f=null,g=null,i=null,j=null;return this.walk(function(a,e){b.code+=a,null!==e.source&&null!==e.line&&null!==e.column?(f===e.source&&g===e.line&&i===e.column&&j===e.name||c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name}),f=e.source,g=e.line,i=e.column,j=e.name,d=!0):d&&(c.addMapping({generated:{line:b.line,column:b.column}}),f=null,d=!1);for(var k=0,l=a.length;k<l;k++)a.charCodeAt(k)===h?(b.line++,b.column=0,k+1===l?(f=null,d=!1):d&&c.addMapping({source:e.source,original:{line:e.line,column:e.column},generated:{line:b.line,column:b.column},name:e.name})):b.column++}),this.walkSourceContents(function(a,b){c.setSourceContent(a,b)}),{code:b.code,map:c}},c.SourceNode=d},{"./source-map-generator":299,"./util":301}],301:[function(a,b,c){function d(a,b,c){if(b in a)return a[b];if(3===arguments.length)return c;throw new Error('"'+b+'" is a required argument.')}function e(a){var b=a.match(r);return b?{scheme:b[1],auth:b[2],host:b[3],port:b[4],path:b[5]}:null}function f(a){var b="";return a.scheme&&(b+=a.scheme+":"),b+="//",a.auth&&(b+=a.auth+"@"),a.host&&(b+=a.host),a.port&&(b+=":"+a.port),a.path&&(b+=a.path),b}function g(a){var b=a,d=e(a);if(d){if(!d.path)return a;b=d.path}for(var g,h=c.isAbsolute(b),i=b.split(/\/+/),j=0,k=i.length-1;k>=0;k--)g=i[k],"."===g?i.splice(k,1):".."===g?j++:j>0&&(""===g?(i.splice(k+1,j),j=0):(i.splice(k,2),j--));return b=i.join("/"),""===b&&(b=h?"/":"."),d?(d.path=b,f(d)):b}function h(a,b){""===a&&(a="."),""===b&&(b=".");var c=e(b),d=e(a);if(d&&(a=d.path||"/"),c&&!c.scheme)return d&&(c.scheme=d.scheme),f(c);if(c||b.match(s))return b;if(d&&!d.host&&!d.path)return d.host=b,f(d);var h="/"===b.charAt(0)?b:g(a.replace(/\/+$/,"")+"/"+b);return d?(d.path=h,f(d)):h}function i(a,b){""===a&&(a="."),a=a.replace(/\/$/,"");for(var c=0;0!==b.indexOf(a+"/");){var d=a.lastIndexOf("/");if(d<0)return b;if(a=a.slice(0,d),a.match(/^([^\/]+:\/)?\/*$/))return b;++c}return Array(c+1).join("../")+b.substr(a.length+1)}function j(a){return a}function k(a){return m(a)?"$"+a:a}function l(a){return m(a)?a.slice(1):a}function m(a){if(!a)return!1;var b=a.length;if(b<9)return!1;if(95!==a.charCodeAt(b-1)||95!==a.charCodeAt(b-2)||111!==a.charCodeAt(b-3)||116!==a.charCodeAt(b-4)||111!==a.charCodeAt(b-5)||114!==a.charCodeAt(b-6)||112!==a.charCodeAt(b-7)||95!==a.charCodeAt(b-8)||95!==a.charCodeAt(b-9))return!1;for(var c=b-10;c>=0;c--)if(36!==a.charCodeAt(c))return!1;return!0}function n(a,b,c){var d=a.source-b.source;return 0!==d?d:(d=a.originalLine-b.originalLine,0!==d?d:(d=a.originalColumn-b.originalColumn,0!==d||c?d:(d=a.generatedColumn-b.generatedColumn,0!==d?d:(d=a.generatedLine-b.generatedLine,0!==d?d:a.name-b.name))))}function o(a,b,c){var d=a.generatedLine-b.generatedLine;return 0!==d?d:(d=a.generatedColumn-b.generatedColumn,0!==d||c?d:(d=a.source-b.source,0!==d?d:(d=a.originalLine-b.originalLine,0!==d?d:(d=a.originalColumn-b.originalColumn,0!==d?d:a.name-b.name))))}function p(a,b){return a===b?0:a>b?1:-1}function q(a,b){var c=a.generatedLine-b.generatedLine;return 0!==c?c:(c=a.generatedColumn-b.generatedColumn,0!==c?c:(c=p(a.source,b.source),0!==c?c:(c=a.originalLine-b.originalLine,0!==c?c:(c=a.originalColumn-b.originalColumn,0!==c?c:p(a.name,b.name)))))}c.getArg=d;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,s=/^data:.+\,.+$/;c.urlParse=e,c.urlGenerate=f,c.normalize=g,c.join=h,c.isAbsolute=function(a){return"/"===a.charAt(0)||!!a.match(r)},c.relative=i;var t=function(){var a=Object.create(null);return!("__proto__"in a)}();c.toSetString=t?j:k,c.fromSetString=t?j:l,c.compareByOriginalPositions=n,c.compareByGeneratedPositionsDeflated=o,c.compareByGeneratedPositionsInflated=q},{}],302:[function(a,b,c){c.SourceMapGenerator=a("./lib/source-map-generator").SourceMapGenerator,c.SourceMapConsumer=a("./lib/source-map-consumer").SourceMapConsumer,c.SourceNode=a("./lib/source-node").SourceNode},{"./lib/source-map-consumer":298,"./lib/source-map-generator":299,"./lib/source-node":300}],303:[function(a,b,c){function d(){e.call(this)}b.exports=d;var e=a("events").EventEmitter,f=a("inherits");f(d,e),d.Readable=a("readable-stream/readable.js"),d.Writable=a("readable-stream/writable.js"),d.Duplex=a("readable-stream/duplex.js"),d.Transform=a("readable-stream/transform.js"),d.PassThrough=a("readable-stream/passthrough.js"),d.Stream=d,d.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function d(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===e.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",d),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",d),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:152,inherits:173,"readable-stream/duplex.js":258,"readable-stream/passthrough.js":264,"readable-stream/readable.js":265,"readable-stream/transform.js":266,"readable-stream/writable.js":267}],304:[function(a,b,c){function d(a,b){function c(a){a.length<2||(a[0].pipe(a[1]),c(a.slice(1)))}function d(){var a=[].slice.call(arguments);a.unshift("error"),k.emit.apply(k,a)}for(var g=0;g<a.length;g++)a[g]=e(a[g],b);if(0==a.length)return new f(b);if(1==a.length)return a[0];var i=a[0],j=a[a.length-1],k=h(b,i,j);c(a);for(var g=1;g<a.length-1;g++)a[g].on("error",d);return k}function e(a,b){return"function"==typeof a.read?a:new g(b).wrap(a)}var f=a("readable-stream").PassThrough,g=a("readable-stream").Readable,h=a("duplexer2");b.exports=function(){var a;return a=1==arguments.length&&Array.isArray(arguments[0])?arguments[0]:[].slice.call(arguments),d(a)},b.exports.obj=function(){var a;return a=1==arguments.length&&Array.isArray(arguments[0])?arguments[0]:[].slice.call(arguments),d(a,{objectMode:!0})}},{duplexer2:134,"readable-stream":265}],305:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);b||Array.isArray(a)||(b=a,a=[]),a||(a=[]),b||(b={}),e.call(this,b);var c=this;this._options=b,this._wrapOptions={objectMode:b.objectMode!==!1},this._streams=[],this.splice.apply(this,[0,0].concat(a)),this.once("finish",function(){c._notEmpty(),c._streams[0].end()})}var e=a("readable-stream").Duplex,f=a("readable-stream").PassThrough,g=a("readable-stream").Readable,h=a("inherits"),i="undefined"!=typeof setImmediate?setImmediate:c.nextTick;b.exports=d,h(d,e),b.exports.obj=function(a,b){return b||Array.isArray(a)||(b=a,a=[]),a||(a=[]),b||(b={}),b.objectMode=!0,new d(a,b)},d.prototype._read=function(){var a=this;this._notEmpty();for(var b,c=this._streams[this._streams.length-1],d=0;null!==(b=c.read());)e.prototype.push.call(this,b),d++;if(0===d){var f=function(){c.removeListener("readable",f),a.removeListener("_mutate",f),a._read()};c.once("readable",f),a.once("_mutate",f)}},d.prototype._write=function(a,b,c){this._notEmpty(),this._streams[0]._write(a,b,c)},d.prototype._notEmpty=function(){var a=this;if(!(this._streams.length>0)){var b=new f(this._options);b.once("end",function(){var c=a._streams.indexOf(b);c>=0&&c===a._streams.length-1&&e.prototype.push.call(a,null)}),this._streams.push(b),this.length=this._streams.length}},d.prototype.push=function(a){var b=[this._streams.length,0].concat([].slice.call(arguments));return this.splice.apply(this,b),this._streams.length},d.prototype.pop=function(){return this.splice(this._streams.length-1,1)[0]},d.prototype.shift=function(){return this.splice(0,1)[0]},d.prototype.unshift=function(){return this.splice.apply(this,[0,0].concat([].slice.call(arguments))),this._streams.length},d.prototype.splice=function(a,b){var c=this,f=this._streams.length;a=a<0?f-a:a,void 0===b&&(b=f-a),b=Math.max(0,Math.min(f-a,b));for(var g=a;g<a+b;g++)c._streams[g-1]&&c._streams[g-1].unpipe(c._streams[g]);c._streams[g-1]&&c._streams[g]&&c._streams[g-1].unpipe(c._streams[g]);for(var h=g,i=[],j=arguments,k=2;k<j.length;k++)(function(a){Array.isArray(a)&&(a=new d(a,c._options)),a.on("error",function(a){a.stream=this,c.emit("error",a)}),a=c._wrapStream(a),a.once("end",function(){var b=c._streams.indexOf(a);b>=0&&b===c._streams.length-1&&e.prototype.push.call(c,null)}),i.push(a)})(arguments[k]);for(var g=0;g<i.length-1;g++)i[g].pipe(i[g+1]);i.length&&c._streams[h]&&i[i.length-1].pipe(c._streams[h]),i[0]&&c._streams[a-1]&&c._streams[a-1].pipe(i[0]);for(var l=[a,b].concat(i),m=c._streams.splice.apply(c._streams,l),g=0;g<i.length;g++)i[g].read(0);return this.emit("_mutate"),this.length=this._streams.length,m},d.prototype.get=function(){if(0!==arguments.length){for(var a=this,b=0;b<arguments.length;b++){var c=arguments[b];if(a=c<0?a._streams[a._streams.length+c]:a._streams[c],!a)return}return a}},d.prototype.indexOf=function(a){return this._streams.indexOf(a)},d.prototype._wrapStream=function(a){if("function"==typeof a.read)return a;var b=new g(this._wrapOptions).wrap(a);return b._write=function(b,c,d){a.write(b)===!1?a.once("drain",d):i(d)},b}}).call(this,a("_process"))},{_process:256,inherits:173,"readable-stream":265}],306:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&d<=56319)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&d<=56319){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(b<=2&&c>>4==14){this.charLength=3;break}if(b<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:34}],307:[function(require,module,exports){function parse(a,b){return b||(b={}),aparse(a,{ecmaVersion:b.ecmaVersion||8,allowHashBang:!0})}function errorInfo(a,b,c){try{parse(a,c)}catch(c){return new ParseError(c,a,b)}}function ParseError(a,b,c){SyntaxError.call(this),this.message=a.message.replace(/\s+\(\d+:\d+\)$/,""),this.line=a.loc.line,this.column=a.loc.column+1,this.annotated="\n"+(c||"(anonymous file)")+":"+this.line+"\n"+b.split("\n")[this.line-1]+"\n"+Array(this.column).join(" ")+"^\nParseError: "+this.message}var aparse=require("acorn").parse;module.exports=function(src,file,opts){"string"!=typeof src&&(src=String(src));try{return void eval('throw "STOP"; (function () { '+src+"})()")}catch(a){if("STOP"===a)return;return"SyntaxError"!==a.constructor.name?a:errorInfo(src,file,opts)}},ParseError.prototype=Object.create(SyntaxError.prototype),ParseError.prototype.toString=function(){return this.annotated},ParseError.prototype.inspect=function(){return this.annotated}},{acorn:3}],308:[function(a,b,c){"use strict";b.exports=function(a,b,c){return a+" ? "+b+" : "+c}},{}],309:[function(a,b,c){(function(d){function e(a,b,c){function e(){for(;j.length&&!l.paused;){var a=j.shift();if(null===a)return l.emit("end");l.emit("data",a)}}function g(){l.writable=!1,b.call(l),!l.readable&&l.autoDestroy&&l.destroy()}a=a||function(a){this.queue(a)},b=b||function(){this.queue(null)};var h=!1,i=!1,j=[],k=!1,l=new f;return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(c&&c.autoDestroy===!1),l.write=function(b){return a.call(this,b),!l.paused},l.queue=l.push=function(a){return k?l:(null===a&&(k=!0),j.push(a),e(),l)},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&d.nextTick(function(){l.destroy()})}),l.end=function(a){if(!h)return h=!0,arguments.length&&l.write(a),g(),l},l.destroy=function(){if(!i)return i=!0,h=!0,j.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),e(),l.paused||l.emit("drain"),l},l}var f=a("stream");c=b.exports=e,e.through=e}).call(this,a("_process"))},{_process:256,
stream:303}],310:[function(a,b,c){arguments[4][259][0].apply(c,arguments)},{"./_stream_readable":312,"./_stream_writable":314,"core-util-is":126,dup:259,inherits:173,"process-nextick-args":255}],311:[function(a,b,c){arguments[4][260][0].apply(c,arguments)},{"./_stream_transform":313,"core-util-is":126,dup:260,inherits:173}],312:[function(a,b,c){(function(c){"use strict";function d(a,b,c){return"function"==typeof a.prependListener?a.prependListener(b,c):void(a._events&&a._events[b]?E(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c))}function e(b,c){C=C||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof C&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(M||(M=a("string_decoder/").StringDecoder),this.decoder=new M(b.encoding),this.encoding=b.encoding)}function f(b){return C=C||a("./_stream_duplex"),this instanceof f?(this._readableState=new e(b,this),this.readable=!0,b&&"function"==typeof b.read&&(this._read=b.read),void G.call(this)):new f(b)}function g(a,b,c,d,e){var f=k(b,c);if(f)a.emit("error",f);else if(null===c)b.reading=!1,l(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var g=new Error("stream.push() after EOF");a.emit("error",g)}else if(b.endEmitted&&e){var i=new Error("stream.unshift() after end event");a.emit("error",i)}else{var j;!b.decoder||e||d||(c=b.decoder.write(c),j=!b.objectMode&&0===c.length),e||(b.reading=!1),j||(b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&m(a))),o(a,b)}else e||(b.reading=!1);return h(b)}function h(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function i(a){return a>=P?a=P:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function j(a,b){return a<=0||0===b.length&&b.ended?0:b.objectMode?1:a!==a?b.flowing&&b.length?b.buffer.head.data.length:b.length:(a>b.highWaterMark&&(b.highWaterMark=i(a)),a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0))}function k(a,b){var c=null;return H.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function l(a,b){if(!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,m(a)}}function m(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(L("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?D(n,a):n(a))}function n(a){L("emit readable"),a.emit("readable"),u(a)}function o(a,b){b.readingMore||(b.readingMore=!0,D(p,a,b))}function p(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(L("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function q(a){return function(){var b=a._readableState;L("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&F(a,"data")&&(b.flowing=!0,u(a))}}function r(a){L("readable nexttick read 0"),a.read(0)}function s(a,b){b.resumeScheduled||(b.resumeScheduled=!0,D(t,a,b))}function t(a,b){b.reading||(L("resume read 0"),a.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,a.emit("resume"),u(a),b.flowing&&!b.reading&&a.read(0)}function u(a){var b=a._readableState;for(L("flow",b.flowing);b.flowing&&null!==a.read(););}function v(a,b){if(0===b.length)return null;var c;return b.objectMode?c=b.buffer.shift():!a||a>=b.length?(c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear()):c=w(a,b.buffer,b.decoder),c}function w(a,b,c){var d;return a<b.head.data.length?(d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a)):d=a===b.head.data.length?b.shift():c?x(a,b):y(a,b),d}function x(a,b){var c=b.head,d=1,e=c.data;for(a-=e.length;c=c.next;){var f=c.data,g=a>f.length?f.length:a;if(e+=g===f.length?f:f.slice(0,a),a-=g,0===a){g===f.length?(++d,c.next?b.head=c.next:b.head=b.tail=null):(b.head=c,c.data=f.slice(g));break}++d}return b.length-=d,e}function y(a,b){var c=I.allocUnsafe(a),d=b.head,e=1;for(d.data.copy(c),a-=d.data.length;d=d.next;){var f=d.data,g=a>f.length?f.length:a;if(f.copy(c,c.length-a,0,g),a-=g,0===a){g===f.length?(++e,d.next?b.head=d.next:b.head=b.tail=null):(b.head=d,d.data=f.slice(g));break}++e}return b.length-=e,c}function z(a){var b=a._readableState;if(b.length>0)throw new Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,D(A,b,a))}function A(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function B(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}b.exports=f;var C,D=a("process-nextick-args"),E=a("isarray");f.ReadableState=e;var F=(a("events").EventEmitter,function(a,b){return a.listeners(b).length}),G=a("./internal/streams/stream"),H=a("buffer").Buffer,I=a("buffer-shims"),J=a("core-util-is");J.inherits=a("inherits");var K=a("util"),L=void 0;L=K&&K.debuglog?K.debuglog("stream"):function(){};var M,N=a("./internal/streams/BufferList");J.inherits(f,G);var O=["error","close","destroy","pause","resume"];f.prototype.push=function(a,b){var c=this._readableState;return c.objectMode||"string"!=typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=I.from(a,b),b="")),g(this,c,a,b,!1)},f.prototype.unshift=function(a){var b=this._readableState;return g(this,b,a,"",!0)},f.prototype.isPaused=function(){return this._readableState.flowing===!1},f.prototype.setEncoding=function(b){return M||(M=a("string_decoder/").StringDecoder),this._readableState.decoder=new M(b),this._readableState.encoding=b,this};var P=8388608;f.prototype.read=function(a){L("read",a),a=parseInt(a,10);var b=this._readableState,c=a;if(0!==a&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return L("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?z(this):m(this),null;if(a=j(a,b),0===a&&b.ended)return 0===b.length&&z(this),null;var d=b.needReadable;L("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,L("length less than watermark",d)),b.ended||b.reading?(d=!1,L("reading or ended",d)):d&&(L("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=j(c,b)));var e;return e=a>0?v(a,b):null,null===e?(b.needReadable=!0,a=0):b.length-=a,0===b.length&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&z(this)),null!==e&&this.emit("data",e),e},f.prototype._read=function(a){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(a,b){function e(a){L("onunpipe"),a===m&&g()}function f(){L("onend"),a.end()}function g(){L("cleanup"),a.removeListener("close",j),a.removeListener("finish",k),a.removeListener("drain",r),a.removeListener("error",i),a.removeListener("unpipe",e),m.removeListener("end",f),m.removeListener("end",g),m.removeListener("data",h),s=!0,!n.awaitDrain||a._writableState&&!a._writableState.needDrain||r()}function h(b){L("ondata"),t=!1;var c=a.write(b);!1!==c||t||((1===n.pipesCount&&n.pipes===a||n.pipesCount>1&&B(n.pipes,a)!==-1)&&!s&&(L("false write response, pause",m._readableState.awaitDrain),m._readableState.awaitDrain++,t=!0),m.pause())}function i(b){L("onerror",b),l(),a.removeListener("error",i),0===F(a,"error")&&a.emit("error",b)}function j(){a.removeListener("finish",k),l()}function k(){L("onfinish"),a.removeListener("close",j),l()}function l(){L("unpipe"),m.unpipe(a)}var m=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=a;break;case 1:n.pipes=[n.pipes,a];break;default:n.pipes.push(a)}n.pipesCount+=1,L("pipe count=%d opts=%j",n.pipesCount,b);var o=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,p=o?f:g;n.endEmitted?D(p):m.once("end",p),a.on("unpipe",e);var r=q(m);a.on("drain",r);var s=!1,t=!1;return m.on("data",h),d(a,"error",i),a.once("close",j),a.once("finish",k),a.emit("pipe",m),n.flowing||(L("pipe resume"),m.resume()),a},f.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;e<d;e++)c[e].emit("unpipe",this);return this}var f=B(b.pipes,a);return f===-1?this:(b.pipes.splice(f,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},f.prototype.on=function(a,b){var c=G.prototype.on.call(this,a,b);if("data"===a)this._readableState.flowing!==!1&&this.resume();else if("readable"===a){var d=this._readableState;d.endEmitted||d.readableListening||(d.readableListening=d.needReadable=!0,d.emittedReadable=!1,d.reading?d.length&&m(this,d):D(r,this))}return c},f.prototype.addListener=f.prototype.on,f.prototype.resume=function(){var a=this._readableState;return a.flowing||(L("resume"),a.flowing=!0,s(this,a)),this},f.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(L("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(L("wrapped data"),b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)void 0===this[e]&&"function"==typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));for(var f=0;f<O.length;f++)a.on(O[f],d.emit.bind(d,O[f]));return d._read=function(b){L("wrapped _read",b),c&&(c=!1,a.resume())},d},f._fromList=v}).call(this,a("_process"))},{"./_stream_duplex":310,"./internal/streams/BufferList":315,"./internal/streams/stream":316,_process:256,buffer:34,"buffer-shims":33,"core-util-is":126,events:152,inherits:173,isarray:178,"process-nextick-args":255,"string_decoder/":319,util:10}],313:[function(a,b,c){"use strict";function d(a){this.afterTransform=function(b,c){return e(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(a,c){g(b,a,c)}):g(b)})}function g(a,b,c){if(b)return a.emit("error",b);null!==c&&void 0!==c&&a.push(c);var d=a._writableState,e=a._transformState;if(d.length)throw new Error("Calling transform done when ws.length != 0");if(e.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("_transform() is not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":310,"core-util-is":126,inherits:173}],314:[function(a,b,c){(function(c){"use strict";function d(){}function e(a,b,c){this.chunk=a,this.encoding=b,this.callback=c,this.next=null}function f(b,c){x=x||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof x&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=b.decodeStrings===!1;this.decodeStrings=!f,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){o(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this)}function g(b){return x=x||a("./_stream_duplex"),F.call(g,this)||this instanceof x?(this._writableState=new f(b,this),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev)),void C.call(this)):new g(b)}function h(a,b){var c=new Error("write after end");a.emit("error",c),y(b,c)}function i(a,b,c,d){var e=!0,f=!1;return null===c?f=new TypeError("May not write null values to stream"):"string"==typeof c||void 0===c||b.objectMode||(f=new TypeError("Invalid non-string/buffer chunk")),f&&(a.emit("error",f),y(d,f),e=!1),e}function j(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=E.from(b,c)),b}function k(a,b,c,d,f,g){c||(d=j(b,d,f),D.isBuffer(d)&&(f="buffer"));var h=b.objectMode?1:d.length;b.length+=h;var i=b.length<b.highWaterMark;if(i||(b.needDrain=!0),b.writing||b.corked){var k=b.lastBufferedRequest;b.lastBufferedRequest=new e(d,f,g),k?k.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else l(a,b,!1,h,d,f,g);return i}function l(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function m(a,b,c,d,e){--b.pendingcb,c?y(e,d):e(d),a._writableState.errorEmitted=!0,a.emit("error",d)}function n(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function o(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if(n(c),b)m(a,c,d,b,e);else{var f=s(c);f||c.corked||c.bufferProcessing||!c.bufferedRequest||r(a,c),d?z(p,a,c,f,e):p(a,c,f,e)}}function p(a,b,c,d){c||q(a,b),b.pendingcb--,d(),u(a,b)}function q(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function r(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=b.bufferedRequestCount,e=new Array(d),f=b.corkedRequestsFree;f.entry=c;for(var g=0;c;)e[g]=c,c=c.next,g+=1;l(a,b,!0,b.length,e,"",f.finish),b.pendingcb++,b.lastBufferedRequest=null,f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new w(b)}else{for(;c;){var h=c.chunk,i=c.encoding,j=c.callback,k=b.objectMode?1:h.length;if(l(a,b,!1,k,h,i,j),c=c.next,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0,b.bufferedRequest=c,b.bufferProcessing=!1}function s(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function t(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function u(a,b){var c=s(b);return c&&(0===b.pendingcb?(t(a,b),b.finished=!0,a.emit("finish")):t(a,b)),c}function v(a,b,c){b.ending=!0,u(a,b),c&&(b.finished?y(c):a.once("finish",c)),b.ended=!0,a.writable=!1}function w(a){var b=this;this.next=null,this.entry=null,this.finish=function(c){var d=b.entry;for(b.entry=null;d;){var e=d.callback;a.pendingcb--,e(c),d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}b.exports=g;var x,y=a("process-nextick-args"),z=!c.browser&&["v0.10","v0.9."].indexOf(c.version.slice(0,5))>-1?setImmediate:y;g.WritableState=f;var A=a("core-util-is");A.inherits=a("inherits");var B={deprecate:a("util-deprecate")},C=a("./internal/streams/stream"),D=a("buffer").Buffer,E=a("buffer-shims");A.inherits(g,C),f.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b},function(){try{Object.defineProperty(f.prototype,"buffer",{get:B.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(a){}}();var F;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(a){return!!F.call(this,a)||a&&a._writableState instanceof f}})):F=function(a){return a instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(a,b,c){var e=this._writableState,f=!1,g=D.isBuffer(a);return"function"==typeof b&&(c=b,b=null),g?b="buffer":b||(b=e.defaultEncoding),"function"!=typeof c&&(c=d),e.ended?h(this,c):(g||i(this,e,a,c))&&(e.pendingcb++,f=k(this,e,g,a,b,c)),f},g.prototype.cork=function(){var a=this._writableState;a.corked++},g.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||r(this,a))},g.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);return this._writableState.defaultEncoding=a,this},g.prototype._write=function(a,b,c){c(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!==a&&void 0!==a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||v(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":310,"./internal/streams/stream":316,_process:256,buffer:34,"buffer-shims":33,"core-util-is":126,inherits:173,"process-nextick-args":255,"util-deprecate":400}],315:[function(a,b,c){"use strict";function d(){this.head=null,this.tail=null,this.length=0}var e=(a("buffer").Buffer,a("buffer-shims"));b.exports=d,d.prototype.push=function(a){var b={data:a,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length},d.prototype.unshift=function(a){var b={data:a,next:this.head};0===this.length&&(this.tail=b),this.head=b,++this.length},d.prototype.shift=function(){if(0!==this.length){var a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},d.prototype.clear=function(){this.head=this.tail=null,this.length=0},d.prototype.join=function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c},d.prototype.concat=function(a){if(0===this.length)return e.alloc(0);if(1===this.length)return this.head.data;for(var b=e.allocUnsafe(a>>>0),c=this.head,d=0;c;)c.data.copy(b,d),d+=c.data.length,c=c.next;return b}},{buffer:34,"buffer-shims":33}],316:[function(a,b,c){b.exports=a("events").EventEmitter},{events:152}],317:[function(a,b,c){c=b.exports=a("./lib/_stream_readable.js"),c.Stream=c,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":310,"./lib/_stream_passthrough.js":311,"./lib/_stream_readable.js":312,"./lib/_stream_transform.js":313,"./lib/_stream_writable.js":314}],318:[function(a,b,c){b.exports=a("./readable").Transform},{"./readable":317}],319:[function(a,b,c){"use strict";function d(a){if(!a)return"utf8";for(var b;;)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase(),b=!0}}function e(a){var b=d(a);if("string"!=typeof b&&(s.isEncoding===t||!t(a)))throw new Error("Unknown encoding: "+a);return b||a}function f(a){this.encoding=e(a);var b;switch(this.encoding){case"utf16le":this.text=m,this.end=n,b=4;break;case"utf8":this.fillLast=j,b=4;break;case"base64":this.text=o,this.end=p,b=3;break;default:return this.write=q,void(this.end=r)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(b)}function g(a){return a<=127?0:a>>5===6?2:a>>4===14?3:a>>3===30?4:-1}function h(a,b,c){var d=b.length-1;if(d<c)return 0;var e=g(b[d]);return e>=0?(e>0&&(a.lastNeed=e-1),e):--d<c?0:(e=g(b[d]),e>=0?(e>0&&(a.lastNeed=e-2),e):--d<c?0:(e=g(b[d]),e>=0?(e>0&&(2===e?e=0:a.lastNeed=e-3),e):0))}function i(a,b,c){if(128!==(192&b[0]))return a.lastNeed=0,"�".repeat(c);if(a.lastNeed>1&&b.length>1){if(128!==(192&b[1]))return a.lastNeed=1,"�".repeat(c+1);if(a.lastNeed>2&&b.length>2&&128!==(192&b[2]))return a.lastNeed=2,"�".repeat(c+2)}}function j(a){var b=this.lastTotal-this.lastNeed,c=i(this,a,b);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,b,0,a.length),void(this.lastNeed-=a.length))}function k(a,b){var c=h(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;var d=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",b,d)}function l(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+"�".repeat(this.lastTotal-this.lastNeed):b}function m(a,b){if((a.length-b)%2===0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",b,a.length-1)}function n(a){var b=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,c)}return b}function o(a,b){var c=(a.length-b)%3;return 0===c?a.toString("base64",b):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",b,a.length-c))}function p(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function q(a){return a.toString(this.encoding)}function r(a){return a&&a.length?this.write(a):""}var s=a("safe-buffer").Buffer,t=s.isEncoding||function(a){switch(a=""+a,a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};c.StringDecoder=f,f.prototype.write=function(a){if(0===a.length)return"";var b,c;if(this.lastNeed){if(b=this.fillLast(a),void 0===b)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""},f.prototype.end=l,f.prototype.text=k,f.prototype.fillLast=function(a){return this.lastNeed<=a.length?(a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),void(this.lastNeed-=a.length))}},{"safe-buffer":280}],320:[function(a,b,c){(function(c){function d(a){g.call(this,a),this._destroyed=!1}function e(a,b,c){c(null,a)}function f(a){return function(b,c,d){return"function"==typeof b&&(d=c,c=b,b={}),"function"!=typeof c&&(c=e),"function"!=typeof d&&(d=null),a(b,c,d)}}var g=a("readable-stream/transform"),h=a("util").inherits,i=a("xtend");h(d,g),d.prototype.destroy=function(a){if(!this._destroyed){this._destroyed=!0;var b=this;c.nextTick(function(){a&&b.emit("error",a),b.emit("close")})}},b.exports=f(function(a,b,c){var e=new d(a);return e._transform=b,c&&(e._flush=c),e}),b.exports.ctor=f(function(a,b,c){function e(b){return this instanceof e?(this.options=i(a,b),void d.call(this,this.options)):new e(b)}return h(e,d),e.prototype._transform=b,c&&(e.prototype._flush=c),e}),b.exports.obj=f(function(a,b,c){var e=new d(i({objectMode:!0,highWaterMark:16},a));return e._transform=b,c&&(e._flush=c),e})}).call(this,a("_process"))},{_process:256,"readable-stream/transform":318,util:403,xtend:404}],321:[function(a,b,c){function d(){}d.prototype={on:function(a,b,c){var d=this.e||(this.e={});return(d[a]||(d[a]=[])).push({fn:b,ctx:c}),this},once:function(a,b,c){function d(){e.off(a,d),b.apply(c,arguments)}var e=this;return d._=b,this.on(a,d,c)},emit:function(a){var b=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),d=0,e=c.length;for(d;d<e;d++)c[d].fn.apply(c[d].ctx,b);return this},off:function(a,b){var c=this.e||(this.e={}),d=c[a],e=[];if(d&&b)for(var f=0,g=d.length;f<g;f++)d[f].fn!==b&&d[f].fn._!==b&&e.push(d[f]);return e.length?c[a]=e:delete c[a],this}},b.exports=d},{}],322:[function(a,b,c){var d=function(a,b){if(a<0)throw new Error("start must be a positive number");if(a>=b)throw new Error("start must be smaller than end");this.start=a,this.end=b};d.prototype={diff:function(){return this.end-this.start},isLast:function(a){return(0|a)===this.end}},b.exports=d},{}],323:[function(a,b,c){(function(c){function d(a,b){if(!b.steps)throw new Error("steps option missing");this.options=b,this.running=!1,this._tick=this._tick.bind(this),this._t0=+new Date,this.callback=a,this._time=0,this.itemsReady=!1,this.options=e.extend({animationDelay:0,maxDelta:.2,loop:void 0===b.loop||b.loop},this.options),this.steps(b.steps)}var e=a("./"),f=a("./animator-steps-range"),g=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame||function(a){return c.setTimeout(a,1e3/60)},h=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame||c.msCancelAnimationFrame||function(a){clearTimeout(a)};d.prototype={start:function(){this.running=!0,g(this._tick),this.options.onStart&&this.options.onStart(),1===this.stepsRange().diff()&&(this.running=!1)},isRunning:function(){return this.running},stop:function(){this.pause(),this.time(this.stepsRange().start),this.options.onStop&&this.options.onStop()},time:function(a){if(!arguments.length)return this._time;this._time=a;var b=this.range(this.domain(this._time));this.callback(b)},toggle:function(){this.running?this.pause():this.start()},rescale:function(){return this.domainInv=e.math.linear(this.options.animationDelay,this.options.animationDelay+this.options.animationDuration),this.domain=this.domainInv.invert(),this.range=e.math.linear(0,this._defaultStepsRange.end),this.rangeInv=this.range.invert(),this.time(this._time),this.running?this.start():this.pause(),this},duration:function(a){return arguments.length?(this.options.animationDuration=a,this.time()>a&&this.time(0),this.rescale(),this):this.options.animationDuration},steps:function(a){return this.options.steps=a,this._defaultStepsRange=new f(0,a),this.rescale()},stepsRange:function(a,b){if(2===arguments.length){if(a<this._defaultStepsRange.start)throw new Error("start must be within default steps range");if(b>this._defaultStepsRange.end)throw new Error("end must be within default steps range");this._customStepsRange=new f(a,b),this.options.onStepsRange&&this.options.onStepsRange();var c=0|this.step();(c<a||c>b)&&this.step(a)}return this._customStepsRange||this._defaultStepsRange},removeCustomStepsRange:function(){this._customStepsRange=void 0,this.options.onStepsRange&&this.options.onStepsRange()},step:function(a){return 0===arguments.length?this.range(this.domain(this._time)):void(this._time=this.domainInv(this.rangeInv(a)))},pause:function(){this.running=!1,h(this._tick),this.options.onPause&&this.options.onPause()},_tick:function(){var a=+new Date,b=.001*(a-this._t0);b=Math.min(this.options.maxDelta,b),this._t0=a,this._time+=b;var c=this.stepsRange();c.isLast(this.step())&&(this.options.loop?this.step(c.start):(this.time(this.options.animationDuration),this.pause())),this.running&&(this.time(this._time),g(this._tick))}},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":"torque.js","./animator-steps-range":322}],324:[function(a,b,c){var d={version:"1.0.0",style:{"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["src","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","darken","lighten"]}},layer:{"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"-torque-clear-color":{css:"-torque-clear-color",type:"color","default-value":"rgba(255, 255, 255, 0)","default-meaning":"full clear",doc:"color used to clear canvas on each frame"},"-torque-frame-count":{css:"-torque-frame-count","default-value":"128",type:"number","default-meaning":"the data is broken into 128 time frames",doc:"Number of animation steps/frames used in the animation. If the data contains a fewere number of total frames, the lesser value will be used."},"-torque-resolution":{css:"-torque-resolution","default-value":"2",type:"number","default-meaning":"",doc:"Spatial resolution in pixels. A resolution of 1 means no spatial aggregation of the data. Any other resolution of N results in spatial aggregation into cells of NxN pixels. The value N must be power of 2"},"-torque-animation-duration":{css:"-torque-animation-duration","default-value":"30",type:"number","default-meaning":"the animation lasts 30 seconds",doc:"Animation duration in seconds"},"-torque-aggregation-function":{css:"-torque-aggregation-function","default-value":"count(cartodb_id)",type:"string","default-meaning":"the value for each cell is the count of points in that cell",doc:"A function used to calculate a value from the aggregate data for each cell. See -torque-resolution"},"-torque-time-attribute":{css:"-torque-time-attribute","default-value":"time",type:"string","default-meaning":"the data column in your table that is of a time based type",doc:"The table column that contains the time information used create the animation"},"-torque-data-aggregation":{css:"-torque-data-aggregation","default-value":"linear",type:["cumulative"],"default-meaning":"previous values are discarded",doc:"A linear animation will discard previous values while a cumulative animation will accumulate them until it restarts"}},symbolizers:{"*":{"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["src","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","darken","lighten"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},trail:{steps:{css:"trail-steps",type:"float","default-value":1,
"default-meaning":"no trail steps",doc:"How many steps of trails are going to be rendered"}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"marker-type":{css:"marker-type",type:["rectangle","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an rectangle or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"float"}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]}};b.exports={version:{latest:d,"1.0.0":d}}},{}],325:[function(a,b,c){(function(c){function d(){}var e=c.carto||a("carto");d.prototype={},d.optionsFromLayer=function(a){var b={};if(!a)return b;var c={"buffer-size":"buffer-size","-torque-frame-count":"steps","-torque-resolution":"resolution","-torque-animation-duration":"animationDuration","-torque-aggregation-function":"countby","-torque-time-attribute":"column","-torque-data-aggregation":"data_aggregation"};for(var d in c){var e=a.eval(d);if(void 0!==e){var f=c[d];b[f]=e}}return b},d.optionsFromCartoCSS=function(a){var b=(new e.RendererJS).render(a),c=b.findLayer({name:"Map"});return d.optionsFromLayer(c)},b.exports.TorqueLayer=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{carto:"carto"}],326:[function(a,b,c){(function(a){function c(){for(var a=arguments,b=a[0],c=1;c<a.length;++c){var d=a[c];for(var e in d)b[e]=d[e]}return b}function d(a){return c({},a)}function e(a){return"function"==typeof a||!1}function f(a){return a&&"object"==typeof a&&"[object Array]"==Object.prototype.toString.call(a)}function g(){return!!document.createElement("canvas")}function h(){return"undefined"!=typeof navigator?navigator.userAgent:""}var i={};i.on=function(a,b){var c=this._evt_callbacks=this._evt_callbacks||{},d=c[a]||(c[a]=[]);return d.push(b),this},i.trigger=function(a){for(var b=this._evt_callbacks&&this._evt_callbacks[a],c=0;b&&c<b.length;++c)b[c].apply(this,Array.prototype.slice.call(arguments,1));return this},i.fire=i.trigger,i.off=function(a,b){var c=this._evt_callbacks&&this._evt_callbacks[a];if(c&&!b)return delete this._evt_callbacks[a],this;for(var d=[],e=0;c&&e<c.length;++e)c[e]===b&&d.push(e);for(;void 0!==(e=d.pop());)c.splice(e,1);return this},i.callbacks=function(a){return this._evt_callbacks&&this._evt_callbacks[a]||[]};var j={Uint8Array:"undefined"!=typeof a.Uint8Array?a.Uint8Array:Array,Uint8ClampedArray:"undefined"!=typeof a.Uint8ClampedArray?a.Uint8ClampedArray:Array,Uint32Array:"undefined"!=typeof a.Uint32Array?a.Uint32Array:Array,Int16Array:"undefined"!=typeof a.Int16Array?a.Int16Array:Array,Int32Array:"undefined"!=typeof a.Int32Array?a.Int32Array:Array},k={sprites_to_images:h().indexOf("Safari")===-1&&h().indexOf("Firefox")===-1};b.exports={Event:i,extend:c,clone:d,isFunction:e,isArray:f,types:j,isBrowserSupported:g,flags:k}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],327:[function(a,b,c){function d(a){function b(a,b){return function(){b.apply(a)}}this.isAdded_=!1,this.isAnimated_=!1,this.paneName_=d.DEFAULT_PANE_NAME_,this.updateHandler_=null,this.resizeHandler_=null,this.topLeft_=null,this.centerListener_=null,this.resizeListener_=null,this.needsResize_=!0,this.requestAnimationFrameId_=null;var c=document.createElement("canvas");c.style.position="absolute",c.style.top=0,c.style.left=0,c.style.pointerEvents="none",this.canvas=c,this.repositionFunction_=b(this,this.repositionCanvas_),this.resizeFunction_=b(this,this.resize_),this.requestUpdateFunction_=b(this,this.update_),a&&this.setOptions(a)}d.prototype=new google.maps.OverlayView,d.DEFAULT_PANE_NAME_="overlayLayer",d.CSS_TRANSFORM_=function(){for(var a=document.createElement("div"),b=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],c=0;c<b.length;c++){var d=b[c];if(void 0!==a.style[d])return d}return b[0]}(),d.prototype.requestAnimFrame_=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},d.prototype.cancelAnimFrame_=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){},d.prototype.setOptions=function(a){void 0!==a.animate&&this.setAnimate(a.animate),void 0!==a.paneName&&this.setPane(a.paneName),void 0!==a.updateHandler&&this.setUpdateHandler(a.updateHandler),void 0!==a.resizeHandler&&this.setResizeHandler(a.resizeHandler),a.readyHandler&&(this.readyHandler=a.readyHandler)},d.prototype.setAnimate=function(a){this.isAnimated_=!!a,this.isAnimated_&&this.scheduleUpdate()},d.prototype.isAnimated=function(){return this.isAnimated_},d.prototype.setPaneName=function(a){this.paneName_=a,this.setPane_()},d.prototype.setOpacity=function(a){this.canvas.style.opacity=a},d.prototype.getOpacity=function(){return this.canvas.style.opacity},d.prototype.getPaneName=function(){return this.paneName_},d.prototype.setPane_=function(){if(this.isAdded_){var a=this.getPanes();if(!a[this.paneName_])throw new Error('"'+this.paneName_+'" is not a valid MapPane name.');a[this.paneName_].appendChild(this.canvas)}},d.prototype.setResizeHandler=function(a){this.resizeHandler_=a},d.prototype.setUpdateHandler=function(a){this.updateHandler_=a},d.prototype.onAdd=function(){this.isAdded_||(this.isAdded_=!0,this.setPane_(),this.resizeListener_=google.maps.event.addListener(this.getMap(),"resize",this.resizeFunction_),this.centerListener_=google.maps.event.addListener(this.getMap(),"center_changed",this.repositionFunction_),this.resize_(),this.repositionCanvas_(),this.readyHandler&&this.readyHandler())},d.prototype.onRemove=function(){this.isAdded_&&(this.isAdded_=!1,this.topLeft_=null,this.canvas.parentElement.removeChild(this.canvas),this.centerListener_&&(google.maps.event.removeListener(this.centerListener_),this.centerListener_=null),this.resizeListener_&&(google.maps.event.removeListener(this.resizeListener_),this.resizeListener_=null),this.requestAnimationFrameId_&&(this.cancelAnimFrame_.call(window,this.requestAnimationFrameId_),this.requestAnimationFrameId_=null))},d.prototype.resize_=function(){if(this.isAdded_){var a=this.getMap(),b=a.getDiv().offsetWidth,c=a.getDiv().offsetHeight,d=this.canvas.width,e=this.canvas.height;d===b&&e===c||(this.canvas.width=b,this.canvas.height=c,this.canvas.style.width=b+"px",this.canvas.style.height=c+"px",this.needsResize_=!0,this.scheduleUpdate())}},d.prototype.draw=function(){this.repositionCanvas_()},d.prototype.repositionCanvas_=function(){var a=this.getMap().getBounds();this.topLeft_=new google.maps.LatLng(a.getNorthEast().lat(),a.getSouthWest().lng());var b=this.getProjection(),c=b.fromLatLngToDivPixel(this.topLeft_),e=256*(1<<this.getMap().getZoom());Math.abs(c.x)>e&&(c.x-=e),this.canvas.style[d.CSS_TRANSFORM_]="translate("+Math.round(c.x)+"px,"+Math.round(c.y)+"px)",this.scheduleUpdate()},d.prototype.update_=function(){this.requestAnimationFrameId_=null,this.isAdded_&&(this.isAnimated_&&this.scheduleUpdate(),this.needsResize_&&this.resizeHandler_&&(this.needsResize_=!1,this.resizeHandler_()),this.updateHandler_&&this.updateHandler_())},d.prototype.getTopLeft=function(){return this.topLeft_},d.prototype.scheduleUpdate=function(){this.isAdded_&&!this.requestAnimationFrameId_&&(this.requestAnimationFrameId_=this.requestAnimFrame_.call(window,this.requestUpdateFunction_))},b.exports=d},{}],328:[function(a,b,c){function d(a,b){this.tileSize=new google.maps.Size(256,256),this.maxZoom=19,this.name="Tile #s",this.alt="Canvas tile layer",this.tiles={},this.canvas_setup=a,this.render=b,b||(this.render=a)}d.prototype.create_tile_canvas=function(a,b,c){var d=c.createElement("canvas"),e=c.createElement("canvas");d.style.border=e.style.border="none",d.style.margin=e.style.margin="0",d.style.padding=e.style.padding="0";var f=d.getContext("2d");f.width=d.width=this.tileSize.width,f.height=d.height=this.tileSize.height;var g=e.getContext("2d");e.width=g.width=this.tileSize.width,e.height=g.height=this.tileSize.height;var h=a.x+"_"+a.y+"_"+b;return d.setAttribute("id",h),e.setAttribute("id",h),h in this.tiles&&delete this.tiles[h],this.tiles[h]={canvas:d,ctx:f,hit_canvas:e,hit_ctx:g,coord:a,zoom:b,primitives:null},this.canvas_setup&&this.canvas_setup(this.tiles[h],a,b),d},d.prototype.each=function(a){for(var b in this.tiles){var c=this.tiles[b];a(c)}},d.prototype.recreate=function(){for(var a in this.tiles){var b=this.tiles[a];this.canvas_setup(b,b.coord,b.zoom)}},d.prototype.redraw_tile=function(a){this.render(a,a.coord,a.zoom)},d.prototype.redraw=function(){for(var a in this.tiles){var b=this.tiles[a];this.render(b,b.coord,b.zoom)}},d.prototype.getTile=function(a,b,c){return this.create_tile_canvas(a,b,c)},d.prototype.releaseTile=function(a){var b=a.getAttribute("id");delete this.tiles[b]},b.exports=d},{}],329:[function(a,b,c){function d(){}d.prototype={_initTileLoader:function(a,b){this._map=a,this._projection=b,this._tiles={},this._tilesLoading={},this._tilesToLoad=0,this._updateTiles=this._updateTiles.bind(this),this._listeners=[],this._listeners.push(google.maps.event.addListener(this._map,"dragend",this._updateTiles),google.maps.event.addListener(this._map,"zoom_changed",this._updateTiles)),this.tileSize=256,this._updateTiles()},_removeTileLoader:function(){this._listeners.forEach(function(a){google.maps.event.removeListener(a)}),this._removeTiles()},_removeTiles:function(){for(var a in this._tiles)this._removeTile(a)},_reloadTiles:function(){this._removeTiles(),this._updateTiles()},_updateTiles:function(){if(this._map){var a=this._map.getBounds(),b=this._map.getZoom(),c=this.tileSize,d=1<<b,e=new google.maps.LatLng(a.getNorthEast().lat(),a.getSouthWest().lng()),f=new google.maps.LatLng(a.getSouthWest().lat(),a.getNorthEast().lng());this._projection=this._map.getProjection();var g=this._projection.fromLatLngToPoint(e),h=this._projection.fromLatLngToPoint(f),i=new google.maps.Point(Math.floor(g.x*d/c),Math.floor(g.y*d/c)),j=new google.maps.Point(Math.floor(h.x*d/c),Math.floor(h.y*d/c));this._addTilesFromCenterOut(i,j),this._removeOtherTiles(i,j)}},_removeOtherTiles:function(a,b){var c,d,e,f,g=this._map.getZoom();for(f in this._tiles)this._tiles.hasOwnProperty(f)&&(c=f.split(":"),d=parseInt(c[0],10),e=parseInt(c[1],10),z=parseInt(c[2],10),(z!==g||d<a.x||d>b.x||e<a.y||e>b.y)&&this._removeTile(f))},_removeTile:function(a){this.onTileRemoved&&this.onTileRemoved(this._tiles[a]),delete this._tiles[a],delete this._tilesLoading[a]},_tileKey:function(a){return a.x+":"+a.y+":"+a.zoom},_tileShouldBeLoaded:function(a){var b=this._tileKey(a);return!(b in this._tiles||b in this._tilesLoading)},_tileLoaded:function(a,b){this._tilesToLoad--;var c=a.x+":"+a.y+":"+a.zoom;this._tiles[c]=b,delete this._tilesLoading[c],0===this._tilesToLoad&&this.onTilesLoaded&&this.onTilesLoaded()},getTilePos:function(a){var b=1<<this._map.getZoom();a={x:(a.x%b+b)%b,y:a.y},a=new google.maps.Point(a.x*this.tileSize,a.y*this.tileSize);var c=this._map.getBounds(),d=new google.maps.LatLng(c.getNorthEast().lat(),c.getSouthWest().lng()),e=this._map.getProjection().fromLatLngToPoint(d);return zoom=1<<this._map.getZoom(),e.x=e.x*zoom,e.y=e.y*zoom,new google.maps.Point(a.x-e.x,a.y-e.y)},_addTilesFromCenterOut:function(a,b){function c(a){var b=a.x-h.x,c=a.y-h.y;return b*b+c*c}var d,e,f,g=[],h=new google.maps.Point(.5*(a.x+b.x),.5*(a.y+b.y)),i=this._map.getZoom();for(d=a.y;d<=b.y;d++)for(e=a.x;e<=b.x;e++)f=new google.maps.Point(e,d),f.zoom=i,this._tileShouldBeLoaded(f)&&g.push(f);var j=g.length;if(0!==j){for(g.sort(function(a,b){return c(a)-c(b)}),this._tilesToLoad+=j,e=0;e<j;e++){var k=g[e],l=this._tileKey(k);this._tilesLoading[l]=k,this.onTileAdded&&this.onTileAdded(k)}this.onTilesLoading&&this.onTilesLoading()}}},b.exports=d},{}],330:[function(a,b,c){var d={};"undefined"!=typeof google&&"undefined"!=typeof google.maps&&(d=a("./torque"),d.GMapsTileLoader=a("./gmaps_tileloader_mixin")),b.exports=d},{"./gmaps_tileloader_mixin":329,"./torque":331}],331:[function(a,b,c){(function(c){function d(a){var b=this;if(!g.isBrowserSupported())throw new Error("browser is not supported by torque");this.keys=[0],Object.defineProperty(this,"key",{get:function(){return this.getKey()}}),this.shader=null,this.ready=!1,this.options=g.extend({},a),this.options=g.extend({provider:"windshaft",renderer:"point",resolution:2,steps:100,visible:!0},this.options),a.cartocss&&g.extend(this.options,g.common.TorqueLayer.optionsFromCartoCSS(a.cartocss)),a.tileJSON&&(this.options.provider="tileJSON"),this.hidden=!this.options.visible,this.animator=new g.Animator(function(a){var c=0|a;b.getKey()!==c&&b.setKey(c)},g.extend(g.clone(this.options),{onPause:function(){b.fire("pause")},onStop:function(){b.fire("stop")},onStart:function(){b.fire("play")},onStepsRange:function(){b.fire("change:stepsRange",b.animator.stepsRange())}})),this.play=this.animator.start.bind(this.animator),this.stop=this.animator.stop.bind(this.animator),this.pause=this.animator.pause.bind(this.animator),this.toggle=this.animator.toggle.bind(this.animator),this.setDuration=this.animator.duration.bind(this.animator),this.isRunning=this.animator.isRunning.bind(this.animator),h.call(this,{animate:!1,updateHandler:this.render,readyHandler:this.initialize})}function e(a){this.options=g.extend({},a),i.call(this,this._loadTile.bind(this),this.drawTile.bind(this)),this.initialize(a)}var f=c.carto||a("carto"),g=a("../"),h=a("./CanvasLayer"),i=a("./canvas_tile_layer"),j=a("./gmaps_tileloader_mixin");d.prototype=g.extend({},h.prototype,j.prototype,g.Event,{providers:{sql_api:g.providers.json,url_template:g.providers.JsonArray,windshaft:g.providers.windshaft,tileJSON:g.providers.tileJSON},renderers:{point:g.renderer.Point,pixel:g.renderer.Rectangle},initialize:function(){var a=this;this.onTileAdded=this.onTileAdded.bind(this),this.options.ready=function(){a.fire("change:bounds",{bounds:a.provider.getBounds()}),a.animator.steps(a.provider.getSteps()),a.animator.rescale(),a.fire("change:steps",{steps:a.provider.getSteps()}),a.setKeys(a.getKeys())},this.provider=new this.providers[this.options.provider](this.options),this.renderer=new this.renderers[this.options.renderer](this.getCanvas(),this.options),this.renderer.options.errorCallback=this.options.errorCallback,this._cacheListener=google.maps.event.addListener(this.map,"zoom_changed",function(){a.renderer&&a.renderer.clearSpriteCache()}),this._initTileLoader(this.map,this.getProjection()),this.shader&&this.renderer.setShader(this.shader)},hide:function(){return this.hidden?this:(this.pause(),this.clear(),this.hidden=!0,this)},show:function(){return this.hidden?(this.hidden=!1,this.play(),1===this.options.steps&&this.redraw(),this):this},setSQL:function(a){if(this.provider.options.named_map)throw new Error("SQL queries on named maps are read-only");if(!this.provider||!this.provider.setSQL)throw new Error("this provider does not support SQL");return this.provider.setSQL(a),this._reloadTiles(),this},setBlendMode:function(a){this.renderer&&this.renderer.setBlendMode(a),this.redraw()},setSteps:function(a){this.provider&&this.provider.setSteps(a),this.animator&&this.animator.steps(a),this._reloadTiles()},setColumn:function(a,b){this.provider&&this.provider.setColumn(a,b),this._reloadTiles()},getTimeBounds:function(){return this.provider&&this.provider.getKeySpan()},getCanvas:function(){return this.canvas},onTileAdded:function(a){var b=this;this.provider.getTileData(a,a.zoom,function(c){a.zoom===b.map.getZoom()&&(b._tileLoaded(a,c),b.fire("tileLoaded"),c&&b.redraw())})},clear:function(){var a=this.canvas;a.width=a.width},render:function(){if(!this.hidden){var a,b,c,d=this.canvas;this.renderer.clearCanvas();var e=d.getContext("2d");for(a in this._tiles)b=this._tiles[a],b&&(c=this.getTilePos(b.coord),e.setTransform(1,0,0,1,c.x,c.y),this.renderer.renderTile(b,this.keys));this.renderer.applyFilters()}},getActivePointsBBox:function(a){var b=[];this.options.resolution*(256/this.options.resolution-1);for(var c in this._tiles){var d=this._tiles[c];b=b.concat(this.renderer.getActivePointsBBox(d,a))}return b},setKey:function(a){this.setKeys([a])},getKeys:function(){return this.keys},setKeys:function(a){this.keys=a,this.animator.step(this.getKey()),this.redraw(),this.fire("change:time",{time:this.getTime(),step:this.getKey()})},getKey:function(){return this.keys[0]},setStep:function(a){if(void 0===a||void 0!==a.length)throw new Error("setTime only accept scalars");this.setKey(a)},renderRange:function(a,b){this.pause();for(var c=[],d=a;d<=b;d++)c.push(d);this.setKeys(c)},resetRenderRange:function(){this.stop(),this.play()},stepToTime:function(a){if(!this.provider)return 0;var b=this.provider.getKeySpan(),c=b.start+(b.end-b.start)*(a/this.provider.getSteps());return new Date(c)},timeToStep:function(a){if("Date"==typeof a&&(a=a.getTime()),!this.provider)return 0;var b=this.provider.getKeySpan(),c=this.provider.getSteps()*(a-b.start)/(b.end-b.start);return c},getStep:function(){return this.getKey()},getTime:function(){return this.stepToTime(this.getKey())},setCartoCSS:function(a){if(!this.renderer)throw new Error("renderer is not valid");if(this.provider&&this.provider.options.named_map)return console.log("Torque layer: CartoCSS style on named maps is read-only"),!1;var b=(new f.RendererJS).render(a);this.shader=b,this.renderer&&this.renderer.setShader(b);var c=g.common.TorqueLayer.optionsFromLayer(b.findLayer({name:"Map"}));return this.provider&&this.provider.setCartoCSS&&this.provider.setCartoCSS(a),this.provider&&this.provider.setOptions(c)&&this._reloadTiles(),g.extend(this.options,c),c.animationDuration&&this.animator.duration(c.animationDuration),this.redraw(),this},redraw:function(){this.scheduleUpdate()},onRemove:function(){this.fire("remove"),h.prototype.onRemove.call(this),this.animator.stop(),this._removeTileLoader(),google.maps.event.removeListener(this._cacheListener)},getValues:function(a){var b=[];a=void 0===a?this.getKey():a;var c,d;for(c in this._tiles)d=this._tiles[c],this.renderer.getValues(d,a,b);return b},getValueForPos:function(a,b,c){c=void 0===c?this.getKey():c;var d,e,f,g,h,i=null;for(d in this._tiles)if(e=this._tiles[d],f=this.getTilePos(e.coord),g=a-f.x,h=b-f.y,g>=0&&h>=0&&g<this.renderer.TILE_SIZE&&h<=this.renderer.TILE_SIZE&&(i=this.renderer.getValueFor(e,c,g,h)),null!==i)return i;return null},pointCount:function(a){var b,c;a=void 0===a?this.key:a;var d=0;for(b in this._tiles)c=this._tiles[b],c&&(d+=c.timeCount[a]);return d},getValueForBBox:function(a,b,c,d){var e=a+c,f=b+d,g=0;for(_y=b;b<f;b+=this.options.resolution)for(_x=a;a<e;a+=this.options.resolution){var h=this.getValueForPos(_x,_y);if(h){var i=h.bbox,j=this.getProjection(),k=j.fromLatLngToContainerPixel(new google.maps.LatLng(i[1].lat,i[1].lon));k.x<e&&k.y<f&&(g+=h.value)}}return g},error:function(a){return this.options.errorCallback=a,this}}),e.prototype=g.extend({},i.prototype,{providers:{sql_api:g.providers.json,url_template:g.providers.JsonArray},renderers:{point:g.renderer.Point,pixel:g.renderer.Rectangle},initialize:function(a){this.keys=[0],this.options.renderer=this.options.renderer||"pixel",this.options.provider=this.options.provider||"sql_api",this.provider=new this.providers[this.options.provider](a),this.renderer=new this.renderers[this.options.renderer](null,a)},_tileLoaded:function(a,b){a.data=b,this.drawTile(a)},_loadTile:function(a,b,c){var d=this,e=1<<c,f={x:(b.x%e+e)%e,y:b.y};this.provider.getTileData(f,c,function(b){d._tileLoaded(a,b)})},drawTile:function(a){var b=a.canvas;if(a.data){b.width=b.width,this.renderer.setCanvas(b);var c=this.renderer.accumulate(a.data,this.getKey());this.renderer.renderTileAccum(c,0,0)}},setKey:function(a){this.keys=[a],this.redraw()},setCartoCSS:function(a){if(!this.renderer)throw new Error("renderer is not valid");return this.renderer.setCartoCSS(a)},setStepsRange:function(a,b){this.animator.stepsRange(a,b)},removeStepsRange:function(){this.animator.removeCustomStepsRange()},getStepsRange:function(){return this.animator.stepsRange()}}),b.exports={GMapsTiledTorqueLayer:e,GMapsTorqueLayer:d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../":"torque.js","./CanvasLayer":327,"./canvas_tile_layer":328,"./gmaps_tileloader_mixin":329,carto:"carto"}],332:[function(a,b,c){a("./leaflet_tileloader_mixin"),L.CanvasLayer=L.Layer.extend({includes:[L.Mixin.Events,L.Mixin.TileLoader],options:{minZoom:0,maxZoom:28,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:L.Browser.mobile,updateWhenIdle:L.Browser.mobile,tileLoader:!1,zoomAnimation:!0},initialize:function(a){a=a||{},this.render=this.render.bind(this),L.Util.setOptions(this,a),this._canvas=this._createCanvas(),this.options.zoomAnimation&&(this._backCanvas=this._createCanvas()),this._ctx=this._canvas.getContext("2d"),this.currentAnimationFrame=-1,this.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},this.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(a){clearTimeout(a)}},_createCanvas:function(){var a;a=document.createElement("canvas"),a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.pointerEvents="none",a.style.zIndex=this.options.zIndex||0;var b="leaflet-tile-container";return this.options.zoomAnimation&&(b+=" leaflet-zoom-animated"),a.setAttribute("class",b),a},onAdd:function(a){this._map=a;var b=this._map._panes.tilePane,c=L.DomUtil.create("div","leaflet-layer");c.appendChild(this._canvas),this.options.zoomAnimation&&(c.appendChild(this._backCanvas),this._backCanvas.style.display="none"),b.appendChild(c),this._container=c,a.dragging._draggable.on("predrag",function(){var b=a.dragging._draggable;L.DomUtil.setPosition(this._canvas,{x:-b._newPos.x,y:-b._newPos.y})},this),a.on({viewreset:this._reset},this),a.on("move",this.redraw,this),a.on("resize",this._reset,this),this.options.zoomAnimation&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim,moveend:this._reset},this),this.options.tileLoader&&this._initTileLoader(),this._reset()},_animateZoom:function(a){this._animating||(this._animating=!0);var b=this._backCanvas;b.width=this._canvas.width,b.height=this._canvas.height;var c=this._canvas._leaflet_pos||{x:0,y:0};b.getContext("2d").drawImage(this._canvas,0,0),L.DomUtil.setPosition(b,L.DomUtil.getPosition(this._canvas)),this._canvas.style.display="none",b.style.display="block";var d=this._map,e=(d.getZoomScale(a.zoom),d._latLngToNewLayerPoint(d.getCenter(),a.zoom,a.center)),f=d._latLngToNewLayerPoint(a.center,a.zoom,a.center),g={x:e.x-f.x+c.x,y:e.y-f.y+c.y},h=b,i=L.DomUtil.TRANSFORM;setTimeout(function(){h.style[i]="translate("+g.x+"px, "+g.y+"px) scale("+a.scale+") "},0)},_endZoomAnim:function(){this._animating=!1,this._canvas.style.display="block",this._backCanvas.style.display="none",this._backCanvas.style[L.DomUtil.TRANSFORM]=""},getCanvas:function(){return this._canvas},getAttribution:function(){return this.options.attribution},draw:function(){return this._reset()},onRemove:function(a){this._container.parentNode.removeChild(this._container),a.off({viewreset:this._reset,move:this.redraw,moveend:this._reset,resize:this._reset,zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this)},addTo:function(a){return a.addLayer(this),this},error:function(a){return this.provider.options.errorCallback=a,this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){a=void 0!==a?a:1,this._container.style.zIndex=a,this._canvas.style.zIndex=a,this.options.zoomAnimation&&(this._backCanvas.style.zIndex=a)},bringToFront:function(){return this},bringToBack:function(){return this},_reset:function(){var a=this._map.getSize();this._canvas.width=a.x,this._canvas.height=a.y;var b=L.DomUtil.getPosition(this._map.getPanes().mapPane);b&&L.DomUtil.setPosition(this._canvas,{x:-b.x,y:-b.y}),this.onResize(),this._render()},_updateOpacity:function(){},_render:function(){this.currentAnimationFrame>=0&&this.cancelAnimationFrame.call(window,this.currentAnimationFrame),this.currentAnimationFrame=this.requestAnimationFrame.call(window,this.render)},redraw:function(a){var b=L.DomUtil.getPosition(this._map.getPanes().mapPane);b&&L.DomUtil.setPosition(this._canvas,{x:-b.x,y:-b.y}),a?this.render():this._render()},onResize:function(){},render:function(){throw new Error("render function should be implemented")}})},{"./leaflet_tileloader_mixin":334}],333:[function(a,b,c){"undefined"!=typeof L&&a("./torque")},{"./torque":335}],334:[function(a,b,c){L.Mixin.TileLoader={_initTileLoader:function(){this._tilesLoading={},this._tilesToLoad=0,this._map.on({moveend:this._updateTiles},this),this._updateTiles()},_removeTileLoader:function(){this._map.off({moveend:this._updateTiles},this),this._removeTiles()},_updateTiles:function(){if(this._map){var a=this._map.getPixelBounds(),b=this._map.getZoom(),c=this.options.tileSize;if(!(b>this.options.maxZoom||b<this.options.minZoom)){var d=new L.Point(Math.floor(a.min.x/c),Math.floor(a.min.y/c)),e=new L.Point(Math.floor(a.max.x/c),Math.floor(a.max.y/c)),f=new L.Bounds(d,e);this._addTilesFromCenterOut(f),this._removeOtherTiles(f)}}},_removeTiles:function(a){for(var b in this._tiles)this._removeTile(b)},_reloadTiles:function(){this._removeTiles(),this._updateTiles()},_removeOtherTiles:function(a){var b,c,d,e,f,g=this._map.getZoom();for(f in this._tiles)this._tiles.hasOwnProperty(f)&&(b=f.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10),(g!==e||c<a.min.x||c>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(f))},_removeTile:function(a){this.fire("tileRemoved",this._tiles[a]),delete this._tiles[a],delete this._tilesLoading[a]},_tileKey:function(a){return a.x+":"+a.y+":"+a.zoom},_tileShouldBeLoaded:function(a){
var b=this._tileKey(a);return!(b in this._tiles||b in this._tilesLoading)},_tileLoaded:function(a,b){this._tilesToLoad--;var c=a.x+":"+a.y+":"+a.zoom;this._tiles[c]=b,delete this._tilesLoading[c],0===this._tilesToLoad&&this.fire("tilesLoaded")},getTilePos:function(a){a=new L.Point(a.x,a.y);var b=this._map._getTopLeftPoint(this._map.getCenter()),c=this.options.tileSize;return a.multiplyBy(c).subtract(b)},_addTilesFromCenterOut:function(a){var b=[],c=a.getCenter(),d=this._map.getZoom();d=Math.round(d);var e,f,g;for(e=a.min.y;e<=a.max.y;e++)for(f=a.min.x;f<=a.max.x;f++)g=new L.Point(f,e),g.zoom=d,this._tileShouldBeLoaded(g)&&b.push(g);var h=b.length;if(0!==h){for(b.sort(function(a,b){return a.distanceTo(c)-b.distanceTo(c)}),this._tilesToLoad+=h,f=0;f<h;f++){var i=b[f],j=this._tileKey(i);this._tilesLoading[j]=i,this.fire("tileAdded",i)}this.fire("tilesLoading")}}}},{}],335:[function(a,b,c){(function(b){var c=(b.carto||a("carto"),a("../"));a("./canvas_layer"),L.TorqueLayer=L.CanvasLayer.extend({providers:{sql_api:c.providers.json,url_template:c.providers.JsonArray,windshaft:c.providers.windshaft,tileJSON:c.providers.tileJSON},renderers:{point:c.renderer.Point,pixel:c.renderer.Rectangle},initialize:function(a){var b=this;if(!c.isBrowserSupported())throw new Error("browser is not supported by torque");if(a.tileLoader=!0,this.keys=[0],this._tiles={},Object.defineProperty(this,"key",{get:function(){return this.getKey()}}),this.prevRenderedKey=0,a.cartocss){var d=a.cartocss.replace(/\n/g,"").match(/Map\s*?\{.*?}/g)[0];c.extend(a,c.common.TorqueLayer.optionsFromCartoCSS(d))}a.resolution=a.resolution||2,a.steps=a.steps||100,a.visible=void 0===a.visible||a.visible,this.hidden=!a.visible,this.animator=new c.Animator(function(a){var c=0|a;b.getKey()!==c&&b.setKey(c,{direct:!0})},c.extend(c.clone(a),{onPause:function(){b.fire("pause")},onStop:function(){b.fire("stop")},onStart:function(){b.fire("play")},onStepsRange:function(){b.fire("change:stepsRange",b.animator.stepsRange())}})),this.play=this.animator.start.bind(this.animator),this.stop=this.animator.stop.bind(this.animator),this.pause=this.animator.pause.bind(this.animator),this.toggle=this.animator.toggle.bind(this.animator),this.setDuration=this.animator.duration.bind(this.animator),this.isRunning=this.animator.isRunning.bind(this.animator),L.CanvasLayer.prototype.initialize.call(this,a),this.options.renderer=this.options.renderer||"point",this.options.provider=this.options.provider||"windshaft",this.options.tileJSON&&(this.options.provider="tileJSON"),this.provider=new this.providers[this.options.provider](a),a.layer=this,this.renderer=new this.renderers[this.options.renderer](this.getCanvas(),a),a.ready=function(){b.fire("change:bounds",{bounds:b.provider.getBounds()}),b.animator.steps(b.provider.getSteps()),b.animator.rescale(),b.fire("change:steps",{steps:b.provider.getSteps()}),b.setKeys(b.getKeys())},this.on("tileLoaded",function(){b.renderer.setCartoCSS(b.renderer.style)}),this.renderer.on("allIconsLoaded",this.render.bind(this)),this.on("tileAdded",function(a){this.provider.getTileData(a,a.zoom,function(c){a.zoom===b._map.getZoom()&&(b._tileLoaded(a,c),b._clearTileCaches(),c&&b.redraw(),b.fire("tileLoaded"))})},this)},_clearTileCaches:function(){var a,b;for(a in this._tiles)b=this._tiles[a],b&&b._tileCache&&(b._tileCache=null)},_clearCaches:function(){this.renderer&&this.renderer.clearSpriteCache(),this._clearTileCaches()},onAdd:function(a){a.on({zoomend:this._clearCaches,zoomstart:this._pauseOnZoom},this),a.on({zoomend:this._resumeOnZoom},this),L.CanvasLayer.prototype.onAdd.call(this,a)},onRemove:function(a){this.fire("remove"),this._removeTileLoader(),a.off({zoomend:this._clearCaches,zoomstart:this._pauseOnZoom},this),a.off({zoomend:this._resumeOnZoom},this),L.CanvasLayer.prototype.onRemove.call(this,a)},_pauseOnZoom:function(){this.wasRunning=this.isRunning(),this.wasRunning&&this.pause()},_resumeOnZoom:function(){this.wasRunning&&this.play()},hide:function(){return this.hidden?this:(this.pause(),this.clear(),this.hidden=!0,this)},show:function(){return this.hidden?(this.hidden=!1,this.play(),1===this.options.steps&&this.redraw(),this):this},setSQL:function(a){if(this.provider.options.named_map)throw new Error("SQL queries on named maps are read-only");if(!this.provider||!this.provider.setSQL)throw new Error("this provider does not support SQL");return this.provider.setSQL(a),this._reloadTiles(),this},setBlendMode:function(a){this.renderer.setBlendMode(a),this.redraw()},setSteps:function(a){this.provider.setSteps(a),this._reloadTiles()},setColumn:function(a,b){this.provider.setColumn(a,b),this._reloadTiles()},getTimeBounds:function(){return this.provider&&this.provider.getKeySpan()},clear:function(){var a=this.getCanvas();a.width=a.width},render:function(){if(!this.hidden){var a,b,c,d=this.getCanvas();this.renderer.clearCanvas();var e=d.getContext("2d");for(a in this._tiles)b=this._tiles[a],b&&(this.animator.isRunning()&&(b._tileCache=null),c=this.getTilePos(b.coord),e.setTransform(1,0,0,1,c.x,c.y),b._tileCache?this.renderer._ctx.drawImage(b._tileCache,0,0):this.renderer.renderTile(b,this.keys));if(this.renderer.applyFilters(),!this.animator.isRunning()&&this.getKey()===this.prevRenderedKey){var f=this.renderer.TILE_SIZE;for(a in this._tiles)if(b=this._tiles[a],b&&!b._tileCache){var g=b._tileCache=document.createElement("canvas");g.width=g.height=f,c=this.getTilePos(b.coord);var h=Math.max(0,c.x),i=Math.max(0,c.y),j=Math.min(f,this.getCanvas().width-h),k=Math.min(f,this.getCanvas().height-i);j>0&&k>0&&g.getContext("2d").drawImage(this.getCanvas(),h,i,j,k,h-c.x,i-c.y,j,k)}}this.prevRenderedKey=this.getKey()}},setKey:function(a,b){this.setKeys([a],b)},getKeys:function(){return this.keys},setKeys:function(a,b){this.keys=a,this.animator.step(this.getKey()),this._clearTileCaches(),this.redraw(b&&b.direct),this.fire("change:time",{time:this.getTime(),step:this.getKey(),start:this.getKey(),end:this.getLastKey()})},getKey:function(){return this.keys[0]},getLastKey:function(){return this.keys[this.keys.length-1]},setStep:function(a){if(void 0===a||void 0!==a.length)throw new Error("setTime only accept scalars");this.setKey(a)},renderRange:function(a,b){this.pause();for(var c=[],d=a;d<=b;d++)c.push(d);this.setKeys(c)},resetRenderRange:function(){this.stop(),this.play()},stepToTime:function(a){var b=this.provider.getKeySpan(),c=b.start+(b.end-b.start)*(a/this.provider.getSteps());return new Date(c)},timeToStep:function(a){if("Date"==typeof a&&(a=a.getTime()),!this.provider)return 0;var b=this.provider.getKeySpan(),c=this.provider.getSteps()*(a-b.start)/(b.end-b.start);return c},getStep:function(){return this.getKey()},getTime:function(){return this.stepToTime(this.getKey())},getTimeSpan:function(){return this.provider.getKeySpan()},setCartoCSS:function(a){if(!this.renderer)throw new Error("renderer is not valid");return this.provider&&this.provider.options.named_map?(console.log("Torque layer: CartoCSS style on named maps is read-only"),!1):void this.renderer.setCartoCSS(a,function(){var b=c.common.TorqueLayer.optionsFromLayer(this.renderer._shader.findLayer({name:"Map"}));return this.provider.setCartoCSS&&this.provider.setCartoCSS(a),this.provider.setOptions(b)&&this._reloadTiles(),c.extend(this.options,b),b.animationDuration&&this.animator.duration(b.animationDuration),this._clearCaches(),this.redraw(),this}.bind(this))},getActivePointsBBox:function(a){var b=[];for(var c in this._tiles){var d=this._tiles[c];b=b.concat(this.renderer.getActivePointsBBox(d,a))}return b},getValues:function(a){var b=[];a=void 0===a?this.getKey():a;var c,d;for(c in this._tiles)d=this._tiles[c],this.renderer.getValues(d,a,b);return b},getValueForPos:function(a,b,c){c=void 0===c?this.getKey():c;var d,e,f,g,h,i=null;for(d in this._tiles)if(e=this._tiles[d],f=this.getTilePos(e.coord),g=a-f.x,h=b-f.y,g>=0&&h>=0&&g<this.renderer.TILE_SIZE&&h<=this.renderer.TILE_SIZE&&(i=this.renderer.getValueFor(e,c,g,h)),null!==i)return i;return null},getValueForBBox:function(a,b,c,d){var e=a+c,f=b+d,g=a,h=0;for(_y=b;_y<f;_y+=this.options.resolution)for(g=a;g<e;g+=this.options.resolution){var i=this.getValueForPos(g,_y);if(i){var j=i.bbox,k=this._map.latLngToContainerPoint([j[1].lat,j[1].lon]);k.x<e&&k.y<f&&(h+=i.value)}}return h},pointCount:function(a){var b,c;a=void 0===a?this.key:a;var d=0;for(b in this._tiles)c=this._tiles[b],c&&(d+=c.timeCount[a]);return d},invalidate:function(){this.provider.reload()},setStepsRange:function(a,b){this.animator.stepsRange(a,b)},removeStepsRange:function(){this.animator.removeCustomStepsRange()},getStepsRange:function(){return this.animator.stepsRange()},onRemove:function(a){L.CanvasLayer.prototype.onRemove.apply(this,arguments),this.animator.stop()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../":"torque.js","./canvas_layer":332,carto:"carto"}],336:[function(a,b,c){function d(a,b){return function(c){return Math.max(Math.min(c,b),a)}}function e(a,b){var c=d(0,1);return function(d){return c((d-a)/(b-a))}}function f(a,b){function c(c){return f(a*(1-c)+c*b)}var f=d(a,b);return c.invert=function(){return e(a,b)},c}b.exports={clamp:d,linear:f,invLinear:e}},{}],337:[function(a,b,c){function d(a,b,c){return null!==b&&(a=Math.max(a,b)),null!==c&&(a=Math.min(a,c)),a}function e(a){return a*(Math.PI/180)}function f(a){return a/(Math.PI/180)}var g=function(a,b){this.x=a||0,this.y=b||0},h=function(){this._tileSize=256,this._pixelOrigin=new g(this._tileSize/2,this._tileSize/2),this._pixelsPerLonDegree=this._tileSize/360,this._pixelsPerLonRadian=this._tileSize/(2*Math.PI)};h.prototype._fromLatLonToPoint=function(a,b){var c=new g(0,0),f=this._pixelOrigin;c.x=f.x+b*this._pixelsPerLonDegree;var h=d(Math.sin(e(a)),-.9999,.9999);return c.y=f.y+.5*Math.log((1+h)/(1-h))*-this._pixelsPerLonRadian,c},h.prototype._fromPointToLatLon=function(a){var b=this,c=b._pixelOrigin,d=(a.x-c.x)/b._pixelsPerLonDegree,e=(a.y-c.y)/-b._pixelsPerLonRadian,g=f(2*Math.atan(Math.exp(e))-Math.PI/2);return{lat:g,lon:d}},h.prototype._tilePixelPos=function(a,b){return{x:a*this._tileSize,y:b*this._tileSize}},h.prototype.tilePixelBBox=function(a,b,c,d,e,f){f=f||1;var h=1<<c,i=f/h;return d=(a*this._tileSize+d)/h,e=(b*this._tileSize+e)/h,[this._fromPointToLatLon(new g(d,e+i)),this._fromPointToLatLon(new g(d+i,e))]},h.prototype.tileBBox=function(a,b,c,d){var e=1<<c;d=d||0;var f=(this._tileSize+2*d)/e,h=(a*this._tileSize-d)/e,i=(b*this._tileSize-d)/e;return[this._fromPointToLatLon(new g(h,i+f)),this._fromPointToLatLon(new g(h+f,i))]},h.prototype.latLonToTilePoint=function(a,b,c,d,e){var f=1<<e,h=this._fromLatLonToPoint(a,b),i=new g(h.x*f,h.y*f),j=this._tilePixelPos(c,d);return new g(Math.round(i.x-j.x),Math.round(i.y-j.y))},b.exports=h},{}],338:[function(a,b,c){a("./ol_tileloader_mixin"),ol.CanvasLayer=function(a){this.root_=document.createElement("div"),this.root_.setAttribute("class","ol-heatmap-layer"),this.options={subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,tileLoader:!1,tileSize:256},a=a||{},torque.extend(this.options,a),ol.TileLoader.call(this,this.options.tileSize,this.options.maxZoom),this.render=this.render.bind(this),this._canvas=this._createCanvas(),this.root_.appendChild(this._canvas),this._ctx=this._canvas.getContext("2d"),this.currentAnimationFrame=-1,this.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},this.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(a){clearTimeout(a)},a.map&&this.setMap(a.map)},ol.inherits(ol.CanvasLayer,ol.TileLoader),ol.CanvasLayer.prototype.setMap=function(a){if(this._map&&(this._map.unByKey(this.pointdragKey_),this._map.unByKey(this.sizeChangedKey_),this._map.unByKey(this.moveendKey_),this._map.getView().unByKey(this.centerChanged_)),this._map=a,a){var b=this._map.getViewport().getElementsByClassName("ol-overlaycontainer")[0];b.appendChild(this.root_),this.pointdragKey_=a.on("pointerdrag",this._render,this),this.moveendKey_=a.on("moveend",this._render,this),this.centerChanged_=a.getView().on("change:center",this._render,this),this.sizeChangedKey_=a.on("change:size",this._reset,this),this.options.tileLoader&&ol.TileLoader.prototype._initTileLoader.call(this,a),this._reset()}},ol.CanvasLayer.prototype._createCanvas=function(){var a;return a=document.createElement("canvas"),a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.pointerEvents="none",a.style.zIndex=this.options.zIndex||0,a},ol.CanvasLayer.prototype._reset=function(){this._resize()},ol.CanvasLayer.prototype._resize=function(){var a=this._map.getSize(),b=a[0],c=a[1],d=this._canvas.width,e=this._canvas.height;d===b&&e===c||(this._canvas.width=b,this._canvas.height=c,this._canvas.style.width=b+"px",this._canvas.style.height=c+"px",this.root_.style.width=b+"px",this.root_.style.height=c+"px",this._render())},ol.CanvasLayer.prototype._render=function(){this.currentAnimationFrame>=0&&this.cancelAnimationFrame.call(window,this.currentAnimationFrame),this.currentAnimationFrame=this.requestAnimationFrame.call(window,this.render)},ol.CanvasLayer.prototype.getCanvas=function(){return this._canvas},ol.CanvasLayer.prototype.getAttribution=function(){return this.options.attribution},ol.CanvasLayer.prototype.draw=function(){return this._render()},ol.CanvasLayer.prototype.redraw=function(a){a?this.render():this._render()},b.exports=ol.CanvasLayer},{"./ol_tileloader_mixin":340}],339:[function(a,b,c){"undefined"!=typeof ol&&a("./torque")},{"./torque":341}],340:[function(a,b,c){ol.TileLoader=function(a,b){this._tileSize=a,this._tiles={},this._tilesLoading={},this._tilesToLoad=0,this._updateTiles=this._updateTiles.bind(this),this._tileGrid=ol.tilegrid.createXYZ({maxZoom:b,tileSize:a})},ol.TileLoader.prototype._initTileLoader=function(a){this._map=a,this._view=a.getView(),this._centerChangedId=this._view.on("change:center",function(a){this._updateTiles()},this),this._postcomposeKey=void 0,this._resolutionChangedId=this._view.on("change:resolution",function(a){this._currentResolution=this._view.getResolution(),this._postcomposeKey||(this.fire("mapZoomStart"),this._postcomposeKey=this._map.on("postcompose",function(a){a.frameState.viewState.resolution===this._currentResolution&&(this._updateTiles(),this._map.unByKey(this._postcomposeKey),this._postcomposeKey=void 0,this.fire("mapZoomEnd"))},this))},this),this._updateTiles()},ol.TileLoader.prototype._removeTileLoader=function(){this._view.unByKey(this._centerChangedId),this._view.unByKey(this._resolutionChangedId),this._removeTiles()},ol.TileLoader.prototype._removeTiles=function(){for(var a in this._tiles)this._removeTile(a)},ol.TileLoader.prototype._reloadTiles=function(){this._removeTiles(),this._updateTiles()},ol.TileLoader.prototype._updateTiles=function(){if(this._map){var a=this._tileGrid.getZForResolution(this._view.getResolution()),b=this._view.calculateExtent(this._map.getSize()),c=this._requestTilesForExtentAndZ(b,a);this._removeOtherTiles(c)}},ol.TileLoader.prototype._removeOtherTiles=function(a){var b,c,d,e,f,g=this._tileGrid.getZForResolution(this._view.getResolution());for(f in this._tiles)this._tiles.hasOwnProperty(f)&&(b=f.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10),(e!==g||c<a.minX||c>a.maxX||-d-1<a.minY||-d-1>a.maxY)&&this._removeTile(f))},ol.TileLoader.prototype._removeTile=function(a){this.fire("tileRemoved",this._tiles[a]),delete this._tiles[a],delete this._tilesLoading[a]},ol.TileLoader.prototype._tileKey=function(a){return a.x+":"+a.y+":"+a.zoom},ol.TileLoader.prototype._tileShouldBeLoaded=function(a){var b=this._tileKey(a);return!(b in this._tiles||b in this._tilesLoading)},ol.TileLoader.prototype._removeFromTilesLoading=function(a){this._tilesToLoad--;var b=this._tileKey(a);delete this._tilesLoading[b],0===this._tilesToLoad&&this.fire("tilesLoaded")},ol.TileLoader.prototype._tileLoaded=function(a,b){var c=this._tileKey(a);this._tiles[c]=b},ol.TileLoader.prototype.getTilePos=function(a){var b=this._tileGrid.getZForResolution(this._view.getResolution()),c=this._tileGrid.getTileCoordExtent([b,a.x,-a.y-1]),d=this._map.getPixelFromCoordinate([c[0],c[3]]);return{x:d[0],y:d[1]}},ol.TileLoader.prototype._requestTilesForExtentAndZ=function(a,b){var c=[],d=[];this._tileGrid.forEachTileCoord(a,b,function(a){d.push(a);var b={x:a[1],y:-a[2]-1,zoom:a[0]};this._tileShouldBeLoaded(b)&&c.push(b)}.bind(this));var e=c.length;if(e>0){this._tilesToLoad+=e;for(var f=0;f<e;f++){var g=c[f],h=this._tileKey(g);this._tilesLoading[h]=g,this.fire("tileAdded",g)}this.fire("tilesLoading")}var i={minX:d[0][1],maxX:d[d.length-1][1],minY:d[0][2],maxY:d[d.length-1][2]};return i},b.exports=ol.TileLoader},{}],341:[function(a,b,c){(function(c){var d=c.carto||a("carto"),e=a("../");a("./canvas_layer"),ol.TorqueLayer=function(a){var b=this;if(!e.isBrowserSupported())throw new Error("browser is not supported by torque");a.tileLoader=!0,this.keys=[0],Object.defineProperty(this,"key",{get:function(){return this.getKey()}}),this.prevRenderedKey=0,a.cartocss&&e.extend(a,e.common.TorqueLayer.optionsFromCartoCSS(a.cartocss)),a.resolution=a.resolution||2,a.steps=a.steps||100,a.visible=void 0===a.visible||a.visible,this.hidden=!a.visible,this.animator=new e.Animator(function(a){var c=0|a;b.getKey()!==c&&b.setKey(c,{direct:!0})},e.extend(e.clone(a),{onPause:function(){b.fire("pause")},onStop:function(){b.fire("stop")},onStart:function(){b.fire("play")},onStepsRange:function(){b.fire("change:stepsRange",b.animator.stepsRange())}})),this.play=this.animator.start.bind(this.animator),this.stop=this.animator.stop.bind(this.animator),this.pause=this.animator.pause.bind(this.animator),this.toggle=this.animator.toggle.bind(this.animator),this.setDuration=this.animator.duration.bind(this.animator),this.isRunning=this.animator.isRunning.bind(this.animator),ol.CanvasLayer.call(this,a),this.options.renderer=this.options.renderer||"point",this.options.provider=this.options.provider||"windshaft",this.options.tileJSON&&(this.options.provider="tileJSON"),this.provider=new this.providers[this.options.provider](a),this.renderer=new this.renderers[this.options.renderer](this.getCanvas(),a),a.ready=function(){b.fire("change:bounds",{bounds:b.provider.getBounds()}),b.animator.steps(b.provider.getSteps()),b.animator.rescale(),b.fire("change:steps",{steps:b.provider.getSteps()}),b.setKeys(b.getKeys())},this.renderer.on("allIconsLoaded",this.render.bind(this)),this.on("tileAdded",function(a){this.provider.getTileData(a,a.zoom,function(c){b._removeFromTilesLoading(a),a.zoom===b._tileGrid.getZForResolution(b._view.getResolution())&&(b._tileLoaded(a,c),b.fire("tileLoaded"),c&&b.redraw())})},this),this.on("mapZoomStart",function(){this.getCanvas().style.display="none",this._pauseOnZoom()},this),this.on("mapZoomEnd",function(){this.getCanvas().style.display="block",this._resumeOnZoom()},this)},ol.TorqueLayer.prototype=e.extend({},ol.CanvasLayer.prototype,e.Event,{providers:{sql_api:e.providers.json,url_template:e.providers.JsonArray,windshaft:e.providers.windshaft,tileJSON:e.providers.tileJSON},renderers:{point:e.renderer.Point,pixel:e.renderer.Rectangle},onAdd:function(a){ol.CanvasLayer.prototype.setMap.call(this,a)},onRemove:function(a){this.fire("remove"),this._removeTileLoader()},_pauseOnZoom:function(){this.wasRunning=this.isRunning(),this.wasRunning&&this.pause()},_resumeOnZoom:function(){this.wasRunning&&this.play()},hide:function(){return this.hidden?this:(this.pause(),this.clear(),this.hidden=!0,this)},show:function(){return this.hidden?(this.hidden=!1,this.play(),1===this.options.steps&&this.redraw(),this):this},setSQL:function(a){if(this.provider.options.named_map)throw new Error("SQL queries on named maps are read-only");if(!this.provider||!this.provider.setSQL)throw new Error("this provider does not support SQL");return this.provider.setSQL(a),this._reloadTiles(),this},setBlendMode:function(a){this.renderer.setBlendMode(a),this.redraw()},setSteps:function(a){this.provider.setSteps(a),this._reloadTiles()},setColumn:function(a,b){this.provider.setColumn(a,b),this._reloadTiles()},getTimeBounds:function(){return this.provider&&this.provider.getKeySpan()},clear:function(){var a=this.getCanvas();a.width=a.width},render:function(){if(!this.hidden){var a,b,c,d=this.getCanvas();this.renderer.clearCanvas();var e=d.getContext("2d");for(a in this._tiles)b=this._tiles[a],b&&(c=this.getTilePos(b.coord),e.setTransform(1,0,0,1,c.x,c.y),this.renderer.renderTile(b,this.keys));this.renderer.applyFilters()}},setKey:function(a,b){this.setKeys([a],b)},getKeys:function(){return this.keys},setKeys:function(a,b){this.keys=a,this.animator.step(this.getKey()),this.redraw(b&&b.direct),this.fire("change:time",{time:this.getTime(),step:this.getKey(),start:this.getKey(),end:this.getLastKey()})},getKey:function(){return this.keys[0]},getLastKey:function(){return this.keys[this.keys.length-1]},setStep:function(a){if(void 0===a||void 0!==a.length)throw new Error("setTime only accept scalars");this.setKey(a)},renderRange:function(a,b){this.pause();for(var c=[],d=a;d<=b;d++)c.push(d);this.setKeys(c)},resetRenderRange:function(){this.stop(),this.play()},stepToTime:function(a){var b=this.provider.getKeySpan(),c=b.start+(b.end-b.start)*(a/this.provider.getSteps());return new Date(c)},timeToStep:function(a){if("Date"==typeof a&&(a=a.getTime()),!this.provider)return 0;var b=this.provider.getKeySpan(),c=this.provider.getSteps()*(a-b.start)/(b.end-b.start);return c},getStep:function(){return this.getKey()},getTime:function(){return this.stepToTime(this.getKey())},getTimeSpan:function(){return this.provider.getKeySpan()},setCartoCSS:function(a){if(this.provider.options.named_map)throw new Error("CartoCSS style on named maps is read-only");if(!this.renderer)throw new Error("renderer is not valid");var b=(new d.RendererJS).render(a);this.renderer.setShader(b);var c=e.common.TorqueLayer.optionsFromLayer(b.findLayer({name:"Map"}));return this.provider.setCartoCSS&&this.provider.setCartoCSS(a),this.provider.setOptions(c)&&this._reloadTiles(),e.extend(this.options,c),c.animationDuration&&this.animator.duration(c.animationDuration),this.redraw(),this},getActivePointsBBox:function(a){var b=[];for(var c in this._tiles){var d=this._tiles[c];b=b.concat(this.renderer.getActivePointsBBox(d,a))}return b},getValues:function(a){var b=[];a=void 0===a?this.getKey():a;var c,d;for(c in this._tiles)d=this._tiles[c],this.renderer.getValues(d,a,b);return b},getValueForPos:function(a,b,c){c=void 0===c?this.getKey():c;var d,e,f,g,h,i=null;for(d in this._tiles)if(e=this._tiles[d],f=this.getTilePos(e.coord),g=a-f.x,h=b-f.y,g>=0&&h>=0&&g<this.renderer.TILE_SIZE&&h<=this.renderer.TILE_SIZE&&(i=this.renderer.getValueFor(e,c,g,h)),null!==i)return i;return null},getValueForBBox:function(a,b,c,d){var e=a+c,f=b+d,g=a,h=0;for(_y=b;_y<f;_y+=this.options.resolution)for(g=a;g<e;g+=this.options.resolution){var i=this.getValueForPos(g,_y);if(i){var j=i.bbox,k=this._map.latLngToContainerPoint([j[1].lat,j[1].lon]);k.x<e&&k.y<f&&(h+=i.value)}}return h},pointCount:function(a){var b,c;a=void 0===a?this.key:a;var d=0;for(b in this._tiles)c=this._tiles[b],c&&(d+=c.timeCount[a]);return d},invalidate:function(){this.provider.reload()},setStepsRange:function(a,b){this.animator.stepsRange(a,b)},removeStepsRange:function(){this.animator.removeCustomStepsRange()},getStepsRange:function(){return this.animator.stepsRange()}}),b.exports=ol.TorqueLayer}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../":"torque.js","./canvas_layer":338,carto:"carto"}],342:[function(a,b,c){function d(){}function e(a){this.t0=null,this.name=a,this.count=0}var f=1024;d.metrics={},d.get=function(a){return d.metrics[a]||{max:0,min:Number.MAX_VALUE,avg:0,total:0,count:0,history:"undefined"!=typeof Float32Array?new Float32Array(f):[]}},d.new_value=function(a,b){var c=d.metrics[a]=d.get(a);c.max=Math.max(c.max,b),c.min=Math.min(c.min,b),c.total+=b,++c.count,c.avg=c.total/c.count,c.history[c.count%f]=b},d.print_stats=function(){for(k in d.metrics){var a=d.metrics[k];console.log(" === "+k+" === "),console.log(" max: "+a.max),console.log(" min: "+a.min),console.log(" avg: "+a.avg),console.log(" count: "+a.count),console.log(" total: "+a.total)}},e.prototype={start:function(){return this.t0=+new Date,this},_elapsed:function(){return+new Date-this.t0},end:function(){null!==this.t0&&(d.new_value(this.name,this._elapsed()),this.t0=null)},inc:function(a){a=void 0===a?1:a,d.new_value(this.name,d.get(this.name).count+(a?a:0))},dec:function(a){a=void 0===a?1:a,this.inc(-a)},mark:function(){if(++this.count,null===this.t0)return void this.start();var a=this._elapsed();a>1&&(d.new_value(this.name,this.count),this.count=0,this.start())}},d.metric=function(a){return new e(a)},b.exports=d},{}],343:[function(a,b,c){b.exports={json:a("./json"),JsonArray:a("./jsonarray"),windshaft:a("./windshaft"),tileJSON:a("./tilejson")}},{"./json":344,"./jsonarray":345,"./tilejson":346,"./windshaft":347}],344:[function(a,b,c){function d(a){for(var b=1;b<arguments.length;++b){var c=arguments[b];for(var d in c)a=a.replace(RegExp("\\{"+d+"\\}","g"),c[d])}return a}var e=a("../"),f=a("../profiler"),g=e.types.Uint8Array,h=e.types.Int32Array,i=e.types.Uint32Array,j=function(a){if(this._ready=!1,this._tileQueue=[],this.options=a,this.options.is_time=void 0===this.options.is_time||this.options.is_time,this.options.tiler_protocol=a.tiler_protocol||"http",this.options.tiler_domain=a.tiler_domain||"cartodb.com",this.options.tiler_port=a.tiler_port||80,this.options.data_aggregation&&(this.options.cumulative="cumulative"===this.options.data_aggregation),void 0===a.resolution)throw new Error("resolution should be provided");if(void 0===a.steps)throw new Error("steps should be provided");void 0===a.start?this._fetchKeySpan():this._setReady(!0)};j.prototype={proccessTile:function(a,b,c){var d,e=new g(a.length),j=new g(a.length),k=f.metric("ProviderJSON:mem"),l=f.metric("ProviderJSON:point_count"),m=f.metric("ProviderJSON:process_time").start(),n=0,o=-1;for(d=0;d<a.length;++d){var p=a[d];n+=p.dates__uint16.length;for(var q=0;q<p.dates__uint16.length;++q)o=Math.max(o,p.dates__uint16[q])}this.options.cumulative&&(n=(1+o)*a.length);var r=this.options.cumulative?i:g,s=new h(o+1),t=new h(o+1),u=new(this.options.valueDataType||r)(n),v=new i(n);k.inc(4*o+4*o+n+4*n),l.inc(a.length);for(var w={},d=0;d<a.length;++d){var p=a[d];e[d]=p.x__uint8*this.options.resolution,p.y__uint8===-1?j[d]=0:j[d]=p.y__uint8*this.options.resolution;var n=p.dates__uint16,x=p.vals__uint8;if(this.options.cumulative){for(var y={},z=0,A=n.length;z<A;++z)y[n[z]]=x[z];for(var B=0,z=n[0];z<=o;++z){var C=w[z]||(w[z]=[]),D=y[z];D&&(B+=D),C.push([d,B])}}else for(var z=0,A=n.length;z<A;++z){var C=w[n[z]]||(w[n[z]]=[]);this.options.cumulative&&(x[z]+=prev_val),prev_val=x[z],C.push([d,x[z]])}}for(var E=0,F=0,G=0,G=0;G<=o;++G){var H=0,I=w[G];if(I)for(var d=0;d<I.length;++d){var C=I[d];++H,v[E]=C[0],u[E]=C[1],++E}s[G]=F,t[G]=H,F+=H}return m.end(),{x:e,y:j,z:c,coord:{x:b.x,y:b.y,z:c},timeCount:t,timeIndex:s,renderDataPos:v,renderData:u,maxDate:o}},_host:function(){var a=this.options,b=a.sql_api_port,c=(a.user_name||a.user)+"."+(a.sql_api_domain||"cartodb.com")+(b?":"+b:""),d=a.sql_api_protocol||"http";return this.options.url||d+"://"+c+"/api/v2/sql"},url:function(a){var b=this.options,c=b.sql_api_protocol||"http";if(!this.options.cdn_url)return this._host();var d=c+"://";a&&(d+=a+".");var e=b.cdn_url;if(!e.http&&!e.https)throw new Error("cdn_host should contain http and/or https entries");return d+=e[c]+"/"+(b.user_name||b.user)+"/api/v2/sql"},_hash:function(a){var b=0;if(!a||0==a.length)return b;for(var c=0,d=a.length;c<d;++c)b=(b<<5)-b+a.charCodeAt(c)|0;return b},_extraParams:function(){if(this.options.extra_params){var a=[];for(var b in this.options.extra_params){var c=this.options.extra_params[b];c&&a.push(b+"="+encodeURIComponent(c))}return a.join("&")}return null},isHttps:function(){return this.options.sql_api_protocol&&"https"===this.options.sql_api_protocol},sql:function(a,b,c){c=c||{};var d=this.options.subdomains||"0123";this.isHttps()&&(d=[null]);var f;f=c.no_cdn?this._host():this.url(d[Math.abs(this._hash(a))%d.length]);var g=this._extraParams();e.net.get(f+"?q="+encodeURIComponent(a)+(g?"&"+g:""),function(a){c.parseJSON&&(a=JSON.parse(a&&a.responseText)),b&&b(a)})},getTileData:function(a,b,c){this._ready?this._getTileData(a,b,c):this._tileQueue.push([a,b,c])},_setReady:function(a){this._ready=!0,this._processQueue(),this.options.ready&&this.options.ready()},_processQueue:function(){for(var a;a=this._tileQueue.pop();)this._getTileData.apply(this,a)},_getTileData:function(a,b,c){var e=f.metric("ProviderJSON:tile_fetch_time").start();this.table=this.options.table;var g=this.options.column;this.options.is_time&&(g=d("date_part('epoch', {column})",this.options));var h="WITH par AS (  SELECT CDB_XYZ_Resolution({zoom})*{resolution} as res,  256/{resolution} as tile_size, CDB_XYZ_Extent({x}, {y}, {zoom}) as ext ),cte AS (   SELECT ST_SnapToGrid(i.the_geom_webmercator, p.res) g, {countby} c, floor(({column_conv} - {start})/{step}) d  FROM ({_sql}) i, par p   WHERE i.the_geom_webmercator && p.ext   GROUP BY g, d) SELECT (st_x(g)-st_xmin(p.ext))/p.res x__uint8,        (st_y(g)-st_ymin(p.ext))/p.res y__uint8, array_agg(c) vals__uint8, array_agg(d) dates__uint16 FROM cte, par p where (st_y(g)-st_ymin(p.ext))/p.res < tile_size and (st_x(g)-st_xmin(p.ext))/p.res < tile_size GROUP BY x__uint8, y__uint8",i=d(h,this.options,{zoom:b,x:a.x,y:a.y,column_conv:g,_sql:this.getSQL()}),j=this;this.sql(i,function(d){if(d){var f=JSON.parse(d.responseText).rows;c(j.proccessTile(f,a,b))}else c(null);e.end()})},getKeySpan:function(){return{start:1e3*this.options.start,end:1e3*this.options.end,step:this.options.step,steps:this.options.steps,columnType:this.options.is_time?"date":"number"}},setColumn:function(a,b){this.options.column=a,this.options.is_time=void 0===b,this.reload()},setResolution:function(a){this.options.resolution=a},setOptions:function(a){var b=!1;if(void 0!==a.resolution&&a.resolution!==this.options.resolution&&(this.options.resolution=a.resolution,b=!0),void 0!==a.steps&&a.steps!==this.options.steps&&(this.setSteps(a.steps,{silent:!0}),b=!0),void 0!==a.column&&a.column!==this.options.column&&(this.options.column=a.column,b=!0),void 0!==a.countby&&a.countby!==this.options.countby&&(this.options.countby=a.countby,b=!0),void 0!==a.data_aggregation){var c="cumulative"===a.data_aggregation;this.options.cumulative!==c&&(this.options.cumulative=c,b=!0)}return b&&this.reload(),b},reload:function(){this._ready=!1,this._fetchKeySpan()},setSQL:function(a){this.options.sql!=a&&(this.options.sql=a,this.reload())},getSteps:function(){return Math.min(this.options.steps,this.options.data_steps)},setSteps:function(a,b){b=b||{},this.options.steps!==a&&(this.options.steps=a,this.options.step=(this.options.end-this.options.start)/this.getSteps(),this.options.step=this.options.step||1,b.silent||this.reload())},getBounds:function(){return this.options.bounds},getSQL:function(){return this.options.sql||"select * from "+this.options.table},_tilerHost:function(){var a=this.options,b=a.user_name||a.user;return a.tiler_protocol+"://"+(b?b+".":"")+a.tiler_domain+(""!=a.tiler_port?":"+a.tiler_port:"")},_fetchUpdateAt:function(a){var b=this,c={version:"1.0.1",stat_tag:this.options.stat_tag||"torque",layers:[{type:"cartodb",options:{cartocss_version:"2.1.1",cartocss:"#layer {}",sql:this.getSQL()}}]},f=this._tilerHost()+"/tiles/layergroup",g=this._extraParams();g&&(g=g.replace("api_key=","map_key=")),f=f+"?config="+encodeURIComponent(JSON.stringify(c))+"&callback=?"+(g?"&"+g:""),e.net.jsonp(f,function(c){var e=d("select * from ({sql}) __torque_wrap_sql limit 0",{
sql:b.getSQL()});b.sql(e,function(b){c&&b&&a({updated_at:c.last_updated,fields:b.fields})},{parseJSON:!0})})},_fetchKeySpan:function(){var a,b,c,e,f=this;this._fetchUpdateAt(function(g){if(g){f.options.extra_params=f.options.extra_params||{},f.options.extra_params.last_updated=g.updated_at||0,f.options.extra_params.cache_policy="persist",f.options.is_time="date"===g.fields[f.options.column].type;var h=f.options.column;f.options.is_time?(c="date_part('epoch', max({column}))",e="date_part('epoch', min({column}))",h=d("date_part('epoch', {column})",f.options)):(c="max({column})",e="min({column})"),a=d(c,{column:f.options.column}),b=d(e,{column:f.options.column});var i=" SELECT st_xmax(st_envelope(st_collect(the_geom))) xmax, st_ymax(st_envelope(st_collect(the_geom))) ymax, st_xmin(st_envelope(st_collect(the_geom))) xmin, st_ymin(st_envelope(st_collect(the_geom))) ymin, count(*) as num_steps, {max_col} max_date, {min_col} min_date FROM  ({sql}) __torque_wrap_sql ",j=d(i,{max_col:a,min_col:b,column:h,sql:f.getSQL()});f.sql(j,function(a){a=a.rows[0],f.options.start=a.min_date,f.options.end=a.max_date,f.options.step=(a.max_date-a.min_date)/Math.min(f.options.steps,a.num_steps>>0),f.options.data_steps=a.num_steps>>0,f.options.step=f.options.step||1,f.options.bounds=[[a.ymin,a.xmin],[a.ymax,a.xmax]],f._setReady(!0)},{parseJSON:!0,no_cdn:!0})}},{parseJSON:!0,no_cdn:!0})}},b.exports=j},{"../":"torque.js","../profiler":342}],345:[function(a,b,c){var d=a("../"),e=a("../profiler"),f=d.types.Uint8Array,g=d.types.Int32Array,h=d.types.Uint32Array,i=function(a){this.options=a};i.prototype={aggregateByKey:function(a){function b(a){for(var b=3,c=a.data[2],d={},e=0;e<c;++e)d[a.data[b+e]]=a.data[b+c+e];return d}var c={};for(r=0;r<a.length;++r){var d=b(a[r]);for(var e in d)c[e]=c[e]||0,c[e]+=d[e]}return c},proccessTile:function(a,b,c){function d(a){for(var b=3,c={x:a.data[0]*k.options.resolution,y:a.data[1]*k.options.resolution,valuesCount:a.data[2],times:[],values:[]},d=0;d<c.valuesCount;++d)c.times.push(a.data[b+d]),c.values.push(a.data[b+c.valuesCount+d]);if(k.options.cumulative)for(var d=1;d<c.valuesCount;++d)c.values[d]+=c.values[d-1];return c}var e,i=new f(a.length),j=new f(a.length),k=this;for(e=0;e<a.length;++e)a[e]=d(a[e]);var l=0,m=0;for(e=0;e<a.length;++e){var n=a[e];l+=n.times.length;for(var o=0;o<n.times.length;++o)m=Math.max(m,n.times[o])}for(var p=new g(m+1),q=new g(m+1),r=new(this.options.valueDataType||f)(l),s=new h(l),t={},e=0;e<a.length;++e){var n=a[e];i[e]=n.x,j[e]=n.y;for(var l=n.times,u=n.values,v=0,w=l.length;v<w;++v){var x=t[l[v]]||(t[l[v]]=[]);x.push([e,u[v]])}}for(var y=0,z=0,A=0,A=0;A<=m;++A){var B=0,C=t[A];if(C)for(var e=0;e<C.length;++e){var x=C[e];++B,s[y]=x[0],r[y]=x[1],++y}p[A]=z,q[A]=B,z+=B}return{x:i,y:j,coord:{x:b.x,y:b.y,z:c},timeCount:q,timeIndex:p,renderDataPos:s,renderData:r}},url:function(){return this.options.url},tileUrl:function(a,b){var c=this.url(),d=(this.options.subdomains||"abcd")[(a.x+a.y+b)%4];return c.replace("{x}",a.x).replace("{y}",a.y).replace("{z}",b).replace("{s}",d)},getTile:function(a,b,c){var f=this.tileUrl(a,b),g=e.metric("jsonarray:fetch time");g.start(),d.net.get(f,function(a){g.end(),a&&(a=JSON.parse(a.responseText)),c(a)})},getTileData:function(a,b,c){var f=this.tileUrl(a,b),g=this,h=e.metric("jsonarray:fetch time");h.start(),d.net.get(f,function(d){h.end();var f=null,i=e.metric("jsonarray:processing time"),j=e.metric("jsonarray:parsing time");try{i.start(),j.start();var k=JSON.parse(d.responseText||d.response).rows;j.end(),f=g.proccessTile(k,a,b),i.end()}catch(c){console.error("problem parsing JSON on ",a,b)}c(f)})}},b.exports=i},{"../":"torque.js","../profiler":342}],346:[function(a,b,c){var d=a("../"),e=d.types.Uint8Array,f=d.types.Int32Array,g=d.types.Uint32Array,h=d.types.Uint8ClampedArray,i=function(a){if(this._ready=!1,this._tileQueue=[],this.options=a,this.options.coordinates_data_type=this.options.coordinates_data_type||e,this.options.data_aggregation&&(this.options.cumulative="cumulative"===this.options.data_aggregation),this.options.auth_token){var b=this.options.extra_params||(this.options.extra_params={});b.auth_token=this.options.auth_token}this.options.no_fetch_map||this._fetchMap()};i.prototype={NAME:"tileJSON",proccessTile:function(a,b,c){var d,e=new this.options.coordinates_data_type(a.length),i=new this.options.coordinates_data_type(a.length),j=0,k=-1;for(d=0;d<a.length;++d){var l=a[d];j+=l.dates__uint16.length;for(var m=0;m<l.dates__uint16.length;++m)k=Math.max(k,l.dates__uint16[m])}this.options.cumulative&&(j=(1+k)*a.length);for(var n=this.options.cumulative?g:h,o=new f(k+1),p=new f(k+1),q=new(this.options.valueDataType||n)(j),r=new g(j),s={},d=0;d<a.length;++d){var l=a[d];e[d]=l.x__uint8*this.options.resolution,i[d]=l.y__uint8*this.options.resolution;var j=l.dates__uint16,t=l.vals__uint8;if(this.options.cumulative){for(var u={},v=0,w=j.length;v<w;++v)u[j[v]]=t[v];for(var x=0,v=j[0];v<=k;++v){var y=s[v]||(s[v]=[]),z=u[v];z&&(x+=z),y.push([d,x])}}else for(var v=0,w=j.length;v<w;++v){var y=s[j[v]]||(s[j[v]]=[]);this.options.cumulative&&(t[v]+=prev_val),prev_val=t[v],y.push([d,t[v]])}}for(var A=0,B=0,C=0,C=0;C<=k;++C){var D=0,E=s[C];if(E)for(var d=0;d<E.length;++d){var y=E[d];++D,r[A]=y[0],q[A]=y[1],++A}o[C]=B,p[C]=D,B+=D}return{x:e,y:i,z:c,coord:{x:b.x,y:b.y,z:c},timeCount:p,timeIndex:o,renderDataPos:r,renderData:q,maxDate:k}},setSteps:function(a,b){b=b||{},this.options.steps!==a&&(this.options.steps=a,this.options.step=(this.options.end-this.options.start)/this.getSteps(),this.options.step=this.options.step||1,b.silent||this.reload())},setOptions:function(a){var b=!1;if(void 0!==a.resolution&&a.resolution!==this.options.resolution&&(this.options.resolution=a.resolution,b=!0),void 0!==a.steps&&a.steps!==this.options.steps&&(this.setSteps(a.steps,{silent:!0}),b=!0),void 0!==a.column&&a.column!==this.options.column&&(this.options.column=a.column,b=!0),void 0!==a.countby&&a.countby!==this.options.countby&&(this.options.countby=a.countby,b=!0),void 0!==a.data_aggregation){var c="cumulative"===a.data_aggregation;this.options.cumulative!==c&&(this.options.cumulative=c,b=!0)}return b&&this.reload(),b},_extraParams:function(a){if(a=d.extend(d.extend({},a),this.options.extra_params)){var b=[];for(var c in a){var e=a[c];if(e)if(d.isArray(e))for(var f=0,g=e.length;f<g;f++)b.push(c+"[]="+encodeURIComponent(e[f]));else b.push(c+"="+encodeURIComponent(e))}return b.join("&")}return null},getTileData:function(a,b,c){this._ready?this._getTileData(a,b,c):this._tileQueue.push([a,b,c])},_setReady:function(a){this._ready=!0,this._processQueue(),this.options.ready&&this.options.ready()},_processQueue:function(){for(var a;a=this._tileQueue.pop();)this._getTileData.apply(this,a)},_getTileData:function(a,b,c){var e=this,f=this.options.subdomains||"0123",g=Math.pow(2,b),h=(a.x%g+g)%g,i=Math.abs(h+a.y)%f.length,j=this._extraParams(),k=this.templateUrl.replace("{x}",h).replace("{y}",a.y).replace("{z}",b).replace("{s}",f[i]);k+=j,d.net.get(k,function(d){if(d&&d.responseText){var f=JSON.parse(d.responseText);c(e.proccessTile(f,a,b))}else c(null)})},getKeySpan:function(){return{start:this.options.start,end:this.options.end,step:this.options.step,steps:this.options.steps,columnType:this.options.column_type}},setColumn:function(a,b){this.options.column=a,this.options.is_time=void 0===b,this.reload()},reload:function(){this._ready=!1,this._fetchMap()},getSteps:function(){return Math.min(this.options.steps,this.options.data_steps)},getBounds:function(){return this.options.bounds},getSQL:function(){return this.options.sql||"select * from "+this.options.table},setSQL:function(a){this.options.sql!=a&&(this.options.sql=a,this.reload())},_isUserTemplateUrl:function(a){return a&&a.indexOf("{user}")!==-1},isHttps:function(){return 0===this.options.maps_api_template.indexOf("https")},_fetchMap:function(a){var b=this;d.net.get(this.options.tileJSON,function(a){if(a=JSON.parse(a.response)){if(a.errors)return void(b.options.errorCallback&&b.options.errorCallback(a.errors));for(var c in a)b.options[c]=a[c];b.templateUrl=a.tiles[0],0!==b.templateUrl.indexOf("http")&&(b.templateUrl=b.options.tileJSON.substring(0,b.options.tileJSON.lastIndexOf("/")+1)+b.templateUrl),b._setReady(!0)}})}},b.exports=i},{"../":"torque.js"}],347:[function(a,b,c){var d=a("../"),e=a("../profiler"),f=d.types.Uint8Array,g=d.types.Int32Array,h=d.types.Uint32Array,i=d.types.Uint8ClampedArray,j=function(a){if(this._ready=!1,this._tileQueue=[],this.options=a,this.options.is_time=void 0===this.options.is_time||this.options.is_time,this.options.tiler_protocol=a.tiler_protocol||"http",this.options.tiler_domain=a.tiler_domain||"cartodb.com",this.options.tiler_port=a.tiler_port||80,a.maps_api_template?this.options.maps_api_template=a.maps_api_template:this._buildMapsApiTemplate(this.options),this.options.coordinates_data_type=this.options.coordinates_data_type||f,this.options.data_aggregation&&(this.options.cumulative="cumulative"===this.options.data_aggregation),this.options.auth_token){var b=this.options.extra_params||(this.options.extra_params={});b.auth_token=this.options.auth_token}this.options.no_fetch_map||this._fetchMap()};j.prototype={proccessTile:function(a,b,c){var d,f=new this.options.coordinates_data_type(a.length),j=new this.options.coordinates_data_type(a.length),k=e.metric("torque.provider.windshaft.mem"),l=e.metric("torque.provider.windshaft.points"),m=e.metric("torque.provider.windshaft.process_time").start(),n=0,o=-1;for(d=0;d<a.length;++d){var p=a[d];n+=p.dates__uint16.length;for(var q=0;q<p.dates__uint16.length;++q)o=Math.max(o,p.dates__uint16[q])}this.options.cumulative&&(n=(1+o)*a.length);var r=this.options.cumulative?h:i,s=new g(o+1),t=new g(o+1),u=new(this.options.valueDataType||r)(n),v=new h(n);k.inc(4*o+4*o+n+4*n),l.inc(a.length);for(var w={},d=0;d<a.length;++d){var p=a[d];f[d]=p.x__uint8*this.options.resolution,j[d]=p.y__uint8*this.options.resolution;var n=p.dates__uint16,x=p.vals__uint8;if(this.options.cumulative){for(var y={},z=0,A=n.length;z<A;++z)y[n[z]]=x[z];for(var B=0,z=n[0];z<=o;++z){var C=w[z]||(w[z]=[]),D=y[z];D&&(B+=D),C.push([d,B])}}else for(var z=0,A=n.length;z<A;++z){var C=w[n[z]]||(w[n[z]]=[]);this.options.cumulative&&(x[z]+=prev_val),prev_val=x[z],C.push([d,x[z]])}}for(var E=0,F=0,G=0,G=0;G<=o;++G){var H=0,I=w[G];if(I)for(var d=0;d<I.length;++d){var C=I[d];++H,v[E]=C[0],u[E]=C[1],++E}s[G]=F,t[G]=H,F+=H}return m.end(),{x:f,y:j,z:c,coord:{x:b.x,y:b.y,z:c},timeCount:t,timeIndex:s,renderDataPos:v,renderData:u,maxDate:o}},setSteps:function(a,b){b=b||{},this.options.steps!==a&&(this.options.steps=a,this.options.step=(this.options.end-this.options.start)/this.getSteps(),this.options.step=this.options.step||1,b.silent||this.reload())},setOptions:function(a){var b=!1;if(void 0!==a.resolution&&a.resolution!==this.options.resolution&&(this.options.resolution=a.resolution,b=!0),void 0!==a.steps&&a.steps!==this.options.steps&&(this.setSteps(a.steps,{silent:!0}),b=!0),void 0!==a.column&&a.column!==this.options.column&&(this.options.column=a.column,b=!0),void 0!==a.countby&&a.countby!==this.options.countby&&(this.options.countby=a.countby,b=!0),void 0!==a.data_aggregation){var c="cumulative"===a.data_aggregation;this.options.cumulative!==c&&(this.options.cumulative=c,b=!0)}return b&&this.reload(),b},_extraParams:function(a){if(a=d.extend(d.extend({},a),this.options.extra_params)){var b=[];for(var c in a){var e=a[c];if(e)if(d.isArray(e))for(var f=0,g=e.length;f<g;f++)b.push(c+"[]="+encodeURIComponent(e[f]));else b.push(c+"="+encodeURIComponent(e))}return b.join("&")}return null},getTileData:function(a,b,c){this._ready?this._getTileData(a,b,c):this._tileQueue.push([a,b,c])},_setReady:function(a){this._ready=!0,this._processQueue(),this.options.ready&&this.options.ready()},_processQueue:function(){for(var a;a=this._tileQueue.pop();)this._getTileData.apply(this,a)},_getTileData:function(a,b,c){var f=this,g=e.metric("torque.provider.windshaft.tile.fetch").start(),h=this.options.subdomains||"0123",i=Math.pow(2,b),j=(a.x%i+i)%i,k=Math.abs(j+a.y)%h.length,l=this.templateUrl.replace("{x}",j).replace("{y}",a.y).replace("{z}",b).replace("{s}",h[k]),m=this._extraParams();d.net.get(l+(m?"?"+m:""),function(d){if(g.end(),d&&d.responseText){var h=JSON.parse(d.responseText);c(f.proccessTile(h,a,b))}else e.metric("torque.provider.windshaft.tile.error").inc(),c(null)})},getKeySpan:function(){return{start:this.options.start,end:this.options.end,step:this.options.step,steps:this.options.steps,columnType:this.options.column_type}},setColumn:function(a,b){this.options.column=a,this.options.is_time=void 0===b,this.reload()},reload:function(){this._ready=!1,this._fetchMap()},getSteps:function(){return Math.min(this.options.steps,this.options.data_steps)},getBounds:function(){return this.options.bounds},getSQL:function(){return this.options.sql||"select * from "+this.options.table},setSQL:function(a){this.options.sql!=a&&(this.options.sql=a,this.reload())},_buildMapsApiTemplate:function(a){var b=a.user_name||a.user;a.maps_api_template=a.tiler_protocol+"://"+(b?"{user}.":"")+a.tiler_domain+(""!=a.tiler_port?":"+a.tiler_port:"")},_tilerHost:function(){var a=this.options,b=a.user_name||a.user;return a.maps_api_template.replace("{user}",b)},url:function(){var a=this.options,b=a.cdn_url,c=!b||b&&!b.http&&!b.https;if(a.no_cdn||c)return this._tilerHost();var d=this.isHttps()?"https":"http",e=d+"://";this.isHttps()||(e+="{s}.");var f=b[d];this._isUserTemplateUrl(f)||(f+="/{user}");var g=a.user_name||a.user;return e+=f.replace("{user}",g)},_isUserTemplateUrl:function(a){return a&&a.indexOf("{user}")!==-1},isHttps:function(){return 0===this.options.maps_api_template.indexOf("https")},_generateCartoCSS:function(){var a={"-torque-frame-count":this.options.steps,"-torque-resolution":this.options.resolution,"-torque-aggregation-function":"'"+this.options.countby+"'","-torque-time-attribute":"'"+this.options.column+"'","-torque-data-aggregation":this.options.cumulative?"cumulative":"linear"},b="Map{";for(var c in a)b+=c+":"+a[c]+";";return b+"}"},_fetchMap:function(a){var b=this,c={},f=this.options.dynamic_cdn?this.url().replace("{s}","0"):this._tilerHost(),g=f+"/api/v1/map",h=this.options.named_map,i={};h?(g=f+"/api/v1/map/named/"+h.name+"/jsonp","undefined"!=typeof h.params&&(c=h.params)):c={version:"1.0.1",stat_tag:this.options.stat_tag||"torque",layers:[{type:"torque",options:{cartocss_version:"1.0.0",cartocss:this._generateCartoCSS(),sql:this.getSQL()}}]},this.options.stat_tag&&(i.stat_tag=this.options.stat_tag),extra=this._extraParams(i),extra&&(extra=extra.replace("api_key=","map_key=")),g=g+"?config="+encodeURIComponent(JSON.stringify(c))+"&callback=?"+(extra?"&"+extra:"");var j=e.metric("torque.provider.windshaft.layergroup.time").start();d.net.jsonp(g,function(a){if(j.end(),a){if(a.errors)return void(b.options.errorCallback&&b.options.errorCallback(a.errors));var c=Object.keys(a.metadata.torque)[0],d=a.metadata.torque[c];for(var f in d)b.options[f]=d[f];if(a.cdn_url){var g=b.options.cdn_url=b.options.cdn_url||{};g.http=a.cdn_url.http||g.http,g.https=a.cdn_url.https||g.https}b.templateUrl=b.url()+"/api/v1/map/"+a.layergroupid+"/"+c+"/{z}/{x}/{y}.json.torque",b._setReady(!0)}else e.metric("torque.provider.windshaft.layergroup.error").inc()},{callbackName:b.options.instanciateCallback})}},b.exports=j},{"../":"torque.js","../profiler":342}],348:[function(a,b,c){function d(a,b){a.fillStyle=b["marker-fill"];var c=b["marker-width"];a.beginPath(),a.arc(0,0,c,0,g,!0,!0),a.closePath(),void 0!==b["marker-opacity"]&&(b["marker-fill-opacity"]=b["marker-line-opacity"]=b["marker-opacity"]),b["marker-fill"]&&(a.globalAlpha=b["marker-fill-opacity"]>=0?b["marker-fill-opacity"]:1,a.globalAlpha>0&&a.fill()),b["marker-line-color"]&&b["marker-line-width"]&&b["marker-line-width"]>h&&(a.globalAlpha=b["marker-line-opacity"]>=0?b["marker-line-opacity"]:1,void 0!==b["marker-line-width"]&&(a.lineWidth=b["marker-line-width"]),a.strokeStyle=b["marker-line-color"],a.globalAlpha>0&&a.stroke())}function e(a,b){a.fillStyle=b["marker-fill"];var c=b["marker-width"],d=2*c;b["marker-fill"]&&(void 0===b["marker-fill-opacity"]&&void 0===b["marker-opacity"]||(a.globalAlpha=b["marker-fill-opacity"]||b["marker-opacity"]),a.fillRect(-c,-c,d,d)),a.globalAlpha=1,b["marker-line-color"]&&b["marker-line-width"]&&(b["marker-line-opacity"]&&(a.globalAlpha=b["marker-line-opacity"]),b["marker-line-width"]&&(a.lineWidth=b["marker-line-width"]),a.strokeStyle=b["marker-line-color"],a.globalAlpha>0&&a.strokeRect(-c,-c,d,d))}function f(a,b,c){b.complete&&(void 0===c["marker-fill-opacity"]&&void 0===c["marker-opacity"]||(a.globalAlpha=c["marker-fill-opacity"]||c["marker-opacity"]),a.drawImage(b,0,0,Math.min(b.width,i),Math.min(b.height,i)))}var g=2*Math.PI,h=.05,i=255;b.exports={renderPoint:d,renderSprite:f,renderRectangle:e,MAX_SPRITE_RADIUS:i}},{}],349:[function(a,b,c){function d(a){this.tiles=a}var e=a("d3");a("turf-jenks");b.exports=d,d.prototype.getName=function(){return"TorqueDataSource"},d.prototype.getRamp=function(a,b,c,d){var f=[],g=null,h=Object.keys(this.tiles).map(function(a){return this.tiles[a].renderData}.bind(this)).reduce(function(a,b,c){for(var c=0;c<b.length;c++)a.push(b[c]);return a},[]),i=e.extent(h);if(c&&"equal"!==c&&"jenks"!==c)if("quantiles"===c)f=e.scale.quantile().range(e.range(b)).domain(h).quantiles();else if("headstails"===c){var j=h.sort(function(a,b){return a-b});if(j.length<b)g="Number of bins should be lower than total number of rows";else if(j.length===b)f=j;else{var k=e.mean(j);f.push(k);for(var l=1;l<b;l++)f.push(e.mean(j.filter(function(a){return a>f[length-1]})))}}else g=new Error("Quantification method "+c+" is not supported");else{var m=e.scale.linear().domain([0,b]).range(i);f=e.range(b).map(m)}d(g,f)}},{d3:127,"turf-jenks":397}],350:[function(a,b,c){b.exports={cartocss:a("./cartocss_render"),Point:a("./point"),Rectangle:a("./rectangle")}},{"./cartocss_render":348,"./point":351,"./rectangle":352}],351:[function(a,b,c){(function(c){function d(a){return n[a]||a}function e(a,b){if(!a)throw new Error("canvas can't be undefined");this.options=b,this.layer=b.layer,this._canvas=a,this._ctx=a.getContext("2d"),this._sprites=[],this._shader=null,this._icons={},this._iconsToLoad=0,this._filters=new j(this._canvas,{canvasClass:b.canvasClass}),this.style=this.options.cartocss||m,this.setCartoCSS(this.style),this.TILE_SIZE=256,this._style=null,this._gradients={},this._forcePoints=!1}var f=a("../"),g=a("./cartocss_render"),h=a("../profiler"),i=c.carto||a("carto"),j=a("./torque_filters"),k=a("turbo-carto"),l=a("./datasource"),m=(2*Math.PI,["#layer {","  marker-fill: #662506;","  marker-width: 4;","  [value > 1] { marker-fill: #FEE391; }","  [value > 2] { marker-fill: #FEC44F; }","  [value > 3] { marker-fill: #FE9929; }","  [value > 4] { marker-fill: #EC7014; }","  [value > 5] { marker-fill: #CC4C02; }","  [value > 6] { marker-fill: #993404; }","  [value > 7] { marker-fill: #662506; }","}"].join("\n")),n={difference:"difference",src:"source-over",exclusion:"exclusion",dst:"destination-in",multiply:"multiply",contrast:"contrast","src-over":"source-over",screen:"screen",invert:"invert","dst-over":"destination-over",overlay:"overlay","invert-rgb":"invert","src-in":"source-in",darken:"darken","dst-in":"destination-in",lighten:"lighten","src-out":"source-out","color-dodge":"color-dodge",hue:"hue","dst-out":"destination-out","color-burn":"color-burn",saturation:"saturation","src-atop":"source-atop","hard-light":"hard-light",color:"color","dst-atop":"destination-atop","soft-light":"soft-light",xor:"xor"};f.extend(e.prototype,f.Event,{clearCanvas:function(){if(this._Map){var a=this._canvas,b=this._Map["-torque-clear-color"],c=this._ctx;if("rgba(255, 255, 255, 0)"!==b&&b){c.setTransform(1,0,0,1,0,0);var e=this._Map["comp-op"];c.globalCompositeOperation=d(e)||e,c.fillStyle=b,c.fillRect(0,0,a.width,a.height)}else c.save(),c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,a.width,a.height),c.restore()}},setCanvas:function(a){this._canvas=a,this._ctx=a.getContext("2d")},setCartoCSS:function(a,b){var c=this;if(this.style=a,e.isTurboCarto(a)){var d=new l(c.layer._tiles);k(a,d,function(a,d){c.setShader((new i.RendererJS).render(d)),c.layer.redraw(),c.layer.animator.start(),b&&b()})}else c.setShader((new i.RendererJS).render(a)),b&&b()},setShader:function(a){this._sprites=[],this._shader=a,this._Map=this._shader.getDefault().getStyle({},{zoom:0});var b=this._shader.getImageURLs();this._preloadIcons(b)},clearSpriteCache:function(){this._sprites=[]},generateSprite:function(a,b,c){var d=h.metric("torque.renderer.point.generateSprite").start(),e=a.getStyle({value:b},c);null!==this._style&&this._style===e||(this._style=e);var i=e["marker-width"];if(!i)return null;if(0===e["marker-opacity"]&&!e["marker-line-opacity"])return null;var j=this._createCanvas(),k=j.getContext("2d"),l=e["marker-file"]||e["point-file"],m=l&&this._qualifyURL(l);if(m&&this._iconsToLoad<=0&&this._icons[m]){var n=this._icons[m],o=Math.min(2*e["marker-width"]||n.width,2*g.MAX_SPRITE_RADIUS),p=Math.min((e["marker-height"]||o)*(n.width/n.height),2*g.MAX_SPRITE_RADIUS);j.width=k.width=o,j.height=k.height=p,k.scale(o/n.width,p/n.height),g.renderSprite(k,n,e)}else{var q=(e["marker-line-width"]||0)+2*i,r=k.width=j.width=k.height=j.height=Math.ceil(q);k.translate(r/2,r/2);var s=e["marker-type"];s&&"rectangle"===s?g.renderRectangle(k,e):g.renderPoint(k,e)}if(d.end(!0),f.flags.sprites_to_images){var t=this._createImage();return t.src=j.toDataURL(),t}return j},renderTile:function(a,b,c){if(this._iconsToLoad>0)return this.on("allIconsLoaded",function(){this.renderTile.apply(this,[a,b,c])}),!1;"undefined"==typeof b.length&&(b=[b]);for(var d=h.metric("torque.renderer.point.renderLayers").start(),e=this._shader.getLayers(),f=0,g=e.length;f<g;++f){var i=e[f];if("Map"!==i.name())for(var j=this._sprites[f]||(this._sprites[f]={}),k=0;k<i.frames().length;++k)for(var l=i.frames()[k],m=j[l]||(j[l]=[]),n=0,o=b.length;n<o;n++)this._renderTile(a,b[n]-l,l,m,i)}return d.end(!0),c&&c(null)},_createCanvas:function(){return this.options.canvasClass?new this.options.canvasClass:document.createElement("canvas")},_createImage:function(){return this.options.imageClass?new this.options.imageClass:new Image},_setImageSrc:function(a,b,c){this.options.setImageSrc?this.options.setImageSrc(a,b,c):(a.onload=function(){c(null)},a.onerror=function(){c(new Error("Could not load image"))},a.src=b)},_qualifyURL:function(a){if("undefined"!=typeof this.options.qualifyURL)return this.options.qualifyURL(a);var b=document.createElement("a");return b.href=a,b.href},_renderTile:function(a,b,c,e,g,i){if(this._canvas){var j=h.metric("torque.renderer.point.renderTile").start(),k=this._ctx,l=d(g.eval("comp-op"))||this.options.blendmode;l&&(k.globalCompositeOperation=l),this.options.cumulative&&b>a.maxDate&&(b=a.maxDate);var m=this.options.resolution*(this.TILE_SIZE/this.options.resolution-1),n=a.timeCount[b],o=this.options.resolution/2;if(n)for(var p=a.timeIndex[b],q=0;q<n;++q){var r=a.renderDataPos[p+q],s=a.renderData[p+q];if(s){var t=e[s];if(void 0===t&&(t=e[s]=this.generateSprite(g,s,f.extend({zoom:a.z,"frame-offset":c},i))),t){var u=a.x[r]-(t.width>>1)+o,v=m-a.y[r]+o;k.drawImage(t,u,v-(t.height>>1))}}}j.end(!0)}},setBlendMode:function(a){this.options.blendmode=a},getActivePointsBBox:function(a,b){for(var c=[],d=new f.Mercator,e=this.options.resolution*(this.TILE_SIZE/this.options.resolution-1),g=a.timeCount[b],h=a.timeIndex[b],i=0;i<g;++i){var j=a.renderDataPos[h+i],k=a.renderData[h+i];if(k){var l=a.x[j],m=e-a.y[j];c.push(d.tilePixelBBox(a.coord.x,a.coord.y,a.coord.z,l,m))}}return c},getValues:function(a,b,c){c=c||[];for(var d=a.timeCount[b],e=a.timeIndex[b],f=0;f<d;++f){a.renderDataPos[e+f];c.push(a.renderData[e+f])}return c},getValueFor:function(a,b,c,d){for(var e=new f.Mercator,g=this.options.resolution,h=g>>1,i=this.options.resolution*(this.TILE_SIZE/this.options.resolution-1),j=a.timeCount[b],k=a.timeIndex[b],l=0;l<j;++l){var m=a.renderDataPos[k+l],n=a.renderData[k+l];if(n){var o=a.x[m],p=i-a.y[m],q=c+h-o,r=d+h-p;if(q>=0&&q<g&&r>=0&&r<g)return{value:n,bbox:e.tilePixelBBox(a.coord.x,a.coord.y,a.coord.z,o-h,p-h,g)}}}return null},_preloadIcons:function(a){var b=this;if(a.length>0&&!this._forcePoints){var c=Object.keys(a.reduce(function(a,c){var d=b._qualifyURL(c);return b._icons[d]||(a[d]=!0),a},{})),d=b._shader.getLayers().some(function(a){return"undefined"!=typeof a.shader["image-filters"]});this._iconsToLoad+=c.length,c.forEach(function(a){b._icons[a]=null;var c=b._createImage();d&&(c.crossOrigin="Anonymous"),b._setImageSrc(c,a,function(e){e?(b._forcePoints=!0,b.clearSpriteCache(),b._iconsToLoad=0,b.fire("allIconsLoaded"),d&&console.info("Only CORS-enabled, or same domain image-files can be used in combination with image-filters"),console.error("Couldn't get marker-file "+a)):(b._icons[a]=c,b._iconsToLoad--,b._iconsToLoad<=0&&(b.clearSpriteCache(),b.fire("allIconsLoaded")))})})}else this.fire("allIconsLoaded")},applyFilters:function(){function a(a){for(var b="",c=0;c<a.args.length;c++){var d=a.args[c].rgb;b+=d[0]+":"+d[1]+":"+d[2]}return b}function b(a){var b=a.toString(16);return 1==b.length?"0"+b:b}function c(a,c,d){return"#"+b(a)+b(c)+b(d)}if(this._style&&this._style["image-filters"]){var d=this._gradients[a(this._style["image-filters"])];if(!d){d={};for(var e=this._style["image-filters"].args,f=1/e.length,g=0;g<e.length;g++){var h=f*g+f,i=e[g].rgb,j=c(i[0],i[1],i[2]);d[h]=j}this._gradients[a(this._style["image-filters"])]=d}this._filters.gradient(d),this._filters.draw()}}}),e.isTurboCarto=function(a){var b=["ramp","colorbrewer","buckets"],c=b.map(function(a){return a+"("}).map(String.prototype.indexOf.bind(a)).every(function(a){return a===-1});return!c},b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../":"torque.js","../profiler":342,"./cartocss_render":348,"./datasource":349,"./torque_filters":353,carto:"carto","turbo-carto":388}],352:[function(a,b,c){(function(c){function d(a,b){this.options=b,e.tree.Reference.set(torque["torque-reference"]),this.setCanvas(a),this.setCartoCSS(this.options.cartocss||f)}var e=c.carto||a("carto"),f=["#layer {","  polygon-fill: #FFFF00;","  [value > 10] { polygon-fill: #FFFF00; }","  [value > 100] { polygon-fill: #FFCC00; }","  [value > 1000] { polygon-fill: #FE9929; }","  [value > 10000] { polygon-fill: #FF6600; }","  [value > 100000] { polygon-fill: #FF3300; }","}"].join("\n");2*Math.PI;d.prototype={setCartoCSS:function(a){if(this._cartoCssStyle=(new e.RendererJS).render(a),this._cartoCssStyle.getLayers().length>1)throw new Error("only one CartoCSS layer is supported");this._shader=this._cartoCssStyle.getLayers()[0].shader},setCanvas:function(a){a&&(this._canvas=a,this._ctx=a.getContext("2d"))},accumulate:function(a,b){var c,d,e,f,g,h,i,j,k=Profiler.metric("RectangleRender:accumulate").start(),l=this.options.resolution,m=256/l,n=new Float32Array(m*m);for("object"!=typeof b&&(b=[b]),g=0;g<b.length;++g)if(h=b[g],i=a.timeCount[h])for(j=a.timeIndex[h],f=0;f<i;++f)e=a.renderDataPos[j+f],c=a.x[e]/l,d=a.y[e]/l,n[c*m+d]+=a.renderData[j+f];return k.end(),n},renderTileAccum:function(a,b,c){var d,e,f,g,h=Profiler.metric("RectangleRender:renderTileAccum").start(),i=this.options.resolution,j=this._ctx,k=256/i|0,l=k*k;this._colors;this.options.blendmode&&(j.globalCompositeOperation=this.options.blendmode);for(var m=this._shader["polygon-opacity"]||function(){return 1},n=0;n<l;++n){var o=n,p=a[n];p&&(e=o/k|0,f=o%k,d=this._shader["polygon-fill"]({value:p},{zoom:0}),j.fillStyle=d,g=m({value:p},{zoom:0}),null===g&&(g=1),j.globalAlpha=g,j.fillRect(e*i,256-i-f*i,i,i))}h.end()},renderTile:function(a,b,c){if(this._canvas){var d=this.options.resolution,e=this._ctx,f=this._colors,g=a.timeCount[b];if(g)for(var h=(this._canvas.width,this._canvas.height,a.timeIndex[b]),i=0;i<activePixels;++i){var j=a.renderDataPos[h+i],k=a.renderData[h+i];if(k){var l=f[Math.min(k,f.length-1)],m=a.x[j],n=a.y[j];e.fillStyle=l,e.fillRect(m,n,d,d)}}return c&&c(null)}}},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{carto:"carto"}],353:[function(a,b,c){"use strict";function d(a,b){return this instanceof d?(b=b||{},this._canvas=a="string"==typeof a?document.getElementById(a):a,this._ctx=a.getContext("2d"),this._width=a.width,this._height=a.height,this._max=1,this._data=[],void(this.canvasClass=b.canvasClass)):new d(a,b)}d.prototype={defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},gradient:function(a){var b=this._createCanvas(),c=b.getContext("2d"),d=c.createLinearGradient(0,0,0,256);b.width=1,b.height=256;for(var e in a)d.addColorStop(+e,a[e]);return c.fillStyle=d,c.fillRect(0,0,1,256),this._grad=c.getImageData(0,0,1,256).data,this},draw:function(){this._grad||this.gradient(this.defaultGradient);var a=this._ctx,b=a.getImageData(0,0,this._canvas.width,this._canvas.height);return this._colorize(b.data,this._grad),a.putImageData(b,0,0),this},_colorize:function(a,b){for(var c,d=3,e=a.length;d<e;d+=4)c=4*a[d],c&&(a[d-3]=b[c],a[d-2]=b[c+1],a[d-1]=b[c+2])},_createCanvas:function(){return this.canvasClass?new this.canvasClass:document.createElement("canvas")}},b.exports=d},{}],354:[function(a,b,c){(function(c){function d(a,b,c){function d(){e.removeChild(f),clearTimeout(i),delete window[h]}c=c||{},c.timeout=void 0===c.timeout?1e4:c.timeout;var e=document.getElementsByTagName("head")[0],f=document.createElement("script"),h=c.callbackName||"torque_"+Date.now();g.isFunction(h)&&(h=h()),window[h]=function(){d(),b.apply(window,arguments)};var i=setTimeout(function(){d(),b.call(window,null)},c.timeout);a=a.replace("callback=?","callback="+h),f.type="text/javascript",f.src=a,f.async=!0,setTimeout(function(){e.appendChild(f)},0)}function e(a,b,d){function e(){var a=g.status,c="arraybuffer"===d.responseType?g.response:g.responseText;b(!a&&c||a>=200&&a<300||304===a?g:null)}d=d||{method:"GET",data:null,responseType:"text"},h={url:a,callback:b};var f=XMLHttpRequest;!c.XDomainRequest||"withCredentials"in f||!/^(http(s)?:)?\/\//.test(a)||(f=XDomainRequest);var g=new f;return g.open(d.method,a,!0),"onload"in g?g.onload=g.onerror=e:g.onreadystatechange=function(){g.readyState>3&&e()},g.onprogress=function(){},g.responseType=d.responseType,d.data&&(g.setRequestHeader("Content-type","application/json"),g.setRequestHeader("Accept","*")),g.send(d.data),g}function f(a,b,c){return e(a,c,{data:b,method:"POST"})}var g=a("./core"),h=null;b.exports={get:e,post:f,jsonp:d,lastCall:function(){return h}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":326}],355:[function(a,b,c){"use strict";function d(a,b){return this instanceof d?(b=b||{},g.call(this,b),this.transformFn=a,void(this.string="")):new d(a,b)}var e=a("stream"),f=a("util"),g=e.Transform||a("readable-stream").Transform;f.inherits(d,g),d.prototype._transform=function(a,b,c){this.string+=a.toString(),c()},d.prototype._flush=function(a){try{var b=this.transformFn(this.string);this.push(b),a()}catch(b){a(b)}};b.exports=function(a){return function(b){return new d(a)}}},{"readable-stream":362,stream:303,util:403}],356:[function(a,b,c){arguments[4][32][0].apply(c,arguments)},{dup:32}],357:[function(a,b,c){(function(c){function d(a){return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||c.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}b.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");
h.inherits(d,i),f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":359,"./_stream_writable":361,_process:256,"core-util-is":126,inherits:173}],358:[function(a,b,c){function d(a){return this instanceof d?void e.call(this,a):new d(a)}b.exports=d;var e=a("./_stream_transform"),f=a("core-util-is");f.inherits=a("inherits"),f.inherits(d,e),d.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":360,"core-util-is":126,inherits:173}],359:[function(a,b,c){(function(c){function d(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(C||(C=a("string_decoder/").StringDecoder),this.decoder=new C(b.encoding),this.encoding=b.encoding)}function e(b){a("./_stream_duplex");return this instanceof e?(this._readableState=new d(b,this),this.readable=!0,void A.call(this)):new e(b)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(B.isNullOrUndefined(c))b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),e||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&l(a)),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=E)a=E;else{a--;for(var b=1;b<32;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||B.isNull(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:a<=0?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return B.isBuffer(b)||B.isString(b)||B.isNullOrUndefined(b)||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,l(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(D("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?c.nextTick(function(){m(a)}):m(a))}function m(a){D("emit readable"),a.emit("readable"),s(a)}function n(a,b){b.readingMore||(b.readingMore=!0,c.nextTick(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(D("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;D("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&z.listenerCount(a,"data")&&(b.flowing=!0,s(a))}}function q(a,b){b.resumeScheduled||(b.resumeScheduled=!0,c.nextTick(function(){r(a,b)}))}function r(a,b){b.resumeScheduled=!1,a.emit("resume"),s(a),b.flowing&&!b.reading&&a.read(0)}function s(a){var b=a._readableState;if(D("flow",b.flowing),b.flowing)do var c=a.read();while(null!==c&&b.flowing)}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):y.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new y(a);for(var i=0,j=0,k=d.length;j<k&&i<a;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,c.nextTick(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}b.exports=e;var x=a("isarray"),y=a("buffer").Buffer;e.ReadableState=d;var z=a("events").EventEmitter;z.listenerCount||(z.listenerCount=function(a,b){return a.listeners(b).length});var A=a("stream"),B=a("core-util-is");B.inherits=a("inherits");var C,D=a("util");D=D&&D.debuglog?D.debuglog("stream"):function(){},B.inherits(e,A),e.prototype.push=function(a,b){var c=this._readableState;return B.isString(a)&&!c.objectMode&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=new y(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){return C||(C=a("string_decoder/").StringDecoder),this._readableState.decoder=new C(b),this._readableState.encoding=b,this};var E=8388608;e.prototype.read=function(a){D("read",a);var b=this._readableState,c=a;if((!B.isNumber(a)||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return D("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?u(this):l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&u(this),null;var d=b.needReadable;D("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,D("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,D("reading or ended",d)),d&&(D("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?t(a,b):null,B.isNull(e)&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&u(this),B.isNull(e)||this.emit("data",e),e},e.prototype._read=function(a){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){D("onunpipe"),a===l&&f()}function e(){D("onend"),a.end()}function f(){D("cleanup"),a.removeListener("close",i),a.removeListener("finish",j),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",d),l.removeListener("end",e),l.removeListener("end",f),l.removeListener("data",g),!m.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function g(b){D("ondata");var c=a.write(b);!1===c&&(D("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function h(b){D("onerror",b),k(),a.removeListener("error",h),0===z.listenerCount(a,"error")&&a.emit("error",b)}function i(){a.removeListener("finish",j),k()}function j(){D("onfinish"),a.removeListener("close",i),k()}function k(){D("unpipe"),l.unpipe(a)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=a;break;case 1:m.pipes=[m.pipes,a];break;default:m.pipes.push(a)}m.pipesCount+=1,D("pipe count=%d opts=%j",m.pipesCount,b);var n=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,o=n?e:f;m.endEmitted?c.nextTick(o):l.once("end",o),a.on("unpipe",d);var q=p(l);return a.on("drain",q),l.on("data",g),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(h):a._events.error=[h,a._events.error]:a.on("error",h),a.once("close",i),a.once("finish",j),a.emit("pipe",l),m.flowing||(D("pipe resume"),l.resume()),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;e<d;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return e===-1?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var d=A.prototype.on.call(this,a,b);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&this.readable){var e=this._readableState;if(!e.readableListening)if(e.readableListening=!0,e.emittedReadable=!1,e.needReadable=!0,e.reading)e.length&&l(this,e);else{var f=this;c.nextTick(function(){D("readable nexttick read 0"),f.read(0)})}}return d},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){var a=this._readableState;return a.flowing||(D("resume"),a.flowing=!0,a.reading||(D("resume read 0"),this.read(0)),q(this,a)),this},e.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(D("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(D("wrapped data"),b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)B.isFunction(a[e])&&B.isUndefined(this[e])&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){D("wrapped _read",b),c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("_process"))},{"./_stream_duplex":357,_process:256,buffer:34,"core-util-is":126,events:152,inherits:173,isarray:356,stream:303,"string_decoder/":306,util:10}],360:[function(a,b,c){function d(a,b){this.afterTransform=function(a,c){return e(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,i.isNullOrUndefined(c)||a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(a,this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){i.isFunction(this._flush)?this._flush(function(a){g(b,a)}):g(b)})}function g(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=f;var h=a("./_stream_duplex"),i=a("core-util-is");i.inherits=a("inherits"),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;i.isNull(b.writechunk)||!b.writecb||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))}},{"./_stream_duplex":357,"core-util-is":126,inherits:173}],361:[function(a,b,c){(function(c){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(b,c){var d=a("./_stream_duplex");b=b||{};var e=b.highWaterMark,f=b.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var g=b.decodeStrings===!1;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(c,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function f(b){var c=a("./_stream_duplex");return this instanceof f||this instanceof c?(this._writableState=new e(b,this),this.writable=!0,void x.call(this)):new f(b)}function g(a,b,d){var e=new Error("write after end");a.emit("error",e),c.nextTick(function(){d(e)})}function h(a,b,d,e){var f=!0;if(!(w.isBuffer(d)||w.isString(d)||w.isNullOrUndefined(d)||b.objectMode)){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),c.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return!a.objectMode&&a.decodeStrings!==!1&&w.isString(b)&&(b=new v(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),w.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing||b.corked?b.buffer.push(new d(c,e,f)):k(a,b,!1,g,c,e,f),h}function k(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function l(a,b,d,e,f){d?c.nextTick(function(){b.pendingcb--,f(e)}):(b.pendingcb--,f(e)),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,b){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),b)l(a,d,e,b,f);else{var g=r(a,d);g||d.corked||d.bufferProcessing||!d.buffer.length||q(a,d),e?c.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),b.pendingcb--,d(),t(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){if(b.bufferProcessing=!0,a._writev&&b.buffer.length>1){for(var c=[],d=0;d<b.buffer.length;d++)c.push(b.buffer[d].callback);b.pendingcb++,k(a,b,!0,b.length,b.buffer,"",function(a){for(var d=0;d<c.length;d++)b.pendingcb--,c[d](a)}),b.buffer=[]}else{for(var d=0;d<b.buffer.length;d++){var e=b.buffer[d],f=e.chunk,g=e.encoding,h=e.callback,i=b.objectMode?1:f.length;if(k(a,b,!1,i,f,g,h),b.writing){d++;break}}d<b.buffer.length?b.buffer=b.buffer.slice(d):b.buffer.length=0}b.bufferProcessing=!1}function r(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function s(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function t(a,b){var c=r(a,b);return c&&(0===b.pendingcb?(s(a,b),b.finished=!0,a.emit("finish")):s(a,b)),c}function u(a,b,d){b.ending=!0,t(a,b),d&&(b.finished?c.nextTick(d):a.once("finish",d)),b.ended=!0}b.exports=f;var v=a("buffer").Buffer;f.WritableState=e;var w=a("core-util-is");w.inherits=a("inherits");var x=a("stream");w.inherits(f,x),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return w.isFunction(b)&&(c=b,b=null),w.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),w.isFunction(c)||(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(d.pendingcb++,e=j(this,d,a,b,c)),e},f.prototype.cork=function(){var a=this._writableState;a.corked++},f.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.buffer.length||q(this,a))},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype._writev=null,f.prototype.end=function(a,b,c){var d=this._writableState;w.isFunction(a)?(c=a,a=null,b=null):w.isFunction(b)&&(c=b,b=null),w.isNullOrUndefined(a)||this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||u(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":357,_process:256,buffer:34,"core-util-is":126,inherits:173,stream:303}],362:[function(a,b,c){(function(d){c=b.exports=a("./lib/_stream_readable.js"),c.Stream=a("stream"),c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js"),d.browser||"disable"!==d.env.READABLE_STREAM||(b.exports=a("stream"))}).call(this,a("_process"))},{"./lib/_stream_duplex.js":357,"./lib/_stream_passthrough.js":358,"./lib/_stream_readable.js":359,"./lib/_stream_transform.js":360,"./lib/_stream_writable.js":361,_process:256,stream:303}],363:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(a){}}function h(){var a;try{a=c.storage.debug}catch(a){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":364}],364:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:366}],365:[function(a,b,c){(function(c,d){(function(){"use strict";function e(a){return"function"==typeof a||"object"==typeof a&&null!==a}function f(a){return"function"==typeof a}function g(a){T=a}function h(a){X=a}function i(){return function(){c.nextTick(n)}}function j(){return function(){S(n)}}function k(){var a=0,b=new $(n),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function l(){var a=new MessageChannel;return a.port1.onmessage=n,function(){a.port2.postMessage(0)}}function m(){return function(){setTimeout(n,1)}}function n(){for(var a=0;a<W;a+=2){var b=ba[a],c=ba[a+1];b(c),ba[a]=void 0,ba[a+1]=void 0}W=0}function o(){try{var b=a,c=b("vertx");return S=c.runOnLoop||c.runOnContext,j()}catch(a){return m()}}function p(a,b){var c=this,d=c._state;if(d===fa&&!a||d===ga&&!b)return this;var e=new this.constructor(r),f=c._result;if(d){var g=arguments[d-1];X(function(){H(d,e,g,f)})}else D(c,e,a,b);return e}function q(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(r);return z(c,a),c}function r(){}function s(){return new TypeError("You cannot resolve a promise with itself")}function t(){return new TypeError("A promises callback cannot return that same promise.")}function u(a){try{return a.then}catch(a){return ha.error=a,ha}}function v(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function w(a,b,c){X(function(a){var d=!1,e=v(c,b,function(c){d||(d=!0,b!==c?z(a,c):B(a,c))},function(b){d||(d=!0,C(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,C(a,e))},a)}function x(a,b){b._state===fa?B(a,b._result):b._state===ga?C(a,b._result):D(b,void 0,function(b){z(a,b)},function(b){C(a,b)})}function y(a,b,c){b.constructor===a.constructor&&c===ca&&constructor.resolve===da?x(a,b):c===ha?C(a,ha.error):void 0===c?B(a,b):f(c)?w(a,b,c):B(a,b)}function z(a,b){a===b?C(a,s()):e(b)?y(a,b,u(b)):B(a,b)}function A(a){a._onerror&&a._onerror(a._result),E(a)}function B(a,b){a._state===ea&&(a._result=b,a._state=fa,0!==a._subscribers.length&&X(E,a))}function C(a,b){a._state===ea&&(a._state=ga,a._result=b,X(A,a))}function D(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+fa]=c,e[f+ga]=d,0===f&&a._state&&X(E,a)}function E(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?H(c,d,e,f):e(f);a._subscribers.length=0}}function F(){this.error=null}function G(a,b){try{return a(b)}catch(a){return ia.error=a,ia}}function H(a,b,c,d){var e,g,h,i,j=f(c);if(j){if(e=G(c,d),e===ia?(i=!0,g=e.error,e=null):h=!0,b===e)return void C(b,t())}else e=d,h=!0;b._state!==ea||(j&&h?z(b,e):i?C(b,g):a===fa?B(b,e):a===ga&&C(b,e))}function I(a,b){try{b(function(b){z(a,b)},function(b){C(a,b)})}catch(b){C(a,b)}}function J(a){return new oa(this,a).promise}function K(a){function b(a){z(e,a)}function c(a){C(e,a)}var d=this,e=new d(r);if(!V(a))return C(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===ea&&g<f;g++)D(d.resolve(a[g]),void 0,b,c);return e}function L(a){var b=this,c=new b(r);return C(c,a),c}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function O(a){this._id=ma++,this._state=void 0,this._result=void 0,this._subscribers=[],r!==a&&("function"!=typeof a&&M(),this instanceof O?I(this,a):N())}function P(a,b){this._instanceConstructor=a,this.promise=new a(r),Array.isArray(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?B(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&B(this.promise,this._result))):C(this.promise,this._validationError())}function Q(){var a;if("undefined"!=typeof d)a=d;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;b&&"[object Promise]"===Object.prototype.toString.call(b.resolve())&&!b.cast||(a.Promise=na)}var R;R=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var S,T,U,V=R,W=0,X=function(a,b){ba[W]=a,ba[W+1]=b,W+=2,2===W&&(T?T(n):U())},Y="undefined"!=typeof window?window:void 0,Z=Y||{},$=Z.MutationObserver||Z.WebKitMutationObserver,_="undefined"!=typeof c&&"[object process]"==={}.toString.call(c),aa="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ba=new Array(1e3);U=_?i():$?k():aa?l():void 0===Y&&"function"==typeof a?o():m();var ca=p,da=q,ea=void 0,fa=1,ga=2,ha=new F,ia=new F,ja=J,ka=K,la=L,ma=0,na=O;O.all=ja,O.race=ka,O.resolve=da,O.reject=la,O._setScheduler=g,O._setAsap=h,O._asap=X,O.prototype={constructor:O,then:ca,catch:function(a){return this.then(null,a)}};var oa=P;P.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},P.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===ea&&c<a;c++)this._eachEntry(b[c],c)},P.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===da){var e=u(a);if(e===ca&&a._state!==ea)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===na){var f=new c(r);y(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){b(a)}),b)}else this._willSettleAt(d(a),b)},P.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===ea&&(this._remaining--,a===ga?C(d,c):this._result[b]=c),0===this._remaining&&B(d,this._result)},P.prototype._willSettleAt=function(a,b){var c=this;D(a,void 0,function(a){c._settledAt(fa,b,a)},function(a){c._settledAt(ga,b,a)})};var pa=Q,qa={Promise:na,polyfill:pa};"function"==typeof define&&define.amd?define(function(){return qa}):"undefined"!=typeof b&&b.exports?b.exports=qa:"undefined"!=typeof this&&(this.ES6Promise=qa),pa()}).call(this)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:256}],366:[function(a,b,c){function d(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b.long?f(a):e(a)}},{}],367:[function(a,b,c){b.exports={_args:[[{raw:"turbo-carto@https://registry.npmjs.org/turbo-carto/-/turbo-carto-0.19.0.tgz",scope:null,escapedName:"turbo-carto",name:"turbo-carto",rawSpec:"https://registry.npmjs.org/turbo-carto/-/turbo-carto-0.19.0.tgz",spec:"https://registry.npmjs.org/turbo-carto/-/turbo-carto-0.19.0.tgz",type:"remote"},"/opt/carto/builder/embedded/cartodb-4.1.0.1"]],_from:"turbo-carto@0.19.0",_id:"turbo-carto@0.19.0",_inCache:!0,_location:"/turbo-carto",_phantomChildren:{},_requested:{raw:"turbo-carto@https://registry.npmjs.org/turbo-carto/-/turbo-carto-0.19.0.tgz",scope:null,escapedName:"turbo-carto",name:"turbo-carto",rawSpec:"https://registry.npmjs.org/turbo-carto/-/turbo-carto-0.19.0.tgz",spec:"https://registry.npmjs.org/turbo-carto/-/turbo-carto-0.19.0.tgz",type:"remote"},_requiredBy:["/","/torque.js"],_resolved:"https://registry.npmjs.org/turbo-carto/-/turbo-carto-0.19.0.tgz",_shasum:"83fb1932acd42acb426312eef216b5f6ac34708e",_shrinkwrap:null,_spec:"turbo-carto@https://registry.npmjs.org/turbo-carto/-/turbo-carto-0.19.0.tgz",_where:"/opt/carto/builder/embedded/cartodb-4.1.0.1",author:{name:"CartoDB",email:"wadus@cartodb.com",url:"http://cartodb.com/"},bugs:{url:"https://github.com/CartoDB/turbo-carto/issues"},contributors:[{name:"Raul Ochoa",email:"rochoa@cartodb.com"}],dependencies:{cartocolor:"4.0.0",colorbrewer:"1.0.0",debug:"2.2.0","es6-promise":"3.1.2",postcss:"5.0.19","postcss-value-parser":"3.3.0"},description:"CartoCSS preprocessor",devDependencies:{"browser-request":"^0.3.3",browserify:"^12.0.1",istanbul:"^0.4.1",jshint:"^2.9.1-rc2",mocha:"^2.3.4",querystring:"^0.2.0",request:"^2.67.0",semistandard:"^7.0.4","semistandard-format":"^2.1.0",yargs:"^3.31.0"},homepage:"https://github.com/CartoDB/turbo-carto#readme",license:"BSD-3-Clause",main:"src/index.js",name:"turbo-carto",optionalDependencies:{},readme:"# Turbo-Carto\n\nNext-Gen Styling for Data-Driven Maps, AKA CartoCSS preprocessor.\n\ntl;dr Enables adding functions to CartoCSS that can be evaluated asynchronously.\n\n[![Build Status](https://travis-ci.org/CartoDB/turbo-carto.png?branch=master)](https://travis-ci.org/CartoDB/turbo-carto)\n\n## Ramps\n\nIt's all about ramps.\n\nYou can create color and symbol size ramps with just a single line of code. You no longer need to worry about\ncalculating the bins for your thematic map, if your data changes your CartoCSS changes.\n\n\n### Very basic introduction to CartoCSS\n\nIn CartoCSS you usually assign values to properties and apply filters in order to change those values based on some\ndata attributes.\n\nThe general form for properties and filters is:\n\n```css\n#selector {\n    property: value;\n    [filter] {\n        property: value;\n    }\n}\n```\n\nAn example of a filter based on price attribute:\n\n```css\n#selector {\n    marker-width: 10;\n    [price > 100] {\n        marker-width: 20;\n    }\n}\n```\n\n### Turbo-Carto ramps\n\nTurbo-Carto high-level API for ramps is as follows:\n\n```css\n#selector {\n    property: ramp([attribute], (...values), (...filters), mapping);\n}\n```\n\nWhere:\n - `property` is the CartoCSS property you want to create.\n - `[attribute]` usually is a column/key name from your dataset.\n - `(...values)` is **what** `property` is gonna get for different filters.\n - `(...filters)` is **how** `property` is gonna get the different values.\n - `mapping` is the type of filter that will be applied: <, <=, >, >=, =.\n\nSo for the previous example you could write (see [examples/readme/example-0.css](./examples/readme/example-0.css)):\n\n```css\n#selector {\n    marker-width: ramp([price], (10, 20), (100));\n}\n```\n\nIn this case, the first value is the default value.\n\n\nIf you want to have a category map, to generate a CartoCSS like:\n\n```css\n#selector {\n    marker-fill: red;\n    [room_type = \"Private Room\"] {\n        marker-fill: green;\n    }\n}\n```\n\nYou can use the same approach but specifying the mapping type to be an equality (see [examples/readme/example-1.css](./examples/readme/example-1.css)):\n\n```css\n#selector {\n    marker-fill: ramp([room_type], (green, red), (\"Private room\"), =);\n}\n```\n\nSee that in this case the last value is the default value, and if the number of values is equal to the number of filters\nit won't have a default value, like in (see [examples/readme/example-2.css](./examples/readme/example-2.css)):\n\n```css\n#selector {\n    marker-width: ramp([room_type], (green, red), (\"Private room\"), =);\n}\n```\n\nThat's nice, but it is still unlinked from the actual data/attributes.\n\n#### Mappings default values\n\n`<` and `<=`: Last provided value will be the default value.\n`=`: Last provided value will be the default value, if the number of values is\nequal to the number of filters it won't have a default value.\n`>` and `>=`: First provided value will be the default value.\n\n#### Associate ramp filters to your data\n\nTo generate ramps based on actual data you have to say what kind of quantification you want to use, for that purpose\nTurbo-Carto provides some shorthand methods that will delegate the filters computation to different collaborators.\n\nLet's say you want to compute the ramp using jenks as quantification function (see [examples/readme/example-3.css](./examples/readme/example-3.css)):\n\n```css\n#selector {\n    marker-width: ramp([price], (10, 20, 30), jenks());\n}\n```\n\nOr generate a category map depending on the room_type property (see [examples/readme/example-4.css](./examples/readme/example-4.css)):\n\n```css\n#selector {\n    marker-fill: ramp([room_type], (red, green, blue), category(2));\n}\n```\n\nYou can override the mapping if you know your data requires an more strict filter (see [examples/readme/example-5.css](./examples/readme/example-5.css)):\n\n```css\n#selector {\n    marker-width: ramp([price], (10, 20, 30), jenks(), >=);\n}\n```\n\nShorthand methods include:\n - `category()`: default mapping is `=`.\n - `equal()`: default mapping is `>`.\n - `headtails()`: default mapping is `<`.\n - `jenks()`: default mapping is `>`.\n - `quantiles()`: default mapping is `>`.\n\n#### Color ramps\n\nFor color ramps, there are a couple of handy functions to retrieve color palettes: `cartocolor` and `colorbrewer`.\n\nYou can create a choropleth map using Reds color palette from colorbrewer (see [examples/readme/example-6.css](./examples/readme/example-6.css)):\n\n```css\n#selector {\n    polygon-fill: ramp([avg_price], colorbrewer(Reds), jenks());\n}\n```\n\nOr a category map using Bold color palette from cartocolor (see [examples/readme/example-7.css](./examples/readme/example-7.css)):\n\n```css\n#selector {\n    polygon-fill: ramp([room_type], cartocolor(Bold), category(4));\n}\n```\n\n#### Numeric ramps\n\nSometimes is really useful to have a continuous range that can be split in as many bins as desired, so you don't have to\nworry about how many values you have to provide for your calculated filters. You only specify the start and the end, and\nthe values are computed linearly (see [examples/readme/example-8.css](./examples/readme/example-8.css)):\n\n```css\n#selector {\n    marker-width: ramp([price], range(4, 40), equal(5));\n}\n```\n\nIt is kind of similar to color palettes where depending on your number of filters you get the correct number of values.\n\n\n## Dependencies\n\n * Node >=0.10\n * npm >=2.x\n\n## Install\n\nTo install the rest of the dependencies just run:\n\n```\nnpm install\n```\n\n#### Some examples\n\nCurrent examples expect to have CartoDB's SQL API running at http://development.localhost.lan:8080/. It should have a\npublicly accessible `populated_places_simple` table.\n\nExamples using a cli tool:\n\n```shell\n$ ./tools/cli.js examples/populated_places.css # will use a dummy datasource, check tools/cli.js source\n$ ./tools/cli.js examples/populated_places.css --datasource sql --query 'select * from populated_places_simple'\n```\n\nVisit `examples/index.html`, to test different styles using CartoDB's SQL API as datasource.\n\n## Tests\n\nTests suite can be run with:\n\n```\nnpm test\n```\n\nThat will check code style and run the tests.\n\n## TODO\n\nSee https://github.com/CartoDB/turbo-carto/issues\n",
readmeFilename:"README.md",repository:{type:"git",url:"git+ssh://git@github.com/CartoDB/turbo-carto.git"},scripts:{test:"make test-all"},semistandard:{globals:["describe","it"],ignore:["examples/app.js"]},version:"0.19.0"}},{}],368:[function(a,b,c){"use strict";function d(a){this.datasource=a,this.fnExecutors=[]}function e(a,b,c,d){var g=[];return Array.isArray(a.nodes)&&(g=a.nodes.reduce(function(a,f){switch(f.type){case"word":Number.isFinite(+f.value)?a.push(+f.value):a.push(f.value);break;case"string":a.push(f.value);break;case"function":a.push(e(f,b,c,d))}return a},[])),new f(b,a.value,g,c,d)}a("es6-promise").polyfill();var f=a("./executor");b.exports=d,d.prototype.add=function(a,b,c){this.fnExecutors.push({decl:a,fnExecutor:e(b,this.datasource,a,c)})},d.prototype.exec=function(){var a=this.fnExecutors.map(function(a){return a.fnExecutor.exec()});return Promise.all(a)}},{"./executor":369,"es6-promise":365}],369:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.datasource=a,this.fnName=b,this.args=c,this.decl=d,this.metadataHolder=e}a("es6-promise").polyfill();var e=a("../helper/debug")("fn-executor"),f=a("./factory");b.exports=d,d.prototype.exec=function(){var a=this;e("[ENTERING] Fn.prototype.exec %s(%j)",a.fnName,a.args);var b=f.create(a.fnName,a.datasource,a.decl,a.metadataHolder);return Promise.all(a.getNestedFns()).then(function(c){return e("[QUEUE DONE] %s=%j",a.fnName,c),c.forEach(function(b){a.args[b.index]=b.result}),b.apply(b,a.args)})},d.prototype.getNestedFns=function(){var a=this;return a.getNestedFnIndexes().map(function(b){return a.execFn(b)})},d.prototype.getNestedFnIndexes=function(){return this.args.reduce(function(a,b,c){return b instanceof d&&a.push(c),a},[])},d.prototype.execFn=function(a){return this.args[a].exec().then(function(b){return{index:a,result:b}})}},{"../helper/debug":384,"./factory":370,"es6-promise":365}],370:[function(a,b,c){"use strict";var d=[a("./fn-buckets"),a("./fn-buckets-category"),a("./fn-buckets-equal"),a("./fn-buckets-headtails"),a("./fn-buckets-jenks"),a("./fn-buckets-quantiles"),a("./fn-cartocolor"),a("./fn-colorbrewer"),a("./fn-ramp"),a("./fn-range")],e=d.reduce(function(a,b){return a[b.fnName]=b,a},{}),f=a("./fn-identity"),g=a("./fn-anonymous-tuple"),h={create:function(a,b,c,d){if(""===a)return g();var h=e[a];return h?h(b,c,d):f(a)}};b.exports=h},{"./fn-anonymous-tuple":371,"./fn-buckets":377,"./fn-buckets-category":372,"./fn-buckets-equal":373,"./fn-buckets-headtails":374,"./fn-buckets-jenks":375,"./fn-buckets-quantiles":376,"./fn-cartocolor":378,"./fn-colorbrewer":379,"./fn-identity":380,"./fn-ramp":381,"./fn-range":382}],371:[function(a,b,c){"use strict";a("es6-promise").polyfill();var d=a("../helper/debug")("fn-anonymous-tuple"),e=a("../model/values-result");b.exports=function(){return function(){d("fn$anonymousTuple(%j)",arguments);var a=arguments;return new Promise(function(b){var c=Object.keys(a).map(function(b){return a[b]});b(new e(c))})}},b.exports.fnName="anonymousTuple"},{"../helper/debug":384,"../model/values-result":394,"es6-promise":365}],372:[function(a,b,c){"use strict";var d=a("./fn-buckets").createBucketsFn,e="category";b.exports=function(a){return d(a,e,"==")},b.exports.fnName=e},{"./fn-buckets":377}],373:[function(a,b,c){"use strict";var d=a("./fn-buckets").createBucketsFn,e="equal";b.exports=function(a){return d(a,e,">")},b.exports.fnName=e},{"./fn-buckets":377}],374:[function(a,b,c){"use strict";var d=a("./fn-buckets").createBucketsFn,e="headtails";b.exports=function(a){return d(a,e,"<")},b.exports.fnName=e},{"./fn-buckets":377}],375:[function(a,b,c){"use strict";var d=a("./fn-buckets").createBucketsFn,e="jenks";b.exports=function(a){return d(a,e,">")},b.exports.fnName=e},{"./fn-buckets":377}],376:[function(a,b,c){"use strict";var d=a("./fn-buckets").createBucketsFn,e="quantiles";b.exports=function(a){return d(a,e,">")},b.exports.fnName=e},{"./fn-buckets":377}],377:[function(a,b,c){"use strict";function d(a){return function(b,c,d){return e("fn$buckets(%j)",arguments),e('Using "%s" datasource to calculate buckets',a.getName()),new Promise(function(e,i){return c?(d=Number.isFinite(+d)?+d:5,void a.getRamp(f(b),d,c,function(a,b){if(a)return i(new g("unable to compute ramp,",a));var c="max",d={};Array.isArray(b)||(c=b.strategy||"max",d=b.stats,b=b.ramp),e(new h(b,c,d))})):i(new g("Missing quantification method in buckets function"))})}}a("es6-promise").polyfill();var e=a("../helper/debug")("fn-buckets"),f=a("../helper/column-name"),g=a("../helper/turbo-carto-error"),h=a("../model/filters-result"),i=a("../model/lazy-filters-result");b.exports=d,b.exports.fnName="buckets",b.exports.createBucketsFn=function(a,b,c){return function(f){return e("fn$%s(%j)",b,arguments),e('Using "%s" datasource to calculate %s',a.getName(),b),new Promise(function(e){return e(new i(function(e,g){return d(a)(e,b,f).then(function(a){return a.strategy=g||c,new Promise(function(b){return b(a)})})}))})}}},{"../helper/column-name":383,"../helper/debug":384,"../helper/turbo-carto-error":387,"../model/filters-result":389,"../model/lazy-filters-result":391,"es6-promise":365}],378:[function(a,b,c){"use strict";a("es6-promise").polyfill();var d=a("cartocolor"),e=a("../model/values-result"),f=a("../helper/min-max-keys"),g=a("../helper/debug")("fn-cartocolor");b.exports=function(){return function(a,b){return g("fn$cartocolor(%j)",arguments),new Promise(function(c,g){if(!d.hasOwnProperty(a))return g(new Error('Invalid cartocolor scheme: "'+a+'"'));var h=d[a],i=f(h);b=Math.min(i.max,Math.max(i.min,b||5)),c(new e(h,b,null,i.max))})}},b.exports.fnName="cartocolor"},{"../helper/debug":384,"../helper/min-max-keys":386,"../model/values-result":394,cartocolor:"cartocolor","es6-promise":365}],379:[function(a,b,c){"use strict";a("es6-promise").polyfill();var d=a("colorbrewer"),e=a("../model/values-result"),f=a("../helper/min-max-keys"),g=a("../helper/debug")("fn-colorbrewer");b.exports=function(){return function(a,b){return g("fn$colorbrewer(%j)",arguments),new Promise(function(c,g){if(!d.hasOwnProperty(a))return g(new Error('Invalid colorbrewer scheme: "'+a+'"'));var h=d[a],i=f(h);b=Math.min(i.max,Math.max(i.min,b||5)),c(new e(h,b,null,i.max))})}},b.exports.fnName="colorbrewer"},{"../helper/debug":384,"../helper/min-max-keys":386,"../model/values-result":394,colorbrewer:120,"es6-promise":365}],380:[function(a,b,c){"use strict";a("es6-promise").polyfill();var d=a("../helper/debug")("fn-identity");b.exports=function(a){return function(){d("fn$identity(%j)",arguments);for(var b=new Array(arguments.length),c=0;c<b.length;++c)"string"==typeof arguments[c]?b[c]="'"+arguments[c]+"'":b[c]=arguments[c];return Promise.resolve(a+"("+b.join(",")+")")}},b.exports.fnName="pass"},{"../helper/debug":384,"es6-promise":365}],381:[function(a,b,c){"use strict";function d(a){return function(b,c,d,h,i){var j=c.filter(e),k=c.filter(g(e)),l=j.slice(1);"="===a&&(k=k.slice(1).concat([c.filter(g(e))[0]])),l=l.filter(g(f));var m=new w(new t(k),new u(l,null,d),a);return m.process(b,h,i)}}function e(a,b){return b%2===0}function f(a){return null===a}function g(a,b){return function(){return!a.apply(b,arguments)}}function h(a,b,c){if(0===c.length)return Promise.reject(new q("invalid number of arguments"));if(Number.isFinite(c[0]))return k(a,b,c);if(!r(c[1]))return j(a,b,c);var d=c[0],e=c[1],f=c[2],g=i(f);return e=e.is(t)?new u(e.get(),g):e,e.is(v)?e.get(b,g).then(n(d)):Promise.resolve(e).then(n(d))}function i(a){return y.hasOwnProperty(a)?y[a]:a}function j(a,b,c){var d=c[0],e=(c[1]||"quantiles").toLowerCase(),f=d.getLength();return l(a,b,f,e).then(m(d))}function k(a,b,c){if(c.length<2)return Promise.reject(new q("invalid number of arguments"));var d,e,f=+c[0],g=+c[1],h=null;if(Number.isFinite(c[2]))if(d=c[2],r(c[3])){if(h=c[3],e=null,h.getLength()!==d)return Promise.reject(new q("invalid ramp length, got "+h.getLength()+" values, expected "+d))}else h=null,e=c[3];else r(c[2])?(h=c[2],d=h.getLength(),e=null):(h=null,d=5,e=c[2]);var i=new t([f,g],d,s,Number.POSITIVE_INFINITY);return null===h?(e=(e||"quantiles").toLowerCase(),l(a,b,d,e).then(m(i))):(h=h.is(u)?h:new u(h.get(),"max"),Promise.resolve(h).then(m(i)))}function l(a,b,c,d){return new Promise(function(e,f){a.getRamp(p(b),c,d,function(a,b){if(a)return f(new q("unable to compute ramp,",a));var c="max",d={};Array.isArray(b)||(c=b.strategy||"max",d=b.stats,b=b.ramp),e(new u(b,c,d))})})}function m(a){return function(b){var c,d=Math.min(a.getLength(),b.getLength()),e=[],f=b.get(),g=a.get();if(d>0)for(c=0;c<d;c++)e.push(f[c]),e.push(g[c]);else e.push(null,g[0]);return{ramp:e,strategy:b.getStrategy(),stats:b.stats}}}function n(a){return function(b){if(w.supports(b.getStrategy()))return new w(a,b,b.getStrategy());var c,d=Math.min(a.getMaxSize(),b.getMaxSize()),e=[],f=b.get(),g=a.get(d);if(d>0)for(c=0;c<d;c++)e.push(f[c]),e.push(g[c]);else e.push(null,g[0]);return{ramp:e,strategy:b.getStrategy(),stats:b.stats}}}a("es6-promise").polyfill();var o=a("../helper/debug")("fn-ramp"),p=a("../helper/column-name"),q=a("../helper/turbo-carto-error"),r=a("../model/is-result"),s=a("../helper/linear-buckets"),t=a("../model/values-result"),u=a("../model/filters-result"),v=a("../model/lazy-filters-result"),w=a("../model/ramp/ramp-result"),x={max:function(a,b,c,d,h){var i=b.filter(g(e)),j=b.filter(e).filter(g(f)),k=new w(new t(i),new u(j,null,c),">");return k.process(a,d,h)},split:d(">"),exact:d("="),"=":d("=")};b.exports=function(a,b,c){return function(d,e){return o("fn$ramp(%j)",arguments),o('Using "%s" datasource to calculate ramp',a.getName()),e=Array.prototype.slice.call(arguments,1),h(a,d,e).then(function(a){if(a.constructor===w)return a.process(p(d),b,c);var e=x.hasOwnProperty(a.strategy)?x[a.strategy]:x.max;return e(p(d),a.ramp,a.stats,b,c)}).catch(function(a){var c={};throw b.parent&&(c.selector=b.parent.selector),b.source&&(c.source={start:b.source.start,end:b.source.end}),new q('Failed to process "'+b.prop+'" property:',a,c)})}};var y={quantiles:"max",equal:"max",jenks:"max",headtails:"split",category:"exact"};b.exports.fnName="ramp"},{"../helper/column-name":383,"../helper/debug":384,"../helper/linear-buckets":385,"../helper/turbo-carto-error":387,"../model/filters-result":389,"../model/is-result":390,"../model/lazy-filters-result":391,"../model/ramp/ramp-result":393,"../model/values-result":394,"es6-promise":365}],382:[function(a,b,c){"use strict";a("es6-promise").polyfill();var d=a("../model/values-result"),e=a("../helper/debug")("fn-range"),f=a("../helper/linear-buckets");b.exports=function(){return function(a,b,c){return e("fn$range(%j)",arguments),new Promise(function(e){var g=[a,b];c=Number.isFinite(c)?c:5,e(new d(g,c,f,Number.POSITIVE_INFINITY))})}},b.exports.fnName="range"},{"../helper/debug":384,"../helper/linear-buckets":385,"../model/values-result":394,"es6-promise":365}],383:[function(a,b,c){"use strict";function d(a){return a.replace("[","").replace("]","")}b.exports=d},{}],384:[function(a,b,c){"use strict";var d=a("debug");b.exports=function(a){return d(["turbo-carto",a].join(":"))}},{debug:363}],385:[function(a,b,c){"use strict";b.exports=function(a,b,c){Array.isArray(a)&&(c=b,b=a[1],a=a[0]);var d=[],e=b-a,f=e/(c-1);f!==Number.POSITIVE_INFINITY&&f!==Number.NEGATIVE_INFINITY||(f=0);for(var g=0;g<c;g++)d.push(a+g*f);return d}},{}],386:[function(a,b,c){"use strict";function d(a){return Object.keys(a).reduce(function(a,b){return Number.isFinite(+b)&&(null===a.min&&(a.min=+b),null===a.max&&(a.max=+b),a.max=Math.max(a.max,+b),a.min=Math.min(a.min,+b)),a},{min:null,max:null})}b.exports=d},{}],387:[function(a,b,c){"use strict";function d(a,b,c){Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,b&&(a+=" "+b.message),this.message=a,this.originalErr=b,this.context=c}a("util").inherits(d,Error),b.exports=d},{util:403}],388:[function(a,b,c){"use strict";function d(a,b,c){new e(a,b).getCartocss(c)}var e=a("./turbo-carto");b.exports=d,b.exports.TurboCarto=e,b.exports.version=a("../package.json").version},{"../package.json":367,"./turbo-carto":396}],389:[function(a,b,c){"use strict";function d(a,b,c){g.call(this,a,a.length),this.strategy=b,this.stats=c}function e(a){return!Number.isFinite(a)}var f=a("util"),g=a("./values-result");f.inherits(d,g),b.exports=d,d.prototype.getStrategy=function(){return this.result.some(e)?"=":this.strategy}},{"./values-result":394,util:403}],390:[function(a,b,c){"use strict";function d(a){return"object"==typeof a&&null!==a&&(a.constructor===e||a.constructor===f||a.constructor===g)}var e=a("./values-result"),f=a("./filters-result"),g=a("./lazy-filters-result");b.exports=d},{"./filters-result":389,"./lazy-filters-result":391,"./values-result":394}],391:[function(a,b,c){"use strict";function d(a){this.filterGenerator=a}a("es6-promise").polyfill();var e=a("util"),f=a("./filters-result");e.inherits(d,f),b.exports=d,d.prototype.get=function(a,b){return this.filterGenerator(a,b)}},{"./filters-result":389,"es6-promise":365,util:403}],392:[function(a,b,c){"use strict";function d(){this.rules=[]}b.exports=d,d.prototype.add=function(a){this.rules.push(a)}},{}],393:[function(a,b,c){"use strict";function d(a,b,c){this.values=a,this.filters=b,this.mapping=c||">",this.mapping="=="===this.mapping?"=":this.mapping}function e(a){return a=a||{},{min:a.min_val,max:a.max_val,avg:a.avg_val}}function f(a,b){return b=b||"",a&&"root"!==a.type&&(b=f(a.parent,a.selector+b)),b}var g=a("../../helper/turbo-carto-error"),h=a("postcss");b.exports=d;var i={"=":"equality","==":"equality",">":"greater_than_or_equal",">=":"greater_than_or_equal","<":"less_than_or_equal","<=":"less_than_or_equal"},j={CATEGORY:"category",DEFAULT:"default",RANGE:"range"};d.prototype.process=function(a,b,c){var d=i[this.mapping];return d===i["<"]?this.processLessThanOrEqual(a,b,c):d===i["=="]?this.processEquality(a,b,c):this.processGreaterThanOrEqual(a,b,c)},d.supports=function(a){return i.hasOwnProperty(a)||!a},d.prototype.processEquality=function(a,b,c){if(this.filters.getLength()>this.values.getMaxSize())throw new g("`"+this.mapping+"` requires more or same values than filters to work.");var d=this.values.get(this.filters.getLength()+1),e=this.filters.get(),i=b,k=null;d.length!==e.length&&(k=d[d.length-1],i=h.decl({prop:b.prop,value:k}),b.replaceWith(i));var l={start:0,end:e.length},m=0,n=this.processGeneric(i,a,k,d,e,l,m);if(d.length===e.length&&b.remove(),c){var o={selector:f(i.parent),prop:i.prop,column:a,mapping:this.mapping,buckets:[],stats:{}};o.buckets=e.map(function(a,b){return{filter:{name:a,type:j.CATEGORY},value:d[b]}}),null!==k&&o.buckets.push({filter:{type:j.DEFAULT},value:k}),c.add(o)}return n},d.prototype.processGreaterThanOrEqual=function(a,b,c){var d=Math.min(this.values.getMaxSize(),this.filters.getMaxSize()),g=this.values.get(d<=1?d+1:d),i=this.filters.get(d),k=g[0],l=h.decl({prop:b.prop,value:k});b.replaceWith(l);var m={start:0,end:Math.max(i.length-1,1)},n=1;if(c){var o=e(this.filters.stats),p={selector:f(l.parent),prop:l.prop,column:a,mapping:this.mapping,buckets:[],stats:{filter_avg:o.avg}},q=null;Number.isFinite(o.min)&&(q=o.min);var r=0;p.buckets=i.slice(m.start,m.end).map(function(a,b){var c={filter:{type:j.RANGE,start:q,end:a},value:g[b]};return q=a,r=b,c}),p.buckets.push({filter:{type:j.RANGE,start:q,end:o.max},value:g[r+1]}),c.add(p)}return this.processGeneric(l,a,k,g,i,m,n)},d.prototype.processLessThanOrEqual=function(a,b,c){var d=this.values.get(this.filters.getLength()),g=this.filters.get(),i=d[d.length-1],k=h.decl({prop:b.prop,value:i});b.replaceWith(k);var l={start:0,end:g.length-1},m=1;if(c){var n=e(this.filters.stats),o={selector:f(k.parent),prop:k.prop,column:a,mapping:this.mapping,buckets:[],stats:{filter_avg:n.avg}},p=null;Number.isFinite(n.min)&&(p=n.min);var q=0;o.buckets=g.slice(l.start,l.end).map(function(a,b){var c={filter:{type:j.RANGE,start:p,end:a},value:d[b]};return p=a,q=b,c}),o.buckets.push({filter:{type:j.RANGE,start:p,end:n.max},value:d[q+1]}),c.add(o)}var r=d.concat().reverse(),s=g.concat().reverse();return this.processGeneric(k,a,i,r,s,l,m)},d.prototype.processGeneric=function(a,b,c,d,e,f,g){var i=a;return e.slice(f.start,f.end).forEach(function(c,e){var f=Number.isFinite(c)?c:'"'+c+'"',j=h.rule({selector:"[ "+b+" "+this.mapping+" "+f+" ]"});j.append(h.decl({prop:a.prop,value:d[e+g]})),j.moveAfter(i),i=j}.bind(this)),{values:d,filters:e,mapping:this.mapping}}},{"../../helper/turbo-carto-error":387,postcss:242}],394:[function(a,b,c){"use strict";function d(a,b,c,d){this.result=a,this.defaultSize=b||a.length,this.getter=c,this.maxSize=d||a.length}b.exports=d,d.prototype.get=function(a){return a=a||this.defaultSize,this.getter?this.getter(this.result,a):Array.isArray(this.result)?a>0?this.result.slice(0,a):this.result:this.result.hasOwnProperty(a)?this.result[a]:this.result[this.defaultSize]},d.prototype.getLength=function(a){return this.get(a).length},d.prototype.getMaxSize=function(){return this.maxSize},d.prototype.toString=function(){return JSON.stringify({result:this.result,defaultSize:this.defaultSize,getter:this.getter&&this.getter.toString()})},d.prototype.is=function(a){return this.constructor===a}},{}],395:[function(a,b,c){"use strict";function d(a){this.datasource=a}a("es6-promise").polyfill();var e=a("postcss-value-parser"),f=a("postcss"),g=a("./fn/builder");b.exports=d,d.prototype.getPlugin=function(a){var b=this;return f.plugin("turbo-carto",function(){return function(c){var d=new g(b.datasource);return c.walkDecls(function(b){var c=e(b.value);c.walk(function(c){if("function"===c.type)return d.add(b,c,a),!1},!1)}),d.exec()}})}},{"./fn/builder":368,"es6-promise":365,postcss:242,"postcss-value-parser":225}],396:[function(a,b,c){"use strict";function d(a,b){this.cartocss=a,this.datasource=b,this.metadataHolder=new g}var e=a("postcss"),f=a("./postcss-turbo-carto"),g=a("./model/metadata-holder");d.prototype.getCartocss=function(a){var b=this,c=new f(this.datasource);e([c.getPlugin(this.metadataHolder)]).process(this.cartocss).then(function(c){a(null,c.css,b.metadataHolder)}).catch(a)},d.prototype.getMetadata=function(a){return a(null,this.metadataHolder)},b.exports=d},{"./model/metadata-holder":392,"./postcss-turbo-carto":395,postcss:242}],397:[function(a,b,c){var d=a("simple-statistics");b.exports=function(a,b,c){var e=[],f=[];return a.features.forEach(function(a){void 0!==a.properties[b]&&e.push(a.properties[b])}),f=d.jenks(e,c)}},{"simple-statistics":291}],398:[function(a,b,c){function d(a){if(L&&A){var b,c=L(a);for(b=0;b<c.length;b+=1)A(a,c[b],{value:a[c[b]],writable:!1,enumerable:!1,configurable:!1})}}function e(a){function b(b){A(a,b,{get:function(){return a._getter(b)},set:function(c){a._setter(b,c)},enumerable:!0,configurable:!1})}if(A){if(a.length>C)throw new RangeError("Array too large for polyfill");var c;for(c=0;c<a.length;c+=1)b(c)}}function f(a,b){var c=32-b;return a<<c>>c}function g(a,b){var c=32-b;return a<<c>>>c}function h(a){return[255&a]}function i(a){return f(a[0],8)}function j(a){return[255&a]}function k(a){return g(a[0],8)}function l(a){return a=K(Number(a)),[a<0?0:a>255?255:255&a]}function m(a){return[a>>8&255,255&a]}function n(a){return f(a[0]<<8|a[1],16)}function o(a){return[a>>8&255,255&a]}function p(a){return g(a[0]<<8|a[1],16)}function q(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function r(a){return f(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function s(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function t(a){return g(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function u(a,b,c){function d(a){var b=G(a),c=a-b;return c<.5?b:c>.5?b+1:b%2?b+1:b}var e,f,g,h,i,j,k,l=(1<<b-1)-1;for(a!==a?(f=(1<<b)-1,g=J(2,c-1),e=0):a===1/0||a===-(1/0)?(f=(1<<b)-1,g=0,e=a<0?1:0):0===a?(f=0,g=0,e=1/a===-(1/0)?1:0):(e=a<0,a=F(a),a>=J(2,1-l)?(f=I(G(H(a)/E),1023),g=d(a/J(2,f)*J(2,c)),g/J(2,c)>=2&&(f+=1,g=1),f>l?(f=(1<<b)-1,g=0):(f+=l,g-=J(2,c))):(f=0,g=d(a/J(2,1-l-c)))),i=[],h=c;h;h-=1)i.push(g%2?1:0),g=G(g/2);for(h=b;h;h-=1)i.push(f%2?1:0),f=G(f/2);for(i.push(e?1:0),i.reverse(),j=i.join(""),k=[];j.length;)k.push(parseInt(j.substring(0,8),2)),j=j.substring(8);return k}function v(a,b,c){var d,e,f,g,h,i,j,k,l=[];for(d=a.length;d;d-=1)for(f=a[d-1],e=8;e;e-=1)l.push(f%2?1:0),f>>=1;return l.reverse(),g=l.join(""),h=(1<<b-1)-1,i=parseInt(g.substring(0,1),2)?-1:1,j=parseInt(g.substring(1,1+b),2),k=parseInt(g.substring(1+b),2),j===(1<<b)-1?0!==k?NaN:i*(1/0):j>0?i*J(2,j-h)*(1+k/J(2,c)):0!==k?i*J(2,-(h-1))*(k/J(2,c)):i<0?-0:0}function w(a){return v(a,11,52)}function x(a){return u(a,11,52)}function y(a){return v(a,8,23)}function z(a){return u(a,8,23)}var A,B=void 0,C=1e5,D=function(){var a=Object.prototype.toString,b=Object.prototype.hasOwnProperty;return{Class:function(b){return a.call(b).replace(/^\[object *|\]$/g,"")},HasProperty:function(a,b){return b in a},HasOwnProperty:function(a,c){return b.call(a,c)},IsCallable:function(a){return"function"==typeof a},ToInt32:function(a){return a>>0},ToUint32:function(a){return a>>>0}}}(),E=Math.LN2,F=Math.abs,G=Math.floor,H=Math.log,I=Math.min,J=Math.pow,K=Math.round;A=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}()?Object.defineProperty:function(a,b,c){if(!a===Object(a))throw new TypeError("Object.defineProperty called on non-object");return D.HasProperty(c,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(a,b,c.get),D.HasProperty(c,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(a,b,c.set),D.HasProperty(c,"value")&&(a[b]=c.value),a};var L=Object.getOwnPropertyNames||function(a){if(a!==Object(a))throw new TypeError("Object.getOwnPropertyNames called on non-object");var b,c=[];for(b in a)D.HasOwnProperty(a,b)&&c.push(b);return c};!function(){function a(a,c,g){var h;return h=function(a,c,f){var g,i,j,k;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===h)for(g=arguments[0],this.length=g.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new b(this.byteLength),this.byteOffset=0,j=0;j<this.length;j+=1)this._setter(j,g._getter(j));else if("object"!=typeof arguments[0]||(arguments[0]instanceof b||"ArrayBuffer"===D.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof b||"ArrayBuffer"===D.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=a,this.byteOffset=D.ToUint32(c),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=D.ToUint32(f),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(i=arguments[0],this.length=D.ToUint32(i.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new b(this.byteLength),this.byteOffset=0,j=0;j<this.length;j+=1)k=i[j],this._setter(j,Number(k));else{if(this.length=D.ToInt32(arguments[0]),f<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new b(this.byteLength),this.byteOffset=0}this.constructor=h,d(this),e(this)},h.prototype=new f,h.prototype.BYTES_PER_ELEMENT=a,h.prototype._pack=c,h.prototype._unpack=g,h.BYTES_PER_ELEMENT=a,h.prototype._getter=function(a){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(a=D.ToUint32(a),a>=this.length)return B;var b,c,d=[];for(b=0,c=this.byteOffset+a*this.BYTES_PER_ELEMENT;b<this.BYTES_PER_ELEMENT;b+=1,c+=1)d.push(this.buffer._bytes[c]);return this._unpack(d)},h.prototype.get=h.prototype._getter,h.prototype._setter=function(a,b){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(a=D.ToUint32(a),a>=this.length)return B;var c,d,e=this._pack(b);for(c=0,d=this.byteOffset+a*this.BYTES_PER_ELEMENT;c<this.BYTES_PER_ELEMENT;c+=1,d+=1)this.buffer._bytes[d]=e[c]},h.prototype.set=function(a,b){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var c,d,e,f,g,h,i,j,k,l;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(c=arguments[0],e=D.ToUint32(arguments[1]),e+c.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(j=this.byteOffset+e*this.BYTES_PER_ELEMENT,k=c.length*this.BYTES_PER_ELEMENT,c.buffer===this.buffer){for(l=[],g=0,h=c.byteOffset;g<k;g+=1,h+=1)l[g]=c.buffer._bytes[h];for(g=0,i=j;g<k;g+=1,i+=1)this.buffer._bytes[i]=l[g]}else for(g=0,h=c.byteOffset,i=j;g<k;g+=1,h+=1,i+=1)this.buffer._bytes[i]=c.buffer._bytes[h]}else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(d=arguments[0],f=D.ToUint32(d.length),e=D.ToUint32(arguments[1]),e+f>this.length)throw new RangeError("Offset plus length of array is out of range");for(g=0;g<f;g+=1)h=d[g],this._setter(e+g,Number(h))}},h.prototype.subarray=function(a,b){function c(a,b,c){return a<b?b:a>c?c:a}a=D.ToInt32(a),b=D.ToInt32(b),arguments.length<1&&(a=0),arguments.length<2&&(b=this.length),a<0&&(a=this.length+a),b<0&&(b=this.length+b),a=c(a,0,this.length),b=c(b,0,this.length);var d=b-a;return d<0&&(d=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d)},h}var b=function(a){if(a=D.ToInt32(a),a<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=a,this._bytes=[],this._bytes.length=a;var b;for(b=0;b<this.byteLength;b+=1)this._bytes[b]=0;d(this)};c.ArrayBuffer=c.ArrayBuffer||b;var f=function(){},g=a(1,h,i),u=a(1,j,k),v=a(1,l,k),A=a(2,m,n),C=a(2,o,p),E=a(4,q,r),F=a(4,s,t),G=a(4,z,y),H=a(8,x,w);c.Int8Array=c.Int8Array||g,c.Uint8Array=c.Uint8Array||u,c.Uint8ClampedArray=c.Uint8ClampedArray||v,c.Int16Array=c.Int16Array||A,c.Uint16Array=c.Uint16Array||C,c.Int32Array=c.Int32Array||E,c.Uint32Array=c.Uint32Array||F,c.Float32Array=c.Float32Array||G,c.Float64Array=c.Float64Array||H}(),function(){function a(a,b){return D.IsCallable(a.get)?a.get(b):a[b]}function b(b){return function(d,e){if(d=D.ToUint32(d),d+b.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");d+=this.byteOffset;var g,h=new c.Uint8Array(this.buffer,d,b.BYTES_PER_ELEMENT),i=[];for(g=0;g<b.BYTES_PER_ELEMENT;g+=1)i.push(a(h,g));return Boolean(e)===Boolean(f)&&i.reverse(),a(new b(new c.Uint8Array(i).buffer),0)}}function e(b){return function(d,e,g){if(d=D.ToUint32(d),d+b.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var h,i,j=new b([e]),k=new c.Uint8Array(j.buffer),l=[];for(h=0;h<b.BYTES_PER_ELEMENT;h+=1)l.push(a(k,h));Boolean(g)===Boolean(f)&&l.reverse(),i=new c.Uint8Array(this.buffer,d,b.BYTES_PER_ELEMENT),i.set(l)}}var f=function(){var b=new c.Uint16Array([4660]),d=new c.Uint8Array(b.buffer);return 18===a(d,0)}(),g=function(a,b,e){if(0===arguments.length)a=new c.ArrayBuffer(0);else if(!(a instanceof c.ArrayBuffer||"ArrayBuffer"===D.Class(a)))throw new TypeError("TypeError");if(this.buffer=a||new c.ArrayBuffer(0),this.byteOffset=D.ToUint32(b),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=D.ToUint32(e),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");d(this)};g.prototype.getUint8=b(c.Uint8Array),g.prototype.getInt8=b(c.Int8Array),g.prototype.getUint16=b(c.Uint16Array),g.prototype.getInt16=b(c.Int16Array),g.prototype.getUint32=b(c.Uint32Array),g.prototype.getInt32=b(c.Int32Array),g.prototype.getFloat32=b(c.Float32Array),g.prototype.getFloat64=b(c.Float64Array),g.prototype.setUint8=e(c.Uint8Array),g.prototype.setInt8=e(c.Int8Array),g.prototype.setUint16=e(c.Uint16Array),g.prototype.setInt16=e(c.Int16Array),g.prototype.setUint32=e(c.Uint32Array),g.prototype.setInt32=e(c.Int32Array),g.prototype.setFloat32=e(c.Float32Array),g.prototype.setFloat64=e(c.Float64Array),c.DataView=c.DataView||g}()},{}],399:[function(a,b,c){"use strict";function d(a,b){"boolean"==typeof b?b={commonJS:b}:b||(b={});var c=h.replace(/defineNamespace\(\)/g,f(a)).split("source()");return c[0]=c[0].trim(),c[0]+="var define,module,exports;",b.commonJS&&(c[0]+="module={exports:(exports={})};"),c[0]+="\n",b.commonJS&&(c[1]="return module.exports;"+c[1]),c[1]="\n"+c[1],c}function e(a){a=a.replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()}),/^[a-zA-Z_$]$/.test(a[0])||(a=a.substr(1));var b=a.replace(/[^\w$]+/g,"");if(!b)throw new Error("Invalid JavaScript identifier resulted from camel-casing");return b}function f(a){var b=a.split(".");if(1===b.length)return"g."+e(a)+" = f()";if(2===b.length)return b=b.map(e),"(g."+b[0]+" || (g."+b[0]+" = {}))."+b[1]+" = f()";var c=b.pop();return b.map(g).concat(["g."+e(c)+" = f()"]).join(";")}function g(a){return a=e(a),"g=(g."+a+"||(g."+a+" = {}))"}var h='(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}defineNamespace()}})(function(){source()});';c=b.exports=function(a,b,d){if("string"==typeof d&&"object"==typeof b){var e=d;d=b,b=e}return c.prelude(a,d)+b+c.postlude(a,d)},c.prelude=function(a,b){return d(a,b)[0]},c.postlude=function(a,b){return d(a,b)[1]}},{}],400:[function(a,b,c){(function(a){function c(a,b){function c(){if(!e){if(d("throwDeprecation"))throw new Error(b);d("traceDeprecation")?console.trace(b):console.warn(b),e=!0}return a.apply(this,arguments)}if(d("noDeprecation"))return a;var e=!1;return c}function d(b){try{if(!a.localStorage)return!1}catch(a){return!1}var c=a.localStorage[b];return null!=c&&"true"===String(c).toLowerCase()}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],401:[function(a,b,c){arguments[4][173][0].apply(c,arguments)},{dup:173}],402:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],403:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),
z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(d<0)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return a<10?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}default:return a}}),h=d[c];c<f;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":402,_process:256,inherits:401}],404:[function(a,b,c){function d(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)e.call(c,d)&&(a[d]=c[d])}return a}b.exports=d;var e=Object.prototype.hasOwnProperty},{}],"backbone-forms":[function(a,b,c){(function(b){!function(b){if("undefined"!=typeof c&&"undefined"!=typeof a)var d=b.jQuery||b.Zepto||b.ender||a("jquery"),e=b._||a("underscore"),f=b.Backbone||a("backbone");else var d=b.jQuery,e=b._,f=b.Backbone;var g=f.View.extend({initialize:function(a){var b=this;a=a||{};var c=this.schema=function(){if(a.schema)return e.result(a,"schema");var c=a.model;return c&&c.schema?e.isFunction(c.schema)?c.schema():c.schema:b.schema?e.isFunction(b.schema)?b.schema():b.schema:{}}();e.extend(this,e.pick(a,"model","data","idPrefix","templateData"));var d=this.constructor;this.template=a.template||this.template||d.template,this.Fieldset=a.Fieldset||this.Fieldset||d.Fieldset,this.Field=a.Field||this.Field||d.Field,this.NestedField=a.NestedField||this.NestedField||d.NestedField;var f=this.selectedFields=a.fields||e.keys(c),g=this.fields={};e.each(f,function(a){var b=c[a];g[a]=this.createField(a,b)},this);var h=a.fieldsets||[f];this.fieldsets=[];e.each(h,function(a){this.fieldsets.push(this.createFieldset(a))},this)},createFieldset:function(a){var b={schema:a,fields:this.fields};return new this.Fieldset(b)},createField:function(a,b){var c={form:this,key:a,schema:b,idPrefix:this.idPrefix};this.model?c.model=this.model:this.data?c.value=this.data[a]:c.value=null;var d=new this.Field(c);return this.listenTo(d.editor,"all",this.handleEditorEvent),d},handleEditorEvent:function(a,b){var c=b.key+":"+a;switch(this.trigger.call(this,c,this,b,Array.prototype.slice.call(arguments,2)),a){case"change":this.trigger("change",this);break;case"focus":this.hasFocus||this.trigger("focus",this);break;case"blur":if(this.hasFocus){var d=this;setTimeout(function(){var a=e.find(d.fields,function(a){return a.editor.hasFocus});a||d.trigger("blur",d)},0)}}},render:function(){var a=this,b=this.fields,c=d(d.trim(this.template(e.result(this,"templateData"))));return c.find("[data-editors]").add(c).each(function(c,f){var g=d(f),h=g.attr("data-editors");if(!e.isUndefined(h)){var i="*"==h?a.selectedFields||e.keys(b):h.split(",");e.each(i,function(a){var c=b[a];g.append(c.editor.render().el)})}}),c.find("[data-fields]").add(c).each(function(c,f){var g=d(f),h=g.attr("data-fields");if(!e.isUndefined(h)){var i="*"==h?a.selectedFields||e.keys(b):h.split(",");e.each(i,function(a){var c=b[a];g.append(c.render().el)})}}),c.find("[data-fieldsets]").add(c).each(function(b,c){var f=d(c),g=f.attr("data-fieldsets");e.isUndefined(g)||e.each(a.fieldsets,function(a){f.append(a.render().el)})}),this.setElement(c),c.addClass(this.className),this},validate:function(a){var b=this.fields,c=this.model,d={};if(a=a||{},e.each(b,function(a){var b=a.validate();b&&(d[a.key]=b)}),!a.skipModelValidate&&c&&c.validate){var f=c.validate(this.getValue());if(f){var g=e.isObject(f)&&!e.isArray(f);g||(d._others=d._others||[],d._others.push(f)),g&&e.each(f,function(a,c){if(b[c]&&!d[c])b[c].setError(a),d[c]=a;else{d._others=d._others||[];var e={};e[c]=a,d._others.push(e)}})}}return e.isEmpty(d)?null:d},commit:function(a){a=a||{};var b={skipModelValidate:!a.validate},c=this.validate(b);if(c)return c;var d,f=e.extend({error:function(a,b){d=b}},a);return this.model.set(this.getValue(),f),d?d:void 0},getValue:function(a){if(a)return this.fields[a].getValue();var b={};return e.each(this.fields,function(a){b[a.key]=a.getValue()}),b},setValue:function(a,b){var c={};"string"==typeof a?c[a]=b:c=a;var d;for(d in this.schema)void 0!==c[d]&&this.fields[d].setValue(c[d])},getEditor:function(a){var b=this.fields[a];if(!b)throw new Error("Field not found: "+a);return b.editor},focus:function(){if(!this.hasFocus){var a=this.fieldsets[0],b=a.getFieldAt(0);b&&b.editor.focus()}},blur:function(){if(this.hasFocus){var a=e.find(this.fields,function(a){return a.editor.hasFocus});a&&a.editor.blur()}},trigger:function(a){return"focus"===a?this.hasFocus=!0:"blur"===a&&(this.hasFocus=!1),f.View.prototype.trigger.apply(this,arguments)},remove:function(){return e.each(this.fieldsets,function(a){a.remove()}),e.each(this.fields,function(a){a.remove()}),f.View.prototype.remove.apply(this,arguments)}},{template:e.template("    <form data-fieldsets></form>  ",null,this.templateSettings),templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},editors:{}});g.validators=function(){var a={};return a.errMessages={required:"Required",regexp:"Invalid",email:"Invalid email address",url:"Invalid URL",match:e.template('Must match field "<%= field %>"',null,g.templateSettings)},a.required=function(a){return a=e.extend({type:"required",message:this.errMessages.required},a),function(b){a.value=b;var c={type:a.type,message:e.isFunction(a.message)?a.message(a):a.message};if(null===b||void 0===b||b===!1||""===b)return c}},a.regexp=function(a){if(!a.regexp)throw new Error('Missing required "regexp" option for "regexp" validator');return a=e.extend({type:"regexp",message:this.errMessages.regexp},a),function(b){a.value=b;var c={type:a.type,message:e.isFunction(a.message)?a.message(a):a.message};if(null!==b&&void 0!==b&&""!==b)return a.regexp.test(b)?void 0:c}},a.email=function(b){return b=e.extend({type:"email",message:this.errMessages.email,regexp:/^[\w\-]{1,}([\w\-\+.]{1,1}[\w\-]{1,}){0,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/},b),a.regexp(b)},a.url=function(b){return b=e.extend({type:"url",message:this.errMessages.url,regexp:/^(http|https):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i},b),a.regexp(b)},a.match=function(a){if(!a.field)throw new Error('Missing required "field" options for "match" validator');return a=e.extend({type:"match",message:this.errMessages.match},a),function(b,c){a.value=b;var d={type:a.type,message:e.isFunction(a.message)?a.message(a):a.message};if(null!==b&&void 0!==b&&""!==b)return b!==c[a.field]?d:void 0}},a}(),g.Fieldset=f.View.extend({initialize:function(a){a=a||{};var b=this.schema=this.createSchema(a.schema);this.fields=e.pick(a.fields,b.fields),this.template=a.template||this.constructor.template},createSchema:function(a){return e.isArray(a)&&(a={fields:a}),a.legend=a.legend||null,a},getFieldAt:function(a){var b=this.schema.fields[a];return this.fields[b]},templateData:function(){return this.schema},render:function(){var a=(this.schema,this.fields),b=d(d.trim(this.template(e.result(this,"templateData"))));return b.find("[data-fields]").add(b).each(function(b,c){var f=d(c),g=f.attr("data-fields");e.isUndefined(g)||e.each(a,function(a){f.append(a.render().el)})}),this.setElement(b),this},remove:function(){e.each(this.fields,function(a){a.remove()}),f.View.prototype.remove.call(this)}},{template:e.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ",null,g.templateSettings)}),g.Field=f.View.extend({initialize:function(a){a=a||{},e.extend(this,e.pick(a,"form","key","model","value","idPrefix"));var b=this.schema=this.createSchema(a.schema);this.template=a.template||b.template||this.constructor.template,this.errorClassName=a.errorClassName||this.constructor.errorClassName,this.editor=this.createEditor()},createSchema:function(a){return e.isString(a)&&(a={type:a}),a=e.extend({type:"Text",title:this.createTitle()},a),a.type=e.isString(a.type)?g.editors[a.type]:a.type,a},createEditor:function(){var a=e.extend(e.pick(this,"schema","form","key","model","value"),{id:this.createEditorId()}),b=this.schema.type;return new b(a)},createEditorId:function(){var a=this.idPrefix,b=this.key;return b=b.replace(/\./g,"_"),e.isString(a)||e.isNumber(a)?a+b:e.isNull(a)?b:this.model?this.model.cid+"_"+b:b},createTitle:function(){var a=this.key;return a=a.replace(/([A-Z])/g," $1"),a=a.replace(/^./,function(a){return a.toUpperCase()})},templateData:function(){var a=this.schema;return{help:a.help||"",title:a.title,fieldAttrs:a.fieldAttrs,editorAttrs:a.editorAttrs,key:this.key,editorId:this.editor.id}},render:function(){var a=this.schema,b=this.editor;if(a.type==g.editors.Hidden)return this.setElement(b.render().el);var c=d(d.trim(this.template(e.result(this,"templateData"))));return a.fieldClass&&c.addClass(a.fieldClass),a.fieldAttrs&&c.attr(a.fieldAttrs),c.find("[data-editor]").add(c).each(function(a,c){var f=d(c),g=f.attr("data-editor");e.isUndefined(g)||f.append(b.render().el)}),this.setElement(c),this},validate:function(){var a=this.editor.validate();return a?this.setError(a.message):this.clearError(),a},setError:function(a){this.editor.hasNestedForm||(this.$el.addClass(this.errorClassName),this.$("[data-error]").html(a))},clearError:function(){this.$el.removeClass(this.errorClassName),this.$("[data-error]").empty()},commit:function(){return this.editor.commit()},getValue:function(){return this.editor.getValue()},setValue:function(a){this.editor.setValue(a)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),f.View.prototype.remove.call(this)}},{template:e.template('    <div>      <label for="<%= editorId %>"><%= title %></label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ',null,g.templateSettings),errorClassName:"error"}),g.NestedField=g.Field.extend({template:e.template(d.trim("    <div>      <span data-editor></span>      <% if (help) { %>        <div><%= help %></div>      <% } %>      <div data-error></div>    </div>  "),null,g.templateSettings)}),g.Editor=g.editors.Base=f.View.extend({defaultValue:null,hasFocus:!1,initialize:function(a){var a=a||{};if(a.model){if(!a.key)throw new Error("Missing option: 'key'");this.model=a.model,this.value=this.model.get(a.key)}else void 0!==a.value&&(this.value=a.value);void 0===this.value&&(this.value=this.defaultValue),e.extend(this,e.pick(a,"key","form"));var b=this.schema=a.schema||{};this.validators=a.validators||b.validators,this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),b.editorClass&&this.$el.addClass(b.editorClass),b.editorAttrs&&this.$el.attr(b.editorAttrs)},getName:function(){var a=this.key||"";return a.replace(/\./g,"_")},getValue:function(){return this.value},setValue:function(a){this.value=a},focus:function(){throw new Error("Not implemented")},blur:function(){throw new Error("Not implemented")},commit:function(a){var b=this.validate();return b?b:(this.listenTo(this.model,"invalid",function(a,c){b=c}),this.model.set(this.key,this.getValue(),a),b?b:void 0)},validate:function(){var a=(this.$el,null),b=this.getValue(),c=this.form?this.form.getValue():{},d=this.validators,f=this.getValidator;return d&&e.every(d,function(d){return a=f(d)(b,c),!a}),a},trigger:function(a){return"focus"===a?this.hasFocus=!0:"blur"===a&&(this.hasFocus=!1),f.View.prototype.trigger.apply(this,arguments)},getValidator:function(a){var b=g.validators;if(e.isRegExp(a))return b.regexp({regexp:a});if(e.isString(a)){if(!b[a])throw new Error('Validator "'+a+'" not found');return b[a]()}if(e.isFunction(a))return a;if(e.isObject(a)&&a.type){var c=a;return b[c.type](c)}throw new Error("Invalid validator: "+a)}}),g.editors.Text=g.Editor.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(a){var b=this;setTimeout(function(){b.determineChange()},0)},select:function(a){this.trigger("select",this)},focus:function(a){this.trigger("focus",this)},blur:function(a){this.trigger("blur",this)}},initialize:function(a){g.editors.Base.prototype.initialize.call(this,a);var b=this.schema,c="text";b&&b.editorAttrs&&b.editorAttrs.type&&(c=b.editorAttrs.type),b&&b.dataType&&(c=b.dataType),this.$el.attr("type",c)},render:function(){return this.setValue(this.value),this},determineChange:function(a){var b=this.$el.val(),c=b!==this.previousValue;c&&(this.previousValue=b,this.trigger("change",this))},getValue:function(){return this.$el.val()},setValue:function(a){this.$el.val(a)},focus:function(){this.hasFocus||this.$el.focus()},blur:function(){this.hasFocus&&this.$el.blur()},select:function(){this.$el.select()}}),g.editors.TextArea=g.editors.Text.extend({tagName:"textarea",initialize:function(a){g.editors.Base.prototype.initialize.call(this,a)}}),g.editors.Password=g.editors.Text.extend({initialize:function(a){g.editors.Text.prototype.initialize.call(this,a),this.$el.attr("type","password")}}),g.editors.Number=g.editors.Text.extend({defaultValue:0,events:e.extend({},g.editors.Text.prototype.events,{keypress:"onKeyPress",change:"onKeyPress"}),initialize:function(a){g.editors.Text.prototype.initialize.call(this,a);var b=this.schema;this.$el.attr("type","number"),b&&b.editorAttrs&&b.editorAttrs.step||this.$el.attr("step","any")},onKeyPress:function(a){var b=this,c=function(){setTimeout(function(){b.determineChange()},0)};if(0===a.charCode)return void c();var d=this.$el.val();void 0!=a.charCode&&(d+=String.fromCharCode(a.charCode));var e=/^[0-9]*\.?[0-9]*?$/.test(d);e?c():a.preventDefault()},getValue:function(){var a=this.$el.val();return""===a?null:parseFloat(a,10)},setValue:function(a){a=function(){return e.isNumber(a)?a:e.isString(a)&&""!==a?parseFloat(a,10):null}(),e.isNaN(a)&&(a=null),g.editors.Text.prototype.setValue.call(this,a)}}),g.editors.Hidden=g.editors.Text.extend({defaultValue:"",initialize:function(a){g.editors.Text.prototype.initialize.call(this,a),this.$el.attr("type","hidden")},focus:function(){},blur:function(){}}),g.editors.Checkbox=g.editors.Base.extend({defaultValue:!1,tagName:"input",events:{click:function(a){this.trigger("change",this)},focus:function(a){this.trigger("focus",this)},blur:function(a){this.trigger("blur",this)}},initialize:function(a){g.editors.Base.prototype.initialize.call(this,a),this.$el.attr("type","checkbox")},render:function(){return this.setValue(this.value),this},getValue:function(){return this.$el.prop("checked")},setValue:function(a){a?this.$el.prop("checked",!0):this.$el.prop("checked",!1)},focus:function(){this.hasFocus||this.$el.focus()},blur:function(){this.hasFocus&&this.$el.blur()}}),g.editors.Select=g.editors.Base.extend({tagName:"select",events:{change:function(a){this.trigger("change",this)},focus:function(a){this.trigger("focus",this)},blur:function(a){this.trigger("blur",this)}},initialize:function(a){if(g.editors.Base.prototype.initialize.call(this,a),!this.schema||!this.schema.options)throw new Error("Missing required 'schema.options'")},render:function(){return this.setOptions(this.schema.options),this},setOptions:function(a){var b=this;if(a instanceof f.Collection){var c=a;c.length>0?this.renderOptions(a):c.fetch({success:function(c){b.renderOptions(a)}})}else e.isFunction(a)?a(function(a){b.renderOptions(a)},b):this.renderOptions(a)},renderOptions:function(a){var b,c=this.$el;b=this._getOptionsHtml(a),c.html(b),this.setValue(this.value)},_getOptionsHtml:function(a){var b;if(e.isString(a))b=a;else if(e.isArray(a))b=this._arrayToHtml(a);else if(a instanceof f.Collection)b=this._collectionToHtml(a);else if(e.isFunction(a)){var c;a(function(a){c=a},this),b=this._getOptionsHtml(c)}else b=this._objectToHtml(a);return b},getValue:function(){return this.$el.val()},setValue:function(a){this.$el.val(a)},focus:function(){this.hasFocus||this.$el.focus()},blur:function(){this.hasFocus&&this.$el.blur()},_collectionToHtml:function(a){var b=[];a.each(function(a){b.push({val:a.id,label:a.toString()})});var c=this._arrayToHtml(b);return c},_objectToHtml:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push({val:c,label:a[c]});var d=this._arrayToHtml(b);return d},_arrayToHtml:function(a){var b=[];return e.each(a,function(a){if(e.isObject(a))if(a.group)b.push('<optgroup label="'+a.group+'">'),b.push(this._getOptionsHtml(a.options)),b.push("</optgroup>");else{var c=a.val||0===a.val?a.val:"";b.push('<option value="'+c+'">'+a.label+"</option>")}else b.push("<option>"+a+"</option>")},this),b.join("")}}),g.editors.Radio=g.editors.Select.extend({tagName:"ul",events:{"change input[type=radio]":function(){this.trigger("change",this)},"focus input[type=radio]":function(){this.hasFocus||this.trigger("focus",this)},"blur input[type=radio]":function(){if(this.hasFocus){var a=this;setTimeout(function(){a.$("input[type=radio]:focus")[0]||a.trigger("blur",a)},0)}}},getValue:function(){return this.$("input[type=radio]:checked").val()},setValue:function(a){this.$("input[type=radio]").val([a])},focus:function(){if(!this.hasFocus){var a=this.$("input[type=radio]:checked");return a[0]?void a.focus():void this.$("input[type=radio]").first().focus()}},blur:function(){this.hasFocus&&this.$("input[type=radio]:focus").blur()},_arrayToHtml:function(a){var b=[],c=this;return e.each(a,function(a,d){var f="<li>";if(e.isObject(a)){var g=a.val||0===a.val?a.val:"";f+='<input type="radio" name="'+c.getName()+'" value="'+g+'" id="'+c.id+"-"+d+'" />',f+='<label for="'+c.id+"-"+d+'">'+a.label+"</label>"}else f+='<input type="radio" name="'+c.getName()+'" value="'+a+'" id="'+c.id+"-"+d+'" />',f+='<label for="'+c.id+"-"+d+'">'+a+"</label>";f+="</li>",b.push(f)}),b.join("")}}),g.editors.Checkboxes=g.editors.Select.extend({tagName:"ul",groupNumber:0,events:{"click input[type=checkbox]":function(){this.trigger("change",this)},"focus input[type=checkbox]":function(){this.hasFocus||this.trigger("focus",this)},"blur input[type=checkbox]":function(){if(this.hasFocus){var a=this;setTimeout(function(){a.$("input[type=checkbox]:focus")[0]||a.trigger("blur",a)},0)}}},getValue:function(){var a=[];return this.$("input[type=checkbox]:checked").each(function(){a.push(d(this).val())}),a},setValue:function(a){e.isArray(a)||(a=[a]),this.$("input[type=checkbox]").val(a)},focus:function(){this.hasFocus||this.$("input[type=checkbox]").first().focus()},blur:function(){this.hasFocus&&this.$("input[type=checkbox]:focus").blur()},_arrayToHtml:function(a){var b=[],c=this;return e.each(a,function(a,d){var f="<li>",g=!0;if(e.isObject(a))if(a.group){var h=c.id;c.id+="-"+c.groupNumber++,f='<fieldset class="group"> <legend>'+a.group+"</legend>",f+=c._arrayToHtml(a.options),f+="</fieldset>",c.id=h,g=!1}else{var i=a.val||0===a.val?a.val:"";f+='<input type="checkbox" name="'+c.getName()+'" value="'+i+'" id="'+c.id+"-"+d+'" />',f+='<label for="'+c.id+"-"+d+'">'+a.label+"</label>"}else f+='<input type="checkbox" name="'+c.getName()+'" value="'+a+'" id="'+c.id+"-"+d+'" />',f+='<label for="'+c.id+"-"+d+'">'+a+"</label>";g&&(f+="</li>"),b.push(f)}),b.join("")}}),g.editors.Object=g.editors.Base.extend({hasNestedForm:!0,initialize:function(a){if(this.value={},g.editors.Base.prototype.initialize.call(this,a),!this.form)throw new Error('Missing required option "form"');if(!this.schema.subSchema)throw new Error("Missing required 'schema.subSchema' option for Object editor")},render:function(){var a=this.form.constructor;return this.nestedForm=new a({schema:this.schema.subSchema,data:this.value,idPrefix:this.id+"_",Field:a.NestedField}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){return this.nestedForm?this.nestedForm.getValue():this.value},setValue:function(a){this.value=a,this.render()},focus:function(){this.hasFocus||this.nestedForm.focus()},blur:function(){this.hasFocus&&this.nestedForm.blur()},remove:function(){this.nestedForm.remove(),f.View.prototype.remove.call(this)},validate:function(){return this.nestedForm.validate()},_observeFormEvents:function(){this.nestedForm&&this.nestedForm.on("all",function(){var a=e.toArray(arguments);a[1]=this,this.trigger.apply(this,a)},this)}}),g.editors.NestedModel=g.editors.Object.extend({initialize:function(a){if(g.editors.Base.prototype.initialize.call(this,a),!this.form)throw new Error('Missing required option "form"');if(!a.schema.model)throw new Error('Missing required "schema.model" option for NestedModel editor')},render:function(){var a=this.form.constructor,b=this.value||{},c=(this.key,this.schema.model),d=b.constructor===c?b:new c(b);return this.nestedForm=new a({model:d,idPrefix:this.id+"_",fieldTemplate:"nestedField"}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},commit:function(){var a=this.nestedForm.commit();return a?(this.$el.addClass("error"),a):g.editors.Object.prototype.commit.call(this)}}),g.editors.Date=g.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){this.hasFocus||this.trigger("focus",this)},"blur select":function(){if(this.hasFocus){var a=this;setTimeout(function(){a.$("select:focus")[0]||a.trigger("blur",a)},0)}}},initialize:function(a){a=a||{},g.editors.Base.prototype.initialize.call(this,a);var b=g.editors.Date,c=new Date;if(this.options=e.extend({monthNames:b.monthNames,showMonthNames:b.showMonthNames},a),this.schema=e.extend({yearStart:c.getFullYear()-100,yearEnd:c.getFullYear()},a.schema||{}),this.value&&!e.isDate(this.value)&&(this.value=new Date(this.value)),!this.value){var d=new Date;d.setSeconds(0),d.setMilliseconds(0),this.value=d}this.template=a.template||this.constructor.template},render:function(){var a=this.options,b=this.schema,c=e.map(e.range(1,32),function(a){return'<option value="'+a+'">'+a+"</option>"}),f=e.map(e.range(0,12),function(b){var c=a.showMonthNames?a.monthNames[b]:b+1;return'<option value="'+b+'">'+c+"</option>"}),g=b.yearStart<b.yearEnd?e.range(b.yearStart,b.yearEnd+1):e.range(b.yearStart,b.yearEnd-1,-1),h=e.map(g,function(a){return'<option value="'+a+'">'+a+"</option>"}),i=d(d.trim(this.template({dates:c.join(""),months:f.join(""),years:h.join("")})));return this.$date=i.find('[data-type="date"]'),this.$month=i.find('[data-type="month"]'),this.$year=i.find('[data-type="year"]'),this.$hidden=d('<input type="hidden" name="'+this.key+'" />'),i.append(this.$hidden),this.setValue(this.value),this.setElement(i),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var a=this.$year.val(),b=this.$month.val(),c=this.$date.val();return a&&b&&c?new Date(a,b,c):null},setValue:function(a){this.$date.val(a.getDate()),this.$month.val(a.getMonth()),this.$year.val(a.getFullYear()),this.updateHidden()},focus:function(){this.hasFocus||this.$("select").first().focus()},blur:function(){this.hasFocus&&this.$("select:focus").blur()},updateHidden:function(){var a=this.getValue();e.isDate(a)&&(a=a.toISOString()),this.$hidden.val(a)}},{template:e.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ',null,g.templateSettings),showMonthNames:!0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}),g.editors.DateTime=g.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){this.hasFocus||this.trigger("focus",this)},"blur select":function(){if(this.hasFocus){var a=this;setTimeout(function(){a.$("select:focus")[0]||a.trigger("blur",a)},0)}}},initialize:function(a){a=a||{},g.editors.Base.prototype.initialize.call(this,a),this.options=e.extend({DateEditor:g.editors.DateTime.DateEditor},a),this.schema=e.extend({minsInterval:15},a.schema||{}),this.dateEditor=new this.options.DateEditor(a),this.value=this.dateEditor.value,this.template=a.template||this.constructor.template},render:function(){function a(a){return a<10?"0"+a:a}var b=this.schema,c=e.map(e.range(0,24),function(b){return'<option value="'+b+'">'+a(b)+"</option>"}),f=e.map(e.range(0,60,b.minsInterval),function(b){return'<option value="'+b+'">'+a(b)+"</option>"}),g=d(d.trim(this.template({hours:c.join(),mins:f.join()})));return g.find("[data-date]").append(this.dateEditor.render().el),this.$hour=g.find('select[data-type="hour"]'),this.$min=g.find('select[data-type="min"]'),this.$hidden=g.find('input[type="hidden"]'),this.setValue(this.value),this.setElement(g),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var a=this.dateEditor.getValue(),b=this.$hour.val(),c=this.$min.val();return a&&b&&c?(a.setHours(b),a.setMinutes(c),a):null},setValue:function(a){e.isDate(a)||(a=new Date(a)),this.dateEditor.setValue(a),this.$hour.val(a.getHours()),this.$min.val(a.getMinutes()),this.updateHidden()},focus:function(){this.hasFocus||this.$("select").first().focus()},blur:function(){this.hasFocus&&this.$("select:focus").blur()},updateHidden:function(){var a=this.getValue();e.isDate(a)&&(a=a.toISOString()),this.$hidden.val(a)},remove:function(){this.dateEditor.remove(),g.editors.Base.prototype.remove.call(this)}},{template:e.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ',null,g.templateSettings),DateEditor:g.editors.Date}),g.VERSION="0.13.0",f.Form=g,"undefined"!=typeof c&&(c=g)}(window||b||this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],"backbone-model-file-upload":[function(a,b,c){!function(b,d){if("function"==typeof define&&define.amd)define(["underscore","jquery","backbone"],function(a,c,e){d(b,e,a,c)});else if("undefined"!=typeof c){var e=a("underscore"),f=a("jquery"),g=a("backbone");d(b,g,e,f)}else d(b,b.Backbone,b._,b.$)}(this,function(a,b,c,d){"use strict";var e=c.clone(b.Model.prototype),f=b.Model.extend({fileAttribute:"file",save:function(a,b,f){var g,h=this.attributes;if(null==a||"object"==typeof a?(g=a,f=b):(g={})[a]=b,f=c.extend({validate:!0},f),g&&!f.wait){if(!this.set(g,f))return!1}else if(!this._validate(g,f))return!1;var i=c.extend({},h,g);if(g&&f.wait&&(this.attributes=i),f.formData===!0||f.formData!==!1&&i[this.fileAttribute]&&i[this.fileAttribute]instanceof File||i[this.fileAttribute]instanceof FileList||i[this.fileAttribute]instanceof Blob){var j=c.clone(i),k=i[this.fileAttribute];j=this._flatten(j),j[this.fileAttribute]=k;var l=new FormData;c.each(j,function(a,b){return a instanceof FileList?void c.each(a,function(a){l.append(b,a)}):void l.append(b,a)}),f.data=l,f.processData=!1,f.contentType=!1;var m=this;f.xhr=function(){var a=d.ajaxSettings.xhr();return a.upload.addEventListener("progress",m._progressHandler.bind(m),!1),a}}return g&&f.wait&&(this.attributes=h),e.save.call(this,g,f)},_flatten:function a(b){var c={};for(var d in b)if(b.hasOwnProperty(d))if("object"==typeof b[d]){var e=a(b[d]);for(var f in e)e.hasOwnProperty(f)&&(c[d+"["+f+"]"]=e[f])}else c[d]=b[d];return c},_unflatten:function a(b,d){var e=/^([^\[\]]+)\[(.+)\]$/g;d=d||{};for(var f in b){var g=b[f];if(f.toString().match(e)){var h=c.compact(f.split(e)),i={};i[h[1]]=g,d[h[0]]=a(i,d[h[0]]);
}else{var i={};i[f]=g,c.extend(d,i)}}return d},_progressHandler:function(a){if(a.lengthComputable){var b=a.loaded/a.total;this.trigger("progress",b)}}});b.Model=f})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],"backbone-undo":[function(a,b,c){!function(d){"function"==typeof define&&define.amd?define(["underscore","backbone"],d):"undefined"!=typeof c?b.exports=d(a("underscore"),a("backbone")):d(_,Backbone)}(function(a,b){function c(a,b,c){return c.length<=4?a.call(b,c[0],c[1],c[2],c[3]):a.apply(b,c)}function d(a,b){return n.call(a,b)}function e(b,c){return null!=b&&(a.isArray(c)||(c=d(arguments,1)),a.all(c,function(a){return a in b}))}function f(){this.registeredObjects=[],this.cidIndexes=[]}function g(b,c,d,e){for(var f,g=0,h=c.length;g<h;g++)if(f=c[g]){if("on"===b){if(!e.objectRegistry.register(f))continue}else if(!e.objectRegistry.unregister(f))continue;a.isFunction(f[b])&&f[b]("all",d,e)}}function h(b,c){var d=c.type,e=c.undoTypes,f=!e[d]||e[d][b];a.isFunction(f)&&f(c.object,c.before,c.after,c.options)}function i(b,c,d,e,f){if(!(d.isCurrentlyUndoRedoing||"undo"===b&&d.pointer===-1||"redo"===b&&d.pointer===d.length-1)){d.isCurrentlyUndoRedoing=!0;var g,h,i="undo"===b;for(f?h=i&&d.pointer===d.length-1||!i&&d.pointer===-1?a.clone(d.models):n.apply(d.models,i?[0,d.pointer]:[d.pointer,d.length-1]):(g=d.at(i?d.pointer:d.pointer+1),h=e?d.where({magicFusionIndex:g.get("magicFusionIndex")}):[g]),d.pointer+=(i?-1:1)*h.length;g=i?h.pop():h.shift();)g[b]();d.isCurrentlyUndoRedoing=!1,c.trigger(b,c)}}function j(a,b){var d=a.condition,e=typeof d;return"function"===e?!!c(d,a,b):"boolean"!==e||d}function k(a,b,d,f){if(a.track&&!a.isCurrentlyUndoRedoing&&b in f&&j(f[b],d)){var g,h=c(f[b].on,f[b],d);if(e(h,"object","before","after")){if(h.type=b,h.magicFusionIndex=o(),h.undoTypes=f,a.pointer<a.length-1)for(var g=a.length-a.pointer-1;g--;)a.pop();a.pointer=a.length,a.add(h),a.length>a.maximumStackLength&&(a.shift(),a.pointer--)}}}function l(){}function m(b,c,d,f){if("object"==typeof c)return a.each(c,function(a,c){2===b?m(b,a,d,f):m(b,c,a,d)});switch(b){case 0:e(d,"undo","redo","on")&&a.all(a.pick(d,"undo","redo","on"),a.isFunction)&&(f[c]=d);break;case 1:f[c]&&a.isObject(d)&&(f[c]=a.extend({},f[c],d));break;case 2:delete f[c]}return this}var n=Array.prototype.slice,o=function(){function b(){d++,c=!0,a.defer(function(){c=!1})}var c=!1,d=-1;return function(){return c||b(),d}}();f.prototype={isRegistered:function(b){return b&&b.cid?this.registeredObjects[b.cid]:a.contains(this.registeredObjects,b)},register:function(a){return!this.isRegistered(a)&&(a&&a.cid?(this.registeredObjects[a.cid]=a,this.cidIndexes.push(a.cid)):this.registeredObjects.push(a),!0)},unregister:function(b){if(this.isRegistered(b)){if(b&&b.cid)delete this.registeredObjects[b.cid],this.cidIndexes.splice(a.indexOf(this.cidIndexes,b.cid),1);else{var c=a.indexOf(this.registeredObjects,b);this.registeredObjects.splice(c,1)}return!0}return!1},get:function(){return a.map(this.cidIndexes,function(a){return this.registeredObjects[a]},this).concat(this.registeredObjects)}};var p={add:{undo:function(a,b,c,d){a.remove(c,d)},redo:function(a,b,c,d){d.index&&(d.at=d.index),a.add(c,d)},on:function(b,c,d){return{object:c,before:void 0,after:b,options:a.clone(d)}}},remove:{undo:function(a,b,c,d){"index"in d&&(d.at=d.index),a.add(b,d)},redo:function(a,b,c,d){a.remove(b,d)},on:function(b,c,d){return{object:c,before:b,after:void 0,options:a.clone(d)}}},change:{undo:function(b,c,d,e){a.isEmpty(c)?a.each(a.keys(d),b.unset,b):(b.set(c),e&&e.unsetData&&e.unsetData.before&&e.unsetData.before.length&&a.each(e.unsetData.before,b.unset,b))},redo:function(b,c,d,e){a.isEmpty(d)?a.each(a.keys(c),b.unset,b):(b.set(d),e&&e.unsetData&&e.unsetData.after&&e.unsetData.after.length&&a.each(e.unsetData.after,b.unset,b))},on:function(b,c){var d=b.changedAttributes(),e=a.keys(d),f=a.pick(b.previousAttributes(),e),g=a.keys(f),h=(c||(c={})).unsetData={after:[],before:[]};return e.length!=g.length&&(e.length>g.length?a.each(e,function(a){a in f||h.before.push(a)},this):a.each(g,function(a){a in d||h.after.push(a)})),{object:b,before:f,after:d,options:a.clone(c)}}},reset:{undo:function(a,b,c){a.reset(b)},redo:function(a,b,c){a.reset(c)},on:function(b,c){return{object:b,before:c.previousModels,after:a.clone(b.models)}}}};l.prototype=p;var q=b.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(a){h("undo",this.attributes)},redo:function(a){h("redo",this.attributes)}}),r=b.Collection.extend({model:q,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(a){this.maximumStackLength=a}}),s=b.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(b){this.stack=new r,this.objectRegistry=new f,this.undoTypes=new l,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(a,b){this.stack.setMaxLength(b)},this),b&&b.track&&this.startTracking(),b&&b.register&&(a.isArray(b.register)||a.isArguments(b.register)?c(this.register,this,b.register):this.register(b.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(a){k(this.stack,a,d(arguments,1),this.undoTypes)},register:function(){g("on",arguments,this._addToStack,this)},unregister:function(){g("off",arguments,this._addToStack,this)},unregisterAll:function(){c(this.unregister,this,this.objectRegistry.get())},undo:function(a){i("undo",this,this.stack,a)},undoAll:function(){i("undo",this,this.stack,!1,!0)},redo:function(a){i("redo",this,this.stack,a)},redoAll:function(){i("redo",this,this.stack,!1,!0)},isAvailable:function(a){var b=this.stack,c=b.length;switch(a){case"undo":return c>0&&b.pointer>-1;case"redo":return c>0&&b.pointer<c-1;default:return!1}},merge:function(b){for(var c,e=a.isArray(b)?b:d(arguments);c=e.pop();)c instanceof s&&c.stack instanceof r&&(c.stack=this.stack)},addUndoType:function(a,b){m(0,a,b,this.undoTypes)},changeUndoType:function(a,b){m(1,a,b,this.undoTypes)},removeUndoType:function(a){m(2,a,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return a.extend(s,{defaults:function(b){a.extend(s.prototype.defaults,b)},addUndoType:function(a,b){m(0,a,b,p)},changeUndoType:function(a,b){m(1,a,b,p)},removeUndoType:function(a){m(2,a,void 0,p)}}),b.UndoManager=s})},{backbone:"backbone",underscore:"underscore"}],backbone:[function(a,b,c){(function(b){!function(d){var e="object"==typeof self&&self.self==self&&self||"object"==typeof b&&b.global==b&&b;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(a,b,c){e.Backbone=d(e,c,a,b)});else if("undefined"!=typeof c){var f,g=a("underscore");try{f=a("jquery")}catch(a){}d(e,c,g,f)}else e.Backbone=d(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(a,b,c,d){var e=a.Backbone,f=Array.prototype.slice;b.VERSION="1.2.3",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var g=function(a,b,d){switch(a){case 1:return function(){return c[b](this[d])};case 2:return function(a){return c[b](this[d],a)};case 3:return function(a,e){return c[b](this[d],i(a,this),e)};case 4:return function(a,e,f){return c[b](this[d],i(a,this),e,f)};default:return function(){var a=f.call(arguments);return a.unshift(this[d]),c[b].apply(c,a)}}},h=function(a,b,d){c.each(b,function(b,e){c[e]&&(a.prototype[e]=g(b,e,d))})},i=function(a,b){return c.isFunction(a)?a:c.isObject(a)&&!b._isModel(a)?j(a):c.isString(a)?function(b){return b.get(a)}:a},j=function(a){var b=c.matches(a);return function(a){return b(a.attributes)}},k=b.Events={},l=/\s+/,m=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d){void 0!==e&&"context"in f&&void 0===f.context&&(f.context=e);for(g=c.keys(d);h<g.length;h++)b=m(a,b,g[h],d[g[h]],f)}else if(d&&l.test(d))for(g=d.split(l);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};k.on=function(a,b,c){return n(this,a,b,c)};var n=function(a,b,c,d,e){if(a._events=m(o,a._events||{},b,c,{context:d,ctx:a,listening:e}),e){var f=a._listeners||(a._listeners={});f[e.id]=e}return a};k.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),g=f[e];if(!g){var h=this._listenId||(this._listenId=c.uniqueId("l"));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0}}return n(a,b,d,this,g),this};var o=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a};k.off=function(a,b,c){return this._events?(this._events=m(p,this._events,a,b,{context:c,listeners:this._listeners}),this):this},k.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this)}return c.isEmpty(e)&&(this._listeningTo=void 0),this};var p=function(a,b,d,e){if(a){var f,g=0,h=e.context,i=e.listeners;if(b||d||h){for(var j=b?[b]:c.keys(a);g<j.length;g++){b=j[g];var k=a[b];if(!k)break;for(var l=[],m=0;m<k.length;m++){var n=k[m];d&&d!==n.callback&&d!==n.callback._callback||h&&h!==n.context?l.push(n):(f=n.listening,f&&0===--f.count&&(delete i[f.id],delete f.listeningTo[f.objId]))}l.length?a[b]=l:delete a[b]}return c.size(a)?a:void 0}for(var o=c.keys(i);g<o.length;g++)f=i[o[g]],delete i[f.id],delete f.listeningTo[f.objId]}};k.once=function(a,b,d){var e=m(q,{},a,b,c.bind(this.off,this));return this.on(e,void 0,d)},k.listenToOnce=function(a,b,d){var e=m(q,{},b,d,c.bind(this.stopListening,this,a));return this.listenTo(a,e)};var q=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};k.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;d<b;d++)c[d]=arguments[d+1];return m(r,this._events,a,void 0,c),this};var r=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&s(e,d),f&&s(f,[b].concat(d))}return a},s=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}};k.bind=k.on,k.unbind=k.off,c.extend(b,k);var t=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(t.prototype,k,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){if(null==a)return this;var e;if("object"==typeof a?(e=a,d=b):(e={})[a]=b,d||(d={}),!this._validate(e,d))return!1;var f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=c.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;for(var m in e)b=e[m],c.isEqual(j[m],b)||h.push(m),c.isEqual(l[m],b)?delete k[m]:k[m]=b,f?delete j[m]:j[m]=b;if(this.id=this.get(this.idAttribute),!g){h.length&&(this._pending=d);for(var n=0;n<h.length;n++)this.trigger("change:"+h[n],this,j[h[n]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&c.clone(this.changed);var b=this._changing?this._previousAttributes:this.attributes,d={};for(var e in a){var f=a[e];c.isEqual(b[e],f)||(d[e]=f)}return!!c.size(d)&&d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=c.extend({parse:!0},a);var b=this,d=a.success;return a.success=function(c){var e=a.parse?b.parse(c,a):c;return!!b.set(e,a)&&(d&&d.call(a.context,b,c,a),void b.trigger("sync",b,c,a))},P(this,a),this.sync("read",this,a)},save:function(a,b,d){var e;null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0,parse:!0},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;return f&&(b=c.extend({},e,b)),!(b&&!g.set(b,d))&&(h&&h.call(d.context,g,a,d),void g.trigger("sync",g,a,d))},P(this,d),e&&f&&(this.attributes=c.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(P(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||O();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.defaults({validate:!0},a))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return!d||(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1)}});var u={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(t,u,"attributes");var v=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},y=function(a,b,c){c=Math.min(Math.max(c,0),a.length);for(var d=Array(a.length-c),e=b.length,f=0;f<d.length;f++)d[f]=a[f+c];for(f=0;f<e;f++)a[f+c]=b[f];for(f=0;f<d.length;f++)a[f+e+c]=d[f]};c.extend(v.prototype,k,{model:t,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,x))},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:c.clone(a);var e=this._removeModels(a,b);return!b.silent&&e&&this.trigger("update",this,b),d?e[0]:e},set:function(a,b){if(null!=a){b=c.defaults({},b,w),b.parse&&!this._isModel(a)&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?[a]:a.slice();var e=b.at;null!=e&&(e=+e),e<0&&(e+=this.length+1);for(var f,g=[],h=[],i=[],j={},k=b.add,l=b.merge,m=b.remove,n=!1,o=this.comparator&&null==e&&b.sort!==!1,p=c.isString(this.comparator)?this.comparator:null,q=0;q<a.length;q++){f=a[q];var r=this.get(f);if(r){if(l&&f!==r){var s=this._isModel(f)?f.attributes:f;b.parse&&(s=r.parse(s,b)),r.set(s,b),o&&!n&&(n=r.hasChanged(p))}j[r.cid]||(j[r.cid]=!0,g.push(r)),a[q]=r}else k&&(f=a[q]=this._prepareModel(f,b),f&&(h.push(f),this._addReference(f,b),j[f.cid]=!0,g.push(f)))}if(m){for(q=0;q<this.length;q++)f=this.models[q],j[f.cid]||i.push(f);i.length&&this._removeModels(i,b)}var t=!1,u=!o&&k&&m;if(g.length&&u?(t=this.length!=g.length||c.some(this.models,function(a,b){return a!==g[b]}),this.models.length=0,y(this.models,g,0),this.length=this.models.length):h.length&&(o&&(n=!0),y(this.models,h,null==e?this.length:e),this.length=this.models.length),n&&this.sort({silent:!0}),!b.silent){for(q=0;q<h.length;q++)null!=e&&(b.index=e+q),f=h[q],f.trigger("add",f,this,b);(n||t)&&this.trigger("sort",this,b),(h.length||i.length)&&this.trigger("update",this,b)}return d?a[0]:a}},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return f.apply(this.models,arguments)},get:function(a){if(null!=a){var b=this.modelId(this._isModel(a)?a.attributes:a);return this._byId[a]||this._byId[b]||this._byId[a.cid]}},at:function(a){return a<0&&(a+=this.length),this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var b=this.comparator;if(!b)throw new Error("Cannot sort a set without a comparator");a||(a={});var d=b.length;return c.isFunction(b)&&(b=c.bind(b,this)),1===d||c.isString(b)?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=c.extend({parse:!0},a);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},P(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;if(a=this._prepareModel(a,b),!a)return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return!!c.length&&c},_isModel:function(a){return a instanceof t},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if("add"!==a&&"remove"!==a||c===this){if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}this.trigger.apply(this,arguments)}}});var z={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};h(v,z,"models");var A=b.View=function(a){this.cid=c.uniqueId("view"),c.extend(this,c.pick(a,C)),this._ensureElement(),this.initialize.apply(this,arguments)},B=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];c.extend(A.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=c.result(this,"events")),!a)return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[d]),d){var e=b.match(B);this.delegate(e[1],e[2],c.bind(d,this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a.class=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),b.sync=function(a,d,e){var f=D[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||O()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){if(a.setRequestHeader("X-HTTP-Method-Override",f),h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var D={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var E=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,H=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(E.prototype,k,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g,d)!==!1&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(I,"\\$&").replace(F,"(?:$1)?").replace(G,function(a,b){return b?a:"([^/?]+)"}).replace(H,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var J=b.History=function(){this.handlers=[],this.checkUrl=c.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},K=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,M=/#.*$/;J.started=!1,c.extend(J.prototype,k,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.getSearch()},matchRoot:function(){var a=this.decodeFragment(this.location.pathname),b=a.slice(0,this.root.length-1)+"/";return b===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(K,"")},start:function(a){if(J.started)throw new Error("Backbone.history has already been started");if(J.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(L,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};if(this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),J.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b!==this.fragment&&(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return!!this.matchRoot()&&(a=this.fragment=this.getFragment(a),c.some(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0}))},navigate:function(a,b){if(!J.started)return!1;b&&b!==!0||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;""!==a&&"?"!==a.charAt(0)||(c=c.slice(0,-1)||"/");var d=c+a;if(a=this.decodeFragment(a.replace(M,"")),this.fragment!==a){if(this.fragment=a,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var e=this.iframe.contentWindow;b.replace||(e.document.open(),e.document.close()),this._updateHash(e.location,a,b.replace)}}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new J;var N=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};t.extend=v.extend=E.extend=A.extend=J.extend=N;var O=function(){throw new Error('A "url" property or function must be specified')},P=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:"jquery",underscore:"underscore"}],"bootstrap-colorpicker":[function(a,b,c){!function(d,e){"function"==typeof define&&define.amd?define(["jquery"],function(a){return e(a)}):"object"==typeof c?b.exports=e(a("jquery")):jQuery&&!jQuery.fn.colorpicker&&e(jQuery)}(this,function(a){"use strict";var b=function(c,d,e,f,g){this.fallbackValue=e?e&&"undefined"!=typeof e.h?e:this.value={h:0,s:0,b:0,a:1}:null,this.fallbackFormat=f?f:"rgba",this.hexNumberSignPrefix=g,this.value=this.fallbackValue,this.origFormat=null,this.predefinedColors=d?d:{},this.colors=a.extend({},b.webColors,this.predefinedColors),c&&("undefined"!=typeof c.h?this.value=c:this.setColor(String(c))),this.value||(this.value={h:0,s:0,b:0,a:1})};b.webColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",
springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",transparent:"transparent"},b.prototype={constructor:b,colors:{},predefinedColors:{},getValue:function(){return this.value},setValue:function(a){this.value=a},_sanitizeNumber:function(a){return"number"==typeof a?a:isNaN(a)||null===a||""===a||void 0===a?1:""===a?0:"undefined"!=typeof a.toLowerCase?(a.match(/^\./)&&(a="0"+a),Math.ceil(100*parseFloat(a))/100):1},isTransparent:function(a){return!(!a||!("string"==typeof a||a instanceof String))&&(a=a.toLowerCase().trim(),"transparent"===a||a.match(/#?00000000/)||a.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(a){return 0===a.r&&0===a.g&&0===a.b&&0===a.a},setColor:function(a){if(a=a.toLowerCase().trim()){if(this.isTransparent(a))return this.value={h:0,s:0,b:0,a:0},!0;var b=this.parse(a);b?(this.value=this.value={h:b.h,s:b.s,b:b.b,a:b.a},this.origFormat||(this.origFormat=b.format)):this.fallbackValue&&(this.value=this.fallbackValue)}return!1},setHue:function(a){this.value.h=1-a},setSaturation:function(a){this.value.s=a},setBrightness:function(a){this.value.b=1-a},setAlpha:function(a){this.value.a=Math.round(parseInt(100*(1-a),10)/100*100)/100},toRGB:function(a,b,c,d){0===arguments.length&&(a=this.value.h,b=this.value.s,c=this.value.b,d=this.value.a),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Math.abs(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],{r:Math.round(255*e),g:Math.round(255*f),b:Math.round(255*g),a:d}},toHex:function(a,b,c,d){0===arguments.length&&(a=this.value.h,b=this.value.s,c=this.value.b,d=this.value.a);var e=this.toRGB(a,b,c,d);if(this.rgbaIsTransparent(e))return"transparent";var f=(this.hexNumberSignPrefix?"#":"")+((1<<24)+(parseInt(e.r)<<16)+(parseInt(e.g)<<8)+parseInt(e.b)).toString(16).slice(1);return f},toHSL:function(a,b,c,d){0===arguments.length&&(a=this.value.h,b=this.value.s,c=this.value.b,d=this.value.a);var e=a,f=(2-b)*c,g=b*c;return g/=f>0&&f<=1?f:2-f,f/=2,g>1&&(g=1),{h:isNaN(e)?0:e,s:isNaN(g)?0:g,l:isNaN(f)?0:f,a:isNaN(d)?0:d}},toAlias:function(a,b,c,d){var e,f=0===arguments.length?this.toHex():this.toHex(a,b,c,d),g="alias"===this.origFormat?f:this.toString(this.origFormat,!1);for(var h in this.colors)if(e=this.colors[h].toLowerCase().trim(),e===f||e===g)return h;return!1},RGBtoHSB:function(a,b,c,d){a/=255,b/=255,c/=255;var e,f,g,h;return g=Math.max(a,b,c),h=g-Math.min(a,b,c),e=0===h?null:g===a?(b-c)/h:g===b?(c-a)/h+2:(a-b)/h+4,e=(e+360)%6*60/360,f=0===h?0:h/g,{h:this._sanitizeNumber(e),s:f,b:g,a:this._sanitizeNumber(d)}},HueToRGB:function(a,b,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?a+(b-a)*c*6:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a},HSLtoRGB:function(a,b,c,d){b<0&&(b=0);var e;e=c<=.5?c*(1+b):c+b-c*b;var f=2*c-e,g=a+1/3,h=a,i=a-1/3,j=Math.round(255*this.HueToRGB(f,e,g)),k=Math.round(255*this.HueToRGB(f,e,h)),l=Math.round(255*this.HueToRGB(f,e,i));return[j,k,l,this._sanitizeNumber(d)]},parse:function(b){if(0===arguments.length)return!1;var c,d,e=this,f=!1,g="undefined"!=typeof this.colors[b];return g&&(b=this.colors[b].toLowerCase().trim()),a.each(this.stringParsers,function(a,h){var i=h.re.exec(b);return c=i&&h.parse.apply(e,[i]),!c||(f={},d=g?"alias":h.format?h.format:e.getValidFallbackFormat(),f=d.match(/hsla?/)?e.RGBtoHSB.apply(e,e.HSLtoRGB.apply(e,c)):e.RGBtoHSB.apply(e,c),f instanceof Object&&(f.format=d),!1)}),f},getValidFallbackFormat:function(){var a=["rgba","rgb","hex","hsla","hsl"];return this.origFormat&&a.indexOf(this.origFormat)!==-1?this.origFormat:this.fallbackFormat&&a.indexOf(this.fallbackFormat)!==-1?this.fallbackFormat:"rgba"},toString:function(a,c){a=a||this.origFormat||this.fallbackFormat,c=c||!1;var d=!1;switch(a){case"rgb":return d=this.toRGB(),this.rgbaIsTransparent(d)?"transparent":"rgb("+d.r+","+d.g+","+d.b+")";case"rgba":return d=this.toRGB(),"rgba("+d.r+","+d.g+","+d.b+","+d.a+")";case"hsl":return d=this.toHSL(),"hsl("+Math.round(360*d.h)+","+Math.round(100*d.s)+"%,"+Math.round(100*d.l)+"%)";case"hsla":return d=this.toHSL(),"hsla("+Math.round(360*d.h)+","+Math.round(100*d.s)+"%,"+Math.round(100*d.l)+"%,"+d.a+")";case"hex":return this.toHex();case"alias":return d=this.toAlias(),d===!1?this.toString(this.getValidFallbackFormat()):c&&!(d in b.webColors)&&d in this.predefinedColors?this.predefinedColors[d]:d;default:return d}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(a){return[a[1],a[2],a[3],1]}},{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16),1]}}],colorNameToHex:function(a){return"undefined"!=typeof this.colors[a.toLowerCase()]&&this.colors[a.toLowerCase()]}};var c={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",fallbackColor:!1,fallbackFormat:"hex",hexNumberSignPrefix:!0,sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},d=function(b,d){this.element=a(b).addClass("colorpicker-element"),this.options=a.extend(!0,{},c,this.element.data(),d),this.component=this.options.component,this.component=this.component!==!1&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1&&a(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=this.createColor(this.options.color!==!1?this.options.color:this.getValue()),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.options.color!==!1&&(this.updateInput(this.color),this.updateData(this.color));var e=this.picker=a(this.options.template);if(this.options.customClass&&e.addClass(this.options.customClass),this.options.inline?e.addClass("colorpicker-inline colorpicker-visible"):e.addClass("colorpicker-hidden"),this.options.horizontal&&e.addClass("colorpicker-horizontal"),["rgba","hsla","alias"].indexOf(this.format)===-1&&this.options.format!==!1&&"transparent"!==this.getValue()||e.addClass("colorpicker-with-alpha"),"right"===this.options.align&&e.addClass("colorpicker-right"),this.options.inline===!0&&e.addClass("colorpicker-no-arrow"),this.options.colorSelectors){var f=this,g=f.picker.find(".colorpicker-selectors");g.length>0&&(a.each(this.options.colorSelectors,function(b,c){var d=a("<i />").addClass("colorpicker-selectors-color").css("background-color",c).data("class",b).data("alias",b);d.on("mousedown.colorpicker touchstart.colorpicker",function(b){b.preventDefault(),f.setValue("alias"===f.format?a(this).data("alias"):a(this).css("background-color"))}),g.append(d)}),g.show().addClass("colorpicker-visible"))}e.on("mousedown.colorpicker touchstart.colorpicker",a.proxy(function(a){a.target===a.currentTarget&&a.preventDefault()},this)),e.find(".colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha").on("mousedown.colorpicker touchstart.colorpicker",a.proxy(this.mousedown,this)),e.appendTo(this.container?this.container:a("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":a.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":a.proxy(this.change,this)}),this.component===!1&&this.element.on({"focus.colorpicker":a.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":a.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":a.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":a.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":a.proxy(this.show,this),"focus.colorpicker":a.proxy(this.show,this)}),this.update(),a(a.proxy(function(){this.element.trigger("create")},this))};d.Color=b,d.prototype={constructor:d,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker","color").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var a=this.container&&this.container[0]!==window.document.body?"position":"offset",b=this.component||this.element,c=b[a]();"right"===this.options.align&&(c.left-=this.picker.outerWidth()-b.outerWidth()),this.picker.css({top:c.top+b.outerHeight(),left:c.left})},show:function(b){this.isDisabled()||(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),a(window).on("resize.colorpicker",a.proxy(this.reposition,this)),!b||this.hasInput()&&"color"!==this.input.attr("type")||b.stopPropagation&&b.preventDefault&&(b.stopPropagation(),b.preventDefault()),!this.component&&this.input||this.options.inline!==!1||a(window.document).on({"mousedown.colorpicker":a.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color}))},hide:function(b){return("undefined"==typeof b||!b.target||!(a(b.currentTarget).parents(".colorpicker").length>0||a(b.target).parents(".colorpicker").length>0))&&(this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),a(window).off("resize.colorpicker",this.reposition),a(window.document).off({"mousedown.colorpicker":this.hide}),this.update(),void this.element.trigger({type:"hidePicker",color:this.color}))},updateData:function(a){return a=a||this.color.toString(this.format,!1),this.element.data("color",a),a},updateInput:function(a){return a=a||this.color.toString(this.format,!1),this.input!==!1&&(this.input.prop("value",a),this.input.trigger("change")),a},updatePicker:function(a){"undefined"!=typeof a&&(this.color=this.createColor(a));var b=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,c=this.picker.find("i");if(0!==c.length)return this.options.horizontal===!1?(b=this.options.sliders,c.eq(1).css("top",b.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",b.alpha.maxTop*(1-this.color.value.a))):(b=this.options.slidersHorz,c.eq(1).css("left",b.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",b.alpha.maxLeft*(1-this.color.value.a))),c.eq(0).css({top:b.saturation.maxTop-this.color.value.b*b.saturation.maxTop,left:this.color.value.s*b.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",(this.options.hexNumberSignPrefix?"":"#")+this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",(this.options.hexNumberSignPrefix?"":"#")+this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format,!0)),a},updateComponent:function(a){var b;if(b="undefined"!=typeof a?this.createColor(a):this.color,this.component!==!1){var c=this.component.find("i").eq(0);c.length>0?c.css({backgroundColor:b.toString(this.format,!0)}):this.component.css({backgroundColor:b.toString(this.format,!0)})}return b.toString(this.format,!1)},update:function(a){var b;return this.getValue(!1)===!1&&a!==!0||(b=this.updateComponent(),this.updateInput(b),this.updateData(b),this.updatePicker()),b},setValue:function(a){this.color=this.createColor(a),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:a})},createColor:function(a){return new b(a?a:null,this.options.colorSelectors,this.options.fallbackColor?this.options.fallbackColor:this.color,this.options.fallbackFormat,this.options.hexNumberSignPrefix)},getValue:function(a){a="undefined"==typeof a?this.options.fallbackColor:a;var b;return b=this.hasInput()?this.input.val():this.element.data("color"),void 0!==b&&""!==b&&null!==b||(b=a),b},hasInput:function(){return this.input!==!1},isDisabled:function(){return!!this.hasInput()&&this.input.prop("disabled")===!0},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(b){!b.pageX&&!b.pageY&&b.originalEvent&&b.originalEvent.touches&&(b.pageX=b.originalEvent.touches[0].pageX,b.pageY=b.originalEvent.touches[0].pageY),b.stopPropagation(),b.preventDefault();var c=a(b.target),d=c.closest("div"),e=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!d.is(".colorpicker")){if(d.is(".colorpicker-saturation"))this.currentSlider=a.extend({},e.saturation);else if(d.is(".colorpicker-hue"))this.currentSlider=a.extend({},e.hue);else{if(!d.is(".colorpicker-alpha"))return!1;this.currentSlider=a.extend({},e.alpha)}var f=d.offset();this.currentSlider.guide=d.find("i")[0].style,this.currentSlider.left=b.pageX-f.left,this.currentSlider.top=b.pageY-f.top,this.mousePointer={left:b.pageX,top:b.pageY},a(window.document).on({"mousemove.colorpicker":a.proxy(this.mousemove,this),"touchmove.colorpicker":a.proxy(this.mousemove,this),"mouseup.colorpicker":a.proxy(this.mouseup,this),"touchend.colorpicker":a.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(a){!a.pageX&&!a.pageY&&a.originalEvent&&a.originalEvent.touches&&(a.pageX=a.originalEvent.touches[0].pageX,a.pageY=a.originalEvent.touches[0].pageY),a.stopPropagation(),a.preventDefault();var b=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((a.pageX||this.mousePointer.left)-this.mousePointer.left))),c=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((a.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=b+"px",this.currentSlider.guide.top=c+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,b/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,c/this.currentSlider.maxTop),this.options.format!==!1||"setAlpha"!==this.currentSlider.callTop&&"setAlpha"!==this.currentSlider.callLeft||(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(b){return b.stopPropagation(),b.preventDefault(),a(window.document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(a){this.keyup(a)},keyup:function(a){38===a.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===a.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=this.createColor(this.input.val()),this.color.origFormat&&this.options.format===!1&&(this.format=this.color.origFormat),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},a.colorpicker=d,a.fn.colorpicker=function(b){var c=Array.prototype.slice.call(arguments,1),e=1===this.length,f=null,g=this.each(function(){var e=a(this),g=e.data("colorpicker"),h="object"==typeof b?b:{};g||(g=new d(this,h),e.data("colorpicker",g)),"string"==typeof b?a.isFunction(g[b])?f=g[b].apply(g,c):(c.length&&(g[b]=c[0]),f=g[b]):f=e});return e?f:g},a.fn.colorpicker.constructor=d})},{jquery:"jquery"}],"browserify-shim":[function(a,b,c){"use strict";function d(a,b,c,d){function e(e){var f,g=c&&c[e],h=d&&d[e];try{f=g?l.resolve(b,g):h?i.sync(e,{basedir:b}):e}catch(a){f=e}return{alias:f,exports:a[e]||null}}return a?Object.keys(a).map(e).reduce(function(a,b){var c=b.alias.replace(/\\/g,"\\\\");return b.exports?a+b.exports+" = global."+b.exports+' = require("'+c+'");\n':a+'require("'+c+'");\n'},"\n; "):""}function e(a,b){return b+"; var "+q+"=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {\n"+a+"\n}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });\n"}function f(a,b){return b+"; var "+q+"=require;(function browserifyShim(module, define, require) {\n"+a+"\n}).call(global, module, undefined, undefined);\n"}function g(a){return k('\n; browserify_shim__define__module__export__(typeof %s != "undefined" ? %s : window.%s);\n',a,a,a)}function h(a,b,c,h){var i=b.exports?a+g(b.exports):a,j=d(b.depends,c,h),k=b.exports?e(i,j):f(i,j);return k}var i=(a("util"),a("resolve")),j=a("exposify"),k=a("util").format,l=a("path"),m=a("through"),n=a("./lib/resolve-shims"),o=a("rename-function-calls"),p=a("./lib/debug"),q="__browserify_shim_require__";b.exports=function(a){function b(a){d+=a}function c(){var b=[];n(a,b,function(c,f){if(c)return e.emit("error",c),e.queue(null);p(""),p.inspect({file:a,info:f,messages:b});var g=f.exposeGlobals;if(g&&Object.keys(g)&&(d=j.expose(g,d)),f.shim){d=o("require",q,d);var i=h(d,f.shim,f.packageDir,f.browser);e.queue(i)}else e.queue(d);e.queue(null)})}var d="",e=m(b,c);return e}},{"./lib/debug":19,"./lib/resolve-shims":21,exposify:154,path:200,"rename-function-calls":268,resolve:22,through:309,util:403}],browserify:[function(a,b,c){(function(c,d){function e(a,b){var c=this;if(!(this instanceof e))return new e(a,b);if(b||(b={}),b="string"==typeof a||u(a)||f(a)?t(b,{entries:[].concat(b.entries||[],a)}):t(a,b),c._options=b,b.noparse&&(b.noParse=b.noparse),void 0!==b.basedir&&"string"!=typeof b.basedir)throw new Error("opts.basedir must be either undefined or a string.");c._external=[],c._exclude=[],c._ignore=[],c._expose={},c._hashes={},c._pending=0,c._transformOrder=0,c._transformPending=0,c._transforms=[],c._entryOrder=0,c._ticked=!1,c._bresolve=b.browserField===!1?function(a,b,c){b.basedir||(b.basedir=D.dirname(b.filename)),A(a,b,c)}:z,c._syntaxCache={};var d=[].concat(b.ignoreTransform).filter(Boolean);c._filterTransform=function(a){return Array.isArray(a)?d.indexOf(a[0])===-1:d.indexOf(a)===-1},c.pipeline=c._createPipeline(b),[].concat(b.transform).filter(Boolean).filter(c._filterTransform).forEach(function(a){c.transform(a)}),[].concat(b.entries).filter(Boolean).forEach(function(a){c.add(a,{basedir:b.basedir})}),[].concat(b.require).filter(Boolean).forEach(function(a){c.require(a,{basedir:b.basedir})}),[].concat(b.plugin).filter(Boolean).forEach(function(a){c.plugin(a,{basedir:b.basedir})})}function f(a){return a&&"function"==typeof a.pipe}function g(a){var b="win32"===c.platform?/^\w:/:/^\//;return b.test(a)}function h(a){var b="win32"===c.platform?/^(\.|\w:)/:/^[\/.]/;return!b.test(a)}var i=a("module-deps"),j=a("deps-sort"),k=a("browser-pack"),l=a("insert-module-globals"),m=a("syntax-error"),n=a("./lib/builtins.js"),o=a("labeled-stream-splicer"),p=a("through2"),q=a("concat-stream"),r=a("inherits"),s=a("events").EventEmitter,t=a("xtend"),u=a("isarray"),v=a("defined"),w=a("has"),x=a("htmlescape").sanitize,y=a("shasum"),z=a("browser-resolve"),A=a("resolve"),B=a("read-only-stream");b.exports=e,r(e,s);var C=a("fs"),D=a("path"),E={empty:D.join(d,"lib/_empty.js")};e.prototype.require=function(a,b){var d=this;if(u(a))return a.forEach(function(a){"object"==typeof a?d.require(a.file,t(b,a)):d.require(a,b)}),this;b||(b={});var e=v(b.basedir,d._options.basedir,c.cwd()),g=b.expose;if(a===g&&/^[\.]/.test(g)&&(g="/"+D.relative(e,g),g=g.replace(/\\/g,"/")),void 0===g&&this._options.exposeAll&&(g=!0),g===!0&&(g="/"+D.relative(e,a),g=g.replace(/\\/g,"/")),f(a)){d._pending++;var i=d._entryOrder++;return a.pipe(q(function(c){var f=b.file||a.file||D.join(e,"_stream_"+i+".js"),h=a.id||g||f;(g||b.entry===!1)&&(d._expose[h]=f),b.entry||void 0!==d._options.exports||(d._bpack.hasExports=!0);var j={source:c.toString("utf8"),entry:v(b.entry,!1),file:f,id:h};j.entry&&(j.order=i),j.transform===!1&&(j.transform=!1),d.pipeline.write(j),0===--d._pending&&d.emit("_ready")})),this}var j;return j="object"==typeof a?t(a,b):!b.entry&&h(a)?t(b,{id:g||a,file:a}):t(b,{file:D.resolve(e,a)}),j.id||(j.id=g||j.file),!g&&j.entry||(j.expose=j.id),b.external?d.external(a,b):(void 0===j.entry&&(j.entry=!1),j.entry||void 0!==d._options.exports||(d._bpack.hasExports=!0),j.entry&&(j.order=d._entryOrder++),b.transform===!1&&(j.transform=!1),d.pipeline.write(j),d)},e.prototype.add=function(a,b){var c=this;return b||(b={}),u(a)?(a.forEach(function(a){c.add(a,b)}),this):this.require(a,t({entry:!0,expose:!1},b))},e.prototype.external=function(a,b){var d=this;if(u(a))return a.forEach(function(a){"object"==typeof a?d.external(a,t(b,a)):d.external(a,b)}),this;if(a&&"object"==typeof a&&"function"==typeof a.bundle){var e=a;d._pending++;var f={},g={};return e.on("label",function(a,b){d._external.push(b),a!==b&&(g[a]=b,d._external.push(a))}),e.pipeline.get("deps").push(p.obj(function(a,b,c){f=t(f,a.deps),this.push(a),c()})),d.on("dep",function(a){Object.keys(a.deps).forEach(function(b){var c=f[b];if(c){var d=g[c];d&&(a.indexDeps[b]=d)}})}),e.pipeline.get("label").once("end",function(){0===--d._pending&&d.emit("_ready")}),this}b||(b={});var h=v(b.basedir,c.cwd());return this._external.push(a),this._external.push("/"+D.relative(h,a)),this},e.prototype.exclude=function(a,b){b||(b={});var d=v(b.basedir,c.cwd());return this._exclude.push(a),this._exclude.push("/"+D.relative(d,a)),this},e.prototype.ignore=function(a,b){b||(b={});var d=v(b.basedir,c.cwd());return"."===a[0]?this._ignore.push(D.resolve(d,a)):this._ignore.push(a),this},e.prototype.transform=function(a,b){function d(){e._transforms[g]=h,--e._pending,0===--e._transformPending&&(e._transforms.forEach(function(a){e.pipeline.write(a)}),0===e._pending&&e.emit("_ready"))}var e=this;if("function"!=typeof b&&"string"!=typeof b||(a=[b,a]),u(a)&&(b=a[1],a=a[0]),"string"==typeof a&&!e._filterTransform(a))return this;b||(b={}),b._flags="_flags"in b?b._flags:e._options;var f=v(b.basedir,this._options.basedir,c.cwd()),g=e._transformOrder++;e._pending++,e._transformPending++;var h={transform:a,options:b,global:b.global};if("string"==typeof a){var i={basedir:f,paths:(e._options.paths||[]).map(function(a){return D.resolve(f,a)})};A(a,i,function(a,b){return a?e.emit("error",a):(h.transform=b,void d())})}else c.nextTick(d);return this},e.prototype.plugin=function(b,d){u(b)&&(d=b[1],b=b[0]),d||(d={});var e=v(d.basedir,this._options.basedir,c.cwd());if("function"==typeof b)b(this,d);else{var f=A.sync(String(b),{basedir:e}),g=a(f);if("function"!=typeof g)throw new Error("plugin "+b+" should export a function");g(this,d)}return this},e.prototype._createPipeline=function(a){var b=this;a||(a={}),this._mdeps=this._createDeps(a),this._mdeps.on("file",function(a,c){e.emit("file",a,c),b.emit("file",a,c)}),this._mdeps.on("package",function(a){e.emit("package",a),b.emit("package",a)}),this._mdeps.on("transform",function(a,c){e.emit("transform",a,c),b.emit("transform",a,c)});var d={index:!a.fullPaths&&!a.exposeAll,dedupe:!0,expose:this._expose};this._bpack=k(t(a,{raw:!0}));var e=o.obj(["record",[this._recorder()],"deps",[this._mdeps],"json",[this._json()],"unbom",[this._unbom()],"unshebang",[this._unshebang()],"syntax",[this._syntax()],"sort",[j(d)],"dedupe",[this._dedupe()],"label",[this._label(a)],"emit-deps",[this._emitDeps()],"debug",[this._debug(a)],"pack",[this._bpack],"wrap",[]]);if(a.exposeAll){var f=v(a.basedir,c.cwd());e.get("deps").push(p.obj(function(a,c,d){return b._external.indexOf(a.id)>=0?d():b._external.indexOf(a.file)>=0?d():(g(a.id)&&(a.id="/"+D.relative(f,a.file)),Object.keys(a.deps||{}).forEach(function(b){a.deps[b]="/"+D.relative(f,a.deps[b])}),this.push(a),void d())}))}return e},e.prototype._createDeps=function(a){function b(b){if(a.detectGlobals===!1)return p();if(a.noParse===!0)return p();if(g.indexOf(b)>=0)return p();if(j.indexOf(b)>=0)return p();for(var d=b.split("/node_modules/"),e=0;e<g.length;e++){if("function"==typeof g[e]&&g[e](b))return p();if(g[e]===d[d.length-1].split("/")[0])return p();if(g[e]===d[d.length-1])return p()}var f=t({process:function(){return"require('_process')"}},a.insertGlobalVars);return a.bundleExternal===!1&&(f.process=void 0,f.buffer=void 0),l(b,t(a,{debug:a.debug,always:a.insertGlobals,basedir:a.commondir===!1?"/":a.basedir||c.cwd(),vars:f}))}var d=this,e=t(a),f=v(a.basedir,c.cwd());e.expose=this._expose,e.extensions=[".js",".json"].concat(e.extensions||[]),d._extensions=e.extensions,e.transform=[],e.transformKey=["browserify","transform"],e.postFilter=function(b,c,e){return!(a.postFilter&&!a.postFilter(b,c,e))&&(!(d._external.indexOf(c)>=0)&&(!(d._exclude.indexOf(c)>=0)&&(e&&e.browserify&&e.browserify.transform&&(e.browserify.transform=[].concat(e.browserify.transform).filter(Boolean).filter(d._filterTransform)),!0)))},e.filter=function(b){return!(a.filter&&!a.filter(b))&&(!(d._external.indexOf(b)>=0)&&(!(d._exclude.indexOf(b)>=0)&&(a.bundleExternal!==!1||!h(b))))},e.resolve=function(a,b,c){return d._ignore.indexOf(a)>=0?c(null,E.empty,{}):void d._bresolve(a,b,function(a,b,e){if(b&&d._ignore.indexOf(b)>=0)return c(null,E.empty,{});if(b&&d._ignore.length){var g=b.split("/node_modules/")[1];if(g&&(g=g.split("/")[0],d._ignore.indexOf(g)>=0))return c(null,E.empty,{})}if(b){var h="/"+D.relative(f,b);if(d._external.indexOf(h)>=0)return c(null,h);if(d._exclude.indexOf(h)>=0)return c(null,h);if(d._ignore.indexOf(h)>=0)return c(null,E.empty,{})}a?c(a,b,e):b?C.realpath(b,function(a,d){c(a,d,e,b)}):c(a,null,e)})},a.builtins===!1?(e.modules={},d._exclude.push.apply(d._exclude,Object.keys(n))):a.builtins&&u(a.builtins)?(e.modules={},a.builtins.forEach(function(a){e.modules[a]=n[a]})):a.builtins&&"object"==typeof a.builtins?e.modules=a.builtins:e.modules=t(n),Object.keys(n).forEach(function(a){w(e.modules,a)||d._exclude.push(a)}),e.globalTransform=[],this._bundled||this.once("bundle",function(){d.pipeline.write({transform:b,global:!0,options:{}})});var g=[].concat(a.noParse).filter(Boolean),j=g.filter(function(a){return"string"==typeof a}).map(function(a){return D.resolve(f,a)});return i(e)},e.prototype._recorder=function(a){function b(a,b,c){e._recorded.push(a),e._ticked&&this.push(a),c()}function d(){f=!0,e._ticked&&this.push(null)}var e=this,f=!1;this._recorded=[],this._ticked||c.nextTick(function(){e._ticked=!0,e._recorded.forEach(function(a){g.push(a)}),f&&g.push(null)});var g=p.obj(b,d);return g},e.prototype._json=function(){return p.obj(function(a,b,c){/\.json$/.test(a.file)&&(a.source="module.exports="+x(a.source)),this.push(a),c()})},e.prototype._unbom=function(){return p.obj(function(a,b,c){/^\ufeff/.test(a.source)&&(a.source=a.source.replace(/^\ufeff/,"")),this.push(a),c()})},e.prototype._unshebang=function(){return p.obj(function(a,b,c){/^#!/.test(a.source)&&(a.source=a.source.replace(/^#![^\n]*\n/,"")),this.push(a),c()})},e.prototype._syntax=function(){var a=this;return p.obj(function(b,c,d){var e=y(b.source);if("undefined"==typeof a._syntaxCache[e]){var f=m(b.source,b.file||b.id);if(f)return this.emit("error",f);a._syntaxCache[e]=!0}this.push(b),d()})},e.prototype._dedupe=function(){return p.obj(function(a,b,c){!a.dedupeIndex&&a.dedupe?(a.source="arguments[4]["+JSON.stringify(a.dedupe)+"][0].apply(exports,arguments)",a.nomap=!0):a.dedupeIndex&&(a.source="arguments[4]["+JSON.stringify(a.dedupeIndex)+"][0].apply(exports,arguments)",a.nomap=!0),a.dedupeIndex&&a.indexDeps&&(a.indexDeps.dup=a.dedupeIndex),this.push(a),c()})},e.prototype._label=function(a){var b=this,d=v(a.basedir,c.cwd());return p.obj(function(a,c,e){var f=a.id;return b._external.indexOf(a.id)>=0?e():b._external.indexOf("/"+D.relative(d,a.id))>=0?e():b._external.indexOf(a.file)>=0?e():(a.index&&(a.id=a.index),b.emit("label",f,a.id),a.indexDeps&&(a.deps=a.indexDeps||{}),Object.keys(a.deps).forEach(function(c){if(b._expose[c])return void(a.deps[c]=c);var e=D.resolve(D.dirname(a.file),c),f="/"+D.relative(d,e);if(b._external.indexOf(f)>=0&&(a.deps[c]=f),b._external.indexOf(e)>=0&&(a.deps[c]=f),b._external.indexOf(c)>=0)return void(a.deps[c]=c);for(var g=0;g<b._extensions.length;g++){var h=b._extensions[g];if(b._external.indexOf(f+h)>=0){a.deps[c]=f+h;break}}}),(a.entry||a.expose)&&(b._bpack.standaloneModule=a.id),this.push(a),void e())})},e.prototype._emitDeps=function(){var a=this;return p.obj(function(b,c,d){a.emit("dep",b),this.push(b),d()})},e.prototype._debug=function(a){var b=v(a.basedir,c.cwd());return p.obj(function(c,d,e){a.debug&&(c.sourceRoot="file://localhost",c.sourceFile=D.relative(b,c.file).replace(/\\/g,"/")),this.push(c),e()})},e.prototype.reset=function(a){a||(a={});var b=this._bpack.hasExports;this.pipeline=this._createPipeline(t(a,this._options)),this._bpack.hasExports=b,this._entryOrder=0,this._bundled=!1,this.emit("reset")},e.prototype.bundle=function(a){function b(){c.emit("bundle",e),c.pipeline.end()}var c=this;if(a&&"object"==typeof a)throw new Error("bundle() no longer accepts option arguments.\nMove all option arguments to the browserify() constructor.");if(this._bundled){var d=this._recorded;this.reset(),d.forEach(function(a){c.pipeline.write(a)})}var e=B(this.pipeline);return a&&(e.on("error",a),e.pipe(q(function(b){a(null,b)}))),0===this._pending?b():this.once("_ready",b),this._bundled=!0,e}}).call(this,a("_process"),"/node_modules/browserify")},{"./lib/builtins.js":30,_process:256,"browser-pack":9,"browser-resolve":11,"concat-stream":31,defined:128,"deps-sort":131,events:152,fs:29,has:170,htmlescape:171,inherits:173,"insert-module-globals":175,isarray:32,"labeled-stream-splicer":185,"module-deps":191,path:200,"read-only-stream":257,resolve:273,shasum:290,"syntax-error":307,through2:320,xtend:404}],"camshaft-reference":[function(a,b,c){"use strict";var d=a("./version"),e=a("./analysis-graph");b.exports.getVersion=d.getVersion,b.exports.versions=d.versions,b.exports.AnalysisGraph=e},{"./analysis-graph":36,"./version":37}],cartocolor:[function(a,b,c){b.exports=a("./cartocolor")},{"./cartocolor":108}],"cartodb-pecan":[function(a,b,c){
b.exports={hasEnoughToGuess:a("./has-enough-to-guess"),guessMap:a("./guess-map"),getWeightFromShape:a("./get-weight-from-shape"),getMethodProperties:a("./get-method-properties")}},{"./get-method-properties":114,"./get-weight-from-shape":115,"./guess-map":116,"./has-enough-to-guess":117}],carto:[function(a,b,c){(function(b,d){function e(){if(b.browser)return a("../../package.json").version.split(".");if(parseInt(b.version.split(".")[1],10)>4)return a("../../package.json").version.split(".");var c=JSON.parse(h.readFileSync(i.join(d,"../../package.json")));return c.version.split(".")}function f(a,b){var c={bold:[1,22],inverse:[7,27],underline:[4,24],yellow:[33,39],green:[32,39],red:[31,39],grey:[90,39]};return"["+c[b][0]+"m"+a+"["+c[b][1]+"m"}var g=a("util"),h=a("fs"),i=a("path"),j={version:e(),Parser:a("./parser").Parser,Renderer:a("./renderer").Renderer,tree:a("./tree"),RendererJS:a("./renderer_js"),default_reference:a("./torque-reference"),writeError:function(a,b){var c="",d=a.extract,e=[];if(b=b||{},!b.silent){if(b.indent=b.indent||"",!("index"in a&&d))return g.error(b.indent+(a.stack||a.message));"string"==typeof d[0]&&e.push(f(a.line-1+" "+d[0],"grey")),""===d[1]&&"undefined"==typeof d[2]&&(d[1]="¶"),e.push(a.line+" "+d[1].slice(0,a.column)+f(f(d[1][a.column],"bold")+d[1].slice(a.column+1),"yellow")),"string"==typeof d[2]&&e.push(f(a.line+1+" "+d[2],"grey")),e=b.indent+e.join("\n"+b.indent)+"[0m\n",c=b.indent+c+f(a.message,"red"),a.filename&&(c+=f(" in ","red")+a.filename),g.error(c,e),a.callLine&&(g.error(f("from ","red")+(a.filename||"")),g.error(f(a.callLine,"grey")+" "+a.callExtract)),a.stack&&g.error(f(a.stack,"red"))}}};a("./tree/call"),a("./tree/color"),a("./tree/comment"),a("./tree/definition"),a("./tree/dimension"),a("./tree/element"),a("./tree/expression"),a("./tree/filterset"),a("./tree/filter"),a("./tree/field"),a("./tree/keyword"),a("./tree/layer"),a("./tree/literal"),a("./tree/operation"),a("./tree/quoted"),a("./tree/imagefilter"),a("./tree/reference"),a("./tree/rule"),a("./tree/ruleset"),a("./tree/selector"),a("./tree/style"),a("./tree/url"),a("./tree/value"),a("./tree/variable"),a("./tree/zoom"),a("./tree/invalid"),a("./tree/fontset"),a("./tree/frame_offset"),a("./functions");for(var k in j)c[k]=j[k]}).call(this,a("_process"),"/node_modules/carto/lib/carto")},{"../../package.json":107,"./functions":73,"./parser":74,"./renderer":75,"./renderer_js":76,"./torque-reference":77,"./tree":78,"./tree/call":79,"./tree/color":80,"./tree/comment":81,"./tree/definition":82,"./tree/dimension":83,"./tree/element":84,"./tree/expression":85,"./tree/field":86,"./tree/filter":87,"./tree/filterset":88,"./tree/fontset":89,"./tree/frame_offset":90,"./tree/imagefilter":91,"./tree/invalid":92,"./tree/keyword":93,"./tree/layer":94,"./tree/literal":95,"./tree/operation":96,"./tree/quoted":97,"./tree/reference":98,"./tree/rule":99,"./tree/ruleset":100,"./tree/selector":101,"./tree/style":102,"./tree/url":103,"./tree/value":104,"./tree/variable":105,"./tree/zoom":106,_process:256,fs:29,path:200,util:403}],clipboard:[function(a,b,c){!function(d,e){if("function"==typeof define&&define.amd)define(["module","./clipboard-action","tiny-emitter","good-listener"],e);else if("undefined"!=typeof c)e(b,a("./clipboard-action"),a("tiny-emitter"),a("good-listener"));else{var f={exports:{}};e(f,d.clipboardAction,d.tinyEmitter,d.goodListener),d.clipboard=f.exports}}(this,function(a,b,c,d){"use strict";function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){var c="data-clipboard-"+a;if(b.hasAttribute(c))return b.getAttribute(c)}var j=e(b),k=e(c),l=e(d),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(a,c){f(this,b);var d=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.resolveOptions(c),d.listenClick(a),d}return h(b,a),m(b,[{key:"resolveOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof a.action?a.action:this.defaultAction,this.target="function"==typeof a.target?a.target:this.defaultTarget,this.text="function"==typeof a.text?a.text:this.defaultText}},{key:"listenClick",value:function(a){var b=this;this.listener=(0,l.default)(a,"click",function(a){return b.onClick(a)})}},{key:"onClick",value:function(a){var b=a.delegateTarget||a.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new j.default({action:this.action(b),target:this.target(b),text:this.text(b),trigger:b,emitter:this})}},{key:"defaultAction",value:function(a){return i("action",a)}},{key:"defaultTarget",value:function(a){var b=i("target",a);if(b)return document.querySelector(b)}},{key:"defaultText",value:function(a){return i("text",a)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],b="string"==typeof a?[a]:a,c=!!document.queryCommandSupported;return b.forEach(function(a){c=c&&!!document.queryCommandSupported(a)}),c}}]),b}(k.default);a.exports=n})},{"./clipboard-action":118,"good-listener":169,"tiny-emitter":321}],codemirror:[function(a,b,c){!function(a){if("object"==typeof c&&"object"==typeof b)b.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);(this||window).CodeMirror=a()}}(function(){"use strict";function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d?Ke(d):{},Ke(_f,d,!1),n(d);var e=d.value;"string"==typeof e&&(e=new xg(e,d.mode,null,d.lineSeparator)),this.doc=e;var f=new a.inputStyles[d.inputStyle](this),g=this.display=new b(c,e,f);g.wrapper.CodeMirror=this,j(this),h(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),d.autofocus&&!Cf&&g.input.focus(),r(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new De,keySeq:null,specialChars:null};var i=this;sf&&tf<11&&setTimeout(function(){i.display.input.reset(!0)},20),Qb(this),We(),ub(this),this.curOp.forceUpdate=!0,Xd(this,e),d.autofocus&&!Cf||i.hasFocus()?setTimeout(Le(qc,this),20):rc(this);for(var k in ag)ag.hasOwnProperty(k)&&ag[k](this,d[k],bg);w(this),d.finishInit&&d.finishInit(this);for(var l=0;l<fg.length;++l)fg[l](this);wb(this),uf&&d.lineWrapping&&"optimizelegibility"==getComputedStyle(g.lineDiv).textRendering&&(g.lineDiv.style.textRendering="auto")}function b(a,b,c){var d=this;this.input=c,d.scrollbarFiller=Pe("div",null,"CodeMirror-scrollbar-filler"),d.scrollbarFiller.setAttribute("cm-not-content","true"),d.gutterFiller=Pe("div",null,"CodeMirror-gutter-filler"),d.gutterFiller.setAttribute("cm-not-content","true"),d.lineDiv=Pe("div",null,"CodeMirror-code"),d.selectionDiv=Pe("div",null,null,"position: relative; z-index: 1"),d.cursorDiv=Pe("div",null,"CodeMirror-cursors"),d.measure=Pe("div",null,"CodeMirror-measure"),d.lineMeasure=Pe("div",null,"CodeMirror-measure"),d.lineSpace=Pe("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none"),d.mover=Pe("div",[Pe("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative"),d.sizer=Pe("div",[d.mover],"CodeMirror-sizer"),d.sizerWidth=null,d.heightForcer=Pe("div",null,null,"position: absolute; height: "+Ig+"px; width: 1px;"),d.gutters=Pe("div",null,"CodeMirror-gutters"),d.lineGutter=null,d.scroller=Pe("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll"),d.scroller.setAttribute("tabIndex","-1"),d.wrapper=Pe("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror"),sf&&tf<8&&(d.gutters.style.zIndex=-1,d.scroller.style.paddingRight=0),uf||pf&&Cf||(d.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(d.wrapper):a(d.wrapper)),d.viewFrom=d.viewTo=b.first,d.reportedViewFrom=d.reportedViewTo=b.first,d.view=[],d.renderedView=null,d.externalMeasured=null,d.viewOffset=0,d.lastWrapHeight=d.lastWrapWidth=0,d.updateLineNumbers=null,d.nativeBarWidth=d.barHeight=d.barWidth=0,d.scrollbarsClipped=!1,d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null,d.alignWidgets=!1,d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.maxLine=null,d.maxLineLength=0,d.maxLineChanged=!1,d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null,d.shift=!1,d.selForContextMenu=null,d.activeTouch=null,c.init(d)}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),d(b)}function d(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.frontier=a.doc.first,Na(a,100),a.state.modeGen++,a.curOp&&Jb(a)}function e(a){a.options.lineWrapping?(Zg(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(Yg(a.display.wrapper,"CodeMirror-wrap"),m(a)),g(a),Jb(a),hb(a),setTimeout(function(){s(a)},100)}function f(a){var b=sb(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/tb(a.display)-3);return function(e){if(vd(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function g(a){var b=a.doc,c=f(a);b.iter(function(a){var b=c(a);b!=a.height&&_d(a,b)})}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hb(a)}function i(a){j(a),Jb(a),setTimeout(function(){v(a)},20)}function j(a){var b=a.display.gutters,c=a.options.gutters;Qe(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(Pe("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none",k(a)}function k(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px"}function l(a){if(0==a.height)return 0;for(var b,c=a.text.length,d=a;b=od(d);){var e=b.find(0,!0);d=e.from.line,c+=e.from.ch-e.to.ch}for(d=a;b=pd(d);){var e=b.find(0,!0);c-=d.text.length-e.from.ch,d=e.to.line,c+=d.text.length-e.to.ch}return c}function m(a){var b=a.display,c=a.doc;b.maxLine=Yd(c,c.first),b.maxLineLength=l(b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var c=l(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function n(a){var b=Ge(a.gutters,"CodeMirror-linenumbers");b==-1&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):b>-1&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function o(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+Sa(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+Ua(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function p(a,b,c){this.cm=c;var d=this.vert=Pe("div",[Pe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=Pe("div",[Pe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(d),a(e),Dg(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")}),Dg(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,sf&&tf<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function q(){}function r(b){b.display.scrollbars&&(b.display.scrollbars.clear(),b.display.scrollbars.addClass&&Yg(b.display.wrapper,b.display.scrollbars.addClass)),b.display.scrollbars=new a.scrollbarModel[b.options.scrollbarStyle](function(a){b.display.wrapper.insertBefore(a,b.display.scrollbarFiller),Dg(a,"mousedown",function(){b.state.focused&&setTimeout(function(){b.display.input.focus()},0)}),a.setAttribute("cm-not-content","true")},function(a,c){"horizontal"==c?ec(b,a):dc(b,a)},b),b.display.scrollbars.addClass&&Zg(b.display.wrapper,b.display.scrollbars.addClass)}function s(a,b){b||(b=o(a));var c=a.display.barWidth,d=a.display.barHeight;t(a,b);for(var e=0;e<4&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&F(a),t(a,o(a)),c=a.display.barWidth,d=a.display.barHeight}function t(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px",c.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="",d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function u(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-Ra(a));var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,f=be(b,d),g=be(b,e);if(c&&c.ensure){var h=c.ensure.from.line,i=c.ensure.to.line;h<f?(f=h,g=be(b,ce(Yd(b,h))+a.wrapper.clientHeight)):Math.min(i,b.lastLine())>=g&&(f=be(b,ce(Yd(b,i))-a.wrapper.clientHeight),g=i)}return{from:f,to:Math.max(g,f+1)}}function v(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=y(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=f);var h=c[g].alignable;if(h)for(var i=0;i<h.length;i++)h[i].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function w(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=x(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(Pe("div",[Pe("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g)+1,d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",k(a),!0}return!1}function x(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function y(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function z(a,b,c){var d=a.display;this.viewport=b,this.visible=u(d,a.doc,b),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=Va(a),this.force=c,this.dims=H(a),this.events=[]}function A(a){var b=a.display;!b.scrollbarsClipped&&b.scroller.offsetWidth&&(b.nativeBarWidth=b.scroller.offsetWidth-b.scroller.clientWidth,b.heightForcer.style.height=Ua(a)+"px",b.sizer.style.marginBottom=-b.nativeBarWidth+"px",b.sizer.style.borderRightWidth=Ua(a)+"px",b.scrollbarsClipped=!0)}function B(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Lb(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Pb(a))return!1;w(a)&&(Lb(a),b.dims=H(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&f-c.viewFrom<20&&(f=Math.max(d.first,c.viewFrom)),c.viewTo>g&&c.viewTo-g<20&&(g=Math.min(e,c.viewTo)),Kf&&(f=td(a.doc,f),g=ud(a.doc,g));var h=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;Ob(a,f,g),c.viewOffset=ce(Yd(a.doc,c.viewFrom)),a.display.mover.style.top=c.viewOffset+"px";var i=Pb(a);if(!h&&0==i&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;var j=Se();return i>4&&(c.lineDiv.style.display="none"),I(a,c.updateLineNumbers,b.dims),i>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,j&&Se()!=j&&j.offsetHeight&&j.focus(),Qe(c.cursorDiv),Qe(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,h&&(c.lastWrapHeight=b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,Na(a,400)),c.updateLineNumbers=null,!0}function C(a,b){for(var c=b.viewport,d=!0;(d&&a.options.lineWrapping&&b.oldDisplayWidth!=Va(a)||(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Sa(a.display)-Wa(a),c.top)}),b.visible=u(a.display,a.doc,c),!(b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)))&&B(a,b);d=!1){F(a);var e=o(a);Ia(a),s(a,e),E(a,e)}b.signal(a,"update",a),a.display.viewFrom==a.display.reportedViewFrom&&a.display.viewTo==a.display.reportedViewTo||(b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function D(a,b){var c=new z(a,b);if(B(a,c)){F(a),C(a,c);var d=o(a);Ia(a),s(a,d),E(a,d),c.finish()}}function E(a,b){a.display.sizer.style.minHeight=b.docHeight+"px",a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=b.docHeight+a.display.barHeight+Ua(a)+"px"}function F(a){for(var b=a.display,c=b.lineDiv.offsetTop,d=0;d<b.view.length;d++){var e,f=b.view[d];if(!f.hidden){if(sf&&tf<8){var g=f.node.offsetTop+f.node.offsetHeight;e=g-c,c=g}else{var h=f.node.getBoundingClientRect();e=h.bottom-h.top}var i=f.line.height-e;if(e<2&&(e=sb(b)),(i>.001||i<-.001)&&(_d(f.line,e),G(f.line),f.rest))for(var j=0;j<f.rest.length;j++)G(f.rest[j])}}}function G(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.parentNode.offsetHeight}function H(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:y(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function I(a,b,c){function d(b){var c=b.nextSibling;return uf&&Df&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,i=e.view,j=e.viewFrom,k=0;k<i.length;k++){var l=i[k];if(l.hidden);else if(l.node&&l.node.parentNode==g){for(;h!=l.node;)h=d(h);var m=f&&null!=b&&b<=j&&l.lineNumber;l.changes&&(Ge(l.changes,"gutter")>-1&&(m=!1),J(a,l,j,c)),m&&(Qe(l.lineNumber),l.lineNumber.appendChild(document.createTextNode(x(a.options,j)))),h=l.node.nextSibling}else{var n=R(a,l,j,c);g.insertBefore(n,h)}j+=l.size}for(;h;)h=d(h)}function J(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];"text"==f?N(a,b):"gutter"==f?P(a,b,c,d):"class"==f?O(b):"widget"==f&&Q(a,b,d)}b.changes=null}function K(a){return a.node==a.text&&(a.node=Pe("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),sf&&tf<8&&(a.node.style.zIndex=2)),a.node}function L(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=K(a);a.background=c.insertBefore(Pe("div",null,b),c.firstChild)}}function M(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):Ld(a,b)}function N(a,b){var c=b.text.className,d=M(a,b);b.text==b.node&&(b.node=d.pre),b.text.parentNode.replaceChild(d.pre,b.text),b.text=d.pre,d.bgClass!=b.bgClass||d.textClass!=b.textClass?(b.bgClass=d.bgClass,b.textClass=d.textClass,O(b)):c&&(b.text.className=c)}function O(a){L(a),a.line.wrapClass?K(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");var b=a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass;a.text.className=b||""}function P(a,b,c,d){if(b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null),b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null),b.line.gutterClass){var e=K(b);b.gutterBackground=Pe("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px"),e.insertBefore(b.gutterBackground,b.text)}var f=b.line.gutterMarkers;if(a.options.lineNumbers||f){var e=K(b),g=b.gutter=Pe("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");if(a.display.input.setUneditable(g),e.insertBefore(g,b.text),b.line.gutterClass&&(g.className+=" "+b.line.gutterClass),!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(Pe("div",x(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),f)for(var h=0;h<a.options.gutters.length;++h){var i=a.options.gutters[h],j=f.hasOwnProperty(i)&&f[i];j&&g.appendChild(Pe("div",[j],"CodeMirror-gutter-elt","left: "+d.gutterLeft[i]+"px; width: "+d.gutterWidth[i]+"px"))}}}function Q(a,b,c){b.alignable&&(b.alignable=null);for(var d,e=b.node.firstChild;e;e=d){var d=e.nextSibling;"CodeMirror-linewidget"==e.className&&b.node.removeChild(e)}S(a,b,c)}function R(a,b,c,d){var e=M(a,b);return b.text=b.node=e.pre,e.bgClass&&(b.bgClass=e.bgClass),e.textClass&&(b.textClass=e.textClass),O(b),P(a,b,c,d),S(a,b,d),b.node}function S(a,b,c){if(T(a,b.line,b,c,!0),b.rest)for(var d=0;d<b.rest.length;d++)T(a,b.rest[d],b,c,!1)}function T(a,b,c,d,e){if(b.widgets)for(var f=K(c),g=0,h=b.widgets;g<h.length;++g){var i=h[g],j=Pe("div",[i.node],"CodeMirror-linewidget");i.handleMouseEvents||j.setAttribute("cm-ignore-events","true"),U(i,j,c,d),a.display.input.setUneditable(j),e&&i.above?f.insertBefore(j,c.gutter||c.text):f.appendChild(j),xe(i,"redraw")}}function U(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function V(a){return Lf(a.line,a.ch)}function W(a,b){return Mf(a,b)<0?b:a}function X(a,b){return Mf(a,b)<0?a:b}function Y(a){a.state.focused||(a.display.input.focus(),qc(a))}function Z(a,b,c,d,e){var f=a.doc;a.display.shift=!1,d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=f.splitLines(b),i=null;if(g&&d.ranges.length>1)if(Nf&&Nf.join("\n")==b){if(d.ranges.length%Nf.length==0){i=[];for(var j=0;j<Nf.length;j++)i.push(f.splitLines(Nf[j]))}}else h.length==d.ranges.length&&(i=He(h,function(a){return[a]}));for(var j=d.ranges.length-1;j>=0;j--){var k=d.ranges[j],l=k.from(),m=k.to();k.empty()&&(c&&c>0?l=Lf(l.line,l.ch-c):a.state.overwrite&&!g&&(m=Lf(m.line,Math.min(Yd(f,m.line).text.length,m.ch+Fe(h).length))));var n=a.curOp.updateInput,o={from:l,to:m,text:i?i[j%i.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};zc(a.doc,o),xe(a,"inputRead",a,o)}b&&!g&&_(a,b),Lc(a),a.curOp.updateInput=n,a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=!1}function $(a,b){var c=a.clipboardData&&a.clipboardData.getData("text/plain");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||Db(b,function(){Z(b,c,0,null,"paste")}),!0}function _(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;d>=0;d--){var e=c.ranges[d];if(!(e.head.ch>100||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars){for(var h=0;h<f.electricChars.length;h++)if(b.indexOf(f.electricChars.charAt(h))>-1){g=Nc(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(Yd(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=Nc(a,e.head.line,"smart"));g&&xe(a,"electricInput",a,e.head.line)}}}function aa(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,f={anchor:Lf(e,0),head:Lf(e+1,0)};c.push(f),b.push(a.getRange(f.anchor,f.head))}return{text:b,ranges:c}}function ba(a){a.setAttribute("autocorrect","off"),a.setAttribute("autocapitalize","off"),a.setAttribute("spellcheck","false")}function ca(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new De,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function da(){var a=Pe("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),b=Pe("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return uf?a.style.width="1000px":a.setAttribute("wrap","off"),Bf&&(a.style.border="1px solid black"),ba(a),b}function ea(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new De,this.gracePeriod=!1}function fa(a,b){var c=_a(a,b.line);if(!c||c.hidden)return null;var d=Yd(a.doc,b.line),e=Ya(c,d,b.line),f=de(d),g="left";if(f){var h=jf(f,b.ch);g=h%2?"right":"left"}var i=cb(e.map,b.ch,g);return i.offset="right"==i.collapse?i.end:i.start,i}function ga(a,b){return b&&(a.bad=!0),a}function ha(a,b,c){var d;if(b==a.display.lineDiv){if(d=a.display.lineDiv.childNodes[c],!d)return ga(a.clipPos(Lf(a.display.viewTo-1)),!0);b=null,c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return ia(f,b,c)}}function ia(a,b,c){function d(b,c,d){for(var e=-1;e<(k?k.length:0);e++)for(var f=e<0?j.map:k[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){var i=ae(e<0?a.line:a.rest[e]),l=f[g]+d;return(d<0||h!=b)&&(l=f[g+(d?1:0)]),Lf(i,l)}}}var e=a.text.firstChild,f=!1;if(!b||!Vg(e,b))return ga(Lf(ae(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b)){var g=a.rest?Fe(a.rest):a.line;return ga(Lf(ae(g),g.text.length),f)}var h=3==b.nodeType?b:null,i=b;for(h||1!=b.childNodes.length||3!=b.firstChild.nodeType||(h=b.firstChild,c&&(c=h.nodeValue.length));i.parentNode!=e;)i=i.parentNode;var j=a.measure,k=j.maps,l=d(h,i,c);if(l)return ga(l,f);for(var m=i.nextSibling,n=h?h.nodeValue.length-c:0;m;m=m.nextSibling){if(l=d(m,m.firstChild,0))return ga(Lf(l.line,l.ch-n),f);n+=m.textContent.length}for(var o=i.previousSibling,n=c;o;o=o.previousSibling){if(l=d(o,o.firstChild,-1))return ga(Lf(l.line,l.ch+n),f);n+=m.textContent.length}}function ja(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)return""==c&&(c=b.textContent.replace(/\u200b/g,"")),void(h+=c);var k,l=b.getAttribute("cm-marker");if(l){var m=a.findMarks(Lf(d,0),Lf(e+1,0),f(+l));return void(m.length&&(k=m[0].find())&&(h+=Zd(a.doc,k.from,k.to).join(j)))}if("false"==b.getAttribute("contenteditable"))return;for(var n=0;n<b.childNodes.length;n++)g(b.childNodes[n]);/^(pre|div|p)$/i.test(b.nodeName)&&(i=!0)}else if(3==b.nodeType){var o=b.nodeValue;if(!o)return;i&&(h+=j,i=!1),h+=o}}for(var h="",i=!1,j=a.doc.lineSeparator();g(b),b!=c;)b=b.nextSibling;return h}function ka(a,b){this.ranges=a,this.primIndex=b}function la(a,b){this.anchor=a,this.head=b}function ma(a,b){var c=a[b];a.sort(function(a,b){return Mf(a.from(),b.from())}),b=Ge(a,c);for(var d=1;d<a.length;d++){var e=a[d],f=a[d-1];if(Mf(f.to(),e.from())>=0){var g=X(f.from(),e.from()),h=W(f.to(),e.to()),i=f.empty()?e.from()==e.head:f.from()==f.head;d<=b&&--b,a.splice(--d,2,new la(i?h:g,i?g:h))}}return new ka(a,b)}function na(a,b){return new ka([new la(a,b||a)],0)}function oa(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function pa(a,b){if(b.line<a.first)return Lf(a.first,0);var c=a.first+a.size-1;return b.line>c?Lf(c,Yd(a,c).text.length):qa(b,Yd(a,b.line).text.length)}function qa(a,b){var c=a.ch;return null==c||c>b?Lf(a.line,b):c<0?Lf(a.line,0):a}function ra(a,b){return b>=a.first&&b<a.first+a.size}function sa(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=pa(a,b[d]);return c}function ta(a,b,c,d){if(a.cm&&a.cm.display.shift||a.extend){var e=b.anchor;if(d){var f=Mf(c,e)<0;f!=Mf(d,e)<0?(e=c,c=d):f!=Mf(c,d)<0&&(c=d)}return new la(e,c)}return new la(d||c,c)}function ua(a,b,c,d){Aa(a,new ka([ta(a,a.sel.primary(),b,c)],0),d)}function va(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=ta(a,a.sel.ranges[e],b[e],null);var f=ma(d,a.sel.primIndex);Aa(a,f,c)}function wa(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c,Aa(a,ma(e,a.sel.primIndex),d)}function xa(a,b,c,d){Aa(a,na(b,c),d)}function ya(a,b,c){var d={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new la(pa(a,b[c].anchor),pa(a,b[c].head))},origin:c&&c.origin};return Gg(a,"beforeSelectionChange",a,d),a.cm&&Gg(a.cm,"beforeSelectionChange",a.cm,d),d.ranges!=b.ranges?ma(d.ranges,d.ranges.length-1):b}function za(a,b,c){var d=a.history.done,e=Fe(d);e&&e.ranges?(d[d.length-1]=b,Ba(a,b,c)):Aa(a,b,c)}function Aa(a,b,c){Ba(a,b,c),ke(a,a.sel,a.cm?a.cm.curOp.id:NaN,c)}function Ba(a,b,c){(Be(a,"beforeSelectionChange")||a.cm&&Be(a.cm,"beforeSelectionChange"))&&(b=ya(a,b,c));var d=c&&c.bias||(Mf(b.primary().head,a.sel.primary().head)<0?-1:1);Ca(a,Ea(a,b,d,!0)),c&&c.scroll===!1||!a.cm||Lc(a.cm)}function Ca(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Ae(a.cm)),xe(a,"cursorActivity",a))}function Da(a){Ca(a,Ea(a,a.sel,null,!1),Kg)}function Ea(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],i=Ga(a,g.anchor,h&&h.anchor,c,d),j=Ga(a,g.head,h&&h.head,c,d);(e||i!=g.anchor||j!=g.head)&&(e||(e=b.ranges.slice(0,f)),e[f]=new la(i,j))}return e?ma(e,b.primIndex):b}function Fa(a,b,c,d,e){var f=Yd(a,b.line);if(f.markedSpans)for(var g=0;g<f.markedSpans.length;++g){var h=f.markedSpans[g],i=h.marker;if((null==h.from||(i.inclusiveLeft?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(i.inclusiveRight?h.to>=b.ch:h.to>b.ch))){if(e&&(Gg(i,"beforeCursorEnter"),i.explicitlyCleared)){if(f.markedSpans){--g;continue}break}if(!i.atomic)continue;if(c){var j,k=i.find(d<0?1:-1);if((d<0?i.inclusiveRight:i.inclusiveLeft)&&(k=Ha(a,k,-d,k&&k.line==b.line?f:null)),k&&k.line==b.line&&(j=Mf(k,c))&&(d<0?j<0:j>0))return Fa(a,k,b,d,e)}var l=i.find(d<0?-1:1);return(d<0?i.inclusiveLeft:i.inclusiveRight)&&(l=Ha(a,l,d,l.line==b.line?f:null)),l?Fa(a,l,b,d,e):null}}return b}function Ga(a,b,c,d,e){var f=d||1,g=Fa(a,b,c,f,e)||!e&&Fa(a,b,c,f,!0)||Fa(a,b,c,-f,e)||!e&&Fa(a,b,c,-f,!0);return g?g:(a.cantEdit=!0,Lf(a.first,0))}function Ha(a,b,c,d){return c<0&&0==b.ch?b.line>a.first?pa(a,Lf(b.line-1)):null:c>0&&b.ch==(d||Yd(a,b.line)).text.length?b.line<a.first+a.size-1?Lf(b.line+1,0):null:new Lf(b.line,b.ch+c)}function Ia(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Ja(a,b){for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(b!==!1||g!=c.sel.primIndex){var h=c.sel.ranges[g];if(!(h.from().line>=a.display.viewTo||h.to().line<a.display.viewFrom)){var i=h.empty();(i||a.options.showCursorWhenSelecting)&&Ka(a,h.head,e),i||La(a,h,f)}}return d}function Ka(a,b,c){var d=nb(a,b,"div",null,null,!a.options.singleCursorHeightPerLine),e=c.appendChild(Pe("div"," ","CodeMirror-cursor"));
if(e.style.left=d.left+"px",e.style.top=d.top+"px",e.style.height=Math.max(0,d.bottom-d.top)*a.options.cursorHeight+"px",d.other){var f=c.appendChild(Pe("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=d.other.left+"px",f.style.top=d.other.top+"px",f.style.height=.85*(d.other.bottom-d.other.top)+"px"}}function La(a,b,c){function d(a,b,c,d){b<0&&(b=0),b=Math.round(b),d=Math.round(d),h.appendChild(Pe("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?k-a:c)+"px; height: "+(d-b)+"px"))}function e(b,c,e){function f(c,d){return mb(a,Lf(b,c),"div",l,d)}var h,i,l=Yd(g,b),m=l.text.length;return _e(de(l),c||0,null==e?m:e,function(a,b,g){var l,n,o,p=f(a,"left");if(a==b)l=p,n=o=p.left;else{if(l=f(b-1,"right"),"rtl"==g){var q=p;p=l,l=q}n=p.left,o=l.right}null==c&&0==a&&(n=j),l.top-p.top>3&&(d(n,p.top,null,p.bottom),n=j,p.bottom<l.top&&d(n,p.bottom,null,l.top)),null==e&&b==m&&(o=k),(!h||p.top<h.top||p.top==h.top&&p.left<h.left)&&(h=p),(!i||l.bottom>i.bottom||l.bottom==i.bottom&&l.right>i.right)&&(i=l),n<j+1&&(n=j),d(n,l.top,o-n,l.bottom)}),{start:h,end:i}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),i=Ta(a.display),j=i.left,k=Math.max(f.sizerWidth,Va(a)-f.sizer.offsetLeft)-i.right,l=b.from(),m=b.to();if(l.line==m.line)e(l.line,l.ch,m.ch);else{var n=Yd(g,l.line),o=Yd(g,m.line),p=rd(n)==rd(o),q=e(l.line,l.ch,p?n.text.length+1:null).end,r=e(m.line,p?0:null,m.ch).start;p&&(q.top<r.top-2?(d(q.right,q.top,null,q.bottom),d(j,r.top,r.left,r.bottom)):d(q.right,q.top,r.left-q.right,q.bottom)),q.bottom<r.top&&d(j,q.bottom,null,r.top)}c.appendChild(h)}function Ma(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function Na(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,Le(Oa,a))}function Oa(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=hg(b.mode,Qa(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength,i=Hd(a,f,h?hg(b.mode,d):d,!0);f.styles=i.styles;var j=f.styleClasses,k=i.classes;k?f.styleClasses=k:j&&(f.styleClasses=null);for(var l=!g||g.length!=f.styles.length||j!=k&&(!j||!k||j.bgClass!=k.bgClass||j.textClass!=k.textClass),m=0;!l&&m<g.length;++m)l=g[m]!=f.styles[m];l&&e.push(b.frontier),f.stateAfter=h?d:hg(b.mode,d)}else f.text.length<=a.options.maxHighlightLength&&Jd(a,f.text,d),f.stateAfter=b.frontier%5==0?hg(b.mode,d):null;if(++b.frontier,+new Date>c)return Na(a,a.options.workDelay),!0}),e.length&&Db(a,function(){for(var b=0;b<e.length;b++)Kb(a,e[b],"text")})}}function Pa(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=Yd(f,h-1);if(i.stateAfter&&(!c||h<=f.frontier))return h;var j=Ng(i.text,null,a.options.tabSize);(null==e||d>j)&&(e=h-1,d=j)}return e}function Qa(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=Pa(a,b,c),g=f>d.first&&Yd(d,f-1).stateAfter;return g=g?hg(d.mode,g):ig(d.mode),d.iter(f,b,function(c){Jd(a,c.text,g);var h=f==b-1||f%5==0||f>=e.viewFrom&&f<e.viewTo;c.stateAfter=h?hg(d.mode,g):null,++f}),c&&(d.frontier=f),g}function Ra(a){return a.lineSpace.offsetTop}function Sa(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Ta(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=Re(a.measure,Pe("pre","x")),c=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,d={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return isNaN(d.left)||isNaN(d.right)||(a.cachedPaddingH=d),d}function Ua(a){return Ig-a.display.nativeBarWidth}function Va(a){return a.display.scroller.clientWidth-Ua(a)-a.display.barWidth}function Wa(a){return a.display.scroller.clientHeight-Ua(a)-a.display.barHeight}function Xa(a,b,c){var d=a.options.lineWrapping,e=d&&Va(a);if(!b.measure.heights||d&&b.measure.width!=e){var f=b.measure.heights=[];if(d){b.measure.width=e;for(var g=b.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var i=g[h],j=g[h+1];Math.abs(i.bottom-j.bottom)>2&&f.push((i.bottom+j.top)/2-c.top)}}f.push(c.bottom-c.top)}}function Ya(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var d=0;d<a.rest.length;d++)if(ae(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function Za(a,b){b=rd(b);var c=ae(b),d=a.display.externalMeasured=new Hb(a.doc,b,c);d.lineN=c;var e=d.built=Ld(a,d);return d.text=e.pre,Re(a.display.lineMeasure,e.pre),d}function $a(a,b,c,d){return bb(a,ab(a,b),c,d)}function _a(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Mb(a,b)];var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function ab(a,b){var c=ae(b),d=_a(a,c);d&&!d.text?d=null:d&&d.changes&&(J(a,d,c,H(a)),a.curOp.forceUpdate=!0),d||(d=Za(a,b));var e=Ya(d,b,c);return{line:b,view:d,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function bb(a,b,c,d,e){b.before&&(c=-1);var f,g=c+(d||"");return b.cache.hasOwnProperty(g)?f=b.cache[g]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(Xa(a,b.view,b.rect),b.hasHeights=!0),f=db(a,b,c,d),f.bogus||(b.cache[g]=f)),{left:f.left,right:f.right,top:e?f.rtop:f.top,bottom:e?f.rbottom:f.bottom}}function cb(a,b,c){for(var d,e,f,g,h=0;h<a.length;h+=3){var i=a[h],j=a[h+1];if(b<i?(e=0,f=1,g="left"):b<j?(e=b-i,f=e+1):(h==a.length-3||b==j&&a[h+3]>b)&&(f=j-i,e=f-1,b>=j&&(g="right")),null!=e){if(d=a[h+2],i==j&&c==(d.insertLeft?"left":"right")&&(g=c),"left"==c&&0==e)for(;h&&a[h-2]==a[h-3]&&a[h-1].insertLeft;)d=a[(h-=3)+2],g="left";if("right"==c&&e==j-i)for(;h<a.length-3&&a[h+3]==a[h+4]&&!a[h+5].insertLeft;)d=a[(h+=3)+2],g="right";break}}return{node:d,start:e,end:f,collapse:g,coverStart:i,coverEnd:j}}function db(a,b,c,d){var e,f=cb(b.map,c,d),g=f.node,h=f.start,i=f.end,j=f.collapse;if(3==g.nodeType){for(var k=0;k<4;k++){for(;h&&Oe(b.line.text.charAt(f.coverStart+h));)--h;for(;f.coverStart+i<f.coverEnd&&Oe(b.line.text.charAt(f.coverStart+i));)++i;if(sf&&tf<9&&0==h&&i==f.coverEnd-f.coverStart)e=g.parentNode.getBoundingClientRect();else if(sf&&a.options.lineWrapping){var l=Rg(g,h,i).getClientRects();e=l.length?l["right"==d?l.length-1:0]:Rf}else e=Rg(g,h,i).getBoundingClientRect()||Rf;if(e.left||e.right||0==h)break;i=h,h-=1,j="right"}sf&&tf<11&&(e=eb(a.display.measure,e))}else{h>0&&(j=d="right");var l;e=a.options.lineWrapping&&(l=g.getClientRects()).length>1?l["right"==d?l.length-1:0]:g.getBoundingClientRect()}if(sf&&tf<9&&!h&&(!e||!e.left&&!e.right)){var m=g.parentNode.getClientRects()[0];e=m?{left:m.left,right:m.left+tb(a.display),top:m.top,bottom:m.bottom}:Rf}for(var n=e.top-b.rect.top,o=e.bottom-b.rect.top,p=(n+o)/2,q=b.view.measure.heights,k=0;k<q.length-1&&!(p<q[k]);k++);var r=k?q[k-1]:0,s=q[k],t={left:("right"==j?e.right:e.left)-b.rect.left,right:("left"==j?e.left:e.right)-b.rect.left,top:r,bottom:s};return e.left||e.right||(t.bogus=!0),a.options.singleCursorHeightPerLine||(t.rtop=n,t.rbottom=o),t}function eb(a,b){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!$e(a))return b;var c=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:b.left*c,right:b.right*c,top:b.top*d,bottom:b.bottom*d}}function fb(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function gb(a){a.display.externalMeasure=null,Qe(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)fb(a.display.view[b])}function hb(a){gb(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function ib(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function jb(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function kb(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=yd(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=ce(b);if("local"==d?g+=Ra(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=a.display.lineSpace.getBoundingClientRect();g+=h.top+("window"==d?0:jb());var i=h.left+("window"==d?0:ib());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function lb(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=ib(),e-=jb();else if("local"==c||!c){var f=a.display.sizer.getBoundingClientRect();d+=f.left,e+=f.top}var g=a.display.lineSpace.getBoundingClientRect();return{left:d-g.left,top:e-g.top}}function mb(a,b,c,d,e){return d||(d=Yd(a.doc,b.line)),kb(a,d,$a(a,d,b.ch,e),c)}function nb(a,b,c,d,e,f){function g(b,g){var h=bb(a,e,b,g?"right":"left",f);return g?h.left=h.right:h.right=h.left,kb(a,d,h,c)}function h(a,b){var c=i[b],d=c.level%2;return a==af(c)&&b&&c.level<i[b-1].level?(c=i[--b],a=bf(c)-(c.level%2?0:1),d=!0):a==bf(c)&&b<i.length-1&&c.level<i[b+1].level&&(c=i[++b],a=af(c)-c.level%2,d=!1),d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||Yd(a.doc,b.line),e||(e=ab(a,d));var i=de(d),j=b.ch;if(!i)return g(j);var k=jf(i,j),l=h(j,k);return null!=fh&&(l.other=h(j,fh)),l}function ob(a,b){var c=0,b=pa(a.doc,b);a.options.lineWrapping||(c=tb(a.display)*b.ch);var d=Yd(a.doc,b.line),e=ce(d)+Ra(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function pb(a,b,c,d){var e=Lf(a,b);return e.xRel=d,c&&(e.outside=!0),e}function qb(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,c<0)return pb(d.first,0,!0,-1);var e=be(d,c),f=d.first+d.size-1;if(e>f)return pb(d.first+d.size-1,Yd(d,f).text.length,!0,1);b<0&&(b=0);for(var g=Yd(d,e);;){var h=rb(a,g,e,b,c),i=pd(g),j=i&&i.find(0,!0);if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=ae(g=j.to.line)}}function rb(a,b,c,d,e){function f(d){var e=nb(a,Lf(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-ce(b),h=!1,i=2*a.display.wrapper.clientWidth,j=ab(a,b),k=de(b),l=b.text.length,m=cf(b),n=df(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return pb(c,n,r,1);for(;;){if(k?n==m||n==lf(b,m,1):n-m<=1){for(var s=d<o||d-o<=q-d?m:n,t=d-(s==m?o:q);Oe(b.text.charAt(s));)++s;var u=pb(c,s,s==m?p:r,t<-1?-1:t>1?1:0);return u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;x<v;++x)w=lf(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function sb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Of){Of=Pe("pre");for(var b=0;b<49;++b)Of.appendChild(document.createTextNode("x")),Of.appendChild(Pe("br"));Of.appendChild(document.createTextNode("x"))}Re(a.measure,Of);var c=Of.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),Qe(a.measure),c||1}function tb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=Pe("span","xxxxxxxxxx"),c=Pe("pre",[b]);Re(a.measure,c);var d=b.getBoundingClientRect(),e=(d.right-d.left)/10;return e>2&&(a.cachedCharWidth=e),e||10}function ub(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Tf},Sf?Sf.ops.push(a.curOp):a.curOp.ownsGroup=Sf={ops:[a.curOp],delayedCallbacks:[]}}function vb(a){var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c].call(null);for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,e.cm)}}while(c<b.length)}function wb(a){var b=a.curOp,c=b.ownsGroup;if(c)try{vb(c)}finally{Sf=null;for(var d=0;d<c.ops.length;d++)c.ops[d].cm.curOp=null;xb(c)}}function xb(a){for(var b=a.ops,c=0;c<b.length;c++)yb(b[c]);for(var c=0;c<b.length;c++)zb(b[c]);for(var c=0;c<b.length;c++)Ab(b[c]);for(var c=0;c<b.length;c++)Bb(b[c]);for(var c=0;c<b.length;c++)Cb(b[c])}function yb(a){var b=a.cm,c=b.display;A(b),a.updateMaxLine&&m(b),a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<c.viewFrom||a.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&b.options.lineWrapping,a.update=a.mustUpdate&&new z(b,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function zb(a){a.updatedDisplay=a.mustUpdate&&B(a.cm,a.update)}function Ab(a){var b=a.cm,c=b.display;a.updatedDisplay&&F(b),a.barMeasure=o(b),c.maxLineChanged&&!b.options.lineWrapping&&(a.adjustWidthTo=$a(b,c.maxLine,c.maxLine.text.length).left+3,b.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+a.adjustWidthTo+Ua(b)+b.display.barWidth),a.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+a.adjustWidthTo-Va(b))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=c.input.prepareSelection())}function Bb(a){var b=a.cm;null!=a.adjustWidthTo&&(b.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<b.doc.scrollLeft&&ec(b,Math.min(b.display.scroller.scrollLeft,a.maxScrollLeft),!0),b.display.maxLineChanged=!1),a.preparedSelection&&b.display.input.showSelection(a.preparedSelection),(a.updatedDisplay||a.startHeight!=b.doc.height)&&s(b,a.barMeasure),a.updatedDisplay&&E(b,a.barMeasure),a.selectionChanged&&Ma(b),b.state.focused&&a.updateInput&&b.display.input.reset(a.typing),!a.focus||a.focus!=Se()||document.hasFocus&&!document.hasFocus()||Y(a.cm)}function Cb(a){var b=a.cm,c=b.display,d=b.doc;if(a.updatedDisplay&&C(b,a.update),null==c.wheelStartX||null==a.scrollTop&&null==a.scrollLeft&&!a.scrollToPos||(c.wheelStartX=c.wheelStartY=null),null==a.scrollTop||c.scroller.scrollTop==a.scrollTop&&!a.forceScroll||(d.scrollTop=Math.max(0,Math.min(c.scroller.scrollHeight-c.scroller.clientHeight,a.scrollTop)),c.scrollbars.setScrollTop(d.scrollTop),c.scroller.scrollTop=d.scrollTop),null==a.scrollLeft||c.scroller.scrollLeft==a.scrollLeft&&!a.forceScroll||(d.scrollLeft=Math.max(0,Math.min(c.scroller.scrollWidth-c.scroller.clientWidth,a.scrollLeft)),c.scrollbars.setScrollLeft(d.scrollLeft),c.scroller.scrollLeft=d.scrollLeft,v(b)),a.scrollToPos){var e=Hc(b,pa(d,a.scrollToPos.from),pa(d,a.scrollToPos.to),a.scrollToPos.margin);a.scrollToPos.isCursor&&b.state.focused&&Gc(b,e)}var f=a.maybeHiddenMarkers,g=a.maybeUnhiddenMarkers;if(f)for(var h=0;h<f.length;++h)f[h].lines.length||Gg(f[h],"hide");if(g)for(var h=0;h<g.length;++h)g[h].lines.length&&Gg(g[h],"unhide");c.wrapper.offsetHeight&&(d.scrollTop=b.display.scroller.scrollTop),a.changeObjs&&Gg(b,"changes",b,a.changeObjs),a.update&&a.update.finish()}function Db(a,b){if(a.curOp)return b();ub(a);try{return b()}finally{wb(a)}}function Eb(a,b){return function(){if(a.curOp)return b.apply(a,arguments);ub(a);try{return b.apply(a,arguments)}finally{wb(a)}}}function Fb(a){return function(){if(this.curOp)return a.apply(this,arguments);ub(this);try{return a.apply(this,arguments)}finally{wb(this)}}}function Gb(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);ub(b);try{return a.apply(this,arguments)}finally{wb(b)}}}function Hb(a,b,c){this.line=b,this.rest=sd(b),this.size=this.rest?ae(Fe(this.rest))-c+1:1,this.node=this.text=null,this.hidden=vd(a,b)}function Ib(a,b,c){for(var d,e=[],f=b;f<c;f=d){var g=new Hb(a.doc,Yd(a.doc,f),f);d=f+g.size,e.push(g)}return e}function Jb(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),d||(d=0);var e=a.display;if(d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=e.viewTo)Kf&&td(a.doc,b)<e.viewTo&&Lb(a);else if(c<=e.viewFrom)Kf&&ud(a.doc,c+d)>e.viewFrom?Lb(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Lb(a);else if(b<=e.viewFrom){var f=Nb(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Lb(a)}else if(c>=e.viewTo){var f=Nb(a,b,b,-1);f?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Lb(a)}else{var g=Nb(a,b,b,-1),h=Nb(a,c,c+d,1);g&&h?(e.view=e.view.slice(0,g.index).concat(Ib(a,g.lineN,h.lineN)).concat(e.view.slice(h.index)),e.viewTo+=d):Lb(a)}var i=e.externalMeasured;i&&(c<i.lineN?i.lineN+=d:b<i.lineN+i.size&&(e.externalMeasured=null))}function Kb(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;if(e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null),!(b<d.viewFrom||b>=d.viewTo)){var f=d.view[Mb(a,b)];if(null!=f.node){var g=f.changes||(f.changes=[]);Ge(g,c)==-1&&g.push(c)}}}function Lb(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function Mb(a,b){if(b>=a.display.viewTo)return null;if(b-=a.display.viewFrom,b<0)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,b<0)return d}function Nb(a,b,c,d){var e,f=Mb(a,b),g=a.display.view;if(!Kf||c==a.doc.first+a.doc.size)return{index:f,lineN:c};for(var h=0,i=a.display.viewFrom;h<f;h++)i+=g[h].size;if(i!=b){if(d>0){if(f==g.length-1)return null;e=i+g[f].size-b,f++}else e=i-b;b+=e,c+=e}for(;td(a.doc,c)!=c;){if(f==(d<0?0:g.length-1))return null;c+=d*g[f-(d<0?1:0)].size,f+=d}return{index:f,lineN:c}}function Ob(a,b,c){var d=a.display,e=d.view;0==e.length||b>=d.viewTo||c<=d.viewFrom?(d.view=Ib(a,b,c),d.viewFrom=b):(d.viewFrom>b?d.view=Ib(a,b,d.viewFrom).concat(d.view):d.viewFrom<b&&(d.view=d.view.slice(Mb(a,b))),d.viewFrom=b,d.viewTo<c?d.view=d.view.concat(Ib(a,d.viewTo,c)):d.viewTo>c&&(d.view=d.view.slice(0,Mb(a,c)))),d.viewTo=c}function Pb(a){for(var b=a.display.view,c=0,d=0;d<b.length;d++){var e=b[d];e.hidden||e.node&&!e.changes||++c}return c}function Qb(a){function b(){e.activeTouch&&(f=setTimeout(function(){e.activeTouch=null},1e3),g=e.activeTouch,g.end=+new Date)}function c(a){if(1!=a.touches.length)return!1;var b=a.touches[0];return b.radiusX<=1&&b.radiusY<=1}function d(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return c*c+d*d>400}var e=a.display;Dg(e.scroller,"mousedown",Eb(a,Vb)),sf&&tf<11?Dg(e.scroller,"dblclick",Eb(a,function(b){if(!ze(a,b)){var c=Ub(a,b);if(c&&!$b(a,b)&&!Tb(a.display,b)){Ag(b);var d=a.findWordAt(c);ua(a.doc,d.anchor,d.head)}}})):Dg(e.scroller,"dblclick",function(b){ze(a,b)||Ag(b)}),If||Dg(e.scroller,"contextmenu",function(b){sc(a,b)});var f,g={end:0};Dg(e.scroller,"touchstart",function(b){if(!ze(a,b)&&!c(b)){clearTimeout(f);var d=+new Date;e.activeTouch={start:d,moved:!1,prev:d-g.end<=300?g:null},1==b.touches.length&&(e.activeTouch.left=b.touches[0].pageX,e.activeTouch.top=b.touches[0].pageY)}}),Dg(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),Dg(e.scroller,"touchend",function(c){var f=e.activeTouch;if(f&&!Tb(e,c)&&null!=f.left&&!f.moved&&new Date-f.start<300){var g,h=a.coordsChar(e.activeTouch,"page");g=!f.prev||d(f,f.prev)?new la(h,h):!f.prev.prev||d(f,f.prev.prev)?a.findWordAt(h):new la(Lf(h.line,0),pa(a.doc,Lf(h.line+1,0))),a.setSelection(g.anchor,g.head),a.focus(),Ag(c)}b()}),Dg(e.scroller,"touchcancel",b),Dg(e.scroller,"scroll",function(){e.scroller.clientHeight&&(dc(a,e.scroller.scrollTop),ec(a,e.scroller.scrollLeft,!0),Gg(a,"scroll",a))}),Dg(e.scroller,"mousewheel",function(b){fc(a,b)}),Dg(e.scroller,"DOMMouseScroll",function(b){fc(a,b)}),Dg(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(b){ze(a,b)||Cg(b)},over:function(b){ze(a,b)||(bc(a,b),Cg(b))},start:function(b){ac(a,b)},drop:Eb(a,_b),leave:function(b){ze(a,b)||cc(a)}};var h=e.input.getField();Dg(h,"keyup",function(b){nc.call(a,b)}),Dg(h,"keydown",Eb(a,lc)),Dg(h,"keypress",Eb(a,oc)),Dg(h,"focus",Le(qc,a)),Dg(h,"blur",Le(rc,a))}function Rb(b,c,d){var e=d&&d!=a.Init;if(!c!=!e){var f=b.display.dragFunctions,g=c?Dg:Fg;g(b.display.scroller,"dragstart",f.start),g(b.display.scroller,"dragenter",f.enter),g(b.display.scroller,"dragover",f.over),g(b.display.scroller,"dragleave",f.leave),g(b.display.scroller,"drop",f.drop)}}function Sb(a){var b=a.display;b.lastWrapHeight==b.wrapper.clientHeight&&b.lastWrapWidth==b.wrapper.clientWidth||(b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize())}function Tb(a,b){for(var c=ue(b);c!=a.wrapper;c=c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function Ub(a,b,c,d){var e=a.display;if(!c&&"true"==ue(b).getAttribute("cm-not-content"))return null;var f,g,h=e.lineSpace.getBoundingClientRect();try{f=b.clientX-h.left,g=b.clientY-h.top}catch(a){return null}var i,j=qb(a,f,g);if(d&&1==j.xRel&&(i=Yd(a.doc,j.line).text).length==j.ch){var k=Ng(i,i.length,a.options.tabSize)-i.length;j=Lf(j.line,Math.max(0,Math.round((f-Ta(a.display).left)/tb(a.display))-k))}return j}function Vb(a){var b=this,c=b.display;if(!(ze(b,a)||c.activeTouch&&c.input.supportsTouch())){if(c.shift=a.shiftKey,Tb(c,a))return void(uf||(c.scroller.draggable=!1,setTimeout(function(){c.scroller.draggable=!0},100)));if(!$b(b,a)){var d=Ub(b,a);switch(window.focus(),ve(a)){case 1:b.state.selectingText?b.state.selectingText(a):d?Wb(b,a,d):ue(a)==c.scroller&&Ag(a);break;case 2:uf&&(b.state.lastMiddleDown=+new Date),d&&ua(b.doc,d),setTimeout(function(){c.input.focus()},20),Ag(a);break;case 3:If?sc(b,a):pc(b)}}}}function Wb(a,b,c){sf?setTimeout(Le(Y,a),0):a.curOp.focus=Se();var d,e=+new Date;Qf&&Qf.time>e-400&&0==Mf(Qf.pos,c)?d="triple":Pf&&Pf.time>e-400&&0==Mf(Pf.pos,c)?(d="double",Qf={time:e,pos:c}):(d="single",Pf={time:e,pos:c});var f,g=a.doc.sel,h=Df?b.metaKey:b.ctrlKey;a.options.dragDrop&&_g&&!a.isReadOnly()&&"single"==d&&(f=g.contains(c))>-1&&(Mf((f=g.ranges[f]).from(),c)<0||c.xRel>0)&&(Mf(f.to(),c)>0||c.xRel<0)?Xb(a,b,c,h):Yb(a,b,c,d,h)}function Xb(a,b,c,d){var e=a.display,f=+new Date,g=Eb(a,function(h){uf&&(e.scroller.draggable=!1),a.state.draggingText=!1,Fg(document,"mouseup",g),Fg(e.scroller,"drop",g),Math.abs(b.clientX-h.clientX)+Math.abs(b.clientY-h.clientY)<10&&(Ag(h),!d&&+new Date-200<f&&ua(a.doc,c),uf||sf&&9==tf?setTimeout(function(){document.body.focus(),e.input.focus()},20):e.input.focus())});uf&&(e.scroller.draggable=!0),a.state.draggingText=g,e.scroller.dragDrop&&e.scroller.dragDrop(),Dg(document,"mouseup",g),Dg(e.scroller,"drop",g)}function Yb(a,b,c,d,e){function f(b){if(0!=Mf(q,b))if(q=b,"rect"==d){for(var e=[],f=a.options.tabSize,g=Ng(Yd(j,c.line).text,c.ch,f),h=Ng(Yd(j,b.line).text,b.ch,f),i=Math.min(g,h),n=Math.max(g,h),o=Math.min(c.line,b.line),p=Math.min(a.lastLine(),Math.max(c.line,b.line));o<=p;o++){var r=Yd(j,o).text,s=Og(r,i,f);i==n?e.push(new la(Lf(o,s),Lf(o,s))):r.length>s&&e.push(new la(Lf(o,s),Lf(o,Og(r,n,f))))}e.length||e.push(new la(c,c)),Aa(j,ma(m.ranges.slice(0,l).concat(e),l),{origin:"*mouse",scroll:!1}),a.scrollIntoView(b)}else{var t=k,u=t.anchor,v=b;if("single"!=d){if("double"==d)var w=a.findWordAt(b);else var w=new la(Lf(b.line,0),pa(j,Lf(b.line+1,0)));Mf(w.anchor,u)>0?(v=w.head,u=X(t.from(),w.anchor)):(v=w.anchor,u=W(t.to(),w.head))}var e=m.ranges.slice(0);e[l]=new la(pa(j,u),v),Aa(j,ma(e,l),Lg)}}function g(b){var c=++s,e=Ub(a,b,!0,"rect"==d);if(e)if(0!=Mf(e,q)){a.curOp.focus=Se(),f(e);var h=u(i,j);(e.line>=h.to||e.line<h.from)&&setTimeout(Eb(a,function(){s==c&&g(b)}),150)}else{var k=b.clientY<r.top?-20:b.clientY>r.bottom?20:0;k&&setTimeout(Eb(a,function(){s==c&&(i.scroller.scrollTop+=k,g(b))}),50)}}function h(b){a.state.selectingText=!1,s=1/0,Ag(b),i.input.focus(),Fg(document,"mousemove",t),Fg(document,"mouseup",v),j.history.lastSelOrigin=null}var i=a.display,j=a.doc;Ag(b);var k,l,m=j.sel,n=m.ranges;if(e&&!b.shiftKey?(l=j.sel.contains(c),k=l>-1?n[l]:new la(c,c)):(k=j.sel.primary(),l=j.sel.primIndex),Ef?b.shiftKey&&b.metaKey:b.altKey)d="rect",e||(k=new la(c,c)),c=Ub(a,b,!0,!0),l=-1;else if("double"==d){var o=a.findWordAt(c);k=a.display.shift||j.extend?ta(j,k,o.anchor,o.head):o}else if("triple"==d){var p=new la(Lf(c.line,0),pa(j,Lf(c.line+1,0)));k=a.display.shift||j.extend?ta(j,k,p.anchor,p.head):p}else k=ta(j,k,c);e?l==-1?(l=n.length,Aa(j,ma(n.concat([k]),l),{scroll:!1,origin:"*mouse"})):n.length>1&&n[l].empty()&&"single"==d&&!b.shiftKey?(Aa(j,ma(n.slice(0,l).concat(n.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),m=j.sel):wa(j,l,k,Lg):(l=0,Aa(j,new ka([k],0),Lg),m=j.sel);var q=c,r=i.wrapper.getBoundingClientRect(),s=0,t=Eb(a,function(a){ve(a)?g(a):h(a)}),v=Eb(a,h);a.state.selectingText=v,Dg(document,"mousemove",t),Dg(document,"mouseup",v)}function Zb(a,b,c,d){try{var e=b.clientX,f=b.clientY}catch(a){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&Ag(b);var g=a.display,h=g.lineDiv.getBoundingClientRect();if(f>h.bottom||!Be(a,c))return te(b);f-=h.top-g.viewOffset;for(var i=0;i<a.options.gutters.length;++i){var j=g.gutters.childNodes[i];if(j&&j.getBoundingClientRect().right>=e){var k=be(a.doc,f),l=a.options.gutters[i];return Gg(a,c,a,k,l,b),te(b)}}}function $b(a,b){return Zb(a,b,"gutterClick",!0)}function _b(a){var b=this;if(cc(b),!ze(b,a)&&!Tb(b.display,a)){Ag(a),sf&&(Uf=+new Date);var c=Ub(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){if(!b.options.allowDropFileTypes||Ge(b.options.allowDropFileTypes,a.type)!=-1){var h=new FileReader;h.onload=Eb(b,function(){var a=h.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a=""),f[d]=a,++g==e){c=pa(b.doc,c);var i={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};zc(b.doc,i),za(b.doc,na(c,$f(i)))}}),h.readAsText(a)}},i=0;i<e;++i)h(d[i],i);else{if(b.state.draggingText&&b.doc.sel.contains(c)>-1)return b.state.draggingText(a),void setTimeout(function(){b.display.input.focus()},20);try{var f=a.dataTransfer.getData("Text");if(f){if(b.state.draggingText&&!(Df?a.altKey:a.ctrlKey))var j=b.listSelections();if(Ba(b.doc,na(c,c)),j)for(var i=0;i<j.length;++i)Fc(b.doc,"",j[i].anchor,j[i].head,"drag");b.replaceSelection(f,"around","paste"),b.display.input.focus()}}catch(a){}}}}function ac(a,b){if(sf&&(!a.state.draggingText||+new Date-Uf<100))return void Cg(b);if(!ze(a,b)&&!Tb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!yf)){var c=Pe("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",xf&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop),b.dataTransfer.setDragImage(c,0,0),xf&&c.parentNode.removeChild(c)}}function bc(a,b){var c=Ub(a,b);if(c){var d=document.createDocumentFragment();Ka(a,c,d),a.display.dragCursor||(a.display.dragCursor=Pe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),Re(a.display.dragCursor,d)}}function cc(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function dc(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,pf||D(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),pf&&D(a),Na(a,100))}function ec(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,v(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function fc(a,b){var c=Xf(b),d=c.x,e=c.y,f=a.display,g=f.scroller,h=g.scrollWidth>g.clientWidth,i=g.scrollHeight>g.clientHeight;if(d&&h||e&&i){if(e&&Df&&uf)a:for(var j=b.target,k=f.view;j!=g;j=j.parentNode)for(var l=0;l<k.length;l++)if(k[l].node==j){a.display.currentWheelTarget=j;break a}if(d&&!pf&&!xf&&null!=Wf)return e&&i&&dc(a,Math.max(0,Math.min(g.scrollTop+e*Wf,g.scrollHeight-g.clientHeight))),ec(a,Math.max(0,Math.min(g.scrollLeft+d*Wf,g.scrollWidth-g.clientWidth))),(!e||e&&i)&&Ag(b),void(f.wheelStartX=null);if(e&&null!=Wf){var m=e*Wf,n=a.doc.scrollTop,o=n+f.wrapper.clientHeight;m<0?n=Math.max(0,n+m-50):o=Math.min(a.doc.height,o+m+50),D(a,{top:n,bottom:o})}Vf<20&&(null==f.wheelStartX?(f.wheelStartX=g.scrollLeft,f.wheelStartY=g.scrollTop,f.wheelDX=d,f.wheelDY=e,setTimeout(function(){if(null!=f.wheelStartX){var a=g.scrollLeft-f.wheelStartX,b=g.scrollTop-f.wheelStartY,c=b&&f.wheelDY&&b/f.wheelDY||a&&f.wheelDX&&a/f.wheelDX;f.wheelStartX=f.wheelStartY=null,c&&(Wf=(Wf*Vf+c)/(Vf+1),++Vf)}},200)):(f.wheelDX+=d,f.wheelDY+=e))}}function gc(a,b,c){if("string"==typeof b&&(b=jg[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Jg}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function hc(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=lg(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&lg(b,a.options.extraKeys,c,a)||lg(b,a.options.keyMap,c,a)}function ic(a,b,c,d){var e=a.state.keySeq;if(e){if(mg(b))return"handled";Yf.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())}),b=e+" "+b}var f=hc(a,b,d);return"multi"==f&&(a.state.keySeq=b),"handled"==f&&xe(a,"keyHandled",a,b,c),"handled"!=f&&"multi"!=f||(Ag(c),Ma(a)),e&&!f&&/\'$/.test(b)?(Ag(c),!0):!!f}function jc(a,b){var c=ng(b,!0);return!!c&&(b.shiftKey&&!a.state.keySeq?ic(a,"Shift-"+c,b,function(b){return gc(a,b,!0)})||ic(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return gc(a,b)}):ic(a,c,b,function(b){return gc(a,b)}))}function kc(a,b,c){return ic(a,"'"+c+"'",b,function(b){return gc(a,b,!0)})}function lc(a){var b=this;if(b.curOp.focus=Se(),!ze(b,a)){sf&&tf<11&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.display.shift=16==c||a.shiftKey;var d=jc(b,a);xf&&(Zf=d?c:null,!d&&88==c&&!ch&&(Df?a.metaKey:a.ctrlKey)&&b.replaceSelection("",null,"cut")),18!=c||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||mc(b)}}function mc(a){function b(a){18!=a.keyCode&&a.altKey||(Yg(c,"CodeMirror-crosshair"),Fg(document,"keyup",b),Fg(document,"mouseover",b))}var c=a.display.lineDiv;Zg(c,"CodeMirror-crosshair"),Dg(document,"keyup",b),Dg(document,"mouseover",b)}function nc(a){16==a.keyCode&&(this.doc.sel.shift=!1),ze(this,a)}function oc(a){var b=this;if(!(Tb(b.display,a)||ze(b,a)||a.ctrlKey&&!a.altKey||Df&&a.metaKey)){var c=a.keyCode,d=a.charCode;if(xf&&c==Zf)return Zf=null,void Ag(a);if(!xf||a.which&&!(a.which<10)||!jc(b,a)){var e=String.fromCharCode(null==d?c:d);kc(b,a,e)||b.display.input.onKeyPress(a)}}}function pc(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,rc(a))},100)}function qc(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1),"nocursor"!=a.options.readOnly&&(a.state.focused||(Gg(a,"focus",a),a.state.focused=!0,Zg(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),uf&&setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),Ma(a))}function rc(a){a.state.delayingBlurEvent||(a.state.focused&&(Gg(a,"blur",a),a.state.focused=!1,Yg(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function sc(a,b){Tb(a.display,b)||tc(a,b)||ze(a,b,"contextmenu")||a.display.input.onContextMenu(b)}function tc(a,b){return!!Be(a,"gutterContextMenu")&&Zb(a,b,"gutterContextMenu",!1)}function uc(a,b){if(Mf(a,b.from)<0)return a;if(Mf(a,b.to)<=0)return $f(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=$f(b).ch-b.to.ch),Lf(c,d)}function vc(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];
c.push(new la(uc(e.anchor,b),uc(e.head,b)))}return ma(c,a.sel.primIndex)}function wc(a,b,c){return a.line==b.line?Lf(c.line,a.ch-b.ch+c.ch):Lf(c.line+(a.line-b.line),a.ch)}function xc(a,b,c){for(var d=[],e=Lf(a.first,0),f=e,g=0;g<b.length;g++){var h=b[g],i=wc(h.from,e,f),j=wc($f(h),e,f);if(e=h.to,f=j,"around"==c){var k=a.sel.ranges[g],l=Mf(k.head,k.anchor)<0;d[g]=new la(l?j:i,l?i:j)}else d[g]=new la(i,i)}return new ka(d,a.sel.primIndex)}function yc(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(d.update=function(b,c,d,e){b&&(this.from=pa(a,b)),c&&(this.to=pa(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)}),Gg(a,"beforeChange",a,d),a.cm&&Gg(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function zc(a,b,c){if(a.cm){if(!a.cm.curOp)return Eb(a.cm,zc)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(Be(a,"beforeChange")||a.cm&&Be(a.cm,"beforeChange"))||(b=yc(a,b,!0))){var d=Jf&&!c&&hd(a,b.from,b.to);if(d)for(var e=d.length-1;e>=0;--e)Ac(a,{from:d[e].from,to:d[e].to,text:e?[""]:b.text});else Ac(a,b)}}function Ac(a,b){if(1!=b.text.length||""!=b.text[0]||0!=Mf(b.from,b.to)){var c=vc(a,b);ie(a,b,c,a.cm?a.cm.curOp.id:NaN),Dc(a,b,c,ed(a,b));var d=[];Wd(a,function(a,c){c||Ge(d,a.history)!=-1||(se(a.history,b),d.push(a.history)),Dc(a,b,null,ed(a,b))})}}function Bc(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d,e=a.history,f=a.sel,g="undo"==b?e.done:e.undone,h="undo"==b?e.undone:e.done,i=0;i<g.length&&(d=g[i],c?!d.ranges||d.equals(a.sel):d.ranges);i++);if(i!=g.length){for(e.lastOrigin=e.lastSelOrigin=null;d=g.pop(),d.ranges;){if(le(d,h),c&&!d.equals(a.sel))return void Aa(a,d,{clearRedo:!1});f=d}var j=[];le(f,h),h.push({changes:j,generation:e.generation}),e.generation=d.generation||++e.maxGeneration;for(var k=Be(a,"beforeChange")||a.cm&&Be(a.cm,"beforeChange"),i=d.changes.length-1;i>=0;--i){var l=d.changes[i];if(l.origin=b,k&&!yc(a,l,!1))return void(g.length=0);j.push(fe(a,l));var m=i?vc(a,l):Fe(g);Dc(a,l,m,gd(a,l)),!i&&a.cm&&a.cm.scrollIntoView({from:l.from,to:$f(l)});var n=[];Wd(a,function(a,b){b||Ge(n,a.history)!=-1||(se(a.history,l),n.push(a.history)),Dc(a,l,null,gd(a,l))})}}}}function Cc(a,b){if(0!=b&&(a.first+=b,a.sel=new ka(He(a.sel.ranges,function(a){return new la(Lf(a.anchor.line+b,a.anchor.ch),Lf(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){Jb(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Kb(a.cm,d,"gutter")}}function Dc(a,b,c,d){if(a.cm&&!a.cm.curOp)return Eb(a.cm,Dc)(a,b,c,d);if(b.to.line<a.first)return void Cc(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Cc(a,e),b={from:Lf(a.first,0),to:Lf(b.to.line+e,b.to.ch),text:[Fe(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:Lf(f,Yd(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=Zd(a,b.from,b.to),c||(c=vc(a,b)),a.cm?Ec(a.cm,b,d):Td(a,b,d),Ba(a,c,Kg)}}function Ec(a,b,c){var d=a.doc,e=a.display,g=b.from,h=b.to,i=!1,j=g.line;a.options.lineWrapping||(j=ae(rd(Yd(d,g.line))),d.iter(j,h.line+1,function(a){if(a==e.maxLine)return i=!0,!0})),d.sel.contains(b.from,b.to)>-1&&Ae(a),Td(d,b,c,f(a)),a.options.lineWrapping||(d.iter(j,g.line+b.text.length,function(a){var b=l(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,i=!1)}),i&&(a.curOp.updateMaxLine=!0)),d.frontier=Math.min(d.frontier,g.line),Na(a,400);var k=b.text.length-(h.line-g.line)-1;b.full?Jb(a):g.line!=h.line||1!=b.text.length||Sd(a.doc,b)?Jb(a,g.line,h.line+1,k):Kb(a,g.line,"text");var m=Be(a,"changes"),n=Be(a,"change");if(n||m){var o={from:g,to:h,text:b.text,removed:b.removed,origin:b.origin};n&&xe(a,"change",a,o),m&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(o)}a.display.selForContextMenu=null}function Fc(a,b,c,d,e){if(d||(d=c),Mf(d,c)<0){var f=d;d=c,c=f}"string"==typeof b&&(b=a.splitLines(b)),zc(a,{from:c,to:d,text:b,origin:e})}function Gc(a,b){if(!ze(a,"scrollCursorIntoView")){var c=a.display,d=c.sizer.getBoundingClientRect(),e=null;if(b.top+d.top<0?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!Af){var f=Pe("div","​",null,"position: absolute; top: "+(b.top-c.viewOffset-Ra(a.display))+"px; height: "+(b.bottom-b.top+Ua(a)+c.barHeight)+"px; left: "+b.left+"px; width: 2px;");a.display.lineSpace.appendChild(f),f.scrollIntoView(e),a.display.lineSpace.removeChild(f)}}}function Hc(a,b,c,d){null==d&&(d=0);for(var e=0;e<5;e++){var f=!1,g=nb(a,b),h=c&&c!=b?nb(a,c):g,i=Jc(a,Math.min(g.left,h.left),Math.min(g.top,h.top)-d,Math.max(g.left,h.left),Math.max(g.bottom,h.bottom)+d),j=a.doc.scrollTop,k=a.doc.scrollLeft;if(null!=i.scrollTop&&(dc(a,i.scrollTop),Math.abs(a.doc.scrollTop-j)>1&&(f=!0)),null!=i.scrollLeft&&(ec(a,i.scrollLeft),Math.abs(a.doc.scrollLeft-k)>1&&(f=!0)),!f)break}return g}function Ic(a,b,c,d,e){var f=Jc(a,b,c,d,e);null!=f.scrollTop&&dc(a,f.scrollTop),null!=f.scrollLeft&&ec(a,f.scrollLeft)}function Jc(a,b,c,d,e){var f=a.display,g=sb(a.display);c<0&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,i=Wa(a),j={};e-c>i&&(e=c+i);var k=a.doc.height+Sa(f),l=c<g,m=e>k-g;if(c<h)j.scrollTop=l?0:c;else if(e>h+i){var n=Math.min(c,(m?k:e)-i);n!=h&&(j.scrollTop=n)}var o=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft,p=Va(a)-(a.options.fixedGutter?f.gutters.offsetWidth:0),q=d-b>p;return q&&(d=b+p),b<10?j.scrollLeft=0:b<o?j.scrollLeft=Math.max(0,b-(q?0:10)):d>p+o-3&&(j.scrollLeft=d+(q?0:10)-p),j}function Kc(a,b,c){null==b&&null==c||Mc(a),null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b),null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function Lc(a){Mc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?Lf(b.line,b.ch-1):b,d=Lf(b.line,b.ch+1)),a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function Mc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=ob(a,b.from),d=ob(a,b.to),e=Jc(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(e.scrollLeft,e.scrollTop)}}function Nc(a,b,c,d){var e,f=a.doc;null==c&&(c="add"),"smart"==c&&(f.mode.indent?e=Qa(a,b):c="prev");var g=a.options.tabSize,h=Yd(f,b),i=Ng(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var j,k=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&(j=f.mode.indent(e,h.text.slice(k.length),h.text),j==Jg||j>150)){if(!d)return;c="prev"}}else j=0,c="not";"prev"==c?j=b>f.first?Ng(Yd(f,b-1).text,null,g):0:"add"==c?j=i+a.options.indentUnit:"subtract"==c?j=i-a.options.indentUnit:"number"==typeof c&&(j=i+c),j=Math.max(0,j);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(j/g);n;--n)m+=g,l+="\t";if(m<j&&(l+=Ee(j-m)),l!=k)return Fc(f,l,Lf(b,0),Lf(b,k.length),"+input"),h.stateAfter=null,!0;for(var n=0;n<f.sel.ranges.length;n++){var o=f.sel.ranges[n];if(o.head.line==b&&o.head.ch<k.length){var m=Lf(b,k.length);wa(f,n,new la(m,m));break}}}function Oc(a,b,c,d){var e=b,f=b;return"number"==typeof b?f=Yd(a,oa(a,b)):e=ae(b),null==e?null:(d(f,e)&&a.cm&&Kb(a.cm,e,c),f)}function Pc(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&Mf(f.from,Fe(d).to)<=0;){var g=d.pop();if(Mf(g.from,f.from)<0){f.from=g.from;break}}d.push(f)}Db(a,function(){for(var b=d.length-1;b>=0;b--)Fc(a.doc,"",d[b].from,d[b].to,"+delete");Lc(a)})}function Qc(a,b,c,d,e){function f(){var b=h+c;return!(b<a.first||b>=a.first+a.size)&&(h=b,k=Yd(a,b))}function g(a){var b=(e?lf:mf)(k,i,c,!0);if(null==b){if(a||!f())return!1;i=e?(c<0?df:cf)(k):c<0?k.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=c,k=Yd(a,h);if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var l=null,m="group"==d,n=a.cm&&a.cm.getHelper(b,"wordChars"),o=!0;!(c<0)||g(!o);o=!1){var p=k.text.charAt(i)||"\n",q=Me(p,n)?"w":m&&"\n"==p?"n":!m||/\s/.test(p)?null:"p";if(!m||o||q||(q="s"),l&&l!=q){c<0&&(c=1,g());break}if(q&&(l=q),c>0&&!g(!o))break}var r=Ga(a,Lf(h,i),b,j,!0);return Mf(b,r)||(r.hitSide=!0),r}function Rc(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(c<0?1.5:.5)*sb(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=qb(a,g,e);if(!i.outside)break;if(c<0?e<=0:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function Sc(b,c,d,e){a.defaults[b]=c,d&&(ag[b]=e?function(a,b,c){c!=bg&&d(a,b,c)}:d)}function Tc(a){for(var b,c,d,e,f=a.split(/-(?!$)/),a=f[f.length-1],g=0;g<f.length-1;g++){var h=f[g];if(/^(cmd|meta|m)$/i.test(h))e=!0;else if(/^a(lt)?$/i.test(h))b=!0;else if(/^(c|ctrl|control)$/i.test(h))c=!0;else{if(!/^s(hift)$/i.test(h))throw new Error("Unrecognized modifier name: "+h);d=!0}}return b&&(a="Alt-"+a),c&&(a="Ctrl-"+a),e&&(a="Cmd-"+a),d&&(a="Shift-"+a),a}function Uc(a){return"string"==typeof a?kg[a]:a}function Vc(a,b,c,d,e){if(d&&d.shared)return Wc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return Eb(a.cm,Vc)(a,b,c,d,e);var f=new qg(a,e),g=Mf(b,c);if(d&&Ke(d,f,!1),g>0||0==g&&f.clearWhenEmpty!==!1)return f;if(f.replacedWith&&(f.collapsed=!0,f.widgetNode=Pe("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0)),f.collapsed){if(qd(a,b.line,b,c,f)||b.line!=c.line&&qd(a,c.line,b,c,f))throw new Error("Inserting collapsed marker partially overlapping an existing one");Kf=!0}f.addToHistory&&ie(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var h,i=b.line,j=a.cm;if(a.iter(i,c.line+1,function(a){j&&f.collapsed&&!j.options.lineWrapping&&rd(a)==j.display.maxLine&&(h=!0),f.collapsed&&i!=b.line&&_d(a,0),bd(a,new $c(f,i==b.line?b.ch:null,i==c.line?c.ch:null)),++i}),f.collapsed&&a.iter(b.line,c.line+1,function(b){vd(a,b)&&_d(b,0)}),f.clearOnEnter&&Dg(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(Jf=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed&&(f.id=++pg,f.atomic=!0),j){if(h&&(j.curOp.updateMaxLine=!0),f.collapsed)Jb(j,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||f.css)for(var k=b.line;k<=c.line;k++)Kb(j,k,"text");f.atomic&&Da(j.doc),xe(j,"markerAdded",j,f)}return f}function Wc(a,b,c,d,e){d=Ke(d),d.shared=!1;var f=[Vc(a,b,c,d,e)],g=f[0],h=d.widgetNode;return Wd(a,function(a){h&&(d.widgetNode=h.cloneNode(!0)),f.push(Vc(a,pa(a,b),pa(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=Fe(f)}),new rg(f,g)}function Xc(a){return a.findMarks(Lf(a.first,0),a.clipPos(Lf(a.lastLine())),function(a){return a.parent})}function Yc(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.find(),f=a.clipPos(e.from),g=a.clipPos(e.to);if(Mf(f,g)){var h=Vc(a,f,g,d.primary,d.primary.type);d.markers.push(h),h.parent=d}}}function Zc(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Wd(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];Ge(d,f.doc)==-1&&(f.parent=null,c.markers.splice(e--,1))}}}function $c(a,b,c){this.marker=a,this.from=b,this.to=c}function _c(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function ad(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function bd(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function cd(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||f.from==b&&"bookmark"==g.type&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push(new $c(g,f.from,i?null:f.to))}}return d}function dd(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||f.from==b&&"bookmark"==g.type&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push(new $c(g,i?null:f.from-b,null==f.to?null:f.to-b))}}return d}function ed(a,b){if(b.full)return null;var c=ra(a,b.from.line)&&Yd(a,b.from.line).markedSpans,d=ra(a,b.to.line)&&Yd(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==Mf(b.from,b.to),h=cd(c,e,g),i=dd(d,f,g),j=1==b.text.length,k=Fe(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=_c(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=_c(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}h&&(h=fd(h)),i&&i!=h&&(i=fd(i));var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push(new $c(h[l].marker,null,null));for(var l=0;l<q;++l)o.push(p);o.push(i)}return o}function fd(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&a.splice(b--,1)}return a.length?a:null}function gd(a,b){var c=oe(a,b),d=ed(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function hd(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&Ge(d,c)!=-1||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(0),i=0;i<e.length;++i){var j=e[i];if(!(Mf(j.to,h.from)<0||Mf(j.from,h.to)>0)){var k=[i,1],l=Mf(j.from,h.from),m=Mf(j.to,h.to);(l<0||!g.inclusiveLeft&&!l)&&k.push({from:j.from,to:h.from}),(m>0||!g.inclusiveRight&&!m)&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function id(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function jd(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function kd(a){return a.inclusiveLeft?-1:0}function ld(a){return a.inclusiveRight?1:0}function md(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=Mf(d.from,e.from)||kd(a)-kd(b);if(f)return-f;var g=Mf(d.to,e.to)||ld(a)-ld(b);return g?g:b.id-a.id}function nd(a,b){var c,d=Kf&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!c||md(c,e.marker)<0)&&(c=e.marker);return c}function od(a){return nd(a,!0)}function pd(a){return nd(a,!1)}function qd(a,b,c,d,e){var f=Yd(a,b),g=Kf&&f.markedSpans;if(g)for(var h=0;h<g.length;++h){var i=g[h];if(i.marker.collapsed){var j=i.marker.find(0),k=Mf(j.from,c)||kd(i.marker)-kd(e),l=Mf(j.to,d)||ld(i.marker)-ld(e);if(!(k>=0&&l<=0||k<=0&&l>=0)&&(k<=0&&(Mf(j.to,c)>0||i.marker.inclusiveRight&&e.inclusiveLeft)||k>=0&&(Mf(j.from,d)<0||i.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function rd(a){for(var b;b=od(a);)a=b.find(-1,!0).line;return a}function sd(a){for(var b,c;b=pd(a);)a=b.find(1,!0).line,(c||(c=[])).push(a);return c}function td(a,b){var c=Yd(a,b),d=rd(c);return c==d?b:ae(d)}function ud(a,b){if(b>a.lastLine())return b;var c,d=Yd(a,b);if(!vd(a,d))return b;for(;c=pd(d);)d=c.find(1,!0).line;return ae(d)+1}function vd(a,b){var c=Kf&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&wd(a,b,d))return!0}}function wd(a,b,c){if(null==c.to){var d=c.marker.find(1,!0);return wd(a,d.line,_c(d.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var e,f=0;f<b.markedSpans.length;++f)if(e=b.markedSpans[f],e.marker.collapsed&&!e.marker.widgetNode&&e.from==c.to&&(null==e.to||e.to!=c.from)&&(e.marker.inclusiveLeft||c.marker.inclusiveRight)&&wd(a,b,e))return!0}function xd(a,b,c){ce(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Kc(a,null,c)}function yd(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!Vg(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;"),a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;"),Re(b.display.measure,Pe("div",[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function zd(a,b,c,d){var e=new sg(a,c,d),f=a.cm;return f&&e.noHScroll&&(f.display.alignWidgets=!0),Oc(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,f&&!vd(a,b)){var d=ce(b)<a.scrollTop;_d(b,b.height+yd(e)),d&&Kc(f,null,e.height),f.curOp.forceUpdate=!0}return!0}),e}function Ad(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),id(a),jd(a,c);var e=d?d(a):1;e!=a.height&&_d(a,e)}function Bd(a){a.parent=null,id(a)}function Cd(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return a}function Dd(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var d=a.innerMode(b,c);return d.mode.blankLine?d.mode.blankLine(d.state):void 0}}function Ed(b,c,d,e){for(var f=0;f<10;f++){e&&(e[0]=a.innerMode(b,d).mode);var g=b.token(c,d);if(c.pos>c.start)return g}throw new Error("Mode "+b.name+" failed to advance stream.")}function Fd(a,b,c,d){function e(a){return{start:l.start,end:l.pos,string:l.current(),type:f||null,state:a?hg(g.mode,k):k}}var f,g=a.doc,h=g.mode;b=pa(g,b);var i,j=Yd(g,b.line),k=Qa(a,b.line,c),l=new og(j.text,a.options.tabSize);for(d&&(i=[]);(d||l.pos<b.ch)&&!l.eol();)l.start=l.pos,f=Ed(h,l,k),d&&i.push(e(!0));return d?i:e()}function Gd(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var i,j=0,k=null,l=new og(b,a.options.tabSize),m=a.options.addModeClass&&[null];for(""==b&&Cd(Dd(c,d),f);!l.eol();){if(l.pos>a.options.maxHighlightLength?(h=!1,g&&Jd(a,b,d,l.pos),l.pos=b.length,i=null):i=Cd(Ed(c,l,d,m),f),m){var n=m[0].name;n&&(i="m-"+(i?n+" "+i:n))}if(!h||k!=i){for(;j<l.start;)j=Math.min(l.start,j+5e4),e(j,k);k=i}l.start=l.pos}for(;j<l.pos;){var o=Math.min(l.pos,j+5e4);e(o,k),j=o}}function Hd(a,b,c,d){var e=[a.state.modeGen],f={};Gd(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(var g=0;g<a.state.overlays.length;++g){var h=a.state.overlays[g],i=1,j=0;Gd(a,b.text,h.mode,!0,function(a,b){for(var c=i;j<a;){var d=e[i];d>a&&e.splice(i,1,a,e[i+1],d),i+=2,j=Math.min(a,d)}if(b)if(h.opaque)e.splice(c,i-c,a,"cm-overlay "+b),i=c+2;else for(;c<i;c+=2){var f=e[c+1];e[c+1]=(f?f+" ":"")+"cm-overlay "+b}},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function Id(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=Qa(a,ae(b)),e=Hd(a,b,b.text.length>a.options.maxHighlightLength?hg(a.doc.mode,d):d);b.stateAfter=d,b.styles=e.styles,e.classes?b.styleClasses=e.classes:b.styleClasses&&(b.styleClasses=null),c===a.doc.frontier&&a.doc.frontier++}return b.styles}function Jd(a,b,c,d){var e=a.doc.mode,f=new og(b,a.options.tabSize);for(f.start=f.pos=d||0,""==b&&Dd(e,c);!f.eol();)Ed(e,f,c),f.start=f.pos}function Kd(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?vg:ug;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function Ld(a,b){var c=Pe("span",null,null,uf?"padding-right: .1px":null),d={pre:Pe("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,splitSpaces:(sf||uf)&&a.getOption("lineWrapping")};b.measure={};for(var e=0;e<=(b.rest?b.rest.length:0);e++){var f,g=e?b.rest[e-1]:b.line;d.pos=0,d.addToken=Nd,Ze(a.display.measure)&&(f=de(g))&&(d.addToken=Pd(d.addToken,f)),d.map=[];var h=b!=a.display.externalMeasured&&ae(g);Rd(g,d,Id(a,g,h)),g.styleClasses&&(g.styleClasses.bgClass&&(d.bgClass=Ue(g.styleClasses.bgClass,d.bgClass||"")),g.styleClasses.textClass&&(d.textClass=Ue(g.styleClasses.textClass,d.textClass||""))),0==d.map.length&&d.map.push(0,0,d.content.appendChild(Ye(a.display.measure))),0==e?(b.measure.map=d.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(d.map),(b.measure.caches||(b.measure.caches=[])).push({}))}return uf&&/\bcm-tab\b/.test(d.content.lastChild.className)&&(d.content.className="cm-tab-wrap-hack"),Gg(a,"renderLine",a,b.line,d.pre),d.pre.className&&(d.textClass=Ue(d.pre.className,d.textClass||"")),d}function Md(a){var b=Pe("span","•","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b.setAttribute("aria-label",b.title),b}function Nd(a,b,c,d,e,f,g){if(b){var h=a.splitSpaces?b.replace(/ {3,}/g,Od):b,i=a.cm.state.specialChars,j=!1;if(i.test(b))for(var k=document.createDocumentFragment(),l=0;;){i.lastIndex=l;var m=i.exec(b),n=m?m.index-l:b.length-l;if(n){var o=document.createTextNode(h.slice(l,l+n));sf&&tf<9?k.appendChild(Pe("span",[o])):k.appendChild(o),a.map.push(a.pos,a.pos+n,o),a.col+=n,a.pos+=n}if(!m)break;if(l+=n+1,"\t"==m[0]){var p=a.cm.options.tabSize,q=p-a.col%p,o=k.appendChild(Pe("span",Ee(q),"cm-tab"));o.setAttribute("role","presentation"),o.setAttribute("cm-text","\t"),a.col+=q}else if("\r"==m[0]||"\n"==m[0]){var o=k.appendChild(Pe("span","\r"==m[0]?"␍":"␤","cm-invalidchar"));o.setAttribute("cm-text",m[0]),a.col+=1}else{var o=a.cm.options.specialCharPlaceholder(m[0]);o.setAttribute("cm-text",m[0]),sf&&tf<9?k.appendChild(Pe("span",[o])):k.appendChild(o),a.col+=1}a.map.push(a.pos,a.pos+1,o),a.pos++}else{a.col+=b.length;var k=document.createTextNode(h);a.map.push(a.pos,a.pos+b.length,k),sf&&tf<9&&(j=!0),a.pos+=b.length}if(c||d||e||j||g){var r=c||"";d&&(r+=d),e&&(r+=e);var s=Pe("span",[k],r,g);return f&&(s.title=f),a.content.appendChild(s)}a.content.appendChild(k)}}function Od(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":" ";return b+=" "}function Pd(a,b){return function(c,d,e,f,g,h,i){e=e?e+" cm-force-border":"cm-force-border";for(var j=c.pos,k=j+d.length;;){for(var l=0;l<b.length;l++){var m=b[l];if(m.to>j&&m.from<=j)break}if(m.to>=k)return a(c,d,e,f,g,h,i);a(c,d.slice(0,m.to-j),e,f,null,h,i),f=null,d=d.slice(m.to-j),j=m.to}}}function Qd(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e),!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id)),e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e)),a.pos+=b}function Rd(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m,n=e.length,o=0,p=1,q="",r=0;;){if(r==o){i=j=k=l=h="",m=null,r=1/0;for(var s,t=[],u=0;u<d.length;++u){var v=d[u],w=v.marker;"bookmark"==w.type&&v.from==o&&w.widgetNode?t.push(w):v.from<=o&&(null==v.to||v.to>o||w.collapsed&&v.to==o&&v.from==o)?(null!=v.to&&v.to!=o&&r>v.to&&(r=v.to,j=""),w.className&&(i+=" "+w.className),w.css&&(h=(h?h+";":"")+w.css),w.startStyle&&v.from==o&&(k+=" "+w.startStyle),w.endStyle&&v.to==r&&(s||(s=[])).push(w.endStyle,v.to),w.title&&!l&&(l=w.title),w.collapsed&&(!m||md(m.marker,w)<0)&&(m=v)):v.from>o&&r>v.from&&(r=v.from)}if(s)for(var u=0;u<s.length;u+=2)s[u+1]==r&&(j+=" "+s[u]);if(!m||m.from==o)for(var u=0;u<t.length;++u)Qd(b,0,t[u]);if(m&&(m.from||0)==o){if(Qd(b,(null==m.to?n+1:m.to)-o,m.marker,null==m.from),null==m.to)return;m.to==o&&(m=!1)}}if(o>=n)break;for(var x=Math.min(n,r);;){if(q){var y=o+q.length;if(!m){var z=y>x?q.slice(0,x-o):q;b.addToken(b,z,g?g+i:i,k,o+z.length==r?j:"",l,h)}if(y>=x){q=q.slice(x-o),o=x;break}o=y,k=""}q=e.slice(f,f=c[p++]),g=Kd(c[p++],b.cm.options)}}else for(var p=1;p<c.length;p+=2)b.addToken(b,e.slice(f,f=c[p]),Kd(c[p+1],b.cm.options))}function Sd(a,b){return 0==b.from.ch&&0==b.to.ch&&""==Fe(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Td(a,b,c,d){function e(a){return c?c[a]:null}function f(a,c,e){Ad(a,c,e,d),xe(a,"change",a,b)}function g(a,b){for(var c=a,f=[];c<b;++c)f.push(new tg(j[c],e(c),d));return f}var h=b.from,i=b.to,j=b.text,k=Yd(a,h.line),l=Yd(a,i.line),m=Fe(j),n=e(j.length-1),o=i.line-h.line;if(b.full)a.insert(0,g(0,j.length)),a.remove(j.length,a.size-j.length);else if(Sd(a,b)){var p=g(0,j.length-1);f(l,l.text,n),o&&a.remove(h.line,o),p.length&&a.insert(h.line,p)}else if(k==l)if(1==j.length)f(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{var p=g(1,j.length-1);p.push(new tg(m+k.text.slice(i.ch),n,d)),f(k,k.text.slice(0,h.ch)+j[0],e(0)),a.insert(h.line+1,p)}else if(1==j.length)f(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),e(0)),a.remove(h.line+1,o);else{f(k,k.text.slice(0,h.ch)+j[0],e(0)),f(l,m+l.text.slice(i.ch),n);var p=g(1,j.length-1);o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,p)}xe(a,"change",a,b)}function Ud(a){this.lines=a,this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Vd(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize(),c+=e.height,e.parent=this}this.size=b,this.height=c,this.parent=null}function Wd(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;c&&!i||(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function Xd(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,g(a),c(a),a.options.lineWrapping||m(a),a.options.mode=b.modeOption,Jb(a)}function Yd(a,b){if(b-=a.first,b<0||b>=a.size)throw new Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function Zd(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function $d(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function _d(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function ae(a){if(null==a.parent)return null;for(var b=a.parent,c=Ge(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function be(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f,c+=e.chunkSize()}return c}while(!a.lines);for(var d=0;d<a.lines.length;++d){var g=a.lines[d],h=g.height;if(b<h)break;b-=h}return c+d}function ce(a){a=rd(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;b+=e.height}for(var f=c.parent;f;c=f,f=c.parent)for(var d=0;d<f.children.length;++d){var g=f.children[d];if(g==c)break;b+=g.height}return b}function de(a){var b=a.order;return null==b&&(b=a.order=gh(a.text)),b}function ee(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function fe(a,b){var c={from:V(b.from),to:$f(b),text:Zd(a,b.from,b.to)};return me(a,c,b.from.line,b.to.line+1),Wd(a,function(a){me(a,c,b.from.line,b.to.line+1)},!0),c}function ge(a){for(;a.length;){var b=Fe(a);if(!b.ranges)break;a.pop()}}function he(a,b){return b?(ge(a.done),Fe(a.done)):a.done.length&&!Fe(a.done).ranges?Fe(a.done):a.done.length>1&&!a.done[a.done.length-2].ranges?(a.done.pop(),Fe(a.done)):void 0}function ie(a,b,c,d){var e=a.history;e.undone.length=0;var f,g=+new Date;if((e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>g-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))&&(f=he(e,e.lastOp==d))){var h=Fe(f.changes);0==Mf(b.from,b.to)&&0==Mf(b.from,h.to)?h.to=$f(b):f.changes.push(fe(a,b))}else{var i=Fe(e.done);for(i&&i.ranges||le(a.sel,e.done),f={changes:[fe(a,b)],generation:e.generation},e.done.push(f);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(c),e.generation=++e.maxGeneration,e.lastModTime=e.lastSelTime=g,e.lastOp=e.lastSelOp=d,e.lastOrigin=e.lastSelOrigin=b.origin,h||Gg(a,"historyAdded")}function je(a,b,c,d){var e=b.charAt(0);return"*"==e||"+"==e&&c.ranges.length==d.ranges.length&&c.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function ke(a,b,c,d){var e=a.history,f=d&&d.origin;c==e.lastSelOp||f&&e.lastSelOrigin==f&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==f||je(a,f,Fe(e.done),b))?e.done[e.done.length-1]=b:le(b,e.done),e.lastSelTime=+new Date,e.lastSelOrigin=f,e.lastSelOp=c,d&&d.clearRedo!==!1&&ge(e.undone)}function le(a,b){var c=Fe(b);c&&c.ranges&&c.equals(a)||b.push(a)}function me(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function ne(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function oe(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(ne(c[d]));return e}function pe(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?ka.prototype.deepCopy.call(f):f);else{var g=f.changes,h=[];e.push({changes:h});for(var i=0;i<g.length;++i){var j,k=g[i];if(h.push({from:k.from,to:k.to,text:k.text}),b)for(var l in k)(j=l.match(/^spans_(\d+)$/))&&Ge(b,Number(j[1]))>-1&&(Fe(h)[l]=k[l],delete k[l])}}}return e}function qe(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function re(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)qe(f.ranges[h].anchor,b,c,d),qe(f.ranges[h].head,b,c,d)}else{for(var h=0;h<f.changes.length;++h){var i=f.changes[h];if(c<i.from.line)i.from=Lf(i.from.line+d,i.from.ch),i.to=Lf(i.to.line+d,i.to.ch);else if(b<=i.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function se(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;re(a.done,c,d,e),re(a.undone,c,d,e)}function te(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function ue(a){return a.target||a.srcElement}function ve(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Df&&a.ctrlKey&&1==b&&(b=3),b}function we(a,b,c){var d=a._handlers&&a._handlers[b];return c?d&&d.length>0?d.slice():Eg:d||Eg}function xe(a,b){function c(a){return function(){a.apply(null,f)}}var d=we(a,b,!1);if(d.length){var e,f=Array.prototype.slice.call(arguments,2);Sf?e=Sf.delayedCallbacks:Hg?e=Hg:(e=Hg=[],setTimeout(ye,0));for(var g=0;g<d.length;++g)e.push(c(d[g]))}}function ye(){var a=Hg;Hg=null;for(var b=0;b<a.length;++b)a[b]()}function ze(a,b,c){return"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}}),Gg(a,c||b.type,a,b),te(b)||b.codemirrorIgnore}function Ae(a){var b=a._handlers&&a._handlers.cursorActivity;if(b)for(var c=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<b.length;++d)Ge(c,b[d])==-1&&c.push(b[d])}function Be(a,b){return we(a,b).length>0}function Ce(a){a.prototype.on=function(a,b){Dg(this,a,b)},a.prototype.off=function(a,b){Fg(this,a,b)}}function De(){this.id=null}function Ee(a){for(;Pg.length<=a;)Pg.push(Fe(Pg)+" ");return Pg[a]}function Fe(a){return a[a.length-1]}function Ge(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function He(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function Ie(){}function Je(a,b){var c;return Object.create?c=Object.create(a):(Ie.prototype=a,c=new Ie),b&&Ke(b,c),c}function Ke(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||c===!1&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function Le(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Me(a,b){return b?!!(b.source.indexOf("\\w")>-1&&Tg(a))||b.test(a):Tg(a)}function Ne(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Oe(a){return a.charCodeAt(0)>=768&&Ug.test(a);
}function Pe(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)e.appendChild(document.createTextNode(b));else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function Qe(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function Re(a,b){return Qe(a).appendChild(b)}function Se(){for(var a=document.activeElement;a&&a.root&&a.root.activeElement;)a=a.root.activeElement;return a}function Te(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function Ue(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Te(c[d]).test(b)&&(b+=" "+c[d]);return b}function Ve(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function We(){$g||(Xe(),$g=!0)}function Xe(){var a;Dg(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null,Ve(Sb)},100))}),Dg(window,"blur",function(){Ve(rc)})}function Ye(a){if(null==Wg){var b=Pe("span","​");Re(a,Pe("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Wg=b.offsetWidth<=1&&b.offsetHeight>2&&!(sf&&tf<8))}var c=Wg?Pe("span","​"):Pe("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}function Ze(a){if(null!=Xg)return Xg;var b=Re(a,document.createTextNode("AخA")),c=Rg(b,0,1).getBoundingClientRect();if(!c||c.left==c.right)return!1;var d=Rg(b,1,2).getBoundingClientRect();return Xg=d.right-c.right<3}function $e(a){if(null!=dh)return dh;var b=Re(a,Pe("span","x")),c=b.getBoundingClientRect(),d=Rg(b,0,1).getBoundingClientRect();return dh=Math.abs(c.left-d.left)>1}function _e(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0)}e||d(b,c,"ltr")}function af(a){return a.level%2?a.to:a.from}function bf(a){return a.level%2?a.from:a.to}function cf(a){var b=de(a);return b?af(b[0]):0}function df(a){var b=de(a);return b?bf(Fe(b)):a.text.length}function ef(a,b){var c=Yd(a.doc,b),d=rd(c);d!=c&&(b=ae(d));var e=de(d),f=e?e[0].level%2?df(d):cf(d):0;return Lf(b,f)}function ff(a,b){for(var c,d=Yd(a.doc,b);c=pd(d);)d=c.find(1,!0).line,b=null;var e=de(d),f=e?e[0].level%2?cf(d):df(d):d.text.length;return Lf(null==b?ae(d):b,f)}function gf(a,b){var c=ef(a,b.line),d=Yd(a.doc,c.line),e=de(d);if(!e||0==e[0].level){var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;return Lf(c.line,g?0:f)}return c}function hf(a,b,c){var d=a[0].level;return b==d||c!=d&&b<c}function jf(a,b){fh=null;for(var c,d=0;d<a.length;++d){var e=a[d];if(e.from<b&&e.to>b)return d;if(e.from==b||e.to==b){if(null!=c)return hf(a,e.level,a[c].level)?(e.from!=e.to&&(fh=c),d):(e.from!=e.to&&(fh=d),c);c=d}}return c}function kf(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&Oe(a.text.charAt(b)));return b}function lf(a,b,c,d){var e=de(a);if(!e)return mf(a,b,c,d);for(var f=jf(e,b),g=e[f],h=kf(a,b,g.level%2?-c:c,d);;){if(h>g.from&&h<g.to)return h;if(h==g.from||h==g.to)return jf(e,h)==f?h:(g=e[f+=c],c>0==g.level%2?g.to:g.from);if(g=e[f+=c],!g)return null;h=c>0==g.level%2?kf(a,g.to,-1,d):kf(a,g.from,1,d)}}function mf(a,b,c,d){var e=b+c;if(d)for(;e>0&&Oe(a.text.charAt(e));)e+=c;return e<0||e>a.text.length?null:e}var nf=navigator.userAgent,of=navigator.platform,pf=/gecko\/\d/i.test(nf),qf=/MSIE \d/.test(nf),rf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nf),sf=qf||rf,tf=sf&&(qf?document.documentMode||6:rf[1]),uf=/WebKit\//.test(nf),vf=uf&&/Qt\/\d+\.\d+/.test(nf),wf=/Chrome\//.test(nf),xf=/Opera\//.test(nf),yf=/Apple Computer/.test(navigator.vendor),zf=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(nf),Af=/PhantomJS/.test(nf),Bf=/AppleWebKit/.test(nf)&&/Mobile\/\w+/.test(nf),Cf=Bf||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(nf),Df=Bf||/Mac/.test(of),Ef=/\bCrOS\b/.test(nf),Ff=/win/i.test(of),Gf=xf&&nf.match(/Version\/(\d*\.\d*)/);Gf&&(Gf=Number(Gf[1])),Gf&&Gf>=15&&(xf=!1,uf=!0);var Hf=Df&&(vf||xf&&(null==Gf||Gf<12.11)),If=pf||sf&&tf>=9,Jf=!1,Kf=!1;p.prototype=Ke({update:function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0";var e=a.viewHeight-(b?d:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+e)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(b){this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px";var f=a.viewWidth-a.barLeft-(c?d:0);this.horiz.firstChild.style.width=a.scrollWidth-a.clientWidth+f+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?d:0,bottom:b?d:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var a=Df&&!zf?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new De,this.disableVert=new De},enableZeroWidthBar:function(a,b){function c(){var d=a.getBoundingClientRect(),e=document.elementFromPoint(d.left+1,d.bottom-1);e!=a?a.style.pointerEvents="none":b.set(1e3,c)}a.style.pointerEvents="auto",b.set(1e3,c)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)}},p.prototype),q.prototype=Ke({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},q.prototype),a.scrollbarModel={native:p,null:q},z.prototype.signal=function(a,b){Be(a,b)&&this.events.push(arguments)},z.prototype.finish=function(){for(var a=0;a<this.events.length;a++)Gg.apply(null,this.events[a])};var Lf=a.Pos=function(a,b){return this instanceof Lf?(this.line=a,void(this.ch=b)):new Lf(a,b)},Mf=a.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch},Nf=null;ca.prototype=Ke({init:function(a){function b(a){if(!ze(d,a)){if(d.somethingSelected())Nf=d.getSelections(),c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,f.value=Nf.join("\n"),Qg(f));else{if(!d.options.lineWiseCopyCut)return;var b=aa(d);Nf=b.text,"cut"==a.type?d.setSelections(b.ranges,null,Kg):(c.prevInput="",f.value=b.text.join("\n"),Qg(f))}"cut"==a.type&&(d.state.cutIncoming=!0)}}var c=this,d=this.cm,e=this.wrapper=da(),f=this.textarea=e.firstChild;a.wrapper.insertBefore(e,a.wrapper.firstChild),Bf&&(f.style.width="0px"),Dg(f,"input",function(){sf&&tf>=9&&c.hasSelection&&(c.hasSelection=null),c.poll()}),Dg(f,"paste",function(a){ze(d,a)||$(a,d)||(d.state.pasteIncoming=!0,c.fastPoll())}),Dg(f,"cut",b),Dg(f,"copy",b),Dg(a.scroller,"paste",function(b){Tb(a,b)||ze(d,b)||(d.state.pasteIncoming=!0,c.focus())}),Dg(a.lineSpace,"selectstart",function(b){Tb(a,b)||Ag(b)}),Dg(f,"compositionstart",function(){var a=d.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:a,range:d.markText(a,d.getCursor("to"),{className:"CodeMirror-composing"})}}),Dg(f,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},prepareSelection:function(){var a=this.cm,b=a.display,c=a.doc,d=Ja(a);if(a.options.moveInputWithCursor){var e=nb(a,c.sel.primary().head,"div"),f=b.wrapper.getBoundingClientRect(),g=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,e.top+g.top-f.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,e.left+g.left-f.left))}return d},showSelection:function(a){var b=this.cm,c=b.display;Re(c.cursorDiv,a.cursors),Re(c.selectionDiv,a.selection),null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(a){if(!this.contextMenuPending){var b,c,d=this.cm,e=d.doc;if(d.somethingSelected()){this.prevInput="";var f=e.sel.primary();b=ch&&(f.to().line-f.from().line>100||(c=d.getSelection()).length>1e3);var g=b?"-":c||d.getSelection();this.textarea.value=g,d.state.focused&&Qg(this.textarea),sf&&tf>=9&&(this.hasSelection=g)}else a||(this.prevInput=this.textarea.value="",sf&&tf>=9&&(this.hasSelection=null));this.inaccurateSelection=b}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Cf||Se()!=this.textarea))try{this.textarea.focus()}catch(a){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function a(){var d=c.poll();d||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0,c.polling.set(20,a)},poll:function(){var a=this.cm,b=this.textarea,c=this.prevInput;if(this.contextMenuPending||!a.state.focused||bh(b)&&!c&&!this.composing||a.isReadOnly()||a.options.disableInput||a.state.keySeq)return!1;var d=b.value;if(d==c&&!a.somethingSelected())return!1;if(sf&&tf>=9&&this.hasSelection===d||Df&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var e=d.charCodeAt(0);if(8203!=e||c||(c="​"),8666==e)return this.reset(),this.cm.execCommand("undo")}for(var f=0,g=Math.min(c.length,d.length);f<g&&c.charCodeAt(f)==d.charCodeAt(f);)++f;var h=this;return Db(a,function(){Z(a,d.slice(f),c.length-f,null,h.composing?"*compose":null),d.length>1e3||d.indexOf("\n")>-1?b.value=h.prevInput="":h.prevInput=d,h.composing&&(h.composing.range.clear(),h.composing.range=a.markText(h.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){sf&&tf>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b="​"+(a?g.value:"");g.value="⇚",g.value=b,d.prevInput=a?"":"​",g.selectionStart=1,g.selectionEnd=b.length,f.selForContextMenu=e.doc.sel}}function c(){if(d.contextMenuPending=!1,d.wrapper.style.cssText=l,g.style.cssText=k,sf&&tf<9&&f.scrollbars.setScrollTop(f.scroller.scrollTop=i),null!=g.selectionStart){(!sf||sf&&tf<9)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&g.selectionEnd>0&&"​"==d.prevInput?Eb(e,jg.selectAll)(e):a++<10?f.detectingSelectAll=setTimeout(c,500):f.input.reset()};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=Ub(e,a),i=f.scroller.scrollTop;if(h&&!xf){var j=e.options.resetSelectionOnContextMenu;j&&e.doc.sel.contains(h)==-1&&Eb(e,Aa)(e.doc,na(h),Kg);var k=g.style.cssText,l=d.wrapper.style.cssText;d.wrapper.style.cssText="position: absolute";var m=d.wrapper.getBoundingClientRect();if(g.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(a.clientY-m.top-5)+"px; left: "+(a.clientX-m.left-5)+"px; z-index: 1000; background: "+(sf?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",uf)var n=window.scrollY;if(f.input.focus(),uf&&window.scrollTo(null,n),f.input.reset(),e.somethingSelected()||(g.value=d.prevInput=" "),d.contextMenuPending=!0,f.selForContextMenu=e.doc.sel,clearTimeout(f.detectingSelectAll),sf&&tf>=9&&b(),If){Cg(a);var o=function(){Fg(window,"mouseup",o),setTimeout(c,20)};Dg(window,"mouseup",o)}else setTimeout(c,50)}},readOnlyChanged:function(a){a||this.reset()},setUneditable:Ie,needsContentAttribute:!1},ca.prototype),ea.prototype=Ke({init:function(a){function b(a){if(!ze(d,a)){if(d.somethingSelected())Nf=d.getSelections(),"cut"==a.type&&d.replaceSelection("",null,"cut");else{if(!d.options.lineWiseCopyCut)return;var b=aa(d);Nf=b.text,"cut"==a.type&&d.operation(function(){d.setSelections(b.ranges,0,Kg),d.replaceSelection("",null,"cut")})}if(a.clipboardData&&!Bf)a.preventDefault(),a.clipboardData.clearData(),a.clipboardData.setData("text/plain",Nf.join("\n"));else{var c=da(),e=c.firstChild;d.display.lineSpace.insertBefore(c,d.display.lineSpace.firstChild),e.value=Nf.join("\n");var f=document.activeElement;Qg(e),setTimeout(function(){d.display.lineSpace.removeChild(c),f.focus()},50)}}}var c=this,d=c.cm,e=c.div=a.lineDiv;ba(e),Dg(e,"paste",function(a){ze(d,a)||$(a,d)}),Dg(e,"compositionstart",function(a){var b=a.data;if(c.composing={sel:d.doc.sel,data:b,startData:b},b){var e=d.doc.sel.primary(),f=d.getLine(e.head.line),g=f.indexOf(b,Math.max(0,e.head.ch-b.length));g>-1&&g<=e.head.ch&&(c.composing.sel=na(Lf(e.head.line,g),Lf(e.head.line,g+b.length)))}}),Dg(e,"compositionupdate",function(a){c.composing.data=a.data}),Dg(e,"compositionend",function(a){var b=c.composing;b&&(a.data==b.startData||/\u200b/.test(a.data)||(b.data=a.data),setTimeout(function(){b.handled||c.applyComposition(b),c.composing==b&&(c.composing=null)},50))}),Dg(e,"touchstart",function(){c.forceCompositionEnd()}),Dg(e,"input",function(){c.composing||!d.isReadOnly()&&c.pollContent()||Db(c.cm,function(){Jb(d)})}),Dg(e,"copy",b),Dg(e,"cut",b)},prepareSelection:function(){var a=Ja(this.cm,!1);return a.focus=this.cm.state.focused,a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),this.showMultipleSelections(a))},showPrimarySelection:function(){var a=window.getSelection(),b=this.cm.doc.sel.primary(),c=ha(this.cm,a.anchorNode,a.anchorOffset),d=ha(this.cm,a.focusNode,a.focusOffset);if(!c||c.bad||!d||d.bad||0!=Mf(X(c,d),b.from())||0!=Mf(W(c,d),b.to())){var e=fa(this.cm,b.from()),f=fa(this.cm,b.to());if(e||f){var g=this.cm.display.view,h=a.rangeCount&&a.getRangeAt(0);if(e){if(!f){var i=g[g.length-1].measure,j=i.maps?i.maps[i.maps.length-1]:i.map;f={node:j[j.length-1],offset:j[j.length-2]-j[j.length-3]}}}else e={node:g[0].measure.map[2],offset:0};try{var k=Rg(e.node,e.offset,f.offset,f.node)}catch(a){}k&&(!pf&&this.cm.state.focused?(a.collapse(e.node,e.offset),k.collapsed||a.addRange(k)):(a.removeAllRanges(),a.addRange(k)),h&&null==a.anchorNode?a.addRange(h):pf&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(a){Re(this.cm.display.cursorDiv,a.cursors),Re(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=window.getSelection();if(!a.rangeCount)return!1;var b=a.getRangeAt(0).commonAncestorContainer;return Vg(this.div,b)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():Db(this.cm,function(){b.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;this.rememberSelection();var c=ha(b,a.anchorNode,a.anchorOffset),d=ha(b,a.focusNode,a.focusOffset);c&&d&&Db(b,function(){Aa(b.doc,na(c,d),Kg),(c.bad||d.bad)&&(b.curOp.selectionChanged=!0)})}},pollContent:function(){var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),e=c.to();if(d.line<b.viewFrom||e.line>b.viewTo-1)return!1;var f;if(d.line==b.viewFrom||0==(f=Mb(a,d.line)))var g=ae(b.view[0].line),h=b.view[0].node;else var g=ae(b.view[f].line),h=b.view[f-1].node.nextSibling;var i=Mb(a,e.line);if(i==b.view.length-1)var j=b.viewTo-1,k=b.lineDiv.lastChild;else var j=ae(b.view[i+1].line)-1,k=b.view[i+1].node.previousSibling;for(var l=a.doc.splitLines(ja(a,h,k,g,j)),m=Zd(a.doc,Lf(g,0),Lf(j,Yd(a.doc,j).text.length));l.length>1&&m.length>1;)if(Fe(l)==Fe(m))l.pop(),m.pop(),j--;else{if(l[0]!=m[0])break;l.shift(),m.shift(),g++}for(var n=0,o=0,p=l[0],q=m[0],r=Math.min(p.length,q.length);n<r&&p.charCodeAt(n)==q.charCodeAt(n);)++n;for(var s=Fe(l),t=Fe(m),u=Math.min(s.length-(1==l.length?n:0),t.length-(1==m.length?n:0));o<u&&s.charCodeAt(s.length-o-1)==t.charCodeAt(t.length-o-1);)++o;l[l.length-1]=s.slice(0,s.length-o),l[0]=l[0].slice(n);var v=Lf(g,n),w=Lf(j,m.length?Fe(m).length-o:0);return l.length>1||l[0]||Mf(v,w)?(Fc(a.doc,l,v,w,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){this.cm.isReadOnly()?Eb(this.cm,Jb)(this.cm):a.data&&a.data!=a.startData&&Eb(this.cm,Z)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.contentEditable="false"},onKeyPress:function(a){a.preventDefault(),this.cm.isReadOnly()||Eb(this.cm,Z)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},readOnlyChanged:function(a){this.div.contentEditable=String("nocursor"!=a)},onContextMenu:Ie,resetPosition:Ie,needsContentAttribute:!0},ea.prototype),a.inputStyles={textarea:ca,contenteditable:ea},ka.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=Mf(c.anchor,d.anchor)||0!=Mf(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new la(V(this.ranges[b].anchor),V(this.ranges[b].head));return new ka(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(Mf(b,d.from())>=0&&Mf(a,d.to())<=0)return c}return-1}},la.prototype={from:function(){return X(this.anchor,this.head)},to:function(){return W(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Of,Pf,Qf,Rf={left:0,right:0,top:0,bottom:0},Sf=null,Tf=0,Uf=0,Vf=0,Wf=null;sf?Wf=-.53:pf?Wf=15:wf?Wf=-.7:yf&&(Wf=-1/3);var Xf=function(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;return null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail),null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta),{x:b,y:c}};a.wheelEventPixels=function(a){var b=Xf(a);return b.x*=Wf,b.y*=Wf,b};var Yf=new De,Zf=null,$f=a.changeEnd=function(a){return a.text?Lf(a.from.line+a.text.length-1,Fe(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.prototype={constructor:a,focus:function(){window.focus(),this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];c[a]==b&&"mode"!=a||(c[a]=b,ag.hasOwnProperty(a)&&Eb(this,ag[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](Uc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:Fb(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,Jb(this)}),removeOverlay:Fb(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,void Jb(this)}}),indentLine:Fb(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),ra(this.doc,a)&&Nc(this,a,b,c)}),indentSelection:Fb(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Nc(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Lc(this));else{var f=e.from(),g=e.to(),h=Math.max(c,f.line);c=Math.min(this.lastLine(),g.line-(g.ch?0:1))+1;for(var i=h;i<c;++i)Nc(this,i,a);var j=this.doc.sel.ranges;0==f.ch&&b.length==j.length&&j[d].from().ch>0&&wa(this.doc,d,new la(f,j[d].to()),Kg)}}}),getTokenAt:function(a,b){return Fd(this,a,b)},getLineTokens:function(a,b){return Fd(this,Lf(a),b,!0)},getTokenTypeAt:function(a){a=pa(this.doc,a);var b,c=Id(this,Yd(this.doc,a.line)),d=0,e=(c.length-1)/2,f=a.ch;if(0==f)b=c[2];else for(;;){var g=d+e>>1;if((g?c[2*g-1]:0)>=f)e=g;else{if(!(c[2*g+1]<f)){b=c[2*g+2];break}d=g+1}}var h=b?b.indexOf("cm-overlay "):-1;return h<0?b:0==h?null:b.slice(0,h-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!gg.hasOwnProperty(b))return c;var d=gg[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(var f=0;f<d._global.length;f++){var h=d._global[f];h.pred(e,this)&&Ge(c,h.val)==-1&&c.push(h.val)}return c},getStateAfter:function(a,b){var c=this.doc;return a=oa(c,null==a?c.first+c.size-1:a),Qa(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel.primary();return c=null==a?d.head:"object"==typeof a?pa(this.doc,a):a?d.from():d.to(),nb(this,c,b||"page")},charCoords:function(a,b){return mb(this,pa(this.doc,a),b||"page")},coordsChar:function(a,b){return a=lb(this,a,b||"page"),qb(this,a.left,a.top)},lineAtHeight:function(a,b){return a=lb(this,{top:a,left:0},b||"page").top,be(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c,d=!1;if("number"==typeof a){var e=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>e&&(a=e,d=!0),c=Yd(this.doc,a)}else c=a;return kb(this,c,{top:0,left:0},b||"page").top+(d?this.doc.height-ce(c):0)},defaultTextHeight:function(){return sb(this.display)},defaultCharWidth:function(){return tb(this.display)},setGutterMarker:Fb(function(a,b,c){return Oc(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&Ne(d)&&(a.gutterMarkers=null),!0})}),clearGutter:Fb(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Kb(b,d,"gutter"),Ne(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),lineInfo:function(a){if("number"==typeof a){if(!ra(this.doc,a))return null;var b=a;if(a=Yd(this.doc,a),!a)return null}else{var b=ae(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=nb(this,pa(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",b.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(b),f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&Ic(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:Fb(lc),triggerOnKeyPress:Fb(oc),triggerOnKeyUp:nc,execCommand:function(a){if(jg.hasOwnProperty(a))return jg[a].call(null,this)},triggerElectric:Fb(function(a){_(this,a)}),findPosH:function(a,b,c,d){var e=1;b<0&&(e=-1,b=-b);for(var f=0,g=pa(this.doc,a);f<b&&(g=Qc(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:Fb(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Qc(c.doc,d.head,a,b,c.options.rtlMoveVisually):a<0?d.from():d.to()},Mg)}),deleteH:Fb(function(a,b){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):Pc(this,function(c){var e=Qc(d,c.head,a,b,!1);return a<0?{from:e,to:c.head}:{from:c.head,to:e}})}),findPosV:function(a,b,c,d){var e=1,f=d;b<0&&(e=-1,b=-b);for(var g=0,h=pa(this.doc,a);g<b;++g){var i=nb(this,h,"div");if(null==f?f=i.left:i.left=f,h=Rc(this,i,e,c),h.hitSide)break}return h},moveV:Fb(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return a<0?g.from():g.to();var h=nb(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn),e.push(h.left);var i=Rc(c,h,a,b);return"page"==b&&g==d.sel.primary()&&Kc(c,null,mb(c,i,"div").top-h.top),i},Mg),e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=this.doc,c=Yd(b,a.line).text,d=a.ch,e=a.ch;if(c){var f=this.getHelper(a,"wordChars");(a.xRel<0||e==c.length)&&d?--d:++e;for(var g=c.charAt(d),h=Me(g,f)?function(a){return Me(a,f)}:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Me(a)};d>0&&h(c.charAt(d-1));)--d;for(;e<c.length&&h(c.charAt(e));)++e}return new la(Lf(a.line,d),Lf(a.line,e))},toggleOverwrite:function(a){null!=a&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Zg(this.display.cursorDiv,"CodeMirror-overwrite"):Yg(this.display.cursorDiv,"CodeMirror-overwrite"),Gg(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Se()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Fb(function(a,b){null==a&&null==b||Mc(this),null!=a&&(this.curOp.scrollLeft=a),null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Ua(this)-this.display.barHeight,width:a.scrollWidth-Ua(this)-this.display.barWidth,clientHeight:Wa(this),clientWidth:Va(this)}},scrollIntoView:Fb(function(a,b){if(null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:Lf(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line)Mc(this),this.curOp.scrollToPos=a;else{var c=Jc(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:Fb(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a)),null!=b&&(d.display.wrapper.style.height=c(b)),d.options.lineWrapping&&gb(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Kb(d,e,"widget");break}++e}),d.curOp.forceUpdate=!0,Gg(d,"refresh",this)}),operation:function(a){return Db(this,a)},refresh:Fb(function(){var a=this.display.cachedTextHeight;Jb(this),this.curOp.forceUpdate=!0,hb(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),k(this),(null==a||Math.abs(a-sb(this.display))>.5)&&g(this),Gg(this,"refresh",this)}),swapDoc:Fb(function(a){var b=this.doc;return b.cm=null,Xd(this,a),hb(this),this.display.input.reset(),this.scrollTo(a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,xe(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ce(a);var _f=a.defaults={},ag=a.optionHandlers={},bg=a.Init={toString:function(){return"CodeMirror.Init"}};Sc("value","",function(a,b){a.setValue(b)},!0),Sc("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),Sc("indentUnit",2,c,!0),Sc("indentWithTabs",!1),Sc("smartIndent",!0),Sc("tabSize",4,function(a){d(a),hb(a),Jb(a)},!0),Sc("lineSeparator",null,function(a,b){if(a.doc.lineSep=b,b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(f==-1)break;e=f+b.length,c.push(Lf(d,f))}d++});for(var e=c.length-1;e>=0;e--)Fc(a.doc,b,c[e],Lf(c[e].line,c[e].ch+b.length))}}),Sc("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(b,c,d){b.state.specialChars=new RegExp(c.source+(c.test("\t")?"":"|\t"),"g"),d!=a.Init&&b.refresh()}),Sc("specialCharPlaceholder",Md,function(a){a.refresh()},!0),Sc("electricChars",!0),Sc("inputStyle",Cf?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Sc("rtlMoveVisually",!Ff),Sc("wholeLineUpdateBefore",!0),Sc("theme","default",function(a){h(a),i(a)},!0),Sc("keyMap","default",function(b,c,d){var e=Uc(c),f=d!=a.Init&&Uc(d);f&&f.detach&&f.detach(b,e),e.attach&&e.attach(b,f||null)}),Sc("extraKeys",null),Sc("lineWrapping",!1,e,!0),Sc("gutters",[],function(a){n(a.options),i(a)},!0),Sc("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?y(a.display)+"px":"0",a.refresh()},!0),Sc("coverGutterNextToScrollbar",!1,function(a){s(a)},!0),Sc("scrollbarStyle","native",function(a){r(a),s(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),Sc("lineNumbers",!1,function(a){n(a.options),i(a)},!0),Sc("firstLineNumber",1,i,!0),Sc("lineNumberFormatter",function(a){return a},i,!0),Sc("showCursorWhenSelecting",!1,Ia,!0),Sc("resetSelectionOnContextMenu",!0),Sc("lineWiseCopyCut",!0),Sc("readOnly",!1,function(a,b){"nocursor"==b?(rc(a),a.display.input.blur(),a.display.disabled=!0):a.display.disabled=!1,a.display.input.readOnlyChanged(b)}),Sc("disableInput",!1,function(a,b){b||a.display.input.reset()},!0),Sc("dragDrop",!0,Rb),Sc("allowDropFileTypes",null),Sc("cursorBlinkRate",530),Sc("cursorScrollMargin",0),Sc("cursorHeight",1,Ia,!0),Sc("singleCursorHeightPerLine",!0,Ia,!0),Sc("workTime",100),Sc("workDelay",100),Sc("flattenSpans",!0,d,!0),Sc("addModeClass",!1,d,!0),Sc("pollInterval",100),Sc("undoDepth",200,function(a,b){a.doc.history.undoDepth=b}),Sc("historyEventDelay",1250),Sc("viewportMargin",10,function(a){a.refresh()},!0),Sc("maxHighlightLength",1e4,d,!0),Sc("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()}),Sc("tabindex",null,function(a,b){a.display.input.getField().tabIndex=b||""}),Sc("autofocus",null);var cg=a.modes={},dg=a.mimeModes={};a.defineMode=function(b,c){a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2&&(c.dependencies=Array.prototype.slice.call(arguments,2)),cg[b]=c},a.defineMIME=function(a,b){dg[a]=b},a.resolveMode=function(b){if("string"==typeof b&&dg.hasOwnProperty(b))b=dg[b];else if(b&&"string"==typeof b.name&&dg.hasOwnProperty(b.name)){var c=dg[b.name];"string"==typeof c&&(c={name:c}),b=Je(c,b),b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");
return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=cg[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(eg.hasOwnProperty(c.name)){var f=eg[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}if(e.name=c.name,c.helperType&&(e.helperType=c.helperType),c.modeProps)for(var g in c.modeProps)e[g]=c.modeProps[g];return e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var eg=a.modeExtensions={};a.extendMode=function(a,b){var c=eg.hasOwnProperty(a)?eg[a]:eg[a]={};Ke(b,c)},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){xg.prototype[a]=b},a.defineOption=Sc;var fg=[];a.defineInitHook=function(a){fg.push(a)};var gg=a.helpers={};a.registerHelper=function(b,c,d){gg.hasOwnProperty(b)||(gg[b]=a[b]={_global:[]}),gg[b][c]=d},a.registerGlobalHelper=function(b,c,d,e){a.registerHelper(b,c,e),gg[b]._global.push({pred:d,val:e})};var hg=a.copyState=function(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c},ig=a.startState=function(a,b,c){return!a.startState||a.startState(b,c)};a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state,a=c.mode}return c||{mode:a,state:b}};var jg=a.commands={selectAll:function(a){a.setSelection(Lf(a.firstLine(),0),Lf(a.lastLine()),Kg)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Kg)},killLine:function(a){Pc(a,function(b){if(b.empty()){var c=Yd(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:Lf(b.head.line+1,0)}:{from:b.head,to:Lf(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){Pc(a,function(b){return{from:Lf(b.from().line,0),to:pa(a.doc,Lf(b.to().line+1,0))}})},delLineLeft:function(a){Pc(a,function(a){return{from:Lf(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){Pc(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return{from:d,to:b.from()}})},delWrappedLineRight:function(a){Pc(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:d}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(Lf(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(Lf(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return ef(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return gf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){return ff(a,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},Mg)},goLineLeft:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},Mg)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return d.ch<a.getLine(d.line).search(/\S/)?gf(a,b.head):d},Mg)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),g=Ng(a.getLine(f.line),f.ch,d);b.push(new Array(d-g%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){Db(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=Yd(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new Lf(e.line,e.ch-1)),e.ch>0)e=new Lf(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),Lf(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=Yd(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),Lf(e.line-1,g.length-1),Lf(e.line,1),"+transpose")}c.push(new la(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){Db(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange(a.doc.lineSeparator(),d.anchor,d.head,"+input"),a.indentLine(d.from().line+1,null,!0)}Lc(a)})},toggleOverwrite:function(a){a.toggleOverwrite()}},kg=a.keyMap={};kg.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},kg.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},kg.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},kg.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},kg.default=Df?kg.macDefault:kg.pcDefault,a.normalizeKeyMap=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if("..."==d){delete a[c];continue}for(var e=He(c.split(" "),Tc),f=0;f<e.length;f++){var g,h;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var i=b[h];if(i){if(i!=g)throw new Error("Inconsistent bindings for "+h)}else b[h]=g}delete a[c]}for(var j in b)a[j]=b[j];return a};var lg=a.lookupKey=function(a,b,c,d){b=Uc(b);var e=b.call?b.call(a,d):b[a];if(e===!1)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return lg(a,b.fallthrough,c,d);for(var f=0;f<b.fallthrough.length;f++){var g=lg(a,b.fallthrough[f],c,d);if(g)return g}}},mg=a.isModifierKey=function(a){var b="string"==typeof a?a:eh[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b},ng=a.keyName=function(a,b){if(xf&&34==a.keyCode&&a.char)return!1;var c=eh[a.keyCode],d=c;return null!=d&&!a.altGraphKey&&(a.altKey&&"Alt"!=c&&(d="Alt-"+d),(Hf?a.metaKey:a.ctrlKey)&&"Ctrl"!=c&&(d="Ctrl-"+d),(Hf?a.ctrlKey:a.metaKey)&&"Cmd"!=c&&(d="Cmd-"+d),!b&&a.shiftKey&&"Shift"!=c&&(d="Shift-"+d),d)};a.fromTextArea=function(b,c){function d(){b.value=i.getValue()}if(c=c?Ke(c):{},c.value=b.value,!c.tabindex&&b.tabIndex&&(c.tabindex=b.tabIndex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=Se();c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(Dg(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var f=b.form,g=f.submit;try{var h=f.submit=function(){d(),f.submit=g,f.submit(),f.submit=h}}catch(a){}}c.finishInit=function(a){a.save=d,a.getTextArea=function(){return b},a.toTextArea=function(){a.toTextArea=isNaN,d(),b.parentNode.removeChild(a.getWrapperElement()),b.style.display="",b.form&&(Fg(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=g))}},b.style.display="none";var i=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return i};var og=a.StringStream=function(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};og.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));if(c)return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1)return this.pos=b,!0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ng(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ng(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Ng(this.string,null,this.tabSize)-(this.lineStart?Ng(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);if(e(f)==e(a))return b!==!1&&(this.pos+=a.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var pg=0,qg=a.TextMarker=function(a,b){this.lines=[],this.type=b,this.doc=a,this.id=++pg};Ce(qg),qg.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&ub(a),Be(this,"clear")){var c=this.find();c&&xe(this,"clear",c.from,c.to)}for(var d=null,e=null,f=0;f<this.lines.length;++f){var g=this.lines[f],h=_c(g.markedSpans,this);a&&!this.collapsed?Kb(a,ae(g),"text"):a&&(null!=h.to&&(e=ae(g)),null!=h.from&&(d=ae(g))),g.markedSpans=ad(g.markedSpans,h),null==h.from&&this.collapsed&&!vd(this.doc,g)&&a&&_d(g,sb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var i=rd(this.lines[f]),j=l(i);j>a.display.maxLineLength&&(a.display.maxLine=i,a.display.maxLineLength=j,a.display.maxLineChanged=!0)}null!=d&&a&&this.collapsed&&Jb(a,d,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&Da(a.doc)),a&&xe(a,"markerCleared",a,this),b&&wb(a),this.parent&&this.parent.clear()}},qg.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=_c(f.markedSpans,this);if(null!=g.from&&(c=Lf(b?f:ae(f),g.from),a==-1))return c;if(null!=g.to&&(d=Lf(b?f:ae(f),g.to),1==a))return d}return c&&{from:c,to:d}},qg.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&Db(c,function(){var d=a.line,e=ae(a.line),f=_a(c,e);if(f&&(fb(f),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!vd(b.doc,d)&&null!=b.height){var g=b.height;b.height=null;var h=yd(b)-g;h&&_d(d,d.height+h)}})},qg.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&Ge(b.maybeHiddenMarkers,this)!=-1||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},qg.prototype.detachLine=function(a){if(this.lines.splice(Ge(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}};var pg=0,rg=a.SharedTextMarker=function(a,b){this.markers=a,this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};Ce(rg),rg.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();xe(this,"clear")}},rg.prototype.find=function(a,b){return this.primary.find(a,b)};var sg=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a,this.node=b};Ce(sg),sg.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=ae(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=yd(this);_d(c,Math.max(0,c.height-f)),a&&Db(a,function(){xd(a,c,-f),Kb(a,d,"widget")})}},sg.prototype.changed=function(){var a=this.height,b=this.doc.cm,c=this.line;this.height=null;var d=yd(this)-a;d&&(_d(c,c.height+d),b&&Db(b,function(){b.curOp.forceUpdate=!0,xd(b,c,d)}))};var tg=a.Line=function(a,b,c){this.text=a,jd(this,b),this.height=c?c(this):1};Ce(tg),tg.prototype.lineNo=function(){return ae(this)};var ug={},vg={};Ud.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height,Bd(e),xe(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0;d<b.length;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;a<d;++a)if(c(this.lines[a]))return!0}},Vd.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof Ud))){var h=[];this.collapse(h),this.children=[new Ud(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){if(e.insertInner(a,b,c),e.lines&&e.lines.length>50){for(;e.lines.length>50;){var g=e.lines.splice(e.lines.length-25,25),h=new Ud(g);e.height-=h.height,this.children.splice(d+1,0,h),h.parent=this}this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new Vd(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=Ge(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new Vd(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a);if(e.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=f}}};var wg=0,xg=a.Doc=function(a,b,c,d){if(!(this instanceof xg))return new xg(a,b,c,d);null==c&&(c=0),Vd.call(this,[new Ud([new tg("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=c;var e=Lf(c,0);this.sel=na(e),this.history=new ee(null),this.id=++wg,this.modeOption=b,this.lineSep=d,this.extend=!1,"string"==typeof a&&(a=this.splitLines(a)),Td(this,{from:e,to:e,text:a}),Aa(this,na(e),Kg)};xg.prototype=Je(Vd.prototype,{constructor:xg,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=$d(this,this.first,this.first+this.size);return a===!1?b:b.join(a||this.lineSeparator())},setValue:Gb(function(a){var b=Lf(this.first,0),c=this.first+this.size-1;zc(this,{from:b,to:Lf(c,Yd(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),Aa(this,na(b))}),replaceRange:function(a,b,c,d){b=pa(this,b),c=c?pa(this,c):b,Fc(this,a,b,c,d)},getRange:function(a,b,c){var d=Zd(this,pa(this,a),pa(this,b));return c===!1?d:d.join(c||this.lineSeparator())},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){if(ra(this,a))return Yd(this,a)},getLineNumber:function(a){return ae(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=Yd(this,a)),rd(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return pa(this,a)},getCursor:function(a){var b,c=this.sel.primary();return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||"to"==a||a===!1?c.to():c.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Gb(function(a,b,c){xa(this,pa(this,"number"==typeof a?Lf(a,b||0):a),null,c)}),setSelection:Gb(function(a,b,c){xa(this,pa(this,a),pa(this,b||a),c)}),extendSelection:Gb(function(a,b,c){ua(this,pa(this,a),b&&pa(this,b),c)}),extendSelections:Gb(function(a,b){va(this,sa(this,a),b)}),extendSelectionsBy:Gb(function(a,b){var c=He(this.sel.ranges,a);va(this,sa(this,c),b)}),setSelections:Gb(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new la(pa(this,a[d].anchor),pa(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex)),Aa(this,ma(e,b),c)}}),addSelection:Gb(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new la(pa(this,a),pa(this,b||a))),Aa(this,ma(d,d.length-1),c)}),getSelection:function(a){for(var b,c=this.sel.ranges,d=0;d<c.length;d++){var e=Zd(this,c[d].from(),c[d].to());b=b?b.concat(e):e}return a===!1?b:b.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Zd(this,c[d].from(),c[d].to());a!==!1&&(e=e.join(a||this.lineSeparator())),b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:Gb(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}for(var h=b&&"end"!=b&&xc(this,d,b),f=d.length-1;f>=0;f--)zc(this,d[f]);h?za(this,h):this.cm&&Lc(this.cm)}),undo:Gb(function(){Bc(this,"undo")}),redo:Gb(function(){Bc(this,"redo")}),undoSelection:Gb(function(){Bc(this,"undo",!0)}),redoSelection:Gb(function(){Bc(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(var d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new ee(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:pe(this.history.done),undone:pe(this.history.undone)}},setHistory:function(a){var b=this.history=new ee(this.history.maxGeneration);b.done=pe(a.done.slice(0),null,!0),b.undone=pe(a.undone.slice(0),null,!0)},addLineClass:Gb(function(a,b,c){return Oc(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[d]){if(Te(c).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:Gb(function(a,b,c){return Oc(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(Te(c));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),addLineWidget:Gb(function(a,b,c){return zd(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return Vc(this,pa(this,a),pa(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};return a=pa(this,a),Vc(this,a,a,c,"bookmark")},findMarksAt:function(a){a=pa(this,a);var b=[],c=Yd(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=pa(this,a),b=pa(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){var g=f.markedSpans;if(g)for(var h=0;h<g.length;h++){var i=g[h];null!=i.to&&e==a.line&&a.ch>=i.to||null==i.from&&e!=a.line||null!=i.from&&e==b.line&&i.from>=b.ch||c&&!c(i.marker)||d.push(i.marker.parent||i.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;return this.iter(function(e){var f=e.text.length+d;return f>a?(b=a,!0):(a-=f,void++c)}),pa(this,Lf(c,b))},indexFromPos:function(a){a=pa(this,a);var b=a.ch;if(a.line<this.first||a.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,a.line,function(a){b+=a.text.length+c}),b},copy:function(a){var b=new xg($d(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new xg($d(this,b,c),a.mode||this.modeOption,b,this.lineSep);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],Yc(d,Xc(this)),d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this),Zc(Xc(this));break}}if(b.history==this.history){var e=[b.id];Wd(b,function(a){e.push(a.id)},!0),b.history=new ee(null),b.history.done=pe(this.history.done,e),b.history.undone=pe(this.history.undone,e)}},iterLinkedDocs:function(a){Wd(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):ah(a)},lineSeparator:function(){return this.lineSep||"\n"}}),xg.prototype.eachLine=xg.prototype.iter;var yg="iter insert remove copy getEditor constructor".split(" ");for(var zg in xg.prototype)xg.prototype.hasOwnProperty(zg)&&Ge(yg,zg)<0&&(a.prototype[zg]=function(a){return function(){return a.apply(this.doc,arguments)}}(xg.prototype[zg]));Ce(xg);var Ag=a.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Bg=a.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},Cg=a.e_stop=function(a){Ag(a),Bg(a)},Dg=a.on=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}},Eg=[],Fg=a.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else for(var d=we(a,b,!1),e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}},Gg=a.signal=function(a,b){var c=we(a,b,!0);if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},Hg=null,Ig=30,Jg=a.Pass={toString:function(){return"CodeMirror.Pass"}},Kg={scroll:!1},Lg={origin:"*mouse"},Mg={origin:"+move"};De.prototype.set=function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)};var Ng=a.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),b==-1&&(b=a.length));for(var f=d||0,g=e||0;;){var h=a.indexOf("\t",f);if(h<0||h>=b)return g+(b-f);g+=h-f,g+=c-g%c,f=h+1}},Og=a.findColumn=function(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);f==-1&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);if(e+=f-d,e+=c-e%c,d=f+1,e>=b)return d}},Pg=[""],Qg=function(a){a.select()};Bf?Qg=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:sf&&(Qg=function(a){try{a.select()}catch(a){}});var Rg,Sg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Tg=a.isWordChar=function(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||Sg.test(a))},Ug=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Rg=document.createRange?function(a,b,c,d){var e=document.createRange();return e.setEnd(d||a,c),e.setStart(a,b),e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(a){return d}return d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d};var Vg=a.contains=function(a,b){if(3==b.nodeType&&(b=b.parentNode),a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)};sf&&tf<11&&(Se=function(){try{return document.activeElement}catch(a){return document.body}});var Wg,Xg,Yg=a.rmClass=function(a,b){var c=a.className,d=Te(b).exec(c);if(d){var e=c.slice(d.index+d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}},Zg=a.addClass=function(a,b){var c=a.className;Te(b).test(c)||(a.className+=(c?" ":"")+b)},$g=!1,_g=function(){if(sf&&tf<9)return!1;var a=Pe("div");return"draggable"in a||"dragDrop"in a}(),ah=a.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);e==-1&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");g!=-1?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},bh=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(a){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(a){}return!(!b||b.parentElement()!=a)&&0!=b.compareEndPoints("StartToEnd",b)},ch=function(){var a=Pe("div");return"oncopy"in a||(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),dh=null,eh=a.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var a=0;a<10;a++)eh[a+48]=eh[a+96]=String(a);for(var a=65;a<=90;a++)eh[a]=String.fromCharCode(a);for(var a=1;a<=12;a++)eh[a+111]=eh[a+63235]="F"+a}();var fh,gh=function(){function a(a){return a<=247?c.charAt(a):1424<=a&&a<=1524?"R":1536<=a&&a<=1773?d.charAt(a-1536):1774<=a&&a<=2220?"r":8192<=a&&a<=8203?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a,this.from=b,this.to=c}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,g=/[LRr]/,h=/[Lb1n]/,i=/[1n]/,j="L";return function(c){if(!e.test(c))return!1;for(var d,k=c.length,l=[],m=0;m<k;++m)l.push(d=a(c.charCodeAt(m)));for(var m=0,n=j;m<k;++m){var d=l[m];"m"==d?l[m]=n:n=d}for(var m=0,o=j;m<k;++m){
var d=l[m];"1"==d&&"r"==o?l[m]="n":g.test(d)&&(o=d,"r"==d&&(l[m]="R"))}for(var m=1,n=l[0];m<k-1;++m){var d=l[m];"+"==d&&"1"==n&&"1"==l[m+1]?l[m]="1":","!=d||n!=l[m+1]||"1"!=n&&"n"!=n||(l[m]=n),n=d}for(var m=0;m<k;++m){var d=l[m];if(","==d)l[m]="N";else if("%"==d){for(var p=m+1;p<k&&"%"==l[p];++p);for(var q=m&&"!"==l[m-1]||p<k&&"1"==l[p]?"1":"N",r=m;r<p;++r)l[r]=q;m=p-1}}for(var m=0,o=j;m<k;++m){var d=l[m];"L"==o&&"1"==d?l[m]="L":g.test(d)&&(o=d)}for(var m=0;m<k;++m)if(f.test(l[m])){for(var p=m+1;p<k&&f.test(l[p]);++p);for(var s="L"==(m?l[m-1]:j),t="L"==(p<k?l[p]:j),q=s||t?"L":"R",r=m;r<p;++r)l[r]=q;m=p-1}for(var u,v=[],m=0;m<k;)if(h.test(l[m])){var w=m;for(++m;m<k&&h.test(l[m]);++m);v.push(new b(0,w,m))}else{var x=m,y=v.length;for(++m;m<k&&"L"!=l[m];++m);for(var r=x;r<m;)if(i.test(l[r])){x<r&&v.splice(y,0,new b(1,x,r));var z=r;for(++r;r<m&&i.test(l[r]);++r);v.splice(y,0,new b(2,z,r)),x=r}else++r;x<m&&v.splice(y,0,new b(1,x,m))}return 1==v[0].level&&(u=c.match(/^\s+/))&&(v[0].from=u[0].length,v.unshift(new b(0,0,u[0].length))),1==Fe(v).level&&(u=c.match(/\s+$/))&&(Fe(v).to-=u[0].length,v.push(new b(0,k-u[0].length,k))),2==v[0].level&&v.unshift(new b(1,v[0].to,v[0].to)),v[0].level!=Fe(v).level&&v.push(new b(v[0].level,k,k)),v}}();return a.version="5.14.2",a})},{}],jquery:[function(a,b,c){!function(a,c){"object"==typeof b&&"object"==typeof b.exports?b.exports=a.document?c(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return c(a)}:c(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=_.type(a);return"function"!==c&&!_.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a))}function d(a,b,c){if(_.isFunction(b))return _.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return _.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ha.test(b))return _.filter(b,a,c);b=_.filter(b,a)}return _.grep(a,function(a){return U.call(b,a)>=0!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=oa[a]={};return _.each(a.match(na)||[],function(a,c){b[c]=!0}),b}function g(){Z.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1),_.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=_.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(ua,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:ta.test(c)?_.parseJSON(c):c)}catch(a){}sa.set(a,b,c)}else c=void 0;return c}function j(){return!0}function k(){return!1}function l(){try{return Z.activeElement}catch(a){}}function m(a,b){return _.nodeName(a,"table")&&_.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Ka.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=0,d=a.length;c<d;c++)ra.set(a[c],"globalEval",!b||ra.get(b[c],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(ra.hasData(a)&&(f=ra.access(a),g=ra.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)_.event.add(b,e,j[e][c])}sa.hasData(a)&&(h=sa.access(a),i=_.extend({},h),sa.set(b,i))}}function r(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&_.nodeName(a,b)?_.merge([a],c):c}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ya.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function t(b,c){var d,e=_(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:_.css(e[0],"display");return e.detach(),f}function u(a){var b=Z,c=Oa[a];return c||(c=t(a,b),"none"!==c&&c||(Na=(Na||_("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Na[0].contentDocument,b.write(),b.close(),c=t(a,b),Na.detach()),Oa[a]=c),c}function v(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||_.contains(a.ownerDocument,a)||(g=_.style(a,b)),Qa.test(g)&&Pa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function w(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function x(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Xa.length;e--;)if(b=Xa[e]+c,b in a)return b;return d}function y(a,b,c){var d=Ta.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=_.css(a,c+wa[f],!0,e)),d?("content"===c&&(g-=_.css(a,"padding"+wa[f],!0,e)),"margin"!==c&&(g-=_.css(a,"border"+wa[f]+"Width",!0,e))):(g+=_.css(a,"padding"+wa[f],!0,e),"padding"!==c&&(g+=_.css(a,"border"+wa[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g="border-box"===_.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=v(a,b,f),(e<0||null==e)&&(e=a.style[b]),Qa.test(e))return e;d=g&&(Y.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=ra.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&xa(d)&&(f[g]=ra.access(d,"olddisplay",u(d.nodeName)))):(e=xa(d),"none"===c&&e||ra.set(d,"olddisplay",e?c:_.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function C(a,b,c,d,e){return new C.prototype.init(a,b,c,d,e)}function D(){return setTimeout(function(){Ya=void 0}),Ya=_.now()}function E(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=wa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function F(a,b,c){for(var d,e=(cb[b]||[]).concat(cb["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function G(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&xa(a),p=ra.get(a,"fxshow");c.queue||(h=_._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,_.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=_.css(a,"display"),k="none"===j?ra.get(a,"olddisplay")||u(a.nodeName):j,"inline"===k&&"none"===_.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],$a.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||_.style(a,d)}else j=void 0;if(_.isEmptyObject(m))"inline"===("none"===j?u(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ra.access(a,"fxshow",{}),f&&(p.hidden=!o),o?_(a).show():l.done(function(){_(a).hide()}),l.done(function(){var b;ra.remove(a,"fxshow");for(b in m)_.style(a,b,m[b])});for(d in m)g=F(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function H(a,b){var c,d,e,f,g;for(c in a)if(d=_.camelCase(c),e=b[d],f=a[c],_.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=_.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function I(a,b,c){var d,e,f=0,g=bb.length,h=_.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Ya||D(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:_.extend({},b),opts:_.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ya||D(),duration:c.duration,tweens:[],createTween:function(b,c){var d=_.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(H(k,j.opts.specialEasing);f<g;f++)if(d=bb[f].call(j,a,k,j.opts))return d;return _.map(k,F,j),_.isFunction(j.opts.start)&&j.opts.start.call(a,j),_.fx.timer(_.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(na)||[];if(_.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,_.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===tb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=_.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&_.extend(!0,a,d),a}function M(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function N(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function O(a,b,c,d){var e;if(_.isArray(b))_.each(b,function(b,e){c||yb.test(a)?d(a,e):O(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==_.type(b))d(a,b);else for(e in b)O(a+"["+e+"]",b[e],c,d)}function P(a){return _.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y={},Z=a.document,$="2.1.4",_=function(a,b){return new _.fn.init(a,b)},aa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ba=/^-ms-/,ca=/-([\da-z])/gi,da=function(a,b){return b.toUpperCase()};_.fn=_.prototype={jquery:$,constructor:_,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){var b=_.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return _.each(this,a,b)},map:function(a){return this.pushStack(_.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},_.extend=_.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||_.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(_.isPlainObject(d)||(e=_.isArray(d)))?(e?(e=!1,f=c&&_.isArray(c)?c:[]):f=c&&_.isPlainObject(c)?c:{},g[b]=_.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},_.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===_.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!_.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"===_.type(a)&&!a.nodeType&&!_.isWindow(a)&&!(a.constructor&&!X.call(a.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=_.trim(a),a&&(1===a.indexOf("use strict")?(b=Z.createElement("script"),b.text=a,Z.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ba,"ms-").replace(ca,da)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;f<g&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;f<g&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(aa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?_.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;f<g;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return S.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),_.isFunction(a))return d=R.call(arguments,2),e=function(){return a.apply(b||this,d.concat(R.call(arguments)))},e.guid=a.guid=a.guid||_.guid++,e},now:Date.now,support:Y}),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var ea=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(a){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;d<e&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(a){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){if(I)return b.getElementsByClassName(a)},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),v.matchesSelector&&I&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[c<0?c+b:c]}),even:j(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){d&&!(e=ja.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),
c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);_.find=ea,_.expr=ea.selectors,_.expr[":"]=_.expr.pseudos,_.unique=ea.uniqueSort,_.text=ea.getText,_.isXMLDoc=ea.isXML,_.contains=ea.contains;var fa=_.expr.match.needsContext,ga=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ha=/^.[^:#\[\.,]*$/;_.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?_.find.matchesSelector(d,a)?[d]:[]:_.find.matches(a,_.grep(b,function(a){return 1===a.nodeType}))},_.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(_(a).filter(function(){for(b=0;b<c;b++)if(_.contains(e[b],this))return!0}));for(b=0;b<c;b++)_.find(a,e[b],d);return d=this.pushStack(c>1?_.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&fa.test(a)?_(a):a||[],!1).length}});var ia,ja=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ka=_.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ja.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||ia).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof _?b[0]:b,_.merge(this,_.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Z,!0)),ga.test(c[1])&&_.isPlainObject(b))for(c in b)_.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=Z.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=Z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):_.isFunction(a)?"undefined"!=typeof ia.ready?ia.ready(a):a(_):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),_.makeArray(a,this))};ka.prototype=_.fn,ia=_(Z);var la=/^(?:parents|prev(?:Until|All))/,ma={children:!0,contents:!0,next:!0,prev:!0};_.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&_(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),_.fn.extend({has:function(a){var b=_(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(_.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=fa.test(a)||"string"!=typeof a?_(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&_.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?_.unique(f):f)},index:function(a){return a?"string"==typeof a?U.call(_(a),this[0]):U.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(_.unique(_.merge(this.get(),_(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),_.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return _.dir(a,"parentNode")},parentsUntil:function(a,b,c){return _.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return _.dir(a,"nextSibling")},prevAll:function(a){return _.dir(a,"previousSibling")},nextUntil:function(a,b,c){return _.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return _.dir(a,"previousSibling",c)},siblings:function(a){return _.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return _.sibling(a.firstChild)},contents:function(a){return a.contentDocument||_.merge([],a.childNodes)}},function(a,b){_.fn[a]=function(c,d){var e=_.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=_.filter(d,e)),this.length>1&&(ma[a]||_.unique(e),la.test(a)&&e.reverse()),this.pushStack(e)}});var na=/\S+/g,oa={};_.Callbacks=function(a){a="string"==typeof a?oa[a]||f(a):_.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(b=a.memory&&f,c=!0,h=e||0,e=0,g=i.length,d=!0;i&&h<g;h++)if(i[h].apply(f[0],f[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function b(c){_.each(c,function(c,d){var e=_.type(d);"function"===e?a.unique&&l.has(d)||i.push(d):d&&d.length&&"string"!==e&&b(d)})}(arguments),d?g=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&_.each(arguments,function(a,b){for(var c;(c=_.inArray(b,i,c))>-1;)i.splice(c,1),d&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return a?_.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],g=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},_.extend({Deferred:function(a){var b=[["resolve","done",_.Callbacks("once memory"),"resolved"],["reject","fail",_.Callbacks("once memory"),"rejected"],["notify","progress",_.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return _.Deferred(function(c){_.each(b,function(b,f){var g=_.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&_.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?_.extend(a,d):d}},e={};return d.pipe=d.then,_.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&_.isFunction(a.promise)?g:0,i=1===h?a:_.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&_.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var pa;_.fn.ready=function(a){return _.ready.promise().done(a),this},_.extend({isReady:!1,readyWait:1,holdReady:function(a){a?_.readyWait++:_.ready(!0)},ready:function(a){(a===!0?--_.readyWait:_.isReady)||(_.isReady=!0,a!==!0&&--_.readyWait>0||(pa.resolveWith(Z,[_]),_.fn.triggerHandler&&(_(Z).triggerHandler("ready"),_(Z).off("ready"))))}}),_.ready.promise=function(b){return pa||(pa=_.Deferred(),"complete"===Z.readyState?setTimeout(_.ready):(Z.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1))),pa.promise(b)},_.ready.promise();var qa=_.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===_.type(c)){e=!0;for(h in c)_.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,_.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(_(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};_.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},h.uid=1,h.accepts=_.acceptData,h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,_.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(_.isEmptyObject(f))_.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,_.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{_.isArray(b)?d=b.concat(b.map(_.camelCase)):(e=_.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(na)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!_.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var ra=new h,sa=new h,ta=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ua=/([A-Z])/g;_.extend({hasData:function(a){return sa.hasData(a)||ra.hasData(a)},data:function(a,b,c){return sa.access(a,b,c)},removeData:function(a,b){sa.remove(a,b)},_data:function(a,b,c){return ra.access(a,b,c)},_removeData:function(a,b){ra.remove(a,b)}}),_.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=sa.get(f),1===f.nodeType&&!ra.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=_.camelCase(d.slice(5)),i(f,d,e[d])));ra.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){sa.set(this,a)}):qa(this,function(b){var c,d=_.camelCase(a);if(f&&void 0===b){if(c=sa.get(f,a),void 0!==c)return c;if(c=sa.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=sa.get(this,d);sa.set(this,d,b),a.indexOf("-")!==-1&&void 0!==c&&sa.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){sa.remove(this,a)})}}),_.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=ra.get(a,b),c&&(!d||_.isArray(c)?d=ra.access(a,b,_.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=_.queue(a,b),d=c.length,e=c.shift(),f=_._queueHooks(a,b),g=function(){_.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ra.get(a,c)||ra.access(a,c,{empty:_.Callbacks("once memory").add(function(){ra.remove(a,[b+"queue",c])})})}}),_.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?_.queue(this[0],a):void 0===b?this:this.each(function(){var c=_.queue(this,a,b);_._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&_.dequeue(this,a)})},dequeue:function(a){return this.each(function(){_.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=_.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ra.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var va=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=["Top","Right","Bottom","Left"],xa=function(a,b){return a=b||a,"none"===_.css(a,"display")||!_.contains(a.ownerDocument,a)},ya=/^(?:checkbox|radio)$/i;!function(){var a=Z.createDocumentFragment(),b=a.appendChild(Z.createElement("div")),c=Z.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),Y.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var za="undefined";Y.focusinBubbles="onfocusin"in a;var Aa=/^key/,Ba=/^(?:mouse|pointer|contextmenu)|click/,Ca=/^(?:focusinfocus|focusoutblur)$/,Da=/^([^.]*)(?:\.(.+)|)$/;_.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=_.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof _!==za&&_.event.triggered!==b.type?_.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(na)||[""],j=b.length;j--;)h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=_.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=_.event.special[n]||{},k=_.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&_.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),_.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.hasData(a)&&ra.get(a);if(q&&(i=q.events)){for(b=(b||"").match(na)||[""],j=b.length;j--;)if(h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=_.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||_.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)_.event.remove(a,n+b[j],c,d,!0);_.isEmptyObject(i)&&(delete q.handle,ra.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||Z],n=X.call(b,"type")?b.type:b,o=X.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||Z,3!==d.nodeType&&8!==d.nodeType&&!Ca.test(n+_.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[_.expando]?b:new _.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:_.makeArray(c,[b]),l=_.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!_.isWindow(d)){for(i=l.delegateType||n,Ca.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||Z)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(ra.get(g,"events")||{})[b.type]&&ra.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&_.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!_.acceptData(d)||j&&_.isFunction(d[n])&&!_.isWindow(d)&&(h=d[j],h&&(d[j]=null),_.event.triggered=n,d[n](),_.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=_.event.fix(a);var b,c,d,e,f,g=[],h=R.call(arguments),i=(ra.get(this,"events")||{})[a.type]||[],j=_.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=_.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(f.namespace)||(a.handleObj=f,a.data=f.data,d=((_.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?_(e,this).index(i)>=0:_.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Z,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[_.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ba.test(e)?this.mouseHooks:Aa.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new _.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=Z),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==l()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===l()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&_.nodeName(this,"input"))return this.click(),!1},_default:function(a){return _.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=_.extend(new _.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?_.event.trigger(e,null,b):_.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},_.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},_.Event=function(a,b){return this instanceof _.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?j:k):this.type=a,b&&_.extend(this,b),this.timeStamp=a&&a.timeStamp||_.now(),void(this[_.expando]=!0)):new _.Event(a,b)},_.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=j,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){_.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||_.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Y.focusinBubbles||_.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){_.event.simulate(b,a.target,_.event.fix(a),!0)};_.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ra.access(d,b);e||d.addEventListener(a,c,!0),ra.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ra.access(d,b)-1;e?ra.access(d,b,e):(d.removeEventListener(a,c,!0),ra.remove(d,b))}}}),_.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=k;else if(!d)return this;return 1===e&&(f=d,d=function(a){return _().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=_.guid++)),this.each(function(){_.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,_(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=k),this.each(function(){_.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){_.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return _.event.trigger(a,b,c,!0)}});var Ea=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fa=/<([\w:]+)/,Ga=/<|&#?\w+;/,Ha=/<(?:script|style|link)/i,Ia=/checked\s*(?:[^=]|=\s*.checked.)/i,Ja=/^$|\/(?:java|ecma)script/i,Ka=/^true\/(.*)/,La=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ma.optgroup=Ma.option,Ma.tbody=Ma.tfoot=Ma.colgroup=Ma.caption=Ma.thead,Ma.th=Ma.td,_.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=_.contains(a.ownerDocument,a);if(!(Y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||_.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;d<e;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;d<e;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;m<n;m++)if(e=a[m],e||0===e)if("object"===_.type(e))_.merge(l,e.nodeType?[e]:e);else if(Ga.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Fa.exec(e)||["",""])[1].toLowerCase(),h=Ma[g]||Ma._default,f.innerHTML=h[1]+e.replace(Ea,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;_.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||_.inArray(e,d)===-1)&&(i=_.contains(e.ownerDocument,e),f=r(k.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Ja.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=_.event.special,g=0;void 0!==(c=a[g]);g++){if(_.acceptData(c)&&(e=c[ra.expando],e&&(b=ra.cache[e]))){if(b.events)for(d in b.events)f[d]?_.event.remove(c,d):_.removeEvent(c,d,b.handle);ra.cache[e]&&delete ra.cache[e]}delete sa.cache[c[sa.expando]]}}}),_.fn.extend({text:function(a){return qa(this,function(a){return void 0===a?_.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?_.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||_.cleanData(r(c)),c.parentNode&&(b&&_.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(_.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return _.clone(this,a,b)})},html:function(a){return qa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ha.test(a)&&!Ma[(Fa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ea,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(_.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,_.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],p=_.isFunction(m);if(p||j>1&&"string"==typeof m&&!Y.checkClone&&Ia.test(m))return this.each(function(c){var d=k.eq(c);p&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=_.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=_.map(r(c,"script"),n),f=e.length;i<j;i++)g=c,i!==l&&(g=_.clone(g,!0,!0),f&&_.merge(e,r(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,_.map(e,o),i=0;i<f;i++)g=e[i],Ja.test(g.type||"")&&!ra.access(g,"globalEval")&&_.contains(h,g)&&(g.src?_._evalUrl&&_._evalUrl(g.src):_.globalEval(g.textContent.replace(La,"")))}return this}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){_.fn[a]=function(a){for(var c,d=[],e=_(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),_(e[g])[b](c),T.apply(d,c.get());return this.pushStack(d)}});var Na,Oa={},Pa=/^margin/,Qa=new RegExp("^("+va+")(?!px)[a-z%]+$","i"),Ra=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function b(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",g.innerHTML="",e.appendChild(f);var b=a.getComputedStyle(g,null);c="1%"!==b.top,d="4px"===b.width,e.removeChild(f)}var c,d,e=Z.documentElement,f=Z.createElement("div"),g=Z.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(g),a.getComputedStyle&&_.extend(Y,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=g.appendChild(Z.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.removeChild(c),b}}))}(),_.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Sa=/^(none|table(?!-c[ea]).+)/,Ta=new RegExp("^("+va+")(.*)$","i"),Ua=new RegExp("^([+-])=("+va+")","i"),Va={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:"0",fontWeight:"400"},Xa=["Webkit","O","Moz","ms"];_.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=v(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=_.camelCase(b),i=a.style;return b=_.cssProps[h]||(_.cssProps[h]=x(i,h)),g=_.cssHooks[b]||_.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ua.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(_.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||_.cssNumber[h]||(c+="px"),Y.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=_.camelCase(b);return b=_.cssProps[h]||(_.cssProps[h]=x(a.style,h)),g=_.cssHooks[b]||_.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=v(a,b,d)),"normal"===e&&b in Wa&&(e=Wa[b]),""===c||c?(f=parseFloat(e),c===!0||_.isNumeric(f)?f||0:e):e}}),_.each(["height","width"],function(a,b){_.cssHooks[b]={get:function(a,c,d){if(c)return Sa.test(_.css(a,"display"))&&0===a.offsetWidth?_.swap(a,Va,function(){return A(a,b,d)}):A(a,b,d)},set:function(a,c,d){var e=d&&Ra(a);return y(a,c,d?z(a,b,d,"border-box"===_.css(a,"boxSizing",!1,e),e):0)}}}),_.cssHooks.marginRight=w(Y.reliableMarginRight,function(a,b){if(b)return _.swap(a,{display:"inline-block"},v,[a,"marginRight"])}),_.each({margin:"",padding:"",border:"Width"},function(a,b){_.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+wa[d]+b]=f[d]||f[d-2]||f[0];return e}},Pa.test(a)||(_.cssHooks[a+b].set=y)}),_.fn.extend({css:function(a,b){return qa(this,function(a,b,c){var d,e,f={},g=0;if(_.isArray(b)){for(d=Ra(a),e=b.length;g<e;g++)f[b[g]]=_.css(a,b[g],!1,d);return f}return void 0!==c?_.style(a,b,c):_.css(a,b)},a,b,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){xa(this)?_(this).show():_(this).hide()})}}),_.Tween=C,C.prototype={constructor:C,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(_.cssNumber[c]?"":"px")},cur:function(){var a=C.propHooks[this.prop];return a&&a.get?a.get(this):C.propHooks._default.get(this)},run:function(a){var b,c=C.propHooks[this.prop];return this.options.duration?this.pos=b=_.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=_.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){_.fx.step[a.prop]?_.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[_.cssProps[a.prop]]||_.cssHooks[a.prop])?_.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},_.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},_.fx=C.prototype.init,_.fx.step={};var Ya,Za,$a=/^(?:toggle|show|hide)$/,_a=new RegExp("^(?:([+-])=|)("+va+")([a-z%]*)$","i"),ab=/queueHooks$/,bb=[G],cb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=_a.exec(b),f=e&&e[3]||(_.cssNumber[a]?"":"px"),g=(_.cssNumber[a]||"px"!==f&&+d)&&_a.exec(_.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,_.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};_.Animation=_.extend(I,{tweener:function(a,b){_.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],cb[c]=cb[c]||[],cb[c].unshift(b)},prefilter:function(a,b){b?bb.unshift(a):bb.push(a)}}),_.speed=function(a,b,c){var d=a&&"object"==typeof a?_.extend({},a):{complete:c||!c&&b||_.isFunction(a)&&a,duration:a,easing:c&&b||b&&!_.isFunction(b)&&b};return d.duration=_.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in _.fx.speeds?_.fx.speeds[d.duration]:_.fx.speeds._default,
null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){_.isFunction(d.old)&&d.old.call(this),d.queue&&_.dequeue(this,d.queue)},d},_.fn.extend({fadeTo:function(a,b,c,d){return this.filter(xa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=_.isEmptyObject(a),f=_.speed(b,c,d),g=function(){var b=I(this,_.extend({},a),f);(e||ra.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=_.timers,g=ra.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||_.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ra.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=_.timers,g=d?d.length:0;for(c.finish=!0,_.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),_.each(["toggle","show","hide"],function(a,b){var c=_.fn[b];_.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(E(b,!0),a,d,e)}}),_.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){_.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),_.timers=[],_.fx.tick=function(){var a,b=0,c=_.timers;for(Ya=_.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||_.fx.stop(),Ya=void 0},_.fx.timer=function(a){_.timers.push(a),a()?_.fx.start():_.timers.pop()},_.fx.interval=13,_.fx.start=function(){Za||(Za=setInterval(_.fx.tick,_.fx.interval))},_.fx.stop=function(){clearInterval(Za),Za=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(a,b){return a=_.fx?_.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=Z.createElement("input"),b=Z.createElement("select"),c=b.appendChild(Z.createElement("option"));a.type="checkbox",Y.checkOn=""!==a.value,Y.optSelected=c.selected,b.disabled=!0,Y.optDisabled=!c.disabled,a=Z.createElement("input"),a.value="t",a.type="radio",Y.radioValue="t"===a.value}();var db,eb,fb=_.expr.attrHandle;_.fn.extend({attr:function(a,b){return qa(this,_.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){_.removeAttr(this,a)})}}),_.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===za?_.prop(a,b,c):(1===f&&_.isXMLDoc(a)||(b=b.toLowerCase(),d=_.attrHooks[b]||(_.expr.match.bool.test(b)?eb:db)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=_.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void _.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(na);if(f&&1===a.nodeType)for(;c=f[e++];)d=_.propFix[c]||c,_.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Y.radioValue&&"radio"===b&&_.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),eb={set:function(a,b,c){return b===!1?_.removeAttr(a,c):a.setAttribute(c,c),c}},_.each(_.expr.match.bool.source.match(/\w+/g),function(a,b){var c=fb[b]||_.find.attr;fb[b]=function(a,b,d){var e,f;return d||(f=fb[b],fb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,fb[b]=f),e}});var gb=/^(?:input|select|textarea|button)$/i;_.fn.extend({prop:function(a,b){return qa(this,_.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[_.propFix[a]||a]})}}),_.extend({propFix:{for:"htmlFor",class:"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!_.isXMLDoc(a),f&&(b=_.propFix[b]||b,e=_.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||gb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Y.optSelected||(_.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});var hb=/[\t\r\n\f]/g;_.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];i<j;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=_.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];i<j;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?_.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):_.isFunction(a)?this.each(function(c){_(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=_(this),f=a.match(na)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==za&&"boolean"!==c||(this.className&&ra.set(this,"__className__",this.className),this.className=this.className||a===!1?"":ra.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(hb," ").indexOf(b)>=0)return!0;return!1}});var ib=/\r/g;_.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=_.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,_(this).val()):a,null==e?e="":"number"==typeof e?e+="":_.isArray(e)&&(e=_.map(e,function(a){return null==a?"":a+""})),b=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=_.valHooks[e.type]||_.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ib,""):null==c?"":c)}}}),_.extend({valHooks:{option:{get:function(a){var b=_.find.attr(a,"value");return null!=b?b:_.trim(_.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(Y.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!_.nodeName(c.parentNode,"optgroup"))){if(b=_(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=_.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=_.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(a,b){if(_.isArray(b))return a.checked=_.inArray(_(a).val(),b)>=0}},Y.checkOn||(_.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),_.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){_.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),_.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var jb=_.now(),kb=/\?/;_.parseJSON=function(a){return JSON.parse(a+"")},_.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(a){b=void 0}return b&&!b.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+a),b};var lb=/#.*$/,mb=/([?&])_=[^&]*/,nb=/^(.*?):[ \t]*([^\r\n]*)$/gm,ob=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pb=/^(?:GET|HEAD)$/,qb=/^\/\//,rb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,sb={},tb={},ub="*/".concat("*"),vb=a.location.href,wb=rb.exec(vb.toLowerCase())||[];_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vb,type:"GET",isLocal:ob.test(wb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":_.parseJSON,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,_.ajaxSettings),b):L(_.ajaxSettings,a)},ajaxPrefilter:J(sb),ajaxTransport:J(tb),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&a<300||304===a,c&&(s=M(l,v,c)),s=N(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(_.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(_.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,!a&&w||(w="error",a<0&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--_.active||_.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=_.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?_(m):_.event,o=_.Deferred(),p=_.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=nb.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(t<2)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||vb)+"").replace(lb,"").replace(qb,wb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=_.trim(l.dataType||"*").toLowerCase().match(na)||[""],null==l.crossDomain&&(i=rb.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===wb[1]&&i[2]===wb[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(wb[3]||("http:"===wb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=_.param(l.data,l.traditional)),K(sb,l,b,v),2===t)return v;j=_.event&&l.global,j&&0===_.active++&&_.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!pb.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(kb.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=mb.test(e)?e.replace(mb,"$1_="+jb++):e+(kb.test(e)?"&":"?")+"_="+jb++)),l.ifModified&&(_.lastModified[e]&&v.setRequestHeader("If-Modified-Since",_.lastModified[e]),_.etag[e]&&v.setRequestHeader("If-None-Match",_.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+ub+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=K(tb,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(a){if(!(t<2))throw a;c(-1,a)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return _.get(a,b,c,"json")},getScript:function(a,b){return _.get(a,void 0,b,"script")}}),_.each(["get","post"],function(a,b){_[b]=function(a,c,d,e){return _.isFunction(c)&&(e=e||d,d=c,c=void 0),_.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),_._evalUrl=function(a){return _.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},_.fn.extend({wrapAll:function(a){var b;return _.isFunction(a)?this.each(function(b){_(this).wrapAll(a.call(this,b))}):(this[0]&&(b=_(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return _.isFunction(a)?this.each(function(b){_(this).wrapInner(a.call(this,b))}):this.each(function(){var b=_(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=_.isFunction(a);return this.each(function(c){_(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){_.nodeName(this,"body")||_(this).replaceWith(this.childNodes)}).end()}}),_.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},_.expr.filters.visible=function(a){return!_.expr.filters.hidden(a)};var xb=/%20/g,yb=/\[\]$/,zb=/\r?\n/g,Ab=/^(?:submit|button|image|reset|file)$/i,Bb=/^(?:input|select|textarea|keygen)/i;_.param=function(a,b){var c,d=[],e=function(a,b){b=_.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=_.ajaxSettings&&_.ajaxSettings.traditional),_.isArray(a)||a.jquery&&!_.isPlainObject(a))_.each(a,function(){e(this.name,this.value)});else for(c in a)O(c,a[c],b,e);return d.join("&").replace(xb,"+")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=_.prop(this,"elements");return a?_.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!_(this).is(":disabled")&&Bb.test(this.nodeName)&&!Ab.test(a)&&(this.checked||!ya.test(a))}).map(function(a,b){var c=_(this).val();return null==c?null:_.isArray(c)?_.map(c,function(a){return{name:b.name,value:a.replace(zb,"\r\n")}}):{name:b.name,value:c.replace(zb,"\r\n")}}).get()}}),_.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cb=0,Db={},Eb={0:200,1223:204},Fb=_.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Db)Db[a]()}),Y.cors=!!Fb&&"withCredentials"in Fb,Y.ajax=Fb=!!Fb,_.ajaxTransport(function(a){var b;if(Y.cors||Fb&&!a.crossDomain)return{send:function(c,d){var e,f=a.xhr(),g=++Cb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Db[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Eb[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Db[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(a){if(b)throw a}},abort:function(){b&&b()}}}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return _.globalEval(a),a}}}),_.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),_.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=_("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),Z.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gb=[],Hb=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gb.pop()||_.expando+"_"+jb++;return this[a]=!0,a}}),_.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=_.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hb,"$1"+e):b.jsonp!==!1&&(b.url+=(kb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||_.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gb.push(e)),g&&_.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),_.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Z;var d=ga.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=_.buildFragment([a],b,e),e&&e.length&&_(e).remove(),_.merge([],d.childNodes))};var Ib=_.fn.load;_.fn.load=function(a,b,c){if("string"!=typeof a&&Ib)return Ib.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=_.trim(a.slice(h)),a=a.slice(0,h)),_.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&_.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?_("<div>").append(_.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){_.fn[b]=function(a){return this.on(b,a)}}),_.expr.filters.animated=function(a){return _.grep(_.timers,function(b){return a===b.elem}).length};var Jb=a.document.documentElement;_.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=_.css(a,"position"),l=_(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=_.css(a,"top"),i=_.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),_.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},_.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){_.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,_.contains(b,d)?(typeof d.getBoundingClientRect!==za&&(e=d.getBoundingClientRect()),c=P(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===_.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),_.nodeName(a[0],"html")||(d=a.offset()),d.top+=_.css(a[0],"borderTopWidth",!0),d.left+=_.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-_.css(c,"marginTop",!0),left:b.left-d.left-_.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Jb;a&&!_.nodeName(a,"html")&&"static"===_.css(a,"position");)a=a.offsetParent;return a||Jb})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;_.fn[b]=function(e){return qa(this,function(b,e,f){var g=P(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),_.each(["top","left"],function(a,b){_.cssHooks[b]=w(Y.pixelPosition,function(a,c){if(c)return c=v(a,b),Qa.test(c)?_(a).position()[b]+"px":c})}),_.each({Height:"height",Width:"width"},function(a,b){_.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){_.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return qa(this,function(b,c,d){var e;return _.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?_.css(b,c,g):_.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),_.fn.size=function(){return this.length},_.fn.andSelf=_.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var Kb=a.jQuery,Lb=a.$;return _.noConflict=function(b){return a.$===_&&(a.$=Lb),b&&a.jQuery===_&&(a.jQuery=Kb),_},typeof b===za&&(a.jQuery=a.$=_),_})},{}],moment:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?b.exports=d():"function"==typeof define&&define.amd?define(d):a.moment=d()}(this,function(){"use strict";function c(){return Jc.apply(null,arguments)}function d(a){Jc=a}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}function f(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function g(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function i(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);return h(b,"toString")&&(a.toString=b.toString),h(b,"valueOf")&&(a.valueOf=b.valueOf),a}function j(a,b,c,d){return Ea(a,b,c,d,!0).utc()}function k(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(a){return null==a._pf&&(a._pf=k()),a._pf}function m(a){if(null==a._isValid){var b=l(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function n(a){var b=j(NaN);return null!=a?i(l(b),a):l(b).userInvalidated=!0,b}function o(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=l(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Lc.length>0)for(c in Lc)d=Lc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function p(a){o(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),Mc===!1&&(Mc=!0,c.updateOffset(this),Mc=!1)}function q(a){return a instanceof p||null!=a&&null!=a._isAMomentObject}function r(a){return a<0?Math.ceil(a):Math.floor(a)}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=r(b)),c}function t(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function u(){}function v(a){return a?a.toLowerCase().replace("_","-"):a}function w(a){for(var b,c,d,e,f=0;f<a.length;){for(e=v(a[f]).split("-"),b=e.length,c=v(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=x(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&t(e,c,!0)>=b-1)break;b--}f++}return null}function x(c){var d=null;if(!Nc[c]&&"undefined"!=typeof b&&b&&b.exports)try{d=Kc._abbr,a("./locale/"+c),y(d)}catch(a){}return Nc[c]}function y(a,b){var c;return a&&(c="undefined"==typeof b?A(a):z(a,b),c&&(Kc=c)),Kc._abbr}function z(a,b){return null!==b?(b.abbr=a,Nc[a]=Nc[a]||new u,Nc[a].set(b),y(a),Nc[a]):(delete Nc[a],null)}function A(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Kc;if(!e(a)){if(b=x(a))return b;a=[a]}return w(a)}function B(a,b){var c=a.toLowerCase();Oc[c]=Oc[c+"s"]=Oc[b]=a}function C(a){return"string"==typeof a?Oc[a]||Oc[a.toLowerCase()]:void 0}function D(a){var b,c,d={};for(c in a)h(a,c)&&(b=C(c),b&&(d[b]=a[c]));return d}function E(a,b){return function(d){return null!=d?(G(this,a,d),c.updateOffset(this,b),this):F(this,a)}}function F(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function G(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function H(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=C(a),"function"==typeof this[a])return this[a](b);return this}function I(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function J(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Sc[a]=e),b&&(Sc[b[0]]=function(){return I(e.apply(this,arguments),b[1],b[2])}),c&&(Sc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match(Pc);for(b=0,c=d.length;b<c;b++)Sc[d[b]]?d[b]=Sc[d[b]]:d[b]=K(d[b]);return function(e){var f="";for(b=0;b<c;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),Rc[b]=Rc[b]||L(b),Rc[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Qc.lastIndex=0;d>=0&&Qc.test(a);)a=a.replace(Qc,c),Qc.lastIndex=0,d-=1;return a}function O(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function P(a,b,c){fd[a]=O(b)?b:function(a){return a&&c?c:b}}function Q(a,b){return h(fd,a)?fd[a](b._strict,b._locale):new RegExp(R(a))}function R(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=s(a)}),c=0;c<a.length;c++)gd[a[c]]=d}function T(a,b){S(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function U(a,b,c){null!=b&&h(gd,a)&&gd[a](b,c._a,c,a)}function V(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function W(a){return this._months[a.month()]}function X(a){return this._monthsShort[a.month()]}function Y(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=j([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function Z(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),V(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function $(a){return null!=a?(Z(this,a),c.updateOffset(this,!0),this):F(this,"Month")}function _(){return V(this.year(),this.month())}function aa(a){var b,c=a._a;return c&&l(a).overflow===-2&&(b=c[id]<0||c[id]>11?id:c[jd]<1||c[jd]>V(c[hd],c[id])?jd:c[kd]<0||c[kd]>24||24===c[kd]&&(0!==c[ld]||0!==c[md]||0!==c[nd])?kd:c[ld]<0||c[ld]>59?ld:c[md]<0||c[md]>59?md:c[nd]<0||c[nd]>999?nd:-1,l(a)._overflowDayOfYear&&(b<hd||b>jd)&&(b=jd),l(a).overflow=b),a}function ba(a){c.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function ca(a,b){var c=!0;return i(function(){return c&&(ba(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function da(a,b){qd[a]||(ba(b),qd[a]=!0)}function ea(a){var b,c,d=a._i,e=rd.exec(d);if(e){for(l(a).iso=!0,b=0,c=sd.length;b<c;b++)if(sd[b][1].exec(d)){a._f=sd[b][0];break}for(b=0,c=td.length;b<c;b++)if(td[b][1].exec(d)){a._f+=(e[6]||" ")+td[b][0];break}d.match(cd)&&(a._f+="Z"),xa(a)}else a._isValid=!1}function fa(a){var b=ud.exec(a._i);return null!==b?void(a._d=new Date(+b[1])):(ea(a),void(a._isValid===!1&&(delete a._isValid,c.createFromInputFallback(a))))}function ga(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<1970&&h.setFullYear(a),h}function ha(a){var b=new Date(Date.UTC.apply(null,arguments));return a<1970&&b.setUTCFullYear(a),b}function ia(a){return ja(a)?366:365}function ja(a){return a%4===0&&a%100!==0||a%400===0}function ka(){return ja(this.year())}function la(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),f<e-7&&(f+=7),d=Fa(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ma(a){return la(a,this._week.dow,this._week.doy).week}function na(){return this._week.dow}function oa(){return this._week.doy}function pa(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function qa(a){var b=la(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function ra(a,b,c,d,e){var f,g=6+e-d,h=ha(a,0,1+g),i=h.getUTCDay();return i<e&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ia(a-1)+f}}function sa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ta(a,b,c){return null!=a?a:null!=b?b:c}function ua(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function va(a){var b,c,d,e,f=[];if(!a._d){for(d=ua(a),a._w&&null==a._a[jd]&&null==a._a[id]&&wa(a),a._dayOfYear&&(e=ta(a._a[hd],d[hd]),a._dayOfYear>ia(e)&&(l(a)._overflowDayOfYear=!0),c=ha(e,0,a._dayOfYear),a._a[id]=c.getUTCMonth(),a._a[jd]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;b<7;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[kd]&&0===a._a[ld]&&0===a._a[md]&&0===a._a[nd]&&(a._nextDay=!0,a._a[kd]=0),a._d=(a._useUTC?ha:ga).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[kd]=24)}}function wa(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ta(b.GG,a._a[hd],la(Fa(),1,4).year),d=ta(b.W,1),e=ta(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ta(b.gg,a._a[hd],la(Fa(),f,g).year),d=ta(b.w,1),null!=b.d?(e=b.d,e<f&&++d):e=null!=b.e?b.e+f:f),h=ra(c,d,e,g,f),a._a[hd]=h.year,a._dayOfYear=h.dayOfYear}function xa(a){if(a._f===c.ISO_8601)return void ea(a);a._a=[],l(a).empty=!0;var b,d,e,f,g,h=""+a._i,i=h.length,j=0;for(e=N(a._f,a._locale).match(Pc)||[],b=0;b<e.length;b++)f=e[b],d=(h.match(Q(f,a))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&l(a).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Sc[f]?(d?l(a).empty=!1:l(a).unusedTokens.push(f),U(f,d,a)):a._strict&&!d&&l(a).unusedTokens.push(f);l(a).charsLeftOver=i-j,h.length>0&&l(a).unusedInput.push(h),l(a).bigHour===!0&&a._a[kd]<=12&&a._a[kd]>0&&(l(a).bigHour=void 0),a._a[kd]=ya(a._locale,a._a[kd],a._meridiem),va(a),aa(a)}function ya(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&b<12&&(b+=12),d||12!==b||(b=0),b):b}function za(a){var b,c,d,e,f;if(0===a._f.length)return l(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=o({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],xa(b),m(b)&&(f+=l(b).charsLeftOver,f+=10*l(b).unusedTokens.length,
l(b).score=f,(null==d||f<d)&&(d=f,c=b));i(a,c||b)}function Aa(a){if(!a._d){var b=D(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],va(a)}}function Ba(a){var b=new p(aa(Ca(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Ca(a){var b=a._i,c=a._f;return a._locale=a._locale||A(a._l),null===b||void 0===c&&""===b?n({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),q(b)?new p(aa(b)):(e(c)?za(a):c?xa(a):f(b)?a._d=b:Da(a),a))}function Da(a){var b=a._i;void 0===b?a._d=new Date:f(b)?a._d=new Date(+b):"string"==typeof b?fa(a):e(b)?(a._a=g(b.slice(0),function(a){return parseInt(a,10)}),va(a)):"object"==typeof b?Aa(a):"number"==typeof b?a._d=new Date(b):c.createFromInputFallback(a)}function Ea(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,Ba(f)}function Fa(a,b,c,d){return Ea(a,b,c,d,!1)}function Ga(a,b){var c,d;if(1===b.length&&e(b[0])&&(b=b[0]),!b.length)return Fa();for(c=b[0],d=1;d<b.length;++d)b[d].isValid()&&!b[d][a](c)||(c=b[d]);return c}function Ha(){var a=[].slice.call(arguments,0);return Ga("isBefore",a)}function Ia(){var a=[].slice.call(arguments,0);return Ga("isAfter",a)}function Ja(a){var b=D(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=A(),this._bubble()}function Ka(a){return a instanceof Ja}function La(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+I(~~(a/60),2)+b+I(~~a%60,2)})}function Ma(a){var b=(a||"").match(cd)||[],c=b[b.length-1]||[],d=(c+"").match(zd)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?e:-e}function Na(a,b){var d,e;return b._isUTC?(d=b.clone(),e=(q(a)||f(a)?+a:+Fa(a))-+d,d._d.setTime(+d._d+e),c.updateOffset(d,!1),d):Fa(a).local()}function Oa(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Pa(a,b){var d,e=this._offset||0;return null!=a?("string"==typeof a&&(a=Ma(a)),Math.abs(a)<16&&(a*=60),!this._isUTC&&b&&(d=Oa(this)),this._offset=a,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==a&&(!b||this._changeInProgress?db(this,$a(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Oa(this)}function Qa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Ra(a){return this.utcOffset(0,a)}function Sa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Oa(this),"m")),this}function Ta(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ma(this._i)),this}function Ua(a){return a=a?Fa(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Va(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Wa(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(o(a,this),a=Ca(a),a._a){var b=a._isUTC?j(a._a):Fa(a._a);this._isDSTShifted=this.isValid()&&t(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Xa(){return!this._isUTC}function Ya(){return this._isUTC}function Za(){return this._isUTC&&0===this._offset}function $a(a,b){var c,d,e,f=a,g=null;return Ka(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=Ad.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:s(g[jd])*c,h:s(g[kd])*c,m:s(g[ld])*c,s:s(g[md])*c,ms:s(g[nd])*c}):(g=Bd.exec(a))?(c="-"===g[1]?-1:1,f={y:_a(g[2],c),M:_a(g[3],c),d:_a(g[4],c),h:_a(g[5],c),m:_a(g[6],c),s:_a(g[7],c),w:_a(g[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=bb(Fa(f.from),Fa(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new Ja(f),Ka(a)&&h(a,"_locale")&&(d._locale=a._locale),d}function _a(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function ab(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function bb(a,b){var c;return b=Na(b,a),a.isBefore(b)?c=ab(a,b):(c=ab(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function cb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(da(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=$a(c,d),db(this,e,a),this}}function db(a,b,d,e){var f=b._milliseconds,g=b._days,h=b._months;e=null==e||e,f&&a._d.setTime(+a._d+f*d),g&&G(a,"Date",F(a,"Date")+g*d),h&&Z(a,F(a,"Month")+h*d),e&&c.updateOffset(a,g||h)}function eb(a,b){var c=a||Fa(),d=Na(c,this).startOf("day"),e=this.diff(d,"days",!0),f=e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Fa(c)))}function fb(){return new p(this)}function gb(a,b){var c;return b=C("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=q(a)?a:Fa(a),+this>+a):(c=q(a)?+a:+Fa(a),c<+this.clone().startOf(b))}function hb(a,b){var c;return b=C("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=q(a)?a:Fa(a),+this<+a):(c=q(a)?+a:+Fa(a),+this.clone().endOf(b)<c)}function ib(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function jb(a,b){var c;return b=C(b||"millisecond"),"millisecond"===b?(a=q(a)?a:Fa(a),+this===+a):(c=+Fa(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function kb(a,b,c){var d,e,f=Na(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=C(b),"year"===b||"month"===b||"quarter"===b?(e=lb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:r(e)}function lb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return b-f<0?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function mb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function nb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ob(a){var b=M(this,a||c.defaultFormat);return this.localeData().postformat(b)}function pb(a,b){return this.isValid()?$a({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.from(Fa(),a)}function rb(a,b){return this.isValid()?$a({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function sb(a){return this.to(Fa(),a)}function tb(a){var b;return void 0===a?this._locale._abbr:(b=A(a),null!=b&&(this._locale=b),this)}function ub(){return this._locale}function vb(a){switch(a=C(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function wb(a){return a=C(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function xb(){return+this._d-6e4*(this._offset||0)}function yb(){return Math.floor(+this/1e3)}function zb(){return this._offset?new Date(+this):this._d}function Ab(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Bb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Cb(){return m(this)}function Db(){return i({},l(this))}function Eb(){return l(this).overflow}function Fb(a,b){J(0,[a,a.length],0,b)}function Gb(a,b,c){return la(Fa([a,11,31+b-c]),b,c).week}function Hb(a){var b=la(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Ib(a){var b=la(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Jb(){return Gb(this.year(),1,4)}function Kb(){var a=this.localeData()._week;return Gb(this.year(),a.dow,a.doy)}function Lb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Mb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Nb(a){return this._weekdays[a.day()]}function Ob(a){return this._weekdaysShort[a.day()]}function Pb(a){return this._weekdaysMin[a.day()]}function Qb(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;b<7;b++)if(this._weekdaysParse[b]||(c=Fa([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Rb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Mb(a,this.localeData()),this.add(a-b,"d")):b}function Sb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Tb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Ub(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Vb(a,b){return b._meridiemParse}function Wb(a){return"p"===(a+"").toLowerCase().charAt(0)}function Xb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Yb(a,b){b[nd]=s(1e3*("0."+a))}function Zb(){return this._isUTC?"UTC":""}function $b(){return this._isUTC?"Coordinated Universal Time":""}function _b(a){return Fa(1e3*a)}function ac(){return Fa.apply(null,arguments).parseZone()}function bc(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function cc(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function dc(){return this._invalidDate}function ec(a){return this._ordinal.replace("%d",a)}function fc(a){return a}function gc(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function hc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function ic(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function jc(a,b,c,d){var e=A(),f=j().set(d,b);return e[c](f,a)}function kc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return jc(a,b,c,e);var f,g=[];for(f=0;f<d;f++)g[f]=jc(a,f,c,e);return g}function lc(a,b){return kc(a,b,"months",12,"month")}function mc(a,b){return kc(a,b,"monthsShort",12,"month")}function nc(a,b){return kc(a,b,"weekdays",7,"day")}function oc(a,b){return kc(a,b,"weekdaysShort",7,"day")}function pc(a,b){return kc(a,b,"weekdaysMin",7,"day")}function qc(){var a=this._data;return this._milliseconds=Yd(this._milliseconds),this._days=Yd(this._days),this._months=Yd(this._months),a.milliseconds=Yd(a.milliseconds),a.seconds=Yd(a.seconds),a.minutes=Yd(a.minutes),a.hours=Yd(a.hours),a.months=Yd(a.months),a.years=Yd(a.years),this}function rc(a,b,c,d){var e=$a(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function sc(a,b){return rc(this,a,b,1)}function tc(a,b){return rc(this,a,b,-1)}function uc(a){return a<0?Math.floor(a):Math.ceil(a)}function vc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||f<=0&&g<=0&&h<=0||(f+=864e5*uc(xc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=r(f/1e3),i.seconds=a%60,b=r(a/60),i.minutes=b%60,c=r(b/60),i.hours=c%24,g+=r(c/24),e=r(wc(g)),h+=e,g-=uc(xc(e)),d=r(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function wc(a){return 4800*a/146097}function xc(a){return 146097*a/4800}function yc(a){var b,c,d=this._milliseconds;if(a=C(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+wc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(xc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function zc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)}function Ac(a){return function(){return this.as(a)}}function Bc(a){return a=C(a),this[a+"s"]()}function Cc(a){return function(){return this._data[a]}}function Dc(){return r(this.days()/7)}function Ec(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Fc(a,b,c){var d=$a(a).abs(),e=me(d.as("s")),f=me(d.as("m")),g=me(d.as("h")),h=me(d.as("d")),i=me(d.as("M")),j=me(d.as("y")),k=e<ne.s&&["s",e]||1===f&&["m"]||f<ne.m&&["mm",f]||1===g&&["h"]||g<ne.h&&["hh",g]||1===h&&["d"]||h<ne.d&&["dd",h]||1===i&&["M"]||i<ne.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Ec.apply(null,k)}function Gc(a,b){return void 0!==ne[a]&&(void 0===b?ne[a]:(ne[a]=b,!0))}function Hc(a){var b=this.localeData(),c=Fc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Ic(){var a,b,c,d=oe(this._milliseconds)/1e3,e=oe(this._days),f=oe(this._months);a=r(d/60),b=r(a/60),d%=60,a%=60,c=r(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(m<0?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Jc,Kc,Lc=c.momentProperties=[],Mc=!1,Nc={},Oc={},Pc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Qc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rc={},Sc={},Tc=/\d/,Uc=/\d\d/,Vc=/\d{3}/,Wc=/\d{4}/,Xc=/[+-]?\d{6}/,Yc=/\d\d?/,Zc=/\d{1,3}/,$c=/\d{1,4}/,_c=/[+-]?\d{1,6}/,ad=/\d+/,bd=/[+-]?\d+/,cd=/Z|[+-]\d\d:?\d\d/gi,dd=/[+-]?\d+(\.\d{1,3})?/,ed=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,fd={},gd={},hd=0,id=1,jd=2,kd=3,ld=4,md=5,nd=6;J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),J("MMMM",0,0,function(a){return this.localeData().months(this,a)}),B("month","M"),P("M",Yc),P("MM",Yc,Uc),P("MMM",ed),P("MMMM",ed),S(["M","MM"],function(a,b){b[id]=s(a)-1}),S(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[id]=e:l(c).invalidMonth=a});var od="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),qd={};c.suppressDeprecationWarnings=!1;var rd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],td=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ud=/^\/?Date\((\-?\d+)/i;c.createFromInputFallback=ca("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),B("year","y"),P("Y",bd),P("YY",Yc,Uc),P("YYYY",$c,Wc),P("YYYYY",_c,Xc),P("YYYYYY",_c,Xc),S(["YYYYY","YYYYYY"],hd),S("YYYY",function(a,b){b[hd]=2===a.length?c.parseTwoDigitYear(a):s(a)}),S("YY",function(a,b){b[hd]=c.parseTwoDigitYear(a)}),c.parseTwoDigitYear=function(a){return s(a)+(s(a)>68?1900:2e3)};var vd=E("FullYear",!1);J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),B("week","w"),B("isoWeek","W"),P("w",Yc),P("ww",Yc,Uc),P("W",Yc),P("WW",Yc,Uc),T(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=s(a)});var wd={dow:0,doy:6};J("DDD",["DDDD",3],"DDDo","dayOfYear"),B("dayOfYear","DDD"),P("DDD",Zc),P("DDDD",Vc),S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=s(a)}),c.ISO_8601=function(){};var xd=ca("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Fa.apply(null,arguments);return a<this?this:a}),yd=ca("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Fa.apply(null,arguments);return a>this?this:a});La("Z",":"),La("ZZ",""),P("Z",cd),P("ZZ",cd),S(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ma(a)});var zd=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var Ad=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Bd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;$a.fn=Ja.prototype;var Cd=cb(1,"add"),Dd=cb(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ed=ca("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Fb("gggg","weekYear"),Fb("ggggg","weekYear"),Fb("GGGG","isoWeekYear"),Fb("GGGGG","isoWeekYear"),B("weekYear","gg"),B("isoWeekYear","GG"),P("G",bd),P("g",bd),P("GG",Yc,Uc),P("gg",Yc,Uc),P("GGGG",$c,Wc),P("gggg",$c,Wc),P("GGGGG",_c,Xc),P("ggggg",_c,Xc),T(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=s(a)}),T(["gg","GG"],function(a,b,d,e){b[e]=c.parseTwoDigitYear(a)}),J("Q",0,0,"quarter"),B("quarter","Q"),P("Q",Tc),S("Q",function(a,b){b[id]=3*(s(a)-1)}),J("D",["DD",2],"Do","date"),B("date","D"),P("D",Yc),P("DD",Yc,Uc),P("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),S(["D","DD"],jd),S("Do",function(a,b){b[jd]=s(a.match(Yc)[0],10)});var Fd=E("Date",!0);J("d",0,"do","day"),J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),B("day","d"),B("weekday","e"),B("isoWeekday","E"),P("d",Yc),P("e",Yc),P("E",Yc),P("dd",ed),P("ddd",ed),P("dddd",ed),T(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:l(c).invalidWeekday=a}),T(["d","e","E"],function(a,b,c,d){b[d]=s(a)});var Gd="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Hd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Id="Su_Mo_Tu_We_Th_Fr_Sa".split("_");J("H",["HH",2],0,"hour"),J("h",["hh",2],0,function(){return this.hours()%12||12}),Ub("a",!0),Ub("A",!1),B("hour","h"),P("a",Vb),P("A",Vb),P("H",Yc),P("h",Yc),P("HH",Yc,Uc),P("hh",Yc,Uc),S(["H","HH"],kd),S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),S(["h","hh"],function(a,b,c){b[kd]=s(a),l(c).bigHour=!0});var Jd=/[ap]\.?m?\.?/i,Kd=E("Hours",!0);J("m",["mm",2],0,"minute"),B("minute","m"),P("m",Yc),P("mm",Yc,Uc),S(["m","mm"],ld);var Ld=E("Minutes",!1);J("s",["ss",2],0,"second"),B("second","s"),P("s",Yc),P("ss",Yc,Uc),S(["s","ss"],md);var Md=E("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),B("millisecond","ms"),P("S",Zc,Tc),P("SS",Zc,Uc),P("SSS",Zc,Vc);var Nd;for(Nd="SSSS";Nd.length<=9;Nd+="S")P(Nd,ad);for(Nd="S";Nd.length<=9;Nd+="S")S(Nd,Yb);var Od=E("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var Pd=p.prototype;Pd.add=Cd,Pd.calendar=eb,Pd.clone=fb,Pd.diff=kb,Pd.endOf=wb,Pd.format=ob,Pd.from=pb,Pd.fromNow=qb,Pd.to=rb,Pd.toNow=sb,Pd.get=H,Pd.invalidAt=Eb,Pd.isAfter=gb,Pd.isBefore=hb,Pd.isBetween=ib,Pd.isSame=jb,Pd.isValid=Cb,Pd.lang=Ed,Pd.locale=tb,Pd.localeData=ub,Pd.max=yd,Pd.min=xd,Pd.parsingFlags=Db,Pd.set=H,Pd.startOf=vb,Pd.subtract=Dd,Pd.toArray=Ab,Pd.toObject=Bb,Pd.toDate=zb,Pd.toISOString=nb,Pd.toJSON=nb,Pd.toString=mb,Pd.unix=yb,Pd.valueOf=xb,Pd.year=vd,Pd.isLeapYear=ka,Pd.weekYear=Hb,Pd.isoWeekYear=Ib,Pd.quarter=Pd.quarters=Lb,Pd.month=$,Pd.daysInMonth=_,Pd.week=Pd.weeks=pa,Pd.isoWeek=Pd.isoWeeks=qa,Pd.weeksInYear=Kb,Pd.isoWeeksInYear=Jb,Pd.date=Fd,Pd.day=Pd.days=Rb,Pd.weekday=Sb,Pd.isoWeekday=Tb,Pd.dayOfYear=sa,Pd.hour=Pd.hours=Kd,Pd.minute=Pd.minutes=Ld,Pd.second=Pd.seconds=Md,Pd.millisecond=Pd.milliseconds=Od,Pd.utcOffset=Pa,Pd.utc=Ra,Pd.local=Sa,Pd.parseZone=Ta,Pd.hasAlignedHourOffset=Ua,Pd.isDST=Va,Pd.isDSTShifted=Wa,Pd.isLocal=Xa,Pd.isUtcOffset=Ya,Pd.isUtc=Za,Pd.isUTC=Za,Pd.zoneAbbr=Zb,Pd.zoneName=$b,Pd.dates=ca("dates accessor is deprecated. Use date instead.",Fd),Pd.months=ca("months accessor is deprecated. Use month instead",$),Pd.years=ca("years accessor is deprecated. Use year instead",vd),Pd.zone=ca("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Qa);var Qd=Pd,Rd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Sd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Td="Invalid date",Ud="%d",Vd=/\d{1,2}/,Wd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Xd=u.prototype;Xd._calendar=Rd,Xd.calendar=bc,Xd._longDateFormat=Sd,Xd.longDateFormat=cc,Xd._invalidDate=Td,Xd.invalidDate=dc,Xd._ordinal=Ud,Xd.ordinal=ec,Xd._ordinalParse=Vd,Xd.preparse=fc,Xd.postformat=fc,Xd._relativeTime=Wd,Xd.relativeTime=gc,Xd.pastFuture=hc,Xd.set=ic,Xd.months=W,Xd._months=od,Xd.monthsShort=X,Xd._monthsShort=pd,Xd.monthsParse=Y,Xd.week=ma,Xd._week=wd,Xd.firstDayOfYear=oa,Xd.firstDayOfWeek=na,Xd.weekdays=Nb,Xd._weekdays=Gd,Xd.weekdaysMin=Pb,Xd._weekdaysMin=Id,Xd.weekdaysShort=Ob,Xd._weekdaysShort=Hd,Xd.weekdaysParse=Qb,Xd.isPM=Wb,Xd._meridiemParse=Jd,Xd.meridiem=Xb,y("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),c.lang=ca("moment.lang is deprecated. Use moment.locale instead.",y),c.langData=ca("moment.langData is deprecated. Use moment.localeData instead.",A);var Yd=Math.abs,Zd=Ac("ms"),$d=Ac("s"),_d=Ac("m"),ae=Ac("h"),be=Ac("d"),ce=Ac("w"),de=Ac("M"),ee=Ac("y"),fe=Cc("milliseconds"),ge=Cc("seconds"),he=Cc("minutes"),ie=Cc("hours"),je=Cc("days"),ke=Cc("months"),le=Cc("years"),me=Math.round,ne={s:45,m:45,h:22,d:26,M:11},oe=Math.abs,pe=Ja.prototype;pe.abs=qc,pe.add=sc,pe.subtract=tc,pe.as=yc,pe.asMilliseconds=Zd,pe.asSeconds=$d,pe.asMinutes=_d,pe.asHours=ae,pe.asDays=be,pe.asWeeks=ce,pe.asMonths=de,pe.asYears=ee,pe.valueOf=zc,pe._bubble=vc,pe.get=Bc,pe.milliseconds=fe,pe.seconds=ge,pe.minutes=he,pe.hours=ie,pe.days=je,pe.weeks=Dc,pe.months=ke,pe.years=le,pe.humanize=Hc,pe.toISOString=Ic,pe.toString=Ic,pe.toJSON=Ic,pe.locale=tb,pe.localeData=ub,pe.toIsoString=ca("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ic),pe.lang=Ed,J("X",0,0,"unix"),J("x",0,0,"valueOf"),P("x",bd),P("X",dd),S("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),S("x",function(a,b,c){c._d=new Date(s(a))}),c.version="2.10.6",d(Fa),c.fn=Qd,c.min=Ha,c.max=Ia,c.utc=j,c.unix=_b,c.months=lc,c.isDate=f,c.locale=y,c.invalid=n,c.duration=$a,c.isMoment=q,c.weekdays=nc,c.parseZone=ac,c.localeData=A,c.isDuration=Ka,c.monthsShort=mc,c.weekdaysMin=pc,c.defineLocale=z,c.weekdaysShort=oc,c.normalizeUnits=C,c.relativeTimeThreshold=Gc;var qe=c;return qe})},{}],"node-polyglot":[function(a,b,c){b.exports=a("./lib/polyglot")},{"./lib/polyglot":193}],"perfect-scrollbar":[function(a,b,c){"use strict";b.exports=a("./src/js/main")},{"./src/js/main":208}],"queue-async":[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?b.exports=d():"function"==typeof define&&define.amd?define("queue",d):a.queue=d()}(this,function(){"use strict";function a(){}function b(b){function c(){if(!k)for(;k=o&&p<b;){var a=q+p,c=m[a],d=c.length-1,f=c[d];c[d]=g(a),--o,++p,m[a]=f.apply(null,c)||e}}function g(a){return function(b,d){if(!m[a])throw new Error;--p,++q,m[a]=null,null==l&&(null!=b?h(b):(n[a]=d,o?c():p||i()))}}function h(a){l=a,o=NaN,i()}function i(){null!=l?r(l):s?r(null,n):r.apply(null,f.concat(n))}if(!(b>=1))throw new Error;var j,k,l,m=[],n=[],o=0,p=0,q=0,r=a,s=!0;return j={defer:function(b){if(r!==a)throw new Error;var e=d.call(arguments,1);return e.push(b),++o,m.push(e),c(),j},abort:function(){if(null==l){for(var a,b=q+p;--b>=0;)(a=m[b])&&a.abort&&a.abort();h(new Error("abort"))}return j},await:function(b){if(r!==a)throw new Error;return r=b,s=!1,o||p||i(),j},awaitAll:function(b){if(r!==a)throw new Error;return r=b,s=!0,o||p||i(),j}}}function c(a){return b(arguments.length?+a:1/0)}var d=[].slice,e={},f=[null];return c.version="1.2.1",c})},{}],tangram:[function(a,b,c){(function(d){!function(){var e="undefined"!=typeof b&&b.exports||"undefined"!=typeof window;if(e)var f=arguments.callee.toString(),g=void 0!==document.currentScript?document.currentScript.src:"",h="tangram.debug.js.map";!function(a){if("object"==typeof c&&"undefined"!=typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof d?d:"undefined"!=typeof self?self:this,e.Tangram=a()}}(function(){var b;return function b(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b?b:a)},l,l.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b){"use strict";function c(){if(h.length)throw h.shift()}function d(a){var b;b=g.length?g.pop():new e,b.task=a,f(b)}function e(){this.task=null}var f=a("./raw"),g=[],h=[],i=f.makeRequestCallFromTimer(c);b.exports=d,e.prototype.call=function(){try{this.task.call()}catch(a){d.onerror?d.onerror(a):(h.push(a),i())}finally{this.task=null,g[g.length]=this}}},{"./raw":2}],2:[function(a,b){(function(a){"use strict";function c(a){h.length||(g(),i=!0),h[h.length]=a}function d(){for(;j<h.length;){var a=j;if(j+=1,h[a].call(),j>k){for(var b=0,c=h.length-j;c>b;b++)h[b]=h[b+j];h.length-=j,j=0}}h.length=0,j=0,i=!1}function e(a){var b=1,c=new m(a),d=document.createTextNode("");return c.observe(d,{characterData:!0}),function(){b=-b,d.data=b}}function f(a){return function(){function b(){clearTimeout(c),clearInterval(d),a()}var c=setTimeout(b,0),d=setInterval(b,50)}}b.exports=c;var g,h=[],i=!1,j=0,k=1024,l="undefined"!=typeof a?a:self,m=l.MutationObserver||l.WebKitMutationObserver;g="function"==typeof m?e(d):f(d),c.requestFlush=g,c.makeRequestCallFromTimer=f}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function e(a){return 3*a.length/4-d(a)}function f(a){var b,c,e,f,g,h,i=a.length;g=d(a),h=new l(3*i/4-g),e=g>0?i-4:i;var j=0;for(b=0,c=0;e>b;b+=4,c+=3)f=k[a.charCodeAt(b)]<<18|k[a.charCodeAt(b+1)]<<12|k[a.charCodeAt(b+2)]<<6|k[a.charCodeAt(b+3)],h[j++]=f>>16&255,h[j++]=f>>8&255,h[j++]=255&f;return 2===g?(f=k[a.charCodeAt(b)]<<2|k[a.charCodeAt(b+1)]>>4,h[j++]=255&f):1===g&&(f=k[a.charCodeAt(b)]<<10|k[a.charCodeAt(b+1)]<<4|k[a.charCodeAt(b+2)]>>2,h[j++]=f>>8&255,h[j++]=255&f),h}function g(a){return j[a>>18&63]+j[a>>12&63]+j[a>>6&63]+j[63&a]}function h(a,b,c){for(var d,e=[],f=b;c>f;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(g(d));return e.join("")}function i(a){for(var b,c=a.length,d=c%3,e="",f=[],g=16383,i=0,k=c-d;k>i;i+=g)f.push(h(a,i,i+g>k?k:i+g));return 1===d?(b=a[c-1],e+=j[b>>2],e+=j[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=j[b>>10],e+=j[b>>4&63],e+=j[b<<2&63],e+="="),f.push(e),f.join("")}c.byteLength=e,c.toByteArray=f,c.fromByteArray=i;for(var j=[],k=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=m.length;o>n;++n)j[n]=m[n],k[m.charCodeAt(n)]=n;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],4:[function(){},{}],5:[function(a,b,c){(function(b){"use strict";function d(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(a){return!1}}function e(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a,b){if(e()<b)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=g.prototype):(null===a&&(a=new g(b)),a.length=b),a}function g(a,b,c){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(a,b,c);if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return k(this,a)}return h(this,a,b,c)}function h(a,b,c,d){if("number"==typeof b)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer?n(a,b,c,d):"string"==typeof b?l(a,b,c):o(a,b)}function i(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative')}function j(a,b,c,d){return i(b),0>=b?f(a,b):void 0!==c?"string"==typeof d?f(a,b).fill(c,d):f(a,b).fill(c):f(a,b)}function k(a,b){if(i(b),a=f(a,0>b?0:0|p(b)),!g.TYPED_ARRAY_SUPPORT)for(var c=0;b>c;++c)a[c]=0;return a}function l(a,b,c){if(("string"!=typeof c||""===c)&&(c="utf8"),!g.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var d=0|r(b,c);a=f(a,d);var e=a.write(b,c);return e!==d&&(a=a.slice(0,e)),a}function m(a,b){var c=b.length<0?0:0|p(b.length);a=f(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function n(a,b,c,d){if(b.byteLength,0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");return b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d),g.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=g.prototype):a=m(a,b),a}function o(a,b){if(g.isBuffer(b)){var c=0|p(b.length);return a=f(a,c),0===a.length?a:(b.copy(a,0,0,c),a)}if(b){if("undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return"number"!=typeof b.length||Y(b.length)?f(a,0):m(a,b);if("Buffer"===b.type&&_(b.data))return m(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function q(a){
return+a!=a&&(a=0),g.alloc(+a)}function r(a,b){if(g.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return T(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return W(a).length;default:if(d)return T(a).length;b=(""+b).toLowerCase(),d=!0}}function s(a,b,c){var d=!1;if((void 0===b||0>b)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),0>=c)return"";if(c>>>=0,b>>>=0,b>=c)return"";for(a||(a="utf8");;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"latin1":case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:-2147483648>c&&(c=-2147483648),c=+c,isNaN(c)&&(c=e?0:a.length-1),0>c&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(0>c){if(!e)return-1;c=0}if("string"==typeof b&&(b=g.from(b,d)),g.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return b&=255,g.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;h>j;j++)if(f(a,j)===f(b,-1===k?0:j-k)){if(-1===k&&(k=j),j-k+1===i)return k*g}else-1!==k&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;i>m;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function w(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;++g){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))return g;a[c+g]=h}return g}function x(a,b,c,d){return X(T(b,a.length-c),a,c,d)}function y(a,b,c,d){return X(U(b),a,c,d)}function z(a,b,c,d){return y(a,b,c,d)}function A(a,b,c,d){return X(W(b),a,c,d)}function B(a,b,c,d){return X(V(b,a.length-c),a,c,d)}function C(a,b,c){return Z.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function D(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;c>e;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(c>=e+h){var i,j,k,l;switch(h){case 1:128>f&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(55296>l||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&1114112>l&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return E(d)}function E(a){var b=a.length;if(aa>=b)return String.fromCharCode.apply(String,a);for(var c="",d=0;b>d;)c+=String.fromCharCode.apply(String,a.slice(d,d+=aa));return c}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;++e)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;++e)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;++f)e+=S(a[f]);return e}function I(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function J(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function K(a,b,c,d,e,f){if(!g.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||f>b)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function L(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function M(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function N(a,b,c,d){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range")}function O(a,b,c,d,e){return e||N(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(a,b,c,d,23,4),c+4}function P(a,b,c,d,e){return e||N(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(a,b,c,d,52,8),c+8}function Q(a){if(a=R(a).replace(ba,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function R(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function S(a){return 16>a?"0"+a.toString(16):a.toString(16)}function T(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;++g){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(1114112>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function U(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function V(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function W(a){return Z.toByteArray(Q(a))}function X(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Y(a){return a!==a}var Z=a("base64-js"),$=a("ieee754"),_=a("isarray");c.Buffer=g,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50,g.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:d(),c.kMaxLength=e(),g.poolSize=8192,g._augment=function(a){return a.__proto__=g.prototype,a},g.from=function(a,b,c){return h(null,a,b,c)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&g[Symbol.species]===g&&Object.defineProperty(g,Symbol.species,{value:null,configurable:!0})),g.alloc=function(a,b,c){return j(null,a,b,c)},g.allocUnsafe=function(a){return k(null,a)},g.allocUnsafeSlow=function(a){return k(null,a)},g.isBuffer=function(a){return!(null==a||!a._isBuffer)},g.compare=function(a,b){if(!g.isBuffer(a)||!g.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);f>e;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return d>c?-1:c>d?1:0},g.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(a,b){if(!_(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return g.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=g.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var f=a[c];if(!g.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(d,e),e+=f.length}return d},g.byteLength=r,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;a>b;b+=2)t(this,b,b+1);return this},g.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;a>b;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},g.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;a>b;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},g.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?D(this,0,a):s.apply(this,arguments)},g.prototype.equals=function(a){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===g.compare(this,a)},g.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},g.prototype.compare=function(a,b,c,d,e){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var f=e-d,h=c-b,i=Math.min(f,h),j=this.slice(d,e),k=a.slice(b,c),l=0;i>l;++l)if(j[l]!==k[l]){f=j[l],h=k[l];break}return h>f?-1:f>h?1:0},g.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},g.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},g.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},g.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":return y(this,a,b,c);case"latin1":case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var aa=4096;g.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var d;if(g.TYPED_ARRAY_SUPPORT)d=this.subarray(a,b),d.__proto__=g.prototype;else{var e=b-a;d=new g(e,void 0);for(var f=0;e>f;++f)d[f]=this[f+a]}return d},g.prototype.readUIntLE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},g.prototype.readUIntBE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},g.prototype.readUInt8=function(a,b){return b||J(a,1,this.length),this[a]},g.prototype.readUInt16LE=function(a,b){return b||J(a,2,this.length),this[a]|this[a+1]<<8},g.prototype.readUInt16BE=function(a,b){return b||J(a,2,this.length),this[a]<<8|this[a+1]},g.prototype.readUInt32LE=function(a,b){return b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},g.prototype.readUInt32BE=function(a,b){return b||J(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},g.prototype.readIntLE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},g.prototype.readIntBE=function(a,b,c){a|=0,b|=0,c||J(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},g.prototype.readInt8=function(a,b){return b||J(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},g.prototype.readInt16LE=function(a,b){b||J(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt16BE=function(a,b){b||J(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt32LE=function(a,b){return b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},g.prototype.readInt32BE=function(a,b){return b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},g.prototype.readFloatLE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!0,23,4)},g.prototype.readFloatBE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!1,23,4)},g.prototype.readDoubleLE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!0,52,8)},g.prototype.readDoubleBE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!1,52,8)},g.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b|=0,c|=0,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},g.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b|=0,c|=0,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},g.prototype.writeUInt8=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,1,255,0),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},g.prototype.writeUInt16LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeUInt16BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeUInt32LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):M(this,a,b,!0),b+4},g.prototype.writeUInt32BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b|=0,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)0>a&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b|=0,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)0>a&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeInt8=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,1,127,-128),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=255&a,b+1},g.prototype.writeInt16LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeInt16BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeInt32LE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):M(this,a,b,!0),b+4},g.prototype.writeInt32BE=function(a,b,c){return a=+a,b|=0,c||K(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeFloatLE=function(a,b,c){return O(this,a,b,!0,c)},g.prototype.writeFloatBE=function(a,b,c){return O(this,a,b,!1,c)},g.prototype.writeDoubleLE=function(a,b,c){return P(this,a,b,!0,c)},g.prototype.writeDoubleBE=function(a,b,c){return P(this,a,b,!1,c)},g.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&c>d&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&b>c&&d>b)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(1e3>f||!g.TYPED_ARRAY_SUPPORT)for(e=0;f>e;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},g.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!g.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(b>=c)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var f;if("number"==typeof a)for(f=b;c>f;++f)this[f]=a;else{var h=g.isBuffer(a)?a:T(new g(a,d).toString()),i=h.length;for(f=0;c-b>f;++f)this[f+b]=h[f%i]}return this};var ba=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":3,ieee754:94,isarray:6}],6:[function(a,b){var c={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==c.call(a)}},{}],7:[function(a,b){a("../modules/es6.object.to-string"),a("../modules/es6.string.iterator"),a("../modules/web.dom.iterable"),a("../modules/es6.promise"),b.exports=a("../modules/_core").Promise},{"../modules/_core":15,"../modules/es6.object.to-string":67,"../modules/es6.promise":68,"../modules/es6.string.iterator":69,"../modules/web.dom.iterable":70}],8:[function(a,b){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],9:[function(a,b){var c=a("./_wks")("unscopables"),d=Array.prototype;void 0==d[c]&&a("./_hide")(d,c,{}),b.exports=function(a){d[c][a]=!0}},{"./_hide":26,"./_wks":64}],10:[function(a,b){b.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}},{}],11:[function(a,b){var c=a("./_is-object");b.exports=function(a){if(!c(a))throw TypeError(a+" is not an object!");return a}},{"./_is-object":32}],12:[function(a,b){var c=a("./_to-iobject"),d=a("./_to-length"),e=a("./_to-index");b.exports=function(a){return function(b,f,g){var h,i=c(b),j=d(i.length),k=e(g,j);if(a&&f!=f){for(;j>k;)if(h=i[k++],h!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===f)return a||k||0;return!a&&-1}}},{"./_to-index":57,"./_to-iobject":59,"./_to-length":60}],13:[function(a,b){var c=a("./_cof"),d=a("./_wks")("toStringTag"),e="Arguments"==c(function(){return arguments}()),f=function(a,b){try{return a[b]}catch(a){}};b.exports=function(a){var b,g,h;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(g=f(b=Object(a),d))?g:e?c(b):"Object"==(h=c(b))&&"function"==typeof b.callee?"Arguments":h}},{"./_cof":14,"./_wks":64}],14:[function(a,b){var c={}.toString;b.exports=function(a){return c.call(a).slice(8,-1)}},{}],15:[function(a,b){var c=b.exports={version:"2.4.0"};"number"==typeof __e&&(__e=c)},{}],16:[function(a,b){var c=a("./_a-function");b.exports=function(a,b,d){if(c(a),void 0===b)return a;switch(d){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{"./_a-function":8}],17:[function(a,b){b.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},{}],18:[function(a,b){b.exports=!a("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":22}],19:[function(a,b){var c=a("./_is-object"),d=a("./_global").document,e=c(d)&&c(d.createElement);b.exports=function(a){return e?d.createElement(a):{}}},{"./_global":24,"./_is-object":32}],20:[function(a,b){b.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],21:[function(a,b){var c=a("./_global"),d=a("./_core"),e=a("./_hide"),f=a("./_redefine"),g=a("./_ctx"),h="prototype",i=function(a,b,j){var k,l,m,n,o=a&i.F,p=a&i.G,q=a&i.S,r=a&i.P,s=a&i.B,t=p?c:q?c[b]||(c[b]={}):(c[b]||{})[h],u=p?d:d[b]||(d[b]={}),v=u[h]||(u[h]={});p&&(j=b);for(k in j)l=!o&&t&&void 0!==t[k],m=(l?t:j)[k],n=s&&l?g(m,c):r&&"function"==typeof m?g(Function.call,m):m,t&&f(t,k,m,a&i.U),u[k]!=m&&e(u,k,n),r&&v[k]!=m&&(v[k]=m)};c.core=d,i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,b.exports=i},{"./_core":15,"./_ctx":16,"./_global":24,"./_hide":26,"./_redefine":49}],22:[function(a,b){b.exports=function(a){try{return!!a()}catch(a){return!0}}},{}],23:[function(a,b,c){var d=a("./_ctx"),e=a("./_iter-call"),f=a("./_is-array-iter"),g=a("./_an-object"),h=a("./_to-length"),i=a("./core.get-iterator-method"),j={},k={},c=b.exports=function(a,b,c,l,m){var n,o,p,q,r=m?function(){return a}:i(a),s=d(c,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(f(r)){for(n=h(a.length);n>t;t++)if(q=b?s(g(o=a[t])[0],o[1]):s(a[t]),q===j||q===k)return q}else for(p=r.call(a);!(o=p.next()).done;)if(q=e(p,s,o.value,b),q===j||q===k)return q};c.BREAK=j,c.RETURN=k},{"./_an-object":11,"./_ctx":16,"./_is-array-iter":31,"./_iter-call":33,"./_to-length":60,"./core.get-iterator-method":65}],24:[function(a,b){var c=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},{}],25:[function(a,b){var c={}.hasOwnProperty;b.exports=function(a,b){return c.call(a,b)}},{}],26:[function(a,b){var c=a("./_object-dp"),d=a("./_property-desc");b.exports=a("./_descriptors")?function(a,b,e){return c.f(a,b,d(1,e))}:function(a,b,c){return a[b]=c,a}},{"./_descriptors":18,"./_object-dp":42,"./_property-desc":47}],27:[function(a,b){b.exports=a("./_global").document&&document.documentElement},{"./_global":24}],28:[function(a,b){b.exports=!a("./_descriptors")&&!a("./_fails")(function(){return 7!=Object.defineProperty(a("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":18,"./_dom-create":19,"./_fails":22}],29:[function(a,b){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],30:[function(a,b){var c=a("./_cof");b.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==c(a)?a.split(""):Object(a)}},{"./_cof":14}],31:[function(a,b){var c=a("./_iterators"),d=a("./_wks")("iterator"),e=Array.prototype;b.exports=function(a){return void 0!==a&&(c.Array===a||e[d]===a)}},{"./_iterators":38,"./_wks":64}],32:[function(a,b){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],33:[function(a,b){var c=a("./_an-object");b.exports=function(a,b,d,e){try{return e?b(c(d)[0],d[1]):b(d)}catch(b){var f=a.return;throw void 0!==f&&c(f.call(a)),b}}},{"./_an-object":11}],34:[function(a,b){"use strict";var c=a("./_object-create"),d=a("./_property-desc"),e=a("./_set-to-string-tag"),f={};a("./_hide")(f,a("./_wks")("iterator"),function(){return this}),b.exports=function(a,b,g){a.prototype=c(f,{next:d(1,g)}),e(a,b+" Iterator")}},{"./_hide":26,"./_object-create":41,"./_property-desc":47,"./_set-to-string-tag":51,"./_wks":64}],35:[function(a,b){"use strict";var c=a("./_library"),d=a("./_export"),e=a("./_redefine"),f=a("./_hide"),g=a("./_has"),h=a("./_iterators"),i=a("./_iter-create"),j=a("./_set-to-string-tag"),k=a("./_object-gpo"),l=a("./_wks")("iterator"),m=!([].keys&&"next"in[].keys()),n="@@iterator",o="keys",p="values",q=function(){return this};b.exports=function(a,b,r,s,t,u,v){i(r,b,s);var w,x,y,z=function(a){if(!m&&a in D)return D[a];switch(a){case o:return function(){return new r(this,a)};case p:return function(){return new r(this,a)}}return function(){return new r(this,a)}},A=b+" Iterator",B=t==p,C=!1,D=a.prototype,E=D[l]||D[n]||t&&D[t],F=E||z(t),G=t?B?z("entries"):F:void 0,H="Array"==b?D.entries||E:E;if(H&&(y=k(H.call(new a)),y!==Object.prototype&&(j(y,A,!0),c||g(y,l)||f(y,l,q))),B&&E&&E.name!==p&&(C=!0,F=function(){return E.call(this)}),c&&!v||!m&&!C&&D[l]||f(D,l,F),h[b]=F,h[A]=q,t)if(w={values:B?F:z(p),keys:u?F:z(o),entries:G},v)for(x in w)x in D||e(D,x,w[x]);else d(d.P+d.F*(m||C),b,w);return w}},{"./_export":21,"./_has":25,"./_hide":26,"./_iter-create":34,"./_iterators":38,"./_library":39,"./_object-gpo":44,"./_redefine":49,"./_set-to-string-tag":51,"./_wks":64}],36:[function(a,b){var c=a("./_wks")("iterator"),d=!1;try{var e=[7][c]();e.return=function(){d=!0},Array.from(e,function(){throw 2})}catch(a){}b.exports=function(a,b){if(!b&&!d)return!1;var e=!1;try{var f=[7],g=f[c]();g.next=function(){return{done:e=!0}},f[c]=function(){return g},a(f)}catch(a){}return e}},{"./_wks":64}],37:[function(a,b){b.exports=function(a,b){return{value:b,done:!!a}}},{}],38:[function(a,b){b.exports={}},{}],39:[function(a,b){b.exports=!1},{}],40:[function(a,b){var c=a("./_global"),d=a("./_task").set,e=c.MutationObserver||c.WebKitMutationObserver,f=c.process,g=c.Promise,h="process"==a("./_cof")(f);b.exports=function(){var a,b,i,j=function(){var c,d;for(h&&(c=f.domain)&&c.exit();a;){d=a.fn,a=a.next;try{d()}catch(c){throw a?i():b=void 0,c}}b=void 0,c&&c.enter()};if(h)i=function(){f.nextTick(j)};else if(e){var k=!0,l=document.createTextNode("");new e(j).observe(l,{characterData:!0}),i=function(){l.data=k=!k}}else if(g&&g.resolve){var m=g.resolve();i=function(){m.then(j)}}else i=function(){d.call(c,j)};return function(c){var d={fn:c,next:void 0};b&&(b.next=d),a||(a=d,i()),b=d}}},{"./_cof":14,"./_global":24,"./_task":56}],41:[function(a,b){var c=a("./_an-object"),d=a("./_object-dps"),e=a("./_enum-bug-keys"),f=a("./_shared-key")("IE_PROTO"),g=function(){},h="prototype",i=function(){var b,c=a("./_dom-create")("iframe"),d=e.length,f="<",g=">";for(c.style.display="none",a("./_html").appendChild(c),c.src="javascript:",b=c.contentWindow.document,b.open(),b.write(f+"script"+g+"document.F=Object"+f+"/script"+g),b.close(),i=b.F;d--;)delete i[h][e[d]];return i()};b.exports=Object.create||function(a,b){var e;return null!==a?(g[h]=c(a),e=new g,g[h]=null,e[f]=a):e=i(),void 0===b?e:d(e,b)}},{"./_an-object":11,"./_dom-create":19,"./_enum-bug-keys":20,"./_html":27,"./_object-dps":43,"./_shared-key":52}],42:[function(a,b,c){var d=a("./_an-object"),e=a("./_ie8-dom-define"),f=a("./_to-primitive"),g=Object.defineProperty;c.f=a("./_descriptors")?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},{"./_an-object":11,"./_descriptors":18,"./_ie8-dom-define":28,"./_to-primitive":62}],43:[function(a,b){var c=a("./_object-dp"),d=a("./_an-object"),e=a("./_object-keys");b.exports=a("./_descriptors")?Object.defineProperties:function(a,b){d(a);for(var f,g=e(b),h=g.length,i=0;h>i;)c.f(a,f=g[i++],b[f]);return a}},{"./_an-object":11,"./_descriptors":18,"./_object-dp":42,"./_object-keys":46}],44:[function(a,b){var c=a("./_has"),d=a("./_to-object"),e=a("./_shared-key")("IE_PROTO"),f=Object.prototype;b.exports=Object.getPrototypeOf||function(a){return a=d(a),c(a,e)?a[e]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?f:null}},{"./_has":25,"./_shared-key":52,"./_to-object":61}],45:[function(a,b){var c=a("./_has"),d=a("./_to-iobject"),e=a("./_array-includes")(!1),f=a("./_shared-key")("IE_PROTO");b.exports=function(a,b){var g,h=d(a),i=0,j=[];for(g in h)g!=f&&c(h,g)&&j.push(g);for(;b.length>i;)c(h,g=b[i++])&&(~e(j,g)||j.push(g));return j}},{"./_array-includes":12,"./_has":25,"./_shared-key":52,"./_to-iobject":59}],46:[function(a,b){var c=a("./_object-keys-internal"),d=a("./_enum-bug-keys");b.exports=Object.keys||function(a){return c(a,d)}},{"./_enum-bug-keys":20,"./_object-keys-internal":45}],47:[function(a,b){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],48:[function(a,b){var c=a("./_redefine");b.exports=function(a,b,d){for(var e in b)c(a,e,b[e],d);return a}},{"./_redefine":49}],49:[function(a,b){var c=a("./_global"),d=a("./_hide"),e=a("./_has"),f=a("./_uid")("src"),g="toString",h=Function[g],i=(""+h).split(g);a("./_core").inspectSource=function(a){return h.call(a)},(b.exports=function(a,b,g,h){var j="function"==typeof g;j&&(e(g,"name")||d(g,"name",b)),a[b]!==g&&(j&&(e(g,f)||d(g,f,a[b]?""+a[b]:i.join(String(b)))),a===c?a[b]=g:h?a[b]?a[b]=g:d(a,b,g):(delete a[b],d(a,b,g)))})(Function.prototype,g,function(){return"function"==typeof this&&this[f]||h.call(this)})},{"./_core":15,"./_global":24,"./_has":25,"./_hide":26,"./_uid":63}],50:[function(a,b){"use strict";var c=a("./_global"),d=a("./_object-dp"),e=a("./_descriptors"),f=a("./_wks")("species");b.exports=function(a){var b=c[a];e&&b&&!b[f]&&d.f(b,f,{configurable:!0,get:function(){return this}})}},{"./_descriptors":18,"./_global":24,"./_object-dp":42,"./_wks":64}],51:[function(a,b){var c=a("./_object-dp").f,d=a("./_has"),e=a("./_wks")("toStringTag");b.exports=function(a,b,f){a&&!d(a=f?a:a.prototype,e)&&c(a,e,{configurable:!0,value:b})}},{"./_has":25,"./_object-dp":42,"./_wks":64}],52:[function(a,b){var c=a("./_shared")("keys"),d=a("./_uid");b.exports=function(a){return c[a]||(c[a]=d(a))}},{"./_shared":53,"./_uid":63}],53:[function(a,b){var c=a("./_global"),d="__core-js_shared__",e=c[d]||(c[d]={});b.exports=function(a){return e[a]||(e[a]={})}},{"./_global":24}],54:[function(a,b){var c=a("./_an-object"),d=a("./_a-function"),e=a("./_wks")("species");b.exports=function(a,b){var f,g=c(a).constructor;return void 0===g||void 0==(f=c(g)[e])?b:d(f)}},{"./_a-function":8,"./_an-object":11,"./_wks":64}],55:[function(a,b){var c=a("./_to-integer"),d=a("./_defined");b.exports=function(a){return function(b,e){var f,g,h=String(d(b)),i=c(e),j=h.length;return 0>i||i>=j?a?"":void 0:(f=h.charCodeAt(i),55296>f||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}},{"./_defined":17,"./_to-integer":58}],56:[function(a,b){var c,d,e,f=a("./_ctx"),g=a("./_invoke"),h=a("./_html"),i=a("./_dom-create"),j=a("./_global"),k=j.process,l=j.setImmediate,m=j.clearImmediate,n=j.MessageChannel,o=0,p={},q="onreadystatechange",r=function(){var a=+this;if(p.hasOwnProperty(a)){var b=p[a];delete p[a],b()}},s=function(a){r.call(a.data)};l&&m||(l=function(a){for(var b=[],d=1;arguments.length>d;)b.push(arguments[d++]);return p[++o]=function(){g("function"==typeof a?a:Function(a),b)},c(o),o},m=function(a){delete p[a]},"process"==a("./_cof")(k)?c=function(a){k.nextTick(f(r,a,1))}:n?(d=new n,e=d.port2,d.port1.onmessage=s,c=f(e.postMessage,e,1)):j.addEventListener&&"function"==typeof postMessage&&!j.importScripts?(c=function(a){j.postMessage(a+"","*")},j.addEventListener("message",s,!1)):c=q in i("script")?function(a){h.appendChild(i("script"))[q]=function(){h.removeChild(this),r.call(a)}}:function(a){setTimeout(f(r,a,1),0)}),b.exports={set:l,clear:m}},{"./_cof":14,"./_ctx":16,"./_dom-create":19,"./_global":24,"./_html":27,"./_invoke":29}],57:[function(a,b){var c=a("./_to-integer"),d=Math.max,e=Math.min;b.exports=function(a,b){return a=c(a),0>a?d(a+b,0):e(a,b)}},{"./_to-integer":58}],58:[function(a,b){var c=Math.ceil,d=Math.floor;b.exports=function(a){return isNaN(a=+a)?0:(a>0?d:c)(a)}},{}],59:[function(a,b){var c=a("./_iobject"),d=a("./_defined");b.exports=function(a){return c(d(a))}},{"./_defined":17,"./_iobject":30}],
60:[function(a,b){var c=a("./_to-integer"),d=Math.min;b.exports=function(a){return a>0?d(c(a),9007199254740991):0}},{"./_to-integer":58}],61:[function(a,b){var c=a("./_defined");b.exports=function(a){return Object(c(a))}},{"./_defined":17}],62:[function(a,b){var c=a("./_is-object");b.exports=function(a,b){if(!c(a))return a;var d,e;if(b&&"function"==typeof(d=a.toString)&&!c(e=d.call(a)))return e;if("function"==typeof(d=a.valueOf)&&!c(e=d.call(a)))return e;if(!b&&"function"==typeof(d=a.toString)&&!c(e=d.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":32}],63:[function(a,b){var c=0,d=Math.random();b.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++c+d).toString(36))}},{}],64:[function(a,b){var c=a("./_shared")("wks"),d=a("./_uid"),e=a("./_global").Symbol,f="function"==typeof e,g=b.exports=function(a){return c[a]||(c[a]=f&&e[a]||(f?e:d)("Symbol."+a))};g.store=c},{"./_global":24,"./_shared":53,"./_uid":63}],65:[function(a,b){var c=a("./_classof"),d=a("./_wks")("iterator"),e=a("./_iterators");b.exports=a("./_core").getIteratorMethod=function(a){return void 0!=a?a[d]||a["@@iterator"]||e[c(a)]:void 0}},{"./_classof":13,"./_core":15,"./_iterators":38,"./_wks":64}],66:[function(a,b){"use strict";var c=a("./_add-to-unscopables"),d=a("./_iter-step"),e=a("./_iterators"),f=a("./_to-iobject");b.exports=a("./_iter-define")(Array,"Array",function(a,b){this._t=f(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,d(1)):"keys"==b?d(0,c):"values"==b?d(0,a[c]):d(0,[c,a[c]])},"values"),e.Arguments=e.Array,c("keys"),c("values"),c("entries")},{"./_add-to-unscopables":9,"./_iter-define":35,"./_iter-step":37,"./_iterators":38,"./_to-iobject":59}],67:[function(a){"use strict";var b=a("./_classof"),c={};c[a("./_wks")("toStringTag")]="z",c+""!="[object z]"&&a("./_redefine")(Object.prototype,"toString",function(){return"[object "+b(this)+"]"},!0)},{"./_classof":13,"./_redefine":49,"./_wks":64}],68:[function(a){"use strict";var b,c,d,e=a("./_library"),f=a("./_global"),g=a("./_ctx"),h=a("./_classof"),i=a("./_export"),j=a("./_is-object"),k=a("./_a-function"),l=a("./_an-instance"),m=a("./_for-of"),n=a("./_species-constructor"),o=a("./_task").set,p=a("./_microtask")(),q="Promise",r=f.TypeError,s=f.process,t=f[q],s=f.process,u="process"==h(s),v=function(){},w=!!function(){try{var b=t.resolve(1),c=(b.constructor={})[a("./_wks")("species")]=function(a){a(v,v)};return(u||"function"==typeof PromiseRejectionEvent)&&b.then(v)instanceof c}catch(a){}}(),x=function(a,b){return a===b||a===t&&b===d},y=function(a){var b;return!(!j(a)||"function"!=typeof(b=a.then))&&b},z=function(a){return x(t,a)?new A(a):new c(a)},A=c=function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw r("Bad Promise constructor");b=a,c=d}),this.resolve=k(b),this.reject=k(c)},B=function(a){try{a()}catch(a){return{error:a}}},C=function(a,b){if(!a._n){a._n=!0;var c=a._c;p(function(){for(var d=a._v,e=1==a._s,f=0,g=function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject,j=b.domain;try{g?(e||(2==a._h&&F(a),a._h=1),g===!0?c=d:(j&&j.enter(),c=g(d),j&&j.exit()),c===b.promise?i(r("Promise-chain cycle")):(f=y(c))?f.call(c,h,i):h(c)):i(d)}catch(a){i(a)}};c.length>f;)g(c[f++]);a._c=[],a._n=!1,b&&!a._h&&D(a)})}},D=function(a){o.call(f,function(){var b,c,d,e=a._v;if(E(a)&&(b=B(function(){u?s.emit("unhandledRejection",e,a):(c=f.onunhandledrejection)?c({promise:a,reason:e}):(d=f.console)&&d.error&&d.error("Unhandled promise rejection",e)}),a._h=u||E(a)?2:1),a._a=void 0,b)throw b.error})},E=function(a){if(1==a._h)return!1;for(var b,c=a._a||a._c,d=0;c.length>d;)if(b=c[d++],b.fail||!E(b.promise))return!1;return!0},F=function(a){o.call(f,function(){var b;u?s.emit("rejectionHandled",a):(b=f.onrejectionhandled)&&b({promise:a,reason:a._v})})},G=function(a){var b=this;b._d||(b._d=!0,b=b._w||b,b._v=a,b._s=2,b._a||(b._a=b._c.slice()),C(b,!0))},H=function(a){var b,c=this;if(!c._d){c._d=!0,c=c._w||c;try{if(c===a)throw r("Promise can't be resolved itself");(b=y(a))?p(function(){var d={_w:c,_d:!1};try{b.call(a,g(H,d,1),g(G,d,1))}catch(a){G.call(d,a)}}):(c._v=a,c._s=1,C(c,!1))}catch(a){G.call({_w:c,_d:!1},a)}}};w||(t=function(a){l(this,t,q,"_h"),k(a),b.call(this);try{a(g(H,this,1),g(G,this,1))}catch(a){G.call(this,a)}},b=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},b.prototype=a("./_redefine-all")(t.prototype,{then:function(a,b){var c=z(n(this,t));return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,c.domain=u?s.domain:void 0,this._c.push(c),this._a&&this._a.push(c),this._s&&C(this,!1),c.promise},catch:function(a){return this.then(void 0,a)}}),A=function(){var a=new b;this.promise=a,this.resolve=g(H,a,1),this.reject=g(G,a,1)}),i(i.G+i.W+i.F*!w,{Promise:t}),a("./_set-to-string-tag")(t,q),a("./_set-species")(q),d=a("./_core")[q],i(i.S+i.F*!w,q,{reject:function(a){var b=z(this),c=b.reject;return c(a),b.promise}}),i(i.S+i.F*(e||!w),q,{resolve:function(a){if(a instanceof t&&x(a.constructor,this))return a;var b=z(this),c=b.resolve;return c(a),b.promise}}),i(i.S+i.F*!(w&&a("./_iter-detect")(function(a){t.all(a).catch(v)})),q,{all:function(a){var b=this,c=z(b),d=c.resolve,e=c.reject,f=B(function(){var c=[],f=0,g=1;m(a,!1,function(a){var h=f++,i=!1;c.push(void 0),g++,b.resolve(a).then(function(a){i||(i=!0,c[h]=a,--g||d(c))},e)}),--g||d(c)});return f&&e(f.error),c.promise},race:function(a){var b=this,c=z(b),d=c.reject,e=B(function(){m(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e&&d(e.error),c.promise}})},{"./_a-function":8,"./_an-instance":10,"./_classof":13,"./_core":15,"./_ctx":16,"./_export":21,"./_for-of":23,"./_global":24,"./_is-object":32,"./_iter-detect":36,"./_library":39,"./_microtask":40,"./_redefine-all":48,"./_set-species":50,"./_set-to-string-tag":51,"./_species-constructor":54,"./_task":56,"./_wks":64}],69:[function(a){"use strict";var b=a("./_string-at")(!0);a("./_iter-define")(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,c=this._t,d=this._i;return d>=c.length?{value:void 0,done:!0}:(a=b(c,d),this._i+=a.length,{value:a,done:!1})})},{"./_iter-define":35,"./_string-at":55}],70:[function(a){for(var b=a("./es6.array.iterator"),c=a("./_redefine"),d=a("./_global"),e=a("./_hide"),f=a("./_iterators"),g=a("./_wks"),h=g("iterator"),i=g("toStringTag"),j=f.Array,k=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;5>l;l++){var m,n=k[l],o=d[n],p=o&&o.prototype;if(p){p[h]||e(p,h,j),p[i]||e(p,i,n),f[n]=j;for(m in b)p[m]||c(p,m,b[m],!0)}}},{"./_global":24,"./_hide":26,"./_iterators":38,"./_redefine":49,"./_wks":64,"./es6.array.iterator":66}],71:[function(a,b,c){(function(a){function b(a){return Array.isArray?Array.isArray(a):"[object Array]"===q(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return"[object RegExp]"===q(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return"[object Date]"===q(a)}function n(a){return"[object Error]"===q(a)||a instanceof Error}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=a.isBuffer}).call(this,{isBuffer:a("../../is-buffer/index.js")})},{"../../is-buffer/index.js":96}],72:[function(a,b,c){function d(a){return a=Math.round(a),0>a?0:a>255?255:a}function e(a){return 0>a?0:a>1?1:a}function f(a){return d("%"===a[a.length-1]?parseFloat(a)/100*255:parseInt(a))}function g(a){return e("%"===a[a.length-1]?parseFloat(a)/100:parseFloat(a))}function h(a,b,c){return 0>c?c+=1:c>1&&(c-=1),1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function i(a){var b=a.replace(/ /g,"").toLowerCase();if(b in j)return j[b].slice();if("#"===b[0]){if(4===b.length){var c=parseInt(b.substr(1),16);return c>=0&&4095>=c?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null}if(7===b.length){var c=parseInt(b.substr(1),16);return c>=0&&16777215>=c?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null}return null}var e=b.indexOf("("),i=b.indexOf(")");if(-1!==e&&i+1===b.length){var k=b.substr(0,e),l=b.substr(e+1,i-(e+1)).split(","),m=1;switch(k){case"rgba":if(4!==l.length)return null;m=g(l.pop());case"rgb":return 3!==l.length?null:[f(l[0]),f(l[1]),f(l[2]),m];case"hsla":if(4!==l.length)return null;m=g(l.pop());case"hsl":if(3!==l.length)return null;var n=(parseFloat(l[0])%360+360)%360/360,o=g(l[1]),p=g(l[2]),q=.5>=p?p*(o+1):p+o-p*o,r=2*p-q;return[d(255*h(r,q,n+1/3)),d(255*h(r,q,n)),d(255*h(r,q,n-1/3)),m];default:return null}}return null}var j={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{c.parseCSSColor=i}catch(a){}},{}],73:[function(a,b){"use strict";function c(a,b,c){c=c||2;var e=b&&b.length,g=e?b[0]*c:a.length,h=d(a,0,g,c,!0),i=[];if(!h)return i;var j,l,m,n,o,p,q;if(e&&(h=k(a,b,h,c)),a.length>80*c){j=m=a[0],l=n=a[1];for(var r=c;g>r;r+=c)o=a[r],p=a[r+1],j>o&&(j=o),l>p&&(l=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-l)}return f(h,i,c,j,l,q),i}function d(a,b,c,d,e){var f,g;if(e===E(a,b,c,d)>0)for(f=b;c>f;f+=d)g=B(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=B(f,a[f],a[f+1],g);return g&&v(g,g.next)&&(C(g),g=g.next),g}function e(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!v(d,d.next)&&0!==u(d.prev,d,d.next))d=d.next;else{if(C(d),d=b=d.prev,d===d.next)return null;c=!0}while(c||d!==b);return b}function f(a,b,c,d,k,l,m){if(a){!m&&l&&o(a,d,k,l);for(var n,p,q=a;a.prev!==a.next;)if(n=a.prev,p=a.next,l?h(a,d,k,l):g(a))b.push(n.i/c),b.push(a.i/c),b.push(p.i/c),C(a),a=p.next,q=p.next;else if(a=p,a===q){m?1===m?(a=i(a,b,c),f(a,b,c,d,k,l,2)):2===m&&j(a,b,c,d,k,l):f(e(a),b,c,d,k,l,1);break}}}function g(a){var b=a.prev,c=a,d=a.next;if(u(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(s(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&u(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function h(a,b,c,d){var e=a.prev,f=a,g=a.next;if(u(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=q(h,i,b,c,d),m=q(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&s(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&u(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&s(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&u(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function i(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!v(e,f)&&w(e,d,d.next,f)&&y(e,f)&&y(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),C(d),C(d.next),d=a=f),d=d.next}while(d!==a);return d}function j(a,b,c,d,g,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&t(i,j)){var k=A(i,j);return i=e(i,i.next),k=e(k,k.next),f(i,b,c,d,g,h),void f(k,b,c,d,g,h)}j=j.next}i=i.next}while(i!==a)}function k(a,b,c,f){var g,h,i,j,k,n=[];for(g=0,h=b.length;h>g;g++)i=b[g]*f,j=h-1>g?b[g+1]*f:a.length,k=d(a,i,j,f,!1),k===k.next&&(k.steiner=!0),n.push(r(k));for(n.sort(l),g=0;g<n.length;g++)m(n[g],c),c=e(c,c.next);return c}function l(a,b){return a.x-b.x}function m(a,b){if(b=n(a,b)){var c=A(b,a);e(c,c.next)}}function n(a,b){var c,d=b,e=a.x,f=a.y,g=-1/0;do{if(f<=d.y&&f>=d.next.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(e>=h&&h>g){if(g=h,h===e){if(f===d.y)return d;if(f===d.next.y)return d.next}c=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!c)return null;if(e===g)return c.prev;var i,j=c,k=c.x,l=c.y,m=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=k&&s(l>f?e:g,f,k,l,l>f?g:e,f,d.x,d.y)&&(i=Math.abs(f-d.y)/(e-d.x),(m>i||i===m&&d.x>c.x)&&y(d,a)&&(c=d,m=i)),d=d.next;return c}function o(a,b,c,d){var e=a;do null===e.z&&(e.z=q(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,p(e)}function p(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;j>b&&(h++,d=d.nextZ);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function q(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function r(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function s(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function t(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!x(a,b)&&y(a,b)&&y(b,a)&&z(a,b)}function u(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function v(a,b){return a.x===b.x&&a.y===b.y}function w(a,b,c,d){return!!(v(a,b)&&v(c,d)||v(a,d)&&v(c,b))||u(a,b,c)>0!=u(a,b,d)>0&&u(c,d,a)>0!=u(c,d,b)>0}function x(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&w(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function y(a,b){return u(a.prev,a,a.next)<0?u(a,b,a.next)>=0&&u(a,a.prev,b)>=0:u(a,b,a.prev)<0||u(a,a.next,b)<0}function z(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function A(a,b){var c=new D(a.i,a.x,a.y),d=new D(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function B(a,b,c,d){var e=new D(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function C(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function D(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(a,b,c,d){for(var e=0,f=b,g=c-d;c>f;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}b.exports=c,c.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(E(a,0,f,c));if(e)for(var h=0,i=b.length;i>h;h++){var j=b[h]*c,k=i-1>h?b[h+1]*c:a.length;g-=Math.abs(E(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},c.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;b>g;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],74:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),c.apply(this,h)}else if(f(c))for(h=Array.prototype.slice.call(arguments,1),j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h);return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned&&(e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(d(b))return 1;if(b)return b.length}return 0},c.listenerCount=function(a,b){return a.listenerCount(b)}},{}],75:[function(a,b){!function(){function a(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function c(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function b(){document.removeEventListener("DOMContentLoaded",b),a()}):document.attachEvent("onreadystatechange",function b(){("interactive"==document.readyState||"complete"==document.readyState)&&(document.detachEvent("onreadystatechange",b),a())})}function d(a){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(a)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function e(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+b+";"}function f(a){var b=a.a.offsetWidth,c=b+100;return a.f.style.width=c+"px",a.c.scrollLeft=c,a.b.scrollLeft=a.b.scrollWidth+100,a.g!==b&&(a.g=b,!0)}function g(b,c){function d(){var a=e;f(a)&&a.a.parentNode&&c(a.g)}var e=b;a(b.b,d),a(b.c,d),f(b)}function h(a,b){var c=b||{};this.family=a,this.style=c.style||"normal",this.weight=c.weight||"normal",this.stretch=c.stretch||"normal"}function i(){if(null===m){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(a){}m=""!==a.style.font}return m}function j(a,b){return[a.style,a.weight,i()?a.stretch:"","100px",b].join(" ")}var k=null,l=null,m=null,n=null;h.prototype.load=function(a,b){var f=this,h=a||"BESbswy",i=0,m=b||3e3,o=(new Date).getTime();return new Promise(function(a,b){var p;if(null===n&&(n=!!document.fonts),(p=n)&&(null===l&&(l=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),p=!l),p){p=new Promise(function(a,b){function c(){(new Date).getTime()-o>=m?b():document.fonts.load(j(f,'"'+f.family+'"'),h).then(function(b){1<=b.length?a():setTimeout(c,25)},function(){b()})}c()});var q=new Promise(function(a,b){i=setTimeout(b,m)});Promise.race([q,p]).then(function(){clearTimeout(i),a(f)},function(){b(f)})}else c(function(){function c(){var b;(b=-1!=r&&-1!=s||-1!=r&&-1!=t||-1!=s&&-1!=t)&&((b=r!=s&&r!=t&&s!=t)||(null===k&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),k=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=k&&(r==u&&s==u&&t==u||r==v&&s==v&&t==v||r==w&&s==w&&t==w)),b=!b),b&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(i),a(f))}function l(){if((new Date).getTime()-o>=m)x.parentNode&&x.parentNode.removeChild(x),b(f);else{var a=document.hidden;(!0===a||void 0===a)&&(r=n.a.offsetWidth,s=p.a.offsetWidth,t=q.a.offsetWidth,c()),i=setTimeout(l,50)}}var n=new d(h),p=new d(h),q=new d(h),r=-1,s=-1,t=-1,u=-1,v=-1,w=-1,x=document.createElement("div");x.dir="ltr",e(n,j(f,"sans-serif")),e(p,j(f,"serif")),e(q,j(f,"monospace")),x.appendChild(n.a),x.appendChild(p.a),x.appendChild(q.a),document.body.appendChild(x),u=n.a.offsetWidth,v=p.a.offsetWidth,w=q.a.offsetWidth,l(),g(n,function(a){r=a,c()}),e(n,j(f,'"'+f.family+'",sans-serif')),g(p,function(a){s=a,c()}),e(p,j(f,'"'+f.family+'",serif')),g(q,function(a){t=a,c()}),e(q,j(f,'"'+f.family+'",monospace'))})})},"undefined"!=typeof b?b.exports=h:(window.FontFaceObserver=h,window.FontFaceObserver.prototype.load=h.prototype.load)}()},{}],76:[function(a,b){"use strict";function c(a,b,c,f,h,i,j,k){if(c/=b,f/=b,j>=c&&f>=k)return a;if(j>f||c>k)return null;for(var l=[],m=0;m<a.length;m++){var n,o,p=a[m],q=p.geometry,r=p.type;if(n=p.min[h],o=p.max[h],n>=c&&f>=o)l.push(p);else if(!(n>f||c>o)){var s=1===r?d(q,c,f,h):e(q,c,f,h,i,3===r);s.length&&l.push(g(p.tags,r,s,p.id))}}return l.length?l:null}function d(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f],h=g[d];h>=b&&c>=h&&e.push(g)}return e}function e(a,b,c,d,e,g){for(var h=[],i=0;i<a.length;i++){var j,k,l,m=0,n=0,o=null,p=a[i],q=p.area,r=p.dist,s=p.outer,t=p.length,u=[];for(k=0;t-1>k;k++)j=o||p[k],o=p[k+1],m=n||j[d],n=o[d],b>m?n>c?(u.push(e(j,o,b),e(j,o,c)),g||(u=f(h,u,q,r,s))):n>=b&&u.push(e(j,o,b)):m>c?b>n?(u.push(e(j,o,c),e(j,o,b)),g||(u=f(h,u,q,r,s))):c>=n&&u.push(e(j,o,c)):(u.push(j),b>n?(u.push(e(j,o,b)),g||(u=f(h,u,q,r,s))):n>c&&(u.push(e(j,o,c)),g||(u=f(h,u,q,r,s))));j=p[t-1],m=j[d],m>=b&&c>=m&&u.push(j),l=u[u.length-1],g&&l&&(u[0][0]!==l[0]||u[0][1]!==l[1])&&u.push(u[0]),f(h,u,q,r,s)}return h}function f(a,b,c,d,e){return b.length&&(b.area=c,b.dist=d,void 0!==e&&(b.outer=e),a.push(b)),[]}b.exports=c;var g=a("./feature")},{"./feature":78}],77:[function(a,b){"use strict";function c(a,b){var c=[];if("FeatureCollection"===a.type)for(var e=0;e<a.features.length;e++)d(c,a.features[e],b);else"Feature"===a.type?d(c,a,b):d(c,{geometry:a},b);return c}function d(a,b,c){if(null!==b.geometry){var g,h,j,k,l=b.geometry,m=l.type,n=l.coordinates,o=b.properties,p=b.id;if("Point"===m)a.push(i(o,1,[f(n)],p));else if("MultiPoint"===m)a.push(i(o,1,e(n),p));else if("LineString"===m)a.push(i(o,2,[e(n,c)],p));else if("MultiLineString"===m||"Polygon"===m){for(j=[],g=0;g<n.length;g++)k=e(n[g],c),"Polygon"===m&&(k.outer=0===g),j.push(k);a.push(i(o,"Polygon"===m?3:2,j,p))}else if("MultiPolygon"===m){for(j=[],g=0;g<n.length;g++)for(h=0;h<n[g].length;h++)k=e(n[g][h],c),k.outer=0===h,j.push(k);a.push(i(o,3,j,p))}else{if("GeometryCollection"!==m)throw new Error("Input data is not a valid GeoJSON object.");for(g=0;g<l.geometries.length;g++)d(a,{geometry:l.geometries[g],properties:o},c)}}}function e(a,b){for(var c=[],d=0;d<a.length;d++)c.push(f(a[d]));return b&&(h(c,b),g(c)),c}function f(a){var b=Math.sin(a[1]*Math.PI/180),c=a[0]/360+.5,d=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return d=0>d?0:d>1?1:d,[c,d,0]}function g(a){for(var b,c,d=0,e=0,f=0;f<a.length-1;f++)b=c||a[f],c=a[f+1],d+=b[0]*c[1]-c[0]*b[1],e+=Math.abs(c[0]-b[0])+Math.abs(c[1]-b[1]);a.area=Math.abs(d/2),a.dist=e}b.exports=c;var h=a("./simplify"),i=a("./feature")},{"./feature":78,"./simplify":80}],78:[function(a,b){"use strict";function c(a,b,c,e){var f={id:e||null,type:b,geometry:c,tags:a||null,min:[1/0,1/0],max:[-1/0,-1/0]};return d(f),f}function d(a){var b=a.geometry,c=a.min,d=a.max;if(1===a.type)e(c,d,b);else for(var f=0;f<b.length;f++)e(c,d,b[f]);return a}function e(a,b,c){for(var d,e=0;e<c.length;e++)d=c[e],a[0]=Math.min(d[0],a[0]),b[0]=Math.max(d[0],b[0]),a[1]=Math.min(d[1],a[1]),b[1]=Math.max(d[1],b[1])}b.exports=c},{}],79:[function(a,b){"use strict";function c(a,b){return new d(a,b)}function d(a,b){b=this.options=h(Object.create(this.options),b);var c=b.debug;c&&console.time("preprocess data");var d=1<<b.maxZoom,e=j(a,b.tolerance/(d*b.extent));this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",b.indexMaxZoom,b.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),e=m(e,b.buffer/b.extent,f),e.length&&this.splitTile(e,0,0,0),c&&(e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function e(a,b,c){return 32*((1<<a)*c+b)+a}function f(a,b,c){return[c,(c-a[0])*(b[1]-a[1])/(b[0]-a[0])+a[1],1]}function g(a,b,c){return[(c-a[1])*(b[0]-a[0])/(b[1]-a[1])+a[0],c,1]}function h(a,b){for(var c in b)a[c]=b[c];return a}function i(a,b,c){var d=a.source;if(1!==d.length)return!1;var e=d[0];if(3!==e.type||e.geometry.length>1)return!1;var f=e.geometry[0].length;if(5!==f)return!1;for(var g=0;f>g;g++){var h=k.point(e.geometry[0][g],b,a.z2,a.x,a.y);if(h[0]!==-c&&h[0]!==b+c||h[1]!==-c&&h[1]!==b+c)return!1}return!0}b.exports=c;var j=a("./convert"),k=a("./transform"),l=a("./clip"),m=a("./wrap"),n=a("./tile");d.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},d.prototype.splitTile=function(a,b,c,d,h,j,k){for(var m=[a,b,c,d],o=this.options,p=o.debug,q=null;m.length;){d=m.pop(),c=m.pop(),b=m.pop(),a=m.pop();var r=1<<b,s=e(b,c,d),t=this.tiles[s],u=b===o.maxZoom?0:o.tolerance/(r*o.extent);if(!t&&(p>1&&console.time("creation"),t=this.tiles[s]=n(a,r,c,d,u,b===o.maxZoom),this.tileCoords.push({z:b,x:c,y:d}),p)){p>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",b,c,d,t.numFeatures,t.numPoints,t.numSimplified),console.timeEnd("creation"));var v="z"+b;this.stats[v]=(this.stats[v]||0)+1,this.total++}if(t.source=a,h){if(b===o.maxZoom||b===h)continue;var w=1<<h-b;if(c!==Math.floor(j/w)||d!==Math.floor(k/w))continue}else if(b===o.indexMaxZoom||t.numPoints<=o.indexMaxPoints)continue;if(o.solidChildren||!i(t,o.extent,o.buffer)){t.source=null,p>1&&console.time("clipping");var x,y,z,A,B,C,D=.5*o.buffer/o.extent,E=.5-D,F=.5+D,G=1+D;x=y=z=A=null,B=l(a,r,c-D,c+F,0,f,t.min[0],t.max[0]),C=l(a,r,c+E,c+G,0,f,t.min[0],t.max[0]),B&&(x=l(B,r,d-D,d+F,1,g,t.min[1],t.max[1]),y=l(B,r,d+E,d+G,1,g,t.min[1],t.max[1])),C&&(z=l(C,r,d-D,d+F,1,g,t.min[1],t.max[1]),A=l(C,r,d+E,d+G,1,g,t.min[1],t.max[1])),p>1&&console.timeEnd("clipping"),a.length&&(m.push(x||[],b+1,2*c,2*d),m.push(y||[],b+1,2*c,2*d+1),
m.push(z||[],b+1,2*c+1,2*d),m.push(A||[],b+1,2*c+1,2*d+1))}else h&&(q=b)}return q},d.prototype.getTile=function(a,b,c){var d=this.options,f=d.extent,g=d.debug,h=1<<a;b=(b%h+h)%h;var j=e(a,b,c);if(this.tiles[j])return k.tile(this.tiles[j],f);g>1&&console.log("drilling down to z%d-%d-%d",a,b,c);for(var l,m=a,n=b,o=c;!l&&m>0;)m--,n=Math.floor(n/2),o=Math.floor(o/2),l=this.tiles[e(m,n,o)];if(!l||!l.source)return null;if(g>1&&console.log("found parent tile z%d-%d-%d",m,n,o),i(l,f,d.buffer))return k.tile(l,f);g>1&&console.time("drilling down");var p=this.splitTile(l.source,m,n,o,a,b,c);if(g>1&&console.timeEnd("drilling down"),null!==p){var q=1<<a-p;j=e(p,Math.floor(b/q),Math.floor(c/q))}return this.tiles[j]?k.tile(this.tiles[j],f):null}},{"./clip":76,"./convert":77,"./tile":81,"./transform":82,"./wrap":83}],80:[function(a,b){"use strict";function c(a,b){var c,e,f,g,h=b*b,i=a.length,j=0,k=i-1,l=[];for(a[j][2]=1,a[k][2]=1;k;){for(e=0,c=j+1;k>c;c++)f=d(a[c],a[j],a[k]),f>e&&(g=c,e=f);e>h?(a[g][2]=e,l.push(j),l.push(g),j=g):(k=l.pop(),j=l.pop())}}function d(a,b,c){var d=b[0],e=b[1],f=c[0],g=c[1],h=a[0],i=a[1],j=f-d,k=g-e;if(0!==j||0!==k){var l=((h-d)*j+(i-e)*k)/(j*j+k*k);l>1?(d=f,e=g):l>0&&(d+=j*l,e+=k*l)}return j=h-d,k=i-e,j*j+k*k}b.exports=c},{}],81:[function(a,b){"use strict";function c(a,b,c,e,f,g){for(var h={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:e,z2:b,transformed:!1,min:[2,1],max:[-1,0]},i=0;i<a.length;i++){h.numFeatures++,d(h,a[i],f,g);var j=a[i].min,k=a[i].max;j[0]<h.min[0]&&(h.min[0]=j[0]),j[1]<h.min[1]&&(h.min[1]=j[1]),k[0]>h.max[0]&&(h.max[0]=k[0]),k[1]>h.max[1]&&(h.max[1]=k[1])}return h}function d(a,b,c,d){var f,g,h,i,j=b.geometry,k=b.type,l=[],m=c*c;if(1===k)for(f=0;f<j.length;f++)l.push(j[f]),a.numPoints++,a.numSimplified++;else for(f=0;f<j.length;f++)if(h=j[f],d||!(2===k&&h.dist<c||3===k&&h.area<m)){var n=[];for(g=0;g<h.length;g++)i=h[g],(d||i[2]>m)&&(n.push(i),a.numSimplified++),a.numPoints++;3===k&&e(n,h.outer),l.push(n)}else a.numPoints+=h.length;if(l.length){var o={geometry:l,type:k,tags:b.tags||null};null!==b.id&&(o.id=b.id),a.features.push(o)}}function e(a,b){var c=f(a);0>c===b&&a.reverse()}function f(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;f>e;g=e++)b=a[e],c=a[g],d+=(c[0]-b[0])*(b[1]+c[1]);return d}b.exports=c},{}],82:[function(a,b,c){"use strict";function d(a,b){if(a.transformed)return a;var c,d,f,g=a.z2,h=a.x,i=a.y;for(c=0;c<a.features.length;c++){var j=a.features[c],k=j.geometry,l=j.type;if(1===l)for(d=0;d<k.length;d++)k[d]=e(k[d],b,g,h,i);else for(d=0;d<k.length;d++){var m=k[d];for(f=0;f<m.length;f++)m[f]=e(m[f],b,g,h,i)}}return a.transformed=!0,a}function e(a,b,c,d,e){var f=Math.round(b*(a[0]*c-d)),g=Math.round(b*(a[1]*c-e));return[f,g]}c.tile=d,c.point=e},{}],83:[function(a,b){"use strict";function c(a,b,c){var e=a,g=f(a,1,-1-b,b,0,c,-1,2),h=f(a,1,1-b,2+b,0,c,-1,2);return(g||h)&&(e=f(a,1,-b,1+b,0,c,-1,2)||[],g&&(e=d(g,1).concat(e)),h&&(e=e.concat(d(h,-1)))),e}function d(a,b){for(var c=[],d=0;d<a.length;d++){var f,h=a[d],i=h.type;if(1===i)f=e(h.geometry,b);else{f=[];for(var j=0;j<h.geometry.length;j++)f.push(e(h.geometry[j],b))}c.push(g(h.tags,i,f,h.id))}return c}function e(a,b){var c=[];c.area=a.area,c.dist=a.dist;for(var d=0;d<a.length;d++)c.push([a[d][0]+b,a[d][1],a[d][2]]);return c}var f=a("./clip"),g=a("./feature");b.exports=c},{"./clip":76,"./feature":78}],84:[function(a,b){function c(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null}b.exports=c},{}],85:[function(a,b){function c(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null}b.exports=c},{}],86:[function(a,b){function c(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a}b.exports=c},{}],87:[function(a,b){function c(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=c},{}],88:[function(a,b){function c(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p=b[0],q=b[1],r=b[2],s=e[0],t=e[1],u=e[2],v=c[0],w=c[1],x=c[2];return Math.abs(p-v)<1e-6&&Math.abs(q-w)<1e-6&&Math.abs(r-x)<1e-6?d(a):(l=p-v,m=q-w,n=r-x,o=1/Math.sqrt(l*l+m*m+n*n),l*=o,m*=o,n*=o,f=t*n-u*m,g=u*l-s*n,h=s*m-t*l,o=Math.sqrt(f*f+g*g+h*h),o?(o=1/o,f*=o,g*=o,h*=o):(f=0,g=0,h=0),i=m*h-n*g,j=n*f-l*h,k=l*g-m*f,o=Math.sqrt(i*i+j*j+k*k),o?(o=1/o,i*=o,j*=o,k*=o):(i=0,j=0,k=0),a[0]=f,a[1]=i,a[2]=l,a[3]=0,a[4]=g,a[5]=j,a[6]=m,a[7]=0,a[8]=h,a[9]=k,a[10]=n,a[11]=0,a[12]=-(f*p+g*q+h*r),a[13]=-(i*p+j*q+k*r),a[14]=-(l*p+m*q+n*r),a[15]=1,a)}var d=a("./identity");b.exports=c},{"./identity":87}],89:[function(a,b){function c(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a}b.exports=c},{}],90:[function(a,b){function c(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a}b.exports=c},{}],91:[function(a,b){function c(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a}b.exports=c},{}],92:[function(a,b){function c(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a}b.exports=c},{}],93:[function(a,b){function c(a){a=String(a);for(var b,c=[];b=a.match(/ERROR\:([^\n]+)/);){a=a.slice(b.index+1);var d=b[1].trim(),e=d.split(":"),f=e.slice(2).join(":").trim(),g=parseInt(e[0],10),d=parseInt(e[1],10);c.push({message:f,file:g,line:d})}return c}b.exports=c},{}],94:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],95:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],96:[function(a,b){function c(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function d(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&c(a.slice(0,0))}b.exports=function(a){return null!=a&&(c(a)||d(a)||!!a._isBuffer)}},{}],97:[function(a,b){"use strict";var c=a("./lib/js-yaml.js");b.exports=c},{"./lib/js-yaml.js":98}],98:[function(a,b){"use strict";function c(a){return function(){throw new Error("Function "+a+" is deprecated and cannot be used.")}}var d=a("./js-yaml/loader");b.exports.Type=a("./js-yaml/type"),b.exports.Schema=a("./js-yaml/schema"),b.exports.FAILSAFE_SCHEMA=a("./js-yaml/schema/failsafe"),b.exports.JSON_SCHEMA=a("./js-yaml/schema/json"),b.exports.CORE_SCHEMA=a("./js-yaml/schema/core"),b.exports.DEFAULT_SAFE_SCHEMA=a("./js-yaml/schema/default_safe"),b.exports.DEFAULT_FULL_SCHEMA=a("./js-yaml/schema/default_full"),b.exports.load=d.load,b.exports.loadAll=d.loadAll,b.exports.safeLoad=d.safeLoad,b.exports.safeLoadAll=d.safeLoadAll,b.exports.YAMLException=a("./js-yaml/exception"),b.exports.MINIMAL_SCHEMA=a("./js-yaml/schema/failsafe"),b.exports.SAFE_SCHEMA=a("./js-yaml/schema/default_safe"),b.exports.DEFAULT_SCHEMA=a("./js-yaml/schema/default_full"),b.exports.scan=c("scan"),b.exports.parse=c("parse"),b.exports.compose=c("compose"),b.exports.addConstructor=c("addConstructor")},{"./js-yaml/exception":100,"./js-yaml/loader":101,"./js-yaml/schema":103,"./js-yaml/schema/core":104,"./js-yaml/schema/default_full":105,"./js-yaml/schema/default_safe":106,"./js-yaml/schema/failsafe":107,"./js-yaml/schema/json":108,"./js-yaml/type":109}],99:[function(a,b){"use strict";function c(a){return"undefined"==typeof a||null===a}function d(a){return"object"==typeof a&&null!==a}function e(a){return Array.isArray(a)?a:c(a)?[]:[a]}function f(a,b){var c,d,e,f;if(b)for(f=Object.keys(b),c=0,d=f.length;d>c;c+=1)e=f[c],a[e]=b[e];return a}function g(a,b){var c,d="";for(c=0;b>c;c+=1)d+=a;return d}function h(a){return 0===a&&Number.NEGATIVE_INFINITY===1/a}b.exports.isNothing=c,b.exports.isObject=d,b.exports.toArray=e,b.exports.repeat=g,b.exports.isNegativeZero=h,b.exports.extend=f},{}],100:[function(a,b){"use strict";function c(a,b){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=a,this.mark=b,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.toString=function(a){var b=this.name+": ";return b+=this.reason||"(unknown reason)",!a&&this.mark&&(b+=" "+this.mark.toString()),b},b.exports=c},{}],101:[function(a,b){"use strict";function c(a){return 10===a||13===a}function d(a){return 9===a||32===a}function e(a){return 9===a||32===a||10===a||13===a}function f(a){return 44===a||91===a||93===a||123===a||125===a}function g(a){var b;return a>=48&&57>=a?a-48:(b=32|a,b>=97&&102>=b?b-97+10:-1)}function h(a){return 120===a?2:117===a?4:85===a?8:0}function i(a){return a>=48&&57>=a?a-48:-1}function j(a){return 48===a?"\0":97===a?"":98===a?"\b":116===a?"\t":9===a?"\t":110===a?"\n":118===a?"\v":102===a?"\f":114===a?"\r":101===a?"":32===a?" ":34===a?'"':47===a?"/":92===a?"\\":78===a?"":95===a?" ":76===a?"\u2028":80===a?"\u2029":""}function k(a){return 65535>=a?String.fromCharCode(a):String.fromCharCode((a-65536>>10)+55296,(a-65536&1023)+56320)}function l(a,b){this.input=a,this.filename=b.filename||null,this.schema=b.schema||R,this.onWarning=b.onWarning||null,this.legacy=b.legacy||!1,this.json=b.json||!1,this.listener=b.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=a.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function m(a,b){return new O(b,new P(a.filename,a.input,a.position,a.line,a.position-a.lineStart))}function n(a,b){throw m(a,b)}function o(a,b){a.onWarning&&a.onWarning.call(null,m(a,b))}function p(a,b,c,d){var e,f,g,h;if(c>b){if(h=a.input.slice(b,c),d)for(e=0,f=h.length;f>e;e+=1)g=h.charCodeAt(e),9===g||g>=32&&1114111>=g||n(a,"expected valid JSON character");else $.test(h)&&n(a,"the stream contains non-printable characters");a.result+=h}}function q(a,b,c,d){var e,f,g,h;for(N.isObject(c)||n(a,"cannot merge mappings; the provided source object is unacceptable"),e=Object.keys(c),g=0,h=e.length;h>g;g+=1)f=e[g],S.call(b,f)||(b[f]=c[f],d[f]=!0)}function r(a,b,c,d,e,f){var g,h;if(e=String(e),null===b&&(b={}),"tag:yaml.org,2002:merge"===d)if(Array.isArray(f))for(g=0,h=f.length;h>g;g+=1)q(a,b,f[g],c);else q(a,b,f,c);else a.json||S.call(c,e)||!S.call(b,e)||n(a,"duplicated mapping key"),b[e]=f,delete c[e];return b}function s(a){var b;b=a.input.charCodeAt(a.position),10===b?a.position++:13===b?(a.position++,10===a.input.charCodeAt(a.position)&&a.position++):n(a,"a line break is expected"),a.line+=1,a.lineStart=a.position}function t(a,b,e){for(var f=0,g=a.input.charCodeAt(a.position);0!==g;){for(;d(g);)g=a.input.charCodeAt(++a.position);if(b&&35===g)do g=a.input.charCodeAt(++a.position);while(10!==g&&13!==g&&0!==g);if(!c(g))break;for(s(a),g=a.input.charCodeAt(a.position),f++,a.lineIndent=0;32===g;)a.lineIndent++,g=a.input.charCodeAt(++a.position)}return-1!==e&&0!==f&&a.lineIndent<e&&o(a,"deficient indentation"),f}function u(a){var b,c=a.position;return b=a.input.charCodeAt(c),!(45!==b&&46!==b||b!==a.input.charCodeAt(c+1)||b!==a.input.charCodeAt(c+2)||(c+=3,b=a.input.charCodeAt(c),0!==b&&!e(b)))}function v(a,b){1===b?a.result+=" ":b>1&&(a.result+=N.repeat("\n",b-1))}function w(a,b,g){var h,i,j,k,l,m,n,o,q,r=a.kind,s=a.result;if(q=a.input.charCodeAt(a.position),e(q)||f(q)||35===q||38===q||42===q||33===q||124===q||62===q||39===q||34===q||37===q||64===q||96===q)return!1;if((63===q||45===q)&&(i=a.input.charCodeAt(a.position+1),e(i)||g&&f(i)))return!1;for(a.kind="scalar",a.result="",j=k=a.position,l=!1;0!==q;){if(58===q){if(i=a.input.charCodeAt(a.position+1),e(i)||g&&f(i))break}else if(35===q){if(h=a.input.charCodeAt(a.position-1),e(h))break}else{if(a.position===a.lineStart&&u(a)||g&&f(q))break;if(c(q)){if(m=a.line,n=a.lineStart,o=a.lineIndent,t(a,!1,-1),a.lineIndent>=b){l=!0,q=a.input.charCodeAt(a.position);continue}a.position=k,a.line=m,a.lineStart=n,a.lineIndent=o;break}}l&&(p(a,j,k,!1),v(a,a.line-m),j=k=a.position,l=!1),d(q)||(k=a.position+1),q=a.input.charCodeAt(++a.position)}return p(a,j,k,!1),!!a.result||(a.kind=r,a.result=s,!1)}function x(a,b){var d,e,f;if(d=a.input.charCodeAt(a.position),39!==d)return!1;for(a.kind="scalar",a.result="",a.position++,e=f=a.position;0!==(d=a.input.charCodeAt(a.position));)if(39===d){if(p(a,e,a.position,!0),d=a.input.charCodeAt(++a.position),39!==d)return!0;e=f=a.position,a.position++}else c(d)?(p(a,e,f,!0),v(a,t(a,!1,b)),e=f=a.position):a.position===a.lineStart&&u(a)?n(a,"unexpected end of the document within a single quoted scalar"):(a.position++,f=a.position);n(a,"unexpected end of the stream within a single quoted scalar")}function y(a,b){var d,e,f,i,j,l;if(l=a.input.charCodeAt(a.position),34!==l)return!1;for(a.kind="scalar",a.result="",a.position++,d=e=a.position;0!==(l=a.input.charCodeAt(a.position));){if(34===l)return p(a,d,a.position,!0),a.position++,!0;if(92===l){if(p(a,d,a.position,!0),l=a.input.charCodeAt(++a.position),c(l))t(a,!1,b);else if(256>l&&da[l])a.result+=ea[l],a.position++;else if((j=h(l))>0){for(f=j,i=0;f>0;f--)l=a.input.charCodeAt(++a.position),(j=g(l))>=0?i=(i<<4)+j:n(a,"expected hexadecimal character");a.result+=k(i),a.position++}else n(a,"unknown escape sequence");d=e=a.position}else c(l)?(p(a,d,e,!0),v(a,t(a,!1,b)),d=e=a.position):a.position===a.lineStart&&u(a)?n(a,"unexpected end of the document within a double quoted scalar"):(a.position++,e=a.position)}n(a,"unexpected end of the stream within a double quoted scalar")}function z(a,b){var c,d,f,g,h,i,j,k,l,m,o,p=!0,q=a.tag,s=a.anchor,u={};if(o=a.input.charCodeAt(a.position),91===o)g=93,j=!1,d=[];else{if(123!==o)return!1;g=125,j=!0,d={}}for(null!==a.anchor&&(a.anchorMap[a.anchor]=d),o=a.input.charCodeAt(++a.position);0!==o;){if(t(a,!0,b),o=a.input.charCodeAt(a.position),o===g)return a.position++,a.tag=q,a.anchor=s,a.kind=j?"mapping":"sequence",a.result=d,!0;p||n(a,"missed comma between flow collection entries"),l=k=m=null,h=i=!1,63===o&&(f=a.input.charCodeAt(a.position+1),e(f)&&(h=i=!0,a.position++,t(a,!0,b))),c=a.line,G(a,b,T,!1,!0),l=a.tag,k=a.result,t(a,!0,b),o=a.input.charCodeAt(a.position),!i&&a.line!==c||58!==o||(h=!0,o=a.input.charCodeAt(++a.position),t(a,!0,b),G(a,b,T,!1,!0),m=a.result),j?r(a,d,u,l,k,m):d.push(h?r(a,null,u,l,k,m):k),t(a,!0,b),o=a.input.charCodeAt(a.position),44===o?(p=!0,o=a.input.charCodeAt(++a.position)):p=!1}n(a,"unexpected end of the stream within a flow collection")}function A(a,b){var e,f,g,h,j=X,k=!1,l=b,m=0,o=!1;if(h=a.input.charCodeAt(a.position),124===h)f=!1;else{if(62!==h)return!1;f=!0}for(a.kind="scalar",a.result="";0!==h;)if(h=a.input.charCodeAt(++a.position),43===h||45===h)X===j?j=43===h?Z:Y:n(a,"repeat of a chomping mode identifier");else{if(!((g=i(h))>=0))break;0===g?n(a,"bad explicit indentation width of a block scalar; it cannot be less than one"):k?n(a,"repeat of an indentation width identifier"):(l=b+g-1,k=!0)}if(d(h)){do h=a.input.charCodeAt(++a.position);while(d(h));if(35===h)do h=a.input.charCodeAt(++a.position);while(!c(h)&&0!==h)}for(;0!==h;){for(s(a),a.lineIndent=0,h=a.input.charCodeAt(a.position);(!k||a.lineIndent<l)&&32===h;)a.lineIndent++,h=a.input.charCodeAt(++a.position);if(!k&&a.lineIndent>l&&(l=a.lineIndent),c(h))m++;else{if(a.lineIndent<l){j===Z?a.result+=N.repeat("\n",m):j===X&&k&&(a.result+="\n");break}for(f?d(h)?(o=!0,a.result+=N.repeat("\n",m+1)):o?(o=!1,a.result+=N.repeat("\n",m+1)):0===m?k&&(a.result+=" "):a.result+=N.repeat("\n",m):a.result+=k?N.repeat("\n",m+1):N.repeat("\n",m),k=!0,m=0,e=a.position;!c(h)&&0!==h;)h=a.input.charCodeAt(++a.position);p(a,e,a.position,!1)}}return!0}function B(a,b){var c,d,f,g=a.tag,h=a.anchor,i=[],j=!1;for(null!==a.anchor&&(a.anchorMap[a.anchor]=i),f=a.input.charCodeAt(a.position);0!==f&&45===f&&(d=a.input.charCodeAt(a.position+1),e(d));)if(j=!0,a.position++,t(a,!0,-1)&&a.lineIndent<=b)i.push(null),f=a.input.charCodeAt(a.position);else if(c=a.line,G(a,b,V,!1,!0),i.push(a.result),t(a,!0,-1),f=a.input.charCodeAt(a.position),(a.line===c||a.lineIndent>b)&&0!==f)n(a,"bad indentation of a sequence entry");else if(a.lineIndent<b)break;return!!j&&(a.tag=g,a.anchor=h,a.kind="sequence",a.result=i,!0)}function C(a,b,c){var f,g,h,i,j=a.tag,k=a.anchor,l={},m={},o=null,p=null,q=null,s=!1,u=!1;for(null!==a.anchor&&(a.anchorMap[a.anchor]=l),i=a.input.charCodeAt(a.position);0!==i;){if(f=a.input.charCodeAt(a.position+1),h=a.line,63!==i&&58!==i||!e(f)){if(!G(a,c,U,!1,!0))break;if(a.line===h){for(i=a.input.charCodeAt(a.position);d(i);)i=a.input.charCodeAt(++a.position);if(58===i)i=a.input.charCodeAt(++a.position),e(i)||n(a,"a whitespace character is expected after the key-value separator within a block mapping"),s&&(r(a,l,m,o,p,null),o=p=q=null),u=!0,s=!1,g=!1,o=a.tag,p=a.result;else{if(!u)return a.tag=j,a.anchor=k,!0;n(a,"can not read an implicit mapping pair; a colon is missed")}}else{if(!u)return a.tag=j,a.anchor=k,!0;n(a,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===i?(s&&(r(a,l,m,o,p,null),o=p=q=null),u=!0,s=!0,g=!0):s?(s=!1,g=!0):n(a,"incomplete explicit mapping pair; a key node is missed"),a.position+=1,i=f;if((a.line===h||a.lineIndent>b)&&(G(a,b,W,!0,g)&&(s?p=a.result:q=a.result),s||(r(a,l,m,o,p,q),o=p=q=null),t(a,!0,-1),i=a.input.charCodeAt(a.position)),a.lineIndent>b&&0!==i)n(a,"bad indentation of a mapping entry");else if(a.lineIndent<b)break}return s&&r(a,l,m,o,p,null),u&&(a.tag=j,a.anchor=k,a.kind="mapping",a.result=l),u}function D(a){var b,c,d,f,g=!1,h=!1;if(f=a.input.charCodeAt(a.position),33!==f)return!1;if(null!==a.tag&&n(a,"duplication of a tag property"),f=a.input.charCodeAt(++a.position),60===f?(g=!0,f=a.input.charCodeAt(++a.position)):33===f?(h=!0,c="!!",f=a.input.charCodeAt(++a.position)):c="!",b=a.position,g){do f=a.input.charCodeAt(++a.position);while(0!==f&&62!==f);a.position<a.length?(d=a.input.slice(b,a.position),f=a.input.charCodeAt(++a.position)):n(a,"unexpected end of the stream within a verbatim tag")}else{for(;0!==f&&!e(f);)33===f&&(h?n(a,"tag suffix cannot contain exclamation marks"):(c=a.input.slice(b-1,a.position+1),ba.test(c)||n(a,"named tag handle cannot contain such characters"),h=!0,b=a.position+1)),f=a.input.charCodeAt(++a.position);d=a.input.slice(b,a.position),aa.test(d)&&n(a,"tag suffix cannot contain flow indicator characters")}return d&&!ca.test(d)&&n(a,"tag name cannot contain such characters: "+d),g?a.tag=d:S.call(a.tagMap,c)?a.tag=a.tagMap[c]+d:"!"===c?a.tag="!"+d:"!!"===c?a.tag="tag:yaml.org,2002:"+d:n(a,'undeclared tag handle "'+c+'"'),!0}function E(a){var b,c;if(c=a.input.charCodeAt(a.position),38!==c)return!1;for(null!==a.anchor&&n(a,"duplication of an anchor property"),c=a.input.charCodeAt(++a.position),b=a.position;0!==c&&!e(c)&&!f(c);)c=a.input.charCodeAt(++a.position);return a.position===b&&n(a,"name of an anchor node must contain at least one character"),a.anchor=a.input.slice(b,a.position),!0}function F(a){var b,c,d;if(d=a.input.charCodeAt(a.position),42!==d)return!1;for(d=a.input.charCodeAt(++a.position),b=a.position;0!==d&&!e(d)&&!f(d);)d=a.input.charCodeAt(++a.position);return a.position===b&&n(a,"name of an alias node must contain at least one character"),c=a.input.slice(b,a.position),a.anchorMap.hasOwnProperty(c)||n(a,'unidentified alias "'+c+'"'),a.result=a.anchorMap[c],t(a,!0,-1),!0}function G(a,b,c,d,e){var f,g,h,i,j,k,l,m,o=1,p=!1,q=!1;if(null!==a.listener&&a.listener("open",a),a.tag=null,a.anchor=null,a.kind=null,a.result=null,f=g=h=W===c||V===c,d&&t(a,!0,-1)&&(p=!0,a.lineIndent>b?o=1:a.lineIndent===b?o=0:a.lineIndent<b&&(o=-1)),1===o)for(;D(a)||E(a);)t(a,!0,-1)?(p=!0,h=f,a.lineIndent>b?o=1:a.lineIndent===b?o=0:a.lineIndent<b&&(o=-1)):h=!1;if(h&&(h=p||e),(1===o||W===c)&&(l=T===c||U===c?b:b+1,m=a.position-a.lineStart,1===o?h&&(B(a,m)||C(a,m,l))||z(a,l)?q=!0:(g&&A(a,l)||x(a,l)||y(a,l)?q=!0:F(a)?(q=!0,(null!==a.tag||null!==a.anchor)&&n(a,"alias node should not have any properties")):w(a,l,T===c)&&(q=!0,null===a.tag&&(a.tag="?")),null!==a.anchor&&(a.anchorMap[a.anchor]=a.result)):0===o&&(q=h&&B(a,m))),null!==a.tag&&"!"!==a.tag)if("?"===a.tag){for(i=0,j=a.implicitTypes.length;j>i;i+=1)if(k=a.implicitTypes[i],k.resolve(a.result)){a.result=k.construct(a.result),a.tag=k.tag,null!==a.anchor&&(a.anchorMap[a.anchor]=a.result);break}}else S.call(a.typeMap,a.tag)?(k=a.typeMap[a.tag],null!==a.result&&k.kind!==a.kind&&n(a,"unacceptable node kind for !<"+a.tag+'> tag; it should be "'+k.kind+'", not "'+a.kind+'"'),k.resolve(a.result)?(a.result=k.construct(a.result),null!==a.anchor&&(a.anchorMap[a.anchor]=a.result)):n(a,"cannot resolve a node with !<"+a.tag+"> explicit tag")):n(a,"unknown tag !<"+a.tag+">");return null!==a.listener&&a.listener("close",a),null!==a.tag||null!==a.anchor||q}function H(a){var b,f,g,h,i=a.position,j=!1;for(a.version=null,a.checkLineBreaks=a.legacy,a.tagMap={},a.anchorMap={};0!==(h=a.input.charCodeAt(a.position))&&(t(a,!0,-1),h=a.input.charCodeAt(a.position),!(a.lineIndent>0||37!==h));){for(j=!0,h=a.input.charCodeAt(++a.position),b=a.position;0!==h&&!e(h);)h=a.input.charCodeAt(++a.position);for(f=a.input.slice(b,a.position),g=[],f.length<1&&n(a,"directive name must not be less than one character in length");0!==h;){for(;d(h);)h=a.input.charCodeAt(++a.position);if(35===h){do h=a.input.charCodeAt(++a.position);while(0!==h&&!c(h));break}if(c(h))break;for(b=a.position;0!==h&&!e(h);)h=a.input.charCodeAt(++a.position);g.push(a.input.slice(b,a.position))}0!==h&&s(a),S.call(ga,f)?ga[f](a,f,g):o(a,'unknown document directive "'+f+'"')}return t(a,!0,-1),0===a.lineIndent&&45===a.input.charCodeAt(a.position)&&45===a.input.charCodeAt(a.position+1)&&45===a.input.charCodeAt(a.position+2)?(a.position+=3,t(a,!0,-1)):j&&n(a,"directives end mark is expected"),G(a,a.lineIndent-1,W,!1,!0),t(a,!0,-1),a.checkLineBreaks&&_.test(a.input.slice(i,a.position))&&o(a,"non-ASCII line breaks are interpreted as content"),a.documents.push(a.result),a.position===a.lineStart&&u(a)?void(46===a.input.charCodeAt(a.position)&&(a.position+=3,t(a,!0,-1))):void(a.position<a.length-1&&n(a,"end of the stream or a document separator is expected"))}function I(a,b){a=String(a),b=b||{},0!==a.length&&(10!==a.charCodeAt(a.length-1)&&13!==a.charCodeAt(a.length-1)&&(a+="\n"),65279===a.charCodeAt(0)&&(a=a.slice(1)));var c=new l(a,b);for(c.input+="\0";32===c.input.charCodeAt(c.position);)c.lineIndent+=1,c.position+=1;for(;c.position<c.length-1;)H(c);return c.documents}function J(a,b,c){var d,e,f=I(a,c);for(d=0,e=f.length;e>d;d+=1)b(f[d])}function K(a,b){var c=I(a,b);if(0!==c.length){if(1===c.length)return c[0];throw new O("expected a single document in the stream, but found more")}}function L(a,b,c){J(a,b,N.extend({schema:Q},c))}function M(a,b){return K(a,N.extend({schema:Q},b))}for(var N=a("./common"),O=a("./exception"),P=a("./mark"),Q=a("./schema/default_safe"),R=a("./schema/default_full"),S=Object.prototype.hasOwnProperty,T=1,U=2,V=3,W=4,X=1,Y=2,Z=3,$=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_=/[\x85\u2028\u2029]/,aa=/[,\[\]\{\}]/,ba=/^(?:!|!!|![a-z\-]+!)$/i,ca=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,da=new Array(256),ea=new Array(256),fa=0;256>fa;fa++)da[fa]=j(fa)?1:0,ea[fa]=j(fa);var ga={YAML:function(a,b,c){var d,e,f;null!==a.version&&n(a,"duplication of %YAML directive"),1!==c.length&&n(a,"YAML directive accepts exactly one argument"),d=/^([0-9]+)\.([0-9]+)$/.exec(c[0]),null===d&&n(a,"ill-formed argument of the YAML directive"),e=parseInt(d[1],10),f=parseInt(d[2],10),1!==e&&n(a,"unacceptable YAML version of the document"),a.version=c[0],a.checkLineBreaks=2>f,1!==f&&2!==f&&o(a,"unsupported YAML version of the document")},TAG:function(a,b,c){var d,e;2!==c.length&&n(a,"TAG directive accepts exactly two arguments"),d=c[0],e=c[1],ba.test(d)||n(a,"ill-formed tag handle (first argument) of the TAG directive"),S.call(a.tagMap,d)&&n(a,'there is a previously declared suffix for "'+d+'" tag handle'),ca.test(e)||n(a,"ill-formed tag prefix (second argument) of the TAG directive"),a.tagMap[d]=e}};b.exports.loadAll=J,b.exports.load=K,b.exports.safeLoadAll=L,b.exports.safeLoad=M},{"./common":99,"./exception":100,"./mark":102,"./schema/default_full":105,"./schema/default_safe":106}],102:[function(a,b){"use strict";function c(a,b,c,d,e){this.name=a,this.buffer=b,this.position=c,this.line=d,this.column=e}var d=a("./common");c.prototype.getSnippet=function(a,b){var c,e,f,g,h;if(!this.buffer)return null;for(a=a||4,b=b||75,c="",e=this.position;e>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(e-1));)if(e-=1,this.position-e>b/2-1){c=" ... ",e+=5;break}for(f="",g=this.position;g<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(g));)if(g+=1,g-this.position>b/2-1){f=" ... ",g-=5;break}return h=this.buffer.slice(e,g),d.repeat(" ",a)+c+h+f+"\n"+d.repeat(" ",a+this.position-e+c.length)+"^"},c.prototype.toString=function(a){var b,c="";return this.name&&(c+='in "'+this.name+'" '),c+="at line "+(this.line+1)+", column "+(this.column+1),a||(b=this.getSnippet(),b&&(c+=":\n"+b)),c},b.exports=c},{"./common":99}],103:[function(a,b){"use strict";function c(a,b,d){var e=[];return a.include.forEach(function(a){d=c(a,b,d)}),a[b].forEach(function(a){d.forEach(function(b,c){b.tag===a.tag&&e.push(c)}),d.push(a)}),d.filter(function(a,b){return-1===e.indexOf(b)})}function d(){function a(a){d[a.tag]=a}var b,c,d={};for(b=0,c=arguments.length;c>b;b+=1)arguments[b].forEach(a);return d}function e(a){this.include=a.include||[],this.implicit=a.implicit||[],this.explicit=a.explicit||[],this.implicit.forEach(function(a){if(a.loadKind&&"scalar"!==a.loadKind)throw new g("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=c(this,"implicit",[]),this.compiledExplicit=c(this,"explicit",[]),this.compiledTypeMap=d(this.compiledImplicit,this.compiledExplicit)}var f=a("./common"),g=a("./exception"),h=a("./type");e.DEFAULT=null,e.create=function(){var a,b;switch(arguments.length){case 1:a=e.DEFAULT,b=arguments[0];break;case 2:a=arguments[0],b=arguments[1];break;default:throw new g("Wrong number of arguments for Schema.create function")}if(a=f.toArray(a),b=f.toArray(b),!a.every(function(a){return a instanceof e}))throw new g("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!b.every(function(a){return a instanceof h}))throw new g("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new e({include:a,explicit:b})},b.exports=e},{"./common":99,"./exception":100,"./type":109}],104:[function(a,b){"use strict";var c=a("../schema");b.exports=new c({include:[a("./json")]})},{"../schema":103,"./json":108}],105:[function(a,b){"use strict";var c=a("../schema");b.exports=c.DEFAULT=new c({include:[a("./default_safe")],explicit:[a("../type/js/undefined"),a("../type/js/regexp"),a("../type/js/function")]})},{"../schema":103,"../type/js/function":114,"../type/js/regexp":115,"../type/js/undefined":116,"./default_safe":106}],106:[function(a,b){"use strict";var c=a("../schema");b.exports=new c({include:[a("./core")],implicit:[a("../type/timestamp"),a("../type/merge")],explicit:[a("../type/binary"),a("../type/omap"),a("../type/pairs"),a("../type/set")]})},{"../schema":103,"../type/binary":110,"../type/merge":118,"../type/omap":120,"../type/pairs":121,"../type/set":123,"../type/timestamp":125,"./core":104}],107:[function(a,b){"use strict";var c=a("../schema");b.exports=new c({explicit:[a("../type/str"),a("../type/seq"),a("../type/map")]})},{"../schema":103,"../type/map":117,"../type/seq":122,"../type/str":124}],108:[function(a,b){"use strict";var c=a("../schema");b.exports=new c({include:[a("./failsafe")],implicit:[a("../type/null"),a("../type/bool"),a("../type/int"),a("../type/float")]})},{"../schema":103,"../type/bool":111,"../type/float":112,"../type/int":113,"../type/null":119,"./failsafe":107}],109:[function(a,b){"use strict";function c(a){var b={};return null!==a&&Object.keys(a).forEach(function(c){a[c].forEach(function(a){b[String(a)]=c})}),b}function d(a,b){if(b=b||{},Object.keys(b).forEach(function(b){if(-1===f.indexOf(b))throw new e('Unknown option "'+b+'" is met in definition of "'+a+'" YAML type.')}),this.tag=a,this.kind=b.kind||null,this.resolve=b.resolve||function(){return!0},this.construct=b.construct||function(a){return a},this.instanceOf=b.instanceOf||null,this.predicate=b.predicate||null,this.represent=b.represent||null,this.defaultStyle=b.defaultStyle||null,this.styleAliases=c(b.styleAliases||null),-1===g.indexOf(this.kind))throw new e('Unknown kind "'+this.kind+'" is specified for "'+a+'" YAML type.')}var e=a("./exception"),f=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],g=["scalar","sequence","mapping"];b.exports=d},{"./exception":100}],110:[function(a,b){"use strict";function c(a){if(null===a)return!1;var b,c,d=0,e=a.length,f=i;for(c=0;e>c;c++)if(b=f.indexOf(a.charAt(c)),!(b>64)){if(0>b)return!1;d+=6}return d%8===0}function d(a){var b,c,d=a.replace(/[\r\n=]/g,""),e=d.length,f=i,h=0,j=[];
for(b=0;e>b;b++)b%4===0&&b&&(j.push(h>>16&255),j.push(h>>8&255),j.push(255&h)),h=h<<6|f.indexOf(d.charAt(b));return c=e%4*6,0===c?(j.push(h>>16&255),j.push(h>>8&255),j.push(255&h)):18===c?(j.push(h>>10&255),j.push(h>>2&255)):12===c&&j.push(h>>4&255),g?new g(j):j}function e(a){var b,c,d="",e=0,f=a.length,g=i;for(b=0;f>b;b++)b%3===0&&b&&(d+=g[e>>18&63],d+=g[e>>12&63],d+=g[e>>6&63],d+=g[63&e]),e=(e<<8)+a[b];return c=f%3,0===c?(d+=g[e>>18&63],d+=g[e>>12&63],d+=g[e>>6&63],d+=g[63&e]):2===c?(d+=g[e>>10&63],d+=g[e>>4&63],d+=g[e<<2&63],d+=g[64]):1===c&&(d+=g[e>>2&63],d+=g[e<<4&63],d+=g[64],d+=g[64]),d}function f(a){return g&&g.isBuffer(a)}var g=a("buffer").Buffer,h=a("../type"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";b.exports=new h("tag:yaml.org,2002:binary",{kind:"scalar",resolve:c,construct:d,predicate:f,represent:e})},{"../type":109,buffer:4}],111:[function(a,b){"use strict";function c(a){if(null===a)return!1;var b=a.length;return 4===b&&("true"===a||"True"===a||"TRUE"===a)||5===b&&("false"===a||"False"===a||"FALSE"===a)}function d(a){return"true"===a||"True"===a||"TRUE"===a}function e(a){return"[object Boolean]"===Object.prototype.toString.call(a)}var f=a("../type");b.exports=new f("tag:yaml.org,2002:bool",{kind:"scalar",resolve:c,construct:d,predicate:e,represent:{lowercase:function(a){return a?"true":"false"},uppercase:function(a){return a?"TRUE":"FALSE"},camelcase:function(a){return a?"True":"False"}},defaultStyle:"lowercase"})},{"../type":109}],112:[function(a,b){"use strict";function c(a){return null!==a&&!!i.test(a)}function d(a){var b,c,d,e;return b=a.replace(/_/g,"").toLowerCase(),c="-"===b[0]?-1:1,e=[],"+-".indexOf(b[0])>=0&&(b=b.slice(1)),".inf"===b?1===c?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===b?NaN:b.indexOf(":")>=0?(b.split(":").forEach(function(a){e.unshift(parseFloat(a,10))}),b=0,d=1,e.forEach(function(a){b+=a*d,d*=60}),c*b):c*parseFloat(b,10)}function e(a,b){var c;if(isNaN(a))switch(b){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===a)switch(b){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===a)switch(b){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(g.isNegativeZero(a))return"-0.0";return c=a.toString(10),j.test(c)?c.replace("e",".e"):c}function f(a){return"[object Number]"===Object.prototype.toString.call(a)&&(a%1!==0||g.isNegativeZero(a))}var g=a("../common"),h=a("../type"),i=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),j=/^[-+]?[0-9]+e/;b.exports=new h("tag:yaml.org,2002:float",{kind:"scalar",resolve:c,construct:d,predicate:f,represent:e,defaultStyle:"lowercase"})},{"../common":99,"../type":109}],113:[function(a,b){"use strict";function c(a){return a>=48&&57>=a||a>=65&&70>=a||a>=97&&102>=a}function d(a){return a>=48&&55>=a}function e(a){return a>=48&&57>=a}function f(a){if(null===a)return!1;var b,f=a.length,g=0,h=!1;if(!f)return!1;if(b=a[g],("-"===b||"+"===b)&&(b=a[++g]),"0"===b){if(g+1===f)return!0;if(b=a[++g],"b"===b){for(g++;f>g;g++)if(b=a[g],"_"!==b){if("0"!==b&&"1"!==b)return!1;h=!0}return h}if("x"===b){for(g++;f>g;g++)if(b=a[g],"_"!==b){if(!c(a.charCodeAt(g)))return!1;h=!0}return h}for(;f>g;g++)if(b=a[g],"_"!==b){if(!d(a.charCodeAt(g)))return!1;h=!0}return h}for(;f>g;g++)if(b=a[g],"_"!==b){if(":"===b)break;if(!e(a.charCodeAt(g)))return!1;h=!0}return!!h&&(":"!==b||/^(:[0-5]?[0-9])+$/.test(a.slice(g)))}function g(a){var b,c,d=a,e=1,f=[];return-1!==d.indexOf("_")&&(d=d.replace(/_/g,"")),b=d[0],("-"===b||"+"===b)&&("-"===b&&(e=-1),d=d.slice(1),b=d[0]),"0"===d?0:"0"===b?"b"===d[1]?e*parseInt(d.slice(2),2):"x"===d[1]?e*parseInt(d,16):e*parseInt(d,8):-1!==d.indexOf(":")?(d.split(":").forEach(function(a){f.unshift(parseInt(a,10))}),d=0,c=1,f.forEach(function(a){d+=a*c,c*=60}),e*d):e*parseInt(d,10)}function h(a){return"[object Number]"===Object.prototype.toString.call(a)&&a%1===0&&!i.isNegativeZero(a)}var i=a("../common"),j=a("../type");b.exports=new j("tag:yaml.org,2002:int",{kind:"scalar",resolve:f,construct:g,predicate:h,represent:{binary:function(a){return"0b"+a.toString(2)},octal:function(a){return"0"+a.toString(8)},decimal:function(a){return a.toString(10)},hexadecimal:function(a){return"0x"+a.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},{"../common":99,"../type":109}],114:[function(a,b){"use strict";function c(a){if(null===a)return!1;try{var b="("+a+")",c=g.parse(b,{range:!0});return"Program"===c.type&&1===c.body.length&&"ExpressionStatement"===c.body[0].type&&"FunctionExpression"===c.body[0].expression.type}catch(a){return!1}}function d(a){var b,c="("+a+")",d=g.parse(c,{range:!0}),e=[];if("Program"!==d.type||1!==d.body.length||"ExpressionStatement"!==d.body[0].type||"FunctionExpression"!==d.body[0].expression.type)throw new Error("Failed to resolve function");return d.body[0].expression.params.forEach(function(a){e.push(a.name)}),b=d.body[0].expression.body.range,new Function(e,c.slice(b[0]+1,b[1]-1))}function e(a){return a.toString()}function f(a){return"[object Function]"===Object.prototype.toString.call(a)}var g;try{var h=a;g=h("esprima")}catch(a){"undefined"!=typeof window&&(g=window.esprima)}var i=a("../../type");b.exports=new i("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:c,construct:d,predicate:f,represent:e})},{"../../type":109}],115:[function(a,b){"use strict";function c(a){if(null===a)return!1;if(0===a.length)return!1;var b=a,c=/\/([gim]*)$/.exec(a),d="";if("/"===b[0]){if(c&&(d=c[1]),d.length>3)return!1;if("/"!==b[b.length-d.length-1])return!1}return!0}function d(a){var b=a,c=/\/([gim]*)$/.exec(a),d="";return"/"===b[0]&&(c&&(d=c[1]),b=b.slice(1,b.length-d.length-1)),new RegExp(b,d)}function e(a){var b="/"+a.source+"/";return a.global&&(b+="g"),a.multiline&&(b+="m"),a.ignoreCase&&(b+="i"),b}function f(a){return"[object RegExp]"===Object.prototype.toString.call(a)}var g=a("../../type");b.exports=new g("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:c,construct:d,predicate:f,represent:e})},{"../../type":109}],116:[function(a,b){"use strict";function c(){return!0}function d(){}function e(){return""}function f(a){return"undefined"==typeof a}var g=a("../../type");b.exports=new g("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:c,construct:d,predicate:f,represent:e})},{"../../type":109}],117:[function(a,b){"use strict";var c=a("../type");b.exports=new c("tag:yaml.org,2002:map",{kind:"mapping",construct:function(a){return null!==a?a:{}}})},{"../type":109}],118:[function(a,b){"use strict";function c(a){return"<<"===a||null===a}var d=a("../type");b.exports=new d("tag:yaml.org,2002:merge",{kind:"scalar",resolve:c})},{"../type":109}],119:[function(a,b){"use strict";function c(a){if(null===a)return!0;var b=a.length;return 1===b&&"~"===a||4===b&&("null"===a||"Null"===a||"NULL"===a)}function d(){return null}function e(a){return null===a}var f=a("../type");b.exports=new f("tag:yaml.org,2002:null",{kind:"scalar",resolve:c,construct:d,predicate:e,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},{"../type":109}],120:[function(a,b){"use strict";function c(a){if(null===a)return!0;var b,c,d,e,h,i=[],j=a;for(b=0,c=j.length;c>b;b+=1){if(d=j[b],h=!1,"[object Object]"!==g.call(d))return!1;for(e in d)if(f.call(d,e)){if(h)return!1;h=!0}if(!h)return!1;if(-1!==i.indexOf(e))return!1;i.push(e)}return!0}function d(a){return null!==a?a:[]}var e=a("../type"),f=Object.prototype.hasOwnProperty,g=Object.prototype.toString;b.exports=new e("tag:yaml.org,2002:omap",{kind:"sequence",resolve:c,construct:d})},{"../type":109}],121:[function(a,b){"use strict";function c(a){if(null===a)return!0;var b,c,d,e,g,h=a;for(g=new Array(h.length),b=0,c=h.length;c>b;b+=1){if(d=h[b],"[object Object]"!==f.call(d))return!1;if(e=Object.keys(d),1!==e.length)return!1;g[b]=[e[0],d[e[0]]]}return!0}function d(a){if(null===a)return[];var b,c,d,e,f,g=a;for(f=new Array(g.length),b=0,c=g.length;c>b;b+=1)d=g[b],e=Object.keys(d),f[b]=[e[0],d[e[0]]];return f}var e=a("../type"),f=Object.prototype.toString;b.exports=new e("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:c,construct:d})},{"../type":109}],122:[function(a,b){"use strict";var c=a("../type");b.exports=new c("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(a){return null!==a?a:[]}})},{"../type":109}],123:[function(a,b){"use strict";function c(a){if(null===a)return!0;var b,c=a;for(b in c)if(f.call(c,b)&&null!==c[b])return!1;return!0}function d(a){return null!==a?a:{}}var e=a("../type"),f=Object.prototype.hasOwnProperty;b.exports=new e("tag:yaml.org,2002:set",{kind:"mapping",resolve:c,construct:d})},{"../type":109}],124:[function(a,b){"use strict";var c=a("../type");b.exports=new c("tag:yaml.org,2002:str",{kind:"scalar",construct:function(a){return null!==a?a:""}})},{"../type":109}],125:[function(a,b){"use strict";function c(a){return null!==a&&null!==g.exec(a)}function d(a){var b,c,d,e,f,h,i,j,k,l,m=0,n=null;if(b=g.exec(a),null===b)throw new Error("Date resolve error");if(c=+b[1],d=+b[2]-1,e=+b[3],!b[4])return new Date(Date.UTC(c,d,e));if(f=+b[4],h=+b[5],i=+b[6],b[7]){for(m=b[7].slice(0,3);m.length<3;)m+="0";m=+m}return b[9]&&(j=+b[10],k=+(b[11]||0),n=6e4*(60*j+k),"-"===b[9]&&(n=-n)),l=new Date(Date.UTC(c,d,e,f,h,i,m)),n&&l.setTime(l.getTime()-n),l}function e(a){return a.toISOString()}var f=a("../type"),g=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$");b.exports=new f("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:c,construct:d,instanceOf:Date,represent:e})},{"../type":109}],126:[function(a,b,c){"use strict";var d=(a("./utils"),a("./support")),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.decode=function(a){var b,c,f,g,h,i,j,k=0,l=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");var m=3*a.length/4;a.charAt(a.length-1)===e.charAt(64)&&m--,a.charAt(a.length-2)===e.charAt(64)&&m--;var n;for(n=d.uint8array?new Uint8Array(m):new Array(m);k<a.length;)g=e.indexOf(a.charAt(k++)),h=e.indexOf(a.charAt(k++)),i=e.indexOf(a.charAt(k++)),j=e.indexOf(a.charAt(k++)),b=g<<2|h>>4,c=(15&h)<<4|i>>2,f=(3&i)<<6|j,n[l++]=b,64!==i&&(n[l++]=c),64!==j&&(n[l++]=f);return n}},{"./support":152,"./utils":154}],127:[function(a,b){"use strict";function c(a,b,c,d,e){this.compressedSize=a,this.uncompressedSize=b,this.crc32=c,this.compression=d,this.compressedContent=e}var d=a("./external"),e=a("./stream/DataWorker"),f=a("./stream/DataLengthProbe"),g=a("./stream/Crc32Probe"),f=a("./stream/DataLengthProbe");c.prototype={getContentWorker:function(){var a=new e(d.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),b=this;return a.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new e(d.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(a,b,c){return a.pipe(new g).pipe(new f("uncompressedSize")).pipe(b.compressWorker(c)).pipe(new f("compressedSize")).withStreamInfo("compression",b)},b.exports=c},{"./external":131,"./stream/Crc32Probe":147,"./stream/DataLengthProbe":148,"./stream/DataWorker":149}],128:[function(a,b,c){"use strict";var d=a("./stream/GenericWorker");c.STORE={magic:"\0\0",uncompressWorker:function(){return new d("STORE decompression")}},c.DEFLATE=a("./flate")},{"./flate":132,"./stream/GenericWorker":150}],129:[function(a,b){"use strict";function c(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function d(a,b,c,d){var e=g,f=d+c;a^=-1;for(var h=d;f>h;h++)a=a>>>8^e[255&(a^b[h])];return-1^a}function e(a,b,c,d){var e=g,f=d+c;a^=-1;for(var h=d;f>h;h++)a=a>>>8^e[255&(a^b.charCodeAt(h))];return-1^a}var f=a("./utils"),g=c();b.exports=function(a,b){if("undefined"==typeof a||!a.length)return 0;var c="string"!==f.getTypeOf(a);return c?d(0|b,a,a.length,0):e(0|b,a,a.length,0)}},{"./utils":154}],130:[function(a,b,c){"use strict";c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],131:[function(a,b){"use strict";b.exports={Promise:window.Promise}},{}],132:[function(a,b,c){"use strict";function d(a,b){h.call(this,"FlateWorker/"+a),this._pako=new f[a]({raw:!0,level:b.level||-1}),this.meta={};var c=this;this._pako.onData=function(a){c.push({data:a,meta:c.meta})}}var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,f=a("pako"),g=a("./utils"),h=a("./stream/GenericWorker"),i=e?"uint8array":"array";c.magic="\b\0",g.inherits(d,h),d.prototype.processChunk=function(a){this.meta=a.meta,this._pako.push(g.transformTo(i,a.data),!1)},d.prototype.flush=function(){h.prototype.flush.call(this),this._pako.push([],!0)},d.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},c.compressWorker=function(a){return new d("Deflate",a)},c.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":150,"./utils":154,pako:165}],133:[function(a,b){"use strict";function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var a=new c;for(var b in this)"function"!=typeof this[b]&&(a[b]=this[b]);return a}}c.prototype=a("./object"),c.prototype.loadAsync=a("./load"),c.support=a("./support"),c.defaults=a("./defaults"),c.loadAsync=function(a,b){return(new c).loadAsync(a,b)},c.external=a("./external"),b.exports=c},{"./defaults":130,"./external":131,"./load":134,"./object":138,"./support":152}],134:[function(a,b){"use strict";function c(a){return new e.Promise(function(b,c){var d=a.decompressed.getContentWorker().pipe(new h);d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==a.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}var d=a("./utils"),e=a("./external"),f=a("./utf8"),d=a("./utils"),g=a("./zipEntries"),h=a("./stream/Crc32Probe"),i=a("./nodejsUtils");b.exports=function(a,b){var h=this;return b=d.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:f.utf8decode}),i.isNode&&i.isStream(a)?e.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):d.prepareContent("the loaded zip file",a,!0,b.optimizedBinaryString,b.base64).then(function(a){var c=new g(b);return c.load(a),c}).then(function(a){var d=[e.Promise.resolve(a)],f=a.files;if(b.checkCRC32)for(var g=0;g<f.length;g++)d.push(c(f[g]));return e.Promise.all(d)}).then(function(a){for(var c=a.shift(),d=c.files,e=0;e<d.length;e++){var f=d[e];h.file(f.fileNameStr,f.decompressed,{binary:!0,optimizedBinaryString:!0,date:f.date,dir:f.dir,comment:f.fileCommentStr.length?f.fileCommentStr:null,unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions,createFolders:b.createFolders})}return c.zipComment.length&&(h.comment=c.zipComment),h})}},{"./external":131,"./nodejsUtils":137,"./stream/Crc32Probe":147,"./utf8":153,"./utils":154,"./zipEntries":155}],135:[function(a,b){"use strict";function c(a,b){e.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(b)}var d=a("../utils"),e=a("../stream/GenericWorker");d.inherits(c,e),c.prototype._bindStream=function(a){var b=this;this._stream=a,a.pause(),a.on("data",function(a){b.push({data:a,meta:{percent:0}})}).on("error",function(a){b.isPaused?this.generatedError=a:b.error(a)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},c.prototype.pause=function(){return!!e.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!e.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},b.exports=c},{"../stream/GenericWorker":150,"../utils":154}],136:[function(a,b){"use strict";function c(a,b,c){d.call(this,b),this._helper=a;var e=this;a.on("data",function(a,b){e.push(a)||e._helper.pause(),c&&c(b)}).on("error",function(a){e.emit("error",a)}).on("end",function(){e.push(null)})}var d=a("readable-stream").Readable,e=a("util");e.inherits(c,d),c.prototype._read=function(){this._helper.resume()},b.exports=c},{"readable-stream":164,util:192}],137:[function(a,b){(function(a){"use strict";b.exports={isNode:"undefined"!=typeof a,newBuffer:function(b,c){return new a(b,c)},isBuffer:function(b){return a.isBuffer(b)},isStream:function(a){return a&&"function"==typeof a.on&&"function"==typeof a.pause&&"function"==typeof a.resume}}}).call(this,a("buffer").Buffer)},{buffer:5}],138:[function(a,b){"use strict";function c(a){return"[object RegExp]"===Object.prototype.toString.call(a)}var d=a("./utils"),e=a("./stream/GenericWorker"),f=a("./defaults"),g=a("./compressedObject"),h=a("./zipObject"),i=a("./nodejsUtils"),j=a("./nodejs/NodejsStreamInputAdapter"),k=function(a,b,c){var k,o=d.getTypeOf(b);c=d.extend(c||{},f),c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(a=m(a)),c.createFolders&&(k=l(a))&&n.call(this,k,!0);var p="string"===o&&c.binary===!1&&c.base64===!1;c.binary=!p;var q=b instanceof g&&0===b.uncompressedSize;(q||c.dir||!b||0===b.length)&&(c.base64=!1,c.binary=!0,b="",c.compression="STORE",o="string");var r=null;r=b instanceof g||b instanceof e?b:i.isNode&&i.isStream(b)?new j(a,b):d.prepareContent(a,b,c.binary,c.optimizedBinaryString,c.base64);var s=new h(a,r,c);this.files[a]=s},l=function(a){"/"===a.slice(-1)&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},m=function(a){return"/"!==a.slice(-1)&&(a+="/"),a},n=function(a,b){return b="undefined"!=typeof b?b:f.createFolders,a=m(a),this.files[a]||k.call(this,a,null,{dir:!0,createFolders:b}),this.files[a]},o={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(a){var b,c,d;for(b in this.files)this.files.hasOwnProperty(b)&&(d=this.files[b],c=b.slice(this.root.length,b.length),c&&b.slice(0,this.root.length)===this.root&&a(c,d))},filter:function(a){var b=[];return this.forEach(function(c,d){a(c,d)&&b.push(d)}),b},file:function(a,b,d){if(1===arguments.length){if(c(a)){var e=a;return this.filter(function(a,b){return!b.dir&&e.test(a)})}var f=this.files[this.root+a];return f&&!f.dir?f:null}return a=this.root+a,k.call(this,a,b,d),this},folder:function(a){if(!a)return this;if(c(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a,d=n.call(this,b),e=this.clone();return e.root=d.name,e}};b.exports=o},{"./compressedObject":127,"./defaults":130,"./nodejs/NodejsStreamInputAdapter":135,"./nodejsUtils":137,"./stream/GenericWorker":150,"./utils":154,"./zipObject":157}],139:[function(a,b){"use strict";function c(a){d.call(this,a);for(var b=0;b<this.data.length;b++)a[b]=255&a[b]}var d=a("./DataReader"),e=a("../utils");e.inherits(c,d),c.prototype.byteAt=function(a){return this.data[this.zero+a]},c.prototype.lastIndexOfSignature=function(a){for(var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===b&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===e)return f-this.zero;return-1},c.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.readData(4);return b===f[0]&&c===f[1]&&d===f[2]&&e===f[3]},c.prototype.readData=function(a){if(this.checkOffset(a),0===a)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=c},{"../utils":154,"./DataReader":140}],140:[function(a,b){"use strict";function c(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}var d=a("../utils");c.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||0>a)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var b,c=0;for(this.checkOffset(a),b=this.index+a-1;b>=this.index;b--)c=(c<<8)+this.byteAt(b);return this.index+=a,c},readString:function(a){return d.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},b.exports=c},{"../utils":154}],141:[function(a,b){"use strict";function c(a){d.call(this,a)}var d=a("./Uint8ArrayReader"),e=a("../utils");e.inherits(c,d),c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=c},{"../utils":154,"./Uint8ArrayReader":143}],142:[function(a,b){"use strict";function c(a){d.call(this,a)}var d=a("./DataReader"),e=a("../utils");e.inherits(c,d),c.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},c.prototype.readAndCheckSignature=function(a){var b=this.readData(4);return a===b},c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=c},{"../utils":154,"./DataReader":140}],143:[function(a,b){"use strict";function c(a){d.call(this,a)}var d=a("./ArrayReader"),e=a("../utils");e.inherits(c,d),c.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=c},{"../utils":154,"./ArrayReader":139}],144:[function(a,b){"use strict";var c=a("../utils"),d=a("../support"),e=a("./ArrayReader"),f=a("./StringReader"),g=a("./NodeBufferReader"),h=a("./Uint8ArrayReader");b.exports=function(a){var b=c.getTypeOf(a);return c.checkSupport(b),"string"!==b||d.uint8array?"nodebuffer"===b?new g(a):d.uint8array?new h(c.transformTo("uint8array",a)):new e(c.transformTo("array",a)):new f(a)}},{"../support":152,"../utils":154,"./ArrayReader":139,"./NodeBufferReader":141,"./StringReader":142,"./Uint8ArrayReader":143}],145:[function(a,b,c){"use strict";c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\b"},{}],146:[function(a,b){"use strict";function c(a){d.call(this,"ConvertWorker to "+a),this.destType=a}var d=a("./GenericWorker"),e=a("../utils");e.inherits(c,d),c.prototype.processChunk=function(a){this.push({data:e.transformTo(this.destType,a.data),meta:a.meta})},b.exports=c},{"../utils":154,"./GenericWorker":150}],147:[function(a,b){"use strict";function c(){d.call(this,"Crc32Probe")}var d=a("./GenericWorker"),e=a("../crc32"),f=a("../utils");f.inherits(c,d),c.prototype.processChunk=function(a){this.streamInfo.crc32=e(a.data,this.streamInfo.crc32||0),this.push(a)},b.exports=c},{"../crc32":129,"../utils":154,"./GenericWorker":150}],148:[function(a,b){"use strict";function c(a){e.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}var d=a("../utils"),e=a("./GenericWorker");d.inherits(c,e),c.prototype.processChunk=function(a){if(a){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+a.data.length}e.prototype.processChunk.call(this,a)},b.exports=c},{"../utils":154,"./GenericWorker":150}],149:[function(a,b){"use strict";function c(a){e.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(a){b.dataIsReady=!0,b.data=a,b.max=a&&a.length||0,b.type=d.getTypeOf(a),b.isPaused||b._tickAndRepeat()},function(a){b.error(a)})}var d=a("../utils"),e=a("./GenericWorker"),f=16384;d.inherits(c,e),c.prototype.cleanUp=function(){e.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!e.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,d.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(d.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=f,b=null,c=Math.min(this.max,this.index+a);if(this.index>=this.max)return this.end();switch(this.type){case"string":b=this.data.substring(this.index,c);break;case"uint8array":b=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":b=this.data.slice(this.index,c)}return this.index=c,this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=c},{"../utils":154,"./GenericWorker":150}],150:[function(a,b){"use strict";function c(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,b){return this._listeners[a].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,b){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,b)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var b=this;return a.on("data",function(a){b.processChunk(a)}),a.on("end",function(){b.end()}),a.on("error",function(a){b.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,b){return this.extraStreamInfo[a]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},b.exports=c},{}],151:[function(a,b){(function(c){"use strict";function d(a,b,c){switch(a){case"blob":return h.newBlob(h.transformTo("arraybuffer",b),c);case"base64":return k.encode(b);default:return h.transformTo(a,b)}}function e(a,b){var d,e=0,f=null,g=0;for(d=0;d<b.length;d++)g+=b[d].length;switch(a){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":for(f=new Uint8Array(g),d=0;d<b.length;d++)f.set(b[d],e),e+=b[d].length;return f;case"nodebuffer":return c.concat(b);default:throw new Error("concat : unsupported type '"+a+"'")}}function f(a,b){return new m.Promise(function(c,f){var g=[],h=a._internalType,i=a._outputType,j=a._mimeType;a.on("data",function(a,c){g.push(a),b&&b(c)}).on("error",function(a){g=[],f(a)}).on("end",function(){try{var a=d(i,e(h,g),j);c(a)}catch(a){f(a)}g=[]}).resume()})}function g(a,b,c){var d=b;switch(b){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=b,this._mimeType=c,h.checkSupport(d),this._worker=a.pipe(new i(d)),a.lock()}catch(a){this._worker=new j("error"),this._worker.error(a)}}var h=a("../utils"),i=a("./ConvertWorker"),j=a("./GenericWorker"),k=a("../base64"),l=a("../nodejs/NodejsStreamOutputAdapter"),m=a("../external");g.prototype={accumulate:function(a){return f(this,a)},on:function(a,b){var c=this;return"data"===a?this._worker.on(a,function(a){b.call(c,a.data,a.meta)}):this._worker.on(a,function(){h.delay(b,arguments,c)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(a){if(h.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},a)}},b.exports=g}).call(this,a("buffer").Buffer)},{"../base64":126,"../external":131,"../nodejs/NodejsStreamOutputAdapter":136,"../utils":154,"./ConvertWorker":146,"./GenericWorker":150,buffer:5}],152:[function(a,b,c){(function(b){"use strict";if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,c.nodebuffer="undefined"!=typeof b,c.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)c.blob=!1;else{var d=new ArrayBuffer(0);try{c.blob=0===new Blob([d],{type:"application/zip"}).size}catch(a){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;f.append(d),c.blob=0===f.getBlob("application/zip").size}catch(a){c.blob=!1}}}c.nodestream=!!a("./nodejs/NodejsStreamOutputAdapter").prototype}).call(this,a("buffer").Buffer)},{"./nodejs/NodejsStreamOutputAdapter":136,buffer:5}],153:[function(a,b,c){"use strict";function d(){i.call(this,"utf-8 decode"),this.leftOver=null}function e(){i.call(this,"utf-8 encode")}for(var f=a("./utils"),g=a("./support"),h=a("./nodejsUtils"),i=a("./stream/GenericWorker"),j=new Array(256),k=0;256>k;k++)j[k]=k>=252?6:k>=248?5:k>=240?4:k>=224?3:k>=192?2:1;j[254]=j[254]=1;var l=function(a){var b,c,d,e,f,h=a.length,i=0;for(e=0;h>e;e++)c=a.charCodeAt(e),55296===(64512&c)&&h>e+1&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=g.uint8array?new Uint8Array(i):new Array(i),f=0,e=0;i>f;e++)c=a.charCodeAt(e),55296===(64512&c)&&h>e+1&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),128>c?b[f++]=c:2048>c?(b[f++]=192|c>>>6,b[f++]=128|63&c):65536>c?(b[f++]=224|c>>>12,b[f++]=128|c>>>6&63,b[f++]=128|63&c):(b[f++]=240|c>>>18,b[f++]=128|c>>>12&63,b[f++]=128|c>>>6&63,b[f++]=128|63&c);return b},m=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+j[a[c]]>b?c:b},n=function(a){var b,c,d,e,g=a.length,h=new Array(2*g);for(c=0,b=0;g>b;)if(d=a[b++],128>d)h[c++]=d;else if(e=j[d],
e>4)h[c++]=65533,b+=e-1;else{for(d&=2===e?31:3===e?15:7;e>1&&g>b;)d=d<<6|63&a[b++],e--;e>1?h[c++]=65533:65536>d?h[c++]=d:(d-=65536,h[c++]=55296|d>>10&1023,h[c++]=56320|1023&d)}return h.length!==c&&(h.subarray?h=h.subarray(0,c):h.length=c),f.applyFromCharCode(h)};c.utf8encode=function(a){return g.nodebuffer?h.newBuffer(a,"utf-8"):l(a)},c.utf8decode=function(a){return g.nodebuffer?f.transformTo("nodebuffer",a).toString("utf-8"):(a=f.transformTo(g.uint8array?"uint8array":"array",a),n(a))},f.inherits(d,i),d.prototype.processChunk=function(a){var b=f.transformTo(g.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var d=b;b=new Uint8Array(d.length+this.leftOver.length),b.set(this.leftOver,0),b.set(d,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var e=m(b),h=b;e!==b.length&&(g.uint8array?(h=b.subarray(0,e),this.leftOver=b.subarray(e,b.length)):(h=b.slice(0,e),this.leftOver=b.slice(e,b.length))),this.push({data:c.utf8decode(h),meta:a.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=d,f.inherits(e,i),e.prototype.processChunk=function(a){this.push({data:c.utf8encode(a.data),meta:a.meta})},c.Utf8EncodeWorker=e},{"./nodejsUtils":137,"./stream/GenericWorker":150,"./support":152,"./utils":154}],154:[function(a,b,c){"use strict";function d(a){var b=null;return b=i.uint8array?new Uint8Array(a.length):new Array(a.length),f(a,b)}function e(a){return a}function f(a,b){for(var c=0;c<a.length;++c)b[c]=255&a.charCodeAt(c);return b}function g(a){var b=65536,d=c.getTypeOf(a),e=!0;if("uint8array"===d?e=n.applyCanBeUsed.uint8array:"nodebuffer"===d&&(e=n.applyCanBeUsed.nodebuffer),e)for(;b>1;)try{return n.stringifyByChunk(a,d,b)}catch(a){b=Math.floor(b/2)}return n.stringifyByChar(a)}function h(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var i=a("./support"),j=a("./base64"),k=a("./nodejsUtils"),l=a("asap"),m=a("./external");c.newBlob=function(a,b){c.checkSupport("blob");try{return new Blob([a],{type:b})}catch(c){try{var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,e=new d;return e.append(a),e.getBlob(b)}catch(a){throw new Error("Bug : can't construct the Blob.")}}};var n={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(c>=f)return String.fromCharCode.apply(null,a);for(;f>e;)d.push("array"===b||"nodebuffer"===b?String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f))):String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;return d.join("")},stringifyByChar:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(a){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,k.newBuffer(1)).length}catch(a){return!1}}()}};c.applyFromCharCode=g;var o={};o.string={string:e,array:function(a){return f(a,new Array(a.length))},arraybuffer:function(a){return o.string.uint8array(a).buffer},uint8array:function(a){return f(a,new Uint8Array(a.length))},nodebuffer:function(a){return f(a,k.newBuffer(a.length))}},o.array={string:g,array:e,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBuffer(a)}},o.arraybuffer={string:function(a){return g(new Uint8Array(a))},array:function(a){return h(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:e,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBuffer(new Uint8Array(a))}},o.uint8array={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:e,nodebuffer:function(a){return k.newBuffer(a)}},o.nodebuffer={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){return o.nodebuffer.uint8array(a).buffer},uint8array:function(a){return h(a,new Uint8Array(a.length))},nodebuffer:e},c.transformTo=function(a,b){if(b||(b=""),!a)return b;c.checkSupport(a);var d=c.getTypeOf(b),e=o[d][a](b);return e},c.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":i.nodebuffer&&k.isBuffer(a)?"nodebuffer":i.uint8array&&a instanceof Uint8Array?"uint8array":i.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(a){var b=i[a.toLowerCase()];if(!b)throw new Error(a+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(a){var b,c,d="";for(c=0;c<(a||"").length;c++)b=a.charCodeAt(c),d+="\\x"+(16>b?"0":"")+b.toString(16).toUpperCase();return d},c.delay=function(a,b,c){l(function(){a.apply(c||null,b||[])})},c.inherits=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c},c.extend=function(){var a,b,c={};for(a=0;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&"undefined"==typeof c[b]&&(c[b]=arguments[a][b]);return c},c.prepareContent=function(a,b,e,f,g){var h=null;return h=i.blob&&b instanceof Blob&&"undefined"!=typeof FileReader?new m.Promise(function(a,c){var d=new FileReader;d.onload=function(b){a(b.target.result)},d.onerror=function(a){c(a.target.error)},d.readAsArrayBuffer(b)}):m.Promise.resolve(b),h.then(function(b){var h=c.getTypeOf(b);return h?("arraybuffer"===h?b=c.transformTo("uint8array",b):"string"===h&&(g?b=j.decode(b):e&&f!==!0&&(b=d(b))),b):m.Promise.reject(new Error("The data of '"+a+"' is in an unsupported format !"))})}},{"./base64":126,"./external":131,"./nodejsUtils":137,"./support":152,asap:1}],155:[function(a,b){"use strict";function c(a){this.files=[],this.loadOptions=a}var d=a("./reader/readerFor"),e=a("./utils"),f=a("./signature"),g=a("./zipEntry"),h=(a("./utf8"),a("./support"));c.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+e.pretty(b)+", expected "+e.pretty(a)+")")}},isSignature:function(a,b){var c=this.reader.index;this.reader.setIndex(a);var d=this.reader.readString(4),e=d===b;return this.reader.setIndex(c),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),b=h.uint8array?"uint8array":"array",c=e.transformTo(b,a);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a,b,c,d=this.zip64EndOfCentralSize-44,e=0;d>e;)a=this.reader.readInt(2),b=this.reader.readInt(4),c=this.reader.readData(b),this.zip64ExtensibleData[a]={id:a,length:b,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(f.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(f.CENTRAL_FILE_HEADER);)a=new g({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(0>a){var b=!this.isSignature(0,f.LOCAL_FILE_HEADER);throw new Error(b?"Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html":"Corrupted zip : can't find end of central directory")}this.reader.setIndex(a);var c=a;if(this.checkSignature(f.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===e.MAX_VALUE_16BITS||this.diskWithCentralDirStart===e.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===e.MAX_VALUE_16BITS||this.centralDirRecords===e.MAX_VALUE_16BITS||this.centralDirSize===e.MAX_VALUE_32BITS||this.centralDirOffset===e.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>a)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(a),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,f.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var g=c-d;if(g>0)this.isSignature(c,f.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(0>g)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(a){this.reader=d(a)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=c},{"./reader/readerFor":144,"./signature":145,"./support":152,"./utf8":153,"./utils":154,"./zipEntry":156}],156:[function(a,b){"use strict";function c(a,b){this.options=a,this.loadOptions=b}var d=a("./reader/readerFor"),e=a("./utils"),f=a("./compressedObject"),g=a("./crc32"),h=a("./utf8"),i=a("./compressions"),j=a("./support"),k=0,l=3,m=function(a){for(var b in i)if(i.hasOwnProperty(b)&&i[b].magic===a)return i[b];return null};c.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(a){var b,c;if(a.skip(22),this.fileNameLength=a.readInt(2),c=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(c),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(b=m(this.compressionMethod),null===b)throw new Error("Corrupted zip : compression "+e.pretty(this.compressionMethod)+" unknown (inner file : "+e.transformTo("string",this.fileName)+")");this.decompressed=new f(this.compressedSize,this.uncompressedSize,this.crc32,b,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var b=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(b),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a===k&&(this.dosPermissions=63&this.externalFileAttributes),a===l&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=d(this.extraFields[1].value);this.uncompressedSize===e.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===e.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===e.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===e.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var b,c,d,e=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index<e;)b=a.readInt(2),c=a.readInt(2),d=a.readData(c),this.extraFields[b]={id:b,length:c,value:d}},handleUTF8:function(){var a=j.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(null!==b)this.fileNameStr=b;else{var c=e.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var d=this.findExtraFieldUnicodeComment();if(null!==d)this.fileCommentStr=d;else{var f=e.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var b=d(a.value);return 1!==b.readInt(1)?null:g(this.fileName)!==b.readInt(4)?null:h.utf8decode(b.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var b=d(a.value);return 1!==b.readInt(1)?null:g(this.fileComment)!==b.readInt(4)?null:h.utf8decode(b.readData(a.length-5))}return null}},b.exports=c},{"./compressedObject":127,"./compressions":128,"./crc32":129,"./reader/readerFor":144,"./support":152,"./utf8":153,"./utils":154}],157:[function(a,b){"use strict";var c=a("./stream/StreamHelper"),d=a("./stream/DataWorker"),e=a("./utf8"),f=a("./compressedObject"),g=a("./stream/GenericWorker"),h=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};h.prototype={internalStream:function(a){var b=a.toLowerCase(),d="string"===b||"text"===b;("binarystring"===b||"text"===b)&&(b="string");var f=this._decompressWorker(),g=!this._dataBinary;return g&&!d&&(f=f.pipe(new e.Utf8EncodeWorker)),!g&&d&&(f=f.pipe(new e.Utf8DecodeWorker)),new c(f,b,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||"nodebuffer").toNodejsStream(b)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof g?this._data:new d(this._data)}};for(var i=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],j=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},k=0;k<i.length;k++)h.prototype[i[k]]=j;b.exports=h},{"./compressedObject":127,"./stream/DataWorker":149,"./stream/GenericWorker":150,"./stream/StreamHelper":151,"./utf8":153}],158:[function(a,b,c){arguments[4][6][0].apply(c,arguments)},{dup:6}],159:[function(a,b){"use strict";function c(a){return this instanceof c?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",d)):new c(a)}function d(){this.allowHalfOpen||this._writableState.ended||g(e,this)}function e(a){a.end()}var f=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=c;var g=a("process-nextick-args"),h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");h.inherits(c,i);for(var k=f(j.prototype),l=0;l<k.length;l++){var m=k[l];c.prototype[m]||(c.prototype[m]=j.prototype[m])}},{"./_stream_readable":161,"./_stream_writable":163,"core-util-is":71,inherits:95,"process-nextick-args":184}],160:[function(a,b){"use strict";function c(a){return this instanceof c?void d.call(this,a):new c(a)}b.exports=c;var d=a("./_stream_transform"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(c,d),c.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":162,"core-util-is":71,inherits:95}],161:[function(a,b){(function(c){"use strict";function d(b,c){I=I||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof I&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(H||(H=a("string_decoder/").StringDecoder),this.decoder=new H(b.encoding),this.encoding=b.encoding)}function e(b){return I=I||a("./_stream_duplex"),this instanceof e?(this._readableState=new d(b,this),this.readable=!0,b&&"function"==typeof b.read&&(this._read=b.read),void C.call(this)):new e(b)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(null===c)b.reading=!1,k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else{var i;!b.decoder||e||d||(c=b.decoder.write(c),i=!b.objectMode&&0===c.length),e||(b.reading=!1),i||(b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&l(a))),n(a,b)}else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){return a>=J?a=J:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:null===a||isNaN(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return B.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,l(a)}}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(G("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?z(m,a):m(a))}function m(a){G("emit readable"),a.emit("readable"),t(a)}function n(a,b){b.readingMore||(b.readingMore=!0,z(o,a,b))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(G("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;G("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&D(a,"data")&&(b.flowing=!0,t(a))}}function q(a){G("readable nexttick read 0"),a.read(0)}function r(a,b){b.resumeScheduled||(b.resumeScheduled=!0,z(s,a,b))}function s(a,b){b.reading||(G("resume read 0"),a.read(0)),b.resumeScheduled=!1,a.emit("resume"),t(a),b.flowing&&!b.reading&&a.read(0)}function t(a){var b=a._readableState;if(G("flow",b.flowing),b.flowing)do var c=a.read();while(null!==c&&b.flowing)}function u(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):1===d.length?d[0]:B.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new B(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function v(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,z(w,b,a))}function w(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function x(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function y(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e;var z=a("process-nextick-args"),A=a("isarray"),B=a("buffer").Buffer;e.ReadableState=d;var C,D=(a("events"),function(a,b){return a.listeners(b).length});!function(){try{C=a("stream")}catch(a){}finally{C||(C=a("events").EventEmitter)}}();var B=a("buffer").Buffer,E=a("core-util-is");E.inherits=a("inherits");var F=a("util"),G=void 0;G=F&&F.debuglog?F.debuglog("stream"):function(){};var H;E.inherits(e,C);var I,I;e.prototype.push=function(a,b){var c=this._readableState;return c.objectMode||"string"!=typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new B(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.isPaused=function(){return this._readableState.flowing===!1},e.prototype.setEncoding=function(b){return H||(H=a("string_decoder/").StringDecoder),this._readableState.decoder=new H(b),this._readableState.encoding=b,this};var J=8388608;e.prototype.read=function(a){G("read",a);var b=this._readableState,c=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return G("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?v(this):l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&v(this),null;var d=b.needReadable;G("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,G("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,G("reading or ended",d)),d&&(G("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?u(a,b):null,null===e&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&v(this),null!==e&&this.emit("data",e),e},e.prototype._read=function(){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){G("onunpipe"),a===l&&f()}function e(){G("onend"),a.end()}function f(){G("cleanup"),a.removeListener("close",i),a.removeListener("finish",j),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",d),l.removeListener("end",e),l.removeListener("end",f),l.removeListener("data",g),r=!0,!m.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function g(b){G("ondata");var c=a.write(b);!1===c&&(1!==m.pipesCount||m.pipes[0]!==a||1!==l.listenerCount("data")||r||(G("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++),l.pause())}function h(b){G("onerror",b),k(),a.removeListener("error",h),0===D(a,"error")&&a.emit("error",b)}function i(){a.removeListener("finish",j),k()}function j(){G("onfinish"),a.removeListener("close",i),k()}function k(){G("unpipe"),l.unpipe(a)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=a;break;case 1:m.pipes=[m.pipes,a];break;default:m.pipes.push(a)}m.pipesCount+=1,G("pipe count=%d opts=%j",m.pipesCount,b);var n=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,o=n?e:f;m.endEmitted?z(o):l.once("end",o),a.on("unpipe",d);var q=p(l);a.on("drain",q);var r=!1;return l.on("data",g),a._events&&a._events.error?A(a._events.error)?a._events.error.unshift(h):a._events.error=[h,a._events.error]:a.on("error",h),a.once("close",i),a.once("finish",j),a.emit("pipe",l),m.flowing||(G("pipe resume"),l.resume()),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var f=y(b.pipes,a);return-1===f?this:(b.pipes.splice(f,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var c=C.prototype.on.call(this,a,b);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&!this._readableState.endEmitted){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&l(this,d):z(q,this))}return c},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){var a=this._readableState;return a.flowing||(G("resume"),a.flowing=!0,r(this,a)),this},e.prototype.pause=function(){return G("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(G("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(G("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(G("wrapped data"),b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)void 0===this[e]&&"function"==typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return x(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){G("wrapped _read",b),c&&(c=!1,a.resume())},d},e._fromList=u}).call(this,a("_process"))},{"./_stream_duplex":159,_process:185,buffer:5,"core-util-is":71,events:74,inherits:95,isarray:158,"process-nextick-args":184,"string_decoder/":186,util:4}],162:[function(a,b){"use strict";function c(a){this.afterTransform=function(b,c){return d(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function d(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);g.call(this,a),this._transformState=new c(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(a){f(b,a)}):f(b)})}function f(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=e;var g=a("./_stream_duplex"),h=a("core-util-is");h.inherits=a("inherits"),h.inherits(e,g),e.prototype.push=function(a,b){return this._transformState.needTransform=!1,g.prototype.push.call(this,a,b)},e.prototype._transform=function(){throw new Error("not implemented")},e.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},e.prototype._read=function(){var a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}},{"./_stream_duplex":159,"core-util-is":71,inherits:95}],163:[function(a,b){(function(c){"use strict";function d(){}function e(a,b,c){this.chunk=a,this.encoding=b,this.callback=c,this.next=null}function f(b,c){D=D||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof D&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=b.decodeStrings===!1;this.decodeStrings=!f,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){o(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this),this.corkedRequestsFree.next=new w(this)}function g(b){return D=D||a("./_stream_duplex"),this instanceof g||this instanceof D?(this._writableState=new f(b,this),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev)),void B.call(this)):new g(b)}function h(a,b){var c=new Error("write after end");a.emit("error",c),x(b,c)}function i(a,b,c,d){var e=!0;if(!z.isBuffer(c)&&"string"!=typeof c&&null!==c&&void 0!==c&&!b.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");a.emit("error",f),x(d,f),e=!1}return e}function j(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=new z(b,c)),b}function k(a,b,c,d,f){c=j(b,c,d),z.isBuffer(c)&&(d="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;if(h||(b.needDrain=!0),b.writing||b.corked){var i=b.lastBufferedRequest;b.lastBufferedRequest=new e(c,d,f),i?i.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else l(a,b,!1,g,c,d,f);return h}function l(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function m(a,b,c,d,e){--b.pendingcb,c?x(e,d):e(d),a._writableState.errorEmitted=!0,a.emit("error",d)}function n(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function o(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if(n(c),b)m(a,c,d,b,e);else{var f=s(c);f||c.corked||c.bufferProcessing||!c.bufferedRequest||r(a,c),d?y(p,a,c,f,e):p(a,c,f,e)}}function p(a,b,c,d){c||q(a,b),b.pendingcb--,d(),u(a,b)}function q(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function r(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=b.bufferedRequestCount,e=new Array(d),f=b.corkedRequestsFree;f.entry=c;for(var g=0;c;)e[g]=c,c=c.next,g+=1;l(a,b,!0,b.length,e,"",f.finish),b.pendingcb++,b.lastBufferedRequest=null,b.corkedRequestsFree=f.next,f.next=null}else{for(;c;){var h=c.chunk,i=c.encoding,j=c.callback,k=b.objectMode?1:h.length;if(l(a,b,!1,k,h,i,j),c=c.next,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0,b.bufferedRequest=c,b.bufferProcessing=!1}function s(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function t(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function u(a,b){var c=s(b);return c&&(0===b.pendingcb?(t(a,b),b.finished=!0,a.emit("finish")):t(a,b)),c}function v(a,b,c){b.ending=!0,u(a,b),c&&(b.finished?x(c):a.once("finish",c)),b.ended=!0,a.writable=!1}function w(a){var b=this;this.next=null,this.entry=null,
this.finish=function(c){var d=b.entry;for(b.entry=null;d;){var e=d.callback;a.pendingcb--,e(c),d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}b.exports=g;var x=a("process-nextick-args"),y=!c.browser&&["v0.10","v0.9."].indexOf(c.version.slice(0,5))>-1?setImmediate:x,z=a("buffer").Buffer;g.WritableState=f;var A=a("core-util-is");A.inherits=a("inherits");var B,C={deprecate:a("util-deprecate")};!function(){try{B=a("stream")}catch(a){}finally{B||(B=a("events").EventEmitter)}}();var z=a("buffer").Buffer;A.inherits(g,B);var D;f.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b},function(){try{Object.defineProperty(f.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(a){}}();var D;g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},g.prototype.write=function(a,b,c){var e=this._writableState,f=!1;return"function"==typeof b&&(c=b,b=null),z.isBuffer(a)?b="buffer":b||(b=e.defaultEncoding),"function"!=typeof c&&(c=d),e.ended?h(this,c):i(this,e,a,c)&&(e.pendingcb++,f=k(this,e,a,b,c)),f},g.prototype.cork=function(){var a=this._writableState;a.corked++},g.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||r(this,a))},g.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a},g.prototype._write=function(a,b,c){c(new Error("not implemented"))},g.prototype._writev=null,g.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!==a&&void 0!==a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||v(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":159,_process:185,buffer:5,"core-util-is":71,events:74,inherits:95,"process-nextick-args":184,"util-deprecate":189}],164:[function(a,b,c){var d=function(){try{return a("stream")}catch(a){}}();c=b.exports=a("./lib/_stream_readable.js"),c.Stream=d||c,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":159,"./lib/_stream_passthrough.js":160,"./lib/_stream_readable.js":161,"./lib/_stream_transform.js":162,"./lib/_stream_writable.js":163}],165:[function(a,b){"use strict";var c=a("./lib/utils/common").assign,d=a("./lib/deflate"),e=a("./lib/inflate"),f=a("./lib/zlib/constants"),g={};c(g,d,e,f),b.exports=g},{"./lib/deflate":166,"./lib/inflate":167,"./lib/utils/common":168,"./lib/zlib/constants":171}],166:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=i.assign({level:s,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:t,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=h.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==p)throw new Error(k[c]);if(b.header&&h.deflateSetHeader(this.strm,b.header),b.dictionary){var e;if(e="string"==typeof b.dictionary?j.string2buf(b.dictionary):"[object ArrayBuffer]"===m.call(b.dictionary)?new Uint8Array(b.dictionary):b.dictionary,c=h.deflateSetDictionary(this.strm,e),c!==p)throw new Error(k[c]);this._dict_set=!0}}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}function g(a,b){return b=b||{},b.gzip=!0,e(a,b)}var h=a("./zlib/deflate"),i=a("./utils/common"),j=a("./utils/strings"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=Object.prototype.toString,n=0,o=4,p=0,q=1,r=2,s=-1,t=0,u=8;d.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?o:n,e.input="string"==typeof a?j.string2buf(a):"[object ArrayBuffer]"===m.call(a)?new Uint8Array(a):a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new i.Buf8(f),e.next_out=0,e.avail_out=f),c=h.deflate(e,d),c!==q&&c!==p)return this.onEnd(c),this.ended=!0,!1;(0===e.avail_out||0===e.avail_in&&(d===o||d===r))&&this.onData("string"===this.options.to?j.buf2binstring(i.shrinkBuf(e.output,e.next_out)):i.shrinkBuf(e.output,e.next_out))}while((e.avail_in>0||0===e.avail_out)&&c!==q);return d===o?(c=h.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===p):d!==r||(this.onEnd(p),e.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===p&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=d,c.deflate=e,c.deflateRaw=f,c.gzip=g},{"./utils/common":168,"./utils/strings":169,"./zlib/deflate":173,"./zlib/messages":178,"./zlib/zstream":180}],167:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=g.inflateInit2(this.strm,b.windowBits);if(c!==j.Z_OK)throw new Error(k[c]);this.header=new m,g.inflateGetHeader(this.strm,this.header)}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}var g=a("./zlib/inflate"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/constants"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=a("./zlib/gzheader"),n=Object.prototype.toString;d.prototype.push=function(a,b){var c,d,e,f,k,l,m=this.strm,o=this.options.chunkSize,p=this.options.dictionary,q=!1;if(this.ended)return!1;d=b===~~b?b:b===!0?j.Z_FINISH:j.Z_NO_FLUSH,m.input="string"==typeof a?i.binstring2buf(a):"[object ArrayBuffer]"===n.call(a)?new Uint8Array(a):a,m.next_in=0,m.avail_in=m.input.length;do{if(0===m.avail_out&&(m.output=new h.Buf8(o),m.next_out=0,m.avail_out=o),c=g.inflate(m,j.Z_NO_FLUSH),c===j.Z_NEED_DICT&&p&&(l="string"==typeof p?i.string2buf(p):"[object ArrayBuffer]"===n.call(p)?new Uint8Array(p):p,c=g.inflateSetDictionary(this.strm,l)),c===j.Z_BUF_ERROR&&q===!0&&(c=j.Z_OK,q=!1),c!==j.Z_STREAM_END&&c!==j.Z_OK)return this.onEnd(c),this.ended=!0,!1;m.next_out&&(0===m.avail_out||c===j.Z_STREAM_END||0===m.avail_in&&(d===j.Z_FINISH||d===j.Z_SYNC_FLUSH))&&("string"===this.options.to?(e=i.utf8border(m.output,m.next_out),f=m.next_out-e,k=i.buf2string(m.output,e),m.next_out=f,m.avail_out=o-f,f&&h.arraySet(m.output,m.output,e,f,0),this.onData(k)):this.onData(h.shrinkBuf(m.output,m.next_out))),0===m.avail_in&&0===m.avail_out&&(q=!0)}while((m.avail_in>0||0===m.avail_out)&&c!==j.Z_STREAM_END);return c===j.Z_STREAM_END&&(d=j.Z_FINISH),d===j.Z_FINISH?(c=g.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===j.Z_OK):d!==j.Z_SYNC_FLUSH||(this.onEnd(j.Z_OK),m.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===j.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=d,c.inflate=e,c.inflateRaw=f,c.ungzip=e},{"./utils/common":168,"./utils/strings":169,"./zlib/constants":171,"./zlib/gzheader":174,"./zlib/inflate":176,"./zlib/messages":178,"./zlib/zstream":180}],168:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;c>b;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;c>b;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],169:[function(a,b,c){"use strict";function d(a,b){if(65537>b&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;b>d;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(a){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){g=!1}for(var h=new e.Buf8(256),i=0;256>i;i++)h[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;h[254]=h[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=new e.Buf8(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;d>c;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,i=b||a.length,j=new Array(2*i);for(e=0,c=0;i>c;)if(f=a[c++],128>f)j[e++]=f;else if(g=h[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&i>c;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:65536>f?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+h[a[c]]>b?c:b}},{"./common":168}],170:[function(a,b){"use strict";function c(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=c},{}],171:[function(a,b){"use strict";b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],172:[function(a,b){"use strict";function c(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function d(a,b,c,d){var f=e,g=d+c;a^=-1;for(var h=d;g>h;h++)a=a>>>8^f[255&(a^b[h])];return-1^a}var e=c();b.exports=d},{}],173:[function(a,b,c){"use strict";function d(a,b){return a.msg=I[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(E.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function h(a,b){F._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,E.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=G(a.adler,b,e,c):2===a.state.wrap&&(a.adler=H(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-la?a.strstart-(a.w_size-la):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ka,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&m>f);if(d=ka-(m-f),f=m-ka,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-la)){E.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=ja)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+ja-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<ja)););}while(a.lookahead<la&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===J)return ua;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return ua;if(a.strstart-a.block_start>=a.w_size-la&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?ua:ua}function o(a,b){for(var c,d;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c)),a.match_length>=ja)if(d=F._tr_tally(a,a.strstart-a.match_start,a.match_length-ja),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=ja){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function p(a,b){for(var c,d,e;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=ja-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===U||a.match_length===ja&&a.strstart-a.match_start>4096)&&(a.match_length=ja-1)),a.prev_length>=ja&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-ja,d=F._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-ja),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=ja-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return ua}else if(a.match_available){if(d=F._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return ua}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=F._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ka){if(m(a),a.lookahead<=ka&&b===J)return ua;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=ja&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ka;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&f>e);a.match_length=ka-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=ja?(c=F._tr_tally(a,1,a.match_length-ja),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===J)return ua;break}if(a.match_length=0,c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function s(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}function t(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=D[a.level].max_lazy,a.good_match=D[a.level].good_length,a.nice_match=D[a.level].nice_length,a.max_chain_length=D[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=ja-1,a.match_available=0,a.ins_h=0}function u(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*ha),this.dyn_dtree=new E.Buf16(2*(2*fa+1)),this.bl_tree=new E.Buf16(2*(2*ga+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(ia+1),this.heap=new E.Buf16(2*ea+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*ea+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=Z,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?na:sa,a.adler=2===b.wrap?0:1,b.last_flush=J,F._tr_init(b),O):d(a,Q)}function w(a){var b=v(a);return b===O&&t(a.state),b}function x(a,b){return a&&a.state?2!==a.state.wrap?Q:(a.state.gzhead=b,O):Q}function y(a,b,c,e,f,g){if(!a)return Q;var h=1;if(b===T&&(b=6),0>e?(h=0,e=-e):e>15&&(h=2,e-=16),1>f||f>_||c!==$||8>e||e>15||0>b||b>9||0>g||g>X)return d(a,Q);8===e&&(e=9);var i=new u;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+ja-1)/ja),i.window=new E.Buf8(2*i.w_size),i.head=new E.Buf16(i.hash_size),i.prev=new E.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new E.Buf8(i.pending_buf_size),i.d_buf=1*i.lit_bufsize,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,w(a)}function z(a,b){return y(a,b,$,aa,ba,Y)}function A(a,b){var c,h,k,l;if(!a||!a.state||b>N||0>b)return a?d(a,Q):Q;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===ta&&b!==M)return d(a,0===a.avail_out?S:Q);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===na)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=H(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=oa):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,ya),h.status=sa);else{var m=$+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=V||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=ma),m+=31-m%31,h.status=sa,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===oa)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=pa)}else h.status=pa;if(h.status===pa)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=qa)}else h.status=qa;if(h.status===qa)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=ra)}else h.status=ra;if(h.status===ra&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=sa)):h.status=sa),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,O}else if(0===a.avail_in&&e(b)<=e(c)&&b!==M)return d(a,S);if(h.status===ta&&0!==a.avail_in)return d(a,S);if(0!==a.avail_in||0!==h.lookahead||b!==J&&h.status!==ta){var o=h.strategy===V?r(h,b):h.strategy===W?q(h,b):D[h.level].func(h,b);if((o===wa||o===xa)&&(h.status=ta),o===ua||o===wa)return 0===a.avail_out&&(h.last_flush=-1),O;if(o===va&&(b===K?F._tr_align(h):b!==N&&(F._tr_stored_block(h,0,0,!1),b===L&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,O}return b!==M?O:h.wrap<=0?P:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?O:P)}function B(a){var b;return a&&a.state?(b=a.state.status,b!==na&&b!==oa&&b!==pa&&b!==qa&&b!==ra&&b!==sa&&b!==ta?d(a,Q):(a.state=null,b===sa?d(a,R):O)):Q}function C(a,b){var c,d,e,g,h,i,j,k,l=b.length;if(!a||!a.state)return Q;if(c=a.state,g=c.wrap,2===g||1===g&&c.status!==na||c.lookahead)return Q;for(1===g&&(a.adler=G(a.adler,b,l,0)),c.wrap=0,l>=c.w_size&&(0===g&&(f(c.head),c.strstart=0,c.block_start=0,c.insert=0),k=new E.Buf8(c.w_size),E.arraySet(k,b,l-c.w_size,c.w_size,0),b=k,l=c.w_size),h=a.avail_in,i=a.next_in,j=a.input,a.avail_in=l,a.next_in=0,a.input=b,m(c);c.lookahead>=ja;){d=c.strstart,e=c.lookahead-(ja-1);do c.ins_h=(c.ins_h<<c.hash_shift^c.window[d+ja-1])&c.hash_mask,c.prev[d&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=d,d++;while(--e);c.strstart=d,c.lookahead=ja-1,m(c)}return c.strstart+=c.lookahead,c.block_start=c.strstart,c.insert=c.lookahead,c.lookahead=0,c.match_length=c.prev_length=ja-1,c.match_available=0,a.next_in=i,a.input=j,a.avail_in=h,c.wrap=g,O}var D,E=a("../utils/common"),F=a("./trees"),G=a("./adler32"),H=a("./crc32"),I=a("./messages"),J=0,K=1,L=3,M=4,N=5,O=0,P=1,Q=-2,R=-3,S=-5,T=-1,U=1,V=2,W=3,X=4,Y=0,Z=2,$=8,_=9,aa=15,ba=8,ca=29,da=256,ea=da+1+ca,fa=30,ga=19,ha=2*ea+1,ia=15,ja=3,ka=258,la=ka+ja+1,ma=32,na=42,oa=69,pa=73,qa=91,ra=103,sa=113,ta=666,ua=1,va=2,wa=3,xa=4,ya=3;D=[new s(0,0,0,0,n),new s(4,4,8,4,o),new s(4,5,16,8,o),new s(4,6,32,32,o),new s(4,4,16,16,p),new s(8,16,32,32,p),new s(8,16,128,128,p),new s(8,32,128,256,p),new s(32,128,258,1024,p),new s(32,258,258,4096,p)],c.deflateInit=z,c.deflateInit2=y,c.deflateReset=w,c.deflateResetKeep=v,c.deflateSetHeader=x,c.deflate=A,c.deflateEnd=B,c.deflateSetDictionary=C,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":168,"./adler32":170,"./crc32":172,"./messages":178,"./trees":179}],174:[function(a,b){"use strict";function c(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=c},{}],175:[function(a,b){"use strict";var c=30,d=12;b.exports=function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;e=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=e.dmax,l=e.wsize,m=e.whave,n=e.wnext,o=e.window,p=e.hold,q=e.bits,r=e.lencode,s=e.distcode,t=(1<<e.lenbits)-1,u=(1<<e.distbits)-1;a:do{15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){e.mode=d;break a}a.msg="invalid literal/length code",e.mode=c;break a}x=65535&v,w&=15,w&&(w>q&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",e.mode=c;break a}if(y=65535&v,w&=15,w>q&&(p+=B[f++]<<q,q+=8,w>q&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",e.mode=c;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&e.sane){a.msg="invalid distance too far back",e.mode=c;break a}if(z=0,A=o,0===n){if(z+=l-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(w>n){if(z+=l+n-w,w-=n,x>w){x-=w;do C[h++]=o[z++];while(--w);if(z=0,x>n){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(g>f&&j>h);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=g>f?5+(g-f):5-(f-g),a.avail_out=j>h?257+(j-h):257-(h-j),e.hold=p,e.bits=q}},{}],176:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=L,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new s.Buf32(pa),b.distcode=b.distdyn=new s.Buf32(qa),b.sane=1,b.back=-1,D):G}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):G}function h(a,b){var c,d;return a&&a.state?(d=a.state,0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15)),b&&(8>b||b>15)?G:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):G}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==D&&(a.state=null),c):G}function j(a){return i(a,sa)}function k(a){if(ta){var b;for(q=new s.Buf32(512),r=new s.Buf32(32),b=0;144>b;)a.lens[b++]=8;for(;256>b;)a.lens[b++]=9;for(;280>b;)a.lens[b++]=7;for(;288>b;)a.lens[b++]=8;for(w(y,a.lens,0,288,q,0,a.work,{bits:9}),b=0;32>b;)a.lens[b++]=5;w(z,a.lens,0,32,r,0,a.work,{bits:5}),ta=!1}a.lencode=q,a.lenbits=9,a.distcode=r,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new s.Buf8(f.wsize)),d>=f.wsize?(s.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),s.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(s.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,r,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=0,Ba=new s.Buf8(4),Ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return G;c=a.state,c.mode===W&&(c.mode=X),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xa=D;a:for(;;)switch(c.mode){case L:if(0===c.wrap){c.mode=X;break}for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0),m=0,n=0,c.mode=M;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=ma;break}if((15&m)!==K){a.msg="unknown compression method",c.mode=ma;break}if(m>>>=4,n-=4,wa=(15&m)+8,0===c.wbits)c.wbits=wa;else if(wa>c.wbits){a.msg="invalid window size",c.mode=ma;break}c.dmax=1<<wa,a.adler=c.check=1,c.mode=512&m?U:W,m=0,n=0;break;case M:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==K){a.msg="unknown compression method",c.mode=ma;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=ma;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=N;case N:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,Ba[2]=m>>>16&255,Ba[3]=m>>>24&255,c.check=u(c.check,Ba,4,0)),m=0,n=0,c.mode=O;case O:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),
m=0,n=0,c.mode=P;case P:if(1024&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=Q;case Q:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wa=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),s.arraySet(c.head.extra,e,g,q,wa)),512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=R;case R:if(2048&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.name+=String.fromCharCode(wa));while(wa&&i>q);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=S;case S:if(4096&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.comment+=String.fromCharCode(wa));while(wa&&i>q);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.comment=null);c.mode=T;case T:if(512&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=ma;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=W;break;case U:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=V;case V:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,F;a.adler=c.check=1,c.mode=W;case W:if(b===B||b===C)break a;case X:if(c.last){m>>>=7&n,n-=7&n,c.mode=ja;break}for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=Y;break;case 1:if(k(c),c.mode=ca,b===C){m>>>=2,n-=2;break a}break;case 2:c.mode=_;break;case 3:a.msg="invalid block type",c.mode=ma}m>>>=2,n-=2;break;case Y:for(m>>>=7&n,n-=7&n;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=ma;break}if(c.length=65535&m,m=0,n=0,c.mode=Z,b===C)break a;case Z:c.mode=$;case $:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;s.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=W;break;case _:for(;14>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=ma;break}c.have=0,c.mode=aa;case aa:for(;c.have<c.ncode;){for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Ca[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Ca[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,ya={bits:c.lenbits},xa=w(x,c.lens,0,19,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid code lengths set",c.mode=ma;break}c.have=0,c.mode=ba;case ba:for(;c.have<c.nlen+c.ndist;){for(;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(16>sa)m>>>=qa,n-=qa,c.lens[c.have++]=sa;else{if(16===sa){for(za=qa+2;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qa,n-=qa,0===c.have){a.msg="invalid bit length repeat",c.mode=ma;break}wa=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sa){for(za=qa+3;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=3+(7&m),m>>>=3,n-=3}else{for(za=qa+7;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=ma;break}for(;q--;)c.lens[c.have++]=wa}}if(c.mode===ma)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=ma;break}if(c.lenbits=9,ya={bits:c.lenbits},xa=w(y,c.lens,0,c.nlen,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid literal/lengths set",c.mode=ma;break}if(c.distbits=6,c.distcode=c.distdyn,ya={bits:c.distbits},xa=w(z,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,ya),c.distbits=ya.bits,xa){a.msg="invalid distances set",c.mode=ma;break}if(c.mode=ca,b===C)break a;case ca:c.mode=da;case da:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,v(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===W&&(c.back=-1);break}for(c.back=0;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(ra&&0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.lencode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=ta+qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,c.length=sa,0===ra){c.mode=ia;break}if(32&ra){c.back=-1,c.mode=W;break}if(64&ra){a.msg="invalid literal/length code",c.mode=ma;break}c.extra=15&ra,c.mode=ea;case ea:if(c.extra){for(za=c.extra;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=fa;case fa:for(;Aa=c.distcode[m&(1<<c.distbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.distcode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=ta+qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,64&ra){a.msg="invalid distance code",c.mode=ma;break}c.offset=sa,c.extra=15&ra,c.mode=ga;case ga:if(c.extra){for(za=c.extra;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=ma;break}c.mode=ha;case ha:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=ma;break}q>c.wnext?(q-=c.wnext,r=c.wsize-q):r=c.wnext-q,q>c.length&&(q=c.length),pa=c.window}else pa=f,r=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pa[r++];while(--q);0===c.length&&(c.mode=da);break;case ia:if(0===j)break a;f[h++]=c.length,j--,c.mode=da;break;case ja:if(c.wrap){for(;32>n;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?u(c.check,f,p,h-p):t(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=ma;break}m=0,n=0}c.mode=ka;case ka:if(c.wrap&&c.flags){for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=ma;break}m=0,n=0}c.mode=la;case la:xa=E;break a;case ma:xa=H;break a;case na:return I;case oa:default:return G}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<ma&&(c.mode<ja||b!==A))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=na,I):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?u(c.check,f,p,a.next_out-p):t(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===W?128:0)+(c.mode===ca||c.mode===Z?256:0),(0===o&&0===p||b===A)&&xa===D&&(xa=J),xa)}function n(a){if(!a||!a.state)return G;var b=a.state;return b.window&&(b.window=null),a.state=null,D}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?G:(c.head=b,b.done=!1,D)):G}function p(a,b){var c,d,e,f=b.length;return a&&a.state?(c=a.state,0!==c.wrap&&c.mode!==V?G:c.mode===V&&(d=1,d=t(d,b,f,0),d!==c.check)?H:(e=l(a,b,f,f))?(c.mode=na,I):(c.havedict=1,D)):G}var q,r,s=a("../utils/common"),t=a("./adler32"),u=a("./crc32"),v=a("./inffast"),w=a("./inftrees"),x=0,y=1,z=2,A=4,B=5,C=6,D=0,E=1,F=2,G=-2,H=-3,I=-4,J=-5,K=8,L=1,M=2,N=3,O=4,P=5,Q=6,R=7,S=8,T=9,U=10,V=11,W=12,X=13,Y=14,Z=15,$=16,_=17,aa=18,ba=19,ca=20,da=21,ea=22,fa=23,ga=24,ha=25,ia=26,ja=27,ka=28,la=29,ma=30,na=31,oa=32,pa=852,qa=592,ra=15,sa=ra,ta=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateSetDictionary=p,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":168,"./adler32":170,"./crc32":172,"./inffast":175,"./inftrees":177}],177:[function(a,b){"use strict";var c=a("../utils/common"),d=15,e=852,f=592,g=0,h=1,i=2,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,n,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new c.Buf16(d+1),Q=new c.Buf16(d+1),R=null,S=0;for(D=0;d>=D;D++)P[D]=0;for(E=0;o>E;E++)P[b[n+E]]++;for(H=C,G=d;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;G>F&&0===P[F];F++);for(F>H&&(H=F),K=1,D=1;d>=D;D++)if(K<<=1,K-=P[D],0>K)return-1;if(K>0&&(a===g||1!==G))return-1;for(Q[1]=0,D=1;d>D;D++)Q[D+1]=Q[D]+P[D];for(E=0;o>E;E++)0!==b[n+E]&&(r[Q[b[n+E]]++]=E);if(a===g?(N=R=r,y=19):a===h?(N=j,O-=257,R=k,S-=257,y=256):(N=l,R=m,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===h&&L>e||a===i&&L>f)return 1;for(var T=0;;){T++,z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[n+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;G>I+J&&(K-=P[I+J],!(0>=K));)I++,K<<=1;if(L+=1<<I,a===h&&L>e||a===i&&L>f)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":168}],178:[function(a,b){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],179:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}function f(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function g(a){return 256>a?ia[a]:ia[256+(a>>>7)]}function h(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function i(a,b,c){a.bi_valid>X-c?(a.bi_buf|=b<<a.bi_valid&65535,h(a,a.bi_buf),a.bi_buf=b>>X-a.bi_valid,a.bi_valid+=c-X):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function j(a,b,c){i(a,c[2*b],c[2*b+1])}function k(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function l(a){16===a.bi_valid?(h(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function m(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;W>=f;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;V>c;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function n(a,b,c){var d,e,f=new Array(W+1),g=0;for(d=1;W>=d;d++)f[d]=g=g+c[d-1]<<1;for(e=0;b>=e;e++){var h=a[2*e+1];0!==h&&(a[2*e]=k(f[h]++,h))}}function o(){var a,b,c,d,f,g=new Array(W+1);for(c=0,d=0;Q-1>d;d++)for(ka[d]=c,a=0;a<1<<ba[d];a++)ja[c++]=d;for(ja[c-1]=d,f=0,d=0;16>d;d++)for(la[d]=f,a=0;a<1<<ca[d];a++)ia[f++]=d;for(f>>=7;T>d;d++)for(la[d]=f<<7,a=0;a<1<<ca[d]-7;a++)ia[256+f++]=d;for(b=0;W>=b;b++)g[b]=0;for(a=0;143>=a;)ga[2*a+1]=8,a++,g[8]++;for(;255>=a;)ga[2*a+1]=9,a++,g[9]++;for(;279>=a;)ga[2*a+1]=7,a++,g[7]++;for(;287>=a;)ga[2*a+1]=8,a++,g[8]++;for(n(ga,S+1,g),a=0;T>a;a++)ha[2*a+1]=5,ha[2*a]=k(a,5);ma=new e(ga,ba,R+1,S,W),na=new e(ha,ca,0,T,W),oa=new e(new Array(0),da,0,U,Y)}function p(a){var b;for(b=0;S>b;b++)a.dyn_ltree[2*b]=0;for(b=0;T>b;b++)a.dyn_dtree[2*b]=0;for(b=0;U>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*Z]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function q(a){a.bi_valid>8?h(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function r(a,b,c,d){q(a),d&&(h(a,c),h(a,~c)),G.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function s(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function t(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&s(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!s(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function u(a,b,c){var d,e,f,h,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],e=a.pending_buf[a.l_buf+k],k++,0===d?j(a,e,b):(f=ja[e],j(a,f+R+1,b),h=ba[f],0!==h&&(e-=ka[f],i(a,e,h)),d--,f=g(d),j(a,f,c),h=ca[f],0!==h&&(d-=la[f],i(a,d,h)));while(k<a.last_lit);j(a,Z,b)}function v(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=V,c=0;i>c;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=2>j?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)t(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],t(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,t(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],m(a,b),n(f,j,a.bl_count)}function w(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;c>=d;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(j>h?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*$]++):10>=h?a.bl_tree[2*_]++:a.bl_tree[2*aa]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function x(a,b,c){var d,e,f=-1,g=b[1],h=0,k=7,l=4;for(0===g&&(k=138,l=3),d=0;c>=d;d++)if(e=g,g=b[2*(d+1)+1],!(++h<k&&e===g)){if(l>h){do j(a,e,a.bl_tree);while(0!==--h)}else 0!==e?(e!==f&&(j(a,e,a.bl_tree),h--),j(a,$,a.bl_tree),i(a,h-3,2)):10>=h?(j(a,_,a.bl_tree),i(a,h-3,3)):(j(a,aa,a.bl_tree),i(a,h-11,7));h=0,f=e,0===g?(k=138,l=3):e===g?(k=6,l=3):(k=7,l=4)}}function y(a){var b;for(w(a,a.dyn_ltree,a.l_desc.max_code),w(a,a.dyn_dtree,a.d_desc.max_code),v(a,a.bl_desc),b=U-1;b>=3&&0===a.bl_tree[2*ea[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function z(a,b,c,d){var e;for(i(a,b-257,5),i(a,c-1,5),i(a,d-4,4),e=0;d>e;e++)i(a,a.bl_tree[2*ea[e]+1],3);x(a,a.dyn_ltree,b-1),x(a,a.dyn_dtree,c-1)}function A(a){var b,c=4093624447;for(b=0;31>=b;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return I;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return J;for(b=32;R>b;b++)if(0!==a.dyn_ltree[2*b])return J;return I}function B(a){pa||(o(),pa=!0),a.l_desc=new f(a.dyn_ltree,ma),a.d_desc=new f(a.dyn_dtree,na),a.bl_desc=new f(a.bl_tree,oa),a.bi_buf=0,a.bi_valid=0,p(a)}function C(a,b,c,d){i(a,(L<<1)+(d?1:0),3),r(a,b,c,!0)}function D(a){i(a,M<<1,3),j(a,Z,ga),l(a)}function E(a,b,c,d){var e,f,g=0;a.level>0?(a.strm.data_type===K&&(a.strm.data_type=A(a)),v(a,a.l_desc),v(a,a.d_desc),g=y(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,e>=f&&(e=f)):e=f=c+5,e>=c+4&&-1!==b?C(a,b,c,d):a.strategy===H||f===e?(i(a,(M<<1)+(d?1:0),3),u(a,ga,ha)):(i(a,(N<<1)+(d?1:0),3),z(a,a.l_desc.max_code+1,a.d_desc.max_code+1,g+1),u(a,a.dyn_ltree,a.dyn_dtree)),p(a),d&&q(a)}function F(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(ja[c]+R+1)]++,a.dyn_dtree[2*g(b)]++),a.last_lit===a.lit_bufsize-1}var G=a("../utils/common"),H=4,I=0,J=1,K=2,L=0,M=1,N=2,O=3,P=258,Q=29,R=256,S=R+1+Q,T=30,U=19,V=2*S+1,W=15,X=16,Y=7,Z=256,$=16,_=17,aa=18,ba=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ca=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],da=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ea=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fa=512,ga=new Array(2*(S+2));d(ga);var ha=new Array(2*T);d(ha);var ia=new Array(fa);d(ia);var ja=new Array(P-O+1);d(ja);var ka=new Array(Q);d(ka);var la=new Array(T);d(la);var ma,na,oa,pa=!1;c._tr_init=B,c._tr_stored_block=C,c._tr_flush_block=E,c._tr_tally=F,c._tr_align=D},{"../utils/common":168}],180:[function(a,b){"use strict";function c(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=c},{}],181:[function(a,b){"use strict";function c(a){var b;a&&a.length&&(b=a,a=b.length);var c=new Uint8Array(a||0);return b&&c.set(b),c.readUInt32LE=e.readUInt32LE,c.writeUInt32LE=e.writeUInt32LE,c.readInt32LE=e.readInt32LE,c.writeInt32LE=e.writeInt32LE,c.readFloatLE=e.readFloatLE,c.writeFloatLE=e.writeFloatLE,c.readDoubleLE=e.readDoubleLE,c.writeDoubleLE=e.writeDoubleLE,c.toString=e.toString,c.write=e.write,c.slice=e.slice,c.copy=e.copy,c._isBuffer=!0,c}function d(a){for(var b,c,d=a.length,e=[],f=0;d>f;f++){if(b=a.charCodeAt(f),b>55295&&57344>b){if(!c){b>56319||f+1===d?e.push(239,191,189):c=b;continue}if(56320>b){e.push(239,191,189),c=b;continue}b=c-55296<<10|b-56320|65536,c=null}else c&&(e.push(239,191,189),c=null);128>b?e.push(b):2048>b?e.push(b>>6|192,63&b|128):65536>b?e.push(b>>12|224,b>>6&63|128,63&b|128):e.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}return e}b.exports=c;var e,f,g,h=a("ieee754");e={readUInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},writeUInt32LE:function(a,b){this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24},readInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+(this[a+3]<<24)},readFloatLE:function(a){return h.read(this,a,!0,23,4)},readDoubleLE:function(a){return h.read(this,a,!0,52,8)},writeFloatLE:function(a,b){return h.write(this,a,b,!0,23,4)},writeDoubleLE:function(a,b){return h.write(this,a,b,!0,52,8)},toString:function(a,b,c){var d="",e="";b=b||0,c=Math.min(this.length,c||this.length);for(var f=b;c>f;f++){var g=this[f];127>=g?(d+=decodeURIComponent(e)+String.fromCharCode(g),e=""):e+="%"+g.toString(16)}return d+=decodeURIComponent(e)},write:function(a,b){for(var c=a===f?g:d(a),e=0;e<c.length;e++)this[b+e]=c[e]},slice:function(a,b){return this.subarray(a,b)},copy:function(a,b){b=b||0;for(var c=0;c<this.length;c++)a[b+c]=this[c]}},e.writeInt32LE=e.writeUInt32LE,c.byteLength=function(a){return f=a,g=d(a),g.length},c.isBuffer=function(a){return!(!a||!a._isBuffer)}},{ieee754:94}],182:[function(a,b){(function(c){"use strict";function d(a){this.buf=q.isBuffer(a)?a:new q(a||0),this.pos=0,this.length=this.buf.length}function e(a,b){var c,d=b.buf;if(c=d[b.pos++],a+=268435456*(127&c),128>c)return a;if(c=d[b.pos++],a+=34359738368*(127&c),128>c)return a;if(c=d[b.pos++],a+=4398046511104*(127&c),128>c)return a;if(c=d[b.pos++],a+=562949953421312*(127&c),128>c)return a;if(c=d[b.pos++],a+=72057594037927940*(127&c),128>c)return a;if(c=d[b.pos++],a+=0x8000000000000000*(127&c),128>c)return a;throw new Error("Expected varint not more than 10 bytes")}function f(a,b){b.realloc(10);for(var c=b.pos+10;a>=1;){if(b.pos>=c)throw new Error("Given varint doesn't fit into 10 bytes");var d=255&a;b.buf[b.pos++]=d|(a>=128?128:0),a/=128}}function g(a,b,c){var d=16383>=b?1:2097151>=b?2:268435455>=b?3:Math.ceil(Math.log(b)/(7*Math.LN2));c.realloc(d);for(var e=c.pos-1;e>=a;e--)c.buf[e+d]=c.buf[e]}function h(a,b){for(var c=0;c<a.length;c++)b.writeVarint(a[c])}function i(a,b){for(var c=0;c<a.length;c++)b.writeSVarint(a[c])}function j(a,b){for(var c=0;c<a.length;c++)b.writeFloat(a[c])}function k(a,b){for(var c=0;c<a.length;c++)b.writeDouble(a[c])}function l(a,b){for(var c=0;c<a.length;c++)b.writeBoolean(a[c])}function m(a,b){for(var c=0;c<a.length;c++)b.writeFixed32(a[c])}function n(a,b){for(var c=0;c<a.length;c++)b.writeSFixed32(a[c])}function o(a,b){for(var c=0;c<a.length;c++)b.writeFixed64(a[c])}function p(a,b){for(var c=0;c<a.length;c++)b.writeSFixed64(a[c])}b.exports=d;var q=c.Buffer||a("./buffer");d.Varint=0,d.Fixed64=1,d.Bytes=2,d.Fixed32=5;var r=4294967296,s=1/r,t=Math.pow(2,63);d.prototype={destroy:function(){this.buf=null},readFields:function(a,b,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),e=d>>3,f=this.pos;a(e,b,this),this.pos===f&&this.skip(d)}return b},readMessage:function(a,b){return this.readFields(a,b,this.readVarint()+this.pos)},readFixed32:function(){var a=this.buf.readUInt32LE(this.pos);return this.pos+=4,a},readSFixed32:function(){var a=this.buf.readInt32LE(this.pos);return this.pos+=4,a},readFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*r;return this.pos+=8,a},readSFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*r;return this.pos+=8,a},readFloat:function(){var a=this.buf.readFloatLE(this.pos);return this.pos+=4,a},readDouble:function(){var a=this.buf.readDoubleLE(this.pos);return this.pos+=8,a},readVarint:function(){var a,b,c=this.buf;return b=c[this.pos++],a=127&b,128>b?a:(b=c[this.pos++],a|=(127&b)<<7,128>b?a:(b=c[this.pos++],a|=(127&b)<<14,128>b?a:(b=c[this.pos++],a|=(127&b)<<21,128>b?a:e(a,this))))},readVarint64:function(){var a=this.pos,b=this.readVarint();if(t>b)return b;for(var c=this.pos-2;255===this.buf[c];)c--;a>c&&(c=a),b=0;for(var d=0;c-a+1>d;d++){var e=127&~this.buf[a+d];b+=4>d?e<<7*d:e*Math.pow(2,7*d)}return-b-1},readSVarint:function(){var a=this.readVarint();return a%2===1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,b=this.buf.toString("utf8",this.pos,a);return this.pos=a,b},readBytes:function(){var a=this.readVarint()+this.pos,b=this.buf.slice(this.pos,a);return this.pos=a,b},readPackedVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readVarint());return b},readPackedSVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSVarint());return b},readPackedBoolean:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readBoolean());return b},readPackedFloat:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFloat());return b},readPackedDouble:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readDouble());return b},readPackedFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed32());return b},readPackedSFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed32());return b},readPackedFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed64());return b},readPackedSFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed64());return b},skip:function(a){var b=7&a;if(b===d.Varint)for(;this.buf[this.pos++]>127;);else if(b===d.Bytes)this.pos=this.readVarint()+this.pos;else if(b===d.Fixed32)this.pos+=4;else{if(b!==d.Fixed64)throw new Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(a,b){this.writeVarint(a<<3|b)},realloc:function(a){for(var b=this.length||16;b<this.pos+a;)b*=2;if(b!==this.length){var c=new q(b);this.buf.copy(c),this.buf=c,this.length=b}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(a){this.realloc(4),this.buf.writeUInt32LE(a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),this.buf.writeInt32LE(a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(-1&a,this.pos),this.buf.writeUInt32LE(Math.floor(a*s),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(-1&a,this.pos),this.buf.writeInt32LE(Math.floor(a*s),this.pos+4),this.pos+=8},writeVarint:function(a){return a=+a,a>268435455?void f(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),void(127>=a||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),127>=a||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),127>=a||(this.buf[this.pos++]=a>>>7&127)))))},writeSVarint:function(a){this.writeVarint(0>a?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a);var b=q.byteLength(a);this.writeVarint(b),this.realloc(b),this.buf.write(a,this.pos),this.pos+=b},writeFloat:function(a){this.realloc(4),this.buf.writeFloatLE(a,this.pos),this.pos+=4},writeDouble:function(a){this.realloc(8),this.buf.writeDoubleLE(a,this.pos),this.pos+=8},writeBytes:function(a){var b=a.length;this.writeVarint(b),this.realloc(b);for(var c=0;b>c;c++)this.buf[this.pos++]=a[c]},writeRawMessage:function(a,b){this.pos++;var c=this.pos;a(b,this);var d=this.pos-c;d>=128&&g(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,b,c){this.writeTag(a,d.Bytes),this.writeRawMessage(b,c)},writePackedVarint:function(a,b){this.writeMessage(a,h,b)},writePackedSVarint:function(a,b){this.writeMessage(a,i,b)},writePackedBoolean:function(a,b){this.writeMessage(a,l,b)},writePackedFloat:function(a,b){this.writeMessage(a,j,b)},writePackedDouble:function(a,b){this.writeMessage(a,k,b)},writePackedFixed32:function(a,b){this.writeMessage(a,m,b)},writePackedSFixed32:function(a,b){this.writeMessage(a,n,b)},writePackedFixed64:function(a,b){this.writeMessage(a,o,b)},writePackedSFixed64:function(a,b){this.writeMessage(a,p,b)},writeBytesField:function(a,b){this.writeTag(a,d.Bytes),this.writeBytes(b)},writeFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeFixed32(b)},writeSFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeSFixed32(b)},writeFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeFixed64(b)},writeSFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeSFixed64(b)},writeVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeVarint(b)},writeSVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeSVarint(b)},writeStringField:function(a,b){this.writeTag(a,d.Bytes),this.writeString(b)},writeFloatField:function(a,b){this.writeTag(a,d.Fixed32),this.writeFloat(b)},writeDoubleField:function(a,b){this.writeTag(a,d.Fixed64),this.writeDouble(b)},writeBooleanField:function(a,b){this.writeVarintField(a,Boolean(b))}}}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":181}],183:[function(a,b){"use strict";function c(a,b){this.x=a,this.y=b}b.exports=c,c.prototype={clone:function(){return new c(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var b=a.x-this.x,c=a.y-this.y;return b*b+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,b){return Math.atan2(this.x*b-this.y*a,this.x*a+this.y*b)},_matMult:function(a){var b=a[0]*this.x+a[1]*this.y,c=a[2]*this.x+a[3]*this.y;return this.x=b,this.y=c,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.x-c*this.y,e=c*this.x+b*this.y;return this.x=d,this.y=e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(a){return a instanceof c?a:Array.isArray(a)?new c(a[0],a[1]):a}},{}],184:[function(a,b){(function(a){"use strict";function c(b,c,d,e){if("function"!=typeof b)throw new TypeError('"callback" argument must be a function');var f,g,h=arguments.length;switch(h){case 0:case 1:return a.nextTick(b);case 2:return a.nextTick(function(){b.call(null,c)});case 3:return a.nextTick(function(){b.call(null,c,d)});case 4:return a.nextTick(function(){b.call(null,c,d,e)});default:for(f=new Array(h-1),g=0;g<f.length;)f[g++]=arguments[g];return a.nextTick(function(){b.apply(null,f)})}}b.exports=!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?c:a.nextTick}).call(this,a("_process"))},{_process:185}],185:[function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=b.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.binding=function(){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},{}],186:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,
this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&56319>=d)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&56319>=d){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:5}],187:[function(a,b){"use stric";var c="\\/\\*",d="\\/\\*(?!\\*?\\!)",e="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",f=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,g=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,h=b.exports=function(a,b){return a?h.block(h.line(a,b),b):""};h.block=function(a,b){b=b||{};var f=new RegExp(c+e,"gm");return b.safe&&(f=new RegExp(d+e,"gm")),a?a.replace(f,""):""},h.line=function(a,b){b=b||{};var c=f;return b.safe&&(c=g),a?a.replace(c,""):""}},{}],188:[function(a,c,d){!function(a,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof b&&b.amd?b(["exports"],e):e(a.topojson=a.topojson||{})}(this,function(a){"use strict";function b(a,b){var d=b.id,e=b.bbox,f=null==b.properties?{}:b.properties,g=c(a,b);return null==d&&null==e?{type:"Feature",properties:f,geometry:g}:null==e?{type:"Feature",id:d,properties:f,geometry:g}:{type:"Feature",id:d,bbox:e,properties:f,geometry:g}}function c(a,b){function c(a,b){b.length&&b.pop();for(var c=l[0>a?~a:a],e=0,f=c.length;f>e;++e)b.push(k(c[e].slice(),e));0>a&&d(b,f)}function e(a){return k(a.slice())}function g(a){for(var b=[],d=0,e=a.length;e>d;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function h(a){for(var b=g(a);b.length<4;)b.push(b[0].slice());return b}function i(a){return a.map(h)}function j(a){var b,c=a.type;switch(c){case"GeometryCollection":return{type:c,geometries:a.geometries.map(j)};case"Point":b=e(a.coordinates);break;case"MultiPoint":b=a.coordinates.map(e);break;case"LineString":b=g(a.arcs);break;case"MultiLineString":b=a.arcs.map(g);break;case"Polygon":b=i(a.arcs);break;case"MultiPolygon":b=a.arcs.map(i);break;default:return null}return{type:c,coordinates:b}}var k=f(a),l=a.arcs;return j(b)}var d=function(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c},e=function(a){return a},f=function(a){if(null==(b=a.transform))return e;var b,c,d,f=b.scale[0],g=b.scale[1],h=b.translate[0],i=b.translate[1];return function(a,b){return b||(c=d=0),a[0]=(c+=a[0])*f+h,a[1]=(d+=a[1])*g+i,a}},g=function(a,c){return"GeometryCollection"===c.type?{type:"FeatureCollection",features:c.geometries.map(function(c){return b(a,c)})}:b(a,c)};a.feature=g,Object.defineProperty(a,"__esModule",{value:!0})})},{}],189:[function(a,b){(function(a){function c(a,b){function c(){if(!e){if(d("throwDeprecation"))throw new Error(b);d("traceDeprecation")?console.trace(b):console.warn(b),e=!0}return a.apply(this,arguments)}if(d("noDeprecation"))return a;var e=!1;return c}function d(b){try{if(!a.localStorage)return!1}catch(a){return!1}var c=a.localStorage[b];return null!=c&&"true"===String(c).toLowerCase()}b.exports=c}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],190:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{dup:95}],191:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],192:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":191,_process:185,inherits:190}],193:[function(a,b){b.exports.VectorTile=a("./lib/vectortile.js"),b.exports.VectorTileFeature=a("./lib/vectortilefeature.js"),b.exports.VectorTileLayer=a("./lib/vectortilelayer.js")},{"./lib/vectortile.js":194,"./lib/vectortilefeature.js":195,"./lib/vectortilelayer.js":196}],194:[function(a,b){"use strict";function c(a,b){this.layers=a.readFields(d,{},b)}function d(a,b,c){if(3===a){var d=new e(c,c.readVarint()+c.pos);d.length&&(b[d.name]=d)}}var e=a("./vectortilelayer");b.exports=c},{"./vectortilelayer":196}],195:[function(a,b){"use strict";function c(a,b,c,e,f){this.properties={},this.extent=c,this.type=0,this._pbf=a,this._geometry=-1,this._keys=e,this._values=f,a.readFields(d,this,b)}function d(a,b,c){1==a?b.id=c.readVarint():2==a?e(c,b):3==a?b.type=c.readVarint():4==a&&(b._geometry=c.pos)}function e(a,b){for(var c=a.readVarint()+a.pos;a.pos<c;){var d=b._keys[a.readVarint()],e=b._values[a.readVarint()];b.properties[d]=e}}function f(a){var b=a.length;if(1>=b)return[a];for(var c,d,e=[],f=0;b>f;f++){var h=g(a[f]);0!==h&&(void 0===d&&(d=0>h),d===0>h?(c&&e.push(c),c=[a[f]]):c.push(a[f]))}return c&&e.push(c),e}function g(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;f>e;g=e++)b=a[e],c=a[g],d+=(c.x-b.x)*(b.y+c.y);return d}var h=a("point-geometry");b.exports=c,c.types=["Unknown","Point","LineString","Polygon"],c.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var b,c=a.readVarint()+a.pos,d=1,e=0,f=0,g=0,i=[];a.pos<c;){if(!e){var j=a.readVarint();d=7&j,e=j>>3}if(e--,1===d||2===d)f+=a.readSVarint(),g+=a.readSVarint(),1===d&&(b&&i.push(b),b=[]),b.push(new h(f,g));else{if(7!==d)throw new Error("unknown command "+d);b&&b.push(b[0].clone())}}return b&&i.push(b),i},c.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var b=a.readVarint()+a.pos,c=1,d=0,e=0,f=0,g=1/0,h=-1/0,i=1/0,j=-1/0;a.pos<b;){if(!d){var k=a.readVarint();c=7&k,d=k>>3}if(d--,1===c||2===c)e+=a.readSVarint(),f+=a.readSVarint(),g>e&&(g=e),e>h&&(h=e),i>f&&(i=f),f>j&&(j=f);else if(7!==c)throw new Error("unknown command "+c)}return[g,i,h,j]},c.prototype.toGeoJSON=function(a,b,d){function e(a){for(var b=0;b<a.length;b++){var c=a[b],d=180-360*(c.y+k)/i;a[b]=[360*(c.x+j)/i-180,360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90]}}var g,h,i=this.extent*Math.pow(2,d),j=this.extent*a,k=this.extent*b,l=this.loadGeometry(),m=c.types[this.type];switch(this.type){case 1:var n=[];for(g=0;g<l.length;g++)n[g]=l[g][0];l=n,e(l);break;case 2:for(g=0;g<l.length;g++)e(l[g]);break;case 3:for(l=f(l),g=0;g<l.length;g++)for(h=0;h<l[g].length;h++)e(l[g][h])}1===l.length?l=l[0]:m="Multi"+m;var o={type:"Feature",geometry:{type:m,coordinates:l},properties:this.properties};return"id"in this&&(o.id=this.id),o}},{"point-geometry":183}],196:[function(a,b){"use strict";function c(a,b){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(d,this,b),this.length=this._features.length}function d(a,b,c){15===a?b.version=c.readVarint():1===a?b.name=c.readString():5===a?b.extent=c.readVarint():2===a?b._features.push(c.pos):3===a?b._keys.push(c.readString()):4===a&&b._values.push(e(c))}function e(a){for(var b=null,c=a.readVarint()+a.pos;a.pos<c;){var d=a.readVarint()>>3;b=1===d?a.readString():2===d?a.readFloat():3===d?a.readDouble():4===d?a.readVarint64():5===d?a.readVarint():6===d?a.readSVarint():7===d?a.readBoolean():null}return b}var f=a("./vectortilefeature.js");b.exports=c,c.prototype.feature=function(a){if(0>a||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var b=this._pbf.readVarint()+this._pbf.pos;return new f(this._pbf,b,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":195}],197:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=i[0],e=i[1];return a[0]<=d.x+c&&b[0]<=d.x+c||a[0]>=e.x-c&&b[0]>=e.x-c||a[1]>=d.y-c&&b[1]>=d.y-c||a[1]<=e.y+c&&b[1]<=e.y+c}function f(a,b){b=b||0;var c=i[0],d=i[1];return a[0]<=c.x+b||a[0]>=d.x-b||a[1]>=c.y-b||a[1]<=d.y+b}Object.defineProperty(c,"__esModule",{value:!0}),c.default_uvs=c.tile_bounds=void 0,c.outsideTile=e,c.isCoordOutsideTile=f;var g=a("../geo"),h=d(g),i=c.tile_bounds=[{x:0,y:0},{x:h.default.tile_scale,y:-h.default.tile_scale}];c.default_uvs=[0,0,1,1]},{"../geo":202}],198:[function(a,b,c){"use strict";function d(a,b,c,d,g){var h=d.texcoord_index,i=d.position_index,j=d.shape_index,k=d.offset_index,l=d.offsets_index,m=d.pre_angles_index,n=d.angles_index,o=g.quad,p=g.quad_normalize,q=g.offset,r=g.offsets,s=g.pre_angles,t=g.angle,u=g.angles,v=g.shape_w,w=g.curve,x=g.texcoord_scale,y=g.texcoord_normalize,z=g.pre_angles_normalize,A=g.angles_normalize,B=g.offsets_normalize;p=p||1;var C=o[0]/2*p,D=o[1]/2*p,E=[[-C,-D],[C,-D],[C,D],[-C,D]],F=b.vertex_elements,G=b.vertex_count,H=void 0;if(h){y=y||1;var I=x||f.default_uvs,J=e(I,4),K=J[0],L=J[1],M=J[2],N=J[3];H=[[K,L],[M,L],[M,N],[K,N]]}for(var O=a.length,P=0;O>P;P++){for(var Q=a[P],R=0;4>R;R++)h&&(c[h+0]=H[R][0]*y,c[h+1]=H[R][1]*y),c[i+0]=Q[0],c[i+1]=Q[1],c[j+0]=E[R][0],c[j+1]=E[R][1],c[j+2]=t,c[j+3]=v,c[k+0]=q[0],c[k+1]=q[1],w&&(c[m+0]=z*s[0],c[m+1]=z*s[1],c[m+2]=z*s[2],c[m+3]=z*s[3],c[n+0]=A*u[0],c[n+1]=A*u[1],c[n+2]=A*u[2],c[n+3]=A*u[3],c[l+0]=B*r[0],c[l+1]=B*r[1],c[l+2]=B*r[2],c[l+3]=B*r[3]),b.addVertex(c);F.push(G+0),F.push(G+1),F.push(G+2),F.push(G+2),F.push(G+3),F.push(G+0),G+=4}}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();c.buildQuadsForPoints=d;var f=a("./common")},{"./common":197}],199:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c,d){var e=d.texcoord_index,f=d.texcoord_scale,i=d.texcoord_normalize,k=b.vertex_elements;if(e){i=i||1;var l=f||m.default_uvs,n=h(l,4),p=n[0],q=n[1],r=n[2],s=n[3]}for(var t=a.length,u=0;t>u;u++){var v=b.vertex_count,w=a[u];if(e)var x=j.default.findBoundingBox(w),y=h(x,4),z=y[0],A=y[1],B=y[2],C=y[3],D=B-z,E=C-A,F=(r-p)/D,G=(s-q)/E;for(var H=0;H<w.length;H++)for(var I=w[H],J=0;J<I.length;J++){var K=I[J];c[0]=K[0],c[1]=K[1],e&&(c[e+0]=((K[0]-z)*F+p)*i,c[e+1]=((K[1]-A)*G+q)*i),b.addVertex(c)}for(var L=g(o.default.flatten(w)),M=0;M<L.length;M++)k.push(v+L[M])}}function f(a,b,c,d,f,g,i,j,k){var n=k.remove_tile_edges,o=k.tile_edge_tolerance,q=k.texcoord_index,r=k.texcoord_scale,s=k.texcoord_normalize,t=k.winding,u=b+(d||0),v=b+c;g[2]=v,e(a,f,g,{texcoord_index:q,texcoord_scale:r,texcoord_normalize:s});var w=f.vertex_elements,x=f.vertex_count;if(q){s=s||1;var y=r||m.default_uvs,z=h(y,4),A=z[0],B=z[1],C=z[2],D=z[3],E=[[A,D],[A,B],[C,B],[C,D]]}for(var F=a.length,G=0;F>G;G++)for(var H=a[G],I=0;I<H.length;I++)for(var J=H[I],K=0;K<J.length-1;K++)if(!n||!m.outsideTile(J[K],J[K+1],o)){var L=void 0,M=void 0;"CCW"===t?(L=K,M=K+1):(L=K+1,M=K);var N=[[J[M][0],J[M][1],v],[J[M][0],J[M][1],u],[J[L][0],J[L][1],u],[J[L][0],J[L][1],v]],O=l.default.normalize([J[M][0]-J[L][0],J[M][1]-J[L][1],0]),P=l.default.cross(p,O);g[i+0]=P[0]*j,g[i+1]=P[1]*j,g[i+2]=P[2]*j;for(var Q=0;Q<N.length;Q++)g[0]=N[Q][0],g[1]=N[Q][1],g[2]=N[Q][2],q&&(g[q+0]=E[Q][0]*s,g[q+1]=E[Q][1]*s),f.addVertex(g);w.push(x+0),w.push(x+1),w.push(x+2),w.push(x+2),w.push(x+3),w.push(x+0),x+=4}}function g(a){return o.default(a.vertices,a.holes,a.dimensions)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();c.buildPolygons=e,c.buildExtrudedPolygons=f,c.triangulatePolygon=g;var i=a("../geo"),j=d(i),k=a("../vector"),l=d(k),m=a("./common"),n=a("earcut"),o=d(n),p=[0,0,1]},{"../geo":202,"../vector":271,"./common":197,earcut:73}],200:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c,d,e){var g=e.closed_polygon,h=e.remove_tile_edges,i=e.tile_edge_tolerance,j=e.texcoord_index,k=(e.texcoord_scale,e.texcoord_width),l=e.texcoord_ratio,m=e.texcoord_normalize,n=e.scaling_index,o=e.scaling_normalize,p=e.join,q=e.cap,r=e.miter_limit,s=q?B[q]:B.butt,t=p?C[p]:C.miter;if(t===C.miter){r=r||D.MITER_LIMIT;var u=r*r}var v;j&&(m=m||D.TEXCOORD_NORMALIZE,l=l||D.TEXCOORD_RATIO,v=1/(k*l*E));for(var w={closed_polygon:g,remove_tile_edges:h,tile_edge_tolerance:i,miter_len_sq:u,join_type:t,cap_type:s,vertex_data:c,vertex_template:d,half_width:b/2,scaling_index:n,scaling_normalize:o,v_scale:v,texcoord_index:j,texcoord_width:k,texcoord_normalize:m},x=[],y=0;y<a.length;y++)f(a[y],w,x);for(var z=0;z<x.length;z++)f(x[z],w,x)}function f(a,b,c){if(!(a.length<2)){var d=b.join_type,e=b.cap_type,f=b.closed_polygon,k=b.remove_tile_edges,p=b.tile_edge_tolerance,q=b.v_scale,r=b.miter_len_sq;if(f&&d===C.miter){var t=g(a);if(0!==t){var v=u(a,t);return void c.push(v)}}var x,y,A,D,E=0,F=0,G=a.length-1,H=0;for(x=a[F],y=a[F+1];w.default.isEqual(x,y);)if(F++,x=y,y=a[F+1],H++,F===a.length-1)return;for(;w.default.isEqual(a[G],a[G-1]);)if(G--,H++,0===G)return;if(!(a.length<2+H)){if(D=w.default.normalize(w.default.perp(x,y)),k&&z.outsideTile(x,y,p)){var I=h(a,F,p);return void(I&&c.push(I))}f?(A=w.default.normalize(w.default.perp(a[G-1],x)),i(x,A,D,d,b)):(z.isCoordOutsideTile(x)||(s(x,E,D,e,!0,b),e!==B.butt&&(E+=.5*q*b.texcoord_width)),o(x,D,[1,E],b),o(x,w.default.neg(D),[0,E],b)),E+=q*w.default.length(w.default.sub(y,x));for(var J=F+1;G>J;J++){var K=J,L=J+1;if(x=a[K],y=a[L],!w.default.isEqual(x,y)){if(k&&z.outsideTile(x,y,p)){o(x,D,[1,E],b),o(x,w.default.neg(D),[0,E],b),n(1,b);var M=h(a,K+1,p);return void(M&&c.push(M))}A=D,D=w.default.normalize(w.default.perp(x,y)),d===C.miter?l(E,x,A,D,r,!1,b):m(d,E,x,A,D,!1,b),E+=q*w.default.length(w.default.sub(y,x))}}x=y,A=D,f?(D=w.default.normalize(w.default.perp(x,a[1])),j(x,A,D,d,E,b)):(o(x,A,[1,E],b),o(x,w.default.neg(A),[0,E],b),n(1,b),z.isCoordOutsideTile(x)||s(x,E,A,e,!1,b))}}}function g(a){if(z.isCoordOutsideTile(a[0]))return 0;for(var b=0;b<a.length;b++){var c=a[a.length-1-b];if(z.isCoordOutsideTile(c))return a.length-1-b}return 0}function h(a,b,c){for(var d=b;a[d+1]&&z.outsideTile(a[d],a[d+1],c);)d++;return a.length-d>=2&&a.slice(d)}function i(a,b,c,d,e){if(void 0===d||z.isCoordOutsideTile(a))o(a,c,[1,0],e),o(a,w.default.neg(c),[0,0],e);else{var f=0;d===C.miter?l(f,a,b,c,e.miter_len_sq,!0,e):m(d,f,a,b,c,!0,e)}}function j(a,b,c,d,e,f){if(z.isCoordOutsideTile(a))o(a,b,[1,e],f),o(a,w.default.neg(b),[0,e],f),n(1,f);else{var g=k(b,c);d===C.miter&&w.default.lengthSq(g)>f.miter_len_sq&&(d=C.bevel),d===C.miter?(o(a,g,[1,e],f),o(a,w.default.neg(g),[0,e],f),n(1,f)):(o(a,b,[1,e],f),o(a,w.default.neg(b),[0,e],f),n(1,f))}}function k(a,b){var c=w.default.normalize(w.default.add(a,b)),d=2/(1+Math.abs(w.default.dot(a,c)));return w.default.mult(c,d*d)}function l(a,b,c,d,e,f,g){var h=k(c,d);w.default.lengthSq(h)>e?m(C.bevel,a,b,c,d,f,g):(o(b,h,[1,a],g),o(b,w.default.neg(h),[0,a],g),f||n(1,g))}function m(a,b,c,d,e,f,g){var h=k(d,e),i=e[0]*d[1]-e[1]*d[0]>0;i?(o(c,h,[1,b],g),o(c,w.default.neg(d),[0,b],g),f||n(1,g),a===C.bevel?r(c,w.default.neg(d),h,w.default.neg(e),[0,b],[1,b],[0,b],g):a===C.round&&q(c,w.default.neg(d),h,w.default.neg(e),[0,b],[1,b],[0,b],!1,g),o(c,h,[1,b],g),o(c,w.default.neg(e),[0,b],g)):(o(c,d,[1,b],g),o(c,w.default.neg(h),[0,b],g),f||n(1,g),a===C.bevel?r(c,d,w.default.neg(h),e,[1,b],[0,b],[1,b],g):a===C.round&&q(c,d,w.default.neg(h),e,[1,b],[0,b],[1,b],!1,g),o(c,e,[1,b],g),o(c,w.default.neg(h),[0,b],g))}function n(a,b){for(var c=b.vertex_data.vertex_elements,d=b.vertex_data.vertex_count,e=d-2*a-2,f=0;a>f;f++)c.push(e+2*f+2),c.push(e+2*f+1),c.push(e+2*f+0),c.push(e+2*f+2),c.push(e+2*f+3),c.push(e+2*f+1)}function o(a,b,c,d){var e=d.vertex_template,f=d.vertex_data;p(e,a,c,b,d),f.addVertex(e)}function p(a,b,c,d,e){a[0]=b[0],a[1]=b[1],e.texcoord_index&&c&&(a[e.texcoord_index+0]=c[0]*e.texcoord_normalize,a[e.texcoord_index+1]=c[1]*e.texcoord_normalize),e.scaling_index&&(a[e.scaling_index+0]=d[0]*e.scaling_normalize,a[e.scaling_index+1]=d[1]*e.scaling_normalize,a[e.scaling_index+2]=e.half_width)}function q(a,b,c,d,e,f,g,h,i){for(var j=b[0]*d[1]-b[1]*d[0],k=w.default.dot(b,d),l=Math.atan2(j,k);l>=Math.PI;)l-=2*Math.PI;var m=t(l,i.half_width);if(!(1>m)){var n=i.vertex_data.vertex_count,p=i.vertex_data.vertex_elements;o(a,c,f,i),o(a,b,e,i);var q=b;if(void 0!==i.texcoord_index){var r;if(h){r=[];var s=w.default.sub(e,f)}else{r=w.default.set(e);var u=w.default.div(w.default.sub(g,e),m)}}for(var v=l/m,x=0;m>x;x++)q=w.default.rot(q,v),void 0!==i.texcoord_index&&(h?(s=w.default.rot(s,v),r[0]=s[0]+f[0],r[1]=s[1]*i.texcoord_width*i.v_scale+f[1]):r=w.default.add(r,u)),o(a,q,r,i),p.push(n+x+(j>0?2:1)),p.push(n),p.push(n+x+(j>0?1:2))}}function r(a,b,c,d,e,f,g,h){var i=h.vertex_data.vertex_count;o(a,c,f,h),o(a,b,e,h),o(a,d,g,h);var j=b[0]*d[1]-b[1]*d[0]>0,k=h.vertex_data.vertex_elements;j?(k.push(i+2),k.push(i+0),k.push(i+1)):(k.push(i+1),k.push(i+0),k.push(i+2))}function s(a,b,c,d,e,f){var g=w.default.neg(c);switch(d){case B.square:var h;e?(h=[c[1],-c[0]],o(a,w.default.add(c,h),[1,b],f),o(a,w.default.add(g,h),[0,b],f),b+=.5*f.texcoord_width*f.v_scale,o(a,c,[1,b],f),o(a,g,[0,b],f)):(h=[-c[1],c[0]],o(a,c,[1,b],f),o(a,g,[0,b],f),b+=.5*f.texcoord_width*f.v_scale,o(a,w.default.add(c,h),[1,b],f),o(a,w.default.add(g,h),[0,b],f)),n(1,f);break;case B.round:var i,j,k,l,m;e?(i=c,j=g,void 0!==f.texcoord_index&&(b+=.5*f.texcoord_width*f.v_scale,k=[1,b],l=[0,b],m=[.5,b])):(i=g,j=c,void 0!==f.texcoord_index&&(k=[0,b],l=[1,b],m=[.5,b])),q(a,i,A,j,k,m,l,!0,f);break;case B.butt:return}}function t(a,b){0>a&&(a=-a);var c=b>2*D.MIN_FAN_WIDTH?F(b/D.MIN_FAN_WIDTH):1;return Math.ceil(a/Math.PI*c)}function u(a,b){for(var c=[],d=0;d<a.length;d++){var e=(d+b)%a.length;0!==e&&c.push(a[e])}return c.push(c[0]),c}Object.defineProperty(c,"__esModule",{value:!0}),c.buildPolylines=e;var v=a("../vector"),w=d(v),x=a("../geo"),y=d(x),z=a("./common"),A=[0,0],B={butt:0,square:1,round:2},C={miter:0,bevel:1,round:2},D={MITER_LIMIT:3,TEXCOORD_NORMALIZE:1,TEXCOORD_RATIO:1,MIN_FAN_WIDTH:5},E=y.default.tile_scale,F=Math.log2||function(a){return Math.log(a)*Math.LOG2E}},{"../geo":202,"../vector":271,"./common":197}],201:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./utils/utils"),k=d(j),l=a("./gl/shader_program"),m=d(l),n=a("./utils/gl-matrix"),o=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g(this,a),this.view=c,this.position=d.position,this.zoom=d.zoom}return i(a,[{key:"update",value:function(){}},{key:"setupProgram",value:function(){}},{key:"updateView",value:function(){if(this.position||this.zoom){var a={};this.position&&(a={lng:this.position[0],lat:this.position[1],zoom:this.position[2]}),this.zoom&&(a.zoom=this.zoom),this.view.setView(a)}}},{key:"setupMatrices",value:function(a,b){n.mat4.multiply(a.model_view32,this.view_matrix,a.model),b.uniform("Matrix4fv","u_modelView",a.model_view32),n.mat3.normalFromMat4(a.normal32,a.model_view32),n.mat3.invert(a.inverse_normal32,a.normal32),b.uniform("Matrix3fv","u_normalMatrix",a.normal32),b.uniform("Matrix3fv","u_inverseNormalMatrix",a.inverse_normal32)}}],[{key:"create",value:function(a,b,c){switch(c.type){case"isometric":return new q(a,b,c);case"flat":return new r(a,b,c);case"perspective":default:return new p(a,b,c)}}}]),a}();c.default=o;var p=function(a){function b(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,d));return f.type="perspective",f.focal_length=d.focal_length,f.fov=d.fov,f.focal_length||f.fov||(f.focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]]),f.vanishing_point=d.vanishing_point||[0,0],f.vanishing_point=f.vanishing_point.map(parseFloat),f.vanishing_point_skew=[],f.position_meters=null,f.view_matrix=new Float64Array(16),f.projection_matrix=new Float32Array(16),m.default.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_vanishing_point;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }"),f}return f(b,a),i(b,[{key:"constrainCamera",value:function(a){var b=a.view_height,c=a.height,d=a.focal_length,e=a.fov;return c?(d=2*c/b,e=2*Math.atan(1/d)):(d?e=2*Math.atan(1/d):e&&(e=e*Math.PI/180,d=1/Math.tan(e/2)),c=b/2*d),{view_height:b,height:c,focal_length:d,fov:e}}},{key:"updateMatrices",value:function(){var a=this.view.size.css.height*this.view.meters_per_pixel,b=this.constrainCamera({view_height:a,focal_length:k.default.interpolate(this.view.zoom,this.focal_length),fov:k.default.interpolate(this.view.zoom,this.fov)}),c=b.height,d=b.fov,e=[this.view.center.meters.x,this.view.center.meters.y,c];this.position_meters=e,n.mat4.lookAt(this.view_matrix,n.vec3.fromValues(e[0],e[1],0),n.vec3.fromValues(e[0],e[1],-1),n.vec3.fromValues(0,1,0)),n.mat4.perspective(this.projection_matrix,d,this.view.aspect,1,2*c),this.vanishing_point_skew[0]=this.vanishing_point[0]/this.view.size.css.width,this.vanishing_point_skew[1]=this.vanishing_point[1]/this.view.size.css.height,this.projection_matrix[8]=2*-this.vanishing_point_skew[0],this.projection_matrix[9]=2*-this.vanishing_point_skew[1],n.mat4.translate(this.projection_matrix,this.projection_matrix,n.vec3.fromValues(a/2*this.view.aspect*2*-this.vanishing_point_skew[0],a/2*2*-this.vanishing_point_skew[1],0)),n.mat4.translate(this.projection_matrix,this.projection_matrix,n.vec3.fromValues(0,0,-c))}},{key:"update",value:function(){h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"update",this).call(this),this.updateMatrices()}},{key:"setupProgram",value:function(a){a.uniform("Matrix4fv","u_projection",this.projection_matrix),a.uniform("3f","u_eye",[0,0,this.position_meters[2]]),a.uniform("2fv","u_vanishing_point",this.vanishing_point_skew)}}]),b}(o),q=function(a){function b(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,d));return f.type="isometric",f.axis=d.axis||{x:0,y:1},2===f.axis.length&&(f.axis={x:f.axis[0],y:f.axis[1]}),f.position_meters=null,f.viewport_height=null,f.view_matrix=new Float64Array(16),f.projection_matrix=new Float32Array(16),m.default.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_vanishing_point;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n                // position.xy += position.z * u_isometric_axis;\n\n                // Reverse z for depth buffer so up is negative,\n                // and scale down values so objects higher than one screen height will not get clipped\n                // pull forward slightly to avoid going past far clipping plane\n                position.z = -position.z / 100. + 1. - 0.001;\n            }"),f}return f(b,a),i(b,[{key:"update",value:function(){h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"update",this).call(this),this.viewport_height=this.view.size.css.height*this.view.meters_per_pixel;var a=[this.view.center.meters.x,this.view.center.meters.y,this.viewport_height];this.position_meters=a,n.mat4.identity(this.view_matrix),n.mat4.translate(this.view_matrix,this.view_matrix,n.vec3.fromValues(-a[0],-a[1],0)),n.mat4.identity(this.projection_matrix),this.projection_matrix[8]=this.axis.x/this.view.aspect,this.projection_matrix[9]=this.axis.y,n.mat4.scale(this.projection_matrix,this.projection_matrix,n.vec3.fromValues(2/this.view.size.meters.x,2/this.view.size.meters.y,2/this.view.size.meters.y))}},{key:"setupProgram",value:function(a){a.uniform("Matrix4fv","u_projection",this.projection_matrix),a.uniform("3fv","u_eye",[0,0,this.viewport_height]),a.uniform("2fv","u_vanishing_point",[0,0])}}]),b}(o),r=function(a){
function b(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,d));return f.type="flat",f}return f(b,a),i(b,[{key:"update",value:function(){this.axis.x=0,this.axis.y=0,h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"update",this).call(this)}}]),b}(q)},{"./gl/shader_program":208,"./utils/gl-matrix":258,"./utils/utils":268}],202:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();c.default=d={},d.default_source_max_zoom=18,d.default_view_max_zoom=20,d.tile_size=256,d.half_circumference_meters=20037508.342789244,d.circumference_meters=2*d.half_circumference_meters,d.min_zoom_meters_per_pixel=d.circumference_meters/d.tile_size;var f=[];d.metersPerPixel=function(a){return f[a]=f[a]||d.min_zoom_meters_per_pixel/Math.pow(2,a),f[a]};var g=[];d.metersPerTile=function(a){return g[a]=g[a]||d.circumference_meters/Math.pow(2,a),g[a]},d.tile_scale=4096,d.units_per_pixel=d.tile_scale/d.tile_size,d.height_scale=16;var h=[];d.unitsPerMeter=function(a){return h[a]=h[a]||d.tile_scale/(d.tile_size*d.metersPerPixel(a)),h[a]},d.metersForTile=function(a){return{x:a.x*d.circumference_meters/Math.pow(2,a.z)-d.half_circumference_meters,y:-(a.y*d.circumference_meters/Math.pow(2,a.z)-d.half_circumference_meters)}},d.tileForMeters=function(a,b){var c=e(a,2),f=c[0],g=c[1];return{x:Math.floor((f+d.half_circumference_meters)/(d.circumference_meters/Math.pow(2,b))),y:Math.floor((-g+d.half_circumference_meters)/(d.circumference_meters/Math.pow(2,b))),z:b}},d.wrapTile=function(a){var b=a.x,c=a.y,d=a.z,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},f=(1<<d)-1;return e.x&&(b&=f),e.y&&(c&=f),{x:b,y:c,z:d}},d.metersToLatLng=function(a){var b=e(a,2),c=b[0],f=b[1];return c/=d.half_circumference_meters,f/=d.half_circumference_meters,f=(2*Math.atan(Math.exp(f*Math.PI))-Math.PI/2)/Math.PI,c*=180,f*=180,[c,f]},d.latLngToMeters=function(a){var b=e(a,2),c=b[0],f=b[1];return f=Math.log(Math.tan(f*Math.PI/360+Math.PI/4))/Math.PI,f*=d.half_circumference_meters,c*=d.half_circumference_meters/180,[c,f]},d.transformGeometry=function(a,b){null!=a&&("Point"===a.type?b(a.coordinates):"LineString"===a.type||"MultiPoint"===a.type?a.coordinates.forEach(b):"Polygon"===a.type||"MultiLineString"===a.type?a.coordinates.forEach(function(a){return a.forEach(b)}):"MultiPolygon"===a.type&&a.coordinates.forEach(function(a){a.forEach(function(a){return a.forEach(b)})}))},d.boxIntersect=function(a,b){return!(b.sw.x>a.ne.x||b.ne.x<a.sw.x||b.sw.y>a.ne.y||b.ne.y<a.sw.y)},d.findBoundingBox=function(a){for(var b=1/0,c=-1/0,d=1/0,e=-1/0,f=a[0].length,g=0;f>g;g++){var h=a[0][g];h[0]<b&&(b=h[0]),h[1]<d&&(d=h[1]),h[0]>c&&(c=h[0]),h[1]>e&&(e=h[1])}return[b,d,c,e]},d.geometryType=function(a){return"Polygon"===a||"MultiPolygon"===a?"polygon":"LineString"===a||"MultiLineString"===a?"line":"Point"===a||"MultiPoint"===a?"point":void 0},d.centroid=function(a){if(a&&0!==a.length){for(var b=0,c=0,d=0,e=a[0],f=e.length,g=0,h=f-1;f>g;h=g,g++){var i=e[g],j=e[h],k=i[1]*j[0]-j[1]*i[0];b+=(i[0]+j[0])*k,c+=(i[1]+j[1])*k,d+=3*k}return[b/d,c/d]}},d.multiCentroid=function(a){for(var b=a.length,c=[0,0],e=0;e<a.length;e++){var f=d.centroid(a[e]);c[0]+=f[0],c[1]+=f[1]}return c[0]/=b,c[1]/=b,c},d.signedPolygonRingAreaSum=function(a){for(var b=0,c=a.length,d=0;c-1>d;d++){var e=a[d],f=a[d+1];b+=e[0]*f[1]-f[0]*e[1]}return b+=a[c-1][0]*a[0][1]-a[0][0]*a[c-1][1]},d.polygonRingArea=function(a){return Math.abs(d.signedPolygonRingAreaSum(a))/2},d.polygonArea=function(a){return a?d.polygonRingArea(a[0]):void 0},d.multiPolygonArea=function(a){for(var b=0,c=0;c<a.length;c++)b+=d.polygonArea(a[c]);return b},d.ringWinding=function(a){var b=d.signedPolygonRingAreaSum(a);return b>0?"CW":0>b?"CCW":void 0}},{}],203:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d;c.default=d={},d.BYTE=5120,d.UNSIGNED_BYTE=5121,d.SHORT=5122,d.UNSIGNED_SHORT=5123,d.INT=5124,d.UNSIGNED_INT=5125,d.FLOAT=5126},{}],204:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d;c.default=d={};var e=0;d.getContext=function(a,b){var c=!1;null==a&&(a=document.createElement("canvas"),a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.zIndex=-1,document.body.appendChild(a),c=!0);var f=a.getContext("webgl",b)||a.getContext("experimental-webgl",b);if(!f)throw new Error("Couldn't create WebGL context.");return f._tangram_id=e++,c?(d.resize(f,window.innerWidth,window.innerHeight,b.device_pixel_ratio),window.addEventListener("resize",function(){d.resize(f,window.innerWidth,window.innerHeight,b.device_pixel_ratio)})):d.resize(f,parseFloat(a.style.width),parseFloat(a.style.height),b.device_pixel_ratio),f},d.resize=function(a,b,c,d){d=d||window.devicePixelRatio||1,a.canvas.style.width=b+"px",a.canvas.style.height=c+"px",a.canvas.width=Math.round(b*d),a.canvas.height=Math.round(c*d),a.bindFramebuffer(a.FRAMEBUFFER,null),a.viewport(0,0,a.canvas.width,a.canvas.height)}},{}],205:[function(a,b,c){"use strict";function d(a,b){var c=e.filter(function(b){return b[0]===a})[0];return c=c&&c[1],c||(e.push([a,{}]),c=e[e.length-1][1]),c[b]||(c[b]=a.getExtension(b)),c[b]}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d;var e=[]},{}],206:[function(a,b,c){"use strict";function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(c,"__esModule",{value:!0});var e={};c.default=e,e.parseUniforms=function(a){var b=[];for(var c in a){var d,e=c,f=a[c];if("number"==typeof f)b.push({type:"float",method:"1f",name:c,value:f,key:e,uniforms:a});else if(Array.isArray(f)){if("number"==typeof f[0])f.length>=2&&f.length<=4?b.push({type:"vec"+f.length,method:f.length+"fv",name:c,value:f,key:e,uniforms:a}):f.length>4&&b.push({type:"float[]",method:"1fv",name:c+"[0]",value:f,key:e,uniforms:a});else if("string"==typeof f[0])for(d=0;d<f.length;d++)b.push({type:"sampler2D",method:"1i",name:c+"["+d+"]",value:f[d],key:d,uniforms:f});else if(Array.isArray(f[0])&&"number"==typeof f[0][0]&&f[0].length>=2&&f[0].length<=4)for(d=0;d<f.length;d++)b.push({type:"vec"+f[0].length,method:f[d].length+"fv",name:c+"["+d+"]",value:f[d],key:d,uniforms:f})}else"boolean"==typeof f?b.push({type:"bool",method:"1i",name:c,value:f,key:e,uniforms:a}):"string"==typeof f&&b.push({type:"sampler2D",method:"1i",name:c,value:f,key:e,uniforms:a})}return b},e.defineVariable=function(a,b){var c,d;if("number"==typeof b)c="float";else if(Array.isArray(b))"number"==typeof b[0]?b.length>=2&&b.length<=4?c="vec"+b.length:(c="float",d=b.length):"string"==typeof b[0]&&(c="sampler2D",d=b.length);else if("boolean"==typeof b)c="bool";else{if("string"!=typeof b)return;c="sampler2D"}var e="";return e+=c+" "+a,d&&(e+="["+d+"]"),e+=";\n"},e.defineUniform=function(a,b){var c=e.defineVariable(a,b);if(c)return"uniform "+c},e.isUniformDefined=function(a,b){var c=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+a+"\\b","g");return!!b.match(c)},e.isSymbolReferenced=function(a,b){var c=new RegExp("\\b"+a+"\\b","g");return b.search(c)>=0},e.expandVec3=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=void 0;if(Array.isArray(a)){if(2!==a.length)return a;c=[].concat(d(a),[b]).map(parseFloat)}else c=[a,a,a].map(parseFloat);return c&&c.every(function(a){return"number"==typeof a&&!isNaN(a)})?c:void 0},e.expandVec4=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=void 0;if(Array.isArray(a)){if(3!==a.length)return a;c=[].concat(d(a),[b]).map(parseFloat)}else c=[a,a,a,b].map(parseFloat);return c&&c.every(function(a){return"number"==typeof a&&!isNaN(a)})?c:void 0}},{}],207:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c.RenderState=function(){function a(b,c){d(this,a),c(b),this.value=b,this.setup=c}return e(a,[{key:"set",value:function(a){JSON.stringify(this.value)!==JSON.stringify(a)&&(this.setup(a),this.value=a)}}]),a}(),g=function a(b){d(this,a),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=b.BACK,this.defaults.blending=!1,this.defaults.blending_src=b.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=b.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=b.ONE,this.defaults.blending_dst_alpha=b.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,b.depthFunc(b.LESS),this.culling=new f({cull:this.defaults.culling,face:this.defaults.culling_face},function(a){a.cull?(b.enable(b.CULL_FACE),b.cullFace(a.face)):b.disable(b.CULL_FACE)}),this.blending=new f({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},function(a){a.blend?(b.enable(b.BLEND),a.src_alpha&&a.dst_alpha?b.blendFuncSeparate(a.src,a.dst,a.src_alpha,a.dst_alpha):b.blendFunc(a.src,a.dst)):b.disable(b.BLEND)}),this.depth_write=new f({depth_write:this.defaults.depth_write},function(a){b.depthMask(a.depth_write)}),this.depth_test=new f({depth_test:this.defaults.depth_test},function(a){a.depth_test?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST)})};c.default=g},{}],208:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../utils/log"),i=d(h),j=a("./glsl"),k=d(j),l=a("./texture"),m=d(l),n=a("./extensions"),o=d(n),p=a("../utils/hash"),q=d(p),r=a("strip-comments"),s=d(r),t=a("gl-shader-errors"),u=d(t),v=/^\s*#pragma.*$/gm,w=/\\\s*\n/gm,x=function(){function a(b,c,d,e){f(this,a),e=e||{},this.gl=b,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,this.defines=Object.assign({},e.defines||{}),this.blocks=Object.assign({},e.blocks||{}),this.block_scopes=Object.assign({},e.block_scopes||{}),this.extensions=e.extensions||[],this.dependent_uniforms=e.uniforms,this.uniforms={},this.attribs={},this.vertex_source=c,this.fragment_source=d,this.id=a.id++,this.name=e.name}return g(a,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(a.current!==this&&this.gl.useProgram(this.program),a.current=this)}},{key:"compile",value:function(){var b=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for "+this.id+" ("+this.name+") because already compiling");this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var c,d=this.checkExtensions(),e=this.buildDefineList(),f=this.buildShaderBlockList();for(var g in f){var h=f[g];if(h&&(!Array.isArray(h)||0!==h.length)){c=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+g+"\\s*$","m");var i=this.computed_vertex_source.match(c),j=this.computed_fragment_source.match(c);if(null!=i||null!=j){var k="";h.forEach(function(a){var b=a.scope+", "+a.key+", "+a.num;k+="\n// tangram-block-start: "+b+"\n",k+=a.source,k+="\n// tangram-block-end: "+b+"\n"}),null!=i&&(this.computed_vertex_source=this.computed_vertex_source.replace(c,k)),null!=j&&(this.computed_fragment_source=this.computed_fragment_source.replace(c,k)),e["TANGRAM_BLOCK_"+g.replace(/[\s-]+/g,"_").toUpperCase()]=!0}}}this.computed_vertex_source=this.computed_vertex_source.replace(v,""),this.computed_fragment_source=this.computed_fragment_source.replace(v,""),this.ensureUniforms(this.dependent_uniforms);var l="",m=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT);l=m&&m.precision>0?"precision highp float;\n":"precision mediump float;\n",e.TANGRAM_VERTEX_SHADER=!0,e.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=l+a.buildDefineString(e)+this.computed_vertex_source,e.TANGRAM_VERTEX_SHADER=!1,e.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=a.buildExtensionString(d)+l+a.buildDefineString(e)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(w,""),this.computed_fragment_source=this.computed_fragment_source.replace(w,"");try{this.program=a.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(a){throw this.program=null,this.compiled=!1,this.compiling=!1,this.error=a,("vertex"===a.type||"fragment"===a.type)&&(this.shader_errors=a.errors,this.shader_errors.forEach(function(c){c.type=a.type,c.block=b.block(a.type,c.line)})),new Error("ShaderProgram.compile(): program "+this.id+" ("+this.name+") error:",a)}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var b,c={};for(b in a.defines)c[b]=a.defines[b];for(b in this.defines)c[b]=this.defines[b];return c}},{key:"buildShaderBlockList",value:function(){var b=void 0,c={};for(b in a.blocks)if(c[b]=[],Array.isArray(a.blocks[b])){var d;(d=c[b]).push.apply(d,e(a.blocks[b].map(function(a,c){return{key:b,source:a,num:c,scope:"ShaderProgram"}})))}else c[b]=[{key:b,source:a.blocks[b],num:0,scope:"ShaderProgram"}];for(b in this.blocks)if(c[b]=c[b]||[],Array.isArray(this.blocks[b]))for(var f=this.block_scopes&&this.block_scopes[b]||[],g=null,h=0,i=0;i<this.blocks[b].length;i++)f[i]!==g&&(g=f[i],h=0),c[b].push({key:b,source:this.blocks[b][i],num:h,scope:g||this.name}),h++;else c[b].push({key:b,source:this.blocks[b],num:0,scope:this.name});return c}},{key:"ensureUniforms",value:function(a){if(a){var b,c=s.default(this.computed_vertex_source),d=s.default(this.computed_fragment_source),e=[],f=[];for(var g in a){var h=k.default.isUniformDefined(g,c),j=k.default.isUniformDefined(g,d);if(!h||!j){if(b=k.default.defineUniform(g,a[g]),!b)continue;h||(i.default("trace","Program "+this.name+": "+g+" not defined in vertex shader, injecting: '"+b+"'"),e.push(b)),j||(i.default("trace","Program "+this.name+": "+g+" not defined in fragment shader, injecting: '"+b+"'"),f.push(b))}}e.length>0&&(this.computed_vertex_source=e.join("\n")+this.computed_vertex_source),f.length>0&&(this.computed_fragment_source=f.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.compiled){b&&(this.texture_unit=0);for(var c=k.default.parseUniforms(a),d=0;d<c.length;d++){var e=c[d];"sampler2D"===e.type?this.setTextureUniform(e.name,e.value):this.uniform(e.method,e.name,e.value)}}}},{key:"saveUniforms",value:function(a){var b=a||this.uniforms;for(var c in b){var d=this.uniforms[c];d&&(d.saved_value=d.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(a){var b=a||this.uniforms;for(var c in b){var d=this.uniforms[c];d&&d.saved_value&&(d.value=d.saved_value,this.updateUniform(d))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(a,b){var c=m.default.textures[b];return null==c?void i.default("warn","Cannot find texture '"+b+"'"):(c.bind(this.texture_unit),this.uniform("1i",a,this.texture_unit),void this.texture_unit++)}},{key:"uniform",value:function a(b,c,d){if(this.compiled){this.uniforms[c]=this.uniforms[c]||{};var a=this.uniforms[c];a.name=c,void 0===a.location&&(a.location=this.gl.getUniformLocation(this.program,c)),a.method=b,a.value=d,this.updateUniform(a)}}},{key:"updateUniform",value:function(a){this.compiled&&a&&null!=a.location&&(this.use(),this.commitUniform(a))}},{key:"commitUniform",value:function(a){var b=a.location,c=a.value;switch(a.method){case"1i":this.gl.uniform1i(b,c);break;case"1f":this.gl.uniform1f(b,c);break;case"2f":this.gl.uniform2f(b,c[0],c[1]);break;case"3f":this.gl.uniform3f(b,c[0],c[1],c[2]);break;case"4f":this.gl.uniform4f(b,c[0],c[1],c[2],c[3]);break;case"1iv":this.gl.uniform1iv(b,c);break;case"3iv":this.gl.uniform3iv(b,c);break;case"1fv":this.gl.uniform1fv(b,c);break;case"2fv":this.gl.uniform2fv(b,c);break;case"3fv":this.gl.uniform3fv(b,c);break;case"4fv":this.gl.uniform4fv(b,c);break;case"Matrix3fv":this.gl.uniformMatrix3fv(b,!1,c);break;case"Matrix4fv":this.gl.uniformMatrix4fv(b,!1,c)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var a in this.uniforms){var b=this.uniforms[a];b.location=this.gl.getUniformLocation(this.program,a),this.updateUniform(b)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(a){if(this.compiled){var b=this.attribs[a]=this.attribs[a]||{};return null!=b.location?b:(b.name=a,b.location=this.gl.getAttribLocation(this.program,a),b)}}},{key:"source",value:function(a){return"vertex"===a?this.computed_vertex_source:"fragment"===a?this.computed_fragment_source:void 0}},{key:"lines",value:function(a){var b=this.source(a);return b?b.split("\n"):[]}},{key:"line",value:function(a,b){var c=this.lines(a);return c?c[b]:void 0}},{key:"block",value:function a(b,c){for(var d=this.lines(b),a=void 0,e=0;c>e&&e<d.length;e++){var f=d[e],g=f.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);g&&g.length>1?a={scope:g[1],name:g[2],num:g[3]}:(g=f.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/),g&&g.length>1&&(a=null)),a&&(a.line=null==a.line?-1:a.line+1,a.source=f)}return a}},{key:"checkExtensions",value:function(){var a=this,b=[];return this.extensions.forEach(function(c){var d=o.default(a.gl,c),e="TANGRAM_EXTENSION_"+c;a.defines[e]=null!=d,d?b.push(c):i.default("debug","Could not enable extension '"+c+"'")}),b}}]),a}();c.default=x,x.id=0,x.current=null,x.defines={},x.blocks={},x.reset=function(){x.programs_by_source={},x.shaders_by_source={}},x.reset(),x.buildDefineString=function(a){var b="";for(var c in a)null!=a[c]&&a[c]!==!1&&(b+="boolean"==typeof a[c]&&a[c]===!0?"#define "+c+"\n":"number"==typeof a[c]&&Math.floor(a[c])===a[c]?"#define "+c+" "+a[c].toFixed(1)+"\n":"#define "+c+" "+a[c]+"\n");return b},x.buildExtensionString=function(a){a=a||[];var b="";return a.forEach(function(a){b+="#ifdef GL_"+a+"\n#extension GL_"+a+" : enable\n#endif\n"}),b},x.addBlock=function(a){var b;x.blocks[a]=x.blocks[a]||[];for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];(b=x.blocks[a]).push.apply(b,d)},x.removeBlock=function(a){x.blocks[a]=[]},x.replaceBlock=function(a){x.removeBlock(a);for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];x.addBlock.apply(x,[a].concat(c))},x.updateProgram=function(a,b,c,d){var e=q.default(a._tangram_id+"::"+c+"::"+d);if(x.programs_by_source[e])return i.default("trace","Reusing identical source GL program object"),x.programs_by_source[e];try{var f=x.createShader(a,c,a.VERTEX_SHADER),g=x.createShader(a,d,a.FRAGMENT_SHADER)}catch(a){throw i.default("error",a.message),a}if(a.useProgram(null),null!=b)for(var h=a.getAttachedShaders(b),j=0;j<h.length;j++)a.detachShader(b,h[j]);else b=a.createProgram();if(null==f||null==g)return b;if(a.attachShader(b,f),a.attachShader(b,g),a.linkProgram(b),!a.getProgramParameter(b,a.LINK_STATUS)){var k=new Error("WebGL program error:\n            VALIDATE_STATUS: "+a.getProgramParameter(b,a.VALIDATE_STATUS)+"\n            ERROR: "+a.getError()+"\n            --- Vertex Shader ---\n            "+c+"\n            --- Fragment Shader ---\n            "+d),l={type:"program",message:k};throw i.default("error",l.message),l}return x.programs_by_source[e]=b,b},x.createShader=function(a,b,c){var d=q.default(a._tangram_id+"::"+b);if(x.shaders_by_source[d])return i.default("trace","Reusing identical source GL shader object"),x.shaders_by_source[d];var e=a.createShader(c);if(a.shaderSource(e,b),a.compileShader(e),!a.getShaderParameter(e,a.COMPILE_STATUS)){var f=c===a.VERTEX_SHADER?"vertex":"fragment",g=a.getShaderInfoLog(e),h=u.default(g);throw{type:f,message:g,errors:h}}return x.shaders_by_source[d]=e,e}},{"../utils/hash":259,"../utils/log":260,"./extensions":205,"./glsl":206,"./texture":209,"gl-shader-errors":93,"strip-comments":187}],209:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/log"),h=d(g),i=a("../utils/utils"),j=d(i),k=a("../utils/subscribe"),l=d(k),m=a("../utils/worker_broker"),n=d(m),o=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this,a),this.gl=b,this.texture=b.createTexture(),this.texture&&(this.valid=!0),this.bind(),this.name=c,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=d.filtering,this.sprites=d.sprites,this.texcoords={},this.sizes={},this.setData(1,1,new Uint8Array([0,0,0,255]),{filtering:"nearest"}),a.textures[this.name]&&(this.retain_count=a.textures[this.name].retain_count,a.textures[this.name].retain_count=0,a.textures[this.name].destroy()),a.textures[this.name]=this,a.texture_configs[this.name]=JSON.stringify(Object.assign({name:c},d)),this.load(d),h.default("trace","creating Texture "+this.name)}return f(a,[{key:"destroy",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.force;return this.retain_count>0&&!c?void h.default("error","Texture '"+this.name+"': destroying texture with retain count of '"+this.retain_count+"'"):void(this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete a.textures[this.name],delete a.texture_configs[this.name],this.valid=!1,h.default("trace","destroying Texture "+this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&h.default("error","Texture '"+this.name+"': releasing texture with retain count of '"+this.retain_count+"'"),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.valid&&(a.activeUnit!==b&&(this.gl.activeTexture(this.gl.TEXTURE0+b),a.activeUnit=b,a.boundTexture=null),a.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),a.boundTexture=this.texture))}},{key:"load",value:function(a){var b=this;return a?(this.loading=null,"string"==typeof a.url?(this.config_type="url",this.setUrl(a.url,a)):a.element?(this.config_type="element",this.setElement(a.element,a)):a.data&&a.width&&a.height&&(this.config_type="data",this.setData(a.width,a.height,a.data,a)),this.loading=this.loading&&this.loading.then(function(){return b.calculateSprites(),b})||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(b){var c=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.valid?(this.url=b,this.loading=new Promise(function(b){var e=new Image;e.onload=function(){try{c.setElement(e,d)}catch(b){c.loaded=!1,h.default("warn","Texture '"+c.name+"': failed to load url: '"+c.url+"'",b,d),a.trigger("warning",{message:"Failed to load texture from "+c.url,error:b,texture:d})}c.loaded=!0,b(c)},e.onerror=function(e){c.loaded=!1,h.default("warn","Texture '"+c.name+"': failed to load url: '"+c.url+"'",e,d),a.trigger("warning",{message:"Failed to load texture from "+c.url,error:e,texture:d}),b(c)},j.default.isSafari()&&"data:"===c.url.slice(0,5)||(e.crossOrigin="anonymous"),e.src=c.url}),this.loading):void 0}},{key:"setData",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.width=a,this.height=b,Array.isArray(c)&&(c=new Uint8Array(c)),this.update(c,d),this.setFiltering(d),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(b,c){var d=b;if("string"==typeof b&&(b=document.querySelector(b)),b instanceof HTMLCanvasElement||b instanceof HTMLImageElement||b instanceof HTMLVideoElement)this.update(b,c),this.setFiltering(c);else{this.loaded=!1;var e="the 'element' parameter (`element: "+JSON.stringify(d)+"`) must be a CSS ";e+="selector string, or a <canvas>, <image> or <video> object",h.default("warn","Texture '"+this.name+"': "+e,c),a.trigger("warning",{message:"Failed to load texture because "+e,texture:c})}return this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.valid&&(this.bind(),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,c.UNPACK_FLIP_Y_WEBGL!==!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),b instanceof HTMLCanvasElement||b instanceof HTMLVideoElement||b instanceof HTMLImageElement&&b.complete?(this.width=b.width,this.height=b.height,this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,b)):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,b),a.trigger("update",this))}},{key:"setFiltering",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.valid){b.filtering=b.filtering||"linear";var c=this.gl;this.bind(),j.default.isPowerOf2(this.width)&&j.default.isPowerOf2(this.height)?(this.power_of_2=!0,c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.TEXTURE_WRAP_S||b.repeat&&c.REPEAT||c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.TEXTURE_WRAP_T||b.repeat&&c.REPEAT||c.CLAMP_TO_EDGE),"mipmap"===b.filtering?(this.filtering="mipmap",c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR_MIPMAP_LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.generateMipmap(c.TEXTURE_2D)):"linear"===b.filtering?(this.filtering="linear",c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR)):"nearest"===b.filtering&&(this.filtering="nearest",c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST))):(this.power_of_2=!1,c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),"nearest"===b.filtering?(this.filtering="nearest",c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST)):(this.filtering="linear",c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR))),a.trigger("update",this)}}},{key:"calculateSprites",value:function(){if(this.sprites)for(var b in this.sprites){var c=this.sprites[b];this.texcoords[b]=a.getTexcoordsForSprite([c[0],c[1]],[c[2],c[3]],[this.width,this.height]),this.sizes[b]=[c[2],c[3]]}}}]),a}();c.default=o,o.create=function(a,b,c){return new o(a,b,c)},o.retain=function(a){o.textures[a]&&o.textures[a].retain()},o.release=function(a){o.textures[a]&&o.textures[a].release()},o.destroy=function(a){var b=Object.keys(o.textures);b.forEach(function(b){var c=o.textures[b];c.gl===a&&c.destroy({force:!0})})},o.getSpriteInfo=function(a,b){var c=o.textures[a];return c&&{size:c.sizes[b],texcoords:c.texcoords[b]}},o.getTexcoordsForSprite=function(a,b,c){var d=c[1]-a[1]-b[1];return[a[0]/c[0],d/c[1],(b[0]+a[0])/c[0],(b[1]+d)/c[1]]},o.createFromObject=function(a,b){var c=[];if(b)for(var d in b){var e=b[d];if(o.changed(d,e)){var f=o.create(a,d,e);c.push(f.loading)}}return Promise.all(c)},o.default="__default",o.createDefault=function(a){return o.create(a,o.default)},o.changed=function(a,b){var c=o.textures[a];if(c){if("element"===c.config_type||null!=b.element)return!0;if(o.texture_configs[a]===JSON.stringify(Object.assign({name:a},b)))return!1}return!0},o.getInfo=function(a){if(a||(a=Object.keys(o.textures)),Array.isArray(a))return Promise.all(a.map(function(a){return o.getInfo(a)}));var b=o.textures[a];if(b){var c=b.loading||Promise.resolve(b);return c.then(function(){return{name:b.name,width:b.width,height:b.height,sprites:b.sprites,texcoords:b.texcoords,sizes:b.sizes,filtering:b.filtering,power_of_2:b.power_of_2,valid:b.valid}})}return Promise.resolve(null)},o.syncTexturesToWorker=function(a){return n.default.postMessage("Texture.getInfo",a).then(function(a){return a.forEach(function(a){o.textures[a.name]=a}),o.textures})},o.getMaxTextureSize=function(a){return a.getParameter(a.MAX_TEXTURE_SIZE)},o.textures={},o.texture_configs={},o.boundTexture=null,o.activeUnit=null,n.default.addTarget("Texture",o),l.default(o)},{"../utils/log":260,"../utils/subscribe":265,"../utils/utils":268,"../utils/worker_broker":270}],210:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./extensions"),f=d(e),g=a("../utils/log"),h=d(g);c.default={disabled:!1,bound_vao:[],init:function(a){var b=void 0;this.disabled!==!0&&(b=f.default(a,"OES_vertex_array_object")),null!=b?h.default("info","Vertex Array Object extension available"):this.disabled!==!0?h.default("warn","Vertex Array Object extension NOT available"):h.default("warn","Vertex Array Object extension force disabled")},create:function(a,b,c){var d={};d.setup=b,d.teardown=c;var e=f.default(a,"OES_vertex_array_object");return null!=e&&(d._vao=e.createVertexArrayOES(),e.bindVertexArrayOES(d._vao)),d.setup(!0),d},getCurrentBinding:function(a){var b=this.bound_vao.filter(function(b){return b[0]===a})[0];return b&&b[1]},setCurrentBinding:function(a,b){var c=this.bound_vao,d=c.filter(function(b){return b[0]===a})[0];null==d?c.push([a,b]):d[1]=b},bind:function(a,b){var c=f.default(a,"OES_vertex_array_object");if(null!=b)null!=c&&null!=b._vao?(c.bindVertexArrayOES(b._vao),this.setCurrentBinding(a,b)):b.setup(!1);else{var d=this.getCurrentBinding(a);null!=c?c.bindVertexArrayOES(null):null!=d&&"function"==typeof d.teardown&&d.teardown(),this.setCurrentBinding(a,null)}},destroy:function(a,b){var c=f.default(a,"OES_vertex_array_object");null!=c&&null!=b&&null!=b._vao&&(c.deleteVertexArrayOES(b._vao),b._vao=null)}}},{"../utils/log":260,"./extensions":205}],211:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./shader_program"),h=d(g),i=a("./vao"),j=d(i),k=function(){
function a(b,c,d,f,g){e(this,a),g=g||{},this.gl=b,this.vertex_data=c,this.element_data=d,this.vertex_layout=f,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=g.draw_mode||this.gl.TRIANGLES,this.data_usage=g.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=g.uniforms,this.retain=g.retain||!1,this.created_at=+new Date,this.fade_in_time=g.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return f(a,[{key:"render",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.valid)return!1;var b=a.program||h.default.current;b.use(),this.uniforms&&(b.saveUniforms(this.uniforms),b.setUniforms(this.uniforms,!1));var c=(+new Date-this.created_at)/1e3;return b.uniform("1f","u_visible_time",c),this.bind(b),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),j.default.bind(this.gl,null),this.uniforms&&b.restoreUniforms(this.uniforms),c<this.fade_in_time}},{key:"bind",value:function(a){var b=this,c=this.vaos[a.id];c?j.default.bind(this.gl,c):this.vaos[a.id]=j.default.create(this.gl,function(c){b.gl.bindBuffer(b.gl.ARRAY_BUFFER,b.vertex_buffer),b.toggle_element_array&&b.gl.bindBuffer(b.gl.ELEMENT_ARRAY_BUFFER,b.element_buffer),b.vertex_layout.enable(b.gl,a,c)})}},{key:"destroy",value:function(){if(!this.valid)return!1;this.valid=!1;for(var a in this.vaos)j.default.destroy(this.gl,this.vaos[a]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,!0}}]),a}();c.default=k},{"./shader_program":208,"./vao":210}],212:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}Object.defineProperty(c,"__esModule",{value:!0});var h,i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./constants"),k=d(j),l=a("../utils/log"),m=d(l),n=a("./vertex_elements"),o=d(n),p=(h={},g(h,k.default.FLOAT,Float32Array),g(h,k.default.BYTE,Int8Array),g(h,k.default.UNSIGNED_BYTE,Uint8Array),g(h,k.default.INT,Int32Array),g(h,k.default.UNSIGNED_INT,Uint32Array),g(h,k.default.SHORT,Int16Array),g(h,k.default.UNSIGNED_SHORT,Uint16Array),h),q=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.prealloc,g=void 0===d?500:d;f(this,a),this.vertex_layout=b,this.vertex_elements=new o.default,a.array_pool.length>0?(this.vertex_buffer=a.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.vertex_layout.stride),m.default("trace","VertexData: reused buffer of bytes "+this.byte_length+", "+this.size+" vertices")):(this.size=g,this.byte_length=this.vertex_layout.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.components=[];for(var h=0;h<this.vertex_layout.components.length;h++)this.components.push([].concat(e(this.vertex_layout.components[h])));this.vertex_count=0,this.realloc_count=0,this.setBufferViews()}return i(a,[{key:"setBufferViews",value:function(){this.views={},this.views[k.default.UNSIGNED_BYTE]=this.vertex_buffer;for(var a=0;a<this.vertex_layout.attribs.length;a++){var b=this.vertex_layout.attribs[a];if(null==this.views[b.type]){var c=p[b.type];this.views[b.type]=new c(this.vertex_buffer.buffer)}}for(var d=0;d<this.components.length;d++){var e=this.components[d];e[1]=this.views[e[0]]}}},{key:"checkBufferSize",value:function(){if(this.offset+this.vertex_layout.stride>this.byte_length){this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.vertex_layout.stride*this.size;var b=new Uint8Array(this.byte_length);b.set(this.vertex_buffer),a.array_pool.push(this.vertex_buffer),this.vertex_buffer=b,this.setBufferViews(),this.realloc_count++}}},{key:"addVertex",value:function(a){this.checkBufferSize();for(var b=0,c=this.components.length,d=0;c>d;d++){var e=this.components[d];e[1][(this.offset>>e[2])+e[3]]=a[b++]}this.offset+=this.vertex_layout.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),m.default("trace","VertexData: "+this.size+" vertices total, realloc count "+this.realloc_count),this}}]),a}();c.default=q,q.array_pool=[]},{"../utils/log":260,"./constants":203,"./vertex_elements":213}],213:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){var c=b&&k?Uint32Array:Uint16Array;return new c(a)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../utils/worker_broker"),i=d(h),j=Math.pow(2,16)-1,k=!1,l=function(){function a(){e(this,a),this.array=[],this.has_overflown=!1}return g(a,[{key:"push",value:function(a){(!this.has_overflown||k)&&(a>j&&(this.has_overflown=!0,!k)||this.array.push(a))}},{key:"end",value:function(){if(this.array.length){var a=f(this.array,this.has_overflown);return this.array=[],this.has_overflown=!1,a}return!1}}]),a}();c.default=l,l.setUint32Flag=function(a){k=a},i.default.addTarget("VertexElements",l)},{"../utils/worker_broker":270}],214:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./constants"),h=d(g),i=a("./vertex_data"),j=d(i),k=function(){function a(b){e(this,a),this.attribs=b,this.components=[],this.index={},this.stride=0;for(var c=0,d=0;d<this.attribs.length;d++){var f=this.attribs[d];f.offset=this.stride,f.byte_size=f.size;var g=0;switch(f.type){case h.default.FLOAT:case h.default.INT:case h.default.UNSIGNED_INT:f.byte_size*=4,g=2;break;case h.default.SHORT:case h.default.UNSIGNED_SHORT:f.byte_size*=2,g=1}this.stride+=f.byte_size,3&this.stride&&(this.stride+=4-(3&this.stride));var i=f.offset>>g;if(f.size>1)for(var j=0;j<f.size;j++)this.components.push([f.type,null,g,i++]);else this.components.push([f.type,null,g,i]);this.index[f.name]=c,c+=f.size}}return f(a,[{key:"enable",value:function(b,c,d){for(var e,f,g=0;g<this.attribs.length;g++)e=this.attribs[g],f=c.attribute(e.name).location,-1!==f&&((!a.enabled_attribs[f]||d)&&b.enableVertexAttribArray(f),b.vertexAttribPointer(f,e.size,e.type,e.normalized,this.stride,e.offset),a.enabled_attribs[f]=c);for(f in a.enabled_attribs)this.disableUnusedAttribute(b,f,c)}},{key:"disableUnusedAttribute",value:function(b,c,d){a.enabled_attribs[c]!==d&&(b.disableVertexAttribArray(c),delete a.enabled_attribs[c])}},{key:"createVertexData",value:function(){return new j.default(this)}}]),a}();c.default=k,k.enabled_attribs={}},{"./constants":203,"./vertex_data":212}],215:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e,f=a("./repeat_group"),g=d(f),h=a("../utils/log"),i=d(h);c.default=e={tiles:{},startTile:function(a){var b=this.tiles[a]={bboxes:{aabb:[],obb:[]},objects:{},keep:{},styles:{}};b.complete=new Promise(function(a,c){b.resolve=a,b.reject=c})},resetTile:function(a){delete this.tiles[a]},addStyle:function(a,b){this.tiles[b].styles[a]=!0},collide:function(a,b,c){var d=this.tiles[c];if(!d)return i.default("trace","Collision.collide() called with null tile",c,this.tiles,b,a),Promise.resolve([]);for(var e=d.objects,f=0;f<a.length;f++){var g=a[f],h=g.label.layout.priority;e[h]=e[h]||{},e[h][b]=e[h][b]||[],e[h][b].push(g)}return delete d.styles[b],0===Object.keys(d.styles).length&&this.endTile(c),d.complete.then(function(){return d.keep[b]||[]})},endTile:function(a){var b=this.tiles[a],c=b.keep;g.default.clear(a);for(var d=Object.keys(b.objects).sort(function(a,b){return a-b}),e=0;e<d.length;e++){var f=b.objects[d[e]];if(f)for(var h in f){var i=f[h];c[h]=c[h]||[];for(var j=0;j<i.length;j++){var k=i[j];this.canBePlaced(k,a,k.linked)&&(k.linked?this.canBePlaced(k.linked,a,k)&&(c[h].push(k),this.place(k,a),this.place(k.linked,a)):(c[h].push(k),this.place(k,a)))}}}delete this.tiles[a],b.resolve()},canBePlaced:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=a.label,e=a.label.layout;if(null!=d.placed)return d.placed;var f=this.tiles[b].bboxes;if(e.collide&&d.discard(f,c&&c.label))e.collide&&(d.placed=!1);else{var h=g.default.check(d,e,b);if(!h)return!0;d.placed=!1}return d.placed},place:function(a,b){var c=a.label;null==c.placed&&(g.default.add(c,c.layout,b),c.add(this.tiles[b].bboxes))}}},{"../utils/log":260,"./repeat_group":222}],216:[function(a,b,c){"use strict";function d(a,b){return!(a[2]<b[0]||a[0]>b[2]||a[3]<b[1]||a[1]>b[3])}function e(a,b,c){for(var e=0;e<b.length&&(!d(a,b[e])||null==c(e));e++);}Object.defineProperty(c,"__esModule",{value:!0}),c.boxIntersectsBox=d,c.boxIntersectsList=e},{}],217:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./point_anchor"),h=d(g),i=a("./intersect"),j=a("../utils/utils"),k=d(j),l=a("../utils/obb"),m=d(l),n=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,a),this.size=b,this.layout=c,this.position=null,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.offset=c.offset,this.aabb=null,this.obb=null,this.align="center",this.throw_away=!1}return f(a,[{key:"update",value:function(){this.align=this.layout.align||h.default.alignForAnchor(this.anchor)}},{key:"occluded",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=!1,e=a.aabb,f=a.obb;return e.length>0&&i.boxIntersectsList(this.aabb,e,function(a){return c&&e[a]===c.aabb?void 0:0===b.obb.angle&&0===f[a].angle?(d=!0,!0):m.default.intersect(b.obb,f[a])?(d=!0,!0):void 0}),d}},{key:"add",value:function(a){this.placed=!0,a.aabb.push(this.aabb),a.obb.push(this.obb)}},{key:"inTileBounds",value:function(){var a=[this.aabb[0],this.aabb[1]],b=[this.aabb[2],this.aabb[3]];return!(!k.default.pointInTile(a)||!k.default.pointInTile(b))}},{key:"discard",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!!this.throw_away||this.occluded(a,b)}}]),a}();c.default=n,n.epsilon=.9999},{"../utils/obb":263,"../utils/utils":268,"./intersect":216,"./point_anchor":220}],218:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){return b/a}function i(a,b){var c=r.default.sub(b,a);return r.default.angle(c)}function j(a,b){return-i(a,b)}function k(a){for(var b=[],c=0;c<a.length-1;c++){var d=a[c],e=a[c+1],f=Math.hypot(d[0]-e[0],d[1]-e[1]);b.push(f)}return b}function l(a,b){var c=void 0,d=void 0;for(a>b?(c=b,d=a):(c=a,d=b);d-c>Math.PI;)c+=2*Math.PI;return Math.abs(d-c)}Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=a("./label"),p=d(o),q=a("../vector"),r=d(q),s=a("../utils/obb"),t=d(s),u=[0,.33,.66,.99],v=1.5,w=1.8,x=2.3,y=.1,z=1.3,A=.4,B=1,C=1.2,D=.01,E={create:function(a,b,c,d){for(var e=[{type:"straight",tolerance:d.no_curving?w:v},{type:"curved"},{type:"straight",tolerance:x}],f=0;f<e.length;f++){var g=e[f],h=void 0;if("straight"===g.type?h=new G(b,c,d,g.tolerance):"curved"===g.type&&!d.no_curving&&c.length>2&&(h=new H(a,c,d)),h&&!h.throw_away)return h}return!1}};c.default=E;var F=function(){function a(b){g(this,a),this.layout=b,this.position=[],this.angle=0,this.offset=b.offset.slice(),this.obbs=[],this.aabbs=[],this.type=""}return n(a,[{key:"add",value:function(a){this.placed=!0;for(var b=0;b<this.aabbs.length;b++){var c=this.aabbs[b],d=this.obbs[b],e={aabb:c,obb:d};p.default.prototype.add.call(e,a)}}},{key:"discard",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.throw_away)return!0;for(var c=0;c<this.obbs.length;c++){var d=this.aabbs[c],e=this.obbs[c],f={aabb:d,obb:e},g=p.default.prototype.occluded.call(f,a,b);if(g)return!0}return!1}},{key:"inTileBounds",value:function(){for(var a=0;a<this.aabbs.length;a++){var b=this.aabbs[a],c={aabb:b},d=p.default.prototype.inTileBounds.call(c);if(!d)return!1}return!0}}],[{key:"splitLineByOrientation",value:function(a){for(var b=[a[0]],c=0,d=0,e=0,f=b,g=!1,h=1;h<a.length;h++){var i=a[h],j=a[h-1],k=r.default.length(r.default.sub(i,j));i[0]>j[0]?1===e?(b.push(i),c+=k,c>d&&(f=b,d=c,g=!1)):(b=[j,i],c=k,c>d&&(f=b,d=c,g=!1),e=1):i[0]<j[0]?-1===e?(b.unshift(i),c+=k,c>d&&(f=b,d=c,g=!0)):(b=[i,j],c=k,c>d&&(f=b,d=c,g=!0),e=-1):(-1===e?b.unshift(i):(b.push(i),e=1),c+=k,c>d&&(f=b,d=c,g=-1===e))}return[f,g]}},{key:"createOBB",value:function(a,b,c,d,e,f,g){var h=a[0],i=a[1];return!f||0===f[0]&&0===f[1]||(f=r.default.rot(f,e),h+=f[0]*g,i-=f[1]*g),new t.default(h,i,-d,b,c)}}]),a}(),G=function(a){function b(a,c,d,f){g(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d));return h.type="straight",h.throw_away=!h.fit(a,c,d,f),h}return f(b,a),n(b,[{key:"fit",value:function(a,b,c,d){var e=c.units_per_pixel,f=void 0,g=F.splitLineByOrientation(b),j=m(g,2);b=j[0],f=j[1],"number"==typeof c.orientation&&(this.offset[1]+=C*(a[1]-c.vertical_buffer));var n=this.offset.slice();f&&(this.offset[1]*=-1),-1===c.orientation&&(this.offset[1]*=-1);for(var o=k(b),p=a[0]*e,q=0;q<b.length-1;q++)for(var s=b[q],t=0,u=0,v=q+1,w=void 0;v<b.length;){var x=b[v-1],z=b[v],A=i(x,z);if(v!==q+1&&(t+=l(A,w)),Math.abs(t)>y)break;if(u+=o[v-1],h(u,p)<d){var B=r.default.mult(r.default.add(s,z),.5);this.angle=-A;var E=this.angle;if(f&&(E+=Math.PI),-1===c.orientation&&(E+=Math.PI),Math.abs(this.angle-Math.PI/2)<D&&(this.angle=-Math.PI/2,n[1]*=-1,this.offset[1]*=-1),this.position=B,this.updateBBoxes(this.position,a,this.angle,E,n),this.inTileBounds())return!0}w=A,v++}return!1}},{key:"updateBBoxes",value:function(a,b,c,d,e){var f=this.layout.units_per_pixel;this.obbs=[],this.aabbs=[];var g=(b[0]+2*this.layout.buffer[0])*f*p.default.epsilon,h=(b[1]+2*this.layout.buffer[1])*f*p.default.epsilon,i=F.createOBB(a,g,h,c,d,e,f),j=i.getExtent();this.obbs.push(i),this.aabbs.push(j)}}]),b}(F),H=function(a){function b(a,c,d){g(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d));return f.type="curved",f.angles=[],f.pre_angles=[],f.offsets=[],f.num_segments=a.length,f.throw_away=!f.fit(a,c,d),f}return f(b,a),n(b,[{key:"fit",value:function(a,c,d){var e=d.units_per_pixel,f=void 0,g=F.splitLineByOrientation(c),h=m(g,2);c=h[0],f=h[1],"number"==typeof d.orientation&&(this.offset[1]+=C*(a[1]-d.vertical_buffer));var i=this.offset.slice();f&&(this.offset[1]*=-1),-1===d.orientation&&(this.offset[1]*=-1);var j=k(c),l=a.map(function(a){return a[0]*e}),n=j.reduce(function(a,b){return a+b},0),o=l.reduce(function(a,b){return a+b},0);if(o>n)return!1;var p=a[0][1]*e,q=b.checkTileBoundary(c,j,p,this.offset,e),r=m(q,2),s=r[0],t=r[1];if(2>t-s)return!1;var v=b.curvaturePlacement(c,n,j,o,s,t);if(-1===v||2>t-v)return!1;var w=c[v];this.position=w;for(var x=0;x<l.length;x++){this.offsets[x]=[],this.angles[x]=[],this.pre_angles[x]=[];for(var y=0;y<u.length;y++){var z=u[y],A=b.scaleLine(z,c),B=m(A,2),D=B[0],E=B[1];w=D[v];var G=b.placeAtIndex(v,D,E,l),H=G.positions,I=G.offsets,J=G.angles,K=G.pre_angles,L=I.map(function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])/e});if(this.angle=1/J.length*J.reduce(function(a,b){return a+b}),0===z)for(var M=0;M<H.length;M++){var N=H[M],O=K[M],P=l[M],Q=O+J[M],R=this.angle;f&&(R+=Math.PI),-1===d.orientation&&(R+=Math.PI);var S=b.createOBB(N,P,p,i,R,Q,e),T=S.getExtent();this.obbs.push(S),this.aabbs.push(T)}this.offsets[x].push(L[x]),this.angles[x].push(J[x]),this.pre_angles[x].push(K[x])}}return!0}}],[{key:"checkTileBoundary",value:function(a,b,c,d,e){var f=0,g=a.length-1;c*=p.default.epsilon;for(var h=b[f]*p.default.epsilon,j=b[b.length-1]*p.default.epsilon;g>f;){var k=i(a[f],a[f+1]),l=r.default.add(r.default.rot([h/2,0],k),a[f]),m=F.createOBB(l,h,c,-k,-k,d,e),n=m.getExtent(),o=p.default.prototype.inTileBounds.call({aabb:n});if(o)break;f++}for(;g>f;){var q=i(a[g-1],a[g]),s=r.default.add(r.default.rot([-j/2,0],q),a[g]),t=F.createOBB(s,j,c,-q,-q,d,e),u=t.getExtent(),v=p.default.prototype.inTileBounds.call({aabb:u});if(v)break;g--}return[f,g]}},{key:"curvaturePlacement",value:function(a,b,c,d,e,f){e=e||0,f=f||a.length-1;for(var g=[],h=e+1;f>h;h++){var i=a[h-1],j=a[h],k=a[h+1],l=r.default.perp(j,i),m=r.default.perp(k,j),n=r.default.angleBetween(l,m);n>B&&(n=1/0),g.push(n)}g.push(1/0);for(var o=[],p=[],q=e,s=0,t=0;e>t;t++)s+=c[t];for(;b>s+d;){for(var u=s,v=u+d,w=u,x=q,y=0;f>x&&w+c[x]<v&&(y+=g[x],1/0!==y);)w+=c[x],x++;if(0===y)return q;var C=y/(x-q);o.push(y),p.push(C),s+=c[q],q++}if(0===o.length)return-1;var D=Math.min.apply(null,o),E=o.indexOf(D),F=p[E];return z>D&&A>F?o.indexOf(D):-1}},{key:"scaleLine",value:function(a,b){var c=[b[0]],d=[];return b.forEach(function(e,f){if(f!==b.length-1){var g=r.default.sub(b[f+1],b[f]),h=r.default.mult(g,1+a);c.push(r.default.add(c[f],h)),d.push(r.default.length(h))}}),[c,d]}},{key:"placeAtIndex",value:function(a,c,d,e){var f=c[a],g=b.getIndicesAndOffsets(a,d,e),h=m(g,2),i=h[0],j=h[1],k=b.getPositionsFromIndicesAndOffsets(c,i,j),l=b.getAnglesFromIndicesAndOffsets(f,i,c,k),n=m(l,3),o=n[0],p=n[1],q=n[2];return{positions:k,offsets:o,angles:p,pre_angles:q}}},{key:"getIndicesAndOffsets",value:function(a,b,c){for(var d=c.length,e=[],f=[],g=0,h=0,i=0;d>g;){for(var j=c[g];d>g&&h+.5*j<=i+b[a];){var k=h-i+.5*j;f.push(k),e.push(a),h+=j,g++,j=c[g]}i+=b[a],a++}return[e,f]}},{key:"getPositionsFromIndicesAndOffsets",value:function(a,b,c){for(var d=[],e=0;e<b.length;e++){var f=b[e],g=c[e],h=i(a[f],a[f+1]),j=r.default.rot([g,0],h),k=r.default.add(a[f],j);d.push(k)}return d}},{key:"getAnglesFromIndicesAndOffsets",value:function(a,b,c,d){for(var e=[],f=[],g=[],h=0;h<d.length;h++){var i=d[h],k=b[h],l=r.default.sub(i,a),m=-r.default.angle(l),n=j(c[k],c[k+1]),o=n-m;if(h>0){var p=e[h-1],q=f[h-1];Math.abs(m-p)>Math.PI&&(m+=m>p?-2*Math.PI:2*Math.PI),Math.abs(q-o)>Math.PI&&(o+=o>q?-2*Math.PI:2*Math.PI)}e.push(m),f.push(o),g.push(l)}return[g,e,f]}},{key:"createOBB",value:function(a,b,c,d,e,f,g){var h=a[0],i=a[1];return!d||0===d[0]&&0===d[1]||(d=r.default.rot(d,e),h+=d[0]*g,i-=d[1]*g),new t.default(h,i,-f,b,c)}}]),b}(F)},{"../utils/obb":263,"../vector":271,"./label":217}],219:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},j=a("./label"),k=d(j),l=a("./point_anchor"),m=d(l),n=a("../geo"),o=d(n),p=a("../utils/obb"),q=d(p),r=a("../styles/style_parser"),s=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,d));return g.position=[a[0],a[1]],g.parent=g.layout.parent,g.update(),g.start_anchor_index=1,g.degenerate=!(g.size[0]||g.size[1]||g.layout.buffer[0]||g.layout.buffer[1]),g.throw_away=!g.getNextFit(),g}return g(b,a),h(b,[{key:"update",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"update",this).call(this),this.computeOffset(),this.updateBBoxes()}},{key:"computeOffset",value:function(){if(this.offset=[this.layout.offset[0],this.layout.offset[1]],this.parent){var a=this.parent;this.offset=m.default.computeOffset(this.offset,a.size,a.anchor,m.default.zero_buffer),this.offset=m.default.computeOffset(this.offset,a.size,this.anchor,m.default.zero_buffer),a.offset!==r.StyleParser.zeroPair&&(this.offset===r.StyleParser.zeroPair?this.offset=a.offset:(this.offset[0]+=a.offset[0],this.offset[1]+=a.offset[1]))}this.offset=m.default.computeOffset(this.offset,this.size,this.anchor)}},{key:"updateBBoxes",value:function(){var a=(this.size[0]+2*this.layout.buffer[0])*this.layout.units_per_pixel*k.default.epsilon,b=(this.size[1]+2*this.layout.buffer[1])*this.layout.units_per_pixel*k.default.epsilon;this.layout.italic&&(a+=5*this.layout.units_per_pixel);var c=[this.position[0]+this.offset[0]*this.layout.units_per_pixel,this.position[1]-this.offset[1]*this.layout.units_per_pixel];this.obb=new q.default(c[0],c[1],0,a,b),this.aabb=this.obb.getExtent()}},{key:"moveIntoTile",value:function(){var a=!1;return this.aabb[0]<0&&(this.position[0]+=-this.aabb[0],a=!0),this.aabb[2]>=o.default.tile_scale&&(this.position[0]-=this.aabb[2]-o.default.tile_scale+1,a=!0),this.aabb[3]>0&&(this.position[1]-=this.aabb[3],a=!0),this.aabb[1]<=-o.default.tile_scale&&(this.position[1]-=this.aabb[1]+o.default.tile_scale-1,a=!0),a&&this.updateBBoxes(),a}},{key:"getNextFit",value:function(){if(!this.layout.cull_from_tile||this.inTileBounds())return!0;if(this.layout.move_into_tile)return this.moveIntoTile(),!0;if(Array.isArray(this.layout.anchor))for(var a=1;a<this.layout.anchor.length;a++)if(this.anchor=this.layout.anchor[a],this.update(),this.start_anchor_index=a,this.inTileBounds())return!0;return!1}},{key:"discard",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.degenerate)return!1;if(i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"discard",this).call(this,a,c)){if(Array.isArray(this.layout.anchor))for(var d=this.start_anchor_index;d<this.layout.anchor.length;d++)if(this.anchor=this.layout.anchor[d],this.update(),(!this.layout.cull_from_tile||this.inTileBounds())&&!i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"discard",this).call(this,a,c))return!1;return!0}return!1}}]),b}(k.default);c.default=s,s.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3}},{"../geo":202,"../styles/style_parser":246,"../utils/obb":263,"./label":217,"./point_anchor":220}],220:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=["left","top-left","bottom-left"],e=["right","top-right","bottom-right"],f=["top","top-left","top-right"],g=["bottom","bottom-left","bottom-right"],h=void 0;c.default=h={computeOffset:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!c||"center"===c)return a;var e=[a[0],a[1]];return d=d||this.default_buffer,this.isLeftAnchor(c)?(e[0]-=b[0]/2,"left"===c&&(e[0]-=d[0])):this.isRightAnchor(c)&&(e[0]+=b[0]/2,"right"===c&&(e[0]+=d[1])),this.isTopAnchor(c)?(e[1]-=b[1]/2,"top"===c&&(e[1]-=d[2])):this.isBottomAnchor(c)&&(e[1]+=b[1]/2,"bottom"===c&&(e[1]+=d[3])),e},alignForAnchor:function(a){if(a&&"center"!==a){if(this.isLeftAnchor(a))return"right";if(this.isRightAnchor(a))return"left"}return"center"},isLeftAnchor:function(a){return d.indexOf(a)>-1},isRightAnchor:function(a){return e.indexOf(a)>-1},isTopAnchor:function(a){return f.indexOf(a)>-1},isBottomAnchor:function(a){return g.indexOf(a)>-1},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]}},{}],221:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=[],e=c.placement,h=Math.max(b[0],b[1])*c.placement_min_length_ratio*c.units_per_pixel;switch(e){case o.SPACED:var j=f(a,h,c);if(!j)return[];for(var k=j.positions,l=j.angles,p=0;p<k.length;p++){var q=k[p],r=l[p];if(c.tile_edges===!0||!n.isCoordOutsideTile(q)){var s=new m.default(q,b,c);s.angle=r,d.push(s)}}break;case o.VERTEX:for(var t=void 0,u=void 0,v=void 0,w=0;w<a.length-1;w++)t=a[w],u=a[w+1],c.tile_edges!==!0&&n.isCoordOutsideTile(t)||(v=new m.default(t,b,c),v.angle=g(t,u,c.angle),d.push(v));v=new m.default(u,b,c),v.angle=g(t,u,c.angle),d.push(v);break;case o.MIDPOINT:for(var x=0;x<a.length-1;x++){var y=a[x],z=a[x+1],A=[.5*(y[0]+z[0]),.5*(y[1]+z[1])];if((c.tile_edges===!0||!n.isCoordOutsideTile(A))&&(!h||i(y,z)>h)){var B=new m.default(A,b,c);B.angle=g(y,z,c.angle),d.push(B)}}}return d}function f(a,b,c){var d=c.units_per_pixel,e=(c.placement_spacing||p)*d,f=h(a);if(b>=f)return!1;for(var g=Math.max(Math.floor(f/e),1),i=f-(g-1)*e,k=[],l=[],m=.5*i,n=0;g>n;n++){var o=j(a,m,b,c),q=o.position,r=o.angle;null!=q&&null!=r&&(k.push(q),l.push(r)),m+=e}return{positions:k,angles:l}}function g(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"auto"===c?Math.atan2(b[0]-a[0],b[1]-a[1]):c}function h(a){for(var b=0,c=0;c<a.length-1;c++)b+=i(a[c],a[c+1]);return b}function i(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function j(a,b,c,d){for(var e=0,f=void 0,h=void 0,j=0;j<a.length-1;j++){var l=a[j],m=a[j+1],n=i(l,m);if(!(c>=n)&&(e+=n,e>b)){f=k(l,m,e-b),h=g(l,m,d.angle);break}}return{position:f,angle:h}}function k(a,b,c){var d=i(a,b),e=c/d;return[e*a[0]+(1-e)*b[0],e*a[1]+(1-e)*b[1]]}Object.defineProperty(c,"__esModule",{value:!0}),c.default=e;var l=a("./label_point"),m=d(l),n=a("../builders/common"),o=m.default.PLACEMENT,p=80},{"../builders/common":197,"./label_point":219}],222:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../geo"),h=d(g),i=function(){function a(b,c,d){e(this,a),this.key=b,this.repeat_dist=c,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.max_repeat_dist_sq=d*d,this.one_per_group=this.repeat_dist_sq>=this.max_repeat_dist_sq,this.positions=[]}return f(a,[{key:"check",value:function(a){if(this.one_per_group){if(this.positions.length>0)return{dist_sq:this.max_repeat_dist_sq,repeat_dist_sq:this.repeat_dist_sq,one_per_group:this.one_per_group}}else for(var b=a.position,c=0;c<this.positions.length;c++){var d=this.positions[c],e=b[0]-d[0],f=b[1]-d[1],g=e*e+f*f;if(g<this.repeat_dist_sq)return{dist_sq:g,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(a){a&&a.position&&this.positions.push(a.position)}}],[{key:"clear",value:function(a){this.groups[a]={}}},{key:"check",value:function(a,b,c){return b.repeat_distance&&b.repeat_group&&this.groups[c][b.repeat_group]?this.groups[c][b.repeat_group].check(a):void 0}},{key:"add",value:function(b,c,d){c.repeat_distance&&c.repeat_group&&(null==this.groups[d][c.repeat_group]&&(this.groups[d][c.repeat_group]=new a(c.repeat_group,c.repeat_distance,a.max_repeat_dist)),this.groups[d][c.repeat_group].add(b))}}]),a}();c.default=i,i.groups={},i.max_repeat_dist=h.default.tile_scale},{"../geo":202}],223:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return f(a)}function f(a){if("undefined"!=typeof p)return new p(a);if(i.default.is_main){var b=function(){var b=a.leaflet||window.L,d=b.GridLayer?b.GridLayer:b.TileLayer,e=d===b.GridLayer?"1.x":"0.7.x",f={},g=void 0,h=void 0;return d===b.TileLayer&&(f._addTile=function(){},f._removeTile=function(){},f._reset=function(){d.prototype._reset.apply(this,arguments),this.scene&&this.scene.container&&this.scene.canvas&&this.scene.container.appendChild(this.scene.canvas)}),Object.assign(f,{initialize:function(a){a.showDebug=!!a.showDebug,b.setOptions(this,a),this.createScene(),this.hooks={},this._updating_tangram=!1,this._zoomAnimated=!1},createScene:function(){this.scene=k.default.create(this.options.scene,{numWorkers:this.options.numWorkers,preUpdate:this.options.preUpdate,postUpdate:this.options.postUpdate,continuousZoom:"1.x"===p.leafletVersion,wrapView:this.options.noWrap!==!0,highDensityDisplay:this.options.highDensityDisplay,logLevel:this.options.logLevel,introspection:this.options.introspection,
webGLContextOptions:this.options.webGLContextOptions,disableRenderLoop:this.options.disableRenderLoop})},onAdd:function(a){var b=this;this.scene||this.createScene(),d.prototype.onAdd.apply(this,arguments),this.hooks.resize=function(){b._updating_tangram=!0,b.updateSize(),b._updating_tangram=!1},a.on("resize",this.hooks.resize),this.hooks.move=function(){if(!b._updating_tangram){b._updating_tangram=!0,b.scene.view.setPanning(!0);var c=a.getCenter();c.zoom=Math.max(Math.min(a.getZoom(),a.getMaxZoom()||m.default.default_view_max_zoom),a.getMinZoom()),b.scene.view.setView(c),b._mapLayerCount>1&&b.scene.immediateRedraw(),b.reverseTransform(),b._updating_tangram=!1}},a.on("move",this.hooks.move),this.hooks.zoomstart=function(){b._updating_tangram||(b._updating_tangram=!0,b.scene.view.startZoom(),b._updating_tangram=!1)},a.on("zoomstart",this.hooks.zoomstart),this.hooks.moveend=function(){b.scene.view.setPanning(!1),b.scene.requestRedraw()},a.on("moveend",this.hooks.moveend),this.modifyScrollWheelBehavior(a),this.modifyDoubleClickZoom(a),h=o.default(function(a){a._moveEnd(!0),a.fire("viewreset")},2*a.options.wheelDebounceTime),this.trackMapLayerCounts(a),this.setupSelectionEventHandlers(a),this.setSelectionEvents(this.options.events),this.scene.container=this.getContainer(),this.updateSize(),this.updateView(),this.resizeOnFirstVisible(),this.scene.subscribe({move:this.onTangramViewUpdate.bind(this)}),this.scene.load(this.options.scene,{config_path:this.options.sceneBasePath,blocking:!1}).then(function(){b._updating_tangram=!0,b.updateSize(),b.updateView(),b.reverseTransform(),b._updating_tangram=!1,b.fire("init")}).catch(function(a){b.fire("error",a)})},onRemove:function(a){d.prototype.onRemove.apply(this,arguments),a.off("layeradd layerremove overlayadd overlayremove",this._updateMapLayerCount),a.off("resize",this.hooks.resize),a.off("move",this.hooks.move),a.off("zoomstart",this.hooks.zoomstart),a.off("moveend",this.hooks.moveend),a.off("click",this.hooks.click),a.off("mousemove",this.hooks.mousemove),a.off("mouseout",this.hooks.mouseout),document.removeEventListener("visibilitychange",this.hooks.visibilitychange),this.hooks={},this.scene&&(this.scene.destroy(),this.scene=null)},createTile:function(a){var b=a.x+"/"+a.y+"/"+a.z,c=document.createElement("div");if(c.setAttribute("data-tile-key",b),c.style.width="256px",c.style.height="256px",this.options.showDebug){var d=document.createElement("div");d.textContent=b,d.style.position="absolute",d.style.left=0,d.style.top=0,d.style.color="white",d.style.fontSize="16px",d.style.textOutline="1px #000000",d.style.padding="8px",c.appendChild(d),c.style.borderStyle="solid",c.style.borderColor="white",c.style.borderWidth="1px"}return c},modifyScrollWheelBehavior:function(a){if(this.scene.view.continuous_zoom&&a.scrollWheelZoom&&this.options.modifyScrollWheel!==!1){a.options.zoomSnap=0;var c=a.scrollWheelZoom.enabled();a.scrollWheelZoom.disable(),b.Browser.chrome||b.Browser.safari?a.scrollWheelZoom._onWheelScroll=function(a){var c=b.DomEvent.getWheelDelta(a);this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._performZoom(),b.DomEvent.stop(a)}:a.options.wheelDebounceTime=20,a.scrollWheelZoom._performZoom=function(){var a=this._map,b=a.getZoom();a._stop();var c=this._delta/(4*this._map.options.wheelPxPerZoomLevel);this._delta=0,b+c>=this._map.getMaxZoom()?c=this._map.getMaxZoom()-b:b+c<=this._map.getMinZoom()&&(c=this._map.getMinZoom()-b),c&&("center"===a.options.scrollWheelZoom?g(a,a.getCenter(),b+c):g(a,this._lastMousePos,b+c),h(a))},c&&a.scrollWheelZoom.enable()}},modifyDoubleClickZoom:function(a){this.scene.view.continuous_zoom&&a.doubleClickZoom&&this.options.modifyDoubleClickZoom!==!1&&!function(){var c=function(a,c,d,e){function f(){var e=(Date.now()-k)/l;if(1>=e){a._flyToFrame=b.Util.requestAnimFrame(f,a);var n=i.add(j.subtract(i).multiplyBy(e));n=[n.x,n.y],n=m.default.metersToLatLng(n),g(a,c,h+(d-h)*e)}else g(a,c,d)._moveEnd(!0)}if(e=e||{},e.animate===!1||!b.Browser.any3d)return a.setView(c,d,e);a._stop();var h=a._zoom;c=b.latLng(c),d=void 0===d?h:d,d=Math.min(d,a.getMaxZoom());var i=a.project(a.getCenter(),h),j=a.project(c,h),k=Date.now(),l=e.duration?1e3*e.duration:75;return a._moveStart(!0),f.call(a),a},d=a.doubleClickZoom.enabled();a.doubleClickZoom.disable(),a.doubleClickZoom._onDoubleClick=function(a){var b=this._map,d=b.getZoom(),e=b.options.zoomDelta,f=a.originalEvent.shiftKey?d-e:d+e;"center"===b.options.doubleClickZoom?c(b,b.getCenter(),f):c(b,b.containerPointToLatLng(a.containerPoint),f)},d&&a.doubleClickZoom.enable()}()},updateView:function(){var a=this._map.getCenter();a.zoom=Math.max(Math.min(this._map.getZoom(),this._map.getMaxZoom()||m.default.default_view_max_zoom),this._map.getMinZoom()),this.scene.view.setView(a)},updateSize:function(){var a=this._map.getSize();this.scene.resizeMap(a.x,a.y)},resizeOnFirstVisible:function(){var a=this,b=!0;this.hooks.visibilitychange=function(){b&&(b=!1,a.updateSize())},document.addEventListener("visibilitychange",this.hooks.visibilitychange)},onTangramViewUpdate:function(){if(this._map&&!this._updating_tangram){var a=this._map.getCenter(),b=this.scene.view.center;(a.lng!==b.lng||a.lat!==b.lat||this._map.getZoom()!==this.scene.view.zoom)&&(this._updating_tangram=!0,this._map.setView([this.scene.view.center.lat,this.scene.view.center.lng],this.scene.view.zoom,{animate:!1}),this.reverseTransform(),this._updating_tangram=!1)}},render:function(){this.scene&&this.scene.update()},reverseTransform:function(){if(this._map&&this.scene&&this.scene.container){var a=this._map.containerPointToLayerPoint([0,0]);b.DomUtil.setPosition(this.scene.container,a)}},setupSelectionEventHandlers:function(a){var b=this;this._selection_events={},this.hooks.click=function(a){"function"==typeof b._selection_events.click&&b.scene.getFeatureAt(a.containerPoint).then(function(c){var d=Object.assign({},c,{leaflet_event:a});b._selection_events.click(d)})},a.on("click",this.hooks.click),this.hooks.mousemove=function(a){"function"==typeof b._selection_events.hover&&b.scene.getFeatureAt(a.containerPoint).then(function(c){var d=Object.assign({},c,{leaflet_event:a});b._selection_events.hover(d)})},a.on("mousemove",this.hooks.mousemove),this.hooks.mouseout=function(a){"function"==typeof b._selection_events.hover&&b._selection_events.hover({changed:!0,leaflet_event:a})},a.on("mouseout",this.hooks.mouseout)},setSelectionEvents:function(a){this._selection_events=Object.assign(this._selection_events,a)},trackMapLayerCounts:function(a){var b=this;this._updateMapLayerCount=function(){var c=a.getPanes().mapPane.childNodes;b._mapLayerCount=0;for(var d=0;d<c.length;d++)b._mapLayerCount+=c[d].childNodes.length},a.on("layeradd layerremove overlayadd overlayremove",this._updateMapLayerCount),this._updateMapLayerCount()}}),g=function(a,c,d){var e=a.getZoomScale(d),f=a.getSize().divideBy(2),g=c instanceof b.Point?c:a.latLngToContainerPoint(c),h=g.subtract(f).multiplyBy(1-1/e),i=a.containerPointToLatLng(f.add(h));return a._move(i,d,{flyTo:!0})},c.LeafletLayer=p=d.extend(f),"function"!=typeof p.remove&&(p.prototype.remove=function(){this._map&&this._map.removeLayer(this),this.fire("remove")}),p.layerBaseClass=d,p.leafletVersion=e,{v:new p(a)}}();if("object"===("undefined"==typeof b?"undefined":g(b)))return b.v}}Object.defineProperty(c,"__esModule",{value:!0}),c.LeafletLayer=void 0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};c.leafletLayer=e;var h=a("./utils/thread"),i=d(h),j=a("./scene"),k=d(j),l=a("./geo"),m=d(l),n=a("./utils/debounce"),o=d(n),p=c.LeafletLayer=void 0},{"./geo":202,"./scene":227,"./utils/debounce":255,"./utils/thread":266}],224:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=a("./gl/shader_program"),l=d(k),m=a("./gl/glsl"),n=d(m),o=a("./geo"),p=d(o),q=a("./vector"),r=d(q),s=a("./styles/style_parser"),t="/*\n\nExpected globals:\nlight_accumulator_*\n\n*/\n\nstruct AmbientLight {\n    vec3 ambient;\n};\n\nvoid calculateLight(in AmbientLight _light, in vec3 _eyeToPoint, in vec3 _normal) {\n    light_accumulator_ambient.rgb += _light.ambient;\n}\n",u="/*\n\nExpected globals:\nmaterial\nlight_accumulator_*\n\n*/\n\nstruct DirectionalLight {\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n    vec3 direction;\n};\n\nvoid calculateLight(in DirectionalLight _light, in vec3 _eyeToPoint, in vec3 _normal) {\n\n    light_accumulator_ambient.rgb += _light.ambient;\n\n    float nDotVP = clamp(dot(_normal, -_light.direction), 0.0, 1.0);\n\n    #ifdef TANGRAM_MATERIAL_DIFFUSE\n        light_accumulator_diffuse.rgb += _light.diffuse * nDotVP;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_SPECULAR\n        float pf = 0.0;\n        if (nDotVP > 0.0) {\n            vec3 reflectVector = reflect(_light.direction, _normal);\n            float eyeDotR = max(dot(normalize(_eyeToPoint), reflectVector), 0.0);\n            pf = pow(eyeDotR, material.shininess);\n        }\n        light_accumulator_specular.rgb += _light.specular * pf;\n    #endif\n}\n",v="/*\n\nExpected globals:\nmaterial\nlight_accumulator_*\n\n*/\n\nstruct PointLight {\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n    vec4 position;\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\n    float attenuationExponent;\n#endif\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n    float innerRadius;\n#endif\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n    float outerRadius;\n#endif\n};\n\nvoid calculateLight(in PointLight _light, in vec3 _eyeToPoint, in vec3 _normal) {\n\n    float dist = length(_light.position.xyz - _eyeToPoint);\n\n    // Compute vector from surface to light position\n    vec3 VP = (_light.position.xyz - _eyeToPoint) / dist;\n\n    // Normalize the vector from surface to light position\n    float nDotVP = clamp(dot(VP, _normal), 0.0, 1.0);\n\n    // Attenuation defaults\n    float attenuation = 1.0;\n    #ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\n        float Rin = 1.0;\n        float e = _light.attenuationExponent;\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n            Rin = _light.innerRadius;\n        #endif\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n            float Rdiff = _light.outerRadius-Rin;\n            float d = clamp(max(0.0,dist-Rin)/Rdiff, 0.0, 1.0);\n            attenuation = 1.0-(pow(d,e));\n        #else\n            // If no outer is provide behaves like:\n            // https://imdoingitwrong.wordpress.com/2011/01/31/light-attenuation/\n            float d = max(0.0,dist-Rin)/Rin+1.0;\n            attenuation = clamp(1.0/(pow(d,e)), 0.0, 1.0);\n        #endif\n    #else\n        float Rin = 0.0;\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n            Rin = _light.innerRadius;\n            #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n                float Rdiff = _light.outerRadius-Rin;\n                float d = clamp(max(0.0,dist-Rin)/Rdiff, 0.0, 1.0);\n                attenuation = 1.0-d*d;\n            #else\n                // If no outer is provide behaves like:\n                // https://imdoingitwrong.wordpress.com/2011/01/31/light-attenuation/\n                float d = max(0.0,dist-Rin)/Rin+1.0;\n                attenuation = clamp(1.0/d, 0.0, 1.0);\n            #endif\n        #else\n            #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n                float d = clamp(dist/_light.outerRadius, 0.0, 1.0);\n                attenuation = 1.0-d*d;\n            #else\n                attenuation = 1.0;\n            #endif\n        #endif\n    #endif\n\n    // Computer accumulators\n    light_accumulator_ambient.rgb += _light.ambient * attenuation;\n\n    #ifdef TANGRAM_MATERIAL_DIFFUSE\n        light_accumulator_diffuse.rgb += _light.diffuse * nDotVP * attenuation;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_SPECULAR\n        float pf = 0.0; // power factor for shiny speculars\n        if (nDotVP > 0.0) {\n            vec3 reflectVector = reflect(-VP, _normal);\n            float eyeDotR = max(0.0, dot(-normalize(_eyeToPoint), reflectVector));\n            pf = pow(eyeDotR, material.shininess);\n        }\n\n        light_accumulator_specular.rgb += _light.specular * pf * attenuation;\n    #endif\n}\n",w="/*\n\nExpected globals:\nmaterial\nlight_accumulator_*\n\n*/\n\nstruct SpotLight {\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n    vec4 position;\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\n    float attenuationExponent;\n#endif\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n    float innerRadius;\n#endif\n\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n    float outerRadius;\n#endif\n\n    vec3 direction;\n    float spotCosCutoff;\n    float spotExponent;\n};\n\nvoid calculateLight(in SpotLight _light, in vec3 _eyeToPoint, in vec3 _normal) {\n\n    float dist = length(_light.position.xyz - _eyeToPoint);\n\n    // Compute vector from surface to light position\n    vec3 VP = (_light.position.xyz - _eyeToPoint) / dist;\n\n    // normal . light direction\n    float nDotVP = clamp(dot(_normal, VP), 0.0, 1.0);\n\n    // Attenuation defaults\n    float attenuation = 1.0;\n    #ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\n        float Rin = 1.0;\n        float e = _light.attenuationExponent;\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n            Rin = _light.innerRadius;\n        #endif\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n            float Rdiff = _light.outerRadius-Rin;\n            float d = clamp(max(0.0,dist-Rin)/Rdiff, 0.0, 1.0);\n            attenuation = 1.0-(pow(d,e));\n        #else\n            // If no outer is provide behaves like:\n            // https://imdoingitwrong.wordpress.com/2011/01/31/light-attenuation/\n            float d = max(0.0,dist-Rin)/Rin+1.0;\n            attenuation = clamp(1.0/(pow(d,e)), 0.0, 1.0);\n        #endif\n    #else\n        float Rin = 0.0;\n\n        #ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\n            Rin = _light.innerRadius;\n            #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n                float Rdiff = _light.outerRadius-Rin;\n                float d = clamp(max(0.0,dist-Rin)/Rdiff, 0.0, 1.0);\n                attenuation = 1.0-d*d;\n            #else\n                // If no outer is provide behaves like:\n                // https://imdoingitwrong.wordpress.com/2011/01/31/light-attenuation/\n                float d = max(0.0,dist-Rin)/Rin+1.0;\n                attenuation = clamp(1.0/d, 0.0, 1.0);\n            #endif\n        #else\n            #ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\n                float d = clamp(dist/_light.outerRadius, 0.0, 1.0);\n                attenuation = 1.0-d*d;\n            #else\n                attenuation = 1.0;\n            #endif\n        #endif\n    #endif\n\n    // spotlight attenuation factor\n    float spotAttenuation = 0.0;\n\n    // See if point on surface is inside cone of illumination\n    float spotDot = clamp(dot(-VP, _light.direction), 0.0, 1.0);\n\n    if (spotDot >= _light.spotCosCutoff) {\n        spotAttenuation = pow(spotDot, _light.spotExponent);\n    }\n\n    light_accumulator_ambient.rgb += _light.ambient * attenuation * spotAttenuation;\n\n    #ifdef TANGRAM_MATERIAL_DIFFUSE\n        light_accumulator_diffuse.rgb += _light.diffuse * nDotVP * attenuation * spotAttenuation;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_SPECULAR\n        // Power factor for shiny speculars\n        float pf = 0.0;\n        if (nDotVP > 0.0) {\n            vec3 reflectVector = reflect(-VP, _normal);\n            float eyeDotR = max(dot(-normalize(_eyeToPoint), reflectVector), 0.0);\n            pf = pow(eyeDotR, material.shininess);\n        }\n        light_accumulator_specular.rgb += _light.specular * pf * attenuation * spotAttenuation;\n    #endif\n}\n",x=function(){function a(b,c){g(this,a),this.name=c.name,this.view=b,this.ambient=null==c.ambient||"number"==typeof c.ambient?n.default.expandVec3(c.ambient||0):s.StyleParser.parseColor(c.ambient).slice(0,3),this.diffuse=null==c.diffuse||"number"==typeof c.diffuse?n.default.expandVec3(null!=c.diffuse?c.diffuse:1):s.StyleParser.parseColor(c.diffuse).slice(0,3),this.specular=null==c.specular||"number"==typeof c.specular?n.default.expandVec3(c.specular||0):s.StyleParser.parseColor(c.specular).slice(0,3)}return j(a,[{key:"inject",value:function(){var b="\n            uniform "+this.struct_name+" u_"+this.name+";\n            "+this.struct_name+" "+this.name+";\n            ",c="\n            "+this.name+" = u_"+this.name+";\n\n        ";l.default.addBlock(a.block,b),l.default.addBlock("setup",c)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(a){a.uniform("3fv","u_"+this.name+".ambient",this.ambient),a.uniform("3fv","u_"+this.name+".diffuse",this.diffuse),a.uniform("3fv","u_"+this.name+".specular",this.specular)}}],[{key:"create",value:function(b,c){return a.types[c.type]?new a.types[c.type](b,c):void 0}},{key:"setMode",value:function(b,c){b===!0&&(b="fragment"),b=a.enabled&&(null!=b?b:"fragment"),c.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===b,c.defines.TANGRAM_LIGHTING_VERTEX="vertex"===b}},{key:"inject",value:function(b){if(l.default.removeBlock(a.block),a.enabled){var c="";if(b&&Object.keys(b).length>0){var d={};for(var e in b)d[b[e].type]=!0;for(var f in d)a.types[f].inject();for(var g in b)b[g].inject(),c+="calculateLight("+g+", _eyeToPoint, _normal);\n"}var h="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                "+c+"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }";l.default.addBlock(a.block,h)}}}]),a}();c.default=x,x.types={},x.block="lighting",x.enabled=!0;var y=function(a){function b(a,c){g(this,b);var d=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return d.type="ambient",d.struct_name="AmbientLight",d}return f(b,a),j(b,[{key:"setupProgram",value:function(a){a.uniform("3fv","u_"+this.name+".ambient",this.ambient)}}],[{key:"inject",value:function(){l.default.addBlock(x.block,t)}}]),b}(x);x.types.ambient=y;var z=function(a){function b(a,c){g(this,b);var d=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));if(d.type="directional",d.struct_name="DirectionalLight",c.direction)d._direction=c.direction;else{var f=135,h=Math.sin(60*Math.PI/180);d._direction=[Math.cos(Math.PI*f/180)*h,Math.sin(Math.PI*f/180)*h,-.5],null==c.ambient&&(d.ambient=n.default.expandVec3(.5))}return d.direction=d._direction.map(parseFloat),d}return f(b,a),j(b,[{key:"setupProgram",value:function(a){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"setupProgram",this).call(this,a),a.uniform("3fv","u_"+this.name+".direction",this.direction)}},{key:"direction",get:function(){return this._direction},set:function(a){this._direction=r.default.normalize(a)}}],[{key:"inject",value:function(){l.default.addBlock(x.block,u)}}]),b}(x);x.types.directional=z;var A=function(a){function b(a,c){g(this,b);var d=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return d.type="point",d.struct_name="PointLight",d.position=c.position||[0,0,"100px"],d.position_eye=[],d.origin=c.origin||"ground",d.attenuation=isNaN(parseFloat(c.attenuation))?0:parseFloat(c.attenuation),d.radius=c.radius?Array.isArray(c.radius)&&2===c.radius.length?c.radius:[null,c.radius]:null,d}return f(b,a),j(b,[{key:"inject",value:function(){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"inject",this).call(this),l.default.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,l.default.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],l.default.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){this.updateEyePosition()}},{key:"updateEyePosition",value:function(){if("world"===this.origin){var a=p.default.latLngToMeters(this.position),b=h(a,2),c=b[0],d=b[1];this.position_eye[0]=c-this.view.camera.position_meters[0],this.position_eye[1]=d-this.view.camera.position_meters[1],this.position_eye[2]=s.StyleParser.convertUnits(this.position[2],{zoom:this.view.zoom,meters_per_pixel:p.default.metersPerPixel(this.view.zoom)}),this.position_eye[2]=this.position_eye[2]-this.view.camera.position_meters[2]}else("ground"===this.origin||"camera"===this.origin)&&(this.position_eye=s.StyleParser.convertUnits(this.position,{zoom:this.view.zoom,meters_per_pixel:p.default.metersPerPixel(this.view.zoom)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.camera.position_meters[2]));this.position_eye[3]=1}},{key:"setupProgram",value:function(a){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"setupProgram",this).call(this,a),a.uniform("4fv","u_"+this.name+".position",this.position_eye),l.default.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&a.uniform("1f","u_"+this.name+".attenuationExponent",this.attenuation),l.default.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&a.uniform("1f","u_"+this.name+".innerRadius",s.StyleParser.convertUnits(this.radius[0],{zoom:this.view.zoom,meters_per_pixel:p.default.metersPerPixel(this.view.zoom)})),l.default.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&a.uniform("1f","u_"+this.name+".outerRadius",s.StyleParser.convertUnits(this.radius[1],{zoom:this.view.zoom,meters_per_pixel:p.default.metersPerPixel(this.view.zoom)}))}}],[{key:"inject",value:function(){l.default.addBlock(x.block,v)}}]),b}(x);x.types.point=A;var B=function(a){function b(a,c){g(this,b);var d=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return d.type="spotlight",d.struct_name="SpotLight",d.direction=d._direction=(c.direction||[0,0,-1]).map(parseFloat),d.exponent=c.exponent?parseFloat(c.exponent):.2,d.angle=c.angle?parseFloat(c.angle):20,d}return f(b,a),j(b,[{key:"setupProgram",value:function(a){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"setupProgram",this).call(this,a),a.uniform("3fv","u_"+this.name+".direction",this.direction),a.uniform("1f","u_"+this.name+".spotCosCutoff",Math.cos(3.14159*this.angle/180)),a.uniform("1f","u_"+this.name+".spotExponent",this.exponent)}},{key:"direction",get:function(){return this._direction},set:function(a){this._direction=r.default.normalize(a)}}],[{key:"inject",value:function(){l.default.addBlock(x.block,w)}}]),b}(A);x.types.spotlight=B},{"./geo":202,"./gl/glsl":206,"./gl/shader_program":208,"./styles/style_parser":246,"./vector":271}],225:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./gl/glsl"),h=d(g),i=a("./styles/style_parser"),j="/*\n\nDefines globals:\nmaterial\nlight_accumulator_*\n\n*/\n\n\n// MATERIALS\n//\nstruct Material {\n    #ifdef TANGRAM_MATERIAL_EMISSION\n        vec4 emission;\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n            vec3 emissionScale;\n        #endif\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_AMBIENT\n        vec4 ambient;\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n            vec3 ambientScale;\n        #endif\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_DIFFUSE\n        vec4 diffuse;\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n            vec3 diffuseScale;\n        #endif\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_SPECULAR\n        vec4 specular;\n        float shininess;\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n            vec3 specularScale;\n        #endif\n    #endif\n\n\n    #ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\n        vec3 normalScale;\n        float normalAmount;\n    #endif\n};\n\n// Note: uniform is copied to a global instance to allow modification\nuniform Material u_material;\nMaterial material;\n\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\n\n// Global light accumulators for each property\nvec4 light_accumulator_ambient = vec4(vec3(0.0), 1.);\nvec4 light_accumulator_diffuse = vec4(vec3(0.0), 1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\n    vec4 light_accumulator_specular = vec4(vec3(0.0), 1.);\n#endif\n\n\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap (in sampler2D _tex, in vec3 _eyeToPoint, in vec3 _normal, in vec2 _skew) {\n    vec3 eye = normalize(_eyeToPoint);\n    eye.xy -= _skew;\n    eye = normalize(eye);\n\n    vec3 r = reflect(eye, _normal);\n    r.z += 1.0;\n    float m = 2. * length(r);\n    vec2 uv = r.xy / m + .5;\n    return texture2D(_tex, uv);\n}\n#endif\n\n\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend (in vec3 _normal) {\n    vec3 blending = abs(_normal);\n    blending = normalize(max(blending, 0.00001));\n    float b = (blending.x + blending.y + blending.z);\n    return blending / b;\n}\n\nvec4 getTriPlanar (in sampler2D _tex, in vec3 _pos, in vec3 _normal, in vec3 _scale) {\n    vec3 blending = getTriPlanarBlend(_normal);\n    vec4 xaxis = texture2D(_tex, fract(_pos.yz * _scale.x));\n    vec4 yaxis = texture2D(_tex, fract(_pos.xz * _scale.y));\n    vec4 zaxis = texture2D(_tex, fract(_pos.xy * _scale.z));\n    return  xaxis * blending.x + yaxis * blending.y + zaxis * blending.z;\n}\n#endif\n\n\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar (in sampler2D _tex, in vec3 _pos, in vec2 _scale) {\n    return texture2D( _tex, fract(_pos.xy * _scale.x) );\n}\n#endif\n\n\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal (inout vec3 _normal) {\n    // Get NORMALMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n    _normal += texture2D(u_material_normal_texture, fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\n    vec3 normalTex = getPlanar(u_material_normal_texture, v_world_position.xyz, material.normalScale.xy).rgb*2.0-1.0;\n    _normal += normalTex;\n    #endif\n\n    #ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\n    vec3 normalTex = getTriPlanar(u_material_normal_texture, v_world_position.xyz, _normal, material.normalScale).rgb*2.0-1.0;\n    _normal += normalTex;\n    #endif\n\n    _normal = normalize(_normal);\n}\n#endif\n\nvoid calculateMaterial (in vec3 _eyeToPoint, inout vec3 _normal) {\n    // get EMISSION TEXTUREMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\n        material.emission *= texture2D(u_material_emission_texture,v_texcoord);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\n        material.emission *= getPlanar(u_material_emission_texture, v_world_position.xyz, material.emissionScale.xy);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\n        material.emission *= getTriPlanar(u_material_emission_texture, v_world_position.xyz, _normal, material.emissionScale);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\n        material.emission *= getSphereMap(u_material_emission_texture, _eyeToPoint, _normal, u_vanishing_point);\n        #endif\n    #endif\n\n    // get AMBIENT TEXTUREMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\n        material.ambient *= texture2D(u_material_ambient_texture,v_texcoord);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\n        material.ambient *= getPlanar(u_material_ambient_texture, v_world_position.xyz, material.ambientScale.xy);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\n        material.ambient *= getTriPlanar(u_material_ambient_texture, v_world_position.xyz, _normal, material.ambientScale);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\n        material.ambient *= getSphereMap(u_material_ambient_texture, _eyeToPoint, _normal, u_vanishing_point);\n        #endif\n    #endif\n\n    // get DIFFUSE TEXTUREMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\n        material.diffuse *= texture2D(u_material_diffuse_texture,v_texcoord);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\n        material.diffuse *= getPlanar(u_material_diffuse_texture, v_world_position.xyz, material.diffuseScale.xy);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\n        material.diffuse *= getTriPlanar(u_material_diffuse_texture, v_world_position.xyz, _normal, material.diffuseScale);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\n        material.diffuse *= getSphereMap(u_material_diffuse_texture, _eyeToPoint, _normal, u_vanishing_point);\n        #endif\n    #endif\n\n    // get SPECULAR TEXTUREMAP\n    //------------------------------------------------\n    #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\n        material.specular *= texture2D(u_material_specular_texture,v_texcoord);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\n        material.specular *= getPlanar(u_material_specular_texture, v_world_position.xyz, material.specularScale.xy);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\n        material.specular *= getTriPlanar(u_material_specular_texture, v_world_position.xyz, _normal, material.specularScale);\n        #endif\n\n        #ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\n        material.specular *= getSphereMap(u_material_specular_texture, _eyeToPoint, _normal, u_vanishing_point);\n        #endif\n    #endif\n}\n",k=["emission","ambient","diffuse","specular"],l=function(){
function a(b){var c=this;e(this,a),b=b||{},k.forEach(function(a){var d=b[a];null!=d&&(c[a]=d.texture?{texture:d.texture,mapping:d.mapping||"spheremap",scale:h.default.expandVec3(null!=d.scale?d.scale:1),amount:h.default.expandVec4(null!=d.amount?d.amount:1)}:"number"==typeof d||Array.isArray(d)?{amount:h.default.expandVec4(d)}:"string"==typeof d?{amount:i.StyleParser.parseColor(d)}:d)}),this.specular&&(this.specular.shininess=b.shininess?parseFloat(b.shininess):.2),null!=b.normal&&(this.normal={texture:b.normal.texture,mapping:b.normal.mapping||"triplanar",scale:h.default.expandVec3(null!=b.normal.scale?b.normal.scale:1),amount:null!=b.normal.amount?b.normal.amount:1})}return f(a,[{key:"inject",value:function(b){var c=this;k.forEach(function(a){var d="TANGRAM_MATERIAL_"+a.toUpperCase(),e=d+"_TEXTURE";b.defines[d]=null!=c[a],c[a]&&c[a].texture&&(b.defines[e]=!0,b.defines[e+"_"+c[a].mapping.toUpperCase()]=!0,b.defines["TANGRAM_MATERIAL_TEXTURE_"+c[a].mapping.toUpperCase()]=!0,b.texcoords=b.texcoords||"uv"===c[a].mapping)}),this.normal&&this.normal.texture&&(b.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,b.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,b.defines["TANGRAM_MATERIAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,b.texcoords=b.texcoords||"uv"===this.normal.mapping),b.replaceShaderBlock(a.block,j,"Material"),b.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(a){var b=this;k.forEach(function(c){b[c]&&(b[c].texture?(a.setTextureUniform("u_material_"+c+"_texture",b[c].texture),a.uniform("3fv","u_material."+c+"Scale",b[c].scale),a.uniform("4fv","u_material."+c,b[c].amount)):b[c].amount&&a.uniform("4fv","u_material."+c,b[c].amount))}),this.specular&&a.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(a.setTextureUniform("u_material_normal_texture",this.normal.texture),a.uniform("3fv","u_material.normalScale",this.normal.scale),a.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(a){return null!=a&&(null!=a.emission||null!=a.ambient||null!=a.diffuse||null!=a.specular)}}]),a}();c.default=l,l.block="material"},{"./gl/glsl":206,"./styles/style_parser":246}],226:[function(a,b){"use strict";function c(a){return a&&a.__esModule?a:{default:a}}a("./utils/polyfills");var d=a("./leaflet_layer"),e=a("./scene"),f=c(e),g=a("./scene_worker"),h=a("./utils/version"),i=c(h),j=a("./utils/log"),k=c(j),l=a("./utils/thread"),m=c(l),n=a("./utils/utils"),o=c(n),p=a("./geo"),q=c(p),r=a("./vector"),s=c(r),t=a("./sources/data_source"),u=c(t);a("./sources/geojson"),a("./sources/topojson"),a("./sources/mvt"),a("./sources/raster");var v=a("./gl/glsl"),w=c(v),x=a("./gl/shader_program"),y=c(x),z=a("./gl/vertex_data"),A=c(z),B=a("./gl/texture"),C=c(B),D=a("./material"),E=c(D),F=a("./light"),G=c(F),H=a("./utils/worker_broker"),I=c(H),J=a("./styles/layer"),K=a("./styles/style_manager"),L=a("./styles/style_parser"),M=a("./labels/collision"),N=c(M),O=a("./selection"),P=c(O),Q=a("./styles/text/canvas_text"),R=c(Q),S=a("./utils/debug_settings"),T=c(S),U=a("js-yaml"),V=c(U),W=a("jszip"),X=c(W),Y={log:k.default,yaml:V.default,Thread:m.default,Utils:o.default,Geo:q.default,Vector:s.default,DataSource:u.default,GLSL:w.default,ShaderProgram:y.default,VertexData:A.default,Texture:C.default,Material:E.default,Light:G.default,Scene:f.default,SceneWorker:g.SceneWorker,WorkerBroker:I.default,layerCache:J.layerCache,StyleManager:K.StyleManager,StyleParser:L.StyleParser,Collision:N.default,FeatureSelection:P.default,CanvasText:R.default,debugSettings:T.default};m.default.is_main&&(o.default.requestAnimationFramePolyfill(),void 0===window.Promise&&(window.Promise=Promise,X.default.external.Promise=Promise)),b.exports={leafletLayer:d.leafletLayer,debug:Y,version:i.default}},{"./geo":202,"./gl/glsl":206,"./gl/shader_program":208,"./gl/texture":209,"./gl/vertex_data":212,"./labels/collision":215,"./leaflet_layer":223,"./light":224,"./material":225,"./scene":227,"./scene_worker":230,"./selection":231,"./sources/data_source":232,"./sources/geojson":233,"./sources/mvt":234,"./sources/raster":235,"./sources/topojson":236,"./styles/layer":238,"./styles/style_manager":245,"./styles/style_parser":246,"./styles/text/canvas_text":247,"./utils/debug_settings":256,"./utils/log":260,"./utils/polyfills":264,"./utils/thread":266,"./utils/utils":268,"./utils/version":269,"./utils/worker_broker":270,"./vector":271,"js-yaml":97,jszip:133}],227:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function i(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=a("./utils/log"),n=e(m),o=a("./utils/utils"),p=e(o),q=a("./utils/urls"),r=d(q),s=a("./utils/worker_broker"),t=e(s),u=a("./utils/subscribe"),v=e(u),w=a("./gl/context"),x=e(w),y=a("./gl/texture"),z=e(y),A=a("./gl/shader_program"),B=e(A),C=a("./gl/vao"),D=e(C),E=a("./styles/style_manager"),F=a("./styles/style"),G=a("./styles/style_parser"),H=a("./scene_loader"),I=e(H),J=a("./view"),K=e(J),L=a("./light"),M=e(L),N=a("./tile_manager"),O=e(N),P=a("./sources/data_source"),Q=e(P),R=a("./selection"),S=e(R),T=a("./gl/render_state"),U=e(T),V=a("./styles/text/canvas_text"),W=e(V),X=a("./styles/text/font_manager"),Y=e(X),Z=a("./utils/media_capture"),$=e(Z),_=function(){function a(b,c){j(this,a),c=c||{},v.default(this),this.id=a.id++,this.initialized=!1,this.initializing=null,this.sources={},this.view=new K.default(this,c),this.tile_manager=new O.default({scene:this,view:this.view}),this.num_workers=c.numWorkers||2,c.disableVertexArrayObjects===!0&&(D.default.disabled=!0),p.default.use_high_density_display=void 0===c.highDensityDisplay||c.highDensityDisplay,p.default.updateDevicePixelRatio(),this.config=null,this.config_source=b,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new E.StyleManager,this.building=null,this.dirty=!0,this.animated=!1,this.preUpdate=c.preUpdate,this.postUpdate=c.postUpdate,this.render_loop=!c.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new $.default,this.selection=null,this.introspection=!1,this.resetTime(),this.container=c.container,this.canvas=null,this.contextOptions=c.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=a.generation,this.last_complete_generation=a.generation,this.setupDebug(),this.log_level=c.logLevel||"warn",n.default.setLevel(this.log_level),n.default.reset()}return l(a,[{key:"load",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.initializing)return this.initializing;n.default.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,c="string"==typeof c?{config_path:c}:c;var d=c.config_path;return c.blocking=void 0===c.blocking||c.blocking,this.createCanvas(),this.initializing=this.loadScene(b,d).then(function(){return a.createWorkers()}).then(function(){a.resetFeatureSelection();var b="object"===k(a.config_source)||a.hasSubscribersFor("load"),d=a.updateConfig({serialize_funcs:b,load_event:!0,fade_in:!0});return c.blocking===!0?d:void 0}).then(function(){a.updating--,a.initializing=null,a.initialized=!0,a.last_valid_config_source=a.config_source,a.last_valid_config_path=a.config_path,a.render_loop!==!1&&a.setupRenderLoop(),a.requestRedraw()}).catch(function(b){a.initializing=null,a.updating=0;var c=void 0,d=void 0;if("YAMLException"===b.name?(c="yaml",d="Error parsing scene YAML"):d="Error initializing scene",a.trigger("error",{type:c,message:d,error:b,url:a.config_source}),d="Scene.load() failed to load "+a.config_source+": "+b.message,a.last_valid_config_source)return n.default("warn",d,b),n.default("info","Scene.load() reverting to last valid configuration"),a.load(a.last_valid_config_source,a.last_valid_config_path);throw n.default("error",d,b),b}),this.initializing}},{key:"destroy",value:function(){if(this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl){z.default.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},B.default.reset();var a=this.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),this.gl=null}this.sources={},this.destroyWorkers(),this.tile_manager.destroy(),this.tile_manager=null,n.default.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=x.default.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!0,device_pixel_ratio:p.default.device_pixel_ratio},this.contextOptions))}catch(a){throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.resizeMap(this.container.clientWidth,this.container.clientHeight),D.default.init(this.gl),this.render_states=new U.default(this.gl),this.media_capture.setCanvas(this.canvas)}}},{key:"getWorkerUrl",value:function(){var a=void 0;if("undefined"!=typeof f){var b="("+f+")()";if(g){var c=g.slice(0,g.lastIndexOf("/")+1);b+="\n//# sourceMappingURL="+c+h}a=r.createObjectURL(new Blob([b],{type:"application/javascript"}))}if(!a)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");var d=[].concat(i(this.data_source_scripts));d.push(a);var e="importScripts("+d.map(function(a){return"'"+a+"'"}).join(",")+");";return r.createObjectURL(new Blob([e],{type:"application/javascript"}))}},{key:"updateDataSourceScripts",value:function(){var a,b=this,c=[].concat(i(this.data_source_scripts||[])),d=Object.keys(this.config.sources).map(function(a){return b.config.sources[a].scripts}).filter(function(a){return a});return d.length>0&&n.default("debug","loading custom data source scripts in worker:",d),this.data_source_scripts=(a=[]).concat.apply(a,i(d)).sort(),!(this.data_source_scripts.length===c.length&&this.data_source_scripts.every(function(a,b){return a===c[b]}))}},{key:"createWorkers",value:function(){return this.updateDataSourceScripts()&&this.destroyWorkers(),this.workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(a){var b=this,c=[];this.workers=[];for(var d=function(){f=new Worker(a),b.workers[e]=f,t.default.addWorker(f),n.default("debug","Scene.makeWorkers: initializing worker "+e);var d=e;c.push(t.default.postMessage(f,"self.init",b.id,e,b.num_workers,b.log_level,p.default.device_pixel_ratio).then(function(a){return n.default("debug","Scene.makeWorkers: initialized worker "+a),a},function(a){return n.default("error","Scene.makeWorkers: failed to initialize worker "+d+":",a),Promise.reject(a)}))},e=0;e<this.num_workers;e++){var f;d()}return this.next_worker=0,Promise.all(c).then(function(){n.default.setWorkers(b.workers);var c=!!b.gl.getExtension("OES_element_index_uint");t.default.postMessage(b.workers,"VertexElements.setUint32Flag",c),r.revokeObjectURL(a)})}},{key:"destroyWorkers",value:function(){Array.isArray(this.workers)&&(n.default.setWorkers(null),this.workers.forEach(function(a){a.terminate()}),this.workers=null)}},{key:"getWorkerForDataSource",value:function(a){var b=void 0;return a.tiled?(b=this.workers[this.next_worker],this.next_worker=(this.next_worker+1)%this.workers.length):b=this.workers[a.id%this.workers.length],b}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"updateDevicePixelRatio",value:function(){var a=this;p.default.updateDevicePixelRatio()&&t.default.postMessage(this.workers,"self.updateDevicePixelRatio",p.default.device_pixel_ratio).then(function(){return a.rebuild()}).then(function(){return a.resizeMap(a.view.size.css.width,a.view.size.css.height)})}},{key:"resizeMap",value:function(a,b){(0!==a||0!==b)&&(this.dirty=!0,this.view.setViewportSize(a,b),this.gl&&x.default.resize(this.gl,a,b,p.default.device_pixel_ratio))}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var a=this;this.render_loop_active||setTimeout(function(){a.renderLoop()},0)}},{key:"update",value:function(){var a=this.dirty,b=!!this.selection&&this.selection.hasPendingRequests(),c=!(a===!1&&b===!1||this.initialized===!1||this.updating>0||this.ready()===!1);return"function"==typeof this.preUpdate&&this.preUpdate(c),!!c&&(this.dirty=!1,this.updateDevicePixelRatio(),this.render({main:a,selection:b}),this.updateViewComplete(),this.media_capture.completeScreenshot(),"function"==typeof this.postUpdate&&this.postUpdate(c),(this.animated===!0||this.view.isAnimating())&&(this.dirty=!0),this.frame++,n.default("trace","Scene.render()"),!0)}},{key:"render",value:function(a){var b=this,c=a.main,d=a.selection,e=this.gl;if(this.view.update(),Object.keys(this.lights).forEach(function(a){return b.lights[a].update()}),c&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),d){if(this.view.panning||this.view.zooming)return void this.selection.clearPendingRequests();!this.selection.locked&&this.last_selection_render<this.last_main_render&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,this.canvas.width,this.canvas.height),this.last_selection_render=this.frame),this.selection.read()}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0,this.getFeatureSelectionMapSize().then(function(a){a&&n.default("info","Scene: rendered "+b.render_count+" primitives ("+a+" features in selection map)")})),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.allow_blend;d=null==d||d,this.clearFrame({clear_color:!0,clear_depth:!0});for(var e=this.tile_manager.getActiveStyles().map(function(b){return a.styles[b]}).filter(function(a){return a}).sort(F.Style.blendOrderSort),f=0,g=void 0,h=0;h<e.length;h++){var i=e[h];if(i.blend!==g){var j=Object.assign({},F.Style.render_states[i.blend],{blend:d&&i.blend});this.setRenderState(j)}f+=this.renderStyle(i.name,b),g=i.blend}return f}},{key:"renderStyle",value:function(a,b){for(var c=this.styles[a],d=!0,e=0,f=void 0,g=this.tile_manager.getRenderableTiles(),h=0;h<g.length;h++){var i=g[h];if(null!=i.meshes[a]){if(d===!0&&(d=!1,f=this.setupStyle(c,b),!f))return 0;if(i.shouldProxyForStyle(a)){this.view.setupTile(i,f);var j=i.meshes[a];c.render(j)&&(this.view.panning||this.view.zooming||this.requestRedraw()),e+=j.geometry_count}}}return e}},{key:"setupStyle",value:function(a,b){var c=void 0;try{if(c=a.getProgram(b),!c)return}catch(b){return void this.trigger("warning",{type:"styles",message:"Error compiling style "+a.name,style:a,shader_errors:a.program&&a.program.shader_errors})}c.use(),a.setup(),c.uniform("1f","u_time",this.animated?(+new Date-this.start_time)/1e3:0),this.view.setupProgram(c);for(var d in this.lights)this.lights[d].setupProgram(c);return c}},{key:"clearFrame",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.clear_color,c=a.clear_depth;if(this.initialized){b=b!==!1,c=c!==!1,this.render_states.depth_write.set({depth_write:c});var d=this.gl;if(b||c){var e=(b&&d.COLOR_BUFFER_BIT)|(c&&d.DEPTH_BUFFER_BIT);d.clear(e)}}}},{key:"setRenderState",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.depth_test,c=a.depth_write,d=a.cull_face,e=a.blend;if(this.initialized){var f=this.render_states;b=b!==!1&&f.defaults.depth_test,c=c!==!1&&f.defaults.depth_write,d=d!==!1&&f.defaults.culling,e=null!=e?e:f.defaults.blending;var g=this.gl;f.depth_test.set({depth_test:b}),f.depth_write.set({depth_write:c}),f.culling.set({cull:d,face:f.defaults.culling_face}),e?"opaque"===e?f.blending.set({blend:!1}):"overlay"===e||"inlay"===e?f.blending.set({blend:!0,src:g.SRC_ALPHA,dst:g.ONE_MINUS_SRC_ALPHA,src_alpha:g.ONE,dst_alpha:g.ONE_MINUS_SRC_ALPHA}):"add"===e?f.blending.set({blend:!0,src:g.ONE,dst:g.ONE}):"multiply"===e&&f.blending.set({blend:!0,src:g.ZERO,dst:g.SRC_COLOR}):f.blending.set({blend:!1})}}},{key:"getFeatureAt",value:function(a){if(!this.initialized)return n.default("debug","Scene.getFeatureAt() called before scene was initialized"),Promise.resolve();var b={x:a.x*p.default.device_pixel_ratio/this.view.size.device.width,y:a.y*p.default.device_pixel_ratio/this.view.size.device.height};return this.selection.getFeatureAt(b).then(function(b){return Object.assign(b,{pixel:a})}).catch(function(a){return Promise.resolve({error:a})})}},{key:"rebuild",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.sync,d=void 0===c||c,e=b.sources,f=void 0===e?null:e,g=b.serialize_funcs,h=b.profile,i=void 0!==h&&h,j=b.fade_in,k=void 0!==j&&j;return new Promise(function(b,c){if(a.building){a.building.queued&&a.building.queued.reject&&(n.default("debug","Scene.rebuild: request superceded by a newer call"),a.building.queued.resolve(!1));var e={sync:d,sources:f,serialize_funcs:g,profile:i,fade_in:k};return a.building.queued={resolve:b,reject:c,options:e},void n.default("trace","Scene.rebuild(): queuing request")}a.building={resolve:b,reject:c},i&&a._profile("Scene.rebuild"),d&&a.syncConfigToWorker({serialize_funcs:g}),a.resetFeatureSelection(),a.resetTime(),a.tile_manager.pruneToVisibleTiles(),a.tile_manager.forEachTile(function(b){(!f||f.indexOf(b.source.name)>-1)&&a.tile_manager.buildTile(b,{fade_in:k})}),a.tile_manager.updateTilesForView(),a.tile_manager.checkBuildQueue()}).then(function(){i&&a._profileEnd("Scene.rebuild")})}},{key:"tileManagerBuildDone",value:function(){if(this.building){n.default("info","Scene: build geometry finished"),this.building.resolve&&(null==this.initial_build_time&&(this.initial_build_time=+new Date-this.start_time,n.default("debug","Scene: initial build time: "+this.initial_build_time)),this.building.resolve(!0));var a=this.building.queued;this.building=null,a&&(n.default("debug","Scene: starting queued rebuild() request"),this.rebuild(a.options).then(a.resolve,a.reject))}}},{key:"loadScene",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.config_source=b||this.config_source,this.config_globals_applied=[],this.config_path=r.pathForURL("string"==typeof this.config_source?c||this.config_source:c),I.default.loadScene(this.config_source,this.config_path).then(function(b){var c=b.config,d=b.bundle;return a.config=c,a.config_bundle=d,a.config})}},{key:"setDataSource",value:function(a,b){if(!a||!b||!b.type||!b.url&&!b.data)return void n.default("error","No name provided or not a valid config:",a,b);var c=null==this.config.sources[a],d=this.config.sources[a]=Object.assign({},b);return d.data&&"object"===k(d.data)&&(d.url=r.createObjectURL(new Blob([JSON.stringify(d.data)])),delete d.data),I.default.normalizeDataSource(d,this.config_bundle),c?this.updateConfig({rebuild:{sources:[a]}}):this.rebuild({sources:[a]})}},{key:"createDataSources",value:function(){var a=this,b=[],c=Object.keys(this.sources),d=0;for(var e in this.config.sources){var f=this.config.sources[e],g=this.sources[e];try{var h=Object.assign({},f,{name:e,id:d++});if(this.sources[e]=Q.default.create(h,this.sources),!this.sources[e])throw{}}catch(a){delete this.sources[e];var i="Could not create data source: "+a.message;n.default("warn","Scene: "+i,f),this.trigger("warning",{type:"sources",source:f,message:i})}Q.default.changed(this.sources[e],g)&&b.push(e)}c.forEach(function(c){a.config.sources[c]||(delete a.sources[c],b.push(c))}),b.length>0&&this.tile_manager.removeTiles(function(a){return b.indexOf(a.source.name)>-1});for(var j in this.config.layers){var k=this.config.layers[j];k.data&&this.sources[k.data.source]&&(this.sources[k.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var a=this;return z.default.createFromObject(this.gl,this.config.textures).then(function(){return z.default.createDefault(a.gl)})}},{key:"updateStyles",value:function(){var a=this;if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this);for(var b in this.styles)this.styles[b].setGL(this.gl);this.animated=void 0!==this.config.scene.animated?this.config.scene.animated:Object.keys(this.styles).some(function(b){return a.styles[b].animated}),this.dirty=!0}},{key:"getActiveCamera",value:function(){return this.view.getActiveCamera()}},{key:"setActiveCamera",value:function(a){return this.view.setActiveCamera(a)}},{key:"createLights",value:function(){this.lights={};for(var a in this.config.lights)if(this.config.lights[a]&&"object"===k(this.config.lights[a])){var b=this.config.lights[a];b.name=a.replace("-","_"),b.visible=b.visible!==!1,b.visible&&(this.lights[b.name]=M.default.create(this.view,b))}M.default.inject(this.lights)}},{key:"setBackground",value:function(){var a,b=this.config.scene.background;this.background={},b&&b.color&&(this.background.color=G.StyleParser.parseColor(b.color)),this.background.color||(this.background.color=[0,0,0,0]),this.canvas.style.backgroundColor=1===this.background.color[3]?"rgba("+this.background.color.map(function(a){return Math.floor(255*a)}).join(", ")+")":"transparent",(a=this.gl).clearColor.apply(a,i(this.background.color))}},{key:"setIntrospection",value:function(a){var b=this;return this.introspection=a||!1,this.updating++,this.updateConfig().then(function(){return b.updating--})}},{key:"updateConfig",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.load_event,d=void 0!==c&&c,e=b.rebuild,f=void 0===e||e,g=b.serialize_funcs,h=b.fade_in,i=void 0!==h&&h;this.generation=++a.generation,this.updating++,this.config=I.default.applyGlobalProperties(this.config,this.config_globals_applied),this.trigger(d?"load":"update",{config:this.config}),I.default.hoistTextures(this.config),this.style_manager.init(),this.view.reset(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),Y.default.loadFonts(this.config.fonts),this.updateStyles();var j=f?this.rebuild(Object.assign({serialize_funcs:g,fade_in:i},"object"===("undefined"==typeof f?"undefined":k(f))&&f)):this.syncConfigToWorker({serialize_funcs:g});return this.updating--,this.view.updateBounds(),this.requestRedraw(),j}},{key:"syncConfigToWorker",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.serialize_funcs,c=void 0===b||b,d=c?p.default.serializeWithFunctions(this.config):JSON.stringify(this.config);return t.default.postMessage(this.workers,"self.updateConfig",{config:d,generation:this.generation,introspection:this.introspection})}},{key:"createListeners",value:function(){var a=this;this.listeners={},this.listeners.view={move:function(){return a.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return a.dirty=!0},warning:function(b){return a.trigger("warning",Object.assign({type:"textures"},b))}},z.default.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(b){return a.trigger("error",Object.assign({type:"scene"},b))}},I.default.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),z.default.unsubscribe(this.listeners.texture),I.default.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){var a=this;this.selection?this.workers&&t.default.postMessage(this.workers,"self.resetFeatureSelection"):this.selection=new S.default(this.gl,this.workers,function(){return a.building})}},{key:"getFeatureSelectionMapSize",value:function(){var a=this;return this.fetching_selection_map?Promise.resolve():(this.fetching_selection_map=!0,t.default.postMessage(this.workers,"self.getFeatureSelectionMapSize").then(function(b){return a.fetching_selection_map=!1,b.reduce(function(a,b){return a+b})}))}},{key:"resetTime",value:function(){this.start_time=+new Date}},{key:"updateViewComplete",value:function(){!this.render_count_changed&&this.generation===this.last_complete_generation||this.tile_manager.isLoadingVisibleTiles()||(this.last_complete_generation=this.generation,W.default.pruneTextCache(),this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(){return this.requestRedraw(),this.media_capture.screenshot()}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(a){console.profile("main thread: "+a),t.default.postMessage(this.workers,"self.profile",a)}},{key:"_profileEnd",value:function(a){console.profileEnd("main thread: "+a),t.default.postMessage(this.workers,"self.profileEnd",a)}},{key:"setupDebug",value:function(){var a=this;this.debug={timeRebuild:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=[],e=function e(){var f=+new Date;a.rebuild(c).then(function(){if(d.push(+new Date-f),d.length<b)e();else{var a=~~(d.reduce(function(a,b){return a+b})/d.length);n.default("info","Profiled rebuild "+b+" times: "+a+" avg ("+Math.min.apply(Math,d)+" min, "+Math.max.apply(Math,d)+" max)")}})};e()},geometryCountByStyle:function(){var b={};return a.tile_manager.getRenderableTiles().forEach(function(a){for(var c in a.meshes)b[c]=b[c]||0,b[c]+=a.meshes[c].geometry_count}),b},geometryCountByBaseStyle:function(){var b=a.debug.geometryCountByStyle(),c={};for(var d in b){var e=a.styles[d].baseStyle();c[e]=c[e]||0,c[e]+=b[d]}return c},geometrySizeByStyle:function(){var b={};return a.tile_manager.getRenderableTiles().forEach(function(a){for(var c in a.meshes)b[c]=b[c]||0,b[c]+=a.meshes[c].buffer_size}),b},geometrySizeByBaseStyle:function(){var b=a.debug.geometrySizeByStyle(),c={};for(var d in b){var e=a.styles[d].baseStyle();c[e]=c[e]||0,c[e]+=b[d]}return c},renderableTilesCount:function(){return a.tile_manager.getRenderableTiles().length}}}}],[{key:"create",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new a(b,c)}}]),a}();c.default=_,_.id=0,_.generation=0},{"./gl/context":204,"./gl/render_state":207,"./gl/shader_program":208,"./gl/texture":209,"./gl/vao":210,"./light":224,"./scene_loader":229,"./selection":231,"./sources/data_source":232,"./styles/style":244,"./styles/style_manager":245,"./styles/style_parser":246,"./styles/text/canvas_text":247,"./styles/text/font_manager":248,"./tile_manager":253,"./utils/log":260,"./utils/media_capture":261,"./utils/subscribe":265,"./utils/urls":267,"./utils/utils":268,"./utils/worker_broker":270,"./view":272}],228:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return"zip"===d||"string"==typeof a&&!r.isLocalURL(a)&&"zip"===r.extensionForURL(a)?new x(a,b,c):new w(a,b,c)}function j(a){return!(!a||"global."!==a.slice(0,7))}function k(a){var b;try{b=v.default.safeLoad(a,{json:!0})}catch(a){throw a}return b}function l(a){return new Promise(function(b,c){"string"==typeof a?p.default.io(a).then(function(a){try{var d=k(a);b(d)}catch(a){c(a)}},c):b(a)})}Object.defineProperty(c,"__esModule",{value:!0}),c.ZipSceneBundle=c.SceneBundle=void 0;var m=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.createSceneBundle=i,c.isGlobal=j;var o=a("./utils/utils"),p=e(o),q=a("./utils/urls"),r=d(q),s=a("jszip"),t=e(s),u=a("js-yaml"),v=e(u),w=c.SceneBundle=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(this,a),this.url=b,this.path=!c||r.isRelativeURL(c)&&!r.isRelativeURL(this.url)?r.pathForURL(this.url):c,this.path_for_parent=c||this.path,this.parent=d,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return n(a,[{key:"load",value:function(){return l(this.url)}},{key:"resourceFor",value:function(a){return{url:this.urlFor(a),path:this.pathFor(a),type:this.typeFor(a)}}},{key:"urlFor",value:function(a){return j(a)?a:r.isRelativeURL(a)&&this.container?this.parent.urlFor(this.path_for_parent+a):r.addBaseURL(a,this.path)}},{key:"pathFor",value:function(a){return r.pathForURL(a)}},{key:"typeFor",value:function(a){return r.extensionForURL(a)}},{key:"isContainer",value:function(){return!1}}]),a}(),x=c.ZipSceneBundle=function(a){function b(a,c,d){h(this,b);var e=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,d));return e.zip=null,e.files={},e.root=null,e.path="",e}return g(b,a),n(b,[{key:"isContainer",value:function(){return!0}},{key:"load",value:function(){var a=this;return this.zip=new t.default,
"string"==typeof this.url?p.default.io(this.url,6e4,"arraybuffer").then(function(b){return a.zip.loadAsync(b)}).then(function(){return a.parseZipFiles()}).then(function(){return a.loadRoot()}).catch(function(a){return Promise.reject(a)}):Promise.resolve(this)}},{key:"urlFor",value:function(a){return j(a)?a:r.isRelativeURL(a)?this.urlForZipFile(r.flattenRelativeURL(a)):m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"urlFor",this).call(this,a)}},{key:"typeFor",value:function(a){return r.isRelativeURL(a)?this.typeForZipFile(a):m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"typeFor",this).call(this,a)}},{key:"loadRoot",value:function(){var a=this;return this.findRoot().then(function(){return l(a.urlForZipFile(a.root))})}},{key:"findRoot",value:function(){var a=this,b=Object.keys(this.files).filter(function(b){return 0===a.files[b].depth}).filter(function(a){return"yaml"===r.extensionForURL(a)});if(1===b.length&&(this.root=b[0]),!this.root){var c="Could not find root scene for bundle '"+this.url+"': ";return c+="The zip archive's root level must contain a single scene file with the '.yaml' extension. ",c+=b.length>0?"Found multiple YAML files at the root level: "+b.map(function(a){return"'"+a+"'"}).join(", ")+".":"Found NO YAML files at the root level.",Promise.reject(Error(c))}return Promise.resolve()}},{key:"parseZipFiles",value:function(){var a=this,b=[],c=[];return this.zip.forEach(function(a,d){d.dir||(b.push(a),c.push(d.async("arraybuffer")))}),Promise.all(c).then(function(c){for(var d=0;d<c.length;d++){var e=b[d],f=e.split("/").length-1;a.files[e]={data:c[d],type:r.extensionForURL(e),depth:f}}})}},{key:"urlForZipFile",value:function(a){return this.files[a]?(this.files[a].url||(this.files[a].url=r.createObjectURL(new Blob([this.files[a].data]))),this.files[a].url):void 0}},{key:"typeForZipFile",value:function(a){return this.files[a]&&this.files[a].type}}]),b}(w)},{"./utils/urls":267,"./utils/utils":268,"js-yaml":97,jszip:133}],229:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function g(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};c=c?c+b:"";for(var e in a){var f=c+e,h=a[e];d[f]=h,"object"!==("undefined"==typeof h?"undefined":i(h))||Array.isArray(h)||g(h,b,f,d)}return d}Object.defineProperty(c,"__esModule",{value:!0});var h,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},j=a("./utils/log"),k=e(j),l=a("./gl/glsl"),m=e(l),n=a("./utils/urls"),o=d(n),p=a("./utils/merge"),q=e(p),r=a("./utils/subscribe"),s=e(r),t=a("./scene_bundle");c.default=h={loadScene:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=[];return this.loadSceneRecursive({url:a,path:c},null,d).then(function(a){return b.finalize(a)}).then(function(a){var c=a.config,e=a.bundle;return c?(d.length>0&&d.forEach(function(a){var c="Failed to import scene: "+a.url;k.default("error",c,a),b.trigger("error",{type:"scene_import",message:c,error:a,url:a.url})}),{config:c,bundle:e}):Promise.reject(d[0])})},loadSceneRecursive:function(a,b){var c=a.url,d=a.path,e=a.type,g=this,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!c)return Promise.resolve({});var j=t.createSceneBundle(c,d,b,e);return j.load().then(function(a){if(null==a.import)return g.normalize(a,j);Array.isArray(a.import)||(a.import=[a.import]);var b=[];return a.import.forEach(function(a){"object"===("undefined"==typeof a?"undefined":i(a))&&(a=o.createObjectURL(new Blob([JSON.stringify(a)]))),b.push(j.resourceFor(a))}),delete a.import,Promise.all(b.map(function(a){return g.loadSceneRecursive(a,j,h)})).then(function(b){var c=b.map(function(a){return a.config});return a=q.default.apply(void 0,[{}].concat(f(c),[a])),g.normalize(a,j)})}).catch(function(a){return a.url=c,h.push(a),{}})},normalize:function(a,b){return this.normalizeDataSources(a,b),this.normalizeFonts(a,b),this.normalizeTextures(a,b),{config:a,bundle:b}},normalizeDataSources:function(a,b){a.sources=a.sources||{};for(var c in a.sources)this.normalizeDataSource(a.sources[c],b);return a},normalizeDataSource:function(a,b){return a.url=b.urlFor(a.url),Array.isArray(a.scripts)&&(a.scripts=a.scripts.map(function(a){return b.urlFor(a)})),a},normalizeFonts:function(a,b){a.fonts=a.fonts||{};for(var c in a.fonts)if(Array.isArray(a.fonts[c]))a.fonts[c].forEach(function(a){a.url=a.url&&b.urlFor(a.url)});else{var d=a.fonts[c];d.url=d.url&&b.urlFor(d.url)}return a},normalizeTextures:function(a,b){if(a.textures=a.textures||{},a.textures)for(var c in a.textures){var d=a.textures[c];d.url&&(d.url=b.urlFor(d.url))}if(a.styles){var e=function(c){var d=a.styles[c],e=d.texture;"string"!=typeof e||a.textures[e]||t.isGlobal(e)||(d.texture=b.urlFor(e)),d.material&&["emission","ambient","diffuse","specular","normal"].forEach(function(c){var e=null!=d.material[c]&&d.material[c].texture;"string"!=typeof e||a.textures[e]||t.isGlobal(e)||(d.material[c].texture=b.urlFor(e))}),d.shaders&&d.shaders.uniforms&&m.default.parseUniforms(d.shaders.uniforms).forEach(function(c){var d=c.type,e=c.value,f=c.key,g=c.uniforms;"sampler2D"!==d||"string"!=typeof e||a.textures[e]||t.isGlobal(e)||(g[f]=b.urlFor(e))})};for(var f in a.styles)e(f)}return a},applyGlobalProperties:function(a,b){function c(a,b){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(d.indexOf(a)>-1)return void k.default({level:"warn",once:!0},"Global properties: cyclical reference detected",d);d.push(a);var f="global."===a.slice(0,7)&&a.slice(7).replace(/\./g,e);return f&&void 0!==b[f]?"string"==typeof b[f]&&"global."===b[f].slice(0,7)?c(b[f],b,d):f:void 0}function d(a,e,g){if("string"==typeof a){var h=c(a,f),j=f[h];void 0!==j&&(b.push({prop:h,target:e,key:g}),a=j)}else if("object"===("undefined"==typeof a?"undefined":i(a)))for(var k in a)a[k]=d(a[k],a,k);return a}if(!a.global||0===Object.keys(a.global).length)return a;var e=":",f=g(a.global,e);return b.forEach(function(a){var b=a.prop,c=a.target,d=a.key;c&&(c[d]=f[b])}),d(a)},hoistTextures:function(a){if(a.styles){var b=function(b){var c=a.styles[b],d=c.texture;if("string"==typeof d&&!a.textures[d]){var e=d,f=t.isGlobal(e)?"texture-"+e:e;a.textures[f]={url:e},c.texture=f}c.material&&["emission","ambient","diffuse","specular","normal"].forEach(function(b){var d=null!=c.material[b]&&c.material[b].texture;if("string"==typeof d&&!a.textures[d]){var e=d,f=t.isGlobal(e)?"texture-"+e:e;a.textures[f]={url:e},c.material[b].texture=f}}),c.shaders&&c.shaders.uniforms&&m.default.parseUniforms(c.shaders.uniforms).forEach(function(b){var c=b.type,d=b.value,e=b.key,f=b.uniforms;if("sampler2D"===c&&"string"==typeof d&&!a.textures[d]){var g=d,h=t.isGlobal(g)?"texture-"+g:g;a.textures[h]={url:g},f[e]=h}})};for(var c in a.styles)b(c)}},finalize:function(a){var b=a.config,c=a.bundle;return b?(b.scene=b.scene||{},b.cameras=b.cameras||{},b.lights=b.lights||{},b.styles=b.styles||{},b.layers=b.layers||{},b.camera&&(b.cameras.default=b.camera),0===Object.keys(b.cameras).length&&(b.cameras.default={}),(0===Object.keys(b.lights).length||Object.keys(b.lights).every(function(a){return b.lights[a].visible===!1}))&&(b.lights.default_light={type:"directional"}),{config:b,bundle:c}):{}}},s.default(h)},{"./gl/glsl":206,"./scene_bundle":228,"./utils/log":260,"./utils/merge":262,"./utils/subscribe":265,"./utils/urls":267}],230:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(c,"__esModule",{value:!0}),c.SceneWorker=void 0;var f=a("./utils/thread"),g=d(f),h=a("./utils/utils"),i=d(h),j=a("./utils/log"),k=d(j),l=a("./utils/worker_broker"),m=d(l),n=a("./tile"),o=d(n),p=a("./sources/data_source"),q=d(p),r=a("./selection"),s=d(r),t=a("./styles/style_parser"),u=a("./styles/style_manager"),v=a("./styles/layer"),w=a("./gl/texture"),x=d(w);c.SceneWorker=self,g.default.is_worker&&(Object.assign(self,{FeatureSelection:s.default,sources:{},styles:{},layers:{},tiles:{},init:function(a,b,c,d,e){return self.scene_id=a,self._worker_id=b,self.num_workers=c,k.default.setLevel(d),i.default.device_pixel_ratio=e,s.default.setPrefix(self._worker_id),self.style_manager=new u.StyleManager,b},updateConfig:function(a){var b=a.config,c=a.generation,d=a.introspection;b=JSON.parse(b),self.generation=c,self.introspection=d;for(var e in b.layers)b.layers[e]&&(b.layers[e].data=i.default.stringsToFunctions(b.layers[e].data));self.global=i.default.stringsToFunctions(b.global),self.createDataSources(b),b.styles=i.default.stringsToFunctions(b.styles,t.StyleParser.wrapFunction),self.styles=self.style_manager.build(b.styles),self.style_manager.initStyles({generation:self.generation,styles:self.styles,sources:self.sources,introspection:self.introspection}),self.layers=v.parseLayers(b.layers,self.style_manager.styles),self.syncing_textures=self.syncTextures(b.textures),self.configuring=self.syncing_textures.then(function(){k.default("debug","updated config")})},createDataSources:function(a){self.last_config_sources=self.config_sources||{},self.config_sources=a.sources;var b=self.sources,c=!1;a.sources=i.default.stringsToFunctions(a.sources),self.sources={};for(var d in a.sources)if(JSON.stringify(self.last_config_sources[d])!==JSON.stringify(a.sources[d])){var e=void 0;try{e=q.default.create(Object.assign({},a.sources[d],{name:d}),self.sources)}catch(a){continue}e&&(self.sources[d]=e,c=!0)}else self.sources[d]=b[d];c&&(self.tiles={})},awaitConfiguration:function(){return self.configuring},buildTile:function(a){var b=a.tile;if(null==self.getTile(b.key)||self.getTile(b.key).loading!==!0)return b=self.tiles[b.key]=Object.assign(self.getTile(b.key)||{},b),self.awaitConfiguration().then(function(){if(b.loaded!==!0)b.loading=!0,b.loaded=!1,b.error=null,self.loadTileSourceData(b).then(function(){return self.getTile(b.key)?(b.source_data.error&&k.default("warn","tile load error(s) for "+b.key+": "+b.source_data.error),b.loading=!1,b.loaded=!0,void o.default.buildGeometry(b,self)):void k.default("trace","stop tile build after data source load because tile was removed: "+b.key)}).catch(function(a){b.loading=!1,b.loaded=!1,b.error=a.stack,k.default("error","tile load error for "+b.key+": "+b.error),m.default.postMessage("TileManager_"+self.scene_id+".buildTileError",o.default.slice(b))});else{k.default("trace","used worker cache for tile "+b.key);try{o.default.buildGeometry(b,self)}catch(a){b.error=a.toString(),m.default.postMessage("TileManager_"+self.scene_id+".buildTileError",o.default.slice(b))}}})},loadTileSourceData:function(a){return self.sources[a.source]?self.sources[a.source].load(a):(a.source_data={},Promise.resolve(a))},getTile:function(a){return self.tiles[a]},removeTile:function(a){var b=self.tiles[a];null!=b&&(b.loading===!0&&(k.default("trace","cancel tile load for "+a),b.loading=!1,o.default.cancel(b)),s.default.clearTile(a),delete self.tiles[a],k.default("trace","remove tile from cache for "+a))},getFeatureSelection:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.id,c=a.key,d=s.default.map[c];return{id:b,feature:d&&d.feature}},resetFeatureSelection:function(){s.default.reset()},getFeatureSelectionMapSize:function(){return s.default.getMapSize()},syncTextures:function(a){var b=[];return a&&b.push.apply(b,e(Object.keys(a))),k.default("trace","sync textures to worker:",b),b.length>0?x.default.syncTexturesToWorker(b):Promise.resolve()},updateDevicePixelRatio:function(a){i.default.device_pixel_ratio=a},profile:function(a){console.profile("worker "+self._worker_id+": "+a)},profileEnd:function(a){console.profileEnd("worker "+self._worker_id+": "+a)}}),m.default.addTarget("self",self))},{"./gl/texture":209,"./selection":231,"./sources/data_source":232,"./styles/layer":238,"./styles/style_manager":245,"./styles/style_parser":246,"./tile":252,"./utils/log":260,"./utils/thread":266,"./utils/utils":268,"./utils/worker_broker":270}],231:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./utils/log"),h=d(g),i=a("./gl/texture"),j=d(i),k=a("./utils/worker_broker"),l=d(k),m=function(){function a(b,c,d){e(this,a),this.gl=b,this.workers=c,this._lock_fn="function"==typeof d&&d,this.init()}return f(a,[{key:"init",value:function(){this.requests={},this.feature=null,this.read_delay=0,this.read_delay_timer=null,this.pixel=new Uint8Array(4),this.pixel32=new Float32Array(this.pixel.buffer),this.fbo=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbo),this.fbo_size={width:256,height:256},this.fbo_size.aspect=this.fbo_size.width/this.fbo_size.height;var a=j.default.create(this.gl,"selection_fbo",{filtering:"nearest"});a.setData(this.fbo_size.width,this.fbo_size.height,null,{filtering:"nearest"}),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,a.texture,0);var b=this.gl.createRenderbuffer();this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,b),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.fbo_size.width,this.fbo_size.height),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,b),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:"destroy",value:function(){this.gl&&this.fbo&&(this.gl.deleteFramebuffer(this.fbo),this.fbo=null,this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbo),this.gl.viewport(0,0,this.fbo_size.width,this.fbo_size.height)}},{key:"getFeatureAt",value:function(a){var b=this;return!a||a.x<0||a.y<0||a.x>1||a.y>1?Promise.resolve({feature:null,changed:!1}):new Promise(function(c,d){b.selection_request_id=b.selection_request_id+1||0,b.requests[b.selection_request_id]={id:b.selection_request_id,point:a,resolve:c,reject:d}})}},{key:"pendingRequests",value:function(){return Object.keys(this.requests).length?this.requests:null}},{key:"hasPendingRequests",value:function(){return null!=this.pendingRequests()}},{key:"clearPendingRequests",value:function(){for(var a in this.requests){var b=this.requests[a];b.sent||(b.reject({request:b}),delete this.requests[a])}}},{key:"read",value:function(){var a=this;null!=this.read_delay_timer&&clearTimeout(this.read_delay_timer),this.read_delay_timer=setTimeout(function(){if(!a.locked){var b=a.gl;b.bindFramebuffer(b.FRAMEBUFFER,a.fbo);for(var c in a.requests){var d=a.requests[c];if(!d.sent){b.readPixels(Math.floor(d.point.x*a.fbo_size.width),Math.floor((1-d.point.y)*a.fbo_size.height),1,1,b.RGBA,b.UNSIGNED_BYTE,a.pixel);var e=a.pixel[0]+(a.pixel[1]<<8)+(a.pixel[2]<<16)+(a.pixel[3]<<24)>>>0,f=a.pixel[3];255!==f?null!=a.workers[f]&&l.default.postMessage(a.workers[f],"self.getFeatureSelection",{id:d.id,key:e}).then(function(b){a.finishRead(b)}):a.finishRead({id:d.id}),d.sent=!0}}b.bindFramebuffer(b.FRAMEBUFFER,null)}},this.read_delay)}},{key:"finishRead",value:function(a){var b=this.requests[a.id];if(!b)return void h.default("error","FeatureSelection.finishRead(): could not find message",a);var c=a.feature,d=!1;(null!=c&&null==this.feature||null==c&&null!=this.feature||null!=c&&null!=this.feature&&JSON.stringify(c)!==JSON.stringify(this.feature))&&(d=!0),this.feature=c,b.resolve({feature:c,changed:d,request:b}),delete this.requests[a.id]}},{key:"locked",get:function(){return this._lock_fn&&this._lock_fn()||!1}}],[{key:"makeEntry",value:function(a){this.map_entry++;var b=255&this.map_entry,c=this.map_entry>>8&255,d=this.map_entry>>16&255,e=this.map_prefix,f=b/255,g=c/255,h=d/255,i=e/255,j=b+(c<<8)+(d<<16)+(e<<24)>>>0;return this.map[j]={color:[f,g,h,i]},this.map_size++,this.tiles[a.key]||(this.tiles[a.key]={entries:[],tile:{key:a.key,coords:a.coords,style_zoom:a.style_zoom,source:a.source,generation:a.generation}}),this.tiles[a.key].entries.push(j),this.map[j]}},{key:"makeColor",value:function(a,b,c){var d=this.makeEntry(b);return d.feature={id:a.id,properties:a.properties,source_name:c.source,source_layer:c.layer,layers:c.layers,tile:this.tiles[b.key].tile},d.color}},{key:"reset",value:function(){this.tiles={},this.map={},this.map_size=0,this.map_entry=0}},{key:"clearTile",value:function(a){var b=this;this.tiles[a]&&(this.tiles[a].entries.forEach(function(a){return delete b.map[a]}),this.map_size-=this.tiles[a].entries.length,delete this.tiles[a])}},{key:"getMapSize",value:function(){return this.map_size}},{key:"setPrefix",value:function(a){this.map_prefix=a}}]),a}();c.default=m,m.map={},m.tiles={},m.map_size=0,m.map_entry=0,m.map_prefix=0,m.defaultColor=[0,0,0,1]},{"./gl/texture":209,"./utils/log":260,"./utils/worker_broker":270}],232:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.NetworkTileSource=c.NetworkSource=void 0;var j=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},k=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=a("../geo"),n=e(m),o=a("../utils/errors"),p=a("../utils/utils"),q=e(p),r=a("../utils/urls"),s=d(r),t=a("../utils/log"),u=e(t),v=function(){function a(b,c){var d=this;i(this,a),this.config=b,this.sources=c,this.id=b.id,this.name=b.name,this.pad_scale=b.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(b.rasters)&&b.rasters.forEach(function(a){-1===d.rasters.indexOf(a)&&d.rasters.push(a)}),this.transform=b.transform,"function"==typeof this.transform&&this.transform.bind(this),this.extra_data=b.extra_data,this.scripts=b.scripts,this.max_zoom=null!=b.max_zoom?b.max_zoom:n.default.default_source_max_zoom,this.min_display_zoom=null!=b.min_display_zoom?b.min_display_zoom:0,this.max_display_zoom=null!=b.max_display_zoom?b.max_display_zoom:null}return l(a,[{key:"load",value:function(a){var b=this;return a.source_data={},a.source_data.layers={},a.pad_scale=this.pad_scale,a.rasters=[].concat(h(this.rasters)),this._load(a).then(function(a){for(var c in a.source_data.layers){var d=a.source_data.layers[c];d&&d.features&&d.features.forEach(function(a){n.default.transformGeometry(a.geometry,function(a){a[1]=-a[1],b.pad_scale&&(a[0]=Math.round(a[0]*(1+b.pad_scale)-n.default.tile_scale*b.pad_scale/2),a[1]=Math.round(a[1]*(1+b.pad_scale)-n.default.tile_scale*b.pad_scale/2))}),b.updateDefaultWinding(a.geometry)})}return a.default_winding=b.default_winding||"CCW",a})}},{key:"_load",value:function(){throw new o.MethodNotImplemented("_load")}},{key:"updateDefaultWinding",value:function(a){return null==this.default_winding&&("Polygon"===a.type?this.default_winding=n.default.ringWinding(a.coordinates[0]):"MultiPolygon"===a.type&&(this.default_winding=n.default.ringWinding(a.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(a,b){if(a.z<this.min_display_zoom||null!=this.max_display_zoom&&b>this.max_display_zoom)return!1;for(var c=0;c<this.rasters.length;c++){var d=this.rasters[c];if(this.sources[d]&&this.sources[d]!==this&&!this.sources[d].includesTile(a,a.z))return!1}return!0}}],[{key:"create",value:function(b,c){return a.types[b.type]?new a.types[b.type](b,c):void 0}},{key:"changed",value:function(a,b){if(!a||!b)return!0;var c=Object.assign({},a.config,{id:null}),d=Object.assign({},b.config,{id:null});return JSON.stringify(c)!==JSON.stringify(d)}},{key:"projectData",value:function(a){var b=+new Date;for(var c in a.layers)for(var d=a.layers[c].features.length,e=0;d>e;e++){var f=a.layers[c].features[e];n.default.transformGeometry(f.geometry,function(a){var b=n.default.latLngToMeters(a),c=k(b,2),d=c[0],e=c[1];a[0]=d,a[1]=e})}void 0!==a.debug&&(a.debug.projection=+new Date-b)}},{key:"scaleData",value:function(a,b){var c=b.coords.z,d=b.min,e=(b.max,n.default.unitsPerMeter(c));for(var f in a.layers)for(var g=a.layers[f].features.length,h=0;g>h;h++){var i=a.layers[f].features[h];n.default.transformGeometry(i.geometry,function(a){a[0]=(a[0]-d.x)*e,a[1]=(a[1]-d.y)*e*-1})}}},{key:"register",value:function(b,c){b&&c&&(a.types[c]=b)}}]),a}();c.default=v,v.types={};var w=0,x=c.NetworkSource=function(a){function b(a,c){i(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.response_type="";var e=s.addParamsToURL(a.url,a.url_params),g=k(e,2),h=g[0],j=g[1];if(d.url=h,j.forEach(function(b){var c=k(b,2),e=c[0],f=c[1];u.default({level:"warn",once:!0},"Data source '"+d.name+"': parameter '"+e+"' already present in URL '"+a.url+"', "+("skipping value '"+e+"="+f+"' specified in 'url_params'"))}),"string"!=typeof d.url)throw Error("Network data source must provide a string `url` property");return d}return g(b,a),l(b,[{key:"_load",value:function(a){var b=this,c=this.formatUrl(this.url,a),d=a.source_data;return d.url=c,a.debug=a.debug||{},a.debug.network=+new Date,new Promise(function(e){d.error=null;var f=w++ +"-"+c,g=q.default.io(c,6e4,b.response_type,"GET",{},f);d.request_id=f,g.then(function(c){a.debug.response_size=c.length||c.byteLength,a.debug.network=+new Date-a.debug.network,a.debug.parsing=+new Date,b.parseSourceData(a,d,c),a.debug.parsing=+new Date-a.debug.parsing,e(a)}).catch(function(b){d.error=b.stack,e(a)})})}},{key:"formatUrl",value:function(){throw new o.MethodNotImplemented("formatUrl")}},{key:"parseSourceData",value:function(){throw new o.MethodNotImplemented("parseSourceData")}}]),b}(v);c.NetworkTileSource=function(a){function b(a,c){i(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return d.tiled=!0,d.parseBounds(a),d.builds_geometry_tiles=!1,d.tms=a.tms===!0,d.url.search("{s}")>-1&&(Array.isArray(a.url_subdomains)&&a.url_subdomains.length>0?(d.url_subdomains=a.url_subdomains,d.next_url_subdomain=0):u.default({level:"warn",once:!0},"Data source '"+d.name+"': source URL includes '{s}' subdomain marker ('"+d.url+"'), but no subdomains were specified in 'url_subdomains' parameter")),d}return g(b,a),l(b,[{key:"parseBounds",value:function(a){if(Array.isArray(a.bounds)&&4===a.bounds.length){this.bounds=a.bounds;var b=k(this.bounds,4),c=b[0],d=b[1],e=b[2],f=b[3];this.bounds_meters={min:n.default.latLngToMeters([c,f]),max:n.default.latLngToMeters([e,d])},this.bounds_tiles={min:{},max:{}}}}},{key:"checkBounds",value:function(a){if(this.bounds){a=n.default.wrapTile(a,{x:!0});var b=this.bounds_tiles.min[a.z];b||(b=this.bounds_tiles.min[a.z]=n.default.tileForMeters(this.bounds_meters.min,a.z));var c=this.bounds_tiles.max[a.z];if(c||(c=this.bounds_tiles.max[a.z]=n.default.tileForMeters(this.bounds_meters.max,a.z)),a.x<b.x||a.x>c.x||a.y<b.y||a.y>c.y)return!1}return!0}},{key:"includesTile",value:function(a,c){return!(!j(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"includesTile",this).call(this,a,c)||!this.checkBounds(a))}},{key:"formatUrl",value:function(a,b){var c=n.default.wrapTile(b.coords,{x:!0});this.tms&&(c.y=Math.pow(2,c.z)-1-c.y);var d=a.replace("{x}",c.x).replace("{y}",c.y).replace("{z}",c.z);return null!=this.url_subdomains&&(d=d.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),d}},{key:"urlHasTilePattern",value:function(a){return a&&a.search("{x}")>-1&&a.search("{y}")>-1&&a.search("{z}")>-1}}]),b}(x)},{"../geo":202,"../utils/errors":257,"../utils/log":260,"../utils/urls":267,"../utils/utils":268}],233:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b,c){var d=q.default.centroid(a);if(d){var e={};return Object.assign(e,b,c),{type:"Feature",properties:e,geometry:{type:"Point",coordinates:d}}}}Object.defineProperty(c,"__esModule",{value:!0}),c.GeoJSONTileSource=c.GeoJSONSource=void 0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},k=a("../utils/log"),l=d(k),m=a("./data_source"),n=d(m),o=a("./mvt"),p=a("../geo"),q=d(p),r=a("geojson-vt"),s=d(r),t=c.GeoJSONSource=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return d.load_data=null,d.tile_indexes={},d.max_zoom=Math.max(d.max_zoom||0,15),d.pad_scale=0,d}return g(b,a),i(b,[{key:"_load",value:function(a){var c=this;return this.load_data||(this.load_data=j(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"_load",this).call(this,{source_data:{layers:{}}}).then(function(a){a.source_data.error&&l.default("warn","data source load error(s) for source '"+c.name+"', URL '"+c.url+"': "+a.source_data.error);var b=a.source_data.layers;for(var d in b)c.tile_indexes[d]=s.default(b[d],{maxZoom:c.max_zoom,tolerance:3,extent:q.default.tile_scale,buffer:1e-4});return c.loaded=!0,a})),this.load_data.then(function(){for(var b in c.tile_indexes)a.source_data.layers[b]=c.getTileFeatures(a,b);return a})}},{key:"getTileFeatures",value:function(a,b){var c=q.default.wrapTile(a.coords,{x:!0}),d=this.tile_indexes[b].getTile(c.z,c.x,c.y),e=void 0;if(d&&d.features){e={type:"FeatureCollection",features:[]};for(var f=0;f<d.features.length;f++){var g=d.features[f],h={type:"Feature",geometry:{},properties:g.tags};if(1===g.type)h.geometry.coordinates=g.geometry.map(function(a){return[a[0],a[1]]}),h.geometry.type="MultiPoint";else{if(2!==g.type&&3!==g.type)continue;if(h.geometry.coordinates=g.geometry.map(function(a){return a.map(function(a){return[a[0],a[1]]})}),2===g.type)h.geometry.type="MultiLineString";else if(h.geometry=o.decodeMultiPolygon(h.geometry),null==h.geometry)continue}e.features.push(h)}}return e}},{key:"formatUrl",value:function(){return this.url}},{key:"parseSourceData",value:function(a,b,c){var d=JSON.parse(c),e=this.getLayers(d);b.layers=this.preprocessLayers(e)}},{key:"preprocessLayers",value:function(a){for(var b in a){var c=a[b];this.preprocessFeatures(c.features)}return"function"==typeof this.transform&&(1===Object.keys(a).length&&a._default?a._default=this.transform(a._default,this.extra_data):a=this.transform(a,this.extra_data)),a}},{key:"preprocessFeatures",value:function(a){return this.config.generate_label_centroids&&!function(){var b=[],c={label_placement:!0};a.forEach(function(a){if(null!=a.geometry){var d=void 0,e=void 0;switch(a.geometry.type){case"Polygon":d=a.geometry.coordinates,e=h(d,a.properties,c),b.push(e);break;case"MultiPolygon":d=a.geometry.coordinates;for(var f=-1/0,g=0,i=0;i<d.length;i++){var j=q.default.polygonArea(d[i]);j>f&&(f=j,g=i)}e=h(d[g],a.properties,c),b.push(e)}}}),b=b.filter(function(a){return a}),Array.prototype.push.apply(a,b)}(),a}},{key:"getLayers",value:function(a){return"Feature"===a.type?{_default:{type:"FeatureCollection",features:[a]}}:"FeatureCollection"===a.type?{_default:a}:a}}]),b}(m.NetworkSource),u=c.GeoJSONTileSource=function(a){function b(a,c){var d;e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));if(!g.urlHasTilePattern(g.url)){if("GeoJSON"===a.type){var h;return h=new t(a),f(g,h)}var i;return i=null,f(g,i)}return d=g,f(g,d)}return g(b,a),i(b,[{key:"parseSourceData",value:function(a,b,c){var d=JSON.parse(c);this.prepareGeoJSON(d,a,b)}},{key:"prepareGeoJSON",value:function(a,b,c){"function"==typeof this.transform&&(a=this.transform(a,this.extra_data)),c.layers=t.prototype.getLayers(a);var d={coords:b.coords,min:q.default.metersForTile(q.default.wrapTile(b.coords,{x:!0}))};n.default.projectData(c),n.default.scaleData(c,d)}}]),b}(m.NetworkTileSource);n.default.register(u,"GeoJSON")},{"../geo":202,"../utils/log":260,"./data_source":232,"./mvt":234,"geojson-vt":79}],234:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){for(var b=[],c=[],d=void 0,e=0;e<a.coordinates.length;e++){var f=a.coordinates[e],g=m.default.ringWinding(f);null!=g&&(d=d||g,g===d&&c.length>0&&(b.push(c),c=[]),c.push(f))}return c.length>0&&b.push(c),1===b.length?(a.type="Polygon",a.coordinates=b[0]):b.length>1?(a.type="MultiPolygon",a.coordinates=b):a=null,a}Object.defineProperty(c,"__esModule",{value:!0}),c.MVTSource=void 0;var i=function(){function a(a,b){
for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.decodeMultiPolygon=h;var j=a("./data_source"),k=d(j),l=a("../geo"),m=d(l),n=a("pbf"),o=d(n),p=a("vector-tile"),q=c.MVTSource=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return d.response_type="arraybuffer",d}return g(b,a),i(b,[{key:"parseSourceData",value:function(a,b,c){var d=new Uint8Array(c),e=new o.default(d);b.data=new p.VectorTile(e),b.layers=this.toGeoJSON(b.data),"function"==typeof this.transform&&(b.layers=this.transform(b.layers,this.extra_data)),delete b.data}},{key:"toGeoJSON",value:function(a){var b={};for(var c in a.layers){for(var d=a.layers[c],e=m.default.tile_scale/d.extent,f={type:"FeatureCollection",features:[]},g=0;g<d.length;g++){for(var i=d.feature(g),j={type:"Feature",geometry:{},properties:i.properties},k=j.geometry,l=i.loadGeometry(),n=0;n<l.length;n++)for(var o=l[n],q=0;q<o.length;q++)o[q]=[o[q].x*e,o[q].y*e];k.coordinates=l,"Point"===p.VectorTileFeature.types[i.type]?(k.type="Point",k.coordinates=k.coordinates[0][0]):"LineString"===p.VectorTileFeature.types[i.type]?1===l.length?(k.type="LineString",k.coordinates=k.coordinates[0]):k.type="MultiLineString":"Polygon"===p.VectorTileFeature.types[i.type]&&(k=h(k)),f.features.push(j)}b[c]=f}return b}}]),b}(j.NetworkTileSource);k.default.register(q,"MVT")},{"../geo":202,"./data_source":232,pbf:182,"vector-tile":193}],235:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.RasterTileSource=void 0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./data_source"),k=d(j),l=a("../tile"),m=d(l),n=a("../geo"),o=d(n),p=c.RasterTileSource=function(a){function b(a,c){f(this,b);var d=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return-1===d.rasters.indexOf(d.name)&&d.rasters.unshift(d.name),d.filtering=a.filtering,d.textures={},d}return h(b,a),i(b,[{key:"load",value:function(a){a.source_data={},a.source_data.layers={},a.pad_scale=this.pad_scale,a.rasters=[].concat(e(this.rasters));var b=o.default.tile_scale;return a.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[b,0],[b,-b],[0,-b],[0,0]]]},properties:{}}]}},a.default_winding="CW",Promise.resolve(a)}},{key:"tileTexture",value:function(a){var b=a.coords.key;if(!this.textures[b]){var c=m.default.coordinateWithMaxZoom(a.coords,this.max_zoom),d=this.formatUrl(this.url,{coords:c});this.textures[b]={url:d,filtering:this.filtering,coords:c}}return this.textures[b]}}]),b}(j.NetworkTileSource);k.default.register(p,"Raster")},{"../geo":202,"../tile":252,"./data_source":232}],236:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){var c=p.feature(a,b);return"Feature"===c.type&&(c={type:"FeatureCollection",features:[c]}),c}Object.defineProperty(c,"__esModule",{value:!0}),c.TopoJSONTileSource=c.TopoJSONSource=void 0;var j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},l=a("./data_source"),m=e(l),n=a("./geojson"),o=a("topojson-client"),p=d(o),q=c.TopoJSONSource=function(a){function b(){return f(this,b),g(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return h(b,a),j(b,[{key:"parseSourceData",value:function(a,c,d){var e=JSON.parse(d);e=this.toGeoJSON(e);var f=this.getLayers(e);k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"preprocessLayers",this).call(this,f),c.layers=f}},{key:"toGeoJSON",value:function(a){if(a.objects&&1===Object.keys(a.objects).length){var b=Object.keys(a.objects)[0];a=i(a,a.objects[b])}else{var c={};for(var d in a.objects)c[d]=i(a,a.objects[d]);a=c}return a}}]),b}(n.GeoJSONSource),r=c.TopoJSONTileSource=function(a){function b(a,c){f(this,b);var d=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));if(!d.urlHasTilePattern(d.url)){var e;return e=new q(a),g(d,e)}return d}return h(b,a),j(b,[{key:"parseSourceData",value:function(a,b,c){var d=JSON.parse(c);d=q.prototype.toGeoJSON(d),this.prepareGeoJSON(d,a,b)}}]),b}(n.GeoJSONTileSource);m.default.register(r,"TopoJSON")},{"./data_source":232,"./geojson":233,"topojson-client":188}],237:[function(a,b,c){"use strict";function d(a){return null!=a}function e(a){return"("+a+")"}function f(a){return"string"==typeof a?'"'+a+'"':a}function g(a){return"$"===a[0]?"context['"+a.substring(1)+"']":"context.feature.properties['"+a+"']"}function h(){return" true "}function i(a,b){return e(f(b)+" === "+g(a))}function j(a,b){return e(b.map(function(b){return i(a,b)}).join(" || "))}function k(a,b){return e(a.filter(d).map(function(a){return e(a.join(" && "))}).join(" "+b+" "))}function l(a,b,c){return b&&b.length>0?k(b.map(function(a){return r(a,c)}),"||"):"true"}function m(a,b,c){return b&&b.length>0?k(b.map(function(a){return r(a,c)}),"&&"):"true"}function n(a,b,c){return"!"+e(r(b,c).join(" && "))}function o(a,b,c){return"!"+e(l(null,b,c))}function p(a,b){return e(g(a)+(b?" != ":" == ")+"null")}function q(a,b,c){var d=[],f=c&&"function"==typeof c.rangeTransform&&c.rangeTransform;if(b.max){var h=f?f(b.max):b.max;d.push(""+g(a)+" < "+h)}if(b.min){var i=f?i=f(b.min):b.min;d.push(""+g(a)+" >= "+i)}return e(d.join(" && "))}function r(a,b){var c=[];if("function"==typeof a)return[e(a.toString()+"(context)")];if(Array.isArray(a))return[l(null,a,b)];if(null==a)return["true"];for(var d=Object.keys(a),f=0;f<d.length;f++){var g=d[f],k=a[g],r="undefined"==typeof k?"undefined":u(k);if("string"===r||"number"===r)c.push(i(g,k));else if("boolean"===r)c.push(p(g,k));else if("not"===g)c.push(n(g,k,b));else if("any"===g)c.push(l(g,k,b));else if("all"===g)c.push(m(g,k,b));else if("none"===g)c.push(o(g,k,b));else if(Array.isArray(k))c.push(j(g,k));else if("object"===r&&null!=k)(k.max||k.min)&&c.push(q(g,k,b));else{if(null!=k)throw new Error("Unknown Query syntax: "+k);c.push(h(g,k))}}return 0===d.length?["true"]:c}function s(a){return e(a.join(" && "))}function t(a,b){return null==a?function(){return!0}:new Function("context","return "+s(r(a,b))+";")}Object.defineProperty(c,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};c.buildFilter=t},{}],238:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function i(){return F}function j(a){if(a.length>1){for(var b=a[0],c=1;c<a.length;c++)b+="/"+a[c];return b}return a[0]}function k(a,b){for(var c=void 0,d=0,e=0;e<a.length;e++)a[e].length>d&&(d=a[e].length);if(0===d)return null;for(var f={visible:!0},g=function(d){return c=a.map(function(a){return a[d]&&a[d][b]}),0===c.length?"continue":(c.sort(function(a,b){return(a&&a.layer_name)>(b&&b.layer_name)?1:-1}),C.default.apply(void 0,[f].concat(h(c))),void delete f.layer_name)},i=0;d>i;i++)g(i);return f.visible===!1?null:f}function l(a){return E.indexOf(a)>-1}function m(a){return 0===Object.keys(a).length}function n(a){var b={},c={};for(var d in a)l(d)?b[d]=a[d]:c[d]=a[d];return[b,c]}function o(a){var b=[];if(a.parent){var c=a.parent.calculatedDraw||[];b.push.apply(b,h(c))}return b.push(a.draw),b}function p(a,b,c,d){b=null==b?{}:b;var e={name:a,layer:b,parent:c,styles:d},f=n(b),g=t(f,2),h=g[0],i=g[1],j=m(i),k=void 0;k=j&&null!=c?I:J;var l=new k(Object.assign(e,h));return l.enabled&&(c&&c.addLayer(l),l.children_to_parse=j?null:i),l}function q(a,b,c){for(var d in b){var e=b[d];if("object"!==("undefined"==typeof e?"undefined":u(e))||Array.isArray(e)){var f="Layer value must be an object: cannot create layer '"+d+": "+JSON.stringify(e)+"'";f+=", under parent layer '"+a.full_name+"'.",c[a.name]&&(f+=" The parent name '"+a.name+"' is also the name of a style, did you mean to create a 'draw' group",a.parent&&(f+=" under '"+a.parent.name+"'"),f+=" instead?"),A.default("warn",f)}else p(d,e,a,c)}}function r(a,b){F={};var c={};for(var d in a){var e=a[d];e&&(c[d]=p(d,e,null,b))}return c}function s(a,b,c,d){var e=!1,f=!1;if(0!==b.length){for(var g=0;g<b.length;g++){var h=b[g];h.is_leaf?h.doesMatch(a)&&(e=!0,c.push(h),d.push(h.id)):h.is_tree&&h.doesMatch(a)&&(e=!0,f=s(a,h.layers,c,d),f||(c.push(h),d.push(h.id)))}return e}}Object.defineProperty(c,"__esModule",{value:!0}),c.LayerTree=c.LayerLeaf=c.reserved=void 0;var t=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},v=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.layerCache=i,c.mergeTrees=k,c.groupProps=n,c.calculateDraw=o,c.parseLayerNode=p,c.parseLayers=r,c.matchFeature=s;var w=a("./style_parser"),x=a("../utils/utils"),y=d(x),z=a("../utils/log"),A=d(z),B=a("../utils/merge"),C=d(B),D=a("./filter"),E=c.reserved=["filter","draw","visible","enabled","data"],F={},G=["any","all","not","none"],H=function(){function a(b){var c=b.layer,d=b.name,e=b.parent,f=b.draw,h=b.visible,i=b.enabled,j=b.filter,k=b.styles;if(g(this,a),this.id=a.id++,this.config_data=c.data,this.parent=e,this.name=d,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=f,this.filter=j,this.styles=k,this.is_built=!1,i=void 0===i?h:i,this.enabled=(!this.parent||this.parent.visible!==!1)&&i!==!1,this.draw)for(var l in this.draw)if(this.draw[l]=null==this.draw[l]?{}:this.draw[l],"object"!==u(this.draw[l])){var m="Draw group '"+l+"' for layer "+this.full_name+" is invalid, must be an object, ";m+="but was set to `"+l+": "+this.draw[l]+"` instead",A.default("warn",m),delete this.draw[l]}else this.draw[l].layer_name=this.full_name}return v(a,[{key:"build",value:function(){A.default("trace","Building layer '"+this.full_name+"'"),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=y.default.stringsToFunctions(this.draw,w.StyleParser.wrapFunction),this.calculatedDraw=o(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=y.default.stringsToFunctions(this.filter,w.StyleParser.wrapFunction);var a=u(this.filter);if(null!=this.filter&&"object"!==a&&"function"!==a){var b="Filter for layer "+this.full_name+" is invalid, filter value must be an object or function, ";return b+="but was set to `filter: "+this.filter+"` instead",void A.default("warn",b)}try{this.buildZooms(),this.buildPropMatches(),this.filter=null!=this.filter&&("function"==typeof this.filter||Object.keys(this.filter).length>0)?D.buildFilter(this.filter,K):null}catch(a){var c="Filter for layer "+this.full_name+" is invalid, `filter: "+JSON.stringify(this.filter)+"` ";c+="failed with error '"+a.message+"', stack trace: "+a.stack,A.default("warn",c)}}},{key:"buildZooms",value:function(){var a=this.filter&&this.filter.$zoom,b="undefined"==typeof a?"undefined":u(a);if(null!=a&&"function"!==b){if(this.zooms={},"number"===b)this.zooms[a]=!0;else if(Array.isArray(a))for(var c=0;c<a.length;c++)this.zooms[a[c]]=!0;else if("object"===b&&(null!=a.min||null!=a.max))for(var d=a.min||0,e=a.max||25,f=d;e>f;f++)this.zooms[f]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var a=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach(function(b){if(-1===G.indexOf(b)){var c=a.filter[b],d="undefined"==typeof c?"undefined":u(c),e=Array.isArray(c);if(!e&&"string"!==d&&"number"!==d)return;"$"===b[0]?(a.context_prop_matches=a.context_prop_matches||[],a.context_prop_matches.push([b.substring(1),e?c:[c]])):(a.feature_prop_matches=a.feature_prop_matches||[],a.feature_prop_matches.push([b,e?c:[c]])),delete a.filter[b]}})}},{key:"doPropMatches",value:function(a){if(this.feature_prop_matches)for(var b=0;b<this.feature_prop_matches.length;b++){var c=this.feature_prop_matches[b],d=a.feature.properties[c[0]];if(null==d||-1===c[1].indexOf(d))return!1}if(this.context_prop_matches)for(var e=0;e<this.context_prop_matches.length;e++){var f=this.context_prop_matches[e],g=a[f[0]];if(null==g||-1===f[1].indexOf(g))return!1}return!0}},{key:"doesMatch",value:function(a){if(!this.enabled)return!1;if(this.is_built||this.build(),null!=this.zooms&&!this.zooms[a.zoom])return!1;if(!this.doPropMatches(a))return!1;var b=void 0;if(this.filter instanceof Function)try{b=this.filter(a)}catch(b){var c="Filter for this "+this.full_name+": `filter: "+this.filter_original+"` ";c+="failed with error '"+b.message+"', stack trace: "+b.stack,A.default("error",c,a.feature)}else b=null==this.filter;return!!b&&(this.children_to_parse&&(q(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),a}();H.id=0;var I=c.LayerLeaf=function(a){function b(a){g(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.is_leaf=!0,c}return f(b,a),b}(H),J=c.LayerTree=function(a){function b(a){g(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.is_tree=!0,c.layers=a.layers||[],c}return f(b,a),v(b,[{key:"addLayer",value:function(a){this.layers.push(a)}},{key:"buildDrawGroups",value:function(a){var b=[],c=[];if(s(a,[this],b,c),b.length>0){var d=j(c);if(void 0===F[d]){for(var e=b.map(function(a){return a&&a.visible!==!1&&a.calculatedDraw}),f={},g=0;g<e.length;g++){var h=e[g];if(h)for(var i=0;i<h.length;i++){var l=h[i];for(var m in l)f[m]=!0}}for(var n in f)F[d]=F[d]||{},F[d][n]=k(e,n),F[d][n]?(F[d][n].key=d+"/"+n,F[d][n].layers=b.map(function(a){return a&&a.full_name}),F[d][n].group=n):delete F[d][n];F[d]&&0===Object.keys(F[d]).length&&(F[d]=null)}return F[d]}}}]),b}(H),K={rangeTransform:function(a){return"string"==typeof a&&"px2"===a.trim().slice(-3)?parseFloat(a)+" * context.meters_per_pixel_sq":a}}},{"../utils/log":260,"../utils/merge":262,"../utils/utils":268,"./filter":237,"./style_parser":246}],239:[function(a,b,c){"use strict";function d(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.dash_color||e,d=b.background_color||f,g=a,h=b.scale||1;g.length%2===1&&Array.prototype.push.apply(g,g);for(var i=!0,j=[],k=0;k<g.length;k++){for(var l=Math.floor(g[k]*h),m=0;l>m;m++)Array.prototype.push.apply(j,i?c:d);i=!i}j=new Uint8Array(j);var n=j.length/4;return{pixels:j,length:n}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d;var e=[255,255,255,255],f=[0,0,0,0]},{}],240:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0}),c.Lines=void 0;var e=a("../style"),f=a("../style_parser"),g=a("../../gl/constants"),h=d(g),i=a("../../gl/texture"),j=d(i),k=a("../../gl/vertex_layout"),l=d(k),m=a("../../builders/polylines"),n=a("./dasharray"),o=d(n),p=a("../../geo"),q=d(p),r=a("../polygons/polygons"),s=c.Lines=Object.create(e.Style);Object.assign(s,{name:"lines",built_in:!0,vertex_shader_src:r.shaderSrc_polygonsVertex,fragment_shader_src:r.shaderSrc_polygonsFragment,selection:!0,init:function(){e.Style.init.apply(this,arguments);var a=[{name:"a_position",size:4,type:h.default.SHORT,normalized:!1},{name:"a_extrude",size:4,type:h.default.SHORT,normalized:!1},{name:"a_color",size:4,type:h.default.UNSIGNED_BYTE,normalized:!0}];this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.selection&&a.push({name:"a_selection_color",size:4,type:h.default.UNSIGNED_BYTE,normalized:!0}),(this.texture||this.dash)&&(this.texcoords=!0),this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0,this.defines.TANGRAM_DASH_SCALE=1,this.defines.TANGRAM_V_SCALE_ADJUST=q.default.tile_scale*this.defines.TANGRAM_DASH_SCALE,a.push({name:"a_texcoord",size:2,type:h.default.UNSIGNED_SHORT,normalized:!0})),this.vertex_layout=new l.default(a),this.outline_feature_style={},this.inline_feature_style=this.feature_style},compileSetup:function(){return this.compile_setup||this.parseLineTexture(),e.Style.compileSetup.apply(this,arguments)},parseLineTexture:function(){var a=this;if(this.dash){this.dash_background_color&&(this.dash_background_color=f.StyleParser.parseColor(this.dash_background_color),this.defines.TANGRAM_LINE_BACKGROUND_COLOR="vec3("+this.dash_background_color.slice(0,3).join(", ")+")"),this.defines.TANGRAM_DASH_SCALE=20,this.defines.TANGRAM_V_SCALE_ADJUST=q.default.tile_scale*this.defines.TANGRAM_DASH_SCALE;var b=o.default(this.dash,{scale:this.defines.TANGRAM_DASH_SCALE});this.texture="_"+this.name+"_dasharray",j.default.create(this.gl,this.texture,{data:b.pixels,height:b.length,width:1,filtering:"nearest"})}this.texture&&(this.defines.TANGRAM_LINE_TEXTURE=!0,this.defines.TANGRAM_ALPHA_TEST=.5,this.shaders.uniforms=this.shaders.uniforms||{},this.shaders.uniforms.u_texture=this.texture,this.shaders.uniforms.u_texture_ratio=1,j.default.getInfo(this.texture).then(function(b){b&&(a.shaders.uniforms.u_texture_ratio=b.height/b.width)}))},calcWidth:function(a,b){return a&&f.StyleParser.evalCachedDistanceProperty(a,b)||0},calcWidthNextZoom:function(a,b){b.zoom++;var c=this.calcWidth(a,b);return b.zoom--,c},_parseFeature:function(a,b,c){var d=this.feature_style,e=this.calcWidth(b.width,c);if(!(0>e)){var g=this.calcWidthNextZoom(b.next_width,c);if(!(0===e&&0===g||0>g)&&(d.width=e*c.units_per_meter_overzoom,d.next_width=2*g-e,d.next_width*=c.units_per_meter_overzoom,d.next_width/=2,d.color=this.parseColor(b.color,c),d.color)){if(d.z=b.z&&f.StyleParser.evalCachedDistanceProperty(b.z||0,c)||f.StyleParser.defaults.z,d.height=a.properties.height||f.StyleParser.defaults.height,d.extrude=f.StyleParser.evalProperty(b.extrude,c),d.extrude&&("number"==typeof d.extrude?d.height=d.extrude:Array.isArray(d.extrude)&&(d.height=d.extrude[1])),d.extrude&&d.height&&(d.z+=d.height),d.z*=q.default.height_scale,d.height*=q.default.height_scale,d.cap=b.cap,d.join=b.join,d.miter_limit=b.miter_limit,d.tile_edges=b.tile_edges,d.outline=d.outline||{width:{},next_width:{},preprocessed:!0},b.outline&&b.outline.visible!==!1&&b.outline.color&&b.outline.width){var h=2*this.calcWidth(b.outline.width,c),i=2*this.calcWidthNextZoom(b.outline.next_width,c);0===h&&0===i||0>h||0>i?(d.outline.width.value=null,d.outline.next_width.value=null,d.outline.color=null):(d.outline.width.value=h+e,d.outline.next_width.value=i+g,d.outline.color=b.outline.color,d.outline.cap=b.outline.cap||b.cap,d.outline.join=b.outline.join||b.join,d.outline.miter_limit=b.outline.miter_limit||b.miter_limit,d.outline.style=b.outline.style||this.name,d.outline.order=b.outline.order?this.parseOrder(b.outline.order,c):d.order,d.outline.order>d.order&&(d.outline.order=d.order),d.outline.order-=.5)}else d.outline.width.value=null,d.outline.next_width.value=null,d.outline.color=null;return d}}},_preprocess:function(a){return a.color=f.StyleParser.createColorPropertyCache(a.color),a.width=f.StyleParser.createPropertyCache(a.width,f.StyleParser.parseUnits),a.next_width=f.StyleParser.createPropertyCache(a.width,f.StyleParser.parseUnits),a.z=f.StyleParser.createPropertyCache(a.z,f.StyleParser.parseUnits),a.outline&&(a.outline.color=f.StyleParser.createColorPropertyCache(a.outline.color),a.outline.width=f.StyleParser.createPropertyCache(a.outline.width,f.StyleParser.parseUnits),a.outline.next_width=f.StyleParser.createPropertyCache(a.outline.width,f.StyleParser.parseUnits)),a},makeVertexTemplate:function(a){var b=0;return this.vertex_template[b++]=0,this.vertex_template[b++]=0,this.vertex_template[b++]=a.z||0,this.vertex_template[b++]=this.scaleOrder(a.order),this.vertex_template[b++]=0,this.vertex_template[b++]=0,this.vertex_template[b++]=0,this.vertex_template[b++]=a.next_width,this.vertex_template[b++]=255*a.color[0],this.vertex_template[b++]=255*a.color[1],this.vertex_template[b++]=255*a.color[2],this.vertex_template[b++]=255*a.color[3],this.selection&&(this.vertex_template[b++]=255*a.selection_color[0],this.vertex_template[b++]=255*a.selection_color[1],this.vertex_template[b++]=255*a.selection_color[2],this.vertex_template[b++]=255*a.selection_color[3]),this.texcoords&&(this.vertex_template[b++]=0,this.vertex_template[b++]=0),this.vertex_template},buildLines:function(a,b,c,d,e){if(this.feature_style=this.outline_feature_style,b.outline&&null!=b.outline.color&&null!=b.outline.width.value){var f=this.styles[b.outline.style];f&&f.addFeature(d.feature,b.outline,d)}this.feature_style=this.inline_feature_style;var g=this.makeVertexTemplate(b);m.buildPolylines(a,b.width,c,g,{cap:b.cap,join:b.join,miter_limit:b.miter_limit,scaling_index:this.vertex_layout.index.a_extrude,scaling_normalize:256,texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_width:(b.width||b.next_width)/d.tile.overzoom2,texcoord_normalize:65535,closed_polygon:e&&e.closed_polygon,remove_tile_edges:!b.tile_edges&&e&&e.remove_tile_edges,tile_edge_tolerance:q.default.tile_scale*d.tile.pad_scale*2})},buildPolygons:function(a,b,c,d){for(var e=0;e<a.length;e++)this.buildLines(a[e],b,c,d,{closed_polygon:!0,remove_tile_edges:!0})}})},{"../../builders/polylines":200,"../../geo":202,"../../gl/constants":203,"../../gl/texture":209,"../../gl/vertex_layout":214,"../polygons/polygons":242,"../style":244,"../style_parser":246,"./dasharray":239}],241:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0}),c.Points=void 0;var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=a("../../utils/log"),g=d(f),h=a("../style"),i=a("../style_parser"),j=a("../../gl/constants"),k=d(j),l=a("../../gl/vertex_layout"),m=d(l),n=a("../../builders/points"),o=a("../../gl/texture"),p=d(o),q=a("../../geo"),r=d(q),s=a("../../vector"),t=d(s),u=a("../../labels/collision"),v=d(u),w=a("../../labels/label_point"),x=d(w),y=a("../../labels/point_placement"),z=d(y),A=a("../text/text_labels"),B=a("../../view"),C=a("../../utils/debug_settings"),D=d(C),E="uniform vec2 u_resolution;\nuniform float u_time;\nuniform vec3 u_map_position;\nuniform vec4 u_tile_origin;\nuniform float u_tile_proxy_depth;\nuniform bool u_tile_fade_in;\nuniform float u_meters_per_pixel;\nuniform float u_device_pixel_ratio;\nuniform float u_visible_time;\nuniform bool u_view_panning;\nuniform float u_view_pan_snap_timer;\n\nuniform mat4 u_model;\nuniform mat4 u_modelView;\nuniform mat3 u_normalMatrix;\nuniform mat3 u_inverseNormalMatrix;\n\nattribute vec4 a_position;\nattribute vec4 a_shape;\nattribute vec4 a_color;\nattribute float a_outline_edge;\nattribute vec4 a_outline_color;\nattribute vec2 a_texcoord;\nattribute vec2 a_offset;\n\n#define PI 3.14159265359\n\n#ifdef TANGRAM_CURVED_LABEL\n    attribute vec4 a_offsets;\n    attribute vec4 a_pre_angles;\n    attribute vec4 a_angles;\n#endif\n\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#define TANGRAM_PX_FADE_RANGE 2.\n\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying vec4 v_world_position;\nvarying float v_alpha_factor;\nvarying float v_aa_factor;\n\n#ifdef TANGRAM_SHADER_POINT\n    varying float v_outline_edge;\n    varying vec4 v_outline_color;\n#endif\n\n#ifdef TANGRAM_MULTI_SAMPLER\n    varying float v_sampler;\n#endif\n\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n\nvec2 rotate2D(vec2 _st, float _angle) {\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle)) * _st;\n}\n\n// Assumes stops are [0, 0.33, 0.66, 0.99];\nfloat mix4linear(float a, float b, float c, float d, float x) {\n    return mix(mix(a, b, 3. * x),\n               mix(b,\n                   mix(c, d, 3. * (max(x, .66) - .66)),\n                   3. * (clamp(x, .33, .66) - .33)),\n               step(0.33, x)\n            );\n}\n\n// Determines if a shader-drawn point is being rendered (vs. a sprite or text label)\nbool isShaderPoint() {\n    #ifdef TANGRAM_SHADER_POINT\n        #ifdef TANGRAM_MULTI_SAMPLER\n            if (v_sampler == 0.) { // sprite sampler\n                return true;\n            }\n        #else\n            return true;\n        #endif\n    #endif\n    return false;\n}\n\nvoid main() {\n    // Initialize globals\n    #pragma tangram: setup\n\n    v_alpha_factor = 1.0;\n    v_color = a_color;\n    v_texcoord = a_texcoord;\n    v_aa_factor = 1. / length(a_shape.xy / 256.) * TANGRAM_PX_FADE_RANGE;\n\n    #ifdef TANGRAM_SHADER_POINT\n        v_outline_color = a_outline_color;\n        v_outline_edge = a_outline_edge;\n    #endif\n\n    // Position\n    vec4 position = u_modelView * vec4(a_position.xyz, 1.);\n\n    // Apply positioning and scaling in screen space\n    vec2 shape = a_shape.xy / 256.;                 // values have an 8-bit fraction\n    vec2 offset = vec2(a_offset.x, -a_offset.y);    // flip y to make it point down\n\n    float zoom = clamp(u_map_position.z - u_tile_origin.z, 0., 1.); //fract(u_map_position.z);\n    float theta = a_shape.z / 4096.;\n\n    #ifdef TANGRAM_CURVED_LABEL\n        if (a_offsets[0] != 0.){\n            #ifdef TANGRAM_FADE_ON_ZOOM_IN\n                v_alpha_factor *= clamp(1. + TANGRAM_FADE_ON_ZOOM_IN_RATE - TANGRAM_FADE_ON_ZOOM_IN_RATE * (u_map_position.z - u_tile_origin.z), 0., 1.);\n            #endif\n\n            vec4 angles_scaled = (PI / 16384.) * a_angles;\n            vec4 pre_angles_scaled = (PI / 128.) * a_pre_angles;\n            vec4 offsets_scaled = (1. / 64.) * a_offsets;\n\n            float pre_angle = mix4linear(pre_angles_scaled[0], pre_angles_scaled[1], pre_angles_scaled[2], pre_angles_scaled[3], zoom);\n            float angle = mix4linear(angles_scaled[0], angles_scaled[1], angles_scaled[2], angles_scaled[3], zoom);\n            float offset_curve = mix4linear(offsets_scaled[0], offsets_scaled[1], offsets_scaled[2], offsets_scaled[3], zoom);\n\n            shape = rotate2D(shape, pre_angle); // rotate in place\n            shape.x += offset_curve;            // offset for curved label segment\n            shape = rotate2D(shape, angle);     // rotate relative to curved label anchor\n            shape += rotate2D(offset, theta);   // offset if specified in the scene file\n        }\n        else {\n            shape = rotate2D(shape + offset, theta);\n        }\n    #else\n        shape = rotate2D(shape + offset, theta);\n    #endif\n\n    #ifdef TANGRAM_MULTI_SAMPLER\n        v_sampler = a_shape.w; // texture sampler\n    #endif\n\n    // Fade in (if requested) based on time mesh has been visible.\n    // Value passed to fragment shader in the v_alpha_factor varying\n    #ifdef TANGRAM_FADE_IN_RATE\n        if (u_tile_fade_in) {\n            v_alpha_factor *= clamp(u_visible_time * TANGRAM_FADE_IN_RATE, 0., 1.);\n        }\n    #endif\n\n    // Fade out when tile is zooming out, e.g. acting as proxy tiles\n    // NB: this is mostly done to compensate for text label collision happening at the label's 1x zoom. As labels\n    // in proxy tiles are scaled down, they begin to overlap, and the fade is a simple way to ease the transition.\n    // Value passed to fragment shader in the v_alpha_factor varying\n    #ifdef TANGRAM_FADE_ON_ZOOM_OUT\n        v_alpha_factor *= clamp(1. + TANGRAM_FADE_ON_ZOOM_OUT_RATE * (u_map_position.z - u_tile_origin.z), 0., 1.);\n    #endif\n\n    // World coordinates for 3d procedural textures\n    v_world_position = u_model * position;\n    v_world_position.xy += shape * u_meters_per_pixel;\n    v_world_position = wrapWorldPosition(v_world_position);\n\n    // Modify position before camera projection\n    #pragma tangram: position\n\n    cameraProjection(position);\n\n    #ifdef TANGRAM_LAYER_ORDER\n        // +1 is to keep all layers including proxies > 0\n        applyLayerOrder(a_position.w + u_tile_proxy_depth + 1., position);\n    #endif\n\n    // Apply pixel offset in screen-space\n    // Multiply by 2 is because screen is 2 units wide Normalized Device Coords (and u_resolution device pixels wide)\n    // Device pixel ratio adjustment is because shape is in logical pixels\n    position.xy += shape * position.w * 2. * u_device_pixel_ratio / u_resolution;\n\n    // Snap to pixel grid\n    // Only applied to fully upright sprites/labels (not shader-drawn points), while panning is not active\n    if (!u_view_panning && (abs(theta) < TANGRAM_EPSILON) && !isShaderPoint()) {\n        vec2 position_fract = fract((((position.xy / position.w) + 1.) * .5) * u_resolution);\n        vec2 position_snap = position.xy + ((step(0.5, position_fract) - position_fract) * position.w * 2. / u_resolution);\n\n        // Animate the snapping to smooth the transition and make it less noticeable\n        #ifdef TANGRAM_VIEW_PAN_SNAP_RATE\n            position.xy = mix(position.xy, position_snap, clamp(u_view_pan_snap_timer * TANGRAM_VIEW_PAN_SNAP_RATE, 0., 1.));\n        #else\n            position.xy = position_snap;\n        #endif\n    }\n\n    gl_Position = position;\n}\n",F="uniform vec2 u_resolution;\nuniform float u_time;\nuniform vec3 u_map_position;\nuniform vec4 u_tile_origin;\nuniform float u_meters_per_pixel;\nuniform float u_device_pixel_ratio;\nuniform float u_visible_time;\n\nuniform mat3 u_normalMatrix;\nuniform mat3 u_inverseNormalMatrix;\n\nuniform sampler2D u_texture;\n\n#ifdef TANGRAM_MULTI_SAMPLER\nuniform sampler2D u_label_texture;\nvarying float v_sampler;\n#endif\n\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying vec4 v_world_position;\nvarying float v_alpha_factor;\nvarying float v_aa_factor;\n\n#ifdef TANGRAM_SHADER_POINT\n    varying vec4 v_outline_color;\n    varying float v_outline_edge;\n#endif\n\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n\n// Alpha discard threshold (substitute for alpha blending)\n#ifndef TANGRAM_ALPHA_TEST\n#define TANGRAM_ALPHA_TEST 0.5\n#endif\n\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n\nvoid main (void) {\n    // Initialize globals\n    #pragma tangram: setup\n\n    vec4 color = v_color;\n\n    #ifdef TANGRAM_MULTI_SAMPLER\n    if (v_sampler == 0.) { // sprite sampler\n    #endif\n        #ifdef TANGRAM_TEXTURE_POINT\n            // Draw sprite\n            color *= texture2D(u_texture, v_texcoord);\n        #else\n            // Draw a point\n            vec2 uv = v_texcoord * 2. - 1.; // fade alpha near circle edge\n            float point_dist = length(uv);\n            color = mix(\n                color,\n                v_outline_color,\n                (1. - smoothstep(v_outline_edge - v_aa_factor, v_outline_edge + v_aa_factor, 1.-point_dist)) * step(.000001, v_outline_edge)\n            );\n            color.a = mix(color.a, 0., (smoothstep(1. - v_aa_factor, 1., point_dist)));\n\n        #endif\n    #ifdef TANGRAM_MULTI_SAMPLER\n    }\n    else { // label sampler\n        color = texture2D(u_label_texture, v_texcoord);\n        color.rgb /= max(color.a, 0.001); // un-multiply canvas texture\n    }\n    #endif\n\n    // Manually un-multiply alpha, for cases where texture has pre-multiplied alpha\n    #ifdef TANGRAM_UNMULTIPLY_ALPHA\n        color.rgb /= max(color.a, 0.001);\n    #endif\n\n    // If blending is off, use alpha discard as a lower-quality substitute\n    #if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\n        if (color.a < TANGRAM_ALPHA_TEST) {\n            discard;\n        }\n    #endif\n\n    #pragma tangram: color\n\n    color.a *= v_alpha_factor;\n\n    #pragma tangram: filter\n\n    gl_FragColor = color;\n}\n",G=x.default.PLACEMENT,H=128/Math.PI,I=16384/Math.PI,J=64,K=65535,L=c.Points=Object.create(h.Style);
Object.assign(L,A.TextLabels),Object.assign(L,{name:"points",built_in:!0,collision:!0,blend:"overlay",init:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];h.Style.init.call(this,a),this.vertex_shader_src=E,this.fragment_shader_src=F;var c=[{name:"a_position",size:4,type:k.default.SHORT,normalized:!1},{name:"a_shape",size:4,type:k.default.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:k.default.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:k.default.SHORT,normalized:!1},{name:"a_color",size:4,type:k.default.UNSIGNED_BYTE,normalized:!0}];b.length&&Array.prototype.push.apply(c,b),this.selection=!0,c.push({name:"a_selection_color",size:4,type:k.default.UNSIGNED_BYTE,normalized:!0}),"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.shaders.uniforms=this.shaders.uniforms||{},this.shaders.uniforms.u_label_texture=p.default.default,this.texture?(this.defines.TANGRAM_TEXTURE_POINT=!0,this.shaders.uniforms.u_texture=this.texture):(this.defines.TANGRAM_SHADER_POINT=!0,c.push({name:"a_outline_color",size:4,type:k.default.UNSIGNED_BYTE,normalized:!0}),c.push({name:"a_outline_edge",size:1,type:k.default.FLOAT,normalized:!1})),this.vertex_layout=new m.default(c),this.defines.TANGRAM_MULTI_SAMPLER=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,D.default.suppress_label_fade_in===!0?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),D.default.suppress_label_snap_animation!==!0&&(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=1/B.VIEW_PAN_SNAP_TIME),this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(a,b,c){var d=c.tile;if(d.generation===this.generation&&(b=this.preprocess(b))){var e={};if(e.color=this.parseColor(b.color,c),e.color||this.texture){var f=void 0;if(this.hasSprites()){if(f=this.parseSprite(b,c),!f)return;e.texcoords=f.texcoords}if(e.size=b.size,e.size?(e.size=i.StyleParser.evalCachedProperty(e.size,c),"number"==typeof e.size&&(e.size=[e.size,e.size])):e.size=f?f.size:[16,16],b.outline&&(e.outline_width=i.StyleParser.evalCachedProperty(b.outline.width,c)||i.StyleParser.defaults.outline.width,e.outline_color=this.parseColor(b.outline.color,c)),e.outline_edge_pct=0,e.outline_width&&e.outline_color){var h=e.outline_width+1;e.size[0]+=h,e.size[1]+=h,e.outline_edge_pct=h/Math.min(e.size[0],e.size[1])*2}e.size=[Math.min(e.size[0],256),Math.min(e.size[1],256)],e.placement=b.placement,e.placement_min_length_ratio=i.StyleParser.evalCachedProperty(b.placement_min_length_ratio,c),e.placement===G.SPACED&&b.placement_spacing&&(e.placement_spacing=i.StyleParser.evalCachedProperty(b.placement_spacing,c)),e.angle=i.StyleParser.evalProperty(b.angle,c)||0,e.z=b.z&&i.StyleParser.evalCachedDistanceProperty(b.z,c)||i.StyleParser.defaults.z,e.tile_edges=b.tile_edges,e.sampler=0,this.computeLayout(e,a,b,c,d);var j=b.text&&b.text.visible!==!1&&this.parseTextFeature(a,b.text,c,d);Array.isArray(j)&&(j=null,g.default({level:"warn",once:!0},"Layer '"+b.layers[b.layers.length-1]+"': cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+("provided 'text_source' value was '"+JSON.stringify(b.text.text_source)+"'"))),j&&(j.layout.parent=e,j.layout.priority=b.text.priority?Math.max(j.layout.priority,e.priority+.5):e.priority+.5,j.layout.move_into_tile=!1,v.default.addStyle(this.collision_group_text,d.key)),this.queueFeature({feature:a,draw:b,context:c,style:e,text_feature:j},d),v.default.addStyle(this.collision_group_points,d.key)}}},hasSprites:function(){return this.texture&&p.default.textures[this.texture]&&p.default.textures[this.texture].sprites},getSpriteInfo:function(a){var b=p.default.textures[this.texture].sprites[a]&&p.default.getSpriteInfo(this.texture,a);return a&&!b&&(this.texture_missing_sprites[a]||(g.default("debug","Style: in style '"+this.name+"', could not find sprite '"+a+"' for texture '"+this.texture+"'"),this.texture_missing_sprites[a]=!0)),b},parseSprite:function(a,b){var c=i.StyleParser.evalProperty(a.sprite,b),d=this.getSpriteInfo(c)||this.getSpriteInfo(a.sprite_default);return d},queueFeature:function(a,b){this.tile_data[b.key]&&this.queues[b.key]||this.startData(b),this.queues[b.key].push(a)},startData:function(a){return this.queues[a.key]=[],h.Style.startData.call(this,a)},endData:function(a){var b=this;if(a.canceled)return g.default("trace","Style "+this.name+": stop tile build because tile was canceled: "+a.key),Promise.resolve();var c=this.queues[a.key];delete this.queues[a.key];var d=[],f=[];return c.forEach(function(a){for(var c=a.style,e=a.feature,g=e.geometry,h=b.buildLabels(c.size,g,c),i=0;i<h.length;i++){var j=h[i],k={feature:e,draw:a.draw,context:a.context,style:c,label:j};if(f.push(k),a.text_feature){var l={feature:e,draw:a.text_feature.draw,context:a.context,text:a.text_feature.text,text_settings_key:a.text_feature.text_settings_key,layout:a.text_feature.layout,point_label:j,linked:k};d.push(l),a.draw.text.optional||(k.linked=l)}}}),Promise.all([v.default.collide(f,this.collision_group_points,a.key).then(function(a){a.forEach(function(a){b.feature_style=a.style,b.feature_style.label=a.label,h.Style.addFeature.call(b,a.feature,a.draw,a.context)})}),this.prepareTextLabels(a,this.collision_group_text,d).then(function(c){return b.collideAndRenderTextLabels(a,b.collision_group_text,c)})]).then(function(c){var d=e(c,2),f=d[1],g=f.labels,i=f.texts,j=f.texture;return g&&i&&g.forEach(function(a){var c=a.text_settings_key,d=i[c]&&i[c][a.text],e=b.feature_style;e.label=a.label,e.size=d.size.logical_size,e.angle=0,e.texcoords=d.align[a.label.align].texcoords,e.sampler=1,h.Style.addFeature.call(b,a.feature,a.draw,a.context)}),b.freeText(a),h.Style.endData.call(b,a).then(function(a){return j&&a&&(a.uniforms=a.uniforms||{},a.textures=a.textures||[],a.uniforms.u_label_texture=j,a.textures.push(j)),a})})},_preprocess:function(a){return a.color=i.StyleParser.createColorPropertyCache(a.color),a.outline&&(a.outline.color=i.StyleParser.createColorPropertyCache(a.outline.color),a.outline.width=i.StyleParser.createPropertyCache(a.outline.width,function(a){return Array.isArray(a)?a.map(parseFloat):parseFloat(a)})),a.z=i.StyleParser.createPropertyCache(a.z,i.StyleParser.parseUnits),a.size=i.StyleParser.createPropertyCache(a.size,function(a){return Array.isArray(a)?a.map(parseFloat):parseFloat(a)}),a.offset=i.StyleParser.createPropertyCache(a.offset,function(a){return Array.isArray(a)&&a.map(parseFloat)||0}),a.buffer=i.StyleParser.createPropertyCache(a.buffer,function(a){return(Array.isArray(a)?a:[a,a]).map(parseFloat)||0}),a.repeat_distance=i.StyleParser.createPropertyCache(a.repeat_distance,parseFloat),a.placement=G[a.placement&&a.placement.toUpperCase()],null==a.placement&&(a.placement=G.VERTEX),a.placement_spacing=null!=a.placement_spacing?a.placement_spacing:80,a.placement_spacing=i.StyleParser.createPropertyCache(a.placement_spacing,parseFloat),a.placement_min_length_ratio=null!=a.placement_min_length_ratio?a.placement_min_length_ratio:1,a.placement_min_length_ratio=i.StyleParser.createPropertyCache(a.placement_min_length_ratio,parseFloat),a.angle="number"==typeof a.angle?a.angle*Math.PI/180:a.angle||0,a.text=this.preprocessText(a.text),a.text&&(a.text.key=a.key,a.text.repeat_group=a.text.repeat_group||a.repeat_group,a.text.anchor=a.text.anchor||this.default_anchor,a.text.optional="boolean"==typeof a.text.optional&&a.text.optional,a.text.interactive=a.text.interactive||a.interactive),a},default_anchor:["bottom","top","right","left"],computeLayout:function(a,b,c,d,e){var f=a||{};f.id=b,f.units_per_pixel=e.units_per_pixel||1,f.collide=c.collide!==!1,f.cull_from_tile=null!=c.cull_from_tile&&c.cull_from_tile,f.move_into_tile=!1,f.anchor=c.anchor,f.offset=i.StyleParser.evalCachedProperty(c.offset,d)||i.StyleParser.zeroPair,f.buffer=i.StyleParser.evalCachedProperty(c.buffer,d)||i.StyleParser.zeroPair,f.repeat_distance=i.StyleParser.evalCachedProperty(c.repeat_distance,d),f.repeat_distance&&(f.repeat_distance*=f.units_per_pixel,f.repeat_group="function"==typeof c.repeat_group?c.repeat_group(d):"string"==typeof c.repeat_group?c.repeat_group:c.key);var g=c.priority;return null!=g?"function"==typeof g&&(g=g(d)):g=-1>>>0,f.priority=g,f},buildTextLabels:function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=this.texts[a][e.text_settings_key][e.text],g=f.size.collision_size;e.label=new x.default(e.point_label.position,g,e.layout),c.push(e)}return c},buildLabels:function(a,b,c){var d=[];if("Point"===b.type)d.push(new x.default(b.coordinates,a,c));else if("MultiPoint"===b.type)for(var e=b.coordinates,f=0;f<e.length;++f){var g=e[f];d.push(new x.default(g,a,c))}else if("LineString"===b.type)for(var h=b.coordinates,i=z.default(h,a,c),j=0;j<i.length;++j)d.push(i[j]);else if("MultiLineString"===b.type)for(var k=b.coordinates,l=0;l<k.length;l++)for(var m=k[l],n=z.default(m,a,c),o=0;o<n.length;++o)d.push(n[o]);else if("Polygon"===b.type)if(c.placement===G.CENTROID){var p=r.default.centroid(b.coordinates);d.push(new x.default(p,a,c))}else for(var q=b.coordinates,s=0;s<q.length;s++)for(var t=z.default(q[s],a,c),u=0;u<t.length;++u)d.push(t[u]);else if("MultiPolygon"===b.type)if(c.placement===G.CENTROID){var v=r.default.multiCentroid(b.coordinates);d.push(new x.default(v,a,c))}else for(var w=b.coordinates,y=0;y<w.length;y++)for(var A=w[y],B=0;B<A.length;B++)for(var C=z.default(A[B],a,c),D=0;D<C.length;++D)d.push(C[D]);return d},makeVertexTemplate:function(a){var b=a.color||i.StyleParser.defaults.color;if(this.fillVertexTemplate("a_position",0,{size:2}),this.fillVertexTemplate("a_position",a.z||0,{size:1,offset:2}),this.fillVertexTemplate("a_position",this.scaleOrder(a.order),{size:1,offset:3}),this.fillVertexTemplate("a_shape",0,{size:4}),this.fillVertexTemplate("a_texcoord",0,{size:2}),this.fillVertexTemplate("a_offset",0,{size:2}),this.fillVertexTemplate("a_color",t.default.mult(b,255),{size:4}),this.defines.TANGRAM_SHADER_POINT){var c=a.outline_color||i.StyleParser.defaults.outline.color;this.fillVertexTemplate("a_outline_color",t.default.mult(c,255),{size:4}),this.fillVertexTemplate("a_outline_edge",a.outline_edge_pct||i.StyleParser.defaults.outline.width,{size:1})}return this.selection&&this.fillVertexTemplate("a_selection_color",t.default.mult(a.selection_color,255),{size:4}),this.vertex_template},buildQuad:function(a,b,c,d,e,f,g,h,i,j,k,l){n.buildQuadsForPoints(a,k,l,{texcoord_index:this.vertex_layout.index.a_texcoord,position_index:this.vertex_layout.index.a_position,shape_index:this.vertex_layout.index.a_shape,offset_index:this.vertex_layout.index.a_offset,offsets_index:this.vertex_layout.index.a_offsets,pre_angles_index:this.vertex_layout.index.a_pre_angles,angles_index:this.vertex_layout.index.a_angles,outline_edge_index:f?null:this.vertex_layout.index.a_outline_edge},{quad:b,quad_normalize:256,offset:g,offsets:h,pre_angles:e,angle:4096*c,angles:d,shape_w:f,curve:j,texcoord_scale:i,texcoord_normalize:K,pre_angles_normalize:H,angles_normalize:I,offsets_normalize:J})},build:function(a,b){var c=a.label;"curved"===c.type?this.buildArticulatedLabel(c,a,b):this.buildLabel(c,a,b)},buildLabel:function(a,b,c){var d=this.makeVertexTemplate(b),e=a.angle||b.angle,f=void 0,g=void 0;a.type?(f=b.size[a.type],g=b.texcoords[a.type]):(f=b.size,g=b.texcoords);var h=a.offset;this.buildQuad([a.position],f,e,null,null,b.sampler,h,null,g,!1,c,d)},buildArticulatedLabel:function(a,b,c){for(var d=this.makeVertexTemplate(b),e=a.angle,f=0;f<a.num_segments;f++){var g=b.size[a.type][f],h=b.texcoords_stroke[f],i=a.offset||[0,0],j=a.position,k=a.angles[f],l=a.offsets[f],m=a.pre_angles[f];this.buildQuad([j],g,e,k,m,b.sampler,i,l,h,!0,c,d)}for(var n=0;n<a.num_segments;n++){var o=b.size[a.type][n],p=b.texcoords[a.type][n],q=a.offset||[0,0],r=a.position,s=a.angles[n],t=a.offsets[n],u=a.pre_angles[n];this.buildQuad([r],o,e,s,u,b.sampler,q,t,p,!0,c,d)}},buildLines:function(a,b,c){this.build(b,c)},buildPoints:function(a,b,c){this.build(b,c)},buildPolygons:function(a,b,c){this.build(b,c)},makeMesh:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c=Object.assign({},c,{fade_in_time:this.fade_in_time}),h.Style.makeMesh.call(this,a,b,c)}})},{"../../builders/points":198,"../../geo":202,"../../gl/constants":203,"../../gl/texture":209,"../../gl/vertex_layout":214,"../../labels/collision":215,"../../labels/label_point":219,"../../labels/point_placement":221,"../../utils/debug_settings":256,"../../utils/log":260,"../../vector":271,"../../view":272,"../style":244,"../style_parser":246,"../text/text_labels":250}],242:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0}),c.shaderSrc_polygonsFragment=c.shaderSrc_polygonsVertex=c.Polygons=void 0;var e=a("../style"),f=a("../style_parser"),g=a("../../gl/constants"),h=d(g),i=a("../../gl/vertex_layout"),j=d(i),k=a("../../builders/polygons"),l=a("../../geo"),m=d(l),n='uniform vec2 u_resolution;\nuniform float u_time;\nuniform vec3 u_map_position;\nuniform vec4 u_tile_origin;\nuniform float u_tile_proxy_depth;\nuniform float u_meters_per_pixel;\nuniform float u_device_pixel_ratio;\n\nuniform mat4 u_model;\nuniform mat4 u_modelView;\nuniform mat3 u_normalMatrix;\nuniform mat3 u_inverseNormalMatrix;\n\nattribute vec4 a_position;\nattribute vec4 a_color;\n\n// Optional normal attribute, otherwise default to up\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\n    attribute vec3 a_normal;\n    #define TANGRAM_NORMAL a_normal\n#else\n    #define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n\n// Optional dynamic line extrusion\n#ifdef TANGRAM_EXTRUDE_LINES\n    // xy: extrusion direction in xy plane\n    // z:  half-width of line (amount to extrude)\n    // w:  scaling factor for interpolating width between zooms\n    attribute vec4 a_extrude;\n#endif\n\nvarying vec4 v_position;\nvarying vec3 v_normal;\nvarying vec4 v_color;\nvarying vec4 v_world_position;\n\n// Optional texture UVs\n#ifdef TANGRAM_TEXTURE_COORDS\n    attribute vec2 a_texcoord;\n    varying vec2 v_texcoord;\n#endif\n\n// Optional model position varying for tile coordinate zoom\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\n    varying vec4 v_modelpos_base_zoom;\n#endif\n\n#if defined(TANGRAM_LIGHTING_VERTEX)\n    varying vec4 v_lighting;\n#endif\n\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n\nvoid main() {\n    // Initialize globals\n    #pragma tangram: setup\n\n    // Texture UVs\n    #ifdef TANGRAM_TEXTURE_COORDS\n        v_texcoord = a_texcoord;\n        #ifdef TANGRAM_EXTRUDE_LINES\n            v_texcoord.y *= TANGRAM_V_SCALE_ADJUST;\n        #endif\n    #endif\n\n    // Pass model position to fragment shader\n    #ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\n        v_modelpos_base_zoom = modelPositionBaseZoom();\n    #endif\n\n    // Position\n    vec4 position = vec4(a_position.xy, a_position.z / TANGRAM_HEIGHT_SCALE, 1.); // convert height back to meters\n\n    #ifdef TANGRAM_EXTRUDE_LINES\n        vec2 extrude = a_extrude.xy / 256.; // values have an 8-bit fraction\n        float width = a_extrude.z;\n        float dwdz = a_extrude.w;\n\n        // Adjust line width based on zoom level, to prevent proxied lines from being either too small or too big.\n        // "Flattens" the zoom between 1-2 to peg it to 1 (keeps lines from prematurely shrinking), then interpolate\n        // and clamp to 4 (keeps lines from becoming too small when far away).\n        float dz = clamp(u_map_position.z - u_tile_origin.z, 0., 4.);\n        dz += step(1., dz) * (1. - dz) + mix(0., 2., clamp((dz - 2.) / 2., 0., 1.));\n\n        // Interpolate between zoom levels\n        width += dwdz * dz;\n\n        // Scale pixel dimensions to be consistent in screen space\n        // Scale from style zoom units back to tile zoom\n        width *= exp2(-dz - (u_tile_origin.z - u_tile_origin.w));\n\n        // Modify line width before extrusion\n        #pragma tangram: width\n\n        position.xy += extrude * width;\n    #endif\n\n    // World coordinates for 3d procedural textures\n    v_world_position = wrapWorldPosition(u_model * position);\n\n    // Adjust for tile and view position\n    position = u_modelView * position;\n\n    // Modify position before camera projection\n    #pragma tangram: position\n\n    // Setup varyings\n    v_position = position;\n    v_normal = normalize(u_normalMatrix * TANGRAM_NORMAL);\n    v_color = a_color;\n\n    #if defined(TANGRAM_LIGHTING_VERTEX)\n        // Vertex lighting\n        vec3 normal = v_normal;\n\n        // Modify normal before lighting\n        #pragma tangram: normal\n\n        // Pass lighting intensity to fragment shader\n        v_lighting = calculateLighting(position.xyz - u_eye, normal, vec4(1.));\n    #endif\n\n    // Camera\n    cameraProjection(position);\n\n    // +1 is to keep all layers including proxies > 0\n    applyLayerOrder(a_position.w + u_tile_proxy_depth + 1., position);\n\n    gl_Position = position;\n}\n',o="uniform vec2 u_resolution;\nuniform float u_time;\nuniform vec3 u_map_position;\nuniform vec4 u_tile_origin;\nuniform float u_meters_per_pixel;\nuniform float u_device_pixel_ratio;\n\nuniform mat3 u_normalMatrix;\nuniform mat3 u_inverseNormalMatrix;\n\nvarying vec4 v_position;\nvarying vec3 v_normal;\nvarying vec4 v_color;\nvarying vec4 v_world_position;\n\n#define TANGRAM_NORMAL v_normal\n\n#ifdef TANGRAM_TEXTURE_COORDS\n    varying vec2 v_texcoord;\n#endif\n\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\n    varying vec4 v_modelpos_base_zoom;\n#endif\n\n#if defined(TANGRAM_LIGHTING_VERTEX)\n    varying vec4 v_lighting;\n#endif\n\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n\nvoid main (void) {\n    // Initialize globals\n    #pragma tangram: setup\n\n    vec4 color = v_color;\n    vec3 normal = TANGRAM_NORMAL;\n\n    // Apply raster to vertex color\n    #ifdef TANGRAM_RASTER_TEXTURE_COLOR\n        color *= sampleRaster(0); // multiplied to tint texture color\n    #endif\n\n    // Apply line texture\n    #ifdef TANGRAM_LINE_TEXTURE\n        vec2 _line_st = vec2(v_texcoord.x, fract(v_texcoord.y / u_texture_ratio));\n        vec4 _line_color = texture2D(u_texture, _line_st);\n\n        if (_line_color.a < TANGRAM_ALPHA_TEST) {\n            #ifdef TANGRAM_LINE_BACKGROUND_COLOR\n                color.rgb = TANGRAM_LINE_BACKGROUND_COLOR;\n            #elif !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\n                discard; // use discard when alpha blending is unavailable\n            #else\n                color.a = 0.; // use alpha channel when blending is available\n            #endif\n        }\n        else {\n            color *= _line_color;\n        }\n    #endif\n\n    // First, get normal from raster tile (if applicable)\n    #ifdef TANGRAM_RASTER_TEXTURE_NORMAL\n        normal = normalize(sampleRaster(0).rgb * 2. - 1.);\n    #endif\n\n    // Second, alter normal with normal map texture (if applicable)\n    #if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\n        calculateNormal(normal);\n    #endif\n\n    // Normal modification applied here for fragment lighting or no lighting,\n    // and in vertex shader for vertex lighting\n    #if !defined(TANGRAM_LIGHTING_VERTEX)\n        #pragma tangram: normal\n    #endif\n\n    // Color modification before lighting is applied\n    #pragma tangram: color\n\n    #if defined(TANGRAM_LIGHTING_FRAGMENT)\n        // Calculate per-fragment lighting\n        color = calculateLighting(v_position.xyz - u_eye, normal, color);\n    #elif defined(TANGRAM_LIGHTING_VERTEX)\n        // Apply lighting intensity interpolated from vertex shader\n        color *= v_lighting;\n    #endif\n\n    // Post-processing effects (modify color after lighting)\n    #pragma tangram: filter\n\n    gl_FragColor = color;\n}\n",p=c.Polygons=Object.create(e.Style);c.shaderSrc_polygonsVertex=n,c.shaderSrc_polygonsFragment=o,Object.assign(p,{name:"polygons",built_in:!0,vertex_shader_src:n,fragment_shader_src:o,init:function(){e.Style.init.apply(this,arguments);var a=[{name:"a_position",size:4,type:h.default.SHORT,normalized:!1},{name:"a_normal",size:3,type:h.default.BYTE,normalized:!0},{name:"a_color",size:4,type:h.default.UNSIGNED_BYTE,normalized:!0}];this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.selection=!0,a.push({name:"a_selection_color",size:4,type:h.default.UNSIGNED_BYTE,normalized:!0}),this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0,a.push({name:"a_texcoord",size:2,type:h.default.UNSIGNED_SHORT,normalized:!0})),this.vertex_layout=new j.default(a)},_parseFeature:function(a,b,c){var d=this.feature_style;return d.color=this.parseColor(b.color,c),d.color?(d.z=b.z&&f.StyleParser.evalCachedDistanceProperty(b.z,c)||f.StyleParser.defaults.z,d.z*=m.default.height_scale,d.extrude=f.StyleParser.evalProperty(b.extrude,c),d.extrude&&(d.extrude===!0?(d.height=a.properties.height||f.StyleParser.defaults.height,d.min_height=a.properties.min_height||f.StyleParser.defaults.min_height):"number"==typeof d.extrude?(d.height=d.extrude,d.min_height=0):Array.isArray(d.extrude)&&(d.min_height=d.extrude[0],d.height=d.extrude[1]),d.height*=m.default.height_scale,d.min_height*=m.default.height_scale),d.tile_edges=b.tile_edges,d):null},_preprocess:function(a){return a.color=f.StyleParser.createColorPropertyCache(a.color),a.z=f.StyleParser.createPropertyCache(a.z,f.StyleParser.parseUnits),a},makeVertexTemplate:function(a){var b=0;return this.vertex_template[b++]=0,this.vertex_template[b++]=0,this.vertex_template[b++]=a.z||0,this.vertex_template[b++]=this.scaleOrder(a.order),this.vertex_template[b++]=0,this.vertex_template[b++]=0,this.vertex_template[b++]=127,this.vertex_template[b++]=255*a.color[0],this.vertex_template[b++]=255*a.color[1],this.vertex_template[b++]=255*a.color[2],this.vertex_template[b++]=255*a.color[3],this.selection&&(this.vertex_template[b++]=255*a.selection_color[0],this.vertex_template[b++]=255*a.selection_color[1],this.vertex_template[b++]=255*a.selection_color[2],this.vertex_template[b++]=255*a.selection_color[3]),this.texcoords&&(this.vertex_template[b++]=0,this.vertex_template[b++]=0),this.vertex_template},buildPolygons:function(a,b,c,d){var e=this.makeVertexTemplate(b),f={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!b.tile_edges,tile_edge_tolerance:m.default.tile_scale*d.tile.pad_scale*4,winding:d.winding};b.extrude&&b.height?k.buildExtrudedPolygons(a,b.z,b.height,b.min_height,c,e,this.vertex_layout.index.a_normal,127,f):k.buildPolygons(a,c,e,f)}})},{"../../builders/polygons":199,"../../geo":202,"../../gl/constants":203,"../../gl/vertex_layout":214,"../style":244,"../style_parser":246}],243:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.RasterStyle=void 0;var d=a("../style_parser"),e=a("../polygons/polygons"),f=c.RasterStyle=Object.create(e.Polygons);Object.assign(f,{name:"raster",super:e.Polygons,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1},_preprocess:function(a){return a.color=a.color||d.StyleParser.defaults.color,this.super._preprocess.apply(this,arguments)}})},{"../polygons/polygons":242,"../style_parser":246}],244:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0}),c.Style=void 0;var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=a("./style_parser"),g=a("../selection"),h=d(g),i=a("../gl/shader_program"),j=d(i),k=a("../gl/vbo_mesh"),l=d(k),m=a("../gl/texture"),n=d(m),o=a("../material"),p=d(o),q=a("../light"),r=d(q),s=a("../sources/raster"),t=a("../utils/log"),u=d(t),v=a("../utils/merge"),w=d(v),x=a("../utils/thread"),y=d(x),z=a("../utils/worker_broker"),A=d(z),B="// Fragment shader for feature selection passes\n// Renders in silhouette according to selection (picking) color, or black if none defined\n\n#ifdef TANGRAM_FEATURE_SELECTION\n    varying vec4 v_selection_color;\n#endif\n\nvoid main (void) {\n    #ifdef TANGRAM_FEATURE_SELECTION\n        gl_FragColor = v_selection_color;\n    #else\n        gl_FragColor = vec4(0., 0., 0., 1.);\n    #endif\n}\n",C="// Uniforms defining raster textures and macros for accessing them\n\n#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_rasters[TANGRAM_NUM_RASTER_SOURCES];    // raster tile texture samplers\nuniform vec2 u_raster_sizes[TANGRAM_NUM_RASTER_SOURCES];    // raster tile texture sizes (width/height in pixels)\nuniform vec3 u_raster_offsets[TANGRAM_NUM_RASTER_SOURCES];  // raster tile texture UV starting offset for tile\n\n// Note: the raster accessors below are #defines rather than functions to\n// avoid issues with constant integer expressions for array indices\n\n// Adjusts UVs in model space to account for raster tile texture overzooming\n// (applies scale and offset adjustments)\n#define adjustRasterUV(raster_index, uv) \\\n    ((uv) * u_raster_offsets[raster_index].z + u_raster_offsets[raster_index].xy)\n\n// Returns the UVs of the current model position for a raster sampler\n#define currentRasterUV(raster_index) \\\n    (adjustRasterUV(raster_index, v_modelpos_base_zoom.xy))\n\n// Returns pixel location in raster tile texture at current model position\n#define currentRasterPixel(raster_index) \\\n    (currentRasterUV(raster_index) * rasterPixelSize(raster_index))\n\n// Samples a raster tile texture for the current model position\n#define sampleRaster(raster_index) \\\n    (texture2D(u_rasters[raster_index], currentRasterUV(raster_index)))\n\n// Samples a raster tile texture for a given pixel\n#define sampleRasterAtPixel(raster_index, pixel) \\\n    (texture2D(u_rasters[raster_index], adjustRasterUV(raster_index, (pixel) / rasterPixelSize(raster_index))))\n\n// Returns size of raster sampler in pixels\n#define rasterPixelSize(raster_index) \\\n    (u_raster_sizes[raster_index])\n\n#endif\n",D=c.Style={init:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.generation,c=a.styles,d=a.sources,e=void 0===d?{}:d,g=a.introspection;this.generation=b,this.styles=c,this.sources=e,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=g||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.main_thread_target=["Style",this.name,this.generation].join("/"),y.default.is_main&&A.default.addTarget(this.main_thread_target,this),this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_"+this.blend.toUpperCase()]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof p.default||(p.default.isValid(this.material)||(this.material=f.StyleParser.defaults.material),this.material=new p.default(this.material)),this.material.inject(this),r.default.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},fillVertexTemplate:function(a,b,c){var d=c.size,e=c.offset;e=void 0===e?0:e;var f=this.vertex_layout.index[a];if(void 0===f)return void u.default("warn","Style: in style '"+this.name+"', no index found in vertex layout for attribute '"+a+"'");for(var g=0;d>g;++g){var h=b.length>g?b[g]:b;this.vertex_template[f+g+e]=h}},startData:function(a){return this.tile_data[a.key]={vertex_data:null,uniforms:{},textures:[]},this.tile_data[a.key]},endData:function(a){var b=this.tile_data[a.key];return this.tile_data[a.key]=null,b&&b.vertex_data&&b.vertex_data.vertex_count>0?(b.vertex_data.end(),b.vertex_elements=b.vertex_data.element_buffer,b.vertex_data=b.vertex_data.vertex_buffer,this.buildRasterTextures(a,b).then(function(){return b})):Promise.resolve(null)},hasDataForTile:function(a){return null!=this.tile_data[a]},addFeature:function(a,b,c){var d=c.tile;if(d.generation===this.generation){this.tile_data[d.key]||this.startData(d);var e=this.parseFeature(a,b,c);e&&(this.tile_data[d.key].vertex_data||(this.tile_data[d.key].vertex_data=this.vertex_layout.createVertexData()),this.buildGeometry(a.geometry,e,this.tile_data[d.key].vertex_data,c))}},buildGeometry:function(a,b,c,d){"Polygon"===a.type?this.buildPolygons([a.coordinates],b,c,d):"MultiPolygon"===a.type?this.buildPolygons(a.coordinates,b,c,d):"LineString"===a.type?this.buildLines([a.coordinates],b,c,d):"MultiLineString"===a.type?this.buildLines(a.coordinates,b,c,d):"Point"===a.type?this.buildPoints([a.coordinates],b,c,d):"MultiPoint"===a.type&&this.buildPoints(a.coordinates,b,c,d)},parseFeature:function(a,b,c){try{var d=this.feature_style;if(b=this.preprocess(b),!b)return;if(d.order=this.parseOrder(b.order,c),null==d.order&&"overlay"!==this.blend){var e="Layer '"+b.layers.join(", ")+"', draw group '"+b.group+"': ";return e+="'order' parameter is required unless blend mode is 'overlay'",null!=b.order&&(e+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",e+="or JS function), but evaluated to null for one or more features"),void u.default({level:"warn",once:!0},e)}var g=!1;return d.interactive=this.introspection||b.interactive,this.selection&&(g=f.StyleParser.evalProperty(d.interactive,c)),d.selection_color=g?h.default.makeColor(a,c.tile,c):h.default.defaultColor,d=this._parseFeature(a,b,c)}catch(b){u.default("error","Style.parseFeature: style parsing error",a,d,b)}},_parseFeature:function(){return this.feature_style},preprocess:function(a){if(!a.preprocessed){if(this.draw&&w.default(a,this.draw),a=this._preprocess(a),!a)return;a.preprocessed=!0}return a},_preprocess:function(a){return a},parseOrder:function(a,b){return"number"!=typeof a?f.StyleParser.calculateOrder(a,b):a},scaleOrder:function(a){return 2*a},parseColor:function(a,b){return a?f.StyleParser.evalCachedColorProperty(a,b):this.shaders.blocks.color||this.shaders.blocks.filter?f.StyleParser.defaults.color:void 0},buildPolygons:function(){},buildLines:function(){},buildPoints:function(){},setGL:function(a){this.gl=a,this.max_texture_size=n.default.getMaxTextureSize(this.gl)},makeMesh:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new l.default(this.gl,a,b,this.vertex_layout,c)},render:function(a){return a.render()},getProgram:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program";this.compileSetup();var b=this[a];if(b&&!b.error)return b.compiled||(u.default("debug","Compiling style '"+this.name+"', program key '"+a+"'"),b.compile()),b},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for "+this.name+" because no GL context");var a=this.buildDefineList();if(this.selection){var b=Object.assign({},a);b.TANGRAM_FEATURE_SELECTION=!0}var c=this.shaders&&this.shaders.blocks,d=this.shaders&&this.shaders.block_scopes,e=Object.assign({},this.shaders&&this.shaders.uniforms);
for(var f in e)null==e[f]&&u.default({level:"warn",once:!0},"Style '"+this.name+"' has invalid uniform '"+f+"': uniform values must be non-null");var g=this.shaders&&this.shaders.extensions;"string"==typeof g&&(g=[g]),this.program=new j.default(this.gl,this.vertex_shader_src,this.fragment_shader_src,{name:this.name,defines:a,uniforms:e,blocks:c,block_scopes:d,extensions:g}),this.selection_program=this.selection?new j.default(this.gl,this.vertex_shader_src,B,{name:this.name+" (selection)",defines:b,uniforms:e,blocks:c,block_scopes:d,extensions:g}):null,this.compile_setup=!0}},addShaderBlock:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[a]=this.shaders.blocks[a]||[],this.shaders.blocks[a].push(b),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[a]=this.shaders.block_scopes[a]||[],this.shaders.block_scopes[a].push(c)},removeShaderBlock:function(a){this.shaders.blocks&&(this.shaders.blocks[a]=null)},replaceShaderBlock:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.removeShaderBlock(a),this.addShaderBlock(a,b,c)},buildDefineList:function(){var a={};if(null!=this.defines)for(var b in this.defines)a[b]=this.defines[b];if(null!=this.shaders&&null!=this.shaders.defines)for(b in this.shaders.defines)a[b]=this.shaders.defines[b];return a},hasRasters:function(){return["color","normal","custom"].indexOf(this.raster)>-1},setupRasters:function(){var a=this;if(this.hasRasters()){"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var b=Object.keys(this.sources).filter(function(b){return a.sources[b]instanceof s.RasterTileSource}).length;this.defines.TANGRAM_NUM_RASTER_SOURCES="int("+b+")",b>0&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",C,"Raster"))}},buildRasterTextures:function(a,b){var c=this;if(!this.hasRasters())return Promise.resolve(b);var d={},f={};return a.rasters.map(function(a){return c.sources[a]}).filter(function(a){return a}).forEach(function(b,c){if(b instanceof s.RasterTileSource){var e=b.tileTexture(a);d[e.url]=e,f[e.url]=c}}),0===Object.keys(d).length?Promise.resolve(b):A.default.postMessage(this.main_thread_target+".loadTextures",d).then(function(c){if(!c||c.length<1)return b;b.uniforms=b.uniforms||{},b.textures=b.textures||[];var g=b.uniforms.u_rasters=[],h=b.uniforms.u_raster_sizes=[],i=b.uniforms.u_raster_offsets=[];return c.forEach(function(c){var j=e(c,3),k=j[0],l=j[1],m=j[2],n=f[k],o=d[k].coords;if(g[n]=k,b.textures.push(k),h[n]=[l,m],a.coords.z>o.z){var p=a.coords.z-o.z,q=Math.pow(2,p);i[n]=[a.coords.x%q/q,(q-1-a.coords.y%q)/q,1/q]}else i[n]=[0,0,1]}),b})},loadTextures:function(a){return n.default.createFromObject(this.gl,a).then(function(){return Promise.all(Object.keys(a).map(function(a){return n.default.textures[a]&&n.default.textures[a].load()}).filter(function(a){return a}))}).then(function(a){return a.forEach(function(a){return a.retain()}),a.map(function(a){return[a.name,a.width,a.height]})})},setup:function(){this.setUniforms(),this.material.setupProgram(j.default.current)},setUniforms:function(){var a=j.default.current;a&&a.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,overlay:4},blendOrderSort:function(a,b){return"opaque"===a.blend||"opaque"===b.blend?"opaque"===a.blend&&"opaque"===b.blend?a.name<b.name?-1:1:"opaque"===a.blend?-1:1:a.blend_order<b.blend_order?-1:a.blend_order>b.blend_order?1:D.default_blend_orders[a.blend]<D.default_blend_orders[b.blend]?-1:D.default_blend_orders[a.blend]>D.default_blend_orders[b.blend]?1:a.name<b.name?-1:1}}},{"../gl/shader_program":208,"../gl/texture":209,"../gl/vbo_mesh":211,"../light":224,"../material":225,"../selection":231,"../sources/raster":235,"../utils/log":260,"../utils/merge":262,"../utils/thread":266,"../utils/worker_broker":270,"./style_parser":246}],245:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.StyleManager=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../gl/shader_program"),i=d(h),j=a("../utils/merge"),k=d(j),l=a("../geo"),m=d(l),n=a("../utils/log"),o=d(n),p=a("./polygons/polygons"),q=a("./lines/lines"),r=a("./points/points"),s=a("./text/text"),t=a("./raster/raster"),u="#ifdef TANGRAM_VERTEX_SHADER\n\n// Vertex position in model space: [0, 1] range over the local tile\n// Note positions can be outside that range due to unclipped geometry, geometry higher than a unit cube, etc.\nvec4 modelPosition() {\n    return\n        vec4(\n            a_position.xyz / TANGRAM_TILE_SCALE         // scale coords to ~0-1 range\n            * exp2(u_tile_origin.z - u_tile_origin.w),  // adjust for tile overzooming\n        1.)\n        + vec4(0., 1., 0., 0.);\n        // NB: additional offset to account for unusual Tangram JS y coords,\n        // should be refactored to remove\n}\n\n// Position in model space as above, but according to tile coordinate (as opposed to style) zoom\n// e.g. unadjusted for tile overzooming\nvec4 modelPositionBaseZoom() {\n    return\n        vec4(\n            a_position.xyz / TANGRAM_TILE_SCALE,    // scale coords to ~0-1 range\n        1.)\n        + vec4(0., 1., 0., 0.); // see note on offset above\n}\n\n#endif\n\n// Vertex position in world coordinates, useful for 3d procedural textures, etc.\nvec4 worldPosition() {\n    return v_world_position;\n}\n\n// Optionally wrap world coordinates (allows more precision at higher zooms)\n// e.g. at wrap 1000, the world space will wrap every 1000 meters\n#ifdef TANGRAM_VERTEX_SHADER\n\nvec4 wrapWorldPosition(vec4 world_position) {\n    #if defined(TANGRAM_WORLD_POSITION_WRAP)\n    vec2 anchor = u_tile_origin.xy - mod(u_tile_origin.xy, TANGRAM_WORLD_POSITION_WRAP);\n        world_position.xy -= anchor;\n    #endif\n    return world_position;\n}\n\n#endif\n\n// Normal in world space\n#if defined(TANGRAM_VERTEX_SHADER)\n\nvec3 worldNormal() {\n    return TANGRAM_NORMAL;\n}\n\n#elif defined(TANGRAM_FRAGMENT_SHADER)\n\nvec3 worldNormal() {\n    return u_inverseNormalMatrix * TANGRAM_NORMAL;\n}\n\n#endif\n",v="// Apply layer ordering to avoid z-fighting\nvoid applyLayerOrder (float layer, inout vec4 position) {\n    position.z -= layer * TANGRAM_LAYER_DELTA * position.w;\n}\n",w="// Vertex attribute + varying for feature selection\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\n    attribute vec4 a_selection_color;\n    varying vec4 v_selection_color;\n#endif\n",x="// Selection pass-specific rendering\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\n    if (a_selection_color.rgb == vec3(0.)) {\n        // Discard by forcing invalid triangle if we're in the feature\n        // selection pass but have no selection info\n        // TODO: in some cases we may actually want non-selectable features to occlude selectable ones?\n        gl_Position = vec4(0., 0., 0., 1.);\n        return;\n    }\n    v_selection_color = a_selection_color;\n#endif\n";c.StyleManager=function(){function a(){f(this,a),this.styles={},this.base_styles={},this.register(Object.create(p.Polygons)),this.register(Object.create(q.Lines)),this.register(Object.create(r.Points)),this.register(Object.create(s.TextStyle)),this.register(Object.create(t.RasterStyle))}return g(a,[{key:"init",value:function(){i.default.removeBlock("global"),i.default.removeBlock("setup"),i.default.addBlock("global",u),i.default.addBlock("global",v),i.default.addBlock("global",w),i.default.replaceBlock("setup",x),i.default.defines.TANGRAM_EPSILON=1e-5,i.default.defines.TANGRAM_LAYER_DELTA=1/16384,i.default.defines.TANGRAM_TILE_SCALE="vec3("+m.default.tile_scale+"., "+m.default.tile_scale+"., u_meters_per_pixel * "+m.default.tile_size+".)",i.default.defines.TANGRAM_HEIGHT_SCALE=m.default.height_scale}},{key:"destroy",value:function(a){var b=this;Object.keys(this.styles).forEach(function(c){var d=b.styles[c];d.gl===a&&(o.default("trace","StyleManager.destroy: destroying render style "+d.name),d.base&&b.remove(d.name),d.destroy())})}},{key:"register",value:function(a){this.styles[a.name]=a,this.base_styles[a.name]=a}},{key:"remove",value:function(a){delete this.styles[a]}},{key:"mix",value:function(a,b){if(a.mixed)return a;a.mixed={};var c=[];if(a.mix){if(Array.isArray(a.mix)){var d;(d=c).push.apply(d,e(a.mix))}else c.push(a.mix);c=c.map(function(a){return b[a]}).filter(function(b){return b&&b!==a}),c.forEach(function(b){return a.mixed[b.name]=!0})}c.push(a),a.animated=c.some(function(a){return a&&a.animated}),a.texcoords=c.some(function(a){return a&&a.texcoords}),a.base=c.map(function(a){return a.base}).filter(function(a){return a}).pop(),a.lighting=c.map(function(a){return a.lighting}).filter(function(a){return null!=a}).pop(),a.texture=c.map(function(a){return a.texture}).filter(function(a){return a}).pop(),a.raster=c.map(function(a){return a.raster}).filter(function(a){return null!=a}).pop(),a.dash=c.map(function(a){return a.dash}).filter(function(a){return null!=a}).pop(),a.dash_background_color=c.map(function(a){return a.dash_background_color}).filter(function(a){return null!=a}).pop(),c.some(function(a){return a.hasOwnProperty("blend")&&a.blend})&&(a.blend=c.map(function(a){return a.hasOwnProperty("blend")&&a.blend}).filter(function(a){return a}).pop()),a.blend_order=c.map(function(a){return a.blend_order}).filter(function(a){return null!=a}).pop(),a.defines=Object.assign.apply(Object,[{}].concat(e(c.map(function(a){return a.defines}).filter(function(a){return a})))),a.material=Object.assign.apply(Object,[{}].concat(e(c.map(function(a){return a.material}).filter(function(a){return a}))));var f=c.map(function(a){return a.draw}).filter(function(a){return a});return f.length>0&&(a.draw=k.default.apply(void 0,[{}].concat(e(f)))),this.mixShaders(a,b,c),a}},{key:"mixShaders",value:function(a,b,c){var d={},f=c.map(function(a){return a.shaders}).filter(function(a){return a});if(d.defines=Object.assign.apply(Object,[{}].concat(e(f.map(function(a){return a.defines}).filter(function(a){return a})))),d.uniforms={},d._uniforms=a.shaders&&a.shaders.uniforms||{},d._uniform_scopes={},c.filter(function(a){return a.shaders&&a.shaders.uniforms}).forEach(function(a){var c=function(c){d._uniform_scopes[c]=a.name,Object.defineProperty(d.uniforms,c,{enumerable:!0,configurable:!0,get:function(){return void 0!==d._uniforms[c]?d._uniforms[c]:b[d._uniform_scopes[c]].shaders.uniforms!==d.uniforms?b[d._uniform_scopes[c]].shaders.uniforms[c]:void 0},set:function(a){d._uniforms[c]=a}})};for(var e in a.shaders.uniforms)c(e)}),d.extensions=Object.keys(f.map(function(a){return a.extensions}).filter(function(a){return a}).reduce(function(a,b){return"string"==typeof b?a[b]=!0:b.forEach(function(b){return a[b]=!0}),a},{})||{}),a.shaders&&a.shaders.blocks){a.shaders.block_scopes=a.shaders.block_scopes||{};for(var g in a.shaders.blocks){var h=a.shaders.blocks[g];if(a.shaders.block_scopes[g]=a.shaders.block_scopes[g]||[],Array.isArray(h)){var i;(i=a.shaders.block_scopes[g]).push.apply(i,e(h.map(function(){return a.name})))}else a.shaders.block_scopes[g].push(a.name)}}var j={};return f.forEach(function(a){if(a.blocks){d.blocks=d.blocks||{},d.block_scopes=d.block_scopes||{};var b={};for(var c in a.blocks){var e=a.blocks[c],f=a.block_scopes[c];d.blocks[c]=d.blocks[c]||[],d.block_scopes[c]=d.block_scopes[c]||[],e=Array.isArray(e)?e:[e],f=Array.isArray(f)?f:[f];for(var g=0;g<e.length;g++)j[f[g]]||(b[f[g]]=!0,d.blocks[c].push(e[g]),d.block_scopes[c].push(f[g]))}Object.assign(j,b)}}),Object.assign(a.mixed,j),a.shaders=d,a}},{key:"create",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=k.default({},b);return d.name=a,d=this.mix(d,c),d.base&&this.base_styles[d.base]?this.styles[a]=d=Object.assign(Object.create(this.base_styles[d.base]),d):d.base=null,d}},{key:"build",value:function(a){var b=this,c=Object.keys(a).sort(function(c,d){return b.inheritanceDepth(c,a)-b.inheritanceDepth(d,a)});for(var d in this.styles)this.base_styles[d]?this.styles[d].reset():delete this.styles[d];var e={};return c.forEach(function(c){e[c]=b.create(c,a[c],e)}),this.styles}},{key:"initStyles",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var b in this.styles)this.styles[b].init(a)}},{key:"inheritanceDepth",value:function(a,b){for(var c=this,d=0;;){var f=b[a];if(!f)break;if(!f.mix)break;if(d++,Array.isArray(f.mix)){d+=Math.max.apply(Math,e(f.mix.map(function(d){return a!==d?c.inheritanceDepth(d,b):void 0})));break}if(a===f.mix)break;a=f.mix}return d}}]),a}()},{"../geo":202,"../gl/shader_program":208,"../utils/log":260,"../utils/merge":262,"./lines/lines":240,"./points/points":241,"./polygons/polygons":242,"./raster/raster":243,"./text/text":249}],246:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0}),c.StyleParser=void 0;var e=a("../utils/utils"),f=d(e),g=a("../geo"),h=d(g),i=a("csscolorparser"),j=d(i),k=c.StyleParser={};k.wrapFunction=function(a){var b="\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ "+a+" }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ";return b},k.zeroPair=Object.freeze([0,0]),k.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},k.macros={"Style.color.pseudoRandomColor":function(){return[.7*(parseInt(feature.id,16)/100%1),.7*(parseInt(feature.id,16)/1e4%1),.7*(parseInt(feature.id,16)/1e6%1),1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},k.getFeatureParseContext=function(a,b,c){return{feature:a,tile:b,global:c,zoom:b.style_zoom,geometry:h.default.geometryType(a.geometry.type),meters_per_pixel:b.meters_per_pixel,meters_per_pixel_sq:b.meters_per_pixel_sq,units_per_meter_overzoom:b.units_per_meter_overzoom}},k.createPropertyCache=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=a){if(a.value)return{value:a.value,zoom:a.zoom?{}:null};var c={value:a};return Array.isArray(c.value)&&Array.isArray(c.value[0])&&(c.zoom={}),"function"==typeof b&&(c.zoom?c.value=c.value.map(function(a){return[a[0],b(a[1])]}):"function"!=typeof c.value&&(c.value=b(c.value))),c}},k.createColorPropertyCache=function(a){return k.createPropertyCache(a,function(a){return"Style.color.pseudoRandomColor"===a?f.default.stringToFunction(k.wrapFunction(k.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===a?k.macros["Style.color.randomColor"]:a})},k.evalCachedProperty=function(a,b){if(null!=a){if(a.dynamic){var c=a.dynamic(b);return c}if(a.static)return a.static;if(a.zoom&&a.zoom[b.zoom])return a.zoom[b.zoom];if("function"==typeof a.value){a.dynamic=a.value;var d=a.dynamic(b);return d}return Array.isArray(a.value)&&Array.isArray(a.value[0])?(a.zoom=a.zoom||{},a.zoom={},a.zoom[b.zoom]=f.default.interpolate(b.zoom,a.value),a.zoom[b.zoom]):(a.static=a.value,a.static)}},k.convertUnits=function(a,b){if(null!=a.val)return"px"===a.units?a.val*h.default.metersPerPixel(b.zoom):a.val;if("string"==typeof a){var c=a.match(/([0-9.-]+)([a-z]+)/);c&&3===c.length&&(a=parseFloat(c[1]),c=c[2]),"px"===c&&(a*=h.default.metersPerPixel(b.zoom))}else if(Array.isArray(a))return a.map(Array.isArray(a[0])?function(a){return[a[0],k.convertUnits(a[1],b)]}:function(a){return k.convertUnits(a,b)});return a},k.parseUnits=function(a){var b={val:parseFloat(a)};return 0!==b.val&&"string"==typeof a&&"px"===a.trim().slice(-2)&&(b.units="px"),b},k.evalCachedDistanceProperty=function(a,b){if(a.dynamic){var c=a.dynamic(b);return c}if(a.zoom&&a.zoom[b.zoom])return a.zoom[b.zoom];if("function"==typeof a.value){a.dynamic=a.value;var d=a.dynamic(b);return d}return a.zoom?(a.zoom[b.zoom]=f.default.interpolate(b.zoom,a.value,function(a){return k.convertUnits(a,b)}),a.zoom[b.zoom]):k.convertUnits(a.value,b)},k.string_colors={},k.colorForString=function(a){if(k.string_colors[a])return k.string_colors[a];var b=j.default.parseCSSColor(a);return b&&4===b.length?(b[0]/=255,b[1]/=255,b[2]/=255):b=k.defaults.color,k.string_colors[a]=b,b},k.evalCachedColorProperty=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a.dynamic){var c=a.dynamic(b);return"string"==typeof c&&(c=k.colorForString(c)),c&&null==c[3]&&(c[3]=1),c}if(a.static)return a.static;if(a.zoom&&a.zoom[b.zoom])return a.zoom[b.zoom];if("function"==typeof a.value){a.dynamic=a.value;var d=a.dynamic(b);return"string"==typeof d&&(d=k.colorForString(d)),d&&null==d[3]&&(d[3]=1),d}if("string"==typeof a.value)return a.static=k.colorForString(a.value),a.static;if(a.zoom){if(!a.zoom_preprocessed){for(var e=0;e<a.value.length;e++){var g=a.value[e];g&&"string"==typeof g[1]&&(g[1]=k.colorForString(g[1]))}a.zoom_preprocessed=!0}return a.zoom[b.zoom]=f.default.interpolate(b.zoom,a.value),a.zoom[b.zoom][3]=a.zoom[b.zoom][3]||1,a.zoom[b.zoom]}return a.static=a.value,a.static&&null==a.static[3]&&(a.static[3]=1),a.static},k.parseColor=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof a&&(a=a(b)),"string"==typeof a)a=k.colorForString(a);else if(Array.isArray(a)&&Array.isArray(a[0])){for(var c=0;c<a.length;c++){var d=a[c];"string"==typeof d[1]&&(d[1]=k.colorForString(d[1]))}b.zoom&&(a=f.default.interpolate(b.zoom,a))}return a?null==a[3]&&(a[3]=1):a=[0,0,0,1],a},k.calculateOrder=function(a,b){return"function"==typeof a?a=a(b):"string"==typeof a&&(a=b.feature.properties[a]?b.feature.properties[a]:parseFloat(a)),a},k.evalProperty=function(a,b){return"function"==typeof a?a(b):a}},{"../geo":202,"../utils/utils":268,csscolorparser:72}],247:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){return b+a}function g(a,b){return a+b}function h(a){return B.test(a)}function i(a){return C.test(a)}function j(a){if(a.length<w)return[a];for(var b=[];a.length;){var c=a.substring(0,w);c.length<=Math.floor(.5*w)?b[b.length-1]+=c:b.push(c),a=a.substring(w)}return b}Object.defineProperty(c,"__esModule",{value:!0});var k=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=a("../../utils/log"),n=d(m),o=a("../../utils/utils"),p=d(o),q=a("../../gl/texture"),r=d(q),s=a("./font_manager"),t=d(s),u=a("../../utils/debug_settings"),v=d(u),w=2,x=function(){function a(){e(this,a),this.canvas=document.createElement("canvas"),this.canvas.style.backgroundColor="transparent",this.context=this.canvas.getContext("2d"),this.vertical_text_buffer=8,this.horizontal_text_buffer=4}return l(a,[{key:"resize",value:function(a,b){this.canvas.width=a,this.canvas.height=b,this.context.clearRect(0,0,a,b)}},{key:"setFont",value:function(a){var b=a.font_css,c=a.fill,d=a.stroke,e=a.stroke_width,f=a.px_size,g=a.supersample;this.px_size=f;var h=this.context,i=p.default.device_pixel_ratio*g;d&&e>0&&(h.strokeStyle=d,h.lineWidth=e*i),h.fillStyle=c,h.font=b,h.miterLimit=2}},{key:"textSizes",value:function(b){var c=this,d=void 0;return t.default.loadFonts().then(function(){for(var e in b){a.initTextCache(e);var f=b[e],g=!0;for(var k in f){var l=f[k],m=l.text_settings;if(g&&(c.setFont(m),d=p.default.device_pixel_ratio*m.supersample,g=!1),m.can_articulate){for(var n=j(k),o=k.split(" "),q=!1,r=!1,s=!1,t=0;t<o.length;t++)if(i(o[t])){if(r){s=!0;break}q=!0}else{if(q){s=!0;break}r=!0}var u=q&&!r&&!s,v=h(k);if(l.isRTL=u,l.no_curving=s||v,l.vertical_buffer=c.vertical_text_buffer,u&&n.reverse(),l.segments=n,l.size=[],!l.no_curving)for(var w=0;w<n.length;w++)l.size.push(c.textSize(e,n[w],m).size);l.total_size=c.textSize(e,k,m).size}else l.size=c.textSize(e,k,m).size}}return b})}},{key:"textSize",value:function(b,c,d){var e=d.transform,f=d.text_wrap,g=d.max_lines,h=d.stroke_width,i=void 0===h?0:h,j=d.supersample;if(a.text_cache[b][c])return a.cache_stats.hits++,a.text_cache[b][c];a.cache_stats.misses++,a.text_cache_count++;var k=p.default.device_pixel_ratio*j,l=this.applyTextTransform(c,e),m=this.context,n=this.vertical_text_buffer*k,o=k*(i+this.horizontal_text_buffer),q=2*k,r=this.px_size+q,s=D.parse(l,f,g,r,m),t=s.height,u=s.width,v=s.lines,w=[u/k,t/k],x=[u+2*o,t+2*n],y=[x[0]/k,x[1]/k];return a.text_cache[b][c]={lines:v,size:{collision_size:w,texture_size:x,logical_size:y,line_height:r}},a.text_cache[b][c]}},{key:"drawTextMultiLine",value:function(a,b,c,d,e){for(var f=k(b,2),g=f[0],h=f[1],i=d.stroke,j=d.stroke_width,l=void 0===j?0:j,m=d.transform,n=d.align,o=d.supersample,q=c.line_height,r=h,s=0;s<a.length;s++){var t=a[s];this.drawTextLine(t,[g,r],c,{stroke:i,stroke_width:l,transform:m,align:n,supersample:o},e),r+=q}if(v.default.draw_label_collision_boxes){this.context.save();var u=p.default.device_pixel_ratio*o,w=u*(this.horizontal_text_buffer+l),x=u*this.vertical_text_buffer,y=c.collision_size,z=2;this.context.strokeStyle="blue",this.context.lineWidth=z,this.context.strokeRect(g+w,h+x,u*y[0],u*y[1]),"curved"===e&&this.context.strokeRect(g+c.texture_size[0]+w,h+x,u*y[0],u*y[1]),this.context.restore()}if(v.default.draw_label_texture_boxes){this.context.save();var A=c.texture_size,B=2;this.context.strokeStyle="green",this.context.lineWidth=B,this.context.strokeRect(g+B,h+B,A[0]-2*B,A[1]-2*B),"curved"===e&&this.context.strokeRect(g+B+c.texture_size[0],h+B,A[0]-2*B,A[1]-2*B),this.context.restore()}}},{key:"drawTextLine",value:function(a,b,c,d,e){var f=k(b,2),g=f[0],h=f[1],i=d.stroke,j=d.stroke_width,l=void 0===j?0:j,m=d.transform,n=d.align,o=d.supersample,q=p.default.device_pixel_ratio*o;n=n||"center";var r=this.vertical_text_buffer*q,s=c.texture_size,t=c.line_height,u=q*(l+this.horizontal_text_buffer),v=this.applyTextTransform(a.text,m),w=void 0;"left"===n?w=g+u:"center"===n?w=g+s[0]/2-a.width/2:"right"===n&&(w=g+s[0]-a.width-u);var x=h+.75*r+t;if(i&&l>0){var y="curved"===e?s[0]:0;this.context.strokeText(v,w+y,x)}this.context.fillText(v,w,x)}},{key:"rasterize",value:function(b,c,d){for(var e in b){var h=b[e],i=!0;for(var j in h){var k=h[j],l=k.text_settings;if(i&&(this.setFont(l),i=!1),l.can_articulate){var m=k.segments;k.texcoords={};for(var n=0;n<k.type.length;n++){var o=k.type[n];switch(o){case"straight":var p=m.reduce(k.isRTL?f:g),q=void 0;if(a.texcoord_cache[d][e][p].texcoord)q=a.texcoord_cache[d][e][p].texcoord;else{var s=a.texcoord_cache[d][e][p].texture_position,t=a.text_cache[e][p].size,u=a.text_cache[e][p].lines;this.drawTextMultiLine(u,s,t,l,o),q=r.default.getTexcoordsForSprite(s,t.texture_size,c),a.texcoord_cache[d][e][p].texcoord=q}k.texcoords[o]=q;break;case"curved":k.texcoords.curved=[],k.texcoords_stroke=[];for(var v=0;v<m.length;v++){var w=m[v],x=void 0,y=void 0;if(a.texcoord_cache[d][e][w].texcoord)x=a.texcoord_cache[d][e][w].texcoord,y=a.texcoord_cache[d][e][w].texcoord_stroke,k.texcoords_stroke.push(y);else{var z=a.texcoord_cache[d][e][w].texture_position,A=a.text_cache[e][w].size,B=a.text_cache[e][w].lines;this.drawTextMultiLine(B,z,A,l,o),x=r.default.getTexcoordsForSprite(z,A.texture_size,c);var C=[z[0]+A.texture_size[0],z[1]];y=r.default.getTexcoordsForSprite(C,A.texture_size,c),a.texcoord_cache[d][e][w].texcoord=x,a.texcoord_cache[d][e][w].texcoord_stroke=y,k.texcoords_stroke.push(y)}k.texcoords.curved.push(x)}}}}else{var D=a.text_cache[e][j].lines;for(var E in k.align)this.drawTextMultiLine(D,k.align[E].texture_position,k.size,{stroke:l.stroke,stroke_width:l.stroke_width,transform:l.transform,supersample:l.supersample,align:E}),k.align[E].texcoords=r.default.getTexcoordsForSprite(k.align[E].texture_position,k.size.texture_size,c)}}}a.clearTexcoordCache(d)}},{key:"setTextureTextPositions",value:function(b,c,d){a.clearTexcoordCache(d),a.texcoord_cache[d]={};var e=0,h=0,i=0,j=0;for(var k in b){a.texcoord_cache[d][k]||(a.texcoord_cache[d][k]={});var l=b[k];for(var m in l){var n=l[m];if(n.text_settings.can_articulate)for(var o=void 0,p=0;p<n.type.length;p++){var q=n.type[p];switch(q){case"straight":var r=n.total_size.texture_size,s=n.segments.reduce(n.isRTL?f:g);r[0]>e&&(e=r[0]),i+r[1]<c?(o=[h,i],i+=r[1],i>j&&(j=i)):(h+=e,e=0,i=0,o=[h,i]),a.texcoord_cache[d][k][s]={texture_position:o};break;case"curved":for(var t=0;t<n.size.length;t++){var u=n.segments[t];if(!a.texcoord_cache[d][k][u]){var v=n.size[t].texture_size,w=2*v[0];w>e&&(e=w),i+v[1]<c?(o=[h,i],i+=v[1],i>j&&(j=i)):(h+=e,e=0,i=0,o=[h,i]),a.texcoord_cache[d][k][u]={texture_position:o}}}}}else{var x=n.size.texture_size;x[0]>e&&(e=x[0]);for(var y in n.align)i+x[1]<c?(n.align[y].texture_position=[h,i],i+=x[1],i>j&&(j=i)):(h+=e,e=0,i=0,n.align[y].texture_position=[h,i])}}}return[h+e,j]}},{key:"applyTextTransform",value:function(a,b){return"capitalize"===b?a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1)}):"uppercase"===b?a.toUpperCase():"lowercase"===b?a.toLowerCase():a}}],[{key:"fontPixelSize",value:function(b){if(null!=b){b="string"==typeof b?b:String(b);var c=b.match(a.font_size_re)||[],d=k(c,3),e=d[1],f=d[2];return f=f||"px","em"===f?e*=16:"pt"===f?e/=.75:"%"===f&&(e/=6.25),e=parseFloat(e),e*=p.default.device_pixel_ratio}}},{key:"clearTexcoordCache",value:function(b){delete a.texcoord_cache[b]}},{key:"initTextCache",value:function(b){a.text_cache[b]=a.text_cache[b]||{}}},{key:"pruneTextCache",value:function(){a.text_cache_count>a.text_cache_count_max&&(a.text_cache={},a.text_cache_count=0,n.default("debug","CanvasText: pruning text cache"))}}]),a}();c.default=x,x.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,x.text_cache={},x.text_cache_count=0,x.text_cache_count_max=5e3,x.cache_stats={hits:0,misses:0},x.texcoord_cache={};var y={Arabic:"؀-ۿ",Bengali:"ঀ-৿",Burmese:"က-႟",Devanagari:"ऀ-ॿ",Khmer:"ក-៿",Gujarati:"઀-૿",Gurmukhi:"਀-੿",Kannada:"ಀ-೿",Lao:"຀-໿",Mongolian:"᠀-᢯",Oriya:"଀-୿",Tamil:"஀-௿",Telugu:"ఀ-౿",Tibetan:"ༀ-࿿"},z="[";for(var A in y)z+=y[A];z+="]";var B=new RegExp(z),C=new RegExp("^[\0-@[-`{-¿×÷ʹ-˿ -⯿‐-\u2029‬ -⯿֑-߿‏‫‮יִ-﷽ﹰ-ﻼ]+$"),D=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;e(this,a),this.width=0,this.height=0,this.lines=[],this.max_lines=c,this.text_wrap=d,this.context=b}return l(a,[{key:"createLine",value:function(a){return this.lines.length<this.max_lines&&new E(a,this.text_wrap)}},{key:"push",value:function(a){if(this.lines.length<this.max_lines){var b=this.context.measureText(a.text).width;return a.width=b,b>this.width&&(this.width=Math.ceil(b)),this.lines.push(a),this.height+=a.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(a,b){var c=this.push(a);return!!c&&this.createLine(b)}},{key:"addEllipsis",value:function(){var b=this.lines[this.lines.length-1],c=Math.ceil(this.context.measureText(a.ellipsis).width);b.append(a.ellipsis),b.width+=c,b.width>this.width&&(this.width=b.width)}},{key:"finish",value:function(a){a?this.push(a):this.addEllipsis()}}],[{key:"parse",value:function(b,c,d,e,f){var g=void 0;g="number"==typeof c?b.split(" "):[b];for(var h=new a(f,d,c),i=h.createLine(e),j=0;j<g.length;j++){for(var k=g[j].split("\n"),l=0===j,m=0;m<k.length&&i;m++){var n=k[m];if(n){var o=l?n:" "+n;if(c&&j>0&&i.exceedsTextwrap(o)){if(i=h.advance(i,e),!i)break;i.append(n),l=!0}else i.append(o);m<k.length-1&&(i=h.advance(i,e),l=!0)}}j===g.length-1&&h.finish(i)}return h}}]),a}();D.ellipsis="...";var E=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e(this,a),this.chars=0,this.text="",this.height=Math.ceil(b),this.text_wrap=c}return l(a,[{key:"append",value:function(a){this.chars+=a.length,this.text+=a}},{key:"exceedsTextwrap",value:function(a){return a.length+this.chars>this.text_wrap}}]),a}()},{"../../gl/texture":209,"../../utils/debug_settings":256,"../../utils/log":260,"../../utils/utils":268,"./font_manager":248}],248:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a("../../utils/log"),g=d(f),h=a("../../utils/utils"),i=d(h),j=a("fontfaceobserver"),k=d(j),l={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(a){var b=this,c=JSON.stringify(a)===this.last_loaded;return a&&!c&&!function(){var c=[],d=function(d){Array.isArray(a[d])?a[d].forEach(function(a){return c.push(b.loadFontFace(d,a))}):c.push(b.loadFontFace(d,a[d]))};for(var e in a)d(e);b.last_loaded=JSON.stringify(a),b.fonts_loaded=Promise.all(c.filter(function(a){return a}))}(),this.fonts_loaded},loadFontFace:function(a,b){if(null!=b&&("object"===("undefined"==typeof b?"undefined":e(b))||"external"===b)){var c={family:a},d=Promise.resolve();"object"===("undefined"==typeof b?"undefined":e(b))&&(Object.assign(c,b),"string"==typeof b.url&&(d=this.injectFontFace(c)));var f=new k.default(a,c);return d.then(function(){return f.load()}).then(function(){g.default("debug","Font face '"+a+"' is available",c)},function(){g.default("debug","Font face '"+a+"' is NOT available",c)})}},injectFontFace:function(a){var b=this,c=a.family,d=a.url,e=a.weight,f=a.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var h=Promise.resolve(d);return"blob:"===d.slice(0,5)&&(h=i.default.io(d,6e4,"arraybuffer").then(function(a){var c=new Uint8Array(a);if(b.supports_native_font_loading)return c;for(var d="",e=0;e<c.length;e++)d+=String.fromCharCode(c[e]);return"data:font/opentype;base64,"+btoa(d)})),h.then(function(a){if(b.supports_native_font_loading){var d=void 0;"string"==typeof a?d=new FontFace(c,"url("+encodeURI(a)+")",{weight:e,style:f}):a instanceof Uint8Array&&(d=new FontFace(c,a,{weight:e,style:f})),document.fonts.add(d),g.default("trace","Adding FontFace to document.fonts:",d)}else{var h="\n                    @font-face {\n                        font-family: '"+c+"';\n                        font-weight: "+(e||"normal")+";\n                        font-style: "+(f||"normal")+";\n                        src: url("+encodeURI(a)+");\n                    }\n                ",i=document.createElement("style");
i.appendChild(document.createTextNode("")),document.head.appendChild(i),i.sheet.insertRule(h,0),g.default("trace","Injecting CSS font face:",h)}})}};c.default=l},{"../../utils/log":260,"../../utils/utils":268,fontfaceobserver:75}],249:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0}),c.TextStyle=void 0;var e=a("../../geo"),f=d(e),g=a("../style"),h=a("../points/points"),i=a("../../labels/collision"),j=d(i),k=a("../../labels/label_point"),l=d(k),m=a("../../labels/label_line"),n=d(m),o=a("../../gl/constants"),p=d(o),q=c.TextStyle=Object.create(h.Points);Object.assign(q,{name:"text",super:h.Points,built_in:!0,init:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=[{name:"a_angles",size:4,type:p.default.SHORT,normalized:!1},{name:"a_offsets",size:4,type:p.default.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:p.default.BYTE,normalized:!1}];this.super.init.call(this,a,b),this.defines.TANGRAM_TEXTURE_POINT=!0,this.defines.TANGRAM_SHADER_POINT=!1,this.defines.TANGRAM_CURVED_LABEL=!0,this.defines.TANGRAM_MULTI_SAMPLER=!1,this.defines.TANGRAM_UNMULTIPLY_ALPHA=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,this.defines.TANGRAM_FADE_ON_ZOOM_IN=!0,this.defines.TANGRAM_FADE_ON_ZOOM_IN_RATE=2,this.reset()},makeVertexTemplate:function(a){return this.super.makeVertexTemplate.call(this,a),this.fillVertexTemplate("a_pre_angles",0,{size:4}),this.fillVertexTemplate("a_offsets",0,{size:4}),this.fillVertexTemplate("a_angles",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(a,b,c){var d=this,e=c.tile;if(e.generation===this.generation&&(b=this.preprocess(b))){var f=a.geometry.type;b.can_articulate="LineString"===f||"MultiLineString"===f,b.supersample_text="LineString"===f||"MultiLineString"===f;var g=this.parseTextFeature(a,b,c,e);g&&(g instanceof Array?g.forEach(function(b){b.feature=a,b.context=c,b.layout.vertex=!1,d.queueFeature(b,e)}):(g.feature=a,g.context=c,g.layout.vertex=!1,this.queueFeature(g,e)),j.default.addStyle(this.name,e.key))}},startData:function(a){return this.queues[a.key]=[],g.Style.startData.call(this,a)},endData:function(a){var b=this,c=this.queues[a.key];return delete this.queues[a.key],this.prepareTextLabels(a,this.name,c).then(function(c){return b.collideAndRenderTextLabels(a,b.name,c)}).then(function(c){var d=c.labels,e=c.texts,f=c.texture;return e&&(b.texts[a.key]=e,d.forEach(function(c){var d=c.text_settings_key,e=b.texts[a.key][d]&&b.texts[a.key][d][c.text],f=b.feature_style;f.label=c.label,e.text_settings.can_articulate?(f.size={},f.texcoords={},"straight"===c.label.type?(f.size.straight=e.total_size.logical_size,f.texcoords.straight=e.texcoords.straight):(f.size.curved=e.size.map(function(a){return a.logical_size}),f.texcoords_stroke=e.texcoords_stroke,f.texcoords.curved=e.texcoords.curved)):(f.size=e.size.logical_size,f.texcoords=e.align[c.label.align].texcoords),g.Style.addFeature.call(b,c.feature,c.draw,c.context)})),b.freeText(a),g.Style.endData.call(b,a).then(function(a){return f&&a?(a.uniforms.u_texture=f,a.textures.push(f),a):void 0})})},_preprocess:function(a){return this.preprocessText(a)},buildTextLabels:function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=this.texts[a][e.text_settings_key][e.text],g=void 0;if(e.layout.vertical_buffer=f.vertical_buffer,f.text_settings.can_articulate){var h=f.size.map(function(a){return a.collision_size});e.layout.no_curving=f.no_curving,g=this.buildLabels(h,e.feature.geometry,e.layout,f.total_size.collision_size)}else g=this.buildLabels(f.size.collision_size,e.feature.geometry,e.layout);for(var i=0;i<g.length;i++){var j=Object.create(e);j.label=g[i],c.push(j)}}return c},buildLabels:function(a,b,c,d){var e=[];if("LineString"===b.type)Array.prototype.push.apply(e,this.buildLineLabels(b.coordinates,a,c,d));else if("MultiLineString"===b.type)for(var g=b.coordinates,h=0;h<g.length;++h)Array.prototype.push.apply(e,this.buildLineLabels(g[h],a,c,d));else if("Point"===b.type)e.push(new l.default(b.coordinates,a,c));else if("MultiPoint"===b.type)for(var i=b.coordinates,j=0;j<i.length;++j)e.push(new l.default(i[j],a,c));else if("Polygon"===b.type){var k=f.default.centroid(b.coordinates);e.push(new l.default(k,a,c))}else if("MultiPolygon"===b.type){var m=f.default.multiCentroid(b.coordinates);e.push(new l.default(m,a,c))}return e},buildLineLabels:function(a,b,c,d){var e=[],f=Math.min(c.subdiv,a.length-1);if(f>1)for(var g=(a.length-1)/f,h=0;f>h;h++){var i=Math.floor(h*g),j=Math.floor((h+1)*g)+1,k=a.slice(i,j),l=n.default.create(b,d,k,c);l&&e.push(l)}else{var m=n.default.create(b,d,a,c);m&&e.push(m)}return e}}),q.texture_id=0},{"../../geo":202,"../../gl/constants":203,"../../labels/collision":215,"../../labels/label_line":218,"../../labels/label_point":219,"../points/points":241,"../style":244}],250:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(c,"__esModule",{value:!0}),c.TextLabels=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=a("../style_parser"),h=a("../../gl/texture"),i=d(h),j=a("../../geo"),k=d(j),l=a("../../utils/log"),m=d(l),n=a("../../utils/thread"),o=d(n),p=a("../../utils/worker_broker"),q=d(p),r=a("../../labels/collision"),s=d(r),t=a("../text/text_settings"),u=d(t),v=a("../text/canvas_text"),w=d(v),x=0;c.TextLabels={resetText:function(){o.default.is_main?this.canvas=new w.default:o.default.is_worker&&(this.texts={})},freeText:function(a){delete this.texts[a.key]},parseTextFeature:function(a,b,c,d){var e=this.parseTextSource(a,b,c);if(null!=e&&""!==e){var f=u.default.compute(a,b,c),g=u.default.key(f);this.texts[d.key]=this.texts[d.key]||{};var h=this.texts[d.key][g]=this.texts[d.key][g]||{};if(e instanceof Object){var i=[],j=e.left+"-"+e.right;for(var k in e){var l=e[k];if(l){var m=this.computeTextLayout({},a,b,c,d,l,f,j,k);h[l]||(h[l]={text_settings:f,ref:0}),i.push({draw:b,text:l,text_settings_key:g,layout:m})}}return i}var n=this.computeTextLayout({},a,b,c,d,e,f);return h[e]||(h[e]={text_settings:f,ref:0}),{draw:b,text:e,text_settings_key:g,layout:n}}},parseTextSource:function(a,b,c){var d=void 0,e=b.text_source||"name";if(null!=e&&"object"===("undefined"==typeof e?"undefined":f(e))){d={};for(var g in e)d[g]=this.parseTextSourceValue(e[g],a,c)}else d=this.parseTextSourceValue(e,a,c);return d},parseTextSourceValue:function(a,b,c){var d=void 0;if(Array.isArray(a)){for(var e=0;e<a.length;e++)if("string"==typeof a[e]?d=b.properties[a[e]]:"function"==typeof a[e]&&(d=a[e](c)),d)return d}else"string"==typeof a?d=b.properties[a]:a instanceof Function&&(d=a(c));return d},prepareTextLabels:function(a,b,c){var d=this;return 0===Object.keys(this.texts[a.key]||{}).length?Promise.resolve({}):q.default.postMessage(this.main_thread_target+".calcTextSizes",this.texts[a.key]).then(function(b){return a.canceled?void m.default("trace","Style "+d.name+": stop tile build because tile was canceled: "+a.key+", post-calcTextSizes()"):(d.texts[a.key]=b,b?d.buildTextLabels(a.key,c):void 0)})},collideAndRenderTextLabels:function(a,b,c){var d=this;return c?s.default.collide(c,b,a.key).then(function(b){if(a.canceled)return m.default("trace","stop tile build because tile was canceled: "+a.key+", post-collide()"),{};if(0===b.length)return{};var c=d.texts[a.key];return d.cullTextStyles(c,b),b.forEach(function(a){var b=a.text_settings_key,d=c[b]&&c[b][a.text];d.text_settings.can_articulate?(d.type||(d.type=[]),-1===d.type.indexOf(a.label.type)&&d.type.push(a.label.type)):(d.align=d.align||{},d.align[a.label.align]={})}),q.default.postMessage(d.main_thread_target+".rasterizeTexts",a.key,c).then(function(c){var d=c.texts,e=c.texture;return a.canceled?(m.default("trace","stop tile build because tile was canceled: "+a.key+", post-rasterizeTexts()"),{}):{labels:b,texts:d,texture:e}})}):(s.default.collide({},b,a.key),Promise.resolve({}))},cullTextStyles:function(a,b){for(var c=0;c<b.length;c++){var d=b[c];a[d.text_settings_key][d.text].ref++}for(var e in a)for(var f in a[e])a[e][f].ref<1&&delete a[e][f];for(var g in a)0===Object.keys(a[g]).length&&delete a[g]},calcTextSizes:function(a){return this.canvas.textSizes(a)},rasterizeTexts:function(a,b){var c=new w.default,d=c.setTextureTextPositions(b,this.max_texture_size,a);m.default("trace","text summary for tile "+a+": fits in "+d[0]+"x"+d[1]+"px"),d[0]<this.max_texture_size&&d[1]<this.max_texture_size?(c.resize.apply(c,e(d)),c.rasterize(b,d,a)):m.default("error",["Label atlas for tile "+a+" is "+d[0]+"x"+d[1]+"px, ","but max GL texture size is "+this.max_texture_size+"x"+this.max_texture_size+"px"].join(""));var f="labels-"+a+"-"+x++;return i.default.create(this.gl,f,{element:c.canvas,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),i.default.retain(f),{texts:b,texture:f}},preprocessText:function(a){return a&&a.font&&"object"===f(a.font)?(a.font.fill=g.StyleParser.createPropertyCache(a.font.fill),a.font.stroke&&(a.font.stroke.color=g.StyleParser.createPropertyCache(a.font.stroke.color)),a.font.px_size=g.StyleParser.createPropertyCache(a.font.size||u.default.defaults.size,w.default.fontPixelSize),a.font.stroke&&null!=a.font.stroke.width&&(a.font.stroke.width=g.StyleParser.createPropertyCache(a.font.stroke.width,parseFloat)),a.offset=g.StyleParser.createPropertyCache(a.offset,function(a){return Array.isArray(a)&&a.map(parseFloat)||0}),a.buffer=g.StyleParser.createPropertyCache(a.buffer,function(a){return(Array.isArray(a)?a:[a,a]).map(parseFloat)||0}),a.repeat_distance=g.StyleParser.createPropertyCache(a.repeat_distance||k.default.tile_size,parseFloat),a):void 0},computeTextLayout:function(a,b,c,d,e,f,g,h,i){var j=a||{};return j=this.computeLayout(j,b,c,d,e),j.cull_from_tile=null==c.cull_from_tile||c.cull_from_tile,j.move_into_tile=null==c.move_into_tile||c.move_into_tile,j.repeat_distance&&(h&&(j.repeat_group+="/"+h),j.repeat_group+="/"+f),j.subdiv=e.overzoom2,j.align=c.align,j.italic="normal"!==g.style,"right"===i?j.orientation=1:"left"===i&&(j.orientation=-1),j}}},{"../../geo":202,"../../gl/texture":209,"../../labels/collision":215,"../../utils/log":260,"../../utils/thread":266,"../../utils/worker_broker":270,"../style_parser":246,"../text/canvas_text":247,"../text/text_settings":251}],251:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e,f=a("../../utils/utils"),g=d(f),h=a("../../geo"),i=d(h),j=a("../style_parser");c.default=e={key:function(a){return[a.style,a.weight,a.family,a.px_size,a.fill,a.stroke,a.stroke_width,a.transform,a.text_wrap,a.max_lines,a.supersample,g.default.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0},compute:function(a,b,c){var d={};b.font=b.font||this.defaults,d.can_articulate=b.can_articulate,d.fill=b.font.fill&&g.default.toCSSColor(j.StyleParser.evalCachedColorProperty(b.font.fill,c))||this.defaults.fill,d.style=b.font.style||this.defaults.style,d.weight=b.font.weight||this.defaults.weight,b.font.family?(d.family=b.font.family,d.family!==this.defaults.family&&(d.family+=", "+this.defaults.family)):d.family=this.defaults.family,d.transform=b.font.transform,d.size=b.font.size||this.defaults.size,d.supersample=b.supersample_text?1.5:1,d.px_size=j.StyleParser.evalCachedProperty(b.font.px_size,c)*d.supersample,b.font.stroke&&b.font.stroke.color&&(d.stroke=g.default.toCSSColor(j.StyleParser.evalCachedColorProperty(b.font.stroke.color,c)||this.defaults.stroke),d.stroke_width=j.StyleParser.evalCachedProperty(b.font.stroke.width,c)||this.defaults.stroke_width),d.font_css=this.fontCSS(d);var e=b.text_wrap;return null==e&&"line"!==i.default.geometryType(a.geometry.type)&&(e=!0),e===!0&&(e=this.defaults.text_wrap),d.text_wrap=e,d.max_lines=b.max_lines||this.defaults.max_lines,d},fontCSS:function(a){var b=a.style,c=a.weight,d=a.px_size,e=a.family;return[b,c,d+"px",e].filter(function(a){return a}).join(" ")}}},{"../../geo":202,"../../utils/utils":268,"../style_parser":246}],252:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./utils/log"),i=d(h),j=a("./utils/utils"),k=d(j),l=a("./utils/merge"),m=d(l),n=a("./geo"),o=d(n),p=a("./styles/style_parser"),q=a("./labels/collision"),r=d(q),s=a("./utils/worker_broker"),t=d(s),u=a("./gl/texture"),v=d(u),w=a("./utils/gl-matrix"),x=function(){function a(b){var c=b.coords,d=b.style_zoom,e=b.source,g=b.worker,h=b.view;f(this,a),this.worker=g,this.view=h,this.source=e,this.generation=null,this.visible=!1,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.error=null,this.debug={},this.coords=a.coordinateWithMaxZoom(c,this.source.max_zoom),this.style_zoom=d,this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.key=a.key(this.coords,this.source,this.style_zoom),this.min=o.default.metersForTile(this.coords),this.max=o.default.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=o.default.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=o.default.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=o.default.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.textures=[],this.previous_textures=[],this.new_mesh_styles=[]}return g(a,[{key:"freeResources",value:function(){for(var a in this.meshes)this.meshes[a].destroy();this.meshes={},this.textures.forEach(function(a){return v.default.release(a)}),this.textures=[],this.previous_textures.forEach(function(a){return v.default.release(a)}),this.previous_textures=[]}},{key:"destroy",value:function(){this.workerMessage("self.removeTile",this.key),this.freeResources(),this.worker=null}},{key:"buildAsMessage",value:function(){return{key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation,debug:this.debug}}},{key:"workerMessage",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return t.default.postMessage.apply(t.default,[this.worker].concat(b))}},{key:"build",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.fade_in,d=void 0===c||c;return this.generation=a,this.fade_in=d,this.loaded||(this.loading=!0,this.built=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()}).catch(function(a){throw a})}},{key:"buildMeshes",value:function(a,b){var c;if(!this.error){b.start&&(this.debug.geometry_count=0,this.debug.buffer_size=0);var d={},f=[],g=this.mesh_data;if(g)for(var h in g){if(g[h].vertex_data){if(!a[h]){i.default("warn","Could not create mesh because style '"+h+"' not found, for tile "+this.key+", aborting tile");break}d[h]=a[h].makeMesh(g[h].vertex_data,g[h].vertex_elements,g[h]),this.debug.buffer_size+=d[h].buffer_size,this.debug.geometry_count+=d[h].geometry_count}g[h].textures&&f.push.apply(f,e(g[h].textures))}delete this.mesh_data,b.start&&(this.new_mesh_styles=[],this.previous_textures=[].concat(e(this.textures)),this.textures=[]);for(var j in d)this.meshes[j]&&this.meshes[j].destroy(),this.meshes[j]=d[j],this.new_mesh_styles.push(j);if((c=this.textures).push.apply(c,f),b.done){for(var k in this.meshes)-1===this.new_mesh_styles.indexOf(k)&&this.meshes[k].destroy();this.new_mesh_styles=[],this.previous_textures.forEach(function(a){return v.default.release(a)}),this.previous_textures=[],this.debug.geometry_ratio=(this.debug.geometry_count/this.debug.feature_count).toFixed(1),this.printDebug()}}}},{key:"setProxyFor",value:function(a){a?(this.visible=!0,this.proxy_for=this.proxy_for||[],this.proxy_for.push(a),this.proxy_depth=1,a.proxied_as=a.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"shouldProxyForStyle",value:function(a){return!this.proxy_for||this.proxy_for.some(function(b){return null==b.meshes[a]})}},{key:"setupProgram",value:function(a,b){var c=a.model,d=a.model32;b.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),b.uniform("1f","u_tile_proxy_depth",this.proxy_depth),w.mat4.identity(c),w.mat4.translate(c,c,w.vec3.fromValues(this.min.x,this.min.y,0)),w.mat4.scale(c,c,w.vec3.fromValues(this.span.x/o.default.tile_scale,-1*this.span.y/o.default.tile_scale,1)),w.mat4.copy(d,c),b.uniform("Matrix4fv","u_model",d),b.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(a){return this.loading=a.loading,this.loaded=a.loaded,this.generation=a.loaded,this.error=a.error,this.mesh_data=a.mesh_data,this.debug=m.default(this.debug,a.debug),this}},{key:"printDebug",value:function(){i.default("debug","Tile: debug for "+this.key+": [  "+JSON.stringify(this.debug)+" ]")}}],[{key:"create",value:function(b){return new a(b)}},{key:"coord",value:function(b){return{x:b.x,y:b.y,z:b.z,key:a.coordKey(b)}}},{key:"coordKey",value:function(a){var b=a.x,c=a.y,d=a.z;return b+"/"+c+"/"+d}},{key:"key",value:function(b,c,d){return b=a.coordinateWithMaxZoom(b,c.max_zoom),b.y<0||b.y>=1<<b.z||b.z<0?void 0:[c.name,d,b.x,b.y,b.z].join("/")}},{key:"coordinateAtZoom",value:function(b,c){var d=b.x,e=b.y,f=b.z;if(b.key,f!==c){var g=Math.pow(2,f-c);d=Math.floor(d/g),e=Math.floor(e/g),f=c}return a.coord({x:d,y:e,z:f})}},{key:"coordinateWithMaxZoom",value:function(b,c){var d=b.x,e=b.y,f=b.z;return void 0!==c&&f>c?a.coordinateAtZoom({x:d,y:e,z:f},c):a.coord({x:d,y:e,z:f})}},{key:"childrenForCoordinate",value:function(b){var c=b.x,d=b.y,e=b.z,f=b.key;return a.coord_children[f]||(e++,c*=2,d*=2,a.coord_children[f]=[a.coord({x:c,y:d,z:e}),a.coord({x:c+1,y:d,z:e}),a.coord({x:c,y:d+1,z:e}),a.coord({x:c+1,y:d+1,z:e})]),a.coord_children[f]}},{key:"isDescendant",value:function(b,c){if(c.z>b.z){var d=a.coordinateAtZoom(c,b.z),e=d.x,f=d.y;return b.x===e&&b.y===f}return!1}},{key:"cancel",value:function(b){b&&(b.canceled=!0,b.source_data&&b.source_data.request_id&&(k.default.cancelRequest(b.source_data.request_id),b.source_data.request_id=null),a.abortBuild(b))}},{key:"buildGeometry",value:function(b,c){var d=c.scene_id,e=c.layers,f=c.styles,g=c.global,h=b.source_data;b.debug.rendering=+new Date,b.debug.feature_count=0,r.default.startTile(b.key);for(var j in e){var k=e[j];if(k&&k.config_data){if(k.config_data.source===b.source)for(var l=a.getDataForSource(h,k.config_data,j),m=0;m<l.length;m++){var n=l[m],o=n.geom;if(o)for(var q=0;q<o.features.length;q++){var s=o.features[q];if(null!=s.geometry){var t=p.StyleParser.getFeatureParseContext(s,b,g);t.winding=b.default_winding,t.source=b.source,t.layer=n.layer;var u=k.buildDrawGroups(t,!0);if(u){for(var v in u){var w=u[v];if(w.visible){var x=w.style||v,y=f[x];y?(t.layers=w.layers,y.addFeature(s,w,t)):i.default("warn","Style '"+x+"' not found, skipping layer '"+j+"':",w,s)}}b.debug.feature_count++}}}}}else i.default("warn","Layer "+j+" was defined without a geometry data source and will not be rendered.")}b.debug.rendering=+new Date-b.debug.rendering;var z=this.stylesForTile(b.key,f).map(function(a){return f[a]});a.sendStyleGroups(b,z,{scene_id:d},function(a){return a.collision?"collision":"non-collision"})}},{key:"stylesForTile",value:function(a,b){var c=[];for(var d in b)b[d].hasDataForTile(a)&&c.push(d);return c}},{key:"sendStyleGroups",value:function(b,c,d,e){var f=d.scene_id,g={};c.forEach(function(a){var b=e(a);g[b]=g[b]||[],g[b].push(a)}),Object.keys(g).length>0?!function(){var c={start:!0};b.mesh_data={};var d=function(d){var e=g[d];Promise.all(e.map(function(a){return a.endData(b).then(function(c){c&&(b.mesh_data[a.name]={vertex_data:c.vertex_data,vertex_elements:c.vertex_elements,uniforms:c.uniforms,textures:c.textures})})})).then(function(){i.default("trace","Finished style group '"+d+"' for tile "+b.key),g[d]=[],Object.keys(g).every(function(a){return 0===g[a].length})&&(c.done=!0),t.default.postMessage("TileManager_"+f+".buildTileStylesCompleted",t.default.withTransferables({tile:a.slice(b,["mesh_data"]),progress:c})),c.start=null,b.mesh_data={},c.done&&r.default.resetTile(b.key)})};for(var e in g)d(e)}():(t.default.postMessage("TileManager_"+f+".buildTileStylesCompleted",t.default.withTransferables({tile:a.slice(b),progress:{start:!0,done:!0}})),r.default.resetTile(b.key))}},{key:"getDataForSource",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=[];return null!=b&&null!=a&&null!=a.layers&&(!b.layer&&a.layers._default?d.push({geom:a.layers._default}):!b.layer&&c?d.push({layer:c,geom:a.layers[c]}):"string"==typeof b.layer?d.push({layer:b.layer,geom:a.layers[b.layer]}):Array.isArray(b.layer)&&b.layer.forEach(function(b){a.layers[b]&&a.layers[b].features&&d.push({layer:b,geom:a.layers[b]})})),d}},{key:"abortBuild",value:function(a){if(a.mesh_data)for(var b in a.mesh_data){var c=a.mesh_data[b].textures;c&&c.forEach(function(b){var c=v.default.textures[b];c&&(i.default("trace","releasing texture "+b+" for tile "+a.key),c.release())})}}},{key:"slice",value:function(a,b){var c=["key","loading","loaded","generation","error","debug"];Array.isArray(b)&&c.push.apply(c,e(b));for(var d={},f=0;f<c.length;f++){var g=c[f];d[g]=a[g]}return d}}]),a}();c.default=x,x.coord_children={}},{"./geo":202,"./gl/texture":209,"./labels/collision":215,"./styles/style_parser":246,"./utils/gl-matrix":258,"./utils/log":260,"./utils/merge":262,"./utils/utils":268,"./utils/worker_broker":270}],253:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./tile"),h=d(g),i=a("./tile_pyramid"),j=d(i),k=a("./geo"),l=d(k),m=a("./utils/log"),n=d(m),o=a("./utils/worker_broker"),p=d(o),q=function(){function a(b){var c=b.scene,d=b.view;e(this,a),this.scene=c,this.view=d,this.tiles={},this.pyramid=new j.default,this.visible_coords={},this.queued_coords=[],this.building_tiles=null,this.renderable_tiles=[],this.active_styles=[],this.main_thread_target=["TileManager",this.scene.id].join("_"),p.default.addTarget(this.main_thread_target,this)}return f(a,[{key:"destroy",value:function(){this.forEachTile(function(a){return a.destroy()}),this.tiles={},this.pyramid=null,this.visible_coords={},this.queued_coords=[],this.scene=null,this.view=null}},{key:"keepTile",value:function(a){this.tiles[a.key]=a,this.pyramid.addTile(a)}},{key:"hasTile",value:function(a){return void 0!==this.tiles[a]}},{key:"forgetTile",value:function(a){if(this.hasTile(a)){var b=this.tiles[a];this.pyramid.removeTile(b)}delete this.tiles[a],this.tileBuildStop(a)}},{key:"removeTile",value:function(a){n.default("trace","tile unload for "+a);var b=this.tiles[a];null!=b&&b.destroy(),this.forgetTile(b.key),this.scene.requestRedraw()}},{key:"forEachTile",value:function(a){for(var b in this.tiles)a(this.tiles[b])}},{key:"removeTiles",value:function(a){var b=[];for(var c in this.tiles){var d=this.tiles[c];a(d)&&b.push(c)}for(var e=0;e<b.length;e++){var f=b[e];this.removeTile(f)}}},{key:"updateTilesForView",value:function(){this.visible_coords={};for(var a=this.view.findVisibleTileCoordinates(),b=0;b<a.length;b++){var c=a[b];this.queueCoordinate(c),this.visible_coords[c.key]=c}this.updateTileStates()}},{key:"updateTileStates",value:function(){var a=this;this.forEachTile(function(b){a.updateVisibility(b)}),this.loadQueuedCoordinates(),this.updateProxyTiles(),this.view.pruneTilesForView(),this.updateRenderableTiles(),this.updateActiveStyles()}},{key:"updateProxyTiles",value:function(){var a=this;if(0!==this.view.zoom_direction){this.forEachTile(function(a){return a.setProxyFor(null)});var b=!1;this.forEachTile(function(c){if(1===a.view.zoom_direction){if(c.visible&&!c.built&&c.coords.z>0){var d=a.pyramid.getAncestor(c);d&&(d.setProxyFor(c),b=!0)}}else if(-1===a.view.zoom_direction&&c.visible&&!c.built)for(var e=a.pyramid.getDescendants(c),f=0;f<e.length;f++)e[f].setProxyFor(c),b=!0}),b||(this.view.zoom_direction=0)}}},{key:"updateVisibility",value:function(a){if(a.visible=!1,a.style_zoom===this.view.tile_zoom)if(this.visible_coords[a.coords.key])a.visible=!0;else for(var b in this.visible_coords)if(h.default.isDescendant(a.coords,this.visible_coords[b])){a.visible=!0;break}}},{key:"pruneToVisibleTiles",value:function(){this.removeTiles(function(a){return!a.visible})}},{key:"getRenderableTiles",value:function(){return this.renderable_tiles}},{key:"updateRenderableTiles",value:function(){this.renderable_tiles=[];for(var a in this.tiles){var b=this.tiles[a];b.visible&&b.loaded&&this.renderable_tiles.push(b)}return this.renderable_tiles}},{key:"getActiveStyles",value:function(){return this.active_styles}},{key:"updateActiveStyles",value:function(){for(var a=this.renderable_tiles,b={},c=0;c<a.length;c++){var d=a[c];Object.keys(d.meshes).forEach(function(a){return b[a]=!0})}return this.active_styles=Object.keys(b),this.active_styles}},{key:"isLoadingVisibleTiles",value:function(){var a=this;return Object.keys(this.tiles).some(function(b){return a.tiles[b].visible&&!a.tiles[b].built})}},{key:"queueCoordinate",value:function(a){this.queued_coords[this.queued_coords.length]=a}},{key:"loadQueuedCoordinates",value:function(){var a=this;0!==this.queued_coords.length&&(this.queued_coords.sort(function(b,c){var d=a.view.center.meters,e=l.default.metersPerTile(b.z)/2,f=l.default.metersForTile(b);f.x+=e,f.y-=e;var g=l.default.metersForTile(c);g.x+=e,g.y-=e;var h=Math.abs(d.x-f.x)+Math.abs(d.y-f.y),i=Math.abs(d.x-g.x)+Math.abs(d.y-g.y);return b.center_dist=h,c.center_dist=i,i>h?-1:i===h?0:1}),this.queued_coords.forEach(function(b){return a.loadCoordinate(b)}),this.queued_coords=[])}},{key:"loadCoordinate",value:function(a){if(a.z===this.view.center.tile.z)for(var b in this.scene.sources){var c=this.scene.sources[b];if(c.builds_geometry_tiles&&c.includesTile(a,this.view.tile_zoom)){var d=h.default.key(a,c,this.view.tile_zoom);if(d&&!this.hasTile(d)){n.default("trace","load tile "+d+", distance from view center: "+a.center_dist);var e=h.default.create({source:c,coords:a,worker:this.scene.getWorkerForDataSource(c),style_zoom:this.view.styleZoom(a.z),view:this.view});this.keepTile(e),this.buildTile(e)}}}}},{key:"buildTile",value:function(a,b){this.tileBuildStart(a.key),this.updateVisibility(a),a.build(this.scene.generation,b)}},{key:"buildTileStylesCompleted",value:function(a){var b=a.tile,c=a.progress;null==this.tiles[b.key]?(n.default("trace","discarded tile "+b.key+" in TileManager.buildTileStylesCompleted because previously removed"),h.default.abortBuild(b),this.updateTileStates()):b.generation!==this.scene.generation?(n.default("debug","discarded tile "+b.key+" in TileManager.buildTileStylesCompleted because built with "+("scene config gen "+b.generation+", current "+this.scene.generation)),h.default.abortBuild(b),this.updateTileStates()):(this.tiles[b.key]&&(b=this.tiles[b.key].merge(b)),c.done&&(b.built=!0),b.buildMeshes(this.scene.styles,c),this.updateTileStates(),this.scene.requestRedraw()),c.done&&this.tileBuildStop(b.key)}},{key:"buildTileError",value:function(a){n.default("error","Error building tile "+a.key+":",a.error),this.forgetTile(a.key),h.default.abortBuild(a)}},{key:"tileBuildStart",value:function(a){this.building_tiles=this.building_tiles||{},this.building_tiles[a]=!0,n.default("trace","tileBuildStart for "+a+": "+Object.keys(this.building_tiles).length)}},{key:"tileBuildStop",value:function(a){this.building_tiles&&(n.default("trace","tileBuildStop for "+a+": "+Object.keys(this.building_tiles).length),delete this.building_tiles[a],this.checkBuildQueue())}},{key:"checkBuildQueue",value:function(){this.building_tiles&&0!==Object.keys(this.building_tiles).length||(this.building_tiles=null,this.scene.tileManagerBuildDone())}},{key:"getDebugProp",value:function(a,b){var c=[];for(var d in this.tiles)null==this.tiles[d].debug[a]||"function"==typeof b&&b(this.tiles[d])!==!0||c.push(this.tiles[d].debug[a]);return c}},{key:"getDebugSum",value:function(a,b){var c=0;for(var d in this.tiles)null==this.tiles[d].debug[a]||"function"==typeof b&&b(this.tiles[d])!==!0||(c+=this.tiles[d].debug[a]);return c}},{key:"getDebugAverage",value:function(a,b){return this.getDebugSum(a,b)/Object.keys(this.tiles).length}}]),a}();c.default=q},{"./geo":202,"./tile":252,"./tile_pyramid":254,"./utils/log":260,"./utils/worker_broker":270}],254:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./geo"),i=d(h),j=a("./tile"),k=d(j),l=function(){function a(){f(this,a),this.coords={},this.max_proxy_descendant_depth=3,this.max_proxy_ancestor_depth=5}return g(a,[{key:"sourceTiles",value:function(a,b){return this.coords[a.key]&&this.coords[a.key].sources&&this.coords[a.key].sources[b.name]}},{key:"addTile",value:function(a){var b=a.coords.key,c=this.coords[b];c||(c=this.coords[b]={descendants:0}),c.sources||(c.sources={}),c.sources[a.source.name]||(c.sources[a.source.name]={}),c.sources[a.source.name][a.style_zoom]=a;for(var d=a.coords.z-1;d>=0;d--){var e=k.default.coordinateAtZoom(a.coords,d);this.coords[e.key]||(this.coords[e.key]={descendants:0}),this.coords[e.key].descendants++}}},{key:"removeTile",value:function(a){var b=this.sourceTiles(a.coords,a.source),c=a.coords.key;b&&(delete b[a.style_zoom],0===Object.keys(b).length&&(delete this.coords[c].sources[a.source.name],0===Object.keys(this.coords[c].sources).length&&(delete this.coords[c].sources,0===this.coords[c].descendants&&delete this.coords[c])));for(var d=a.coords.z-1;d>=0;d--){var e=k.default.coordinateAtZoom(a.coords,d);this.coords[e.key]&&this.coords[e.key].descendants>0&&(this.coords[e.key].descendants--,0!==this.coords[e.key].descendants||this.coords[e.key].sources||delete this.coords[e.key])}}},{key:"getAncestor",value:function(a){var b=a.coords,c=a.style_zoom,d=a.source,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;
if(!(e>this.max_proxy_ancestor_depth)){if(c>d.max_zoom){var f=this.sourceTiles(b,d);if(f)for(var g=c-1;g>=d.max_zoom;g--){if(f[g]&&f[g].loaded)return f[g];if(++e>this.max_proxy_ancestor_depth)return}c=d.max_zoom}c--;var h=k.default.coordinateAtZoom(b,b.z-1),i=this.sourceTiles(h,d);return i&&i[c]&&i[c].loaded?i[c]:h.z>0?this.getAncestor({coords:h,style_zoom:c,source:d},e+1):void 0}}},{key:"getDescendants",value:function(a){var b=a.coords,c=a.style_zoom,d=a.source,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,g=[];if(c>=d.max_zoom){var h=this.sourceTiles(b,d);if(h)for(var j=Math.max(i.default.default_view_max_zoom,c+this.max_proxy_descendant_depth),l=c+1;j>=l;l++)if(h[l]&&h[l].loaded)return g.push(h[l]),g;return g}if(this.coords[b.key]&&this.coords[b.key].descendants>0){c++;for(var m=k.default.childrenForCoordinate(b),n=0;n<m.length;n++){var o=m[n],p=this.sourceTiles(o,d);p&&p[c]&&p[c].loaded?g.push(p[c]):f<=this.max_proxy_descendant_depth&&o.z<=d.max_zoom&&g.push.apply(g,e(this.getDescendants({coords:o,source:d,style_zoom:c},f+1)))}}return g}}]),a}();c.default=l},{"./geo":202,"./tile":252}],255:[function(a,b,c){"use strict";function d(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d},{}],256:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_label_snap_animation:!1}},{}],257:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.MethodNotImplemented=function(a){function b(a){d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.name="MethodNotImplemented",c.message="Method "+a+" must be implemented in subclass",c}return f(b,a),b}(Error)},{}],258:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0}),c.mat4=c.mat3=c.vec3=void 0;var e=a("gl-mat3/normal-from-mat4"),f=d(e),g=a("gl-mat3/invert"),h=d(g),i=a("gl-mat4/multiply"),j=d(i),k=a("gl-mat4/translate"),l=d(k),m=a("gl-mat4/scale"),n=d(m),o=a("gl-mat4/perspective"),p=d(o),q=a("gl-mat4/lookAt"),r=d(q),s=a("gl-mat4/identity"),t=d(s),u=a("gl-mat4/copy"),v=d(u),w={fromValues:function(a,b,c){var d=new Float64Array(3);return d[0]=a,d[1]=b,d[2]=c,d}},x={normalFromMat4:f.default,invert:h.default},y={multiply:j.default,translate:l.default,scale:n.default,perspective:p.default,lookAt:r.default,identity:t.default,copy:v.default};c.vec3=w,c.mat3=x,c.mat4=y},{"gl-mat3/invert":84,"gl-mat3/normal-from-mat4":85,"gl-mat4/copy":86,"gl-mat4/identity":87,"gl-mat4/lookAt":88,"gl-mat4/multiply":89,"gl-mat4/perspective":90,"gl-mat4/scale":91,"gl-mat4/translate":92}],259:[function(a,b,c){"use strict";function d(a){var b,c,d,e=0;if(0===a.length)return e;for(b=0,d=a.length;d>b;b++)c=a.charCodeAt(b),e=(e<<5)-e+c,e|=0;return e}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d},{}],260:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a){return l.default.is_main?(p[a]=p[a]||(console[a]?console[a]:console.log).bind(console),p[a]):void 0}function g(a){var b="object"===("undefined"==typeof a?"undefined":h(a))?a.level:a;if(o[b]<=o[g.level]){for(var c=arguments.length,d=Array(c>1?c-1:0),i=1;c>i;i++)d[i-1]=arguments[i];if(l.default.is_worker)n.default.postMessage.apply(n.default,["_logProxy",a].concat(d));else{if("object"===("undefined"==typeof a?"undefined":h(a))&&a.once===!0){if(q[JSON.stringify(d)])return;q[JSON.stringify(d)]=!0}var k=f(b);d.length>1?k.apply(void 0,["Tangram "+j.default+" ["+b+"]: "+d[0]].concat(e(d.slice(1)))):k("Tangram "+j.default+" ["+b+"]: "+d[0])}}}Object.defineProperty(c,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};c.default=g;var i=a("./version"),j=d(i),k=a("./thread"),l=d(k),m=a("./worker_broker"),n=d(m),o={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},p={},q={};g.level="info",g.workers=null,g.setLevel=function(a){g.level=a,l.default.is_main&&Array.isArray(g.workers)&&n.default.postMessage(g.workers,"_logSetLevelProxy",a)},l.default.is_main&&(g.setWorkers=function(a){g.workers=a},g.reset=function(){q={}}),n.default.addTarget("_logProxy",g),n.default.addTarget("_logSetLevelProxy",g.setLevel)},{"./thread":266,"./version":269,"./worker_broker":270}],261:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./log"),h=d(g),i=a("./urls"),j=function(){function a(){e(this,a),this.queue_screenshot=null,this.video_capture=null}return f(a,[{key:"setCanvas",value:function(a){this.canvas=a}},{key:"screenshot",value:function(){var a=this;return null!=this.queue_screenshot?this.queue_screenshot.promise:(this.queue_screenshot={},this.queue_screenshot.promise=new Promise(function(b,c){a.queue_screenshot.resolve=b,a.queue_screenshot.reject=c}),this.queue_screenshot.promise)}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){for(var a=this.canvas.toDataURL("image/png"),b=atob(a.slice(22)),c=new Uint8Array(b.length),d=0;d<b.length;++d)c[d]=b.charCodeAt(d);var e=new Blob([c],{type:"image/png"});this.queue_screenshot.resolve({url:a,blob:e,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var a=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return h.default("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return h.default("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{!function(){var b=a.video_capture={};b.chunks=[],b.stream=a.canvas.captureStream(),b.options={mimeType:"video/webm"},b.media_recorder=new MediaRecorder(b.stream,b.options),b.media_recorder.ondataavailable=function(c){if(c.data.size>0&&b.chunks.push(c.data),b.resolve){var d=new Blob(b.chunks,{type:b.options.mimeType}),e=i.createObjectURL(d);if(b.stream){var f=b.stream.getTracks()||[];f.forEach(function(a){a.stop(),b.stream.removeTrack(a)})}b.stream=null,b.media_recorder=null,a.video_capture=null,b.resolve({url:e,blob:d,type:"webm"})}},b.media_recorder.start()}()}catch(a){return this.video_capture=null,h.default("error","Scene video capture failed",a),!1}return!0}},{key:"stopVideoCapture",value:function(){var a=this;return this.video_capture?(this.video_capture.promise=new Promise(function(b,c){a.video_capture.resolve=b,a.video_capture.reject=c}),this.video_capture.media_recorder.stop(),this.video_capture.promise):(h.default("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),a}();c.default=j},{"./log":260,"./urls":267}],262:[function(a,b,c){"use strict";function d(a){for(var b=arguments.length,c=Array(b>1?b-1:0),f=1;b>f;f++)c[f-1]=arguments[f];for(var g=0;g<c.length;g++){var h=c[g];if(h)for(var i in h){var j=h[i];null===j||"object"!==("undefined"==typeof j?"undefined":e(j))||Array.isArray(j)?void 0!==j&&(a[i]=j):a[i]=null===a[i]||"object"!==e(a[i])||Array.isArray(a[i])?d({},j):d(a[i],j)}}return a}Object.defineProperty(c,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};c.default=d},{}],263:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../vector"),h=d(g),i=function(){function a(b,c,d,f,g){e(this,a),this.dimension=[f,g],this.angle=d,this.centroid=[b,c],this.quad=[],this.axes=[],this.update()}return f(a,[{key:"move",value:function(a,b){this.centroid=[a,b],this.update()}},{key:"getExtent",value:function(){for(var a=1e6,b=[a,a,-a,-a],c=0;4>c;++c)b[0]=Math.min(this.quad[c][0],b[0]),b[1]=Math.min(this.quad[c][1],b[1]),b[2]=Math.max(this.quad[c][0],b[2]),b[3]=Math.max(this.quad[c][1],b[3]);return b}},{key:"perpAxes",value:function(){this.axes[0]=h.default.normalize(h.default.sub(this.quad[2],this.quad[3])),this.axes[1]=h.default.normalize(h.default.sub(this.quad[2],this.quad[1]))}},{key:"update",value:function(){var a=[Math.cos(this.angle),Math.sin(this.angle)],b=[-Math.sin(this.angle),Math.cos(this.angle)];a=h.default.mult(a,this.dimension[0]/2),b=h.default.mult(b,this.dimension[1]/2),this.quad[0]=h.default.sub(h.default.sub(this.centroid,a),b),this.quad[1]=h.default.sub(h.default.add(this.centroid,a),b),this.quad[2]=h.default.add(h.default.add(this.centroid,a),b),this.quad[3]=h.default.add(h.default.sub(this.centroid,a),b),this.perpAxes()}}],[{key:"projectToAxis",value:function(a,b){for(var c=1e6,d=c,e=-c,f=a.quad,g=0;4>g;++g){var i=h.default.dot(f[g],b);d=Math.min(d,i),e=Math.max(e,i)}return[d,e]}},{key:"axisCollide",value:function(b,c,d){for(var e=0;2>e;++e){var f=a.projectToAxis(b,d[e]),g=a.projectToAxis(c,d[e]);if(g[0]>f[1]||g[1]<f[0])return!1}return!0}},{key:"intersect",value:function(b,c){return a.axisCollide(b,c,b.axes)&&a.axisCollide(b,c,c.axes)}}]),a}();c.default=i},{"../vector":271}],264:[function(a){"use strict";a("core-js/es6/promise"),"function"!=typeof Object.assign&&!function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)d.hasOwnProperty(e)&&(b[e]=d[e])}return b}}(),Math.hypot=Math.hypot||function(){for(var a=0,b=arguments.length,c=0;b>c;c++){if(1/0===arguments[c]||arguments[c]===-1/0)return 1/0;a+=arguments[c]*arguments[c]}return Math.sqrt(a)}},{"core-js/es6/promise":7}],265:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){var b=[];return Object.assign(a,{subscribe:function(a){-1===b.indexOf(a)&&b.push(a)},unsubscribe:function(a){var c=b.indexOf(a);c>-1&&b.splice(c,1)},unsubscribeAll:function(){b=[]},trigger:function(a){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];b.forEach(function(b){if("function"==typeof b[a])try{b[a].apply(b,d)}catch(b){g.default("warn","Caught exception in listener for event '"+a+"':",b)}})},hasSubscribersFor:function(a){var c=!1;return b.forEach(function(b){"function"==typeof b[a]&&(c=!0)}),c}})}Object.defineProperty(c,"__esModule",{value:!0}),c.default=e;var f=a("./log"),g=d(f)},{"./log":260}],266:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={};c.default=d;try{window.document!==HTMLDocument&&(d.is_worker=!1,d.is_main=!0)}catch(a){void 0!==self&&(d.is_worker=!0,d.is_main=!1,self.window={document:{}},self.document=self.window.document)}},{}],267:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a||!i(a))return a;var c,d="/"!==a[0];if(b?(c=document.createElement("a"),c.href=b):c=window.location,d){var e=f(c.href);a=e+a}else{var g=c.origin;g||(g=c.protocol+"//"+c.host),a=g+a}return a}function f(a){if("string"==typeof a&&-1===a.search(/^(data|blob):/)){var b=a.indexOf("?");b>-1&&(a=a.substr(0,b));var c=a.indexOf("#");return c>-1&&(a=a.substr(0,c)),a.substr(0,a.lastIndexOf("/")+1)||""}return""}function g(a){a=a.split("/").pop();var b=a.lastIndexOf(".");return b>-1?a.substring(b+1):void 0}function h(a){return"string"==typeof a?a.search(/^(data|blob):/)>-1:void 0}function i(a){return"string"==typeof a?!(a.search(/^(http|https|data|blob):/)>-1||"//"===a.substr(0,2)):void 0}function j(a){for(var b=(a||"").split("/"),c=1;c<b.length;c++)"."===b[c]?(b.splice(c,1),c--):".."===b[c]&&(c+=0,b.splice(c-1,2),c--);return b.join("/")}function k(a,b){if(!b||0===Object.keys(b).length)return[a,[]];var c=a.indexOf("?"),d=a.indexOf("#"),e="";d>-1&&(e=a.slice(d),a=a.slice(0,d)),-1===c&&(c=a.length,a+="?"),c++;var f="",g=[];for(var h in b)""===o(h,a)?f+=h+"="+b[h]+"&":g.push([h,b[h]]);return a=a.slice(0,c)+f+a.slice(c)+e,[a,g]}function l(a){return void 0===r&&(r=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL,"function"!=typeof r&&(r=null,q.default("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs"))),r?r(a):a}function m(a){return void 0===s&&(s=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL,"function"!=typeof s&&(s=null,q.default("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs"))),s?s(a):a}function n(){for(var a=document.currentScript,b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];if(a)return a.src;if(Array.isArray(c))for(var e=document.getElementsByTagName("script"),f=0;f<e.length;f++)for(var g=0;g<c.length;g++)if(e[f].src.indexOf(c[g])>-1)return e[f].src}function o(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),d=c.exec(b);return null===d?"":decodeURIComponent(d[1].replace(/\+/g," "))}Object.defineProperty(c,"__esModule",{value:!0}),c.addBaseURL=e,c.pathForURL=f,c.extensionForURL=g,c.isLocalURL=h,c.isRelativeURL=i,c.flattenRelativeURL=j,c.addParamsToURL=k,c.createObjectURL=l,c.revokeObjectURL=m,c.findCurrentURL=n;var p=a("./log"),q=d(p),r=void 0,s=void 0},{"./log":260}],268:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(c,"__esModule",{value:!0});var f,g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=a("./log"),i=d(h),j=a("./thread"),k=d(j),l=a("./worker_broker"),m=d(l),n=a("../geo"),o=d(n);c.default=f={},m.default.addTarget("Utils",f),f.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},f.isMicrosoft=function(){return/(Trident\/7.0|Edge[ \/](\d+[\.\d]+))/i.test(navigator.userAgent)},f._requests={},f._proxy_requests={},f.io=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET",e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(k.default.is_worker&&f.isMicrosoft())return i.default("debug","Proxying request for URL to worker",a),g&&(f._proxy_requests[g]=!0),m.default.postMessage("Utils.io",a,b,c,d,e,g,!0);var j=new XMLHttpRequest,l=new Promise(function(e,f){j.open(d,a,!0),j.timeout=b,j.responseType=c,j.onload=function(){200===j.status?e(["text","json"].indexOf(j.responseType)>-1?j.responseText:j.response):f(Error("Request error with a status of "+j.statusText))},j.onerror=function(a){f(Error("There was a network error"+a.toString()))},j.ontimeout=function(a){f(Error("timeout "+a.toString()))},j.send()});return l=l.then(function(a){return g&&delete f._requests[g],h?m.default.withTransferables(a):a}),g&&(f._requests[g]=j),l},f.cancelRequest=function(a){if(k.default.is_worker&&f._proxy_requests[a])return m.default.postMessage("Utils.cancelRequest",a);var b=f._requests[a];b?(i.default("trace","Cancelling network request key '"+a+"'"),f._requests[a].abort(),delete f._requests[a]):i.default("trace","Could not find network request key '"+a+"'")},f.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,1e3/60)})},f.serializeWithFunctions=function(a){var b=JSON.stringify(a,function(a,b){return"function"==typeof b?b.toString():b});return b},f.stringsToFunctions=function(a,b){if("string"==typeof a)a=f.stringToFunction(a,b);else if(null!=a&&"object"===("undefined"==typeof a?"undefined":g(a)))for(var c in a)a[c]=f.stringsToFunctions(a[c],b);return a},f.stringToFunction=function(a,b){var c="string"==typeof a&&a.match(/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m);if(c&&c.length>2)try{var d=c[2],f=c[1].length>0&&c[1].split(",").map(function(a){return a.trim()}).filter(function(a){return a});return f=f.length>0?f:["context"],"function"==typeof b?new(Function.prototype.bind.apply(Function,[null].concat(e(f),[b(d)]))):new(Function.prototype.bind.apply(Function,[null].concat(e(f),[d])))}catch(b){return a}return a},f.use_high_density_display=!0,f.updateDevicePixelRatio=function(){var a=f.device_pixel_ratio;return f.device_pixel_ratio=f.use_high_density_display&&window.devicePixelRatio||1,f.device_pixel_ratio!==a},k.default.is_main&&f.updateDevicePixelRatio(),f.isPowerOf2=function(a){return 0===(a&a-1)},f.interpolate=function(a,b,c){if(!Array.isArray(b)||!Array.isArray(b[0]))return b;if(b.length<1)return b;var d,e,f,g,h,i;if(a<=b[0][0])g=b[0][1],"function"==typeof c&&(g=c(g));else if(a>=b[b.length-1][0])g=b[b.length-1][1],"function"==typeof c&&(g=c(g));else for(var j=0;j<b.length-1;j++)if(a>=b[j][0]&&a<b[j+1][0]){if(d=b[j][0],e=b[j+1][0],Array.isArray(b[j][1])){g=[];for(var k=0;k<b[j][1].length;k++)"function"==typeof c?(h=c(b[j][1][k]),i=c(b[j+1][1][k]),f=i-h,g[k]=f*(a-d)/(e-d)+h):(f=b[j+1][1][k]-b[j][1][k],g[k]=f*(a-d)/(e-d)+b[j][1][k])}else"function"==typeof c?(h=c(b[j][1]),i=c(b[j+1][1]),f=i-h,g=f*(a-d)/(e-d)+h):(f=b[j+1][1]-b[j][1],g=f*(a-d)/(e-d)+b[j][1]);break}return g},f.toCSSColor=function(a){return 1===a[3]?"rgb("+a.slice(0,3).map(function(a){return Math.round(255*a)}).join(", ")+")":"rgba("+a.map(function(a,b){return 3>b&&Math.round(255*a)||a}).join(", ")+")"},f.pointInTile=function(a){return a[0]>=0&&a[1]>-o.default.tile_scale&&a[0]<o.default.tile_scale&&a[1]<=0}},{"../geo":202,"./log":260,"./thread":266,"./worker_broker":270}],269:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=JSON.parse('{\n  "name": "tangram",\n  "version": "0.12.1",\n  "description": "WebGL Maps for Vector Tiles",\n  "repository": {\n    "type": "git",\n    "url": "git://github.com/tangrams/tangram.git"\n  },\n  "main": "dist/tangram.min.js",\n  "homepage": "https://github.com/tangrams/tangram",\n  "keywords": [\n    "maps",\n    "graphics",\n    "rendering",\n    "visualization",\n    "WebGL",\n    "OpenStreetMap"\n  ],\n  "config": {\n    "output": "",\n    "output_map": ""\n  },\n  "scripts": {\n    "start": "npm run watch",\n    "test": "npm run lint && npm run build-bundle && npm run test-local",\n    "test-ci": "npm run lint && npm run build-bundle && npm run test-remote",\n    "test-remote": "./node_modules/karma/bin/karma start --browsers SL_Firefox --single-run",\n    "test-local": "./node_modules/karma/bin/karma start --browsers Chrome --single-run",\n    "karma-start": "./node_modules/karma/bin/karma start --browsers Chrome --no-watch",\n    "karma-run": "./node_modules/karma/bin/karma run --browsers Chrome",\n    "lint": "$(npm bin)/jshint src/ && jshint test/",\n    "build": "npm run build-bundle && npm run build-minify",\n    "build-bundle": "$(npm bin)/browserify src/module.js -t [ babelify --presets [ es2015 ] ] -t brfs --debug -s Tangram -p browserify-derequire -p [ \'./build/quine.js\' \'tangram.debug.js.map\' ] -p [ mapstraction \'dist/tangram.debug.js.map\' ] -o dist/tangram.debug.js",\n    "build-minify": "$(npm bin)/uglifyjs dist/tangram.debug.js -c warnings=false -m -o dist/tangram.min.js && npm run build-size",\n    "build-size": "gzip dist/tangram.min.js -c | wc -c | awk \'{kb=$1/1024; print kb}\' OFMT=\'%.0fk minified+gzipped\'",\n    "watch": "$(npm bin)/budo src/module.js:dist/tangram.debug.js --port 8000 --cors --live -- -t [ babelify --presets [ es2015 ] ] -t brfs -s Tangram -p [ \'./build/quine.js\' \'tangram.debug.temp.js.map\' ] -p [ mapstraction \'dist/tangram.debug.temp.js.map\' ]"\n  },\n  "author": {\n    "name": "Mapzen",\n    "email": "tangram@mapzen.com"\n  },\n  "contributors": [\n    {\n      "name": "Brett Camper"\n    },\n    {\n      "name": "Peter Richardson"\n    },\n    {\n      "name": "Patricio Gonzalez Vivo"\n    },\n    {\n      "name": "Karim Naaji"\n    },\n    {\n      "name": "Ivan Willig"\n    },\n    {\n      "name": "Lou Huang"\n    },\n    {\n      "name": "David Valdman"\n    }\n  ],\n  "license": "MIT",\n  "dependencies": {\n    "brfs": "1.4.3",\n    "csscolorparser": "1.0.3",\n    "earcut": "2.1.1",\n    "fontfaceobserver": "2.0.7",\n    "geojson-vt": "2.4.0",\n    "gl-mat3": "1.0.0",\n    "gl-mat4": "1.1.4",\n    "gl-shader-errors": "1.0.3",\n    "js-yaml": "tangrams/js-yaml#read-only",\n    "jszip": "tangrams/jszip#read-only",\n    "pbf": "1.3.7",\n    "strip-comments": "0.3.2",\n    "topojson-client": "tangrams/topojson-client#read-only",\n    "vector-tile": "1.3.0"\n  },\n  "devDependencies": {\n    "babelify": "7.3.0",\n    "babel-preset-es2015": "6.16.0",\n    "browserify": "13.0.1",\n    "browserify-derequire": "0.9.4",\n    "budo": "8.2.1",\n    "chai": "1.9.2",\n    "chai-as-promised": "4.1.1",\n    "core-js": "2.4.1",\n    "glob": "4.0.6",\n    "jshint": "jshint/jshint#3a8efa979dbb157bfb5c10b5826603a55a33b9ad",\n    "karma": "1.5.0",\n    "karma-browserify": "5.1.0",\n    "karma-chrome-launcher": "2.0.0",\n    "karma-mocha": "0.1.9",\n    "karma-mocha-reporter": "1.0.0",\n    "karma-sauce-launcher": "tangrams/karma-sauce-launcher#firefox-profiles2",\n    "karma-sinon": "1.0.4",\n    "mapstraction": "1.0.1",\n    "mocha": "1.21.4",\n    "sinon": "1.10.3",\n    "through2": "2.0.3",\n    "uglify-js": "2.4.14",\n    "yargs": "1.3.2"\n  }\n}\n'),e=void 0;c.default=e="v"+d.version},{}],270:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a){var b=[];"string"==typeof a&&(b=a.split("."),a=b.pop());for(var c=v,d=0;d<b.length;d++){if(!c[b[d]])return[];c=c[b[d]]}return[a,c]}function g(){m.postMessage=function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),f=2;c>f;f++)d[f-2]=arguments[f];if(Array.isArray(a))return Promise.all(a.map(function(a){var c;return(c=m).postMessage.apply(c,[a,b].concat(e(d)))}));var g=new Promise(function(a,c){u[t]={method:b,message:d,resolve:a,reject:c}}),h=void 0,i=[];return d&&1===d.length&&d[0]instanceof m.withTransferables&&(i=d[0].transferables,d=d[0].value),h={type:"main_send",message_id:t,method:b,message:d},h=k(h,i),a.postMessage(h,i.map(function(a){return a.object})),j(i),i.length>0&&s.default("trace","'"+b+"' transferred "+i.length+" objects to worker thread"),t++,g},m.addWorker=function(a){if(!(a instanceof Worker))throw Error("Worker broker could not add non-Worker object",a);a.addEventListener("message",function(b){var c=l(b.data),d=c.message_id;if("worker_reply"===c.type)u[d]&&(c.error?u[d].reject(c.error):u[d].resolve(c.message),delete u[d]);else if("worker_send"===c.type&&null!=d){var e,g,h,i,n;!function(){var b=f(c.method),l=o(b,2);if(e=l[0],g=l[1],!g)throw Error("Worker broker could not dispatch message type "+c.method+" on target "+c.target+" because no object with that name is registered on main thread");if(h="function"==typeof g[e]&&g[e],!h)throw Error("Worker broker could not dispatch message type "+c.method+" on target "+c.target+" because object has no method with that name");try{i=h.apply(g,c.message)}catch(a){n=a}var p=void 0,q=[];i instanceof Promise?i.then(function(b){b instanceof m.withTransferables&&(q=b.transferables,b=b.value[0]),p={type:"main_reply",message_id:d,message:b},p=k(p,q),a.postMessage(p,q.map(function(a){return a.object})),j(q),q.length>0&&s.default("trace","'"+e+"' transferred "+q.length+" objects to worker thread")},function(b){a.postMessage({type:"main_reply",message_id:d,error:b instanceof Error?b.message+": "+b.stack:b})}):(i instanceof m.withTransferables&&(q=i.transferables,i=i.value[0]),p={type:"main_reply",message_id:d,message:i,error:n instanceof Error?n.message+": "+n.stack:n},p=k(p,q),a.postMessage(p,q.map(function(a){return a.object})),j(q),q.length>0&&s.default("trace","'"+e+"' transferred "+q.length+" objects to worker thread"))}()}})},m.getMessages=function(){return u},m.getMessageId=function(){return t}}function h(){m.postMessage=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];var e=new Promise(function(b,d){u[t]={method:a,message:c,resolve:b,reject:d}}),f=void 0,g=[];return c&&1===c.length&&c[0]instanceof m.withTransferables&&(g=c[0].transferables,c=c[0].value),f={type:"worker_send",message_id:t,method:a,message:c},f=k(f,g),self.postMessage(f,g.map(function(a){return a.object})),j(g),g.length>0&&s.default("trace","'"+a+"' transferred "+g.length+" objects to main thread"),t++,e},self.addEventListener("message",function(a){var b=l(a.data),c=b.message_id;if("main_reply"===b.type)u[c]&&(b.error?u[c].reject(b.error):u[c].resolve(b.message),delete u[c]);else if("main_send"===b.type&&null!=c){var d,e,g,h,i;!function(){var a=f(b.method),l=o(a,2);if(d=l[0],e=l[1],!e)throw Error("Worker broker could not dispatch message type "+b.method+" on target "+b.target+" because no object with that name is registered on main thread");if(g="function"==typeof e[d]&&e[d],!g)throw Error("Worker broker could not dispatch message type "+b.method+" because worker has no method with that name");try{h=g.apply(e,b.message)}catch(a){i=a}var n=void 0,p=[];h instanceof Promise?h.then(function(a){a instanceof m.withTransferables&&(p=a.transferables,a=a.value[0]),n={type:"worker_reply",message_id:c,message:a},n=k(n,p),self.postMessage(n,p.map(function(a){return a.object})),j(p),p.length>0&&s.default("trace","'"+d+"' transferred "+p.length+" objects to main thread")},function(a){self.postMessage({type:"worker_reply",message_id:c,error:a instanceof Error?a.message+": "+a.stack:a})}):(h instanceof m.withTransferables&&(p=h.transferables,h=h.value[0]),n={type:"worker_reply",message_id:c,message:h,error:i instanceof Error?i.message+": "+i.stack:i},n=k(n,p),self.postMessage(n,p.map(function(a){return a.object})),j(p),p.length>0&&s.default("trace","'"+d+"' transferred "+p.length+" objects to main thread"))}()}})}function i(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!a)return d;if(Array.isArray(a))a.forEach(function(b,c){return i(b,a,c,d)});else if("object"===("undefined"==typeof a?"undefined":n(a)))if(a instanceof ArrayBuffer)d.push({object:a,parent:b,property:c});else if(a.buffer instanceof ArrayBuffer)d.push({object:a.buffer,parent:b,property:c});else for(var e in a)i(a[e],a,e,d);return d}function j(a){Array.isArray(a)&&a.filter(function(a){return a.parent&&a.property}).forEach(function(a){return delete a.parent[a.property]})}function k(a,b){return 0===b.length&&(a=JSON.stringify(a)),a}function l(a){return"string"==typeof a?JSON.parse(a):a}Object.defineProperty(c,"__esModule",{value:!0});var m,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},o=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=a("./thread"),q=d(p),r=a("./log"),s=d(r);c.default=m={};var t=0,u={},v={};m.addTarget=function(a,b){v[a]=b},m.withTransferables=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return this instanceof m.withTransferables?(this.value=b,void(this.transferables=i(this.value))):new(Function.prototype.bind.apply(m.withTransferables,[null].concat(b)))},q.default.is_main&&g(),q.default.is_worker&&h()},{"./log":260,"./thread":266}],271:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();c.default=d={},d.set=function(a){for(var b=[],c=a.length,d=0;c>d;d++)b[d]=a[d];return b},d.neg=function(a){for(var b=[],c=a.length,d=0;c>d;d++)b[d]=-a[d];return b},d.add=function(a,b){for(var c=[],d=Math.min(a.length,b.length),e=0;d>e;e++)c[e]=a[e]+b[e];return c},d.sub=function(a,b){for(var c=[],d=Math.min(a.length,b.length),e=0;d>e;e++)c[e]=a[e]-b[e];return c},d.signed_area=function(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])},d.mult=function(a,b){var c,d=[],e=a.length;if("number"==typeof b)for(c=0;e>c;c++)d[c]=a[c]*b;else for(e=Math.min(a.length,b.length),c=0;e>c;c++)d[c]=a[c]*b[c];return d},d.div=function(a,b){var c,d=[];if("number"==typeof b)for(c=0;c<a.length;c++)d[c]=a[c]/b;else{var e=Math.min(a.length,b.length);for(c=0;e>c;c++)d[c]=a[c]/b[c]}return d},d.perp=function(a,b){return[b[1]-a[1],a[0]-b[0]]},d.rot=function(a,b){var c=Math.cos(b),d=Math.sin(b);return[a[0]*c-a[1]*d,a[0]*d+a[1]*c]},d.angle=function(a){var b=e(a,2),c=b[0],d=b[1];return Math.atan2(d,c)},d.angleBetween=function(a,b){var c=d.dot(d.normalize(a),d.normalize(b));return c>1&&(c=1),Math.acos(c)},d.isEqual=function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]!==b[d])return!1;return!0},d.lengthSq=function(a){return 2===a.length?a[0]*a[0]+a[1]*a[1]:a.length>=3?a[0]*a[0]+a[1]*a[1]+a[2]*a[2]:0},d.length=function(a){return Math.sqrt(d.lengthSq(a))},d.normalize=function(a){var b;if(2===a.length)return b=a[0]*a[0]+a[1]*a[1],1===b?a:(b=Math.sqrt(b),0!==b?[a[0]/b,a[1]/b]:[0,0]);if(a.length>=3){if(b=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],1===b)return a;
if(b=Math.sqrt(b),0!==b)return[a[0]/b,a[1]/b,a[2]/b]}return[0,0,0]},d.cross=function(a,b){return 2===a.length?a[0]*b[1]-a[1]*b[0]:3===a.length?[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]:void 0},d.dot=function(a,b){for(var c=0,d=Math.min(a.length,b.length),e=0;d>e;e++)c+=a[e]*b[e];return c}},{}],272:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.VIEW_PAN_SNAP_TIME=void 0;var f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./geo"),i=d(h),j=a("./tile"),k=d(j),l=a("./camera"),m=d(l),n=a("./utils/utils"),o=d(n),p=a("./utils/subscribe"),q=d(p),r=a("./utils/log"),s=d(r),t=c.VIEW_PAN_SNAP_TIME=.5,u=function(){function a(b,c){e(this,a),q.default(this),this.scene=b,this.createMatrices(),this.zoom=null,this.center=null,this.bounds=null,this.meters_per_pixel=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.zooming=!1,this.zoom_direction=0,this.size={css:{},device:{},meters:{}},this.aspect=null,this.buffer=0,this.continuous_zoom="boolean"!=typeof c.continuousZoom||c.continuousZoom,this.wrap=c.wrapView!==!1,this.tile_simplification_level=0,this.preserve_tiles_within_zoom=1,this.reset()}return g(a,[{key:"reset",value:function(){this.createCamera()}},{key:"createCamera",value:function(){var a=this.getActiveCamera();a&&(this.camera=m.default.create(a,this,this.scene.config.cameras[a]),this.camera.updateView())}},{key:"getActiveCamera",value:function(){if(this.scene.config&&this.scene.config.cameras){for(var a in this.scene.config.cameras)if(this.scene.config.cameras[a].active)return a;var b=Object.keys(this.scene.config.cameras);return b.length&&b[0]}}},{key:"setActiveCamera",value:function(a){var b=this.getActiveCamera();return this.scene.config.cameras[a]&&(this.scene.config.cameras[a].active=!0,b&&b!==a&&this.scene.config.cameras[b]&&delete this.scene.config.cameras[b].active),this.scene.updateConfig({rebuild:!1}),this.getActiveCamera()}},{key:"update",value:function(){this.camera.update(),this.pan_snap_timer=(+new Date-this.panning_stop_at)/1e3}},{key:"setViewportSize",value:function(a,b){this.size.css={width:a,height:b},this.size.device={width:Math.round(this.size.css.width*o.default.device_pixel_ratio),height:Math.round(this.size.css.height*o.default.device_pixel_ratio)},this.aspect=this.size.css.width/this.size.css.height,this.updateBounds()}},{key:"setView",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.lng,c=a.lat,d=a.zoom,e=!1;return"number"==typeof b&&"number"==typeof c&&(this.center&&b===this.center.lng&&c===this.center.lat||(e=!0,this.center={lng:b,lat:c})),"number"==typeof d&&d!==this.zoom&&(e=!0,this.setZoom(d)),e&&this.updateBounds(),e}},{key:"setZoom",value:function(a){this.zooming?this.zooming=!1:this.last_zoom=this.zoom;var b=this.tile_zoom,c=this.tileZoom(a);this.continuous_zoom||(a=c),c!==b&&(this.zoom_direction=c>b?1:-1),this.last_zoom=this.zoom,this.zoom=a,this.tile_zoom=c,this.updateBounds(),this.scene.requestRedraw()}},{key:"startZoom",value:function(){this.last_zoom=this.zoom,this.zooming=!0}},{key:"baseZoom",value:function(a){return Math.floor(a)}},{key:"tileZoom",value:function(a){return Math.max(this.baseZoom(a)-this.tile_simplification_level,0)}},{key:"styleZoom",value:function(a){return this.baseZoom(a)+this.tile_simplification_level}},{key:"setPanning",value:function(a){this.panning=a,this.panning||(this.panning_stop_at=+new Date)}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height&&null!=this.center&&"number"==typeof this.zoom}},{key:"updateBounds",value:function(){if(this.ready()){this.meters_per_pixel=i.default.metersPerPixel(this.zoom),this.size.meters={x:this.size.css.width*this.meters_per_pixel,y:this.size.css.height*this.meters_per_pixel};var a=i.default.latLngToMeters([this.center.lng,this.center.lat]),b=f(a,2),c=b[0],d=b[1];this.center.meters={x:c,y:d},this.center.tile=i.default.tileForMeters([this.center.meters.x,this.center.meters.y],this.tile_zoom),this.bounds={sw:{x:this.center.meters.x-this.size.meters.x/2,y:this.center.meters.y-this.size.meters.y/2},ne:{x:this.center.meters.x+this.size.meters.x/2,y:this.center.meters.y+this.size.meters.y/2}},this.scene.tile_manager.updateTilesForView(),this.trigger("move"),this.scene.requestRedraw()}}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var a=this.tile_zoom,b=i.default.tileForMeters([this.bounds.sw.x,this.bounds.sw.y],a),c=i.default.tileForMeters([this.bounds.ne.x,this.bounds.ne.y],a),d=[b.x-this.buffer,c.x+this.buffer,c.y-this.buffer,b.y+this.buffer];this.wrap===!1&&!function(){var b=(1<<a)-1;d=d.map(function(a){return Math.min(Math.max(0,a),b)})}();for(var e=[],f=d[0];f<=d[1];f++)for(var g=d[2];g<=d[3];g++)e.push(k.default.coord({x:f,y:g,z:a}));return e}},{key:"pruneTilesForView",value:function(){var a=this;if(this.ready()){var b=[Math.ceil((Math.floor(this.size.css.width/i.default.tile_size)+2)/2),Math.ceil((Math.floor(this.size.css.height/i.default.tile_size)+2)/2)];this.scene.tile_manager.removeTiles(function(c){if(c.visible||c.proxy_for)return!1;if(c.loading&&c.style_zoom!==a.tile_zoom)return!0;var d=Math.abs(c.style_zoom-a.tile_zoom);if(d>a.preserve_tiles_within_zoom)return!0;var e=k.default.coordinateAtZoom(c.coords,a.tile_zoom);return Math.abs(e.x-a.center.tile.x)-b[0]>a.buffer?(s.default("trace","View: remove tile "+c.key+" (as "+e.x+"/"+e.y+"/"+a.tile_zoom+") for being too far out of visible area ***"),!0):Math.abs(e.y-a.center.tile.y)-b[1]>a.buffer&&(s.default("trace","View: remove tile "+c.key+" (as "+e.x+"/"+e.y+"/"+a.tile_zoom+") for being too far out of visible area ***"),!0)})}}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(a,b){a.setupProgram(this.matrices,b),this.camera.setupMatrices(this.matrices,b)}},{key:"setupProgram",value:function(a){a.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),a.uniform("3fv","u_map_position",[this.center.meters.x,this.center.meters.y,this.zoom]),a.uniform("1f","u_meters_per_pixel",this.meters_per_pixel),a.uniform("1f","u_device_pixel_ratio",o.default.device_pixel_ratio),a.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),a.uniform("1i","u_view_panning",this.panning),this.camera.setupProgram(a)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=t}}]),a}();c.default=u},{"./camera":201,"./geo":202,"./tile":252,"./utils/log":260,"./utils/subscribe":265,"./utils/utils":268}]},{},[226])(226)})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"torque.js":[function(a,b,c){b.exports=a("./core"),b.exports.Animator=a("./animator"),b.exports.cartocss_reference=a("./cartocss_reference"),b.exports.common=a("./common"),b.exports.math=a("./math"),b.exports.Mercator=a("./mercator"),b.exports.net=a("./request"),b.exports.renderer=a("./renderer"),b.exports.providers=a("./provider"),a("./leaflet");var d=a("./gmaps");b.exports.GMapsTileLoader=d.GMapsTileLoader,b.exports.GMapsTorqueLayer=d.GMapsTorqueLayer,b.exports.GMapsTiledTorqueLayer=d.GMapsTiledTorqueLayer,a("./ol")},{"./animator":323,"./cartocss_reference":324,"./common":325,"./core":326,"./gmaps":330,"./leaflet":333,"./math":336,"./mercator":337,"./ol":339,"./provider":343,"./renderer":350,"./request":354}],underscore:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=u),c._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&b<=A};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;if(d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&d!==-1)return a[d]},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d<f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);g<h;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;j<k;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);d<e;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;g<c&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;d<b;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);f<g;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;g<e;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;j<b&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;h<f;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;h<i;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a||(C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length)},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,u)},i=b.variable||"obj";return h.source="function("+i+"){\n"+f+"}",h},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)},{}]},{},[]);
//# sourceMappingURL=vendor_editor3.js.map