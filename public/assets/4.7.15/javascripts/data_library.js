/*! v4.7.15 - 2017-05-30 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=function(){var a=_.template('<p class="CDB-Text CDB-Size-medium u-altTextColor">"<%= quote %>"</p><% if (author) { %><p class="CDB-Text CDB-Size-medium u-altTextColor u-tSpace"><em>– <%- author %></em></p><% } %>'),b=[{quote:"Geographers never get lost. They just do accidental field work.",author:"Nicholas Chrisman"},{quote:"Geography is just physics slowed down, with a couple of trees stuck in it.",author:"Terry Pratchett"},{quote:"Not all those who wander are lost.",author:"J. R. R. Tolkien"},{quote:"In that Empire, the Art of Cartography attained such Perfection that the map of a single Province occupied the entirety of a City.",author:"Jorge Luis Borges"},{quote:"X marks the spot",author:"Indiana Jones"},{quote:"It's turtles all the way down.",author:null},{quote:"Remember: no matter where you go, there you are.",author:null},{quote:"Without geography, you're nowhere!",author:"Jimmy Buffett"},{quote:"our earth is a globe / whose surface we probe /<br />no map can replace her / but just try to trace her",author:"Steve Waterman"},{quote:"Everything happens somewhere.",author:"Doctor Who"},{quote:"A map is the greatest of all epic poems. Its lines and colors show the realization of great dreams.",author:"Gilbert H. Grosvenor"},{quote:"Everything is related to everything else,<br />but near things are more related than distant things.",author:"Tobler's first law of geography"},{quote:"Hic Sunt Dracones",author:null},{quote:"Here be dragons",author:null},{quote:"Stand in the place where you live / Now face North /<br/>Think about direction / Wonder why you haven't before",author:"R.E.M"},{quote:"The virtue of maps, they show what can be done with limited space, they foresee that everything can happen therein.",author:"José Saramago"}],c=Math.round(Math.random()*(b.length-1));return a(b[c])}},{}],2:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null,d="undefined"!=typeof window?window.cdb:"undefined"!=typeof a?a.cdb:null,e="undefined"!=typeof window?window._:"undefined"!=typeof a?a._:null;b.exports=d.core.View.extend({options:{width:300,height:170,privacy:"PUBLIC",username:"",visId:"",mapsApiResource:"",className:"",authTokens:[]},_TEMPLATES:{regular:"<%- protocol %>://<%= mapsApiResource %>/api/v1/map/static/named/<%- tpl %>/<%- width %>/<%- height %>.png<%= authTokens %>",cdn:"<%- protocol %>://<%- cdn %>/<%- username %>/api/v1/map/static/named/<%- tpl %>/<%- width %>/<%- height %>.png<%= authTokens %>"},initialize:function(){e.each(["visId","mapsApiResource","username"],function(a){this.options[a]||console.log(a+" is required for Static Map instantiation")},this)},load:function(){return this._startLoader(),this._loadFromVisId(),this},_generateImageTemplate:function(){return"tpl_"+this.options.visId.replace(/-/g,"_")},_loadFromVisId:function(){var a=this._isHTTPS()?"https":"http",b=d.config.get("cdn_url"),c=e.template(b?this._TEMPLATES.cdn:this._TEMPLATES.regular),f={protocol:a,username:this.options.username,mapsApiResource:this.options.mapsApiResource,tpl:this._generateImageTemplate(),width:this.options.width,height:this.options.height,authTokens:this._generateAuthTokensParams()};b&&(f=e.extend(f,{cdn:b[a]}));var g=c(f);this._loadImage({},g)},_generateAuthTokensParams:function(){var a=this.options.authTokens;return a&&a.length>0?"?"+e.map(a,function(a){return"auth_token="+a}).join("&"):""},_isHTTPS:function(){return 0===location.protocol.indexOf("https")},loadURL:function(a){var b=c('<img class="MapCard-preview" src="'+a+'" />');this.$el.append(b),this.options.className&&b.addClass(this.options.className),b.fadeIn(250)},showError:function(){this._onError()},_startLoader:function(){this.$el.addClass("is-loading")},_stopLoader:function(){this.$el.removeClass("is-loading")},_onSuccess:function(a){this._stopLoader(),this.loadURL(a),this.trigger("loaded",a)},_onError:function(a){this._stopLoader(),this.$el.addClass("has-error");var b=c('<div class="MapCard-error" />');this.$el.append(b),b.fadeIn(250),this.trigger("error")},_loadImage:function(a,b){var c=this,d=new Image;d.onerror=function(){c._onError(a)},d.onload=function(){c._onSuccess(b)};try{d.src=b}catch(a){this._onError(a)}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.cdb:"undefined"!=typeof c?c.cdb:null,e=a("../../../common/views/mapcard_preview");"undefined"!=typeof window?window.cdb.Utils:"undefined"!=typeof c?c.cdb.Utils:null;b.exports=d.core.View.extend({tagName:"li",className:"MapsList-item",initialize:function(){this.template=d.templates.getTemplate("data_library/content/list/dataset_item_template")},render:function(){this.clearSubViews();var a=this.model,b={vis:a.attributes,date:"updated_at"===a.get("order")?a.get("updated_at"):a.get("created_at"),datasetSize:this._getDatasetSize(a.get("table").size),geomType:this._getGeometryType(a.get("table").geometry_types),account_host:d.config.get("account_host"),dataset_base_url:d.config.get("dataset_base_url")};return this.$el.html(this.template(b)),this._renderMapThumbnail(),this},_renderMapThumbnail:function(){var a=this.model.get("permission").owner.username,b=new e({el:this.$(".js-header"),username:a,width:298,height:220,visId:this.model.get("id"),mapsApiResource:d.config.getMapsResourceName(a)});this.imageURL?b.loadURL(this.imageURL):b.load(),b.bind("loaded",function(a){this.imageURL=a},this),this.addView(b)},_getGeometryType:function(a){if(a&&a.length>0){var b=["point","polygon","line","raster"],c=a[0];return _.find(b,function(a){return c.toLowerCase().indexOf(a)!==-1})}return null},_getDatasetSize:function(a){return a?d.Utils.readablizeBytes(a,!0).split(" "):0}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/views/mapcard_preview":2}],4:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.cdb:"undefined"!=typeof a?a.cdb:null;b.exports=c.core.View.extend({className:"MapsList-item MapsList-item--fake",tagName:"li",initialize:function(){this.template=c.templates.getTemplate("data_library/content/list/placeholder_item_template")},render:function(){return this.clearSubViews(),this.$el.html(this.template()),this}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.cdb:"undefined"!=typeof c?c.cdb:null,e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=a("./dataset_item_view"),g=a("./placeholder_item_view"),h=3;b.exports=d.core.View.extend({tagName:"ul",initialize:function(){this._initBinds()},render:function(){1===this.collection.options.get("page")&&this.clearSubViews(),this.collection.each(this._addItem,this);var a="MapsList";return this.collection._ITEMS_PER_PAGE*this.collection.options.get("page")>=this.collection.total_entries&&(a+=" is-bottom"),this.$el.attr("class",a),this.collection.size()>0&&this._fillEmptySlotsWithPlaceholderItems(),this},show:function(){this.$el.removeClass("is-hidden")},hide:function(){this.$el.addClass("is-hidden")},_addItem:function(a){var b=new f({model:a});this.addView(b),this.$el.append(b.render().el)},_initBinds:function(){this.collection.bind("reset",this.render,this),this.add_related_model(this.collection)},_fillEmptySlotsWithPlaceholderItems:function(){e.times(this._emptySlotsCount(),function(a){var b=new g;this.$el.append(b.render().el),this.addView(b)},this)},_emptySlotsCount:function(){return(this.collection._ITEMS_PER_PAGE-this.collection.size())%h}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./dataset_item_view":3,"./placeholder_item_view":4}],6:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.cdb:"undefined"!=typeof c?c.cdb:null,e=a("../../common/view_helpers/random_quote");b.exports=d.core.View.extend({initialize:function(){this.template=d.templates.getTemplate(this.options.template),this._initBinds()},render:function(){return this.$el.html(this.template({defaultUrl:"",page:this.collection.options.get("page"),isSearching:this.model.get("is_searching"),tag:this.collection.options.get("tags"),q:this.collection.options.get("q"),quote:e(),type:this.collection.options.get("type"),totalItems:this.collection.size(),totalEntries:this.collection.total_entries})),this},_initBinds:function(){this.collection.bind("change",this.render,this),this.collection.bind("remove add reset",this.render,this),this.add_related_model(this.collection)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/view_helpers/random_quote":1}],7:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.cdb:"undefined"!=typeof a?a.cdb:null;b.exports=c.admin.Visualizations.extend({_ITEMS_PER_PAGE:12,model:c.core.Model,url:function(){var a="//"+c.config.get("data_library_user")+"."+c.config.get("account_host")+"/api/v1/viz";return a+="?"+this._createUrlOptions()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){(function(b){var c="undefined"!=typeof window?window.$:"undefined"!=typeof b?b.$:null,d="undefined"!=typeof window?window.cdb:"undefined"!=typeof b?b.cdb:null,e=a("../public_dashboard/user_info_view"),f=a("../public_common/user_settings_view"),g=a("../public_common/user_industries_view"),h=a("./main_view");c(function(){d.init(function(){d.templates.namespace="cartodb/",d.config.set(window.config),d.config.set("data_library_user",window.config.common_data_user),d.config.set("dataset_base_url",window.dataset_base_url);new g({el:c(".js-user-industries")});c(document.body).bind("click",function(){d.god.trigger("closeDialogs")});var a=new d.open.AuthenticatedUser({host:d.config.get("data_library_user")+"."+d.config.get("account_host")});a.sync=Backbone.withCORS,a.bind("change",function(){if(a.get("username")){var b=new d.admin.User(a.attributes),e=new f({el:c(".js-user-settings"),model:b});e.render(),c(".js-login").hide(),c(".js-learn").show()}});var b=new e({el:c(".js-user-info")});b.render();var i=new h({el:c(".js-data_library")});i.render(),a.fetch()})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../public_common/user_industries_view":14,"../public_common/user_settings_view":16,"../public_dashboard/user_info_view":18,"./main_view":12}],9:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.cdb:"undefined"!=typeof a?a.cdb:null;c.admin="undefined"!=typeof window?window.cdb.admin:"undefined"!=typeof a?a.cdb.admin:null;var d="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=c.admin.DropdownMenu.extend({className:"CDB-Text Dropdown Dropdown--public",events:{click:"killEvent","click .js-all":"_onClickAll","click .js-categoryLink":"_onClickLink"},initialize:function(){this.elder("initialize"),this.template_base=c.templates.getTemplate("data_library/filters/dropdown/template"),c.god.bind("closeDialogs",this.hide,this),this._initBinds()},_initBinds:function(){this.add_related_model(this.collection)},_onClickAll:function(a){this.collection.options.set({tags:"",page:1}),this.hide()},_onClickLink:function(a){var b=d(a.target).text();this.collection.options.set({tags:b,page:1}),this.hide()},render:function(){return this.$el.html(this.template_base({})),d("body").append(this.el),this},clean:function(){this.elder("clean")}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.cdb:"undefined"!=typeof c?c.cdb:null,e=a("./dropdown/view"),f="undefined"!=typeof window?window.cdb.Utils:"undefined"!=typeof c?c.cdb.Utils:null;b.exports=d.core.View.extend({events:{"submit .js-search-form":"_submitSearch","keydown .js-search-form":"_onSearchKeyDown","click .js-search-form":"killEvent","click .js-search-link":"_onSearchClick","click .js-clean-search":"_onCleanSearchClick","click .js-categoriesDropdown":"_createDropdown"},initialize:function(){this.template=d.templates.getTemplate("data_library/filters/template"),this._preRender(),this._initBinds()},_preRender:function(){var a=$("<div>").addClass("u-inner"),b=$("<div>").addClass("Filters-inner");this.$el.append(a.append(b))},render:function(){return this.$(".Filters-inner").html(this.template({tag:this.collection.options.get("tags"),q:this.collection.options.get("q")})),this},_initBinds:function(){this.collection.bind("add remove change reset",this.render,this),this.collection.options.bind("change:tags",this.render,this),this.add_related_model(this.collection),this.add_related_model(this.collection.options),this.add_related_model(d.god)},_createDropdown:function(a){this.killEvent(a),this._setupDropdown(new e({target:$(a.target).closest(".js-categoriesDropdown"),horizontal_position:"horizontal_left",horizontal_offset:-90,tick:"center",collection:this.collection,position:"offset",vertical_offset:-20}))},_setupDropdown:function(a){this._closeAnyOtherOpenDialogs(),this.addView(a),d.god.bind("closeDialogs",function(){a.clean()},this),this.add_related_model(d.god),a.render(),a.open()},_closeAnyOtherOpenDialogs:function(){d.god.trigger("closeDialogs")},_onSearchClick:function(a){this.killEvent(a),this.$(".js-search-input").val(""),this.$(".js-search-input").focus()},_onSearchKeyDown:function(a){27===a.keyCode&&this._onSearchClick(a)},_onCleanSearchClick:function(a){this.killEvent(a),this._cleanSearch()},_submitSearch:function(a){this.killEvent(a),this.model.set("is_searching",!0),this.collection.options.set({q:f.stripHTML(this.$(".js-search-input").val().trim(),""),page:1}),this.render()},_cleanSearch:function(){this.model.set("is_searching",!1),this.collection.options.set({q:"",page:1}),this.render()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./dropdown/view":9}],11:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.cdb:"undefined"!=typeof a?a.cdb:null,d="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=c.core.View.extend({className:"DataLibrary-header",initialize:function(){_.bindAll(this,"_addGeojsonData"),this.ACTIVE_CARTODB_ID=null,this.template_base=c.templates.getTemplate("data_library/header/template"),this._initBindings()},events:{"click .js-country":"_onClickCountry","click .js-back":"_onClickBack"},_initBindings:function(){this.model.bind("change:show_more",this._onChangeShowMore,this),this.model.bind("change:vis_count",this._onChangeVisCount,this),this.model.bind("change:show_countries",this._onChangeCountries,this)},load:function(){this.map=L.map(this.$("#DataLibraryMap")[0],{zoomControl:!1,attributionControl:!1}).setView([44,-31],3);var a=c.config.get("sql_api_template").replace("{user}",c.config.get("data_library_user")),b=a+"/api/v2/sql?q="+encodeURIComponent("select * from world_borders")+"&format=geojson&filename=world_borders";d.getJSON(b).done(this._addGeojsonData)},_addGeojsonData:function(a){var b=this,c={color:"#2E3C43",weight:1,opacity:1,fillColor:"#242D32",fillOpacity:1};this.layer=L.geoJson(a,{style:c,onEachFeature:function(a,c){c.on("click",function(d){a.properties.cartodb_id!=b.ACTIVE_CARTODB_ID&&b._onClickFeature(a,c,d.layer)}).on("mouseover",function(a){b._onMouseOverFeature(c,a.target)}).on("mouseout",function(){b._onMouseOutFeature()})}}).addTo(this.map)},_onClickFeature:function(a,b,c){this.ACTIVE_CARTODB_ID=a.properties.cartodb_id,this.layer.eachLayer(function(a){a.setStyle({fillColor:"#242D32"})}),b.setStyle({fillColor:"#fff"});var d=c.getBounds();this.map.fitBounds(d),this._updateBounds([d._southWest.lng,d._southWest.lat,d._northEast.lng,d._northEast.lat])},_onMouseOverFeature:function(a,b){var c=this;this.layer.eachLayer(function(a){a.feature.properties.cartodb_id!=c.ACTIVE_CARTODB_ID&&a.setStyle({fillColor:"#242D32"})}),b.feature.properties.cartodb_id!=this.ACTIVE_CARTODB_ID&&a.setStyle({fillColor:"#616567"})},_onMouseOutFeature:function(){var a=this;this.layer.eachLayer(function(b){b.feature.properties.cartodb_id!=a.ACTIVE_CARTODB_ID&&b.setStyle({fillColor:"#242D32"})})},show:function(){d(".js-Header-title").removeClass("is-hidden"),d(".js-Header-footer").removeClass("is-hidden"),this.$el.addClass("is-active")},hide:function(){d(".js-Header-title").addClass("is-hidden"),d(".js-Header-footer").addClass("is-hidden"),this.$el.removeClass("is-active")},_updateBounds:function(a){this.collection.options.set({bbox:a.join(","),page:1})},_onClickCountry:function(){this.model.set("show_countries",!0)},_onClickBack:function(){this.model.set("show_countries",!1),this.ACTIVE_CARTODB_ID=null,this.collection.options.set({bbox:"",page:1}),this.map.setView([44,-31],3),this.layer.eachLayer(function(a){a.setStyle({fillColor:"#242D32"})})},render:function(){return this.$el.html(this.template_base({})),this},_onChangeCountries:function(){this.$(".js-Header-title").toggleClass("is-hidden",this.model.get("show_countries")),this.$(".js-CountrySelector").toggleClass("is-hidden",this.model.get("show_countries")),this.$(".js-CountrySelector-back").toggleClass("is-hidden",!this.model.get("show_countries")),this.$el.toggleClass("is-active",this.model.get("show_countries"))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.cdb:"undefined"!=typeof c?c.cdb:null,e=a("./filters/view"),f=a("./content/list/view"),g=a("./content/view"),h=a("./datasets_collection"),i=a("./header/view");b.exports=d.core.View.extend({events:{"click .js-more":"_onClickMore"},initialize:function(){this._initModels(),this._initViews(),this._initBindings()},_initViews:function(){this.controlledViews={},this.enabledViews=[];var a=new i({model:this.model,collection:this.collection});this.addView(a),$(".js-Header--datalibrary").append(a.render().el),a.load();var b=new e({el:this.$(".Filters"),collection:this.collection,model:this.model});b.render(),this.addView(b);var c=new g({model:this.model,collection:this.collection,template:"data_library/content/more_template"});this.$el.append(c.render().el),this.addView(c);var d=new f({collection:this.collection});this.$(".js-DataLibrary-content").append(d.render().el),this.addView(d),this.controlledViews.list=d;var h=new g({model:this.model,collection:this.collection,template:"data_library/content/no_results_template"});this.$el.append(h.render().el),this.addView(h),this.controlledViews.no_results=h;var j=new g({model:this.model,collection:this.collection,template:"data_library/content/error_template"});this.$el.append(j.render().el),this.addView(j),this.controlledViews.error=j;var k=new g({model:this.model,collection:this.collection,template:"data_library/content/loader_template"});this.$el.append(k.render().el),this.addView(k),this.controlledViews.main_loader=k},_fetchCollection:function(){this.collection.fetch()},render:function(){return this._fetchCollection(),this},_initBindings:function(){this.model.bind("change:show_more",this._onChangeShowMore,this),this.model.bind("change:vis_count",this._onChangeVisCount,this),this.collection.options.bind("change:tags",function(){this.model.set({vis_count:0})},this),this.collection.options.bind("change:bbox",function(){this.model.set({vis_count:0})},this),this.collection.options.bind("change",function(){this.model.set({show_more:!1}),this._fetchCollection()},this),this.collection.bind("reset",function(){this._onDataFetched()},this),this.collection.bind("loading",function(){1===this.collection.options.get("page")?this._showLoader():this._showLoaderOnly()},this),this.collection.bind("error",function(a,b,c){(!b||b&&"abort"!==b.statusText)&&this._onDataError(b)},this),this.add_related_model(this.collection),this.add_related_model(this.collection.options)},_onChangeVisCount:function(){this.model.get("vis_count")>=this.collection.total_entries?this.model.set({show_more:!1}):this.model.set({show_more:!0})},_onChangeShowMore:function(){this.$(".js-more").toggleClass("is-hidden",!this.model.get("show_more"))},_onDataFetched:function(){var a=[];0===this.collection.size()?a.push("no_results"):(this.model.set({vis_count:this.model.get("vis_count")+this.collection.length,show_more:!0}),a.push("list")),this._hideBlocks(),this._showBlocks(a)},_onDataError:function(a){window.trackJs&&window.trackJs.track&&window.trackJs.track(a),this._hideBlocks(),this._showBlocks(["error"])},_showBlocks:function(a){var b=this;a?_.each(a,function(a){b.controlledViews[a].show(),b.enabledViews.push(a)}):(b.enabledViews=[],_.each(this.controlledViews,function(a){a.show(),b.enabledViews.push(a)}))},_hideBlocks:function(a){var b=this;a?_.each(a,function(a){b.controlledViews[a].hide(),b.enabledViews=_.without(b.enabledViews,a)}):(_.each(this.controlledViews,function(a){a.hide()}),b.enabledViews=[])},_isBlockEnabled:function(a){return!!a&&_.contains(this.enabledViews,a)},_showLoader:function(){this._hideBlocks(),this._showBlocks(["main_loader"])},_showLoaderOnly:function(){this._showBlocks(["main_loader"])},_hideLoader:function(){this._hideBlocks(["main_loader"])},_initModels:function(){this.model=new d.core.Model({vis_count:0,show_countries:!1,is_searching:!1}),this.collection=new h,this._resetOptions()},_resetOptions:function(){this.collection.options.set({q:"",order:"updated_at",page:1,tags:"",bbox:"",source:[],type:"table"})},_onClickMore:function(a){this.killEvent(a),this.model.set({show_more:!1}),this.collection.options.set({page:this.collection.options.get("page")+1})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./content/list/view":5,"./content/view":6,"./datasets_collection":7,"./filters/view":10,"./header/view":11}],13:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.cdb:"undefined"!=typeof a?a.cdb:null;c.admin="undefined"!=typeof window?window.cdb.admin:"undefined"!=typeof a?a.cdb.admin:null;var d="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=c.admin.DropdownMenu.extend({className:"CDB-Text Dropdown Dropdown--public",initialize:function(){this.elder("initialize"),this.template_base=c.templates.getTemplate("public_common/user_industries/dropdown_template"),c.god.bind("closeDialogs",this.hide,this)},render:function(){return this.$el.html(this.template_base()),d("body").append(this.el),this},clean:function(){d(this.options.target).unbind("click",this._handleClick),this.constructor.__super__.clean.apply(this)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.cdb:"undefined"!=typeof c?c.cdb:null,e=a("./user_industries/dropdown_view"),f="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null;b.exports=d.core.View.extend({events:{"click .js-dropdown-target":"_createDropdown"},_createDropdown:function(a){this.killEvent(a),d.god.trigger("closeDialogs");var b=new e({target:f(a.target),vertical_offset:-10,horizontal_offset:f(a.target).width()-100,horizontal_position:"left",tick:"center"});b.render(),b.on("onDropdownHidden",function(){b.clean()},this),b.open()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./user_industries/dropdown_view":13}],15:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.cdb:"undefined"!=typeof a?a.cdb:null;c.admin="undefined"!=typeof window?window.cdb.admin:"undefined"!=typeof a?a.cdb.admin:null;var d="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=c.admin.DropdownMenu.extend({className:"CDB-Text Dropdown",initialize:function(){this.elder("initialize"),this.template_base=c.templates.getTemplate("public_common/user_settings/dropdown_template"),c.god.bind("closeDialogs",this.hide,this)},render:function(){var a=this.model,b=a.viewUrl();return this.$el.html(this.template_base({name:a.get("name")||a.get("username"),email:a.get("email"),isOrgOwner:a.isOrgOwner(),dashboardUrl:b.dashboard(),publicProfileUrl:b.publicProfile(),accountSettingsUrl:b.accountSettings(),logoutUrl:b.logout()})),d("body").append(this.el),this},clean:function(){d(this.options.target).unbind("click",this._handleClick),this.constructor.__super__.clean.apply(this)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.cdb:"undefined"!=typeof c?c.cdb:null,e=a("./user_settings/dropdown_view"),f="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null;b.exports=d.core.View.extend({events:{"click .js-dropdown-target":"_createDropdown"},render:function(){var a=this.model.viewUrl().dashboard(),b=a.datasets(),c=a.maps();return this.$el.html(d.templates.getTemplate("public_common/user_settings_template")({avatarUrl:this.model.get("avatar_url"),mapsUrl:c,datasetsUrl:b})),this},_createDropdown:function(a){this.killEvent(a),d.god.trigger("closeDialogs");var b=new e({target:f(a.target),model:this.model,horizontal_offset:18});b.render(),b.on("onDropdownHidden",function(){b.clean()},this),b.open()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./user_settings/dropdown_view":15}],17:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.cdb:"undefined"!=typeof a?a.cdb:null;b.exports=c.admin.DropdownMenu.extend({className:"Dropdown",initialize:function(){this.elder("initialize"),c.god.bind("closeDialogs",this.hide,this)},render:function(){return this.$el.show(),this},clean:function(){this.$el.hide()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.cdb:"undefined"!=typeof c?c.cdb:null,e="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,f=a("./user_info/breadcrumb_dropdown_view");b.exports=d.core.View.extend({events:{"click .js-breadcrumb-dropdown-target":"_createBreadcrumbDropdown"},render:function(){return this},_createBreadcrumbDropdown:function(a){this.killEvent(a);var b=new f({target:e(".js-breadcrumb-dropdown-target"),el:e(".js-breadcrumb-dropdown-content"),horizontal_offset:3,horizontal_position:"right",tick:"right"});this.addView(b),b.on("onDropdownShown",function(){d.god.trigger("closeDialogs")},this),b.open()}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./user_info/breadcrumb_dropdown_view":17}]},{},[8]);
//# sourceMappingURL=data_library.js.map