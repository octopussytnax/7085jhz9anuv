{"version":3,"sources":["../../../../lib/assets/javascripts/cartodb/signup/entry.js","../../../../vendor/assets/javascripts/jquery.tipsy.js"],"names":["input_value","inputId","input","document","getElementById","value","valid_google_signup","$","maybeCall","thing","ctx","call","isElementInDOM","ele","parentNode","Tipsy","element","options","this","$element","enabled","fixTitle","MOVE_OFFSET","prototype","show","title","getTitle","$tip","tip","find","html","className","remove","css","top","left","visibility","display","prependTo","body","addClass","tp","pos","extend","offset","width","getBoundingClientRect","height","actualWidth","offsetWidth","actualHeight","offsetHeight","gravity","charAt","mo","parseInt","opacity","length","fade","stop","animate","hide","$e","attr","removeAttr","o","replace","fallback","data","validate","enable","disable","toggleEnabled","fn","tipsy","get","elementOptions","enter","hoverState","delayIn","setTimeout","leave","delayOut","defaults","live","each","trigger","binder","eventIn","eventOut","revalidate","pointee","metadata","autoNS","scrollTop","window","autoWE","scrollLeft","autoBounds","margin","prefer","dir","ns","ew","boundTop","boundLeft","$this","jQuery","Signup","Backbone","View","el","events","submit .js-Loading-form","click .js-Carrousel-navLink","initialize","_initViews","animationPlay","_animate","self","_","_initFieldError","_onCLickCarrouselNavLink","e","preventDefault","$target","target","x","closest","index","_restartAnimation","clearInterval","_changeMenu","setInterval","y","next","removeClass","z","t","progress","append","clone","prepend","_checkForm","$loading","prop","outerWidth","outerHeight","signup","has_errors","checked","form","submit"],"mappings":"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","file":"signup.js","sourcesContent":["\n$(function() {\n\n  /**\n   *  Signup view\n   *\n   */\n\n  var Signup = Backbone.View.extend({\n\n    el: document.body,\n\n    events: {\n      'submit .js-Loading-form': '_checkForm',\n      'click .js-Carrousel-navLink': '_onCLickCarrouselNavLink'\n    },\n\n    initialize: function() {\n      this._initViews();\n      this.animationPlay;\n      this._animate();\n    },\n\n    _initViews: function() {\n      var self = this;\n\n      _.each(this.$('.js-Sessions-fieldError'), function(el) {\n        self._initFieldError(el);\n      })\n    },\n\n    _onCLickCarrouselNavLink: function(e) {\n      e.preventDefault();\n\n      var $target = $(e.target);\n      var x = $target.closest('.js-Carrousel-navItem').index();\n\n      this._restartAnimation();\n      clearInterval(this.animationPlay);\n      this._changeMenu($target, x);\n      this._animate();\n    },\n\n    _animate: function() {\n      var self = this;\n\n      this.animationPlay = setInterval(function() {\n        var x = $('.js-Carrousel-navItem.is-active').index()+1;\n        var y = $('.js-Carrousel-navItem.is-active').next().find('.js-Carrousel-navLink');\n\n        if (x < $('.js-Carrousel-navItem').length) {\n          self._changeMenu (y, x);\n          self._restartAnimation();\n        } else {\n          var x = 0;\n          var y = $('.js-Carrousel-navLink')[0];\n\n          self._changeMenu (y, x);\n          self._restartAnimation();\n        }\n      }, 5000);\n    },\n\n    _changeMenu: function(y, x) {\n      this.$('.js-Carrousel-navItem').removeClass ('is-active');\n      this.$('.js-Carrousel-slide').removeClass ('is-active');\n      this.$('.js-Carrousel-textItem').removeClass ('is-active');\n\n      $(y).closest('.js-Carrousel-navItem').addClass('is-active');\n\n      var z = $('.js-Carrousel-slide')[x];\n      $(z).addClass('is-active');\n\n      var t = $('.js-Carrousel-textItem')[x];\n      $(t).addClass('is-active');\n    },\n\n    _restartAnimation: function() {\n      var progress = $('<div>').append(this.$('.js-Progress').clone()).remove().html();\n\n      this.$('.js-Progress').remove();\n      this.$('.js-Browser-media').prepend(progress);\n    },\n\n    _initFieldError: function(el) {\n      $(el).tipsy({\n        fade: true,\n        gravity: \"s\",\n        offset: 0,\n        className: 'errorTooltip',\n        title: function() {\n          return $(el).data('content')\n        }\n      });\n    },\n\n    _checkForm: function() {\n      var $loading = this.$('.js-Loading');\n\n      $loading.prop('disabled', true);\n\n      $loading.css({\n        width: $loading.outerWidth(),\n        height: $loading.outerHeight()\n      });\n\n      $loading.find(\".js-Loading-text\").hide();\n      $loading.find(\".js-Loading-anim\").show();\n    }\n\n  });\n\n\n  window.signup = new Signup();\n});\n\nfunction input_value (inputId) {\n  var input = document.getElementById('user_google_sign_in');\n  if (input === null) {\n    return null;\n  } else {\n    return input.value;\n  }\n}\n\nfunction valid_google_signup () {\n  return input_value('user_google_sign_in') === 'true' && input_value('user_email') !== '' && input_value('user_username') !== '';\n}\n\nvar has_errors = document.getElementById('has_errors');\nif (valid_google_signup() && has_errors != null && has_errors.value === 'false') {\n  document.getElementById('user_terms').checked = true;\n  document.getElementById('user_google_sign_in').form.submit();\n} else {\n  $('.Sessions-loggedin').removeClass('is-active');\n  $('.Sessions-notloggedin').addClass('is-active');\n}\n","// tipsy, facebook style tooltips for jquery with fancy fading\n// version 1.0.0a\n// (c) 2008-2010 jason frame [jason@onehackoranother.com] and modificated by Sergio Alvarez @saleiva\n// released under the MIT license\n//\n//  Changes:\n//  April 27 2016: fixed problem with element size.\n//  June 3 2013: Added the custom class before the calc of the position.\n\n(function($) {\n\n  var MOVE_OFFSET = 6;\n\n  function maybeCall(thing, ctx) {\n    return (typeof thing == 'function') ? (thing.call(ctx)) : thing;\n  };\n\n  function isElementInDOM(ele) {\n    while (ele = ele.parentNode) {\n      if (ele == document) return true;\n    }\n    return false;\n  };\n\n  function Tipsy(element, options) {\n    this.$element = $(element);\n    this.options = options;\n    this.enabled = true;\n    this.fixTitle();\n  };\n\n  Tipsy.prototype = {\n    show: function() {\n      var title = this.getTitle();\n      if (title && this.enabled) {\n        var $tip = this.tip();\n\n        $tip.find('.tipsy-inner')[this.options.html ? 'html' : 'text'](title);\n            $tip[0].className = 'tipsy'; // reset classname in case of dynamic gravity\n            $tip.remove().css({top: 0, left: 0, visibility: 'hidden', display: 'block'}).prependTo(document.body);\n\n            // Modified so we can use custom class names\n            if (this.options.className) {\n              $tip.addClass(maybeCall(this.options.className, this.$element[0]));\n            }\n\n            // Modified\n            var pos = $.extend({}, this.$element.offset(), {\n              width: this.$element[0].getBoundingClientRect().width,\n              height: this.$element[0].getBoundingClientRect().height\n            });\n\n            var actualWidth = $tip[0].offsetWidth,\n            actualHeight = $tip[0].offsetHeight,\n            gravity = maybeCall(this.options.gravity, this.$element[0]);\n\n            var tp;\n            switch (gravity.charAt(0)) {\n              case 'n':\n              tp = {top: pos.top + pos.height + this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n              mo = {top: parseInt(pos.top + pos.height + this.options.offset + MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n              case 's':\n              tp = {top: pos.top - actualHeight - this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n              mo = {top: parseInt(pos.top - actualHeight - this.options.offset - MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n              case 'e':\n              tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth - this.options.offset};\n              mo = {left: parseInt(pos.left - actualWidth - this.options.offset - MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n              case 'w':\n              tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width + this.options.offset};\n              mo = {left: parseInt(pos.left + pos.width + this.options.offset + MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n            }\n\n            if (gravity.length == 2) {\n              if (gravity.charAt(1) == 'w') {\n                tp.left = pos.left + pos.width / 2 - 15;\n              } else {\n                tp.left = pos.left + pos.width / 2 - actualWidth + 15;\n              }\n            }\n\n            $tip.css(tp).addClass('tipsy-' + gravity);\n            $tip.find('.tipsy-arrow')[0].className = 'tipsy-arrow tipsy-arrow-' + gravity.charAt(0);\n\n            if (this.options.fade) {\n              $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate(mo, 200);\n            } else {\n              $tip.css({visibility: 'visible', opacity: this.options.opacity});\n            }\n          }\n        },\n\n        hide: function() {\n\n          gravity = maybeCall(this.options.gravity, this.$element[0]);\n\n          switch (gravity.charAt(0)) {\n            case 'n':\n            mo = {top: parseInt(this.tip().css(\"top\")) + MOVE_OFFSET, opacity: 0};\n            break;\n            case 's':\n            mo = {top: parseInt(this.tip().css(\"top\")) - MOVE_OFFSET, opacity: 0};\n            break;\n            case 'e':\n            mo = {left: parseInt(this.tip().css(\"left\")) - MOVE_OFFSET, opacity: 0};\n            break;\n            case 'w':\n            mo = {left: parseInt(this.tip().css(\"left\")) + MOVE_OFFSET, opacity: 0};\n            break;\n          }\n\n          if (this.options.fade) {\n            this.tip().stop().animate(mo, 200, function(){$(this).remove();});\n          } else {\n            this.tip().remove();\n          }\n        },\n\n        fixTitle: function() {\n          var $e = this.$element;\n          if ($e.attr('title') || typeof($e.attr('original-title')) != 'string') {\n            $e.attr('original-title', $e.attr('title') || '').removeAttr('title');\n          }\n        },\n\n        getTitle: function() {\n          var title, $e = this.$element, o = this.options;\n          this.fixTitle();\n          var title, o = this.options;\n          if (typeof o.title == 'string') {\n            title = $e.attr(o.title == 'title' ? 'original-title' : o.title);\n          } else if (typeof o.title == 'function') {\n            title = o.title.call($e[0]);\n          }\n          title = ('' + title).replace(/(^\\s*|\\s*$)/, \"\");\n          return title || o.fallback;\n        },\n\n        tip: function() {\n          if (!this.$tip) {\n            this.$tip = $('<div class=\"tipsy\"></div>').html('<div class=\"tipsy-arrow\"></div><div class=\"tipsy-inner\"></div>');\n            this.$tip.data('tipsy-pointee', this.$element[0]);\n          }\n          return this.$tip;\n        },\n\n        validate: function() {\n          if (!this.$element[0].parentNode) {\n            this.hide();\n            this.$element = null;\n            this.options = null;\n          }\n        },\n\n        remove: function() { this.enabled = false; this.$tip && this.$tip.remove(); },\n        enable: function() { this.enabled = true; },\n        disable: function() { this.enabled = false; },\n        toggleEnabled: function() { this.enabled = !this.enabled; }\n      };\n\n      $.fn.tipsy = function(options) {\n\n        if (options === true) {\n          return this.data('tipsy');\n        } else if (typeof options == 'string') {\n          var tipsy = this.data('tipsy');\n          if (tipsy) tipsy[options]();\n          return this;\n        }\n\n        options = $.extend({}, $.fn.tipsy.defaults, options);\n\n        function get(ele) {\n          var tipsy = $.data(ele, 'tipsy');\n          if (!tipsy) {\n            tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));\n            $.data(ele, 'tipsy', tipsy);\n          }\n          return tipsy;\n        }\n\n        function enter() {\n          var tipsy = get(this);\n          tipsy.hoverState = 'in';\n          if (options.delayIn == 0) {\n            tipsy.show();\n          } else {\n            tipsy.fixTitle();\n            setTimeout(function() { if (tipsy.hoverState == 'in') tipsy.show(); }, options.delayIn);\n          }\n        };\n\n        function leave() {\n          var tipsy = get(this);\n          tipsy.hoverState = 'out';\n          if (options.delayOut == 0) {\n            tipsy.hide();\n          } else {\n            setTimeout(function() { if (tipsy.hoverState == 'out') tipsy.hide(); }, options.delayOut);\n          }\n        };\n\n        if (!options.live) this.each(function() { get(this); });\n\n        if (options.trigger != 'manual') {\n          var binder   = options.live ? 'live' : 'bind',\n          eventIn  = options.trigger == 'hover' ? 'mouseenter' : 'focus',\n          eventOut = options.trigger == 'hover' ? 'mouseleave' : 'blur';\n          this[binder](eventIn, enter)[binder](eventOut, leave);\n        }\n\n        return this;\n\n      };\n\n      $.fn.tipsy.defaults = {\n        className: null,\n        delayIn: 0,\n        delayOut: 0,\n        fade: false,\n        fallback: '',\n        gravity: 'n',\n        html: false,\n        live: false,\n        offset: 0,\n        opacity: 0.8,\n        title: 'title',\n        trigger: 'hover'\n      };\n\n      $.fn.tipsy.revalidate = function() {\n        $('.tipsy').each(function() {\n          var pointee = $.data(this, 'tipsy-pointee');\n          if (!pointee || !isElementInDOM(pointee)) {\n            $(this).remove();\n          }\n        });\n      };\n\n    // Overwrite this method to provide options on a per-element basis.\n    // For example, you could store the gravity in a 'tipsy-gravity' attribute:\n    // return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });\n    // (remember - do not modify 'options' in place!)\n    $.fn.tipsy.elementOptions = function(ele, options) {\n      return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;\n    };\n\n    $.fn.tipsy.autoNS = function() {\n      return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? 's' : 'n';\n    };\n\n    $.fn.tipsy.autoWE = function() {\n      return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'e' : 'w';\n    };\n\n    /**\n     * yields a closure of the supplied parameters, producing a function that takes\n     * no arguments and is suitable for use as an autogravity function like so:\n     *\n     * @param margin (int) - distance from the viewable region edge that an\n     *        element should be before setting its tooltip's gravity to be away\n     *        from that edge.\n     * @param prefer (string, e.g. 'n', 'sw', 'w') - the direction to prefer\n     *        if there are no viewable region edges effecting the tooltip's\n     *        gravity. It will try to vary from this minimally, for example,\n     *        if 'sw' is preferred and an element is near the right viewable\n     *        region edge, but not the top edge, it will set the gravity for\n     *        that element's tooltip to be 'se', preserving the southern\n     *        component.\n     */\n     $.fn.tipsy.autoBounds = function(margin, prefer) {\n      return function() {\n       var dir = {ns: prefer[0], ew: (prefer.length > 1 ? prefer[1] : false)},\n       boundTop = $(document).scrollTop() + margin,\n       boundLeft = $(document).scrollLeft() + margin,\n       $this = $(this);\n\n       if ($this.offset().top < boundTop) dir.ns = 'n';\n       if ($this.offset().left < boundLeft) dir.ew = 'w';\n       if ($(window).width() + $(document).scrollLeft() - $this.offset().left < margin) dir.ew = 'e';\n       if ($(window).height() + $(document).scrollTop() - $this.offset().top < margin) dir.ns = 's';\n\n       return dir.ns + (dir.ew ? dir.ew : '');\n     }\n   };\n\n })(jQuery);\n"]}